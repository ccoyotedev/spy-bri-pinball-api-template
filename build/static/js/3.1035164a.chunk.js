/*! For license information please see 3.1035164a.chunk.js.LICENSE.txt */
(this["webpackJsonpaavegotchi-minigame-template"]=this["webpackJsonpaavegotchi-minigame-template"]||[]).push([[3],[function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"CONSTANTS",(function(){return i})),n.d(e,"Deferred",(function(){return d})),n.d(e,"ErrorFactory",(function(){return I})),n.d(e,"FirebaseError",(function(){return P})),n.d(e,"MAX_VALUE_MILLIS",(function(){return st})),n.d(e,"RANDOM_FACTOR",(function(){return at})),n.d(e,"Sha1",(function(){return q})),n.d(e,"areCookiesEnabled",(function(){return O})),n.d(e,"assert",(function(){return o})),n.d(e,"assertionError",(function(){return s})),n.d(e,"async",(function(){return J})),n.d(e,"base64",(function(){return u})),n.d(e,"base64Decode",(function(){return h})),n.d(e,"base64Encode",(function(){return c})),n.d(e,"calculateBackoffMillis",(function(){return ut})),n.d(e,"contains",(function(){return V})),n.d(e,"createMockUserToken",(function(){return p})),n.d(e,"createSubscribe",(function(){return K})),n.d(e,"decode",(function(){return D})),n.d(e,"deepCopy",(function(){return l})),n.d(e,"deepExtend",(function(){return f})),n.d(e,"errorPrefix",(function(){return tt})),n.d(e,"extractQuerystring",(function(){return H})),n.d(e,"getGlobal",(function(){return C})),n.d(e,"getModularInstance",(function(){return ht})),n.d(e,"getUA",(function(){return v})),n.d(e,"isAdmin",(function(){return U})),n.d(e,"isBrowser",(function(){return y})),n.d(e,"isBrowserExtension",(function(){return b})),n.d(e,"isElectron",(function(){return x})),n.d(e,"isEmpty",(function(){return G})),n.d(e,"isIE",(function(){return _})),n.d(e,"isIndexedDBAvailable",(function(){return k})),n.d(e,"isMobileCordova",(function(){return g})),n.d(e,"isNode",(function(){return m})),n.d(e,"isNodeSdk",(function(){return E})),n.d(e,"isReactNative",(function(){return w})),n.d(e,"isSafari",(function(){return S})),n.d(e,"isUWP",(function(){return T})),n.d(e,"isValidFormat",(function(){return B})),n.d(e,"isValidTimestamp",(function(){return F})),n.d(e,"issuedAtTime",(function(){return j})),n.d(e,"jsonEval",(function(){return N})),n.d(e,"map",(function(){return Y})),n.d(e,"ordinal",(function(){return ct})),n.d(e,"querystring",(function(){return W})),n.d(e,"querystringDecode",(function(){return X})),n.d(e,"safeGet",(function(){return z})),n.d(e,"stringLength",(function(){return ot})),n.d(e,"stringToByteArray",(function(){return it})),n.d(e,"stringify",(function(){return L})),n.d(e,"validateArgCount",(function(){return Z})),n.d(e,"validateCallback",(function(){return nt})),n.d(e,"validateContextObject",(function(){return rt})),n.d(e,"validateIndexedDBOpenable",(function(){return A})),n.d(e,"validateNamespace",(function(){return et}));var r=n(90),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw s(e)},s=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},a=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,d=63&c;u||(d=64,s||(f=64)),r.push(n[h],n[l],n[f],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(a(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var h=s<<4&240|a>>2;if(r.push(h),64!==u){var l=a<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){var e=a(t);return u.encodeByteArray(e,!0)},h=function(t){try{return u.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return f(void 0,t)}function f(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=f(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function p(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=Object(r.a)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[u.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),u.encodeString(JSON.stringify(s),!1),""].join(".")}function v(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function g(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(v())}function m(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(e){return!1}}function y(){return"object"===typeof self&&self.self===self}function b(){var t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function w(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function x(){return v().indexOf("Electron/")>=0}function _(){var t=v();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function T(){return v().indexOf("MSAppHost/")>=0}function E(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN}function S(){return!m()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k(){return"indexedDB"in self&&null!=indexedDB}function A(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}}))}function O(){return!(!navigator||!navigator.cookieEnabled)}function C(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof t)return t;throw new Error("Unable to locate global object.")}var P=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,I.prototype.create),o}return Object(r.b)(e,t),e}(Error),I=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?R(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new P(i,a,r);return u},t}();function R(t,e){return t.replace(M,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var M=/\{\$([^}]+)}/g;function N(t){return JSON.parse(t)}function L(t){return JSON.stringify(t)}var D=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=N(h(o[0])||""),n=N(h(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},F=function(t){var e=D(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"===typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},j=function(t){var e=D(t).claims;return"object"===typeof e&&e.hasOwnProperty("iat")?e.iat:null},B=function(t){var e=D(t).claims;return!!e&&"object"===typeof e&&e.hasOwnProperty("iat")},U=function(t){var e=D(t).claims;return"object"===typeof e&&!0===e.admin};function V(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function z(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function G(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Y(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function W(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}function X(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("="),r=n[0],i=n[1];e[decodeURIComponent(r)]=decodeURIComponent(i)}})),e}function H(t){var e=t.indexOf("?");if(!e)return"";var n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var q=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):r<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782);i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295;l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function K(t,e){var n=new $(t,e);return n.subscribe.bind(n)}var $=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!==typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"===typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=Q),void 0===r.error&&(r.error=Q),void 0===r.complete&&(r.complete=Q);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function J(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}}function Q(){}var Z=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function tt(t,e){return t+" failed: "+e+" argument "}function et(t,e,n){if((!n||e)&&"string"!==typeof e)throw new Error(tt(t,"namespace")+"must be a valid firebase namespace.")}function nt(t,e,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(tt(t,e)+"must be a valid function.")}function rt(t,e,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(tt(t,e)+"must be a valid context object.")}var it=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var s=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},ot=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},st=144e5,at=.5;function ut(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(at*r*(Math.random()-.5)*2);return Math.min(st,r+i)}function ct(t){return Number.isFinite(t)?t+function(t){var e=(t=Math.abs(t))%100;if(e>=10&&e<=20)return"th";var n=t%10;if(1===n)return"st";if(2===n)return"nd";if(3===n)return"rd";return"th"}(t):""+t}function ht(t){return t&&t._delegate?t._delegate:t}}.call(this,n(45))},function(t,e,n){"use strict";n.d(e,"k",(function(){return s})),n.d(e,"j",(function(){return u})),n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return h})),n.d(e,"o",(function(){return l})),n.d(e,"p",(function(){return f})),n.d(e,"l",(function(){return d})),n.d(e,"i",(function(){return v})),n.d(e,"d",(function(){return g})),n.d(e,"e",(function(){return m})),n.d(e,"c",(function(){return y})),n.d(e,"g",(function(){return b})),n.d(e,"f",(function(){return w})),n.d(e,"h",(function(){return x})),n.d(e,"n",(function(){return _})),n.d(e,"m",(function(){return T}));var r=new(n(5).b)("bytes/5.5.0");function i(t){return!!t.toHexString}function o(t){return t.slice||(t.slice=function(){var e=Array.prototype.slice.call(arguments);return o(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function s(t){return d(t)&&!(t.length%2)||u(t)}function a(t){return"number"===typeof t&&t==t&&t%1===0}function u(t){if(null==t)return!1;if(t.constructor===Uint8Array)return!0;if("string"===typeof t)return!1;if(!a(t.length)||t.length<0)return!1;for(var e=0;e<t.length;e++){var n=t[e];if(!a(n)||n<0||n>=256)return!1}return!0}function c(t,e){if(e||(e={}),"number"===typeof t){r.checkSafeUint53(t,"invalid arrayify value");for(var n=[];t;)n.unshift(255&t),t=parseInt(String(t/256));return 0===n.length&&n.push(0),o(new Uint8Array(n))}if(e.allowMissingPrefix&&"string"===typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),i(t)&&(t=t.toHexString()),d(t)){var s=t.substring(2);s.length%2&&("left"===e.hexPad?s="0x0"+s.substring(2):"right"===e.hexPad?s+="0":r.throwArgumentError("hex data is odd-length","value",t));for(var a=[],c=0;c<s.length;c+=2)a.push(parseInt(s.substring(c,c+2),16));return o(new Uint8Array(a))}return u(t)?o(new Uint8Array(t)):r.throwArgumentError("invalid arrayify value","value",t)}function h(t){var e=t.map((function(t){return c(t)})),n=e.reduce((function(t,e){return t+e.length}),0),r=new Uint8Array(n);return e.reduce((function(t,e){return r.set(e,t),t+e.length}),0),o(r)}function l(t){var e=c(t);if(0===e.length)return e;for(var n=0;n<e.length&&0===e[n];)n++;return n&&(e=e.slice(n)),e}function f(t,e){(t=c(t)).length>e&&r.throwArgumentError("value out of range","value",arguments[0]);var n=new Uint8Array(e);return n.set(t,e-t.length),o(n)}function d(t,e){return!("string"!==typeof t||!t.match(/^0x[0-9A-Fa-f]*$/))&&(!e||t.length===2+2*e)}var p="0123456789abcdef";function v(t,e){if(e||(e={}),"number"===typeof t){r.checkSafeUint53(t,"invalid hexlify value");for(var n="";t;)n=p[15&t]+n,t=Math.floor(t/16);return n.length?(n.length%2&&(n="0"+n),"0x"+n):"0x00"}if("bigint"===typeof t)return(t=t.toString(16)).length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&"string"===typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),i(t))return t.toHexString();if(d(t))return t.length%2&&("left"===e.hexPad?t="0x0"+t.substring(2):"right"===e.hexPad?t+="0":r.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(u(t)){for(var o="0x",s=0;s<t.length;s++){var a=t[s];o+=p[(240&a)>>4]+p[15&a]}return o}return r.throwArgumentError("invalid hexlify value","value",t)}function g(t){if("string"!==typeof t)t=v(t);else if(!d(t)||t.length%2)return null;return(t.length-2)/2}function m(t,e,n){return"string"!==typeof t?t=v(t):(!d(t)||t.length%2)&&r.throwArgumentError("invalid hexData","value",t),e=2+2*e,null!=n?"0x"+t.substring(e,2+2*n):"0x"+t.substring(e)}function y(t){var e="0x";return t.forEach((function(t){e+=v(t).substring(2)})),e}function b(t){var e=w(v(t,{hexPad:"left"}));return"0x"===e?"0x0":e}function w(t){"string"!==typeof t&&(t=v(t)),d(t)||r.throwArgumentError("invalid hex string","value",t),t=t.substring(2);for(var e=0;e<t.length&&"0"===t[e];)e++;return"0x"+t.substring(e)}function x(t,e){for("string"!==typeof t?t=v(t):d(t)||r.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&r.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function _(t){var e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0};if(s(t)){var n=c(t);65!==n.length&&r.throwArgumentError("invalid signature string; must be 65 bytes","signature",t),e.r=v(n.slice(0,32)),e.s=v(n.slice(32,64)),e.v=n[64],e.v<27&&(0===e.v||1===e.v?e.v+=27:r.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(n[32]|=128),e._vs=v(n.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,null!=e._vs){var i=f(c(e._vs),32);e._vs=v(i);var o=i[0]>=128?1:0;null==e.recoveryParam?e.recoveryParam=o:e.recoveryParam!==o&&r.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),i[0]&=127;var a=v(i);null==e.s?e.s=a:e.s!==a&&r.throwArgumentError("signature v mismatch _vs","signature",t)}if(null==e.recoveryParam)null==e.v?r.throwArgumentError("signature missing v and recoveryParam","signature",t):0===e.v||1===e.v?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(null==e.v)e.v=27+e.recoveryParam;else{var u=0===e.v||1===e.v?e.v:1-e.v%2;e.recoveryParam!==u&&r.throwArgumentError("signature recoveryParam mismatch v","signature",t)}null!=e.r&&d(e.r)?e.r=x(e.r,32):r.throwArgumentError("signature missing or invalid r","signature",t),null!=e.s&&d(e.s)?e.s=x(e.s,32):r.throwArgumentError("signature missing or invalid s","signature",t);var h=c(e.s);h[0]>=128&&r.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(h[0]|=128);var l=v(h);e._vs&&(d(e._vs)||r.throwArgumentError("signature invalid _vs","signature",t),e._vs=x(e._vs,32)),null==e._vs?e._vs=l:e._vs!==l&&r.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e}function T(t){return v(h([(t=_(t)).r,t.s,t.recoveryParam?"0x1c":"0x1b"]))}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return a}));var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function o(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function s(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}Object.create;function a(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create},function(t,e,n){t.exports=n(124)},function(t,e,n){"use strict";t.exports=n(141)},function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return p}));var r=n(7),i=n(8),o=!1,s=!1,a={debug:1,default:2,info:2,warning:3,error:4,off:5},u=a.default,c=null;var h,l,f=function(){try{var t=[];if(["NFD","NFC","NFKD","NFKC"].forEach((function(e){try{if("test"!=="test".normalize(e))throw new Error("bad normalize")}catch(n){t.push(e)}})),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}();!function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"}(h||(h={})),function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED"}(l||(l={}));var d="0123456789abcdef",p=function(){function t(e){Object(r.a)(this,t),Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}return Object(i.a)(t,[{key:"_log",value:function(t,e){var n=t.toLowerCase();null==a[n]&&this.throwArgumentError("invalid log level name","logLevel",t),u>a[n]||console.log.apply(console,e)}},{key:"debug",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this._log(t.levels.DEBUG,n)}},{key:"info",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this._log(t.levels.INFO,n)}},{key:"warn",value:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this._log(t.levels.WARNING,n)}},{key:"makeError",value:function(e,n,r){if(s)return this.makeError("censored error",n,{});n||(n=t.errors.UNKNOWN_ERROR),r||(r={});var i=[];Object.keys(r).forEach((function(t){var e=r[t];try{if(e instanceof Uint8Array){for(var n="",o=0;o<e.length;o++)n+=d[e[o]>>4],n+=d[15&e[o]];i.push(t+"=Uint8Array(0x"+n+")")}else i.push(t+"="+JSON.stringify(e))}catch(a){i.push(t+"="+JSON.stringify(r[t].toString()))}})),i.push("code=".concat(n)),i.push("version=".concat(this.version));var o=e;i.length&&(e+=" ("+i.join(", ")+")");var a=new Error(e);return a.reason=o,a.code=n,Object.keys(r).forEach((function(t){a[t]=r[t]})),a}},{key:"throwError",value:function(t,e,n){throw this.makeError(t,e,n)}},{key:"throwArgumentError",value:function(e,n,r){return this.throwError(e,t.errors.INVALID_ARGUMENT,{argument:n,value:r})}},{key:"assert",value:function(t,e,n,r){t||this.throwError(e,n,r)}},{key:"assertArgument",value:function(t,e,n,r){t||this.throwArgumentError(e,n,r)}},{key:"checkNormalize",value:function(e){null==e&&(e="platform missing String.prototype.normalize"),f&&this.throwError("platform missing String.prototype.normalize",t.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:f})}},{key:"checkSafeUint53",value:function(e,n){"number"===typeof e&&(null==n&&(n="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(n,t.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(n,t.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}},{key:"checkArgumentCount",value:function(e,n,r){r=r?": "+r:"",e<n&&this.throwError("missing argument"+r,t.errors.MISSING_ARGUMENT,{count:e,expectedCount:n}),e>n&&this.throwError("too many arguments"+r,t.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:n})}},{key:"checkNew",value:function(e,n){e!==Object&&null!=e||this.throwError("missing new",t.errors.MISSING_NEW,{name:n.name})}},{key:"checkAbstract",value:function(e,n){e===n?this.throwError("cannot instantiate abstract class "+JSON.stringify(n.name)+" directly; use a sub-class",t.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",t.errors.MISSING_NEW,{name:n.name})}}],[{key:"globalLogger",value:function(){return c||(c=new t("logger/5.5.0")),c}},{key:"setCensorship",value:function(e,n){if(!e&&n&&this.globalLogger().throwError("cannot permanently disable censorship",t.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),o){if(!e)return;this.globalLogger().throwError("error censorship permanent",t.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}s=!!e,o=!!n}},{key:"setLogLevel",value:function(e){var n=a[e.toLowerCase()];null!=n?u=n:t.globalLogger().warn("invalid log level - "+e)}},{key:"from",value:function(e){return new t(e)}}]),t}();p.errors=l,p.levels=h},function(t,e,n){"use strict";t.exports=n(119)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function i(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(59);function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Object(r.a)(t,e)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n(16),i=n(77);function o(t){return o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}var s=n(11);function a(t,e){return!e||"object"!==o(e)&&"function"!==typeof e?Object(s.a)(t):e}function u(t){var e=Object(i.a)();return function(){var n,i=Object(r.a)(t);if(e){var o=Object(r.a)(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return a(this,n)}}},function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.r(e),n.d(e,"firebase",(function(){return _}));var r=function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};Object.create;Object.create;var i,o,s=n(0),a=n(20),u=n(19),c=((i={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",i["bad-app-name"]="Illegal App name: '{$appName}",i["duplicate-app"]="Firebase App named '{$appName}' already exists",i["app-deleted"]="Firebase App named '{$appName}' already deleted",i["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",i["invalid-log-argument"]="First argument to `onLog` must be null or a function.",i),h=new s.ErrorFactory("app","Firebase",c),l="@firebase/app",f="[DEFAULT]",d=((o={})[l]="fire-core",o["@firebase/analytics"]="fire-analytics",o["@firebase/app-check"]="fire-app-check",o["@firebase/auth"]="fire-auth",o["@firebase/database"]="fire-rtdb",o["@firebase/functions"]="fire-fn",o["@firebase/installations"]="fire-iid",o["@firebase/messaging"]="fire-fcm",o["@firebase/performance"]="fire-perf",o["@firebase/remote-config"]="fire-rc",o["@firebase/storage"]="fire-gcs",o["@firebase/firestore"]="fire-fst",o["fire-js"]="fire-js",o["firebase-wrapper"]="fire-js-all",o),p=new u.Logger("@firebase/app"),v=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.deepCopy)(t),this.container=new a.ComponentContainer(e.name),this._addComponent(new a.Component("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw h.create("app-deleted",{appName:this.name_})},t}();v.prototype.name&&v.prototype.options||v.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"===typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!==typeof a||!a)throw h.create("bad-app-name",{appName:String(a)});if(Object(s.contains)(e,a))throw h.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.Component(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!==typeof t)throw h.create("invalid-log-argument");Object(u.setUserLogHandler)(t,e)},apps:null,SDK_VERSION:"8.7.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.contains)(e,t))throw h.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!==typeof t[a])throw h.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.deepExtend)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,l=Object.keys(e);c<l.length;c++){var f=l[c];e[f]._addComponent(o)}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(v);return e.INTERNAL=r(r({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.deepExtend)(e,t)},createSubscribe:s.createSubscribe,ErrorFactory:s.ErrorFactory,deepExtend:s.deepExtend}),e}(),m=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(Object(s.isBrowser)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.isNode)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w,x,_=g;(w=_).INTERNAL.registerComponent(new a.Component("platform-logger",(function(t){return new m(t)}),"PRIVATE")),w.registerVersion(l,"0.6.28",x),w.registerVersion("fire-js","");e.default=_},function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return a})),n.d(e,"g",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return h}));var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}Object.create;function u(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function h(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(74);var i=n(50),o=n(75);function s(t,e){return Object(r.a)(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}return n}}(t,e)||Object(i.a)(t,e)||Object(o.a)()}},function(t,e,n){(function(t){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function i(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function o(t,e,n){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(n=e,e=10),this._init(t||0,e||10,n||"be"))}var s;"object"===typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{s="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:n(130).Buffer}catch(S){}function a(t,e){var n=t.charCodeAt(e);return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n-48&15}function u(t,e,n){var r=a(t,n);return n-1>=e&&(r|=a(t,n-1)<<4),r}function c(t,e,n,r){for(var i=0,o=Math.min(t.length,n),s=e;s<o;s++){var a=t.charCodeAt(s)-48;i*=r,i+=a>=49?a-49+10:a>=17?a-17+10:a}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"===typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return t.cmp(e)<0?t:e},o.prototype._init=function(t,e,n){if("number"===typeof t)return this._initNumber(t,e,n);if("object"===typeof t)return this._initArray(t,e,n);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,n):(this._parseBase(t,e,i),"le"===n&&this._initArray(this.toArray(),e,n)))},o.prototype._initNumber=function(t,e,n){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),e,n)},o.prototype._initArray=function(t,e,n){if(r("number"===typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,s,a=0;if("be"===n)for(i=t.length-1,o=0;i>=0;i-=3)s=t[i]|t[i-1]<<8|t[i-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===n)for(i=0,o=0;i<t.length;i+=3)s=t[i]|t[i+1]<<8|t[i+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(t,e,n){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,s=0;if("be"===n)for(r=t.length-1;r>=e;r-=2)i=u(t,e,r)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;else for(r=(t.length-e)%2===0?e+1:e;r<t.length;r+=2)i=u(t,e,r)<<o,this.words[s]|=67108863&i,o>=18?(o-=18,s+=1,this.words[s]|=i>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=e)r++;r--,i=i/e|0;for(var o=t.length-n,s=o%r,a=Math.min(o,o-s)+n,u=0,h=n;h<a;h+=r)u=c(t,h,h+r,e),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var l=1;for(u=c(t,h,t.length,e),h=0;h<s;h++)l*=e;this.imuln(l),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function d(t,e,n){n.negative=e.negative^t.negative;var r=t.length+e.length|0;n.length=r,r=r-1|0;var i=0|t.words[0],o=0|e.words[0],s=i*o,a=67108863&s,u=s/67108864|0;n.words[0]=a;for(var c=1;c<r;c++){for(var h=u>>>26,l=67108863&u,f=Math.min(c,e.length-1),d=Math.max(0,c-t.length+1);d<=f;d++){var p=c-d|0;h+=(s=(i=0|t.words[p])*(o=0|e.words[d])+l)/67108864|0,l=67108863&s}n.words[c]=0|l,u=0|h}return 0!==u?n.words[c]=0|u:n.length--,n.strip()}o.prototype.toString=function(t,e){var n;if(e=0|e||1,16===(t=t||10)||"hex"===t){n="";for(var i=0,o=0,s=0;s<this.length;s++){var a=this.words[s],u=(16777215&(a<<i|o)).toString(16);n=0!==(o=a>>>24-i&16777215)||s!==this.length-1?h[6-u.length]+u+n:u+n,(i+=2)>=26&&(i-=26,s--)}for(0!==o&&(n=o.toString(16)+n);n.length%e!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(t===(0|t)&&t>=2&&t<=36){var c=l[t],d=f[t];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var v=p.modn(d).toString(t);n=(p=p.idivn(d)).isZero()?v+n:h[c-v.length]+v+n}for(this.isZero()&&(n="0"+n);n.length%e!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return r("undefined"!==typeof s),this.toArrayLike(s,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,n){var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0"),this.strip();var s,a,u="le"===e,c=new t(o),h=this.clone();if(u){for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),c[a]=s;for(;a<o;a++)c[a]=0}else{for(a=0;a<o-i;a++)c[a]=0;for(a=0;!h.isZero();a++)s=h.andln(255),h.iushrn(8),c[o-a-1]=s}return c},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,n=0;return e>=4096&&(n+=13,e>>>=13),e>=64&&(n+=7,e>>>=7),e>=8&&(n+=4,e>>>=4),e>=2&&(n+=2,e>>>=2),n+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,n=0;return 0===(8191&e)&&(n+=13,e>>>=13),0===(127&e)&&(n+=7,e>>>=7),0===(15&e)&&(n+=4,e>>>=4),0===(3&e)&&(n+=2,e>>>=2),0===(1&e)&&n++,n},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var n=this._zeroBits(this.words[e]);if(t+=n,26!==n)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return r(0===(this.negative|t.negative)),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var n=0;n<e.length;n++)this.words[n]=this.words[n]&t.words[n];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return r(0===(this.negative|t.negative)),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){var e,n;this.length>t.length?(e=this,n=t):(e=t,n=this);for(var r=0;r<n.length;r++)this.words[r]=e.words[r]^n.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return r(0===(this.negative|t.negative)),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){r("number"===typeof t&&t>=0);var e=0|Math.ceil(t/26),n=t%26;this._expand(e),n>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){r("number"===typeof t&&t>=0);var n=t/26|0,i=t%26;return this._expand(n+1),this.words[n]=e?this.words[n]|1<<i:this.words[n]&~(1<<i),this.strip()},o.prototype.iadd=function(t){var e,n,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(n=this,r=t):(n=t,r=this);for(var i=0,o=0;o<r.length;o++)e=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<n.length;o++)e=(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var n,r,i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=t):(n=t,r=this);for(var o=0,s=0;s<r.length;s++)o=(e=(0|n.words[s])-(0|r.words[s])+o)>>26,this.words[s]=67108863&e;for(;0!==o&&s<n.length;s++)o=(e=(0|n.words[s])+o)>>26,this.words[s]=67108863&e;if(0===o&&s<n.length&&n!==this)for(;s<n.length;s++)this.words[s]=n.words[s];return this.length=Math.max(this.length,s),n!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,n){var r,i,o,s=t.words,a=e.words,u=n.words,c=0,h=0|s[0],l=8191&h,f=h>>>13,d=0|s[1],p=8191&d,v=d>>>13,g=0|s[2],m=8191&g,y=g>>>13,b=0|s[3],w=8191&b,x=b>>>13,_=0|s[4],T=8191&_,E=_>>>13,S=0|s[5],k=8191&S,A=S>>>13,O=0|s[6],C=8191&O,P=O>>>13,I=0|s[7],R=8191&I,M=I>>>13,N=0|s[8],L=8191&N,D=N>>>13,F=0|s[9],j=8191&F,B=F>>>13,U=0|a[0],V=8191&U,z=U>>>13,G=0|a[1],Y=8191&G,W=G>>>13,X=0|a[2],H=8191&X,q=X>>>13,K=0|a[3],$=8191&K,J=K>>>13,Q=0|a[4],Z=8191&Q,tt=Q>>>13,et=0|a[5],nt=8191&et,rt=et>>>13,it=0|a[6],ot=8191&it,st=it>>>13,at=0|a[7],ut=8191&at,ct=at>>>13,ht=0|a[8],lt=8191&ht,ft=ht>>>13,dt=0|a[9],pt=8191&dt,vt=dt>>>13;n.negative=t.negative^e.negative,n.length=19;var gt=(c+(r=Math.imul(l,V))|0)+((8191&(i=(i=Math.imul(l,z))+Math.imul(f,V)|0))<<13)|0;c=((o=Math.imul(f,z))+(i>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(p,V),i=(i=Math.imul(p,z))+Math.imul(v,V)|0,o=Math.imul(v,z);var mt=(c+(r=r+Math.imul(l,Y)|0)|0)+((8191&(i=(i=i+Math.imul(l,W)|0)+Math.imul(f,Y)|0))<<13)|0;c=((o=o+Math.imul(f,W)|0)+(i>>>13)|0)+(mt>>>26)|0,mt&=67108863,r=Math.imul(m,V),i=(i=Math.imul(m,z))+Math.imul(y,V)|0,o=Math.imul(y,z),r=r+Math.imul(p,Y)|0,i=(i=i+Math.imul(p,W)|0)+Math.imul(v,Y)|0,o=o+Math.imul(v,W)|0;var yt=(c+(r=r+Math.imul(l,H)|0)|0)+((8191&(i=(i=i+Math.imul(l,q)|0)+Math.imul(f,H)|0))<<13)|0;c=((o=o+Math.imul(f,q)|0)+(i>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(w,V),i=(i=Math.imul(w,z))+Math.imul(x,V)|0,o=Math.imul(x,z),r=r+Math.imul(m,Y)|0,i=(i=i+Math.imul(m,W)|0)+Math.imul(y,Y)|0,o=o+Math.imul(y,W)|0,r=r+Math.imul(p,H)|0,i=(i=i+Math.imul(p,q)|0)+Math.imul(v,H)|0,o=o+Math.imul(v,q)|0;var bt=(c+(r=r+Math.imul(l,$)|0)|0)+((8191&(i=(i=i+Math.imul(l,J)|0)+Math.imul(f,$)|0))<<13)|0;c=((o=o+Math.imul(f,J)|0)+(i>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(T,V),i=(i=Math.imul(T,z))+Math.imul(E,V)|0,o=Math.imul(E,z),r=r+Math.imul(w,Y)|0,i=(i=i+Math.imul(w,W)|0)+Math.imul(x,Y)|0,o=o+Math.imul(x,W)|0,r=r+Math.imul(m,H)|0,i=(i=i+Math.imul(m,q)|0)+Math.imul(y,H)|0,o=o+Math.imul(y,q)|0,r=r+Math.imul(p,$)|0,i=(i=i+Math.imul(p,J)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,J)|0;var wt=(c+(r=r+Math.imul(l,Z)|0)|0)+((8191&(i=(i=i+Math.imul(l,tt)|0)+Math.imul(f,Z)|0))<<13)|0;c=((o=o+Math.imul(f,tt)|0)+(i>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(k,V),i=(i=Math.imul(k,z))+Math.imul(A,V)|0,o=Math.imul(A,z),r=r+Math.imul(T,Y)|0,i=(i=i+Math.imul(T,W)|0)+Math.imul(E,Y)|0,o=o+Math.imul(E,W)|0,r=r+Math.imul(w,H)|0,i=(i=i+Math.imul(w,q)|0)+Math.imul(x,H)|0,o=o+Math.imul(x,q)|0,r=r+Math.imul(m,$)|0,i=(i=i+Math.imul(m,J)|0)+Math.imul(y,$)|0,o=o+Math.imul(y,J)|0,r=r+Math.imul(p,Z)|0,i=(i=i+Math.imul(p,tt)|0)+Math.imul(v,Z)|0,o=o+Math.imul(v,tt)|0;var xt=(c+(r=r+Math.imul(l,nt)|0)|0)+((8191&(i=(i=i+Math.imul(l,rt)|0)+Math.imul(f,nt)|0))<<13)|0;c=((o=o+Math.imul(f,rt)|0)+(i>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(C,V),i=(i=Math.imul(C,z))+Math.imul(P,V)|0,o=Math.imul(P,z),r=r+Math.imul(k,Y)|0,i=(i=i+Math.imul(k,W)|0)+Math.imul(A,Y)|0,o=o+Math.imul(A,W)|0,r=r+Math.imul(T,H)|0,i=(i=i+Math.imul(T,q)|0)+Math.imul(E,H)|0,o=o+Math.imul(E,q)|0,r=r+Math.imul(w,$)|0,i=(i=i+Math.imul(w,J)|0)+Math.imul(x,$)|0,o=o+Math.imul(x,J)|0,r=r+Math.imul(m,Z)|0,i=(i=i+Math.imul(m,tt)|0)+Math.imul(y,Z)|0,o=o+Math.imul(y,tt)|0,r=r+Math.imul(p,nt)|0,i=(i=i+Math.imul(p,rt)|0)+Math.imul(v,nt)|0,o=o+Math.imul(v,rt)|0;var _t=(c+(r=r+Math.imul(l,ot)|0)|0)+((8191&(i=(i=i+Math.imul(l,st)|0)+Math.imul(f,ot)|0))<<13)|0;c=((o=o+Math.imul(f,st)|0)+(i>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(R,V),i=(i=Math.imul(R,z))+Math.imul(M,V)|0,o=Math.imul(M,z),r=r+Math.imul(C,Y)|0,i=(i=i+Math.imul(C,W)|0)+Math.imul(P,Y)|0,o=o+Math.imul(P,W)|0,r=r+Math.imul(k,H)|0,i=(i=i+Math.imul(k,q)|0)+Math.imul(A,H)|0,o=o+Math.imul(A,q)|0,r=r+Math.imul(T,$)|0,i=(i=i+Math.imul(T,J)|0)+Math.imul(E,$)|0,o=o+Math.imul(E,J)|0,r=r+Math.imul(w,Z)|0,i=(i=i+Math.imul(w,tt)|0)+Math.imul(x,Z)|0,o=o+Math.imul(x,tt)|0,r=r+Math.imul(m,nt)|0,i=(i=i+Math.imul(m,rt)|0)+Math.imul(y,nt)|0,o=o+Math.imul(y,rt)|0,r=r+Math.imul(p,ot)|0,i=(i=i+Math.imul(p,st)|0)+Math.imul(v,ot)|0,o=o+Math.imul(v,st)|0;var Tt=(c+(r=r+Math.imul(l,ut)|0)|0)+((8191&(i=(i=i+Math.imul(l,ct)|0)+Math.imul(f,ut)|0))<<13)|0;c=((o=o+Math.imul(f,ct)|0)+(i>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(L,V),i=(i=Math.imul(L,z))+Math.imul(D,V)|0,o=Math.imul(D,z),r=r+Math.imul(R,Y)|0,i=(i=i+Math.imul(R,W)|0)+Math.imul(M,Y)|0,o=o+Math.imul(M,W)|0,r=r+Math.imul(C,H)|0,i=(i=i+Math.imul(C,q)|0)+Math.imul(P,H)|0,o=o+Math.imul(P,q)|0,r=r+Math.imul(k,$)|0,i=(i=i+Math.imul(k,J)|0)+Math.imul(A,$)|0,o=o+Math.imul(A,J)|0,r=r+Math.imul(T,Z)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(E,Z)|0,o=o+Math.imul(E,tt)|0,r=r+Math.imul(w,nt)|0,i=(i=i+Math.imul(w,rt)|0)+Math.imul(x,nt)|0,o=o+Math.imul(x,rt)|0,r=r+Math.imul(m,ot)|0,i=(i=i+Math.imul(m,st)|0)+Math.imul(y,ot)|0,o=o+Math.imul(y,st)|0,r=r+Math.imul(p,ut)|0,i=(i=i+Math.imul(p,ct)|0)+Math.imul(v,ut)|0,o=o+Math.imul(v,ct)|0;var Et=(c+(r=r+Math.imul(l,lt)|0)|0)+((8191&(i=(i=i+Math.imul(l,ft)|0)+Math.imul(f,lt)|0))<<13)|0;c=((o=o+Math.imul(f,ft)|0)+(i>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(j,V),i=(i=Math.imul(j,z))+Math.imul(B,V)|0,o=Math.imul(B,z),r=r+Math.imul(L,Y)|0,i=(i=i+Math.imul(L,W)|0)+Math.imul(D,Y)|0,o=o+Math.imul(D,W)|0,r=r+Math.imul(R,H)|0,i=(i=i+Math.imul(R,q)|0)+Math.imul(M,H)|0,o=o+Math.imul(M,q)|0,r=r+Math.imul(C,$)|0,i=(i=i+Math.imul(C,J)|0)+Math.imul(P,$)|0,o=o+Math.imul(P,J)|0,r=r+Math.imul(k,Z)|0,i=(i=i+Math.imul(k,tt)|0)+Math.imul(A,Z)|0,o=o+Math.imul(A,tt)|0,r=r+Math.imul(T,nt)|0,i=(i=i+Math.imul(T,rt)|0)+Math.imul(E,nt)|0,o=o+Math.imul(E,rt)|0,r=r+Math.imul(w,ot)|0,i=(i=i+Math.imul(w,st)|0)+Math.imul(x,ot)|0,o=o+Math.imul(x,st)|0,r=r+Math.imul(m,ut)|0,i=(i=i+Math.imul(m,ct)|0)+Math.imul(y,ut)|0,o=o+Math.imul(y,ct)|0,r=r+Math.imul(p,lt)|0,i=(i=i+Math.imul(p,ft)|0)+Math.imul(v,lt)|0,o=o+Math.imul(v,ft)|0;var St=(c+(r=r+Math.imul(l,pt)|0)|0)+((8191&(i=(i=i+Math.imul(l,vt)|0)+Math.imul(f,pt)|0))<<13)|0;c=((o=o+Math.imul(f,vt)|0)+(i>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(j,Y),i=(i=Math.imul(j,W))+Math.imul(B,Y)|0,o=Math.imul(B,W),r=r+Math.imul(L,H)|0,i=(i=i+Math.imul(L,q)|0)+Math.imul(D,H)|0,o=o+Math.imul(D,q)|0,r=r+Math.imul(R,$)|0,i=(i=i+Math.imul(R,J)|0)+Math.imul(M,$)|0,o=o+Math.imul(M,J)|0,r=r+Math.imul(C,Z)|0,i=(i=i+Math.imul(C,tt)|0)+Math.imul(P,Z)|0,o=o+Math.imul(P,tt)|0,r=r+Math.imul(k,nt)|0,i=(i=i+Math.imul(k,rt)|0)+Math.imul(A,nt)|0,o=o+Math.imul(A,rt)|0,r=r+Math.imul(T,ot)|0,i=(i=i+Math.imul(T,st)|0)+Math.imul(E,ot)|0,o=o+Math.imul(E,st)|0,r=r+Math.imul(w,ut)|0,i=(i=i+Math.imul(w,ct)|0)+Math.imul(x,ut)|0,o=o+Math.imul(x,ct)|0,r=r+Math.imul(m,lt)|0,i=(i=i+Math.imul(m,ft)|0)+Math.imul(y,lt)|0,o=o+Math.imul(y,ft)|0;var kt=(c+(r=r+Math.imul(p,pt)|0)|0)+((8191&(i=(i=i+Math.imul(p,vt)|0)+Math.imul(v,pt)|0))<<13)|0;c=((o=o+Math.imul(v,vt)|0)+(i>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(j,H),i=(i=Math.imul(j,q))+Math.imul(B,H)|0,o=Math.imul(B,q),r=r+Math.imul(L,$)|0,i=(i=i+Math.imul(L,J)|0)+Math.imul(D,$)|0,o=o+Math.imul(D,J)|0,r=r+Math.imul(R,Z)|0,i=(i=i+Math.imul(R,tt)|0)+Math.imul(M,Z)|0,o=o+Math.imul(M,tt)|0,r=r+Math.imul(C,nt)|0,i=(i=i+Math.imul(C,rt)|0)+Math.imul(P,nt)|0,o=o+Math.imul(P,rt)|0,r=r+Math.imul(k,ot)|0,i=(i=i+Math.imul(k,st)|0)+Math.imul(A,ot)|0,o=o+Math.imul(A,st)|0,r=r+Math.imul(T,ut)|0,i=(i=i+Math.imul(T,ct)|0)+Math.imul(E,ut)|0,o=o+Math.imul(E,ct)|0,r=r+Math.imul(w,lt)|0,i=(i=i+Math.imul(w,ft)|0)+Math.imul(x,lt)|0,o=o+Math.imul(x,ft)|0;var At=(c+(r=r+Math.imul(m,pt)|0)|0)+((8191&(i=(i=i+Math.imul(m,vt)|0)+Math.imul(y,pt)|0))<<13)|0;c=((o=o+Math.imul(y,vt)|0)+(i>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(j,$),i=(i=Math.imul(j,J))+Math.imul(B,$)|0,o=Math.imul(B,J),r=r+Math.imul(L,Z)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(D,Z)|0,o=o+Math.imul(D,tt)|0,r=r+Math.imul(R,nt)|0,i=(i=i+Math.imul(R,rt)|0)+Math.imul(M,nt)|0,o=o+Math.imul(M,rt)|0,r=r+Math.imul(C,ot)|0,i=(i=i+Math.imul(C,st)|0)+Math.imul(P,ot)|0,o=o+Math.imul(P,st)|0,r=r+Math.imul(k,ut)|0,i=(i=i+Math.imul(k,ct)|0)+Math.imul(A,ut)|0,o=o+Math.imul(A,ct)|0,r=r+Math.imul(T,lt)|0,i=(i=i+Math.imul(T,ft)|0)+Math.imul(E,lt)|0,o=o+Math.imul(E,ft)|0;var Ot=(c+(r=r+Math.imul(w,pt)|0)|0)+((8191&(i=(i=i+Math.imul(w,vt)|0)+Math.imul(x,pt)|0))<<13)|0;c=((o=o+Math.imul(x,vt)|0)+(i>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,r=Math.imul(j,Z),i=(i=Math.imul(j,tt))+Math.imul(B,Z)|0,o=Math.imul(B,tt),r=r+Math.imul(L,nt)|0,i=(i=i+Math.imul(L,rt)|0)+Math.imul(D,nt)|0,o=o+Math.imul(D,rt)|0,r=r+Math.imul(R,ot)|0,i=(i=i+Math.imul(R,st)|0)+Math.imul(M,ot)|0,o=o+Math.imul(M,st)|0,r=r+Math.imul(C,ut)|0,i=(i=i+Math.imul(C,ct)|0)+Math.imul(P,ut)|0,o=o+Math.imul(P,ct)|0,r=r+Math.imul(k,lt)|0,i=(i=i+Math.imul(k,ft)|0)+Math.imul(A,lt)|0,o=o+Math.imul(A,ft)|0;var Ct=(c+(r=r+Math.imul(T,pt)|0)|0)+((8191&(i=(i=i+Math.imul(T,vt)|0)+Math.imul(E,pt)|0))<<13)|0;c=((o=o+Math.imul(E,vt)|0)+(i>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(j,nt),i=(i=Math.imul(j,rt))+Math.imul(B,nt)|0,o=Math.imul(B,rt),r=r+Math.imul(L,ot)|0,i=(i=i+Math.imul(L,st)|0)+Math.imul(D,ot)|0,o=o+Math.imul(D,st)|0,r=r+Math.imul(R,ut)|0,i=(i=i+Math.imul(R,ct)|0)+Math.imul(M,ut)|0,o=o+Math.imul(M,ct)|0,r=r+Math.imul(C,lt)|0,i=(i=i+Math.imul(C,ft)|0)+Math.imul(P,lt)|0,o=o+Math.imul(P,ft)|0;var Pt=(c+(r=r+Math.imul(k,pt)|0)|0)+((8191&(i=(i=i+Math.imul(k,vt)|0)+Math.imul(A,pt)|0))<<13)|0;c=((o=o+Math.imul(A,vt)|0)+(i>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(j,ot),i=(i=Math.imul(j,st))+Math.imul(B,ot)|0,o=Math.imul(B,st),r=r+Math.imul(L,ut)|0,i=(i=i+Math.imul(L,ct)|0)+Math.imul(D,ut)|0,o=o+Math.imul(D,ct)|0,r=r+Math.imul(R,lt)|0,i=(i=i+Math.imul(R,ft)|0)+Math.imul(M,lt)|0,o=o+Math.imul(M,ft)|0;var It=(c+(r=r+Math.imul(C,pt)|0)|0)+((8191&(i=(i=i+Math.imul(C,vt)|0)+Math.imul(P,pt)|0))<<13)|0;c=((o=o+Math.imul(P,vt)|0)+(i>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(j,ut),i=(i=Math.imul(j,ct))+Math.imul(B,ut)|0,o=Math.imul(B,ct),r=r+Math.imul(L,lt)|0,i=(i=i+Math.imul(L,ft)|0)+Math.imul(D,lt)|0,o=o+Math.imul(D,ft)|0;var Rt=(c+(r=r+Math.imul(R,pt)|0)|0)+((8191&(i=(i=i+Math.imul(R,vt)|0)+Math.imul(M,pt)|0))<<13)|0;c=((o=o+Math.imul(M,vt)|0)+(i>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(j,lt),i=(i=Math.imul(j,ft))+Math.imul(B,lt)|0,o=Math.imul(B,ft);var Mt=(c+(r=r+Math.imul(L,pt)|0)|0)+((8191&(i=(i=i+Math.imul(L,vt)|0)+Math.imul(D,pt)|0))<<13)|0;c=((o=o+Math.imul(D,vt)|0)+(i>>>13)|0)+(Mt>>>26)|0,Mt&=67108863;var Nt=(c+(r=Math.imul(j,pt))|0)+((8191&(i=(i=Math.imul(j,vt))+Math.imul(B,pt)|0))<<13)|0;return c=((o=Math.imul(B,vt))+(i>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,u[0]=gt,u[1]=mt,u[2]=yt,u[3]=bt,u[4]=wt,u[5]=xt,u[6]=_t,u[7]=Tt,u[8]=Et,u[9]=St,u[10]=kt,u[11]=At,u[12]=Ot,u[13]=Ct,u[14]=Pt,u[15]=It,u[16]=Rt,u[17]=Mt,u[18]=Nt,0!==c&&(u[19]=c,n.length++),n};function v(t,e,n){return(new g).mulp(t,e,n)}function g(t,e){this.x=t,this.y=e}Math.imul||(p=d),o.prototype.mulTo=function(t,e){var n,r=this.length+t.length;return n=10===this.length&&10===t.length?p(this,t,e):r<63?d(this,t,e):r<1024?function(t,e,n){n.negative=e.negative^t.negative,n.length=t.length+e.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var s=i;i=0;for(var a=67108863&r,u=Math.min(o,e.length-1),c=Math.max(0,o-t.length+1);c<=u;c++){var h=o-c,l=(0|t.words[h])*(0|e.words[c]),f=67108863&l;a=67108863&(f=f+a|0),i+=(s=(s=s+(l/67108864|0)|0)+(f>>>26)|0)>>>26,s&=67108863}n.words[o]=a,r=s,s=i}return 0!==r?n.words[o]=r:n.length--,n.strip()}(this,t,e):v(this,t,e),n},g.prototype.makeRBT=function(t){for(var e=new Array(t),n=o.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,n,t);return e},g.prototype.revBin=function(t,e,n){if(0===t||t===n-1)return t;for(var r=0,i=0;i<e;i++)r|=(1&t)<<e-i-1,t>>=1;return r},g.prototype.permute=function(t,e,n,r,i,o){for(var s=0;s<o;s++)r[s]=e[t[s]],i[s]=n[t[s]]},g.prototype.transform=function(t,e,n,r,i,o){this.permute(o,t,e,n,r,i);for(var s=1;s<i;s<<=1)for(var a=s<<1,u=Math.cos(2*Math.PI/a),c=Math.sin(2*Math.PI/a),h=0;h<i;h+=a)for(var l=u,f=c,d=0;d<s;d++){var p=n[h+d],v=r[h+d],g=n[h+d+s],m=r[h+d+s],y=l*g-f*m;m=l*m+f*g,g=y,n[h+d]=p+g,r[h+d]=v+m,n[h+d+s]=p-g,r[h+d+s]=v-m,d!==a&&(y=u*l-c*f,f=u*f+c*l,l=y)}},g.prototype.guessLen13b=function(t,e){var n=1|Math.max(e,t),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},g.prototype.conjugate=function(t,e,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=t[r];t[r]=t[n-r-1],t[n-r-1]=i,i=e[r],e[r]=-e[n-r-1],e[n-r-1]=-i}},g.prototype.normalize13b=function(t,e){for(var n=0,r=0;r<e/2;r++){var i=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+n;t[r]=67108863&i,n=i<67108864?0:i/67108864|0}return t},g.prototype.convert13b=function(t,e,n,i){for(var o=0,s=0;s<e;s++)o+=0|t[s],n[2*s]=8191&o,o>>>=13,n[2*s+1]=8191&o,o>>>=13;for(s=2*e;s<i;++s)n[s]=0;r(0===o),r(0===(-8192&o))},g.prototype.stub=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=0;return e},g.prototype.mulp=function(t,e,n){var r=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(r),o=this.stub(r),s=new Array(r),a=new Array(r),u=new Array(r),c=new Array(r),h=new Array(r),l=new Array(r),f=n.words;f.length=r,this.convert13b(t.words,t.length,s,r),this.convert13b(e.words,e.length,c,r),this.transform(s,o,a,u,r,i),this.transform(c,o,h,l,r,i);for(var d=0;d<r;d++){var p=a[d]*h[d]-u[d]*l[d];u[d]=a[d]*l[d]+u[d]*h[d],a[d]=p}return this.conjugate(a,u,r),this.transform(a,u,f,o,r,i),this.conjugate(f,o,r),this.normalize13b(f,r),n.negative=t.negative^e.negative,n.length=t.length+e.length,n.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=new Array(this.length+t.length),v(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){r("number"===typeof t),r(t<67108864);for(var e=0,n=0;n<this.length;n++){var i=(0|this.words[n])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=i/67108864|0,e+=o>>>26,this.words[n]=67108863&o}return 0!==e&&(this.words[n]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),n=0;n<e.length;n++){var r=n/26|0,i=n%26;e[n]=(t.words[r]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var n=this,r=0;r<e.length&&0===e[r];r++,n=n.sqr());if(++r<e.length)for(var i=n.sqr();r<e.length;r++,i=i.sqr())0!==e[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(t){r("number"===typeof t&&t>=0);var e,n=t%26,i=(t-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(e=0;e<this.length;e++){var a=this.words[e]&o,u=(0|this.words[e])-a<<n;this.words[e]=u|s,s=a>>>26-n}s&&(this.words[e]=s,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,n){var i;r("number"===typeof t&&t>=0),i=e?(e-e%26)/26:0;var o=t%26,s=Math.min((t-o)/26,this.length),a=67108863^67108863>>>o<<o,u=n;if(i-=s,i=Math.max(0,i),u){for(var c=0;c<s;c++)u.words[c]=this.words[c];u.length=s}if(0===s);else if(this.length>s)for(this.length-=s,c=0;c<this.length;c++)this.words[c]=this.words[c+s];else this.words[0]=0,this.length=1;var h=0;for(c=this.length-1;c>=0&&(0!==h||c>=i);c--){var l=0|this.words[c];this.words[c]=h<<26-o|l>>>o,h=l&a}return u&&0!==h&&(u.words[u.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,n){return r(0===this.negative),this.iushrn(t,e,n)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){r("number"===typeof t&&t>=0);var e=t%26,n=(t-e)/26,i=1<<e;return!(this.length<=n)&&!!(this.words[n]&i)},o.prototype.imaskn=function(t){r("number"===typeof t&&t>=0);var e=t%26,n=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==e&&n++,this.length=Math.min(n,this.length),0!==e){var i=67108863^67108863>>>e<<e;this.words[this.length-1]&=i}return this.strip()},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return r("number"===typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(r("number"===typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,n){var i,o,s=t.length+n;this._expand(s);var a=0;for(i=0;i<t.length;i++){o=(0|this.words[i+n])+a;var u=(0|t.words[i])*e;a=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)a=(o=(0|this.words[i+n])+a)>>26,this.words[i+n]=67108863&o;if(0===a)return this.strip();for(r(-1===a),a=0,i=0;i<this.length;i++)a=(o=-(0|this.words[i])+a)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var n=(this.length,t.length),r=this.clone(),i=t,s=0|i.words[i.length-1];0!==(n=26-this._countBits(s))&&(i=i.ushln(n),r.iushln(n),s=0|i.words[i.length-1]);var a,u=r.length-i.length;if("mod"!==e){(a=new o(null)).length=u+1,a.words=new Array(a.length);for(var c=0;c<a.length;c++)a.words[c]=0}var h=r.clone()._ishlnsubmul(i,1,u);0===h.negative&&(r=h,a&&(a.words[u]=1));for(var l=u-1;l>=0;l--){var f=67108864*(0|r.words[i.length+l])+(0|r.words[i.length+l-1]);for(f=Math.min(f/s|0,67108863),r._ishlnsubmul(i,f,l);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(i,1,l),r.isZero()||(r.negative^=1);a&&(a.words[l]=f)}return a&&a.strip(),r.strip(),"div"!==e&&0!==n&&r.iushrn(n),{div:a||null,mod:r}},o.prototype.divmod=function(t,e,n){return r(!t.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(i=a.div.neg()),"div"!==e&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(t)),{div:i,mod:s}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(t)),{div:a.div,mod:s}):t.length>this.length||this.cmp(t)<0?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e);var i,s,a},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var n=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),i=t.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,n=0,i=this.length-1;i>=0;i--)n=(e*n+(0|this.words[i]))%t;return n},o.prototype.idivn=function(t){r(t<=67108863);for(var e=0,n=this.length-1;n>=0;n--){var i=(0|this.words[n])+67108864*e;this.words[n]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),s=new o(0),a=new o(0),u=new o(1),c=0;e.isEven()&&n.isEven();)e.iushrn(1),n.iushrn(1),++c;for(var h=n.clone(),l=e.clone();!e.isZero();){for(var f=0,d=1;0===(e.words[0]&d)&&f<26;++f,d<<=1);if(f>0)for(e.iushrn(f);f-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(h),s.isub(l)),i.iushrn(1),s.iushrn(1);for(var p=0,v=1;0===(n.words[0]&v)&&p<26;++p,v<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||u.isOdd())&&(a.iadd(h),u.isub(l)),a.iushrn(1),u.iushrn(1);e.cmp(n)>=0?(e.isub(n),i.isub(a),s.isub(u)):(n.isub(e),a.isub(i),u.isub(s))}return{a:a,b:u,gcd:n.iushln(c)}},o.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,n=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i,s=new o(1),a=new o(0),u=n.clone();e.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,h=1;0===(e.words[0]&h)&&c<26;++c,h<<=1);if(c>0)for(e.iushrn(c);c-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);for(var l=0,f=1;0===(n.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(n.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);e.cmp(n)>=0?(e.isub(n),s.isub(a)):(n.isub(e),a.isub(s))}return(i=0===e.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(t),i},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),n=t.clone();e.negative=0,n.negative=0;for(var r=0;e.isEven()&&n.isEven();r++)e.iushrn(1),n.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=e.cmp(n);if(i<0){var o=e;e=n,n=o}else if(0===i||0===n.cmpn(1))break;e.isub(n)}return n.iushln(r)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){r("number"===typeof t);var e=t%26,n=(t-e)/26,i=1<<e;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,s=n;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,n=t<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)e=1;else{n&&(t=-t),r(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|t.words[n];if(r!==i){r<i?e=-1:r>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return-1===this.cmpn(t)},o.prototype.lt=function(t){return-1===this.cmp(t)},o.prototype.lten=function(t){return this.cmpn(t)<=0},o.prototype.lte=function(t){return this.cmp(t)<=0},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new T(t)},o.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var m={k256:null,p224:null,p192:null,p25519:null};function y(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function w(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function x(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function T(t){if("string"===typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function E(t){T.call(this,t),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var t=new o(null);return t.words=new Array(Math.ceil(this.n/13)),t},y.prototype.ireduce=function(t){var e,n=t;do{this.split(n,this.tmp),e=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},y.prototype.split=function(t,e){t.iushrn(this.n,0,e)},y.prototype.imulK=function(t){return t.imul(this.k)},i(b,y),b.prototype.split=function(t,e){for(var n=4194303,r=Math.min(t.length,9),i=0;i<r;i++)e.words[i]=t.words[i];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var o=t.words[9];for(e.words[e.length++]=o&n,i=10;i<t.length;i++){var s=0|t.words[i];t.words[i-10]=(s&n)<<4|o>>>22,o=s}o>>>=22,t.words[i-10]=o,0===o&&t.length>10?t.length-=10:t.length-=9},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,n=0;n<t.length;n++){var r=0|t.words[n];e+=977*r,t.words[n]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(w,y),i(x,y),i(_,y),_.prototype.imulK=function(t){for(var e=0,n=0;n<t.length;n++){var r=19*(0|t.words[n])+e,i=67108863&r;r>>>=26,t.words[n]=i,e=r}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){if(m[t])return m[t];var e;if("k256"===t)e=new b;else if("p224"===t)e=new w;else if("p192"===t)e=new x;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new _}return m[t]=e,e},T.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},T.prototype._verify2=function(t,e){r(0===(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},T.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},T.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},T.prototype.add=function(t,e){this._verify2(t,e);var n=t.add(e);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},T.prototype.iadd=function(t,e){this._verify2(t,e);var n=t.iadd(e);return n.cmp(this.m)>=0&&n.isub(this.m),n},T.prototype.sub=function(t,e){this._verify2(t,e);var n=t.sub(e);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},T.prototype.isub=function(t,e){this._verify2(t,e);var n=t.isub(e);return n.cmpn(0)<0&&n.iadd(this.m),n},T.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},T.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},T.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},T.prototype.isqr=function(t){return this.imul(t,t.clone())},T.prototype.sqr=function(t){return this.mul(t,t)},T.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2===1),3===e){var n=this.m.add(new o(1)).iushrn(2);return this.pow(t,n)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());var a=new o(1).toRed(this),u=a.redNeg(),c=this.m.subn(1).iushrn(1),h=this.m.bitLength();for(h=new o(2*h*h).toRed(this);0!==this.pow(h,c).cmp(u);)h.redIAdd(u);for(var l=this.pow(h,i),f=this.pow(t,i.addn(1).iushrn(1)),d=this.pow(t,i),p=s;0!==d.cmp(a);){for(var v=d,g=0;0!==v.cmp(a);g++)v=v.redSqr();r(g<p);var m=this.pow(l,new o(1).iushln(p-g-1));f=f.redMul(m),l=m.redSqr(),d=d.redMul(l),p=g}return f},T.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},T.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=t;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],t);var i=n[0],s=0,a=0,u=e.bitLength()%26;for(0===u&&(u=26),r=e.length-1;r>=0;r--){for(var c=e.words[r],h=u-1;h>=0;h--){var l=c>>h&1;i!==n[0]&&(i=this.sqr(i)),0!==l||0!==s?(s<<=1,s|=l,(4===++a||0===r&&0===h)&&(i=this.mul(i,n[s]),a=0,s=0)):a=0}u=26}return i},T.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},T.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new E(t)},i(E,T),E.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},E.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},E.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var n=t.imul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},E.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var n=t.mul(e),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},E.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t,this)}).call(this,n(129)(t))},function(t,e,n){"use strict";function r(t){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},r(t)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e,n,r,i,o,s){try{var a=t[o](s),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var s=t.apply(e,n);function a(t){r(s,i,o,a,u,"next",t)}function u(t){r(s,i,o,a,u,"throw",t)}a(void 0)}))}}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(16);function i(t,e,n){return i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Object(r.a)(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}},i(t,e,n||t)}},function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.r(e),n.d(e,"LogLevel",(function(){return o})),n.d(e,"Logger",(function(){return l})),n.d(e,"setLogLevel",(function(){return f})),n.d(e,"setUserLogHandler",(function(){return d}));var o,s=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),h=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},l=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=h,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"===typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){s.forEach((function(e){e.setLogLevel(t)}))}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++){n(i[r])}}},function(t,e,n){"use strict";n.r(e),n.d(e,"Component",(function(){return c})),n.d(e,"ComponentContainer",(function(){return f})),n.d(e,"Provider",(function(){return l}));function r(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function i(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}Object.create;function o(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function a(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;var u=n(0),c=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),h="[DEFAULT]",l=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new u.Deferred;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),r=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:h})}catch(d){}try{for(var r=o(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var a=s(i.value,2),u=a[0],c=a[1],l=this.normalizeInstanceIdentifier(u);try{var f=this.getOrInitializeService({instanceIdentifier:l});c.resolve(f)}catch(d){}}}catch(p){e={error:p}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=h),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r(this,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(a(a([],s(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),s(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=h),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,a=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(a))throw Error(this.name+"("+a+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var u=this.getOrInitializeService({instanceIdentifier:a,options:i});try{for(var c=o(this.instancesDeferred.entries()),h=c.next();!h.done;h=c.next()){var l=s(h.value,2),f=l[0],d=l[1];a===this.normalizeInstanceIdentifier(f)&&d.resolve(u)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}return u},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var s=o(i),a=s.next();!a.done;a=s.next()){var u=a.value;try{u(t,e)}catch(c){}}}catch(h){n={error:h}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===h?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(s){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=h),this.component?this.component.multipleInstances?t:h:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();var f=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new l(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n(54);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return Ja})),n.d(e,"b",(function(){return za})),n.d(e,"c",(function(){return E})),n.d(e,"d",(function(){return uc})),n.d(e,"e",(function(){return Ga})),n.d(e,"f",(function(){return sc})),n.d(e,"g",(function(){return hc})),n.d(e,"h",(function(){return gc})),n.d(e,"i",(function(){return mc})),n.d(e,"j",(function(){return ic})),n.d(e,"k",(function(){return Sc})),n.d(e,"l",(function(){return cc})),n.d(e,"m",(function(){return wc})),n.d(e,"n",(function(){return Ec})),n.d(e,"o",(function(){return oc})),n.d(e,"p",(function(){return Tc})),n.d(e,"q",(function(){return xc})),n.d(e,"r",(function(){return yc})),n.d(e,"s",(function(){return kc})),n.d(e,"t",(function(){return fc}));var r=n(2),i=n(0),o=n(19),s=n(28),a=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();a.o=-1;var u={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},c=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(r.b)(e,t),e}(Error),h=new o.Logger("@firebase/firestore");function l(){return h.logLevel}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(h.logLevel<=o.LogLevel.DEBUG){var i=e.map(v);h.debug.apply(h,Object(r.d)(["Firestore (8.8.0): "+t],i))}}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(h.logLevel<=o.LogLevel.ERROR){var i=e.map(v);h.error.apply(h,Object(r.d)(["Firestore (8.8.0): "+t],i))}}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(h.logLevel<=o.LogLevel.WARN){var i=e.map(v);h.warn.apply(h,Object(r.d)(["Firestore (8.8.0): "+t],i))}}function v(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function g(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.8.0) INTERNAL ASSERTION FAILED: "+t;throw d(e),new Error(e)}function m(t,e){t||g()}function y(t,e){return t}function b(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var w=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=b(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function x(t,e){return t<e?-1:t>e?1:0}function _(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function T(t){return t+"\0"}var E=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new c(u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new c(u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new c(u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new c(u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?x(this.nanoseconds,t.nanoseconds):x(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),S=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new E(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function k(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function A(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function O(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var C=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&g(),void 0===n?n=t.length-e:n>t.length-e&&g(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new c(u.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(C),I=/^[_a-zA-Z][_a-zA-Z0-9]*$/,R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return I.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new c(u.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new c(u.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var h=t[i+1];if("\\"!==h&&"."!==h&&"`"!==h)throw new c(u.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=h,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new c(u.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(C),M=function(){function t(t){this.fields=t,t.sort(R.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return _(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),N=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return x(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();N.EMPTY_BYTE_STRING=new N("");var L=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function D(t){if(m(!!t),"string"==typeof t){var e=0,n=L.exec(t);if(m(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:F(t.seconds),nanos:F(t.nanos)}}function F(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function j(t){return"string"==typeof t?N.fromBase64String(t):N.fromUint8Array(t)}function B(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function U(t){var e=t.mapValue.fields.__previous_value__;return B(e)?U(e):e}function V(t){var e=D(t.mapValue.fields.__local_write_time__.timestampValue);return new E(e.seconds,e.nanos)}function z(t){return null==t}function G(t){return 0===t&&1/t==-1/0}function Y(t){return"number"==typeof t&&Number.isInteger(t)&&!G(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var W=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(P.fromString(e))},t.fromName=function(e){return new t(P.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===P.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return P.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new P(e.slice()))},t}();function X(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?B(t)?4:10:g()}function H(t,e){var n=X(t);if(n!==X(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return V(t).isEqual(V(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=D(t.timestampValue),r=D(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return j(t.bytesValue).isEqual(j(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return F(t.geoPointValue.latitude)===F(e.geoPointValue.latitude)&&F(t.geoPointValue.longitude)===F(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return F(t.integerValue)===F(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=F(t.doubleValue),r=F(e.doubleValue);return n===r?G(n)===G(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return _(t.arrayValue.values||[],e.arrayValue.values||[],H);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(k(n)!==k(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!H(n[i],r[i])))return!1;return!0}(t,e);default:return g()}}function q(t,e){return void 0!==(t.values||[]).find((function(t){return H(t,e)}))}function K(t,e){var n=X(t),r=X(e);if(n!==r)return x(n,r);switch(n){case 0:return 0;case 1:return x(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=F(t.integerValue||t.doubleValue),r=F(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return $(t.timestampValue,e.timestampValue);case 4:return $(V(t),V(e));case 5:return x(t.stringValue,e.stringValue);case 6:return function(t,e){var n=j(t),r=j(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return x(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=x(F(t.latitude),F(e.latitude));return 0!==n?n:x(F(t.longitude),F(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=K(n[i],r[i]);if(o)return o}return x(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=x(r[s],o[s]);if(0!==a)return a;var u=K(n[r[s]],i[o[s]]);if(0!==u)return u}return x(r.length,o.length)}(t.mapValue,e.mapValue);default:throw g()}}function $(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return x(t,e);var n=D(t),r=D(e),i=x(n.seconds,r.seconds);return 0!==i?i:x(n.nanos,r.nanos)}function J(t){return Q(t)}function Q(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=D(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?j(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,W.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Q(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Q(t.fields[o])}return e+"}"}(t.mapValue):g();var e,n}function Z(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function tt(t){return!!t&&"integerValue"in t}function et(t){return!!t&&"arrayValue"in t}function nt(t){return!!t&&"nullValue"in t}function rt(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function it(t){return!!t&&"mapValue"in t}function ot(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return A(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=ot(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ot(t.arrayValue.values[r]);return n}return Object.assign({},t)}var st=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!it(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ot(e)},t.prototype.setAll=function(t){var e=this,n=R.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=ot(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());it(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return H(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];it(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){A(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(ot(this.value))},t}();function at(t){var e=[];return A(t.fields,(function(t,n){var r=new R([t]);if(it(n)){var i=at(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new M(e)}var ut=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,S.min(),st.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,st.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,st.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=st.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=st.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),ct=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function ht(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new ct(t,e,n,r,i,o,s)}function lt(t){var e=y(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+J(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),z(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Et(e.startAt)),e.endAt&&(n+="|ub:",n+=Et(e.endAt)),e.h=n}return e.h}function ft(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!kt(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!H(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ot(t.startAt,e.startAt)&&Ot(t.endAt,e.endAt)}function dt(t){return W.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var pt=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(r.b)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new vt(t,n,r):"array-contains"===n?new bt(t,r):"in"===n?new wt(t,r):"not-in"===n?new xt(t,r):"array-contains-any"===n?new _t(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new gt(t,n):new mt(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(K(e,this.value)):null!==e&&X(this.value)===X(e)&&this.m(K(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return g()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),vt=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=W.fromName(r.referenceValue),i}return Object(r.b)(e,t),e.prototype.matches=function(t){var e=W.comparator(t.key,this.key);return this.m(e)},e}(pt),gt=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=yt("in",n),r}return Object(r.b)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(pt),mt=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=yt("not-in",n),r}return Object(r.b)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(pt);function yt(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return W.fromName(t.referenceValue)}))}var bt=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(r.b)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return et(e)&&q(e.arrayValue,this.value)},e}(pt),wt=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(r.b)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&q(this.value.arrayValue,e)},e}(pt),xt=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(r.b)(e,t),e.prototype.matches=function(t){if(q(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!q(this.value.arrayValue,e)},e}(pt),_t=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(r.b)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!et(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return q(e.value.arrayValue,t)}))},e}(pt),Tt=function(t,e){this.position=t,this.before=e};function Et(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return J(t)})).join(",")}var St=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function kt(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function At(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?W.comparator(W.fromName(s.referenceValue),n.key):K(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Ot(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!H(t.position[n],e.position[n]))return!1;return!0}var Ct=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function Pt(t,e,n,r,i,o,s,a){return new Ct(t,e,n,r,i,o,s,a)}function It(t){return new Ct(t)}function Rt(t){return!z(t.limit)&&"F"===t.limitType}function Mt(t){return!z(t.limit)&&"L"===t.limitType}function Nt(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Lt(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Dt(t){return null!==t.collectionGroup}function Ft(t){var e=y(t);if(null===e.p){e.p=[];var n=Lt(e),r=Nt(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new St(n)),e.p.push(new St(R.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new St(R.keyField(),u))}}}return e.p}function jt(t){var e=y(t);if(!e.T)if("F"===e.limitType)e.T=ht(e.path,e.collectionGroup,Ft(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Ft(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new St(o.field,s))}var a=e.endAt?new Tt(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Tt(e.startAt.position,!e.startAt.before):null;e.T=ht(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.T}function Bt(t,e,n){return new Ct(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ut(t,e){return ft(jt(t),jt(e))&&t.limitType===e.limitType}function Vt(t){return lt(jt(t))+"|lt:"+t.limitType}function zt(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+J(e.value);var e})).join(", ")+"]"),z(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Et(t.startAt)),t.endAt&&(e+=", endAt: "+Et(t.endAt)),"Target("+e+")"}(jt(t))+"; limitType="+t.limitType+")"}function Gt(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):W.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!At(t.startAt,Ft(t),e))&&(!t.endAt||!At(t.endAt,Ft(t),e))}(t,e)}function Yt(t){return function(e,n){for(var r=!1,i=0,o=Ft(t);i<o.length;i++){var s=o[i],a=Wt(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Wt(t,e,n){var r=t.field.isKeyField()?W.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?K(r,i):g()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return g()}}function Xt(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:G(e)?"-0":e}}function Ht(t){return{integerValue:""+t}}function qt(t,e){return Y(e)?Ht(e):Xt(t,e)}var Kt=function(){this._=void 0};function $t(t,e,n){return t instanceof Zt?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof te?ee(t,e):t instanceof ne?re(t,e):function(t,e){var n=Qt(t,e),r=oe(n)+oe(t.A);return tt(n)&&tt(t.A)?Ht(r):Xt(t.R,r)}(t,e)}function Jt(t,e,n){return t instanceof te?ee(t,e):t instanceof ne?re(t,e):n}function Qt(t,e){return t instanceof ie?tt(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Zt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e}(Kt),te=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(r.b)(e,t),e}(Kt);function ee(t,e){for(var n=se(e),r=function(t){n.some((function(e){return H(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ne=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(r.b)(e,t),e}(Kt);function re(t,e){for(var n=se(e),r=function(t){n=n.filter((function(e){return!H(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ie=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(r.b)(e,t),e}(Kt);function oe(t){return F(t.integerValue||t.doubleValue)}function se(t){return et(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var ae=function(t,e){this.field=t,this.transform=e},ue=function(t,e){this.version=t,this.transformResults=e},ce=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function he(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var le=function(){};function fe(t,e,n){t instanceof me?function(t,e,n){var r=t.value.clone(),i=we(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof ye?function(t,e,n){if(he(t.precondition,e)){var r=we(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(be(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function de(t,e,n){t instanceof me?function(t,e,n){if(he(t.precondition,e)){var r=t.value.clone(),i=xe(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(ge(e),r).setHasLocalMutations()}}(t,e,n):t instanceof ye?function(t,e,n){if(he(t.precondition,e)){var r=xe(t.fieldTransforms,n,e),i=e.data;i.setAll(be(t)),i.setAll(r),e.convertToFoundDocument(ge(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){he(t.precondition,e)&&e.convertToNoDocument(S.min())}(t,e)}function pe(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Qt(o.transform,s||null);null!=a&&(null==n&&(n=st.empty()),n.set(o.field,a))}return n||null}function ve(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&_(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof te&&e instanceof te||t instanceof ne&&e instanceof ne?_(t.elements,e.elements,H):t instanceof ie&&e instanceof ie?H(t.A,e.A):t instanceof Zt&&e instanceof Zt}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function ge(t){return t.isFoundDocument()?t.version:S.min()}var me=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(r.b)(e,t),e}(le),ye=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(r.b)(e,t),e}(le);function be(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function we(t,e,n){var r=new Map;m(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Jt(s,a,n[i]))}return r}function xe(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,$t(a,u,e))}return r}var _e,Te,Ee=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(r.b)(e,t),e}(le),Se=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(r.b)(e,t),e}(le),ke=function(t){this.count=t};function Ae(t){switch(t){default:return g();case u.CANCELLED:case u.UNKNOWN:case u.DEADLINE_EXCEEDED:case u.RESOURCE_EXHAUSTED:case u.INTERNAL:case u.UNAVAILABLE:case u.UNAUTHENTICATED:return!1;case u.INVALID_ARGUMENT:case u.NOT_FOUND:case u.ALREADY_EXISTS:case u.PERMISSION_DENIED:case u.FAILED_PRECONDITION:case u.ABORTED:case u.OUT_OF_RANGE:case u.UNIMPLEMENTED:case u.DATA_LOSS:return!0}}function Oe(t){if(void 0===t)return d("GRPC error has no .code"),u.UNKNOWN;switch(t){case _e.OK:return u.OK;case _e.CANCELLED:return u.CANCELLED;case _e.UNKNOWN:return u.UNKNOWN;case _e.DEADLINE_EXCEEDED:return u.DEADLINE_EXCEEDED;case _e.RESOURCE_EXHAUSTED:return u.RESOURCE_EXHAUSTED;case _e.INTERNAL:return u.INTERNAL;case _e.UNAVAILABLE:return u.UNAVAILABLE;case _e.UNAUTHENTICATED:return u.UNAUTHENTICATED;case _e.INVALID_ARGUMENT:return u.INVALID_ARGUMENT;case _e.NOT_FOUND:return u.NOT_FOUND;case _e.ALREADY_EXISTS:return u.ALREADY_EXISTS;case _e.PERMISSION_DENIED:return u.PERMISSION_DENIED;case _e.FAILED_PRECONDITION:return u.FAILED_PRECONDITION;case _e.ABORTED:return u.ABORTED;case _e.OUT_OF_RANGE:return u.OUT_OF_RANGE;case _e.UNIMPLEMENTED:return u.UNIMPLEMENTED;case _e.DATA_LOSS:return u.DATA_LOSS;default:return g()}}(Te=_e||(_e={}))[Te.OK=0]="OK",Te[Te.CANCELLED=1]="CANCELLED",Te[Te.UNKNOWN=2]="UNKNOWN",Te[Te.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Te[Te.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Te[Te.NOT_FOUND=5]="NOT_FOUND",Te[Te.ALREADY_EXISTS=6]="ALREADY_EXISTS",Te[Te.PERMISSION_DENIED=7]="PERMISSION_DENIED",Te[Te.UNAUTHENTICATED=16]="UNAUTHENTICATED",Te[Te.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Te[Te.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Te[Te.ABORTED=10]="ABORTED",Te[Te.OUT_OF_RANGE=11]="OUT_OF_RANGE",Te[Te.UNIMPLEMENTED=12]="UNIMPLEMENTED",Te[Te.INTERNAL=13]="INTERNAL",Te[Te.UNAVAILABLE=14]="UNAVAILABLE",Te[Te.DATA_LOSS=15]="DATA_LOSS";var Ce=function(){function t(t,e){this.comparator=t,this.root=e||Ie.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ie.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ie.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Pe(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Pe(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Pe(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Pe(this.root,t,this.comparator,!0)},t}(),Pe=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Ie=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw g();if(this.right.isRed())throw g();var t=this.left.check();if(t!==this.right.check())throw g();return t+(this.isRed()?0:1)},t}();Ie.EMPTY=null,Ie.RED=!0,Ie.BLACK=!1,Ie.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw g()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw g()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ie(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Re=function(){function t(t){this.comparator=t,this.data=new Ce(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Me(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Me(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Me=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Ne=new Ce(W.comparator);function Le(){return Ne}var De=new Ce(W.comparator);function Fe(){return De}var je=new Ce(W.comparator);function Be(){return je}var Ue=new Re(W.comparator);function Ve(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Ue,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ze=new Re(x);function Ge(){return ze}var Ye=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,We.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(S.min(),r,Ge(),Le(),Ve())},t}(),We=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(N.EMPTY_BYTE_STRING,n,Ve(),Ve(),Ve())},t}(),Xe=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},He=function(t,e){this.targetId=t,this.V=e},qe=function(t,e,n,r){void 0===n&&(n=N.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ke=function(){function t(){this.S=0,this.D=Qe(),this.C=N.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Ve(),e=Ve(),n=Ve();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:g()}})),new We(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Qe()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),$e=function(){function t(t){this.W=t,this.G=new Map,this.H=Le(),this.J=Je(),this.Y=new Re(x)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:g()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(dt(i))if(0===n){var o=new W(i.path);this.tt(e,o,ut.newNoDocument(o,S.min()))}else m(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&dt(o.target)){var s=new W(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,ut.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=Ve();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Ye(t,n,this.Y,this.H,r);return this.H=Le(),this.J=Je(),this.Y=new Re(x),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Ke,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Re(x),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||f("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Ke),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Je(){return new Ce(W.comparator)}function Qe(){return new Ce(W.comparator)}var Ze={asc:"ASCENDING",desc:"DESCENDING"},tn={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},en=function(t,e){this.databaseId=t,this.I=e};function nn(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function rn(t,e){return t.I?e.toBase64():e.toUint8Array()}function on(t,e){return nn(t,e.toTimestamp())}function sn(t){return m(!!t),S.fromTimestamp(function(t){var e=D(t);return new E(e.seconds,e.nanos)}(t))}function an(t,e){return function(t){return new P(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function un(t){var e=P.fromString(t);return m(Rn(e)),e}function cn(t,e){return an(t.databaseId,e.path)}function hn(t,e){var n=un(e);if(n.get(1)!==t.databaseId.projectId)throw new c(u.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new c(u.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(pn(n))}function ln(t,e){return an(t.databaseId,e)}function fn(t){var e=un(t);return 4===e.length?P.emptyPath():pn(e)}function dn(t){return new P(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function pn(t){return m(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function vn(t,e,n){return{name:cn(t,e),fields:n.value.mapValue.fields}}function gn(t,e,n){var r=hn(t,e.name),i=sn(e.updateTime),o=new st({mapValue:{fields:e.fields}}),s=ut.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function mn(t,e){var n;if(e instanceof me)n={update:vn(t,e.key,e.value)};else if(e instanceof Ee)n={delete:cn(t,e.key)};else if(e instanceof ye)n={update:vn(t,e.key,e.data),updateMask:In(e.fieldMask)};else{if(!(e instanceof Se))return g();n={verify:cn(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Zt)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof te)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ne)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ie)return{fieldPath:e.field.canonicalString(),increment:n.A};throw g()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:on(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:g()}(t,e.precondition)),n}function yn(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?ce.updateTime(sn(t.updateTime)):void 0!==t.exists?ce.exists(t.exists):ce.none()}(e.currentDocument):ce.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)m("REQUEST_TIME"===e.setToServerValue),n=new Zt;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new te(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new ne(i)}else"increment"in e?n=new ie(t,e.increment):g();var o=R.fromServerFormat(e.fieldPath);return new ae(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=hn(t,e.update.name),o=new st({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new M(e.map((function(t){return R.fromServerFormat(t)})))}(e.updateMask);return new ye(i,o,s,n,r)}return new me(i,o,n,r)}if(e.delete){var a=hn(t,e.delete);return new Ee(a,n)}if(e.verify){var u=hn(t,e.verify);return new Se(u,n)}return g()}function bn(t,e){return{documents:[ln(t,e.path)]}}function wn(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=ln(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ln(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(rt(t.value))return{unaryFilter:{field:An(t.field),op:"IS_NAN"}};if(nt(t.value))return{unaryFilter:{field:An(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(rt(t.value))return{unaryFilter:{field:An(t.field),op:"IS_NOT_NAN"}};if(nt(t.value))return{unaryFilter:{field:An(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:An(t.field),op:kn(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:An(t.field),direction:Sn(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||z(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Tn(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Tn(e.endAt)),n}function xn(t){var e=fn(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){m(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=_n(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new St(On(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return z(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=En(n.startAt));var h=null;return n.endAt&&(h=En(n.endAt)),Pt(e,i,a,s,u,"F",c,h)}function _n(t){return t?void 0!==t.unaryFilter?[Pn(t)]:void 0!==t.fieldFilter?[Cn(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return _n(t)})).reduce((function(t,e){return t.concat(e)})):g():[]}function Tn(t){return{before:t.before,values:t.position}}function En(t){var e=!!t.before,n=t.values||[];return new Tt(n,e)}function Sn(t){return Ze[t]}function kn(t){return tn[t]}function An(t){return{fieldPath:t.canonicalString()}}function On(t){return R.fromServerFormat(t.fieldPath)}function Cn(t){return pt.create(On(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return g()}}(t.fieldFilter.op),t.fieldFilter.value)}function Pn(t){switch(t.unaryFilter.op){case"IS_NAN":var e=On(t.unaryFilter.field);return pt.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=On(t.unaryFilter.field);return pt.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=On(t.unaryFilter.field);return pt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=On(t.unaryFilter.field);return pt.create(i,"!=",{nullValue:"NULL_VALUE"});default:return g()}}function In(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Rn(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function Mn(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Ln(e)),e=Nn(t.get(n),e);return Ln(e)}function Nn(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Ln(t){return t+"\x01\x01"}function Dn(t){var e=t.length;if(m(e>=2),2===e)return m("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),P.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&g(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:g()}o=s+2}return new P(r)}var Fn=function(t,e){this.seconds=t,this.nanoseconds=e},jn=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};jn.store="owner",jn.key="owner";var Bn=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Bn.store="mutationQueues",Bn.keyPath="userId";var Un=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Un.store="mutations",Un.keyPath="batchId",Un.userMutationsIndex="userMutationsIndex",Un.userMutationsKeyPath=["userId","batchId"];var Vn=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,Mn(e)]},t.key=function(t,e,n){return[t,Mn(e),n]},t}();Vn.store="documentMutations",Vn.PLACEHOLDER=new Vn;var zn=function(t,e){this.path=t,this.readTime=e},Gn=function(t,e){this.path=t,this.version=e},Yn=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Yn.store="remoteDocuments",Yn.readTimeIndex="readTimeIndex",Yn.readTimeIndexPath="readTime",Yn.collectionReadTimeIndex="collectionReadTimeIndex",Yn.collectionReadTimeIndexPath=["parentPath","readTime"];var Wn=function(t){this.byteSize=t};Wn.store="remoteDocumentGlobal",Wn.key="remoteDocumentGlobalKey";var Xn=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Xn.store="targets",Xn.keyPath="targetId",Xn.queryTargetsIndexName="queryTargetsIndex",Xn.queryTargetsKeyPath=["canonicalId","targetId"];var Hn=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Hn.store="targetDocuments",Hn.keyPath=["targetId","path"],Hn.documentTargetsIndex="documentTargetsIndex",Hn.documentTargetsKeyPath=["path","targetId"];var qn=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};qn.key="targetGlobalKey",qn.store="targetGlobal";var Kn=function(t,e){this.collectionId=t,this.parent=e};Kn.store="collectionParents",Kn.keyPath=["collectionId","parent"];var $n=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};$n.store="clientMetadata",$n.keyPath="clientId";var Jn=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Jn.store="bundles",Jn.keyPath="bundleId";var Qn=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Qn.store="namedQueries",Qn.keyPath="name";var Zn=Object(r.d)(Object(r.d)([],Object(r.d)(Object(r.d)([],Object(r.d)(Object(r.d)([],Object(r.d)(Object(r.d)([],[Bn.store,Un.store,Vn.store,Yn.store,Xn.store,jn.store,qn.store,Hn.store]),[$n.store])),[Wn.store])),[Kn.store])),[Jn.store,Qn.store]),tr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",er=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),nr=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},rr=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&g(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),ir=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new nr,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new ar(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=fr(e.target.error);n.ft.reject(new ar(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new ar(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(f("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new cr(e)},t}(),or=function(){function e(t,n,r){this.name=t,this.version=n,this.wt=r,12.2===e._t(Object(i.getUA)())&&d("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(t){return f("SimpleDb","Removing database:",t),hr(window.indexedDB.deleteDatabase(t)).toPromise()},e.yt=function(){if("undefined"==typeof indexedDB)return!1;if(e.gt())return!0;var t=Object(i.getUA)(),n=e._t(t),r=0<n&&n<10,o=e.Et(t),s=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||s)},e.gt=function(){var e;return"undefined"!=typeof t&&"YES"===(null===(e=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_COLLECTION_NAME:"highscores",REACT_APP_FIREBASE_APIKEY:'\u201dAIzaSyBnP9vqgX__NsGOWq40kkK--4F5P0yFsKc"',REACT_APP_FIREBASE_APPID:'1:795230851008:web:52465fb8f11d3fd3608225"',REACT_APP_FIREBASE_AUTHDOMAIN:"pinbaal-743d3.firebaseapp.com",REACT_APP_FIREBASE_MESSAGINGSENDERID:"795230851008",REACT_APP_FIREBASE_PROJECTID:"pinbaal-743d3",REACT_APP_FIREBASE_STORAGEBUCKET:"pinbaal-743d3.appspot.com",REACT_APP_SERVER_PORT:"https://server.pinbaal.com"}))||void 0===e?void 0:e.Tt)},e.It=function(t,e){return t.store(e)},e._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.At=function(t){return Object(r.a)(this,void 0,void 0,(function(){var e,n=this;return Object(r.c)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(f("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new ar(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new c(u.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new ar(t,n))},i.onupgradeneeded=function(t){f("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){f("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},e.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},e.prototype.runTransaction=function(t,e,n,i){return Object(r.a)(this,void 0,void 0,(function(){var o,s,a,u,c;return Object(r.c)(this,(function(h){switch(h.label){case 0:o="readonly"===e,s=0,a=function(){var e,a,c,h,l;return Object(r.c)(this,(function(r){switch(r.label){case 0:++s,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,u.At(t)];case 2:return u.db=r.sent(),e=ir.open(u.db,t,o?"readonly":"readwrite",n),a=i(e).catch((function(t){return e.abort(t),rr.reject(t)})).toPromise(),c={},a.catch((function(){})),[4,e.dt];case 3:return[2,(c.value=(r.sent(),a),c)];case 4:return h=r.sent(),l="FirebaseError"!==h.name&&s<3,f("SimpleDb","Transaction failed with error:",h.message,"Retrying:",l),u.close(),l?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}}))},u=this,h.label=1;case 1:return[5,a()];case 2:if("object"==typeof(c=h.sent()))return[2,c.value];h.label=3;case 3:return[3,1];case 4:return[2]}}))}))},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),sr=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return hr(this.Pt.delete())},t}(),ar=function(t){function e(e,n){var r=this;return(r=t.call(this,u.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(r.b)(e,t),e}(c);function ur(t){return"IndexedDbTransactionError"===t.name}var cr=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(f("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(f("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),hr(n)},t.prototype.add=function(t){return f("SimpleDb","ADD",this.store.name,t,t),hr(this.store.add(t))},t.prototype.get=function(t){var e=this;return hr(this.store.get(t)).next((function(n){return void 0===n&&(n=null),f("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return f("SimpleDb","DELETE",this.store.name,t),hr(this.store.delete(t))},t.prototype.count=function(){return f("SimpleDb","COUNT",this.store.name),hr(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){f("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new rr((function(n,r){e.onerror=function(t){var e=fr(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new rr((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new sr(i),s=e(i.primaryKey,i.value,o);if(s instanceof rr){var a=s.catch((function(t){return o.done(),rr.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return rr.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function hr(t){return new rr((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=fr(t.target.error);n(e)}}))}var lr=!1;function fr(t){var e=or._t(Object(i.getUA)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new c("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return lr||(lr=!0,setTimeout((function(){throw r}),0)),r}}return t}var dr=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(r.b)(e,t),e}(er);function pr(t,e){var n=y(t);return or.It(n.Mt,e)}var vr=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&fe(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&de(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&de(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(S.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Ve())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&_(this.mutations,t.mutations,(function(t,e){return ve(t,e)}))&&_(this.baseMutations,t.baseMutations,(function(t,e){return ve(t,e)}))},t}(),gr=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){m(e.mutations.length===r.length);for(var i=Be(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),mr=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=S.min()),void 0===o&&(o=S.min()),void 0===s&&(s=N.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),yr=function(t){this.Lt=t};function br(t,e){if(e.document)return gn(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=W.fromSegments(e.noDocument.path),r=Er(e.noDocument.readTime),i=ut.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=W.fromSegments(e.unknownDocument.path);return r=Er(e.unknownDocument.version),ut.newUnknownDocument(o,r)}return g()}function wr(t,e,n){var r=xr(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:cn(t,e.key),fields:e.data.value.mapValue.fields,updateTime:nn(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new Yn(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Tr(e.version);return s=e.hasCommittedMutations,new Yn(null,new zn(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=Tr(e.version);return new Yn(new Gn(c,h),null,null,!0,r,i)}return g()}function xr(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function _r(t){var e=new E(t[0],t[1]);return S.fromTimestamp(e)}function Tr(t){var e=t.toTimestamp();return new Fn(e.seconds,e.nanoseconds)}function Er(t){var e=new E(t.seconds,t.nanoseconds);return S.fromTimestamp(e)}function Sr(t,e){for(var n=(e.baseMutations||[]).map((function(e){return yn(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return yn(t.Lt,e)})),a=E.fromMillis(e.localWriteTimeMs);return new vr(e.batchId,a,n,s)}function kr(t){var e,n,r=Er(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Er(t.lastLimboFreeSnapshotVersion):S.min();return void 0!==t.query.documents?(m(1===(n=t.query).documents.length),e=jt(It(fn(n.documents[0])))):e=function(t){return jt(xn(t))}(t.query),new mr(e,t.targetId,0,t.lastListenSequenceNumber,r,i,N.fromBase64String(t.resumeToken))}function Ar(t,e){var n,r=Tr(e.snapshotVersion),i=Tr(e.lastLimboFreeSnapshotVersion);n=dt(e.target)?bn(t.Lt,e.target):wn(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Xn(e.targetId,lt(e.target),r,o,e.sequenceNumber,i,n)}function Or(t){var e=xn({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Bt(e,e.limit,"L"):e}var Cr=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Pr(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:Er(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Pr(t).put({bundleId:(n=e).id,createTime:Tr(sn(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Ir(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Or(e.bundledQuery),readTime:Er(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Ir(t).put(function(t){return{name:t.name,readTime:Tr(sn(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Pr(t){return pr(t,Jn.store)}function Ir(t){return pr(t,Qn.store)}var Rr=function(){function t(){this.Bt=new Mr}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),rr.resolve()},t.prototype.getCollectionParents=function(t,e){return rr.resolve(this.Bt.getEntries(e))},t}(),Mr=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Re(P.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Re(P.comparator)).toArray()},t}(),Nr=function(){function t(){this.qt=new Mr}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:Mn(i)};return Lr(t).put(o)}return rr.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[T(e),""],!1,!0);return Lr(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Dn(o.parent))}return n}))},t}();function Lr(t){return pr(t,Kn.store)}var Dr={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fr=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function jr(t,e,n){var r=t.store(Un.store),i=t.store(Vn.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){m(1===a)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],d=Vn.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return rr.waitFor(o).next((function(){return c}))}function Br(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw g();e=t.noDocument}return JSON.stringify(e).length}Fr.DEFAULT_COLLECTION_PERCENTILE=10,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fr.DEFAULT=new Fr(41943040,Fr.DEFAULT_COLLECTION_PERCENTILE,Fr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fr.DISABLED=new Fr(-1,0,0);var Ur=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return m(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zr(t).$t({index:Un.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Gr(t),s=zr(t);return s.add({}).next((function(a){m("number"==typeof a);for(var u=new vr(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return mn(t.Lt,e)})),i=n.mutations.map((function(e){return mn(t.Lt,e)}));return new Un(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],l=new Re((function(t,e){return x(t.canonicalString(),e.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],v=Vn.key(i.userId,p.key.path,a);l=l.add(p.key.path.popLast()),h.push(s.put(c)),h.push(o.put(v,Vn.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[a]=u.keys()})),rr.waitFor(h).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return zr(t).get(e).next((function(t){return t?(m(t.userId===n.userId),Sr(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?rr.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return zr(t).$t({index:Un.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(m(e.batchId>=r),o=Sr(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return zr(t).$t({index:Un.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zr(t).Nt(Un.userMutationsIndex,n).next((function(t){return t.map((function(t){return Sr(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Vn.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Gr(t).$t({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=Dn(u);if(a===n.userId&&e.path.isEqual(h))return zr(t).get(c).next((function(t){if(!t)throw g();m(t.userId===n.userId),o.push(Sr(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Re(x),i=[];return e.forEach((function(e){var o=Vn.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Gr(t).$t({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=Dn(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),rr.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Vn.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Re(x);return Gr(t).$t({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=Dn(u);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(zr(t).get(e).next((function(t){if(null===t)throw g();m(t.userId===n.userId),r.push(Sr(n.R,t))})))})),rr.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return jr(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),rr.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return rr.resolve();var r=IDBKeyRange.lowerBound(Vn.prefixForUser(e.userId)),i=[];return Gr(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Dn(t[1]);i.push(o)}else r.done()})).next((function(){m(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Vr(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Yr(t).get(this.userId).next((function(t){return t||new Bn(e.userId,-1,"")}))},t}();function Vr(t,e,n){var r=Vn.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Gr(t).$t({range:o,kt:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function zr(t){return pr(t,Un.store)}function Gr(t){return pr(t,Vn.store)}function Yr(t){return pr(t,Bn.store)}var Wr=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Xr=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new Wr(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return S.fromTimestamp(new E(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return Hr(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return m(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Hr(t).$t((function(s,a){var u=kr(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return rr.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return Hr(t).$t((function(t,n){var r=kr(n);e(r)}))},t.prototype.Xt=function(t){return qr(t).get(qn.key).next((function(t){return m(null!==t),t}))},t.prototype.Zt=function(t,e){return qr(t).put(qn.key,e)},t.prototype.te=function(t,e){return Hr(t).put(Ar(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=lt(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Hr(t).$t({range:r,index:Xn.queryTargetsIndexName},(function(t,n,r){var o=kr(n);ft(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Kr(t);return e.forEach((function(e){var s=Mn(e.path);i.push(o.put(new Hn(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),rr.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Kr(t);return rr.forEach(e,(function(e){var o=Mn(e.path);return rr.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Kr(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Kr(t),i=Ve();return r.$t({range:n,kt:!0},(function(t,e,n){var r=Dn(t[1]),o=new W(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=Mn(e.path),r=IDBKeyRange.bound([n],[T(n)],!1,!0),i=0;return Kr(t).$t({index:Hn.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return Hr(t).get(e).next((function(t){return t?kr(t):null}))},t}();function Hr(t){return pr(t,Xn.store)}function qr(t){return pr(t,qn.store)}function Kr(t){return pr(t,Hn.store)}function $r(t){return Object(r.a)(this,void 0,void 0,(function(){return Object(r.c)(this,(function(e){if(t.code!==u.FAILED_PRECONDITION||t.message!==tr)throw t;return f("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function Jr(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=x(n,i);return 0===s?x(r,o):s}var Qr=function(){function t(t){this.ne=t,this.buffer=new Re(Jr),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Jr(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Zr=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;f("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Object(r.a)(e,void 0,void 0,(function(){var e;return Object(r.c)(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return ur(e=n.sent())?(f("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,$r(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),ti=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return rr.resolve(a.o);var r=new Qr(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; disabled"),rr.resolve(Dr)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Dr):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,s,a,u,c,h=this,d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>h.params.maximumSequenceNumbersToCollect?(f("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.maximumSequenceNumbersToCollect+" from "+e),r=h.params.maximumSequenceNumbersToCollect):r=e,s=Date.now(),h.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),h.removeTargets(t,n,e)})).next((function(e){return i=e,u=Date.now(),h.removeOrphanedDocuments(t,n)})).next((function(t){return c=Date.now(),l()<=o.LogLevel.DEBUG&&f("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-d)+"ms\n\tDetermined least recently used "+r+" in "+(a-s)+"ms\n\tRemoved "+i+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-d)+"ms"),rr.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),ei=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new ti(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return ni(t,n)},t.prototype.removeReference=function(t,e,n){return ni(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return ni(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Yr(t).Ot((function(r){return Vr(t,r,e).next((function(t){return t&&(n=!0),rr.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),Kr(t).delete([0,Mn(s.path)])}))}));i.push(u)}})).next((function(){return rr.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return ni(t,e)},t.prototype.we=function(t,e){var n,r=Kr(t),i=a.o;return r.$t({index:Hn.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var s=r.path,u=r.sequenceNumber;0===o?(i!==a.o&&e(new W(Dn(n)),i),i=u,n=s):i=a.o})).next((function(){i!==a.o&&e(new W(Dn(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function ni(t,e){return Kr(t).put(function(t,e){return new Hn(0,Mn(t.path),e)}(e,t.currentSequenceNumber))}var ri=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.equalsFn(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){A(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.isEmpty=function(){return O(this.inner)},t}(),ii=function(){function t(){this.changes=new ri((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:S.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:ut.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?rr.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),oi=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return ui(t).put(ci(e),n)},t.prototype.removeEntry=function(t,e){var n=ui(t),r=ci(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return ui(t).get(ci(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return ui(t).get(ci(e)).next((function(t){return{document:n.ye(e,t),size:Br(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=Le();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=Le(),i=new Ce(W.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Br(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return rr.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return ui(t).$t({range:r},(function(t,e,r){for(var s=W.fromSegments(t);o&&W.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Le(),o=e.path.length+1,s={};if(n.isEqual(S.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=xr(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Yn.collectionReadTimeIndex}return ui(t).$t(s,(function(t,n,s){if(t.length===o){var a=br(r.R,n);e.path.isPrefixOf(a.key.path)?Gt(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new si(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return ai(t).get(Wn.key).next((function(t){return m(!!t),t}))},t.prototype.me=function(t,e){return ai(t).put(Wn.key,e)},t.prototype.ye=function(t,e){if(e){var n=br(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(S.min()))return n}return ut.newInvalidDocument(t)},t}(),si=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new ri((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(r.b)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Re((function(t,e){return x(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=wr(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Br(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var h=wr(e.Ie.R,ut.newNoDocument(o,S.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),rr.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(ii);function ai(t){return pr(t,Wn.store)}function ui(t){return pr(t,Yn.store)}function ci(t){return t.path.toArray()}var hi=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;m(n<r&&n>=0&&r<=11);var o=new ir("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(jn.store)}(t),function(t){t.createObjectStore(Bn.store,{keyPath:Bn.keyPath}),t.createObjectStore(Un.store,{keyPath:Un.keyPath,autoIncrement:!0}).createIndex(Un.userMutationsIndex,Un.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Vn.store)}(t),li(t),function(t){t.createObjectStore(Yn.store)}(t));var s=rr.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Hn.store),t.deleteObjectStore(Xn.store),t.deleteObjectStore(qn.store)}(t),li(t)),s=s.next((function(){return function(t){var e=t.store(qn.store),n=new qn(0,0,S.min().toTimestamp(),0);return e.put(qn.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Un.store).Nt().next((function(n){t.deleteObjectStore(Un.store),t.createObjectStore(Un.store,{keyPath:Un.keyPath,autoIncrement:!0}).createIndex(Un.userMutationsIndex,Un.userMutationsKeyPath,{unique:!0});var r=e.store(Un.store),i=n.map((function(t){return r.put(t)}));return rr.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore($n.store,{keyPath:$n.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(Wn.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Yn.store);e.createIndex(Yn.readTimeIndex,Yn.readTimeIndexPath,{unique:!1}),e.createIndex(Yn.collectionReadTimeIndex,Yn.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(Jn.store,{keyPath:Jn.keyPath})}(t),function(t){t.createObjectStore(Qn.store,{keyPath:Qn.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(Yn.store).$t((function(t,n){e+=Br(n)})).next((function(){var n=new Wn(e);return t.store(Wn.store).put(Wn.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Bn.store),r=t.store(Un.store);return n.Nt().next((function(n){return rr.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Un.userMutationsIndex,i).next((function(r){return rr.forEach(r,(function(r){m(r.userId===n.userId);var i=Sr(e.R,r);return jr(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Hn.store),n=t.store(Yn.store);return t.store(qn.store).get(qn.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new P(n),s=function(t){return[0,Mn(t)]}(o);r.push(e.get(s).next((function(n){return n?rr.resolve():function(n){return e.put(new Hn(0,Mn(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return rr.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(Kn.store,{keyPath:Kn.keyPath});var n=e.store(Kn.store),r=new Mr,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:Mn(i)})}};return e.store(Yn.store).$t({kt:!0},(function(t,e){var n=new P(t);return i(n.popLast())})).next((function(){return e.store(Vn.store).$t({kt:!0},(function(t,e){t[0];var n=t[1];t[2];var r=Dn(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(Xn.store);return n.$t((function(t,r){var i=kr(r),o=Ar(e.R,i);return n.put(o)}))},t}();function li(t){t.createObjectStore(Hn.store,{keyPath:Hn.keyPath}).createIndex(Hn.documentTargetsIndex,Hn.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Xn.store,{keyPath:Xn.keyPath}).createIndex(Xn.queryTargetsIndexName,Xn.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(qn.store)}var fi="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",di=function(){function t(e,n,r,i,o,s,a,h,l,f){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=l,this.Ce=f,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new c(u.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ei(this,i),this.Le=n+"main",this.R=new yr(h),this.Be=new or(this.Le,11,new hi(this.R)),this.qe=new Xr(this.referenceDelegate,this.R),this.Ut=new Nr,this.Ue=function(t,e){return new oi(t,e)}(this.R,this.Ut),this.Ke=new Cr,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===f&&d("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new c(u.FAILED_PRECONDITION,fi);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new a(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(r.a)(e,void 0,void 0,(function(){return Object(r.c)(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return Object(r.a)(e,void 0,void 0,(function(){return Object(r.c)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return Object(r.a)(e,void 0,void 0,(function(){return Object(r.c)(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return vi(e).put(new $n(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(ur(e))return f("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return f("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return pi(t).get(jn.key).next((function(t){return rr.resolve(e.tn(t))}))},t.prototype.en=function(t){return vi(t).delete(this.clientId)},t.prototype.nn=function(){return Object(r.a)(this,void 0,void 0,(function(){var t,e,n,i,o=this;return Object(r.c)(this,(function(r){switch(r.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=pr(t,$n.store);return e.Nt().next((function(t){var n=o.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return rr.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=r.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)i=n[e],this.Qe.removeItem(this.on(i.clientId));r.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?rr.resolve(!0):pi(t).get(jn.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new c(u.FAILED_PRECONDITION,fi);return!1}}return!(!e.networkEnabled||!e.inForeground)||vi(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&f("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return Object(r.a)(this,void 0,void 0,(function(){var t=this;return Object(r.c)(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[jn.store,$n.store],(function(e){var n=new dr(e,a.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return vi(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Ur.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;f("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Zn,(function(o){return i=new dr(o,r.Ne?r.Ne.next():a.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw d("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new c(u.FAILED_PRECONDITION,tr);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return pi(t).get(jn.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new c(u.FAILED_PRECONDITION,fi)}))},t.prototype.Ze=function(t){var e=new jn(this.clientId,this.allowTabSynchronization,Date.now());return pi(t).put(jn.key,e)},t.yt=function(){return or.yt()},t.prototype.Xe=function(t){var e=this,n=pi(t);return n.get(jn.key).next((function(t){return e.tn(t)?(f("IndexedDbPersistence","Releasing primary lease."),n.delete(jn.key)):rr.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(d("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),Object(i.isSafari)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return f("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return d("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){d("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function pi(t){return pr(t,jn.store)}function vi(t){return pr(t,$n.store)}function gi(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var mi=function(t,e){this.progress=t,this.wn=e},yi=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return W.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Dt(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new W(e)).next((function(t){var e=Fe();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Fe();return this.Ut.getCollectionParents(t,i).next((function(s){return rr.forEach(s,(function(s){var a=function(t,e){return new Ct(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=r.get(c);null==h&&(h=ut.newInvalidDocument(c),r=r.insert(c,h)),de(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){Gt(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=Ve(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof ye&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),bi=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Ve(),i=Ve(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),wi=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(S.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(s){var a=i.Cn(e,s);return(Rt(e)||Mt(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(l()<=o.LogLevel.DEBUG&&f("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),zt(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Re(Yt(t));return e.forEach((function(e,r){Gt(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return l()<=o.LogLevel.DEBUG&&f("QueryEngine","Using full collection scan to execute query:",zt(e)),this.Sn.getDocumentsMatchingQuery(t,e,S.min())},t}(),xi=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Ce(x),this.kn=new ri((function(t){return lt(t)}),ft),this.$n=S.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new yi(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();function _i(t,e,n,r){return new xi(t,e,n,r)}function Ti(t,e){return Object(r.a)(this,void 0,void 0,(function(){var n,i,o,s;return Object(r.c)(this,(function(r){switch(r.label){case 0:return n=y(t),i=n._n,o=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var r;return n._n.getAllMutationBatches(t).next((function(s){return r=s,i=n.persistence.getMutationQueue(e),o=new yi(n.On,i,n.persistence.getIndexManager()),i.getAllMutationBatches(t)})).next((function(e){for(var n=[],i=[],s=Ve(),a=0,u=r;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];s=s.add(f.key)}}for(var d=0,p=e;d<p.length;d++){var v=p[d];i.push(v.batchId);for(var g=0,m=v.mutations;g<m.length;g++){var y=m[g];s=s.add(y.key)}}return o.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:i}}))}))}))];case 1:return s=r.sent(),[2,(n._n=i,n.Mn=o,n.xn.Vn(n.Mn),s)]}}))}))}function Ei(t,e){var n=y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=rr.resolve();return o.forEach((function(t){s=s.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);m(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),s.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Si(t){var e=y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function ki(t,e){var n=y(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return m(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}}));var a=Le();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(Ai(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(S.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return rr.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.Fn=i,t}))}function Ai(t,e,n,r,i){var o=Ve();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Le();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(S.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):f("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function Oi(t,e){var n=y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Ci(t,e){var n=y(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,rr.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new mr(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function Pi(t,e,n){return Object(r.a)(this,void 0,void 0,(function(){var i,o,s,a;return Object(r.c)(this,(function(r){switch(r.label){case 0:i=y(t),o=i.Fn.get(e),s=n?"readwrite":"readwrite-primary",r.label=1;case 1:return r.trys.push([1,4,,5]),n?[3,3]:[4,i.persistence.runTransaction("Release target",s,(function(t){return i.persistence.referenceDelegate.removeTarget(t,o)}))];case 2:r.sent(),r.label=3;case 3:return[3,5];case 4:if(!ur(a=r.sent()))throw a;return f("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return i.Fn=i.Fn.remove(e),i.kn.delete(o.target),[2]}}))}))}function Ii(t,e,n){var r=y(t),i=S.min(),o=Ve();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=y(t),i=r.kn.get(n);return void 0!==i?rr.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,jt(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:S.min(),n?o:Ve())})).next((function(t){return{documents:t,Bn:o}}))}))}function Ri(t,e){var n=y(t),r=y(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Mi(t){var e=y(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=y(t),i=Le(),o=xr(n),s=ui(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:Yn.readTimeIndex,range:a},(function(t,e){var n=br(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:_r(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function Ni(t){return Object(r.a)(this,void 0,void 0,(function(){var e;return Object(r.c)(this,(function(n){return[2,(e=y(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=ui(t),n=S.min();return e.$t({index:Yn.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=_r(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function Li(t,e,n,i){return Object(r.a)(this,void 0,void 0,(function(){var o,s,a,u,c,h,l,f,d,p;return Object(r.c)(this,(function(r){switch(r.label){case 0:for(o=y(t),s=Ve(),a=Le(),u=Be(),c=0,h=n;c<h.length;c++)l=h[c],f=e.qn(l.metadata.name),l.document&&(s=s.add(f)),a=a.insert(f,e.Un(l)),u=u.insert(f,e.Kn(l.metadata.readTime));return d=o.On.newChangeBuffer({trackRemovals:!0}),[4,Ci(o,function(t){return jt(It(P.fromString("__bundle__/docs/"+t)))}(i))];case 1:return p=r.sent(),[2,o.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Ai(t,d,a,S.min(),u).next((function(e){return d.apply(t),e})).next((function(e){return o.qe.removeMatchingKeysForTargetId(t,p.targetId).next((function(){return o.qe.addMatchingKeys(t,s,p.targetId)})).next((function(){return o.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function Di(t,e,n){return void 0===n&&(n=Ve()),Object(r.a)(this,void 0,void 0,(function(){var i,o;return Object(r.c)(this,(function(r){switch(r.label){case 0:return[4,Ci(t,jt(Or(e.bundledQuery)))];case 1:return i=r.sent(),[2,(o=y(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var r=sn(e.readTime);if(i.snapshotVersion.compareTo(r)>=0)return o.Ke.saveNamedQuery(t,e);var s=i.withResumeToken(N.EMPTY_BYTE_STRING,r);return o.Fn=o.Fn.insert(s.targetId,s),o.qe.updateTargetData(t,s).next((function(){return o.qe.removeMatchingKeysForTargetId(t,i.targetId)})).next((function(){return o.qe.addMatchingKeys(t,n,i.targetId)})).next((function(){return o.Ke.saveNamedQuery(t,e)}))}))]}}))}))}var Fi=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return rr.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:sn(n.createTime)}),rr.resolve()},t.prototype.getNamedQuery=function(t,e){return rr.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Or(t.bundledQuery),readTime:sn(t.readTime)}}(e)),rr.resolve()},t}(),ji=function(){function t(){this.Wn=new Re(Bi.Gn),this.zn=new Re(Bi.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Bi(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new Bi(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new W(new P([])),r=new Bi(n,t),i=new Bi(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new W(new P([])),n=new Bi(e,t),r=new Bi(e,t+1),i=Ve();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Bi(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Bi=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return W.comparator(t.key,e.key)||x(t.ns,e.ns)},t.Hn=function(t,e){return x(t.ns,e.ns)||W.comparator(t.key,e.key)},t}(),Ui=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Re(Bi.Gn)}return t.prototype.checkEmpty=function(t){return rr.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new vr(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new Bi(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return rr.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return rr.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return rr.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return rr.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return rr.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Bi(e,0),i=new Bi(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),rr.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Re(x);return e.forEach((function(t){var e=new Bi(t,0),i=new Bi(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),rr.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;W.isDocumentKey(i)||(i=i.child(""));var o=new Bi(new W(i),0),s=new Re(x);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),rr.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;m(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return rr.forEach(e.mutations,(function(i){var o=new Bi(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Bi(e,0),r=this.rs.firstAfterOrEqual(n);return rr.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,rr.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Vi=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Ce(W.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return rr.resolve(n?n.document.clone():ut.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Le();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():ut.newInvalidDocument(t))})),rr.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Le(),i=new W(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(a.path))break;h.compareTo(n)<=0||Gt(e,c)&&(r=r.insert(c.key,c.clone()))}return rr.resolve(r)},t.prototype.fs=function(t,e){return rr.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new zi(this)},t.prototype.getSize=function(t){return rr.resolve(this.size)},t}(),zi=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(r.b)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),rr.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(ii),Gi=function(){function t(t){this.persistence=t,this.ds=new ri((function(t){return lt(t)}),ft),this.lastRemoteSnapshotVersion=S.min(),this.highestTargetId=0,this.ws=0,this._s=new ji,this.targetCount=0,this.ys=Wr.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),rr.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return rr.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return rr.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),rr.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),rr.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Wr(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,rr.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),rr.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,rr.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),rr.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return rr.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return rr.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),rr.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),rr.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),rr.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return rr.resolve(n)},t.prototype.containsKey=function(t,e){return rr.resolve(this._s.containsKey(e))},t}(),Yi=function(){function t(t,e){var n=this;this.gs={},this.Ne=new a(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Gi(this),this.Ut=new Rr,this.Ue=function(t,e){return new Vi(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new yr(e),this.Ke=new Fi(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Ui(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;f("MemoryPersistence","Starting transaction:",t);var i=new Wi(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return rr.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),Wi=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(r.b)(e,t),e}(er),Xi=function(){function t(t){this.persistence=t,this.As=new ji,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw g()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),rr.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),rr.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),rr.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rr.forEach(this.vs,(function(r){var i=W.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return rr.or([function(){return rr.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Hi=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function qi(t,e){return"firestore_clients_"+t+"_"+e}function Ki(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function $i(t,e){return"firestore_targets_"+t+"_"+e}Hi.UNAUTHENTICATED=new Hi(null),Hi.GOOGLE_CREDENTIALS=new Hi("google-credentials-uid"),Hi.FIRST_PARTY=new Hi("first-party-uid");var Ji=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new c(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(d("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Qi=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new c(i.error.code,i.error.message)),o?new t(e,i.state,r):(d("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Zi=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ge(),s=0;i&&s<r.activeTargetIds.length;++s)i=Y(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(d("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),to=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(d("SharedClientState","Failed to parse online state: "+e),null)},t}(),eo=function(){function t(){this.activeTargetIds=Ge()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),no=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Ce(x),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=qi(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new eo),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(r.a)(this,void 0,void 0,(function(){var t,e,n,i,o,s,a,u,c,h,l,f=this;return Object(r.c)(this,(function(r){switch(r.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=r.sent(),e=0,n=t;e<n.length;e++)(i=n[e])!==this.Ns&&(o=this.getItem(qi(this.persistenceKey,i)))&&(s=Zi.Vs(i,o))&&(this.ks=this.ks.insert(s.clientId,s));for(this.Qs(),(a=this.storage.getItem(this.Us))&&(u=this.js(a))&&this.Ws(u),c=0,h=this.$s;c<h.length;c++)l=h[c],this.Fs(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem($i(this.persistenceKey,t));if(n){var r=Qi.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem($i(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return f("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){f("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){f("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(f("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void d("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return Object(r.a)(e,void 0,void 0,(function(){var t,e,i,o,s,u;return Object(r.c)(this,(function(r){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(i=this.si(n.key,n.newValue)))return[2,this.ii(i)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(o=this.ri(n.key,n.newValue)))return[2,this.oi(o)]}else if(n.key===this.Us){if(null!==n.newValue&&(s=this.js(n.newValue)))return[2,this.Ws(s)]}else if(n.key===this.Ms)(u=function(t){var e=a.o;if(null!=t)try{var n=JSON.parse(t);m("number"==typeof n),e=n}catch(t){d("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==a.o&&this.sequenceNumberHandler(u);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Ji(this.currentUser,t,e,n),i=Ki(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Ki(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=$i(this.persistenceKey,t),i=new Qi(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Zi.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Ji.Vs(new Hi(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Qi.Vs(r,e)},t.prototype.js=function(t){return to.Vs(t)},t.prototype.ii=function(t){return Object(r.a)(this,void 0,void 0,(function(){return Object(r.c)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(f("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Ge();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),ro=function(){function t(){this.li=new eo,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new eo,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),io=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),oo=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){f("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){f("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),so={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},ao=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),uo=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return Object(r.b)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var a=new s.g;a.listenOnce(s.c.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case s.a.NO_ERROR:var e=a.getResponseJson();f("Connection","XHR received:",JSON.stringify(e)),i(e);break;case s.a.TIMEOUT:f("Connection",'RPC "'+t+'" timed out'),o(new c(u.DEADLINE_EXCEEDED,"Request time out"));break;case s.a.HTTP_ERROR:var n=a.getStatus();if(f("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var h=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(u).indexOf(e)>=0?e:u.UNKNOWN}(r.status);o(new c(h,r.message))}else o(new c(u.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new c(u.UNAVAILABLE,"Connection failed."));break;default:g()}}finally{f("Connection",'RPC "'+t+'" completed.')}}));var h=JSON.stringify(r);a.send(e,"POST",h,n,15)}))},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=Object(s.h)(),o=Object(s.i)(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new s.d({})),this.Fi(a.initMessageHeaders,e),Object(i.isMobileCordova)()||Object(i.isReactNative)()||Object(i.isElectron)()||Object(i.isIE)()||Object(i.isUWP)()||Object(i.isBrowserExtension)()||(a.httpHeadersOverwriteParam="$httpHeaders");var h=n.join("");f("Connection","Creating WebChannel: "+h,a);var l=r.createWebChannel(h,a),d=!1,v=!1,g=new ao({Ei:function(t){v?f("Connection","Not sending because WebChannel is closed:",t):(d||(f("Connection","Opening WebChannel transport."),l.open(),d=!0),f("Connection","WebChannel sending:",t),l.send(t))},Ti:function(){return l.close()}}),y=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return y(l,s.f.EventType.OPEN,(function(){v||f("Connection","WebChannel transport opened.")})),y(l,s.f.EventType.CLOSE,(function(){v||(v=!0,f("Connection","WebChannel transport closed"),g.Vi())})),y(l,s.f.EventType.ERROR,(function(t){v||(v=!0,p("Connection","WebChannel transport errored:",t),g.Vi(new c(u.UNAVAILABLE,"The operation could not be completed")))})),y(l,s.f.EventType.MESSAGE,(function(t){var e;if(!v){var n=t.data[0];m(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){f("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=_e[t];if(void 0!==e)return Oe(e)}(o),a=i.message;void 0===s&&(s=u.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),v=!0,g.Vi(new c(s,a)),l.close()}else f("Connection","WebChannel received:",n),g.Si(n)}})),y(o,s.b.STAT_EVENT,(function(t){t.stat===s.e.PROXY?f("Connection","Detected buffering proxy"):t.stat===s.e.NOPROXY&&f("Connection","Detected no buffering proxy")})),setTimeout((function(){g.Pi()}),0),g},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);f("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return f("RestConnection","Received: ",t),t}),(function(e){throw p("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.8.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=so[t];return this.Di+"/v1/"+e+":"+n},t}());function co(){return"undefined"!=typeof window?window:null}function ho(){return"undefined"!=typeof document?document:null}function lo(t){return new en(t,!0)}var fo=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&f("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),po=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new fo(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(r.a)(this,void 0,void 0,(function(){return Object(r.c)(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(r.a)(this,void 0,void 0,(function(){return Object(r.c)(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(r.a)(this,void 0,void 0,(function(){return Object(r.c)(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===u.RESOURCE_EXHAUSTED?(d(e.toString()),d("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===u.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new c(u.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return Object(r.a)(t,void 0,void 0,(function(){return Object(r.c)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return f("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(f("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),vo=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(r.b)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:g()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(m(void 0===e||"string"==typeof e),N.fromBase64String(e||"")):(m(void 0===e||e instanceof Uint8Array),N.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?u.UNKNOWN:Oe(t.code);return new c(e,t.message||"")}(a);n=new qe(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=hn(t,r.document.name),o=sn(r.document.updateTime);var a=new st({mapValue:{fields:r.document.fields}}),h=(s=ut.newFoundDocument(i,o,a),r.targetIds||[]),l=r.removedTargetIds||[];n=new Xe(h,l,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=hn(t,r.document),o=r.readTime?sn(r.readTime):S.min(),a=ut.newNoDocument(i,o),s=r.removedTargetIds||[],n=new Xe([],s,a.key,a);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=hn(t,r.document),o=r.removedTargetIds||[],n=new Xe([],o,i,null);else{if(!("filter"in e))return g();e.filter;var f=e.filter;f.targetId,r=f.count||0,i=new ke(r),o=f.targetId,n=new He(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return S.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?S.min():e.readTime?sn(e.readTime):S.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=dn(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=dt(r)?{documents:bn(t,r)}:{query:wn(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=rn(t,e.resumeToken):e.snapshotVersion.compareTo(S.min())>0&&(n.readTime=nn(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return g()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=dn(this.R),e.removeTarget=t,this.cr(e)},e}(po),go=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(r.b)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(m(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(m(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?sn(t.updateTime):sn(e);return n.isEqual(S.min())&&(n=sn(e)),new ue(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=sn(t.commitTime);return this.listener.Tr(n,e)}return m(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=dn(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return mn(e.R,t)}))};this.cr(n)},e}(po),mo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(r.b)(e,t),e.prototype.br=function(){if(this.Rr)throw new c(u.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===u.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new c(u.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===u.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new c(u.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),yo=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(d(e),this.Vr=!1):f("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),bo=function(t,e,n,i,o){var s=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=o,this.Lr.di((function(t){n.enqueueAndForget((function(){return Object(r.a)(s,void 0,void 0,(function(){return Object(r.c)(this,(function(t){switch(t.label){case 0:return Oo(this)?(f("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(r.a)(this,void 0,void 0,(function(){var e;return Object(r.c)(this,(function(n){switch(n.label){case 0:return(e=y(t)).Or.add(4),[4,xo(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,wo(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new yo(n,i)};function wo(t){return Object(r.a)(this,void 0,void 0,(function(){var e,n;return Object(r.c)(this,(function(r){switch(r.label){case 0:if(!Oo(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function xo(t){return Object(r.a)(this,void 0,void 0,(function(){var e,n;return Object(r.c)(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function _o(t,e){var n=y(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Ao(n)?ko(n):Go(n).er()&&Eo(n,e))}function To(t,e){var n=y(t),r=Go(n);n.$r.delete(e),r.er()&&So(n,e),0===n.$r.size&&(r.er()?r.ir():Oo(n)&&n.Br.set("Unknown"))}function Eo(t,e){t.qr.U(e.targetId),Go(t).mr(e)}function So(t,e){t.qr.U(e),Go(t).yr(e)}function ko(t){t.qr=new $e({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Go(t).start(),t.Br.Sr()}function Ao(t){return Oo(t)&&!Go(t).tr()&&t.$r.size>0}function Oo(t){return 0===y(t).Or.size}function Co(t){t.qr=void 0}function Po(t){return Object(r.a)(this,void 0,void 0,(function(){return Object(r.c)(this,(function(e){return t.$r.forEach((function(e,n){Eo(t,e)})),[2]}))}))}function Io(t,e){return Object(r.a)(this,void 0,void 0,(function(){return Object(r.c)(this,(function(n){return Co(t),Ao(t)?(t.Br.Nr(e),ko(t)):t.Br.set("Unknown"),[2]}))}))}function Ro(t,e,n){return Object(r.a)(this,void 0,void 0,(function(){var i,o,s;return Object(r.c)(this,(function(a){switch(a.label){case 0:if(t.Br.set("Online"),!(e instanceof qe&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return Object(r.a)(this,void 0,void 0,(function(){var n,i,o,s;return Object(r.c)(this,(function(r){switch(r.label){case 0:n=e.cause,i=0,o=e.targetIds,r.label=1;case 1:return i<o.length?(s=o[i],t.$r.has(s)?[4,t.remoteSyncer.rejectListen(s,n)]:[3,3]):[3,5];case 2:r.sent(),t.$r.delete(s),t.qr.removeTarget(s),r.label=3;case 3:r.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return i=a.sent(),f("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),[4,Mo(t,i)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Xe?t.qr.X(e):e instanceof He?t.qr.rt(e):t.qr.et(e),n.isEqual(S.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,Si(t.localStore)];case 8:return o=a.sent(),n.compareTo(o)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(N.EMPTY_BYTE_STRING,n.snapshotVersion)),So(t,e);var r=new mr(n.target,e,1,n.sequenceNumber);Eo(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return f("RemoteStore","Failed to raise snapshot:",s=a.sent()),[4,Mo(t,s)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function Mo(t,e,n){return Object(r.a)(this,void 0,void 0,(function(){var i=this;return Object(r.c)(this,(function(o){switch(o.label){case 0:if(!ur(e))throw e;return t.Or.add(1),[4,xo(t)];case 1:return o.sent(),t.Br.set("Offline"),n||(n=function(){return Si(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return Object(r.a)(i,void 0,void 0,(function(){return Object(r.c)(this,(function(e){switch(e.label){case 0:return f("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,wo(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function No(t,e){return e().catch((function(n){return Mo(t,n,e)}))}function Lo(t){return Object(r.a)(this,void 0,void 0,(function(){var e,n,i,o,s;return Object(r.c)(this,(function(r){switch(r.label){case 0:e=y(t),n=Yo(e),i=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,r.label=1;case 1:if(!function(t){return Oo(t)&&t.kr.length<10}(e))return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,Oi(e.localStore,i)];case 3:return null===(o=r.sent())?(0===e.kr.length&&n.ir(),[3,7]):(i=o.batchId,function(t,e){t.kr.push(e);var n=Yo(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,o),[3,6]);case 4:return s=r.sent(),[4,Mo(e,s)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return Do(e)&&Fo(e),[2]}}))}))}function Do(t){return Oo(t)&&!Yo(t).tr()&&t.kr.length>0}function Fo(t){Yo(t).start()}function jo(t){return Object(r.a)(this,void 0,void 0,(function(){return Object(r.c)(this,(function(e){return Yo(t).Ar(),[2]}))}))}function Bo(t){return Object(r.a)(this,void 0,void 0,(function(){var e,n,i,o;return Object(r.c)(this,(function(r){for(e=Yo(t),n=0,i=t.kr;n<i.length;n++)o=i[n],e.Er(o.mutations);return[2]}))}))}function Uo(t,e,n){return Object(r.a)(this,void 0,void 0,(function(){var i,o;return Object(r.c)(this,(function(r){switch(r.label){case 0:return i=t.kr.shift(),o=gr.from(i,e,n),[4,No(t,(function(){return t.remoteSyncer.applySuccessfulWrite(o)}))];case 1:return r.sent(),[4,Lo(t)];case 2:return r.sent(),[2]}}))}))}function Vo(t,e){return Object(r.a)(this,void 0,void 0,(function(){return Object(r.c)(this,(function(n){switch(n.label){case 0:return e&&Yo(t).pr?[4,function(t,e){return Object(r.a)(this,void 0,void 0,(function(){var n,i;return Object(r.c)(this,(function(r){switch(r.label){case 0:return Ae(i=e.code)&&i!==u.ABORTED?(n=t.kr.shift(),Yo(t).sr(),[4,No(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return r.sent(),[4,Lo(t)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Do(t)&&Fo(t),[2]}}))}))}function zo(t,e){return Object(r.a)(this,void 0,void 0,(function(){var n;return Object(r.c)(this,(function(r){switch(r.label){case 0:return n=y(t),e?(n.Or.delete(2),[4,wo(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,xo(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Go(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=y(t);return r.br(),new vo(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Po.bind(null,t),Ri:Io.bind(null,t),_r:Ro.bind(null,t)}),t.Mr.push((function(n){return Object(r.a)(e,void 0,void 0,(function(){return Object(r.c)(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Ao(t)?ko(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Co(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function Yo(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=y(t);return r.br(),new go(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:jo.bind(null,t),Ri:Vo.bind(null,t),Ir:Bo.bind(null,t),Tr:Uo.bind(null,t)}),t.Mr.push((function(n){return Object(r.a)(e,void 0,void 0,(function(){return Object(r.c)(this,(function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,Lo(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.kr.length>0&&(f("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr}var Wo=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new nr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new c(u.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Xo(t,e){if(d("AsyncQueue",e+": "+t),ur(t))return new c(u.UNAVAILABLE,e+": "+t);throw t}var Ho=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||W.comparator(e.key,n.key)}:function(t,e){return W.comparator(t.key,e.key)},this.keyedMap=Fe(),this.sortedSet=new Ce(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),qo=function(){function t(){this.Qr=new Ce(W.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):g():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),Ko=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Ho.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ut(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),$o=function(){this.Wr=void 0,this.listeners=[]},Jo=function(){this.queries=new ri((function(t){return Vt(t)}),Ut),this.onlineState="Unknown",this.Gr=new Set};function Qo(t,e){return Object(r.a)(this,void 0,void 0,(function(){var n,i,o,s,a,u,c;return Object(r.c)(this,(function(r){switch(r.label){case 0:if(n=y(t),i=e.query,o=!1,(s=n.queries.get(i))||(o=!0,s=new $o),!o)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),a=s,[4,n.onListen(i)];case 2:return a.Wr=r.sent(),[3,4];case 3:return u=r.sent(),c=Xo(u,"Initialization of query '"+zt(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(i,s),s.listeners.push(e),e.zr(n.onlineState),s.Wr&&e.Hr(s.Wr)&&ns(n),[2]}}))}))}function Zo(t,e){return Object(r.a)(this,void 0,void 0,(function(){var n,i,o,s,a;return Object(r.c)(this,(function(r){return n=y(t),i=e.query,o=!1,(s=n.queries.get(i))&&(a=s.listeners.indexOf(e))>=0&&(s.listeners.splice(a,1),o=0===s.listeners.length),o?[2,(n.queries.delete(i),n.onUnlisten(i))]:[2]}))}))}function ts(t,e){for(var n=y(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hr(s)&&(r=!0);u.Wr=s}}r&&ns(n)}function es(t,e,n){var r=y(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function ns(t){t.Gr.forEach((function(t){t.next()}))}var rs=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Ko(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Ko.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),is=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),os=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return hn(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?gn(this.R,t.document,!1):ut.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return sn(t)},t}(),ss=function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=as(t)}return t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new os(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],h=(e.get(c)||Ve()).add(s);e.set(c,h)}}return e},t.prototype.complete=function(){return Object(r.a)(this,void 0,void 0,(function(){var t,e,n,i,o;return Object(r.c)(this,(function(r){switch(r.label){case 0:return[4,Li(this.localStore,new os(this.R),this.documents,this.ro.id)];case 1:t=r.sent(),e=this.co(this.documents),n=0,i=this.queries,r.label=2;case 2:return n<i.length?(o=i[n],[4,Di(this.localStore,o,e.get(o.name))]):[3,5];case 3:r.sent(),r.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new mi(Object.assign({},this.progress),t))]}}))}))},t}();function as(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var us=function(t){this.key=t},cs=function(t){this.key=t},hs=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Ve(),this.mutatedKeys=Ve(),this.lo=Yt(t),this.fo=new Ho(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new qo,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Rt(this.query)&&i.size===this.query.limit?i.last():null,c=Mt(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var h=i.get(t),l=Gt(n.query,e)?e:null,f=!!h&&n.mutatedKeys.has(h.key),d=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),p=!1;h&&l?h.data.isEqual(l.data)?f!==d&&(r.track({type:3,doc:l}),p=!0):n.yo(h,l)||(r.track({type:2,doc:l}),p=!0,(u&&n.lo(l,u)>0||c&&n.lo(l,c)<0)&&(a=!0)):!h&&l?(r.track({type:0,doc:l}),p=!0):h&&!l&&(r.track({type:1,doc:h}),p=!0,(u||c)&&(a=!0)),p&&(l?(s=s.add(l),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Rt(this.query)||Mt(this.query))for(;s.size>this.query.limit;){var h=Rt(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return g()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new Ko(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new qo,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Ve(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new cs(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new us(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Ve();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Ko.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),ls=function(t,e,n){this.query=t,this.targetId=e,this.view=n},fs=function(t){this.key=t,this.bo=!1},ds=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new ri((function(t){return Vt(t)}),Ut),this.Vo=new Map,this.So=new Set,this.Do=new Ce(W.comparator),this.Co=new Map,this.No=new ji,this.xo={},this.Fo=new Map,this.ko=Wr.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function ps(t,e){return Object(r.a)(this,void 0,void 0,(function(){var n,i,o,s,a,u;return Object(r.c)(this,(function(r){switch(r.label){case 0:return n=Gs(t),(s=n.Po.get(e))?(i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),o=s.view.Ro(),[3,4]):[3,1];case 1:return[4,Ci(n.localStore,jt(e))];case 2:return a=r.sent(),u=n.sharedClientState.addLocalQueryTarget(a.targetId),i=a.targetId,[4,vs(n,e,i,"current"===u)];case 3:o=r.sent(),n.isPrimaryClient&&_o(n.remoteStore,a),r.label=4;case 4:return[2,o]}}))}))}function vs(t,e,n,i){return Object(r.a)(this,void 0,void 0,(function(){var o,s,a,u,c,h;return Object(r.c)(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,i){return function(t,e,n,i){return Object(r.a)(this,void 0,void 0,(function(){var o,s,a;return Object(r.c)(this,(function(r){switch(r.label){case 0:return(o=e.view._o(n)).Nn?[4,Ii(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,o)}))]:[3,2];case 1:o=r.sent(),r.label=2;case 2:return s=i&&i.targetChanges.get(e.targetId),a=e.view.applyChanges(o,t.isPrimaryClient,s),[2,(Os(t,e.targetId,a.To),a.snapshot)]}}))}))}(t,e,n,i)},[4,Ii(t.localStore,e,!0)];case 1:return o=l.sent(),s=new hs(e,o.Bn),a=s._o(o.documents),u=We.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState),c=s.applyChanges(a,t.isPrimaryClient,u),Os(t,n,c.To),h=new ls(e,n,s),[2,(t.Po.set(e,h),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),c.snapshot)]}}))}))}function gs(t,e){return Object(r.a)(this,void 0,void 0,(function(){var n,i,o;return Object(r.c)(this,(function(r){switch(r.label){case 0:return n=y(t),i=n.Po.get(e),(o=n.Vo.get(i.targetId)).length>1?[2,(n.Vo.set(i.targetId,o.filter((function(t){return!Ut(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)?[3,2]:[4,Pi(n.localStore,i.targetId,!1).then((function(){n.sharedClientState.clearQueryState(i.targetId),To(n.remoteStore,i.targetId),ks(n,i.targetId)})).catch($r)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return ks(n,i.targetId),[4,Pi(n.localStore,i.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))}function ms(t,e,n){return Object(r.a)(this,void 0,void 0,(function(){var i,o,s,a;return Object(r.c)(this,(function(r){switch(r.label){case 0:i=Ys(t),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,function(t,e){var n,r=y(t),i=E.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Ve());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],h=pe(c,n.get(c.key));null!=h&&s.push(new ye(c.key,h,at(h.value.mapValue),ce.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(i.localStore,e)];case 2:return o=r.sent(),i.sharedClientState.addPendingMutation(o.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Ce(x)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(i,o.batchId,n),[4,Is(i,o.changes)];case 3:return r.sent(),[4,Lo(i.remoteStore)];case 4:return r.sent(),[3,6];case 5:return s=r.sent(),a=Xo(s,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function ys(t,e){return Object(r.a)(this,void 0,void 0,(function(){var n,i;return Object(r.c)(this,(function(r){switch(r.label){case 0:n=y(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,ki(n.localStore,e)];case 2:return i=r.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(m(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?m(r.bo):t.removedDocuments.size>0&&(m(r.bo),r.bo=!1))})),[4,Is(n,i,e)];case 3:return r.sent(),[3,6];case 4:return[4,$r(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function bs(t,e,n){var r=y(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=y(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&ns(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ws(t,e,n){return Object(r.a)(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Object(r.c)(this,(function(r){switch(r.label){case 0:return(i=y(t)).sharedClientState.updateQueryState(e,"rejected",n),o=i.Co.get(e),(s=o&&o.key)?(a=(a=new Ce(W.comparator)).insert(s,ut.newNoDocument(s,S.min())),u=Ve().add(s),c=new Ye(S.min(),new Map,new Re(x),a,u),[4,ys(i,c)]):[3,2];case 1:return r.sent(),i.Do=i.Do.remove(s),i.Co.delete(e),Ps(i),[3,4];case 2:return[4,Pi(i.localStore,e,!1).then((function(){return ks(i,e,n)})).catch($r)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))}function xs(t,e){return Object(r.a)(this,void 0,void 0,(function(){var n,i,o;return Object(r.c)(this,(function(r){switch(r.label){case 0:n=y(t),i=e.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,Ei(n.localStore,e)];case 2:return o=r.sent(),Ss(n,i,null),Es(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),[4,Is(n,o)];case 3:return r.sent(),[3,6];case 4:return[4,$r(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function _s(t,e,n){return Object(r.a)(this,void 0,void 0,(function(){var i,o;return Object(r.c)(this,(function(r){switch(r.label){case 0:i=y(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,function(t,e){var n=y(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return m(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(i.localStore,e)];case 2:return o=r.sent(),Ss(i,e,n),Es(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),[4,Is(i,o)];case 3:return r.sent(),[3,6];case 4:return[4,$r(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Ts(t,e){return Object(r.a)(this,void 0,void 0,(function(){var n,i,o,s,a;return Object(r.c)(this,(function(r){switch(r.label){case 0:Oo((n=y(t)).remoteStore)||f("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,function(t){var e=y(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(i=r.sent())?[2,void e.resolve()]:((o=n.Fo.get(i)||[]).push(e),n.Fo.set(i,o),[3,4]);case 3:return s=r.sent(),a=Xo(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function Es(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function Ss(t,e,n){var r=y(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function ks(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||As(t,e)}))}function As(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(To(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Ps(t))}function Os(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof us?(t.No.addReference(o.key,e),Cs(t,o)):o instanceof cs?(f("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||As(t,o.key)):g()}}function Cs(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(f("SyncEngine","New document in limbo: "+n),t.So.add(r),Ps(t))}function Ps(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new W(P.fromString(e)),r=t.ko.next();t.Co.set(r,new fs(n)),t.Do=t.Do.insert(n,r),_o(t.remoteStore,new mr(jt(It(n.path)),r,2,a.o))}}function Is(t,e,n){return Object(r.a)(this,void 0,void 0,(function(){var i,o,s,a;return Object(r.c)(this,(function(u){switch(u.label){case 0:return i=y(t),o=[],s=[],a=[],i.Po.isEmpty()?[3,3]:(i.Po.forEach((function(t,r){a.push(i.Oo(r,e,n).then((function(t){if(t){i.isPrimaryClient&&i.sharedClientState.updateQueryState(r.targetId,t.fromCache?"not-current":"current"),o.push(t);var e=bi.Pn(r.targetId,t);s.push(e)}})))})),[4,Promise.all(a)]);case 1:return u.sent(),i.vo._r(o),[4,function(t,e){return Object(r.a)(this,void 0,void 0,(function(){var n,i,o,s,a,u,c,h,l;return Object(r.c)(this,(function(r){switch(r.label){case 0:n=y(t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return rr.forEach(e,(function(e){return rr.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return rr.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return r.sent(),[3,4];case 3:if(!ur(i=r.sent()))throw i;return f("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(o=0,s=e;o<s.length;o++)a=s[o],u=a.targetId,a.fromCache||(c=n.Fn.get(u),h=c.snapshotVersion,l=c.withLastLimboFreeSnapshotVersion(h),n.Fn=n.Fn.insert(u,l));return[2]}}))}))}(i.localStore,s)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function Rs(t,e){return Object(r.a)(this,void 0,void 0,(function(){var n,i;return Object(r.c)(this,(function(r){switch(r.label){case 0:return(n=y(t)).currentUser.isEqual(e)?[3,3]:(f("SyncEngine","User change. New user:",e.toKey()),[4,Ti(n.localStore,e)]);case 1:return i=r.sent(),n.currentUser=e,function(t,e){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new c(u.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),[4,Is(n,i.Ln)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}function Ms(t,e){var n=y(t),r=n.Co.get(e);if(r&&r.bo)return Ve().add(r.key);var i=Ve(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Ns(t,e){return Object(r.a)(this,void 0,void 0,(function(){var n,i,o;return Object(r.c)(this,(function(r){switch(r.label){case 0:return[4,Ii((n=y(t)).localStore,e.query,!0)];case 1:return i=r.sent(),o=e.view.Ao(i),[2,(n.isPrimaryClient&&Os(n,e.targetId,o.To),o)]}}))}))}function Ls(t){return Object(r.a)(this,void 0,void 0,(function(){var e;return Object(r.c)(this,(function(n){return[2,Mi((e=y(t)).localStore).then((function(t){return Is(e,t)}))]}))}))}function Ds(t,e,n,i){return Object(r.a)(this,void 0,void 0,(function(){var o,s;return Object(r.c)(this,(function(r){switch(r.label){case 0:return[4,function(t,e){var n=y(t),r=y(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):rr.resolve(null)}))}))}((o=y(t)).localStore,e)];case 1:return null===(s=r.sent())?[3,6]:"pending"!==n?[3,3]:[4,Lo(o.remoteStore)];case 2:return r.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Ss(o,e,i||null),Es(o,e),function(t,e){y(y(t)._n).Gt(e)}(o.localStore,e)):g(),r.label=4;case 4:return[4,Is(o,s)];case 5:return r.sent(),[3,7];case 6:f("SyncEngine","Cannot apply mutation batch with id: "+e),r.label=7;case 7:return[2]}}))}))}function Fs(t,e){return Object(r.a)(this,void 0,void 0,(function(){var n,i,o,s,a,u,c,h;return Object(r.c)(this,(function(r){switch(r.label){case 0:return Gs(n=y(t)),Ys(n),!0!==e||!0===n.$o?[3,3]:(i=n.sharedClientState.getAllActiveQueryTargets(),[4,js(n,i.toArray())]);case 1:return o=r.sent(),n.$o=!0,[4,zo(n.remoteStore,!0)];case 2:for(r.sent(),s=0,a=o;s<a.length;s++)u=a[s],_o(n.remoteStore,u);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(c=[],h=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?c.push(e):h=h.then((function(){return ks(n,e),Pi(n.localStore,e,!0)})),To(n.remoteStore,e)})),[4,h]);case 4:return r.sent(),[4,js(n,c)];case 5:return r.sent(),function(t){var e=y(t);e.Co.forEach((function(t,n){To(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new Ce(W.comparator)}(n),n.$o=!1,[4,zo(n.remoteStore,!1)];case 6:r.sent(),r.label=7;case 7:return[2]}}))}))}function js(t,e,n){return Object(r.a)(this,void 0,void 0,(function(){var n,i,o,s,a,u,c,h,l,f,d,p,v,g;return Object(r.c)(this,(function(r){switch(r.label){case 0:n=y(t),i=[],o=[],s=0,a=e,r.label=1;case 1:return s<a.length?(u=a[s],c=void 0,(h=n.Vo.get(u))&&0!==h.length?[4,Ci(n.localStore,jt(h[0]))]:[3,7]):[3,13];case 2:c=r.sent(),l=0,f=h,r.label=3;case 3:return l<f.length?(d=f[l],p=n.Po.get(d),[4,Ns(n,p)]):[3,6];case 4:(v=r.sent()).snapshot&&o.push(v.snapshot),r.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Ri(n.localStore,u)];case 8:return g=r.sent(),[4,Ci(n.localStore,g)];case 9:return c=r.sent(),[4,vs(n,Bs(g),u,!1)];case 10:r.sent(),r.label=11;case 11:i.push(c),r.label=12;case 12:return s++,[3,1];case 13:return[2,(n.vo._r(o),i)]}}))}))}function Bs(t){return Pt(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Us(t){var e=y(t);return y(y(e.localStore).persistence).fn()}function Vs(t,e,n,i){return Object(r.a)(this,void 0,void 0,(function(){var o,s,a;return Object(r.c)(this,(function(r){switch(r.label){case 0:return(o=y(t)).$o?(f("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Mi(o.localStore)];case 3:return s=r.sent(),a=Ye.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Is(o,s,a)];case 4:return r.sent(),[3,8];case 5:return[4,Pi(o.localStore,e,!0)];case 6:return r.sent(),ks(o,e,i),[3,8];case 7:g(),r.label=8;case 8:return[2]}}))}))}function zs(t,e,n){return Object(r.a)(this,void 0,void 0,(function(){var i,o,s,a,u,c,h,l,d,p;return Object(r.c)(this,(function(v){switch(v.label){case 0:if(!(i=Gs(t)).$o)return[3,10];o=0,s=e,v.label=1;case 1:return o<s.length?(a=s[o],i.Vo.has(a)?(f("SyncEngine","Adding an already active target "+a),[3,5]):[4,Ri(i.localStore,a)]):[3,6];case 2:return u=v.sent(),[4,Ci(i.localStore,u)];case 3:return c=v.sent(),[4,vs(i,Bs(u),c.targetId,!1)];case 4:v.sent(),_o(i.remoteStore,c),v.label=5;case 5:return o++,[3,1];case 6:h=function(t){return Object(r.c)(this,(function(e){switch(e.label){case 0:return i.Vo.has(t)?[4,Pi(i.localStore,t,!1).then((function(){To(i.remoteStore,t),ks(i,t)})).catch($r)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,d=n,v.label=7;case 7:return l<d.length?(p=d[l],[5,h(p)]):[3,10];case 8:v.sent(),v.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function Gs(t){var e=y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=ys.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ms.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ws.bind(null,e),e.vo._r=ts.bind(null,e.eventManager),e.vo.Mo=es.bind(null,e.eventManager),e}function Ys(t){var e=y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xs.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_s.bind(null,e),e}function Ws(t,e,n){var i=y(t);(function(t,e,n){return Object(r.a)(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Object(r.c)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return i=r.sent(),[4,function(t,e){var n=y(t),r=sn(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return n.Ke.getBundleMetadata(t,e.id)})).then((function(t){return!!t&&t.createTime.compareTo(r)>=0}))}(t.localStore,i)];case 2:return r.sent()?[4,e.close()]:[3,4];case 3:return[2,(r.sent(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(i)))];case 4:return n._updateProgress(as(i)),o=new ss(i,t.localStore,e.R),[4,e.Lo()];case 5:s=r.sent(),r.label=6;case 6:return s?[4,o.oo(s)]:[3,10];case 7:return(a=r.sent())&&n._updateProgress(a),[4,e.Lo()];case 8:s=r.sent(),r.label=9;case 9:return[3,6];case 10:return[4,o.complete()];case 11:return u=r.sent(),[4,Is(t,u.wn,void 0)];case 12:return r.sent(),[4,function(t,e){var n=y(t);return n.persistence.runTransaction("Save bundle","readwrite",(function(t){return n.Ke.saveBundleMetadata(t,e)}))}(t.localStore,i)];case 13:return r.sent(),n._completeWith(u.progress),[3,15];case 14:return p("SyncEngine","Loading bundle failed with "+(c=r.sent())),n._failWith(c),[3,15];case 15:return[2]}}))}))})(i,e,n).then((function(){i.sharedClientState.notifyBundleLoaded()}))}var Xs=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(r.a)(this,void 0,void 0,(function(){return Object(r.c)(this,(function(e){switch(e.label){case 0:return this.R=lo(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return _i(this.persistence,new wi,t.initialUser,this.R)},t.prototype.qo=function(t){return new Yi(Xi.bs,this.R)},t.prototype.Bo=function(t){return new ro},t.prototype.terminate=function(){return Object(r.a)(this,void 0,void 0,(function(){return Object(r.c)(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),Hs=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(r.b)(e,t),e.prototype.initialize=function(e){return Object(r.a)(this,void 0,void 0,(function(){return Object(r.c)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Ni(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,Ys(this.Qo.syncEngine)];case 4:return n.sent(),[4,Lo(this.Qo.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ko=function(t){return _i(this.persistence,new wi,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new Zr(e,t.asyncQueue)},e.prototype.qo=function(t){var e=gi(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Fr.withCacheSize(this.cacheSizeBytes):Fr.DEFAULT;return new di(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,co(),ho(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new ro},e}(Xs),qs=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(r.b)(e,t),e.prototype.initialize=function(e){return Object(r.a)(this,void 0,void 0,(function(){var n,i=this;return Object(r.c)(this,(function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return o.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof no?(this.sharedClientState.syncEngine={ui:Ds.bind(null,n),ai:Vs.bind(null,n),hi:zs.bind(null,n),fn:Us.bind(null,n),ci:Ls.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.He((function(t){return Object(r.a)(i,void 0,void 0,(function(){return Object(r.c)(this,(function(e){switch(e.label){case 0:return[4,Fs(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return o.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=co();if(!no.yt(e))throw new c(u.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=gi(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new no(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Hs),Ks=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(r.a)(this,void 0,void 0,(function(){var n=this;return Object(r.c)(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return bs(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Rs.bind(null,this.syncEngine),[4,zo(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new Jo},t.prototype.createDatastore=function(t){var e,n=lo(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new uo(e));return function(t,e,n){return new mo(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return bs(s.syncEngine,t,0)},o=oo.yt()?new oo:new io,new bo(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new ds(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(r.a)(this,void 0,void 0,(function(){var e;return Object(r.c)(this,(function(n){switch(n.label){case 0:return e=y(t),f("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,xo(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();function $s(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return Object(r.a)(this,void 0,void 0,(function(){var i;return Object(r.c)(this,(function(r){return n<t.byteLength?(i={value:t.slice(n,n+e),done:!1},[2,(n+=e,i)]):[2,{done:!0}]}))}))},cancel:function(){return Object(r.a)(this,void 0,void 0,(function(){return Object(r.c)(this,(function(t){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Js=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Qs=function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new nr,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}return t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(r.a)(this,void 0,void 0,(function(){return Object(r.c)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return Object(r.a)(this,void 0,void 0,(function(){return Object(r.c)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return Object(r.a)(this,void 0,void 0,(function(){var t,e,n,i;return Object(r.c)(this,(function(r){switch(r.label){case 0:return[4,this.Jo()];case 1:return null===(t=r.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return i=r.sent(),[2,new is(JSON.parse(i),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return Object(r.a)(this,void 0,void 0,(function(){var t,e;return Object(r.c)(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return Object(r.a)(this,void 0,void 0,(function(){var e;return Object(r.c)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(r.a)(this,void 0,void 0,(function(){var t,e;return Object(r.c)(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},t}(),Zs=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(r.a)(this,void 0,void 0,(function(){var e,n=this;return Object(r.c)(this,(function(i){switch(i.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new c(u.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(r.a)(this,void 0,void 0,(function(){var n,i,o,s,a,u;return Object(r.c)(this,(function(r){switch(r.label){case 0:return n=y(t),i=dn(n.R)+"/documents",o={documents:e.map((function(t){return cn(n.R,t)}))},[4,n.$i("BatchGetDocuments",i,o)];case 1:return s=r.sent(),a=new Map,s.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){m(!!e.found),e.found.name,e.found.updateTime;var n=hn(t,e.found.name),r=sn(e.found.updateTime),i=new st({mapValue:{fields:e.found.fields}});return ut.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){m(!!e.missing),m(!!e.readTime);var n=hn(t,e.missing),r=sn(e.readTime);return ut.newNoDocument(n,r)}(t,e):g()}(n.R,t);a.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=a.get(t.toString());m(!!e),u.push(e)})),u)]}}))}))}(this.datastore,t)];case 1:return[2,((e=i.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Ee(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(r.a)(this,void 0,void 0,(function(){var t,e=this;return Object(r.c)(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=W.fromPath(n);e.mutations.push(new Se(r,e.precondition(r)))})),[4,function(t,e){return Object(r.a)(this,void 0,void 0,(function(){var n,i,o;return Object(r.c)(this,(function(r){switch(r.label){case 0:return n=y(t),i=dn(n.R)+"/documents",o={writes:e.map((function(t){return mn(n.R,t)}))},[4,n.Ni("Commit",i,o)];case 1:return r.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw g();e=S.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new c(u.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?ce.updateTime(e):ce.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(S.min()))throw new c(u.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ce.updateTime(e)}return ce.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),ta=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new fo(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return Object(r.a)(t,void 0,void 0,(function(){var t,e,n=this;return Object(r.c)(this,(function(r){return t=new Zs(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!z(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Ae(e)}return!1},t}(),ea=function(){function t(t,e,n){var i=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Hi.UNAUTHENTICATED,this.clientId=w.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return Object(r.a)(i,void 0,void 0,(function(){return Object(r.c)(this,(function(e){switch(e.label){case 0:return f("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return Object(r.a)(this,void 0,void 0,(function(){return Object(r.c)(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new c(u.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new nr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Object(r.a)(t,void 0,void 0,(function(){var t,n;return Object(r.c)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Xo(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function na(t,e){return Object(r.a)(this,void 0,void 0,(function(){var n,i,o=this;return Object(r.c)(this,(function(s){switch(s.label){case 0:return t.asyncQueue.verifyOperationInProgress(),f("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=s.sent(),[4,e.initialize(n)];case 2:return s.sent(),i=n.initialUser,t.setCredentialChangeListener((function(t){return Object(r.a)(o,void 0,void 0,(function(){return Object(r.c)(this,(function(n){switch(n.label){case 0:return i.isEqual(t)?[3,2]:[4,Ti(e.localStore,t)];case 1:n.sent(),i=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function ra(t,e){return Object(r.a)(this,void 0,void 0,(function(){var n,i;return Object(r.c)(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,ia(t)];case 1:return n=o.sent(),f("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return i=o.sent(),[4,e.initialize(n,i)];case 3:return o.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return Object(r.a)(this,void 0,void 0,(function(){var n,i;return Object(r.c)(this,(function(r){switch(r.label){case 0:return(n=y(t)).asyncQueue.verifyOperationInProgress(),f("RemoteStore","RemoteStore received new credentials"),i=Oo(n),n.Or.add(3),[4,xo(n)];case 1:return r.sent(),i&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return r.sent(),n.Or.delete(3),[4,wo(n)];case 3:return r.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function ia(t){return Object(r.a)(this,void 0,void 0,(function(){return Object(r.c)(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(f("FirestoreClient","Using default OfflineComponentProvider"),[4,na(t,new Xs)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function oa(t){return Object(r.a)(this,void 0,void 0,(function(){return Object(r.c)(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(f("FirestoreClient","Using default OnlineComponentProvider"),[4,ra(t,new Ks)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function sa(t){return ia(t).then((function(t){return t.persistence}))}function aa(t){return ia(t).then((function(t){return t.localStore}))}function ua(t){return oa(t).then((function(t){return t.remoteStore}))}function ca(t){return oa(t).then((function(t){return t.syncEngine}))}function ha(t){return Object(r.a)(this,void 0,void 0,(function(){var e,n;return Object(r.c)(this,(function(r){switch(r.label){case 0:return[4,oa(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=ps.bind(null,e.syncEngine),n.onUnlisten=gs.bind(null,e.syncEngine),n)]}}))}))}function la(t,e,n){var i=this;void 0===n&&(n={});var o=new nr;return t.asyncQueue.enqueueAndForget((function(){return Object(r.a)(i,void 0,void 0,(function(){var i;return Object(r.c)(this,(function(r){switch(r.label){case 0:return i=function(t,e,n,r,i){var o=new Js({next:function(o){e.enqueueAndForget((function(){return Zo(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new c(u.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new c(u.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new rs(It(n.path),o,{includeMetadataChanges:!0,so:!0});return Qo(t,s)},[4,ha(t)];case 1:return[2,i.apply(void 0,[r.sent(),t.asyncQueue,e,n,o])]}}))}))})),o.promise}function fa(t,e,n){var i=this;void 0===n&&(n={});var o=new nr;return t.asyncQueue.enqueueAndForget((function(){return Object(r.a)(i,void 0,void 0,(function(){var i;return Object(r.c)(this,(function(r){switch(r.label){case 0:return i=function(t,e,n,r,i){var o=new Js({next:function(n){e.enqueueAndForget((function(){return Zo(t,s)})),n.fromCache&&"server"===r.source?i.reject(new c(u.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new rs(n,o,{includeMetadataChanges:!0,so:!0});return Qo(t,s)},[4,ha(t)];case 1:return[2,i.apply(void 0,[r.sent(),t.asyncQueue,e,n,o])]}}))}))})),o.promise}var da=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},pa=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),va=new Map,ga=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},ma=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(Hi.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),ya=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),ba=function(){function t(t){var e=this;this.currentUser=Hi.UNAUTHENTICATED,this.oc=new nr,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){f("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(f("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(f("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(m("string"==typeof n.accessToken),new ga(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return Object(r.a)(n,void 0,void 0,(function(){return Object(r.c)(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return m(null===t||"string"==typeof t),new Hi(t)},t}(),wa=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Hi.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),xa=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new wa(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(Hi.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function _a(t,e,n){if(!n)throw new c(u.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Ta(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new c(u.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Ea(t,e,n,r){if(!0===e&&!0===r)throw new c(u.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Sa(t){if(!W.isDocumentKey(t))throw new c(u.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function ka(t){if(W.isDocumentKey(t))throw new c(u.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Aa(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":g()}function Oa(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new c(u.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Aa(t);throw new c(u.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Ca(t,e){if(e<=0)throw new c(u.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Pa=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new c(u.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new c(u.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Ea("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Ia=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pa({}),this._settingsFrozen=!1,t instanceof pa?(this._databaseId=t,this._credentials=new ma):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new c(u.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pa(t.options.projectId)}(t),this._credentials=new ba(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new c(u.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new c(u.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pa(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new ma;switch(t.type){case"gapi":var e=t.client;return m(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new xa(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new c(u.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=va.get(this))&&(f("ComponentProvider","Removing Datastore"),va.delete(this),t.terminate()),Promise.resolve();var t},t}(),Ra=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Na(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Ma=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Na=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,It(r))||this)._path=r,i.type="collection",i}return Object(r.b)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Ra(this.firestore,null,new W(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Ma);function La(t,e){for(var n,o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];if(t=Object(i.getModularInstance)(t),_a("collection","path",e),t instanceof Ia)return ka(n=P.fromString.apply(P,Object(r.d)([e],o))),new Na(t,null,n);if(!(t instanceof Ra||t instanceof Na))throw new c(u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ka(n=P.fromString.apply(P,Object(r.d)([t.path],o)).child(P.fromString(e))),new Na(t.firestore,null,n)}function Da(t,e){for(var n,o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];if(t=Object(i.getModularInstance)(t),1===arguments.length&&(e=w.u()),_a("doc","path",e),t instanceof Ia)return Sa(n=P.fromString.apply(P,Object(r.d)([e],o))),new Ra(t,null,new W(n));if(!(t instanceof Ra||t instanceof Na))throw new c(u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Sa(n=t._path.child(P.fromString.apply(P,Object(r.d)([e],o)))),new Ra(t.firestore,t instanceof Na?t.converter:null,new W(n))}function Fa(t,e){return t=Object(i.getModularInstance)(t),e=Object(i.getModularInstance)(e),(t instanceof Ra||t instanceof Na)&&(e instanceof Ra||e instanceof Na)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function ja(t,e){return t=Object(i.getModularInstance)(t),e=Object(i.getModularInstance)(e),t instanceof Ma&&e instanceof Ma&&t.firestore===e.firestore&&Ut(t._query,e._query)&&t.converter===e.converter}var Ba=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new fo(this,"async_queue_retry"),this.Ic=function(){var e=ho();e&&f("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=ho();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=ho();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new nr;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return Object(r.a)(this,void 0,void 0,(function(){var t,e=this;return Object(r.c)(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!ur(t=n.sent()))throw t;return f("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,d("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=Wo.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&g()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return Object(r.a)(this,void 0,void 0,(function(){var t;return Object(r.c)(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Ua(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Va=function(){function t(){this._progressObserver={},this._taskCompletionResolver=new nr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},t}(),za=-1,Ga=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Ba,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(r.b)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Wa(this),this._firestoreClient.terminate()},e}(Ia);function Ya(t){return t._firestoreClient||Wa(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Wa(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new da(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new ea(t._credentials,t._queue,r)}function Xa(t,e,n){var i=this,o=new nr;return t.asyncQueue.enqueue((function(){return Object(r.a)(i,void 0,void 0,(function(){var i;return Object(r.c)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,na(t,n)];case 1:return r.sent(),[4,ra(t,e)];case 2:return r.sent(),o.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===u.FAILED_PRECONDITION||t.code===u.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(i=r.sent()))throw i;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),o.reject(i),[3,4];case 4:return[2]}}))}))})).then((function(){return o.promise}))}function Ha(t){if(t._initialized||t._terminated)throw new c(u.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var qa=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new c(u.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new R(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Ka=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(N.fromBase64String(e))}catch(e){throw new c(u.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(N.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),$a=function(t){this._methodName=t},Ja=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new c(u.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new c(u.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return x(this._lat,t._lat)||x(this._long,t._long)},t}(),Qa=/^__.*__$/,Za=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new ye(t,this.data,this.fieldMask,e,this.fieldTransforms):new me(t,this.data,e,this.fieldTransforms)},t}(),tu=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new ye(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function eu(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw g()}}var nu=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},t.prototype.Lc=function(t){return _u(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(eu(this.Nc)&&Qa.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),ru=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||lo(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new nu({Nc:t,methodName:e,qc:n,path:R.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function iu(t){var e=t._freezeSettings(),n=lo(t._databaseId);return new ru(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ou(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);yu("Data must be an object, but it was:",s,r);var a,h,l=gu(r,s);if(o.merge)a=new M(s.fieldMask),h=s.fieldTransforms;else if(o.mergeFields){for(var f=[],d=0,p=o.mergeFields;d<p.length;d++){var v=bu(e,p[d],n);if(!s.contains(v))throw new c(u.INVALID_ARGUMENT,"Field '"+v+"' is specified in your field mask but missing from your input data.");Tu(f,v)||f.push(v)}a=new M(f),h=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,h=s.fieldTransforms;return new Za(new st(l),a,h)}var su=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}($a);function au(t,e,n){return new nu({Nc:3,qc:e.settings.qc,methodName:t._methodName,kc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var uu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.prototype._toFieldTransform=function(t){return new ae(t.path,new Zt)},e.prototype.isEqual=function(t){return t instanceof e},e}($a),cu=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(r.b)(e,t),e.prototype._toFieldTransform=function(t){var e=au(this,t,!0),n=this.Kc.map((function(t){return vu(t,e)})),r=new te(n);return new ae(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}($a),hu=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(r.b)(e,t),e.prototype._toFieldTransform=function(t){var e=au(this,t,!0),n=this.Kc.map((function(t){return vu(t,e)})),r=new ne(n);return new ae(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}($a),lu=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return Object(r.b)(e,t),e.prototype._toFieldTransform=function(t){var e=new ie(t.R,qt(t.R,this.Qc));return new ae(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}($a);function fu(t,e,n,r){var o=t.Uc(1,e,n);yu("Data must be an object, but it was:",o,r);var s=[],a=st.empty();A(r,(function(t,r){var u=xu(e,t,n);r=Object(i.getModularInstance)(r);var c=o.Oc(u);if(r instanceof su)s.push(u);else{var h=vu(r,c);null!=h&&(s.push(u),a.set(u,h))}}));var u=new M(s);return new tu(a,u,o.fieldTransforms)}function du(t,e,n,r,o,s){var a=t.Uc(1,e,n),h=[bu(e,r,n)],l=[o];if(s.length%2!=0)throw new c(u.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var f=0;f<s.length;f+=2)h.push(bu(e,s[f])),l.push(s[f+1]);for(var d=[],p=st.empty(),v=h.length-1;v>=0;--v)if(!Tu(d,h[v])){var g=h[v],m=l[v];m=Object(i.getModularInstance)(m);var y=a.Oc(g);if(m instanceof su)d.push(g);else{var b=vu(m,y);null!=b&&(d.push(g),p.set(g,b))}}var w=new M(d);return new tu(p,w,a.fieldTransforms)}function pu(t,e,n,r){return void 0===r&&(r=!1),vu(n,t.Uc(r?4:3,e))}function vu(t,e){if(mu(t=Object(i.getModularInstance)(t)))return yu("Unsupported field value:",e,t),gu(t,e);if(t instanceof $a)return function(t,e){if(!eu(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.kc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=vu(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(i.getModularInstance)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return qt(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=E.fromDate(t);return{timestampValue:nn(e.R,n)}}if(t instanceof E)return n=new E(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:nn(e.R,n)};if(t instanceof Ja)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Ka)return{bytesValue:rn(e.R,t._byteString)};if(t instanceof Ra){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:an(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+Aa(t))}(t,e)}function gu(t,e){var n={};return O(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):A(t,(function(t,r){var i=vu(r,e.Fc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function mu(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof E||t instanceof Ja||t instanceof Ka||t instanceof Ra||t instanceof $a)}function yu(t,e,n){if(!mu(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Aa(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}}function bu(t,e,n){if((e=Object(i.getModularInstance)(e))instanceof qa)return e._internalPath;if("string"==typeof e)return xu(t,e);throw _u("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var wu=new RegExp("[~\\*/\\[\\]]");function xu(t,e,n){if(e.search(wu)>=0)throw _u("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(qa.bind.apply(qa,Object(r.d)([void 0],e.split(".")))))._internalPath}catch(i){throw _u("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function _u(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var h="";return(o||s)&&(h+=" (found",o&&(h+=" in field "+r),s&&(h+=" in document "+i),h+=")"),new c(u.INVALID_ARGUMENT,(a+=". ")+t+h)}function Tu(t,e){return t.some((function(t){return t.isEqual(e)}))}var Eu=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ra(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Su(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(ku("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Su=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Eu);function ku(t,e){return"string"==typeof e?xu(t,e):e instanceof qa?e._internalPath:e._delegate._internalPath}var Au=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Ou=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(r.b)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Cu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(ku("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Eu),Cu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Ou),Pu=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Au(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Cu(n._firestore,n._userDataWriter,r.key,r,new Au(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new c(u.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new Cu(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Au(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Cu(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Au(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Iu(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Iu(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return g()}}function Ru(t,e){return t instanceof Ou&&e instanceof Ou?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Pu&&e instanceof Pu&&t._firestore===e._firestore&&ja(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Mu(t){if(Mt(t)&&0===t.explicitOrderBy.length)throw new c(u.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Nu=function(){};function Lu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Du=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return Object(r.b)(e,t),e.prototype._apply=function(t){var e=iu(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new c(u.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Gu(s,o);for(var h=[],l=0,f=s;l<f.length;l++){var d=f[l];h.push(zu(r,t,d))}a={arrayValue:{values:h}}}else a=zu(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Gu(s,o),a=pu(n,"where",s,"in"===o||"not-in"===o);var p=pt.create(i,o,a);return function(t,e){if(e.g()){var n=Lt(t);if(null!==n&&!n.isEqual(e.field))throw new c(u.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Nt(t);null!==r&&Yu(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new c(u.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new c(u.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,p),p}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new Ma(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Ct(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Nu),Fu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return Object(r.b)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new c(u.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new c(u.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new St(e,n);return function(t,e){if(null===Nt(t)){var n=Lt(t);null!==n&&Yu(t,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new Ma(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Ct(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Nu),ju=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(r.b)(e,t),e.prototype._apply=function(t){return new Ma(t.firestore,t.converter,Bt(t._query,this.Hc,this.Jc))},e}(Nu),Bu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Object(r.b)(e,t),e.prototype._apply=function(t){var e=Vu(t,this.type,this.Yc,this.Xc);return new Ma(t.firestore,t.converter,function(t,e){return new Ct(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Nu),Uu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Object(r.b)(e,t),e.prototype._apply=function(t){var e=Vu(t,this.type,this.Yc,this.Xc);return new Ma(t.firestore,t.converter,function(t,e){return new Ct(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Nu);function Vu(t,e,n,r){if(n[0]=Object(i.getModularInstance)(n[0]),n[0]instanceof Eu)return function(t,e,n,r,i){if(!r)throw new c(u.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Ft(t);s<a.length;s++){var h=a[s];if(h.field.isKeyField())o.push(Z(e,r.key));else{var l=r.data.field(h.field);if(B(l))throw new c(u.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===l){var f=h.field.canonicalString();throw new c(u.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+f+"' (used as the orderBy) does not exist.")}o.push(l)}}return new Tt(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var o=iu(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new c(u.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],h=0;h<i.length;h++){var l=i[h];if(s[h].field.isKeyField()){if("string"!=typeof l)throw new c(u.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof l);if(!Dt(t)&&-1!==l.indexOf("/"))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+l+"' contains a slash.");var f=t.path.child(P.fromString(l));if(!W.isDocumentKey(f))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+f+"' is not because it contains an odd number of segments.");var d=new W(f);a.push(Z(e,d))}else{var p=pu(n,r,l);a.push(p)}}return new Tt(a,o)}(t._query,t.firestore._databaseId,o,e,n,r)}function zu(t,e,n){if("string"==typeof(n=Object(i.getModularInstance)(n))){if(""===n)throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dt(e)&&-1!==n.indexOf("/"))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(P.fromString(n));if(!W.isDocumentKey(r))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Z(t,new W(r))}if(n instanceof Ra)return Z(t,n._key);throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Aa(n)+".")}function Gu(t,e){if(!Array.isArray(t)||0===t.length)throw new c(u.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new c(u.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Yu(t,e,n){if(!n.isEqual(e))throw new c(u.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Wu=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),X(t)){case 0:return null;case 1:return t.booleanValue;case 2:return F(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(j(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw g()}},t.prototype.convertObject=function(t,e){var n=this,r={};return A(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Ja(F(t.latitude),F(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=U(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(V(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=D(t);return new E(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=P.fromString(t);m(Rn(n));var r=new pa(n.get(1),n.get(3)),i=new W(n.popFirst(5));return r.isEqual(e)||d("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Xu(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Hu=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(r.b)(e,t),e.prototype.convertBytes=function(t){return new Ka(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ra(this.firestore,null,e)},e}(Wu),qu=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=iu(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Ku(t,this._firestore),i=Xu(r.converter,e,n),o=ou(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,ce.none())),this},t.prototype.update=function(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];this._verifyNotCommitted();var s,a=Ku(t,this._firestore);return s="string"==typeof(e=Object(i.getModularInstance)(e))||e instanceof qa?du(this._dataReader,"WriteBatch.update",a._key,e,n,r):fu(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(s.toMutation(a._key,ce.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Ku(t,this._firestore);return this._mutations=this._mutations.concat(new Ee(e._key,ce.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new c(u.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Ku(t,e){if((t=Object(i.getModularInstance)(t)).firestore!==e)throw new c(u.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var $u=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(r.b)(e,t),e.prototype.convertBytes=function(t){return new Ka(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ra(this.firestore,null,e)},e}(Wu);function Ju(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];t=Oa(t,Ra);var s=Oa(t.firestore,Ga),a=iu(s);return Zu(s,[("string"==typeof(e=Object(i.getModularInstance)(e))||e instanceof qa?du(a,"updateDoc",t._key,e,n,r):fu(a,"updateDoc",t._key,e)).toMutation(t._key,ce.exists(!0))])}function Qu(t){for(var e,n,o,s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];t=Object(i.getModularInstance)(t);var u={includeMetadataChanges:!1},c=0;"object"!=typeof s[c]||Ua(s[c])||(u=s[c],c++);var h,l,f,d={includeMetadataChanges:u.includeMetadataChanges};if(Ua(s[c])){var p=s[c];s[c]=null===(e=p.next)||void 0===e?void 0:e.bind(p),s[c+1]=null===(n=p.error)||void 0===n?void 0:n.bind(p),s[c+2]=null===(o=p.complete)||void 0===o?void 0:o.bind(p)}if(t instanceof Ra)l=Oa(t.firestore,Ga),f=It(t._key.path),h={next:function(e){s[c]&&s[c](tc(l,t,e))},error:s[c+1],complete:s[c+2]};else{var v=Oa(t,Ma);l=Oa(v.firestore,Ga),f=v._query;var g=new $u(l);h={next:function(t){s[c]&&s[c](new Pu(l,g,v,t))},error:s[c+1],complete:s[c+2]},Mu(t._query)}return function(t,e,n,i){var o=this,s=new Js(i),a=new rs(e,s,n);return t.asyncQueue.enqueueAndForget((function(){return Object(r.a)(o,void 0,void 0,(function(){var e;return Object(r.c)(this,(function(n){switch(n.label){case 0:return e=Qo,[4,ha(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){s.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(r.a)(o,void 0,void 0,(function(){var e;return Object(r.c)(this,(function(n){switch(n.label){case 0:return e=Zo,[4,ha(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(Ya(l),f,d,h)}function Zu(t,e){return function(t,e){var n=this,i=new nr;return t.asyncQueue.enqueueAndForget((function(){return Object(r.a)(n,void 0,void 0,(function(){var n;return Object(r.c)(this,(function(r){switch(r.label){case 0:return n=ms,[4,ca(t)];case 1:return[2,n.apply(void 0,[r.sent(),e,i])]}}))}))})),i.promise}(Ya(t),e)}function tc(t,e,n){var r=n.docs.get(e._key),i=new $u(t);return new Ou(t,i,e._key,r,new Au(n.hasPendingWrites,n.fromCache),e.converter)}var ec=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(r.b)(e,t),e.prototype.get=function(e){var n=this,r=Ku(e,this._firestore),i=new $u(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Ou(n._firestore,i,r._key,t._document,new Au(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=iu(t)}return t.prototype.get=function(t){var e=this,n=Ku(t,this._firestore),r=new Hu(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return g();var i=t[0];if(i.isFoundDocument())return new Eu(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Eu(e._firestore,r,n._key,null,n.converter);throw g()}))},t.prototype.set=function(t,e,n){var r=Ku(t,this._firestore),i=Xu(r.converter,e,n),o=ou(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];var s,a=Ku(t,this._firestore);return s="string"==typeof(e=Object(i.getModularInstance)(e))||e instanceof qa?du(this._dataReader,"Transaction.update",a._key,e,n,r):fu(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,s),this},t.prototype.delete=function(t){var e=Ku(t,this._firestore);return this._transaction.delete(e._key),this},t}());function nc(){if("undefined"==typeof Uint8Array)throw new c(u.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function rc(){if("undefined"==typeof atob)throw new c(u.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ic=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return rc(),new t(Ka.fromBase64String(e))},t.fromUint8Array=function(e){return nc(),new t(Ka.fromUint8Array(e))},t.prototype.toBase64=function(){return rc(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return nc(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),oc=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Ha(t=Oa(t,Ga));var n=Ya(t),r=t._freezeSettings(),i=new Ks;return Xa(n,i,new Hs(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Ha(t=Oa(t,Ga));var e=Ya(t),n=t._freezeSettings(),r=new Ks;return Xa(e,r,new qs(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new c(u.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new nr;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return Object(r.a)(e,void 0,void 0,(function(){var e;return Object(r.c)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(t){return Object(r.a)(this,void 0,void 0,(function(){var e;return Object(r.c)(this,(function(n){switch(n.label){case 0:return or.yt()?(e=t+"main",[4,or.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(gi(t._databaseId,t._persistenceKey))];case 1:return i.sent(),n.resolve(),[3,3];case 2:return e=i.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),sc=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof pa||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||p("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var o=(t=Oa(t,Ia))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&p("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:e+":"+n,ssl:!1})),r.mockUserToken){var s=Object(i.createMockUserToken)(r.mockUserToken),a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new c(u.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new ya(new ga(s,new Hi(a)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(r.a)(e,void 0,void 0,(function(){var e,n;return Object(r.c)(this,(function(r){switch(r.label){case 0:return[4,sa(t)];case 1:return e=r.sent(),[4,ua(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=y(t);return e.Or.delete(0),wo(e)}(n))]}}))}))}))}(Ya(Oa(this._delegate,Ga)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(r.a)(e,void 0,void 0,(function(){var e,n;return Object(r.c)(this,(function(i){switch(i.label){case 0:return[4,sa(t)];case 1:return e=i.sent(),[4,ua(t)];case 2:return n=i.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(r.a)(this,void 0,void 0,(function(){var e;return Object(r.c)(this,(function(n){switch(n.label){case 0:return(e=y(t)).Or.add(0),[4,xo(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Ya(Oa(this._delegate,Ga)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Ea("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new nr;return t.asyncQueue.enqueueAndForget((function(){return Object(r.a)(e,void 0,void 0,(function(){var e;return Object(r.c)(this,(function(r){switch(r.label){case 0:return e=Ts,[4,ca(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Ya(Oa(this._delegate,Ga)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,i=new Js(e);return t.asyncQueue.enqueueAndForget((function(){return Object(r.a)(n,void 0,void 0,(function(){var e;return Object(r.c)(this,(function(n){switch(n.label){case 0:return e=function(t,e){y(t).Gr.add(e),e.next()},[4,ha(t)];case 1:return[2,e.apply(void 0,[n.sent(),i])]}}))}))})),function(){i.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(r.a)(n,void 0,void 0,(function(){var e;return Object(r.c)(this,(function(n){switch(n.label){case 0:return e=function(t,e){y(t).Gr.delete(e)},[4,ha(t)];case 1:return[2,e.apply(void 0,[n.sent(),i])]}}))}))}))}}(Ya(t=Oa(t,Ga)),Ua(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new c(u.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new xc(this,La(this._delegate,t))}catch(t){throw dc(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new fc(this,Da(this._delegate,t))}catch(t){throw dc(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new yc(this,function(t,e){if(t=Oa(t,Ia),_a("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new c(u.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Ma(t,null,function(t){return new Ct(P.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw dc(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,i=new nr;return t.asyncQueue.enqueueAndForget((function(){return Object(r.a)(n,void 0,void 0,(function(){var n;return Object(r.c)(this,(function(r){switch(r.label){case 0:return[4,function(t){return oa(t).then((function(t){return t.datastore}))}(t)];case 1:return n=r.sent(),new ta(t.asyncQueue,n,e,i).run(),[2]}}))}))})),i.promise}(Ya(t),(function(n){return e(new ec(t,n))}))}(this._delegate,(function(n){return t(new cc(e,n))}))},t.prototype.batch=function(){var t=this;return Ya(this._delegate),new hc(new qu(this._delegate,(function(e){return Zu(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new c(u.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new c(u.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),ac=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(r.b)(e,t),e.prototype.convertBytes=function(t){return new ic(new Ka(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return fc.eu(e,this.firestore,null)},e}(Wu);function uc(t){var e;e=t,h.setLogLevel(e)}var cc=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new ac(t)}return t.prototype.get=function(t){var e=this,n=_c(t);return this._delegate.get(n).then((function(t){return new gc(e._firestore,new Ou(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=_c(t);return n?(Ta("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var a=_c(t);return 2===arguments.length?this._delegate.update(a,e):(i=this._delegate).update.apply(i,Object(r.d)([a,e,n],o)),this},t.prototype.delete=function(t){var e=_c(t);return this._delegate.delete(e),this},t}(),hc=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=_c(t);return n?(Ta("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var a=_c(t);return 2===arguments.length?this._delegate.update(a,e):(i=this._delegate).update.apply(i,Object(r.d)([a,e,n],o)),this},t.prototype.delete=function(t){var e=_c(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),lc=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Cu(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new mc(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new ac(e),n),i.set(n,o)),o},t}();lc.su=new WeakMap;var fc=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new ac(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new c(u.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Ra(n._delegate,r,new W(e)))},t.eu=function(e,n,r){return new t(n,new Ra(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new xc(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new xc(this.firestore,La(this._delegate,t))}catch(t){throw dc(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(i.getModularInstance)(t))instanceof Ra&&Fa(this._delegate,t)},t.prototype.set=function(t,e){e=Ta("DocumentReference.set",e);try{return function(t,e,n){t=Oa(t,Ra);var r=Oa(t.firestore,Ga),i=Xu(t.converter,e,n);return Zu(r,[ou(iu(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,ce.none())])}(this._delegate,t,e)}catch(t){throw dc(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];try{return 1===arguments.length?Ju(this._delegate,t):Ju.apply(void 0,Object(r.d)([this._delegate,t,e],n))}catch(t){throw dc(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Zu(Oa((t=this._delegate).firestore,Ga),[new Ee(t._key,ce.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=pc(e),i=vc(e,(function(e){return new gc(t.firestore,new Ou(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return Qu(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Oa(t,Ra);var e=Oa(t.firestore,Ga),n=Ya(e),i=new $u(e);return function(t,e){var n=this,i=new nr;return t.asyncQueue.enqueueAndForget((function(){return Object(r.a)(n,void 0,void 0,(function(){var n;return Object(r.c)(this,(function(o){switch(o.label){case 0:return n=function(t,e,n){return Object(r.a)(this,void 0,void 0,(function(){var i,o;return Object(r.c)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t,e){var n=y(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(o=r.sent()).isFoundDocument()?n.resolve(o):o.isNoDocument()?n.resolve(null):n.reject(new c(u.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return i=r.sent(),o=Xo(i,"Failed to get document '"+e+" from cache"),n.reject(o),[3,3];case 3:return[2]}}))}))},[4,aa(t)];case 1:return[2,n.apply(void 0,[o.sent(),e,i])]}}))}))})),i.promise}(n,t._key).then((function(n){return new Ou(e,i,t._key,n,new Au(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Oa(t,Ra);var e=Oa(t.firestore,Ga);return la(Ya(e),t._key,{source:"server"}).then((function(n){return tc(e,t,n)}))}(this._delegate):function(t){t=Oa(t,Ra);var e=Oa(t.firestore,Ga);return la(Ya(e),t._key).then((function(n){return tc(e,t,n)}))}(this._delegate)).then((function(t){return new gc(e.firestore,new Ou(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(lc.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function dc(t,e,n){return t.message=t.message.replace(e,n),t}function pc(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Ua(r))return r}return{}}function vc(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Ua(t[0])?t[0]:Ua(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var gc=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new fc(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Ru(this._delegate,t._delegate)},t}(),mc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(gc),yc=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new ac(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Lu(this._delegate,function(t,e,n){var r=e,i=ku("where",t);return new Du(i,r,n)}(e,n,r)))}catch(e){throw dc(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Lu(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=ku("orderBy",t);return new Fu(r,n)}(e,n)))}catch(e){throw dc(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Lu(this._delegate,function(t){return Ca("limit",t),new ju("limit",t,"F")}(e)))}catch(e){throw dc(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Lu(this._delegate,function(t){return Ca("limitToLast",t),new ju("limitToLast",t,"L")}(e)))}catch(e){throw dc(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Lu(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Bu("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw dc(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Lu(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Bu("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw dc(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Lu(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Uu("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw dc(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Lu(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Uu("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw dc(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return ja(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Oa(t,Ma);var e=Oa(t.firestore,Ga),n=Ya(e),i=new $u(e);return function(t,e){var n=this,i=new nr;return t.asyncQueue.enqueueAndForget((function(){return Object(r.a)(n,void 0,void 0,(function(){var n;return Object(r.c)(this,(function(o){switch(o.label){case 0:return n=function(t,e,n){return Object(r.a)(this,void 0,void 0,(function(){var i,o,s,a,u;return Object(r.c)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Ii(t,e,!0)];case 1:return u=r.sent(),i=new hs(e,u.Bn),o=i._o(u.documents),s=i.applyChanges(o,!1),n.resolve(s.snapshot),[3,3];case 2:return a=r.sent(),u=Xo(a,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,aa(t)];case 1:return[2,n.apply(void 0,[o.sent(),e,i])]}}))}))})),i.promise}(n,t._query).then((function(n){return new Pu(e,i,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Oa(t,Ma);var e=Oa(t.firestore,Ga),n=Ya(e),r=new $u(e);return fa(n,t._query,{source:"server"}).then((function(n){return new Pu(e,r,t,n)}))}(this._delegate):function(t){t=Oa(t,Ma);var e=Oa(t.firestore,Ga),n=Ya(e),r=new $u(e);return Mu(t._query),fa(n,t._query).then((function(n){return new Pu(e,r,t,n)}))}(this._delegate)).then((function(t){return new wc(e.firestore,new Pu(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=pc(e),i=vc(e,(function(e){return new wc(t.firestore,new Pu(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return Qu(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(lc.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),bc=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new mc(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),wc=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new yc(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new mc(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new bc(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new mc(n._firestore,r))}))},t.prototype.isEqual=function(t){return Ru(this._delegate,t._delegate)},t}(),xc=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(r.b)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new fc(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new fc(this.firestore,void 0===t?Da(this._delegate):Da(this._delegate,t))}catch(t){throw dc(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Oa(t.firestore,Ga),r=Da(t),i=Xu(t.converter,e);return Zu(n,[ou(iu(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,ce.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new fc(e.firestore,t)}))},e.prototype.isEqual=function(t){return Fa(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(lc.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(yc);function _c(t){return Oa(t,Ra)}var Tc=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(qa.bind.apply(qa,Object(r.d)([void 0],t)))}return t.documentId=function(){return new t(R.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(i.getModularInstance)(t))instanceof qa&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Ec=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new uu("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new su("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new cu("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new hu("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new lu("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}();function Sc(t){return function(t,e){var n=Ya(t=Oa(t,Ga)),i=new Va;return function(t,e,n,i){var o=this,s=function(t,e){return function(t,e){return new Qs(t,e)}(function(t,e){if(t instanceof Uint8Array)return $s(t,e);if(t instanceof ArrayBuffer)return $s(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,lo(e));t.asyncQueue.enqueueAndForget((function(){return Object(r.a)(o,void 0,void 0,(function(){var e;return Object(r.c)(this,(function(n){switch(n.label){case 0:return e=Ws,[4,ca(t)];case 1:return e.apply(void 0,[n.sent(),s,i]),[2]}}))}))}))}(n,t._databaseId,e,i),i}(this._delegate,t)}function kc(t){var e,n,i=this;return(e=this._delegate,n=t,function(t,e){var n=this;return t.asyncQueue.enqueue((function(){return Object(r.a)(n,void 0,void 0,(function(){var n;return Object(r.c)(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=y(t);return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.Ke.getNamedQuery(t,e)}))},[4,aa(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(Ya(e=Oa(e,Ga)),n).then((function(t){return t?new Ma(e,null,t.query):null}))).then((function(t){return t?new yc(i,t):null}))}}).call(this,n(73))},function(t,e,n){"use strict";n.d(e,"a",(function(){return x})),n.d(e,"b",(function(){return S})),n.d(e,"c",(function(){return g})),n.d(e,"d",(function(){return I})),n.d(e,"e",(function(){return v})),n.d(e,"f",(function(){return E}));var r=n(35),i=n(6),o=n.n(i),s=(n(53),n(33)),a=n(106),u=n(34),c=n(26),h=n(92),l=n.n(h),f=(n(165),n(55)),d=(n(107),function(t){var e=Object(a.a)();return e.displayName=t,e}),p=d("Router-History"),v=d("Router"),g=function(t){function e(e){var n;return(n=t.call(this,e)||this).state={location:e.history.location},n._isMounted=!1,n._pendingLocation=null,e.staticContext||(n.unlisten=e.history.listen((function(t){n._isMounted?n.setState({location:t}):n._pendingLocation=t}))),n}Object(r.a)(e,t),e.computeRootMatch=function(t){return{path:"/",url:"/",params:{},isExact:"/"===t}};var n=e.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return o.a.createElement(v.Provider,{value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},o.a.createElement(p.Provider,{children:this.props.children||null,value:this.props.history}))},e}(o.a.Component);o.a.Component;var m=function(t){function e(){return t.apply(this,arguments)||this}Object(r.a)(e,t);var n=e.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(t){this.props.onUpdate&&this.props.onUpdate.call(this,this,t)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},e}(o.a.Component);var y={},b=0;function w(t,e){return void 0===t&&(t="/"),void 0===e&&(e={}),"/"===t?t:function(t){if(y[t])return y[t];var e=l.a.compile(t);return b<1e4&&(y[t]=e,b++),e}(t)(e,{pretty:!0})}function x(t){var e=t.computedMatch,n=t.to,r=t.push,i=void 0!==r&&r;return o.a.createElement(v.Consumer,null,(function(t){t||Object(u.a)(!1);var r=t.history,a=t.staticContext,h=i?r.push:r.replace,l=Object(s.c)(e?"string"===typeof n?w(n,e.params):Object(c.a)({},n,{pathname:w(n.pathname,e.params)}):n);return a?(h(l),null):o.a.createElement(m,{onMount:function(){h(l)},onUpdate:function(t,e){var n=Object(s.c)(e.to);Object(s.f)(n,Object(c.a)({},l,{key:n.key}))||h(l)},to:n})}))}var _={},T=0;function E(t,e){void 0===e&&(e={}),("string"===typeof e||Array.isArray(e))&&(e={path:e});var n=e,r=n.path,i=n.exact,o=void 0!==i&&i,s=n.strict,a=void 0!==s&&s,u=n.sensitive,c=void 0!==u&&u;return[].concat(r).reduce((function(e,n){if(!n&&""!==n)return null;if(e)return e;var r=function(t,e){var n=""+e.end+e.strict+e.sensitive,r=_[n]||(_[n]={});if(r[t])return r[t];var i=[],o={regexp:l()(t,i,e),keys:i};return T<1e4&&(r[t]=o,T++),o}(n,{end:o,strict:a,sensitive:c}),i=r.regexp,s=r.keys,u=i.exec(t);if(!u)return null;var h=u[0],f=u.slice(1),d=t===h;return o&&!d?null:{path:n,url:"/"===n&&""===h?"/":h,isExact:d,params:s.reduce((function(t,e,n){return t[e.name]=f[n],t}),{})}}),null)}var S=function(t){function e(){return t.apply(this,arguments)||this}return Object(r.a)(e,t),e.prototype.render=function(){var t=this;return o.a.createElement(v.Consumer,null,(function(e){e||Object(u.a)(!1);var n=t.props.location||e.location,r=t.props.computedMatch?t.props.computedMatch:t.props.path?E(n.pathname,t.props):e.match,i=Object(c.a)({},e,{location:n,match:r}),s=t.props,a=s.children,h=s.component,l=s.render;return Array.isArray(a)&&function(t){return 0===o.a.Children.count(t)}(a)&&(a=null),o.a.createElement(v.Provider,{value:i},i.match?a?"function"===typeof a?a(i):a:h?o.a.createElement(h,i):l?l(i):null:"function"===typeof a?a(i):null)}))},e}(o.a.Component);function k(t){return"/"===t.charAt(0)?t:"/"+t}function A(t,e){if(!t)return e;var n=k(t);return 0!==e.pathname.indexOf(n)?e:Object(c.a)({},e,{pathname:e.pathname.substr(n.length)})}function O(t){return"string"===typeof t?t:Object(s.e)(t)}function C(t){return function(){Object(u.a)(!1)}}function P(){}o.a.Component;var I=function(t){function e(){return t.apply(this,arguments)||this}return Object(r.a)(e,t),e.prototype.render=function(){var t=this;return o.a.createElement(v.Consumer,null,(function(e){e||Object(u.a)(!1);var n,r,i=t.props.location||e.location;return o.a.Children.forEach(t.props.children,(function(t){if(null==r&&o.a.isValidElement(t)){n=t;var s=t.props.path||t.props.from;r=s?E(i.pathname,Object(c.a)({},t.props,{path:s})):e.match}})),r?o.a.cloneElement(n,{location:i,computedMatch:r}):null}))},e}(o.a.Component);o.a.useContext},function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n(66);var i=n(76),o=n(50);function s(t){return function(t){if(Array.isArray(t))return Object(r.a)(t)}(t)||Object(i.a)(t)||Object(o.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},,function(t,e,n){"use strict";function r(){return r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r.apply(this,arguments)}n.d(e,"a",(function(){return r}))},,function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return lr})),n.d(e,"b",(function(){return dr})),n.d(e,"c",(function(){return fr})),n.d(e,"d",(function(){return vr})),n.d(e,"e",(function(){return pr})),n.d(e,"f",(function(){return gr})),n.d(e,"g",(function(){return mr})),n.d(e,"h",(function(){return cr})),n.d(e,"i",(function(){return hr}));var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var o,s="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},a=a||{},u=s||self;function c(){}function h(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function l(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var f="closure_uid_"+(1e9*Math.random()>>>0),d=0;function p(t,e,n){return t.call.apply(t.bind,arguments)}function v(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function g(t,e,n){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?p:v).apply(null,arguments)}function m(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function y(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function b(){this.s=this.s,this.o=this.o}var w={};b.prototype.s=!1,b.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,f)&&t[f]||(t[f]=++d)}(this);delete w[t]}},b.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var x=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},_=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function T(t){return Array.prototype.concat.apply([],arguments)}function E(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function S(t){return/^[\s\xa0]*$/.test(t)}var k,A=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function O(t,e){return-1!=t.indexOf(e)}function C(t,e){return t<e?-1:t>e?1:0}t:{var P=u.navigator;if(P){var I=P.userAgent;if(I){k=I;break t}}k=""}function R(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function M(t){var e={};for(var n in t)e[n]=t[n];return e}var N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<N.length;o++)n=N[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function D(t){return D[" "](t),t}D[" "]=c;var F,j=O(k,"Opera"),B=O(k,"Trident")||O(k,"MSIE"),U=O(k,"Edge"),V=U||B,z=O(k,"Gecko")&&!(O(k.toLowerCase(),"webkit")&&!O(k,"Edge"))&&!(O(k,"Trident")||O(k,"MSIE"))&&!O(k,"Edge"),G=O(k.toLowerCase(),"webkit")&&!O(k,"Edge");function Y(){var t=u.document;return t?t.documentMode:void 0}t:{var W="",X=function(){var t=k;return z?/rv:([^\);]+)(\)|;)/.exec(t):U?/Edge\/([\d\.]+)/.exec(t):B?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):G?/WebKit\/(\S+)/.exec(t):j?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(X&&(W=X?X[1]:""),B){var H=Y();if(null!=H&&H>parseFloat(W)){F=String(H);break t}}F=W}var q,K={};function $(){return function(t){var e=K;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=A(String(F)).split("."),n=A("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=C(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||C(0==o[2].length,0==s[2].length)||C(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}))}if(u.document&&B){var J=Y();q=J||(parseInt(F,10)||void 0)}else q=void 0;var Q=q,Z=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",c,e),u.removeEventListener("test",c,e)}catch(n){}return t}();function tt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function et(t,e){if(tt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(z){t:{try{D(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:nt[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&et.Z.h.call(this)}}tt.prototype.h=function(){this.defaultPrevented=!0},y(et,tt);var nt={2:"touch",3:"pen",4:"mouse"};et.prototype.h=function(){et.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var rt="closure_listenable_"+(1e6*Math.random()|0),it=0;function ot(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++it,this.ca=this.fa=!1}function st(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function at(t){this.src=t,this.g={},this.h=0}function ut(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=x(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(st(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function ct(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}at.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=ct(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new ot(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var ht="closure_lm_"+(1e6*Math.random()|0),lt={};function ft(t,e,n,r,i){if(r&&r.once)return pt(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)ft(t,e[o],n,r,i);return null}return n=xt(n),t&&t[rt]?t.N(e,n,l(r)?!!r.capture:!!r,i):dt(t,e,n,!1,r,i)}function dt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=l(i)?!!i.capture:!!i,a=bt(t);if(a||(t[ht]=a=new at(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=yt;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Z||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(mt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function pt(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)pt(t,e[o],n,r,i);return null}return n=xt(n),t&&t[rt]?t.O(e,n,l(r)?!!r.capture:!!r,i):dt(t,e,n,!0,r,i)}function vt(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)vt(t,e[o],n,r,i);else r=l(r)?!!r.capture:!!r,n=xt(n),t&&t[rt]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=ct(o=t.g[e],n,r,i))&&(st(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=bt(t))&&(e=t.g[e.toString()],t=-1,e&&(t=ct(e,n,r,i)),(n=-1<t?e[t]:null)&&gt(n))}function gt(t){if("number"!==typeof t&&t&&!t.ca){var e=t.src;if(e&&e[rt])ut(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(mt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bt(e))?(ut(n,t),0==n.h&&(n.src=null,e[ht]=null)):st(t)}}}function mt(t){return t in lt?lt[t]:lt[t]="on"+t}function yt(t,e){if(t.ca)t=!0;else{e=new et(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&gt(t),t=n.call(r,e)}return t}function bt(t){return(t=t[ht])instanceof at?t:null}var wt="__closure_events_fn_"+(1e9*Math.random()>>>0);function xt(t){return"function"===typeof t?t:(t[wt]||(t[wt]=function(e){return t.handleEvent(e)}),t[wt])}function _t(){b.call(this),this.i=new at(this),this.P=this,this.I=null}function Tt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"===typeof e)e=new tt(e,t);else if(e instanceof tt)e.target=e.target||t;else{var i=e;L(e=new tt(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=Et(s,r,!0,e)&&i}if(i=Et(s=e.g=t,r,!0,e)&&i,i=Et(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Et(s=e.g=n[o],r,!1,e)&&i}function Et(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&ut(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}y(_t,b),_t.prototype[rt]=!0,_t.prototype.removeEventListener=function(t,e,n,r){vt(this,t,e,n,r)},_t.prototype.M=function(){if(_t.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)st(n[r]);delete e.g[t],e.h--}}this.I=null},_t.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},_t.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var St=u.JSON.stringify;function kt(){var t=Nt,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var At,Ot=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=Ct.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),Ct=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new Pt}),(function(t){return t.reset()})),Pt=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function It(t){u.setTimeout((function(){throw t}),0)}function Rt(t,e){At||function(){var t=u.Promise.resolve(void 0);At=function(){t.then(Lt)}}(),Mt||(At(),Mt=!0),Nt.add(t,e)}var Mt=!1,Nt=new Ot;function Lt(){for(var t;t=kt();){try{t.h.call(t.g)}catch(n){It(n)}var e=Ct;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Mt=!1}function Dt(t,e){_t.call(this),this.h=t||1,this.g=e||u,this.j=g(this.kb,this),this.l=Date.now()}function Ft(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function jt(t,e,n){if("function"===typeof t)n&&(t=g(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=g(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function Bt(t){t.g=jt((function(){t.g=null,t.i&&(t.i=!1,Bt(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}y(Dt,_t),(o=Dt.prototype).da=!1,o.S=null,o.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Tt(this,"tick"),this.da&&(Ft(this),this.start()))}},o.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},o.M=function(){Dt.Z.M.call(this),Ft(this),delete this.g};var Ut=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Bt(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(b);function Vt(t){b.call(this),this.h=t,this.g={}}y(Vt,b);var zt=[];function Gt(t,e,n,r){Array.isArray(n)||(n&&(zt[0]=n.toString()),n=zt);for(var i=0;i<n.length;i++){var o=ft(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Yt(t){R(t.g,(function(t,e){this.g.hasOwnProperty(e)&&gt(t)}),t),t.g={}}function Wt(){this.g=!0}function Xt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return St(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}Vt.prototype.M=function(){Vt.Z.M.call(this),Yt(this)},Vt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wt.prototype.Aa=function(){this.g=!1},Wt.prototype.info=function(){};var Ht={},qt=null;function Kt(){return qt=qt||new _t}function $t(t){tt.call(this,Ht.Ma,t)}function Jt(t){var e=Kt();Tt(e,new $t(e,t))}function Qt(t,e){tt.call(this,Ht.STAT_EVENT,t),this.stat=e}function Zt(t){var e=Kt();Tt(e,new Qt(e,t))}function te(t,e){tt.call(this,Ht.Na,t),this.size=e}function ee(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return u.setTimeout((function(){t()}),e)}Ht.Ma="serverreachability",y($t,tt),Ht.STAT_EVENT="statevent",y(Qt,tt),Ht.Na="timingevent",y(te,tt);var ne={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},re={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ie(){}function oe(t){return t.h||(t.h=t.i())}function se(){}ie.prototype.h=null;var ae,ue={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ce(){tt.call(this,"d")}function he(){tt.call(this,"c")}function le(){}function fe(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Vt(this),this.P=pe,t=V?125:void 0,this.W=new Dt(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new de}function de(){this.i=null,this.g="",this.h=!1}y(ce,tt),y(he,tt),y(le,ie),le.prototype.g=function(){return new XMLHttpRequest},le.prototype.i=function(){return{}},ae=new le;var pe=45e3,ve={},ge={};function me(t,e,n){t.K=1,t.v=Ue(Ne(e)),t.s=n,t.U=!0,ye(t,null)}function ye(t,e){t.F=Date.now(),_e(t),t.A=Ne(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Ze(n.h,"t",r),t.C=0,n=t.l.H,t.h=new de,t.g=nr(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Ut(g(t.Ia,t,t.g),t.O)),Gt(t.V,t.g,"readystatechange",t.gb),e=t.H?M(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Jt(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");s=2<=l.length&&"type"==l[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function be(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function we(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=xe(t,n))==ge){4==e&&(t.o=4,Zt(14),i=!1),Xt(t.j,t.m,null,"[Incomplete Response]");break}if(r==ve){t.o=4,Zt(15),Xt(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Xt(t.j,t.m,r,null),Ae(t,r)}be(t)&&r!=ge&&r!=ve&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Zt(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),qn(e),e.L=!0,Zt(11))):(Xt(t.j,t.m,n,"[Invalid Chunked Response]"),ke(t),Se(t))}function xe(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?ge:(n=Number(e.substring(n,r)),isNaN(n)?ve:(r+=1)+n>e.length?ge:(e=e.substr(r,n),t.C=r+n,e))}function _e(t){t.Y=Date.now()+t.P,Te(t,t.P)}function Te(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=ee(g(t.eb,t),e)}function Ee(t){t.B&&(u.clearTimeout(t.B),t.B=null)}function Se(t){0==t.l.G||t.I||Jn(t.l,t)}function ke(t){Ee(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Ft(t.W),Yt(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Ae(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||un(n.i,t)))if(n.I=t.N,!t.J&&un(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;$n(n),Bn(n)}Hn(n),Zt(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=ee(g(n.ab,n),6e3));if(1>=an(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else Zn(n,11)}else if((t.J||n.g==t)&&$n(n),!S(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var h=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=r.i;!l.g&&(O(h,"spdy")||O(h,"quic")||O(h,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(cn(l,l.h),l.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Be(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=t;if((r=n).oa=er(r,r.H?r.la:null,r.W),d.J){hn(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(Ee(p),_e(p)),r.g=d}else Xn(r);0<n.l.length&&zn(n)}else"stop"!=o[0]&&"close"!=o[0]||Zn(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?Zn(n,7):jn(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Jt(4)}catch(o){}}function Oe(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||"string"===typeof t)_(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(h(t)||"string"===typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"===typeof t)return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ce(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ce)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Pe(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Ie(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Ie(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Ie(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(o=fe.prototype).setTimeout=function(t){this.P=t},o.gb=function(t){t=t.target;var e=this.L;e&&3==Mn(t)?e.l():this.Ia(t)},o.Ia=function(t){try{if(t==this.g)t:{var e=Mn(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||V||this.g&&(this.h.h||this.g.ga()||Nn(this.g)))){this.I||4!=e||7==n||Jt(8==n||0>=r?3:2),Ee(this);var i=this.g.ba();this.N=i;e:if(be(this)){var o=Nn(this.g);t="";var s=o.length,a=4==Mn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){ke(this),Se(this);var c="";break e}this.h.i=new u.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var h,l=this.g;if((h=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(h)){var f=h;break e}}f=null}if(!(i=f)){this.i=!1,this.o=3,Zt(12),ke(this),Se(this);break t}Xt(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ae(this,i)}this.U?(we(this,e,c),V&&this.i&&3==e&&(Gt(this.V,this.W,"tick",this.fb),this.W.start())):(Xt(this.j,this.m,c,null),Ae(this,c)),4==e&&ke(this),this.i&&!this.I&&(4==e?Jn(this.l,this):(this.i=!1,_e(this)))}else 400==i&&0<c.indexOf("Unknown SID")?(this.o=3,Zt(12)):(this.o=0,Zt(13)),ke(this),Se(this)}}}catch(e){}},o.fb=function(){if(this.g){var t=Mn(this.g),e=this.g.ga();this.C<e.length&&(Ee(this),we(this,t,e),this.i&&4!=t&&_e(this))}},o.cancel=function(){this.I=!0,ke(this)},o.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(Jt(3),Zt(17)),ke(this),this.o=2,Se(this)):Te(this,this.Y-t)},(o=Ce.prototype).R=function(){Pe(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},o.T=function(){return Pe(this),this.g.concat()},o.get=function(t,e){return Ie(this.h,t)?this.h[t]:e},o.set=function(t,e){Ie(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},o.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Re=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Me(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Me){this.g=void 0!==e?e:t.g,Le(this,t.j),this.s=t.s,De(this,t.i),Fe(this,t.m),this.l=t.l,e=t.h;var n=new Ke;n.i=e.i,e.g&&(n.g=new Ce(e.g),n.h=e.h),je(this,n),this.o=t.o}else t&&(n=String(t).match(Re))?(this.g=!!e,Le(this,n[1]||"",!0),this.s=Ve(n[2]||""),De(this,n[3]||"",!0),Fe(this,n[4]),this.l=Ve(n[5]||"",!0),je(this,n[6]||"",!0),this.o=Ve(n[7]||"")):(this.g=!!e,this.h=new Ke(null,this.g))}function Ne(t){return new Me(t)}function Le(t,e,n){t.j=n?Ve(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function De(t,e,n){t.i=n?Ve(e,!0):e}function Fe(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function je(t,e,n){e instanceof Ke?(t.h=e,function(t,e){e&&!t.j&&($e(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Je(this,e),Ze(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=ze(e,He)),t.h=new Ke(e,t.g))}function Be(t,e,n){t.h.set(e,n)}function Ue(t){return Be(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ve(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ze(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Ge),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ge(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Me.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ze(e,Ye,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(ze(e,Ye,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(ze(n,"/"==n.charAt(0)?Xe:We,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ze(n,qe)),t.join("")};var Ye=/[#\/\?@]/g,We=/[#\?:]/g,Xe=/[#\?]/g,He=/[#\?@]/g,qe=/#/g;function Ke(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function $e(t){t.g||(t.g=new Ce,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Je(t,e){$e(t),e=tn(t,e),Ie(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Ie((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Pe(t)))}function Qe(t,e){return $e(t),e=tn(t,e),Ie(t.g.h,e)}function Ze(t,e,n){Je(t,e),0<n.length&&(t.i=null,t.g.set(tn(t,e),E(n)),t.h+=n.length)}function tn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(o=Ke.prototype).add=function(t,e){$e(this),this.i=null,t=tn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},o.forEach=function(t,e){$e(this),this.g.forEach((function(n,r){_(n,(function(n){t.call(e,n,r,this)}),this)}),this)},o.T=function(){$e(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},o.R=function(t){$e(this);var e=[];if("string"===typeof t)Qe(this,t)&&(e=T(e,this.g.get(tn(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=T(e,t[n])}return e},o.set=function(t,e){return $e(this),this.i=null,Qe(this,t=tn(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},o.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},o.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var en=function(t,e){this.h=t,this.g=e};function nn(t){this.l=t||on,u.PerformanceNavigationTiming?t=0<(t=u.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(u.g&&u.g.Ea&&u.g.Ea()&&u.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var rn,on=10;function sn(t){return!!t.h||!!t.g&&t.g.size>=t.j}function an(t){return t.h?1:t.g?t.g.size:0}function un(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function cn(t,e){t.g?t.g.add(e):t.h=e}function hn(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function ln(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var o=i(t.g.values()),s=o.next();!s.done;s=o.next()){var a=s.value;r=r.concat(a.D)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}return E(t.i)}function fn(){}function dn(){this.g=new fn}function pn(t,e,n){var r=n||"";try{Oe(t,(function(t,n){var i=t;l(t)&&(i=St(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function vn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function gn(t){this.l=t.$b||null,this.j=t.ib||!1}function mn(t,e){_t.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=yn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}nn.prototype.cancel=function(){var t,e;if(this.i=ln(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=i(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},fn.prototype.stringify=function(t){return u.JSON.stringify(t,void 0)},fn.prototype.parse=function(t){return u.JSON.parse(t,void 0)},y(gn,ie),gn.prototype.g=function(){return new mn(this.l,this.j)},gn.prototype.i=(rn={},function(){return rn}),y(mn,_t);var yn=0;function bn(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function wn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,xn(t)}function xn(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(o=mn.prototype).open=function(t,e){if(this.readyState!=yn)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,xn(this)},o.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||u).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},o.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,wn(this)),this.readyState=yn},o.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,xn(this)),this.g&&(this.readyState=3,xn(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof u.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;bn(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},o.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?wn(this):xn(this),3==this.readyState&&bn(this)}},o.Ua=function(t){this.g&&(this.response=this.responseText=t,wn(this))},o.Ta=function(t){this.g&&(this.response=t,wn(this))},o.ha=function(){this.g&&wn(this)},o.setRequestHeader=function(t,e){this.v.append(t,e)},o.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},o.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(mn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var _n=u.JSON.parse;function Tn(t){_t.call(this),this.headers=new Ce,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=En,this.K=this.L=!1}y(Tn,_t);var En="",Sn=/^https?$/i,kn=["POST","PUT"];function An(t){return"content-type"==t.toLowerCase()}function On(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Cn(t),In(t)}function Cn(t){t.D||(t.D=!0,Tt(t,"complete"),Tt(t,"error"))}function Pn(t){if(t.h&&"undefined"!=typeof a&&(!t.C[1]||4!=Mn(t)||2!=t.ba()))if(t.v&&4==Mn(t))jt(t.Fa,0,t);else if(Tt(t,"readystatechange"),4==Mn(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Re)[1]||null;if(!o&&u.self&&u.self.location){var s=u.self.location.protocol;o=s.substr(0,s.length-1)}i=!Sn.test(o?o.toLowerCase():"")}e=i}if(e)Tt(t,"complete"),Tt(t,"success");else{t.m=6;try{var c=2<Mn(t)?t.g.statusText:""}catch(h){c=""}t.j=c+" ["+t.ba()+"]",Cn(t)}}finally{In(t)}}}function In(t,e){if(t.g){Rn(t);var n=t.g,r=t.C[0]?c:null;t.g=null,t.C=null,e||Tt(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function Rn(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(u.clearTimeout(t.A),t.A=null)}function Mn(t){return t.g?t.g.readyState:0}function Nn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case En:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Ln(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return R(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Be(t,e,n))}function Dn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Fn(t){this.za=0,this.l=[],this.h=new Wt,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Dn("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Dn("baseRetryDelayMs",5e3,t),this.$a=Dn("retryDelaySeedMs",1e4,t),this.Ya=Dn("forwardChannelMaxRetries",2,t),this.ra=Dn("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new nn(t&&t.concurrentRequestLimit),this.Ca=new dn,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function jn(t){if(Un(t),3==t.G){var e=t.V++,n=Ne(t.F);Be(n,"SID",t.J),Be(n,"RID",e),Be(n,"TYPE","terminate"),Yn(t,n),(e=new fe(t,t.h,e,void 0)).K=2,e.v=Ue(Ne(n)),n=!1,u.navigator&&u.navigator.sendBeacon&&(n=u.navigator.sendBeacon(e.v.toString(),"")),!n&&u.Image&&((new Image).src=e.v,n=!0),n||(e.g=nr(e.l,null),e.g.ea(e.v)),e.F=Date.now(),_e(e)}tr(t)}function Bn(t){t.g&&(qn(t),t.g.cancel(),t.g=null)}function Un(t){Bn(t),t.u&&(u.clearTimeout(t.u),t.u=null),$n(t),t.i.cancel(),t.m&&("number"===typeof t.m&&u.clearTimeout(t.m),t.m=null)}function Vn(t,e){t.l.push(new en(t.Za++,e)),3==t.G&&zn(t)}function zn(t){sn(t.i)||t.m||(t.m=!0,Rt(t.Ha,t),t.C=0)}function Gn(t,e){var n;n=e?e.m:t.V++;var r=Ne(t.F);Be(r,"SID",t.J),Be(r,"RID",n),Be(r,"AID",t.U),Yn(t,r),t.o&&t.s&&Ln(r,t.o,t.s),n=new fe(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Wn(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),cn(t.i,n),me(n,r,e)}function Yn(t,e){t.j&&Oe({},(function(t,n){Be(e,n,t)}))}function Wn(t,e,n){n=Math.min(t.l.length,n);var r=t.j?g(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,h=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{pn(h,s,"req"+c+"_")}catch(l){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Xn(t){t.g||t.u||(t.Y=1,Rt(t.Ga,t),t.A=0)}function Hn(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=ee(g(t.Ga,t),Qn(t,t.A)),t.A++,!0)}function qn(t){null!=t.B&&(u.clearTimeout(t.B),t.B=null)}function Kn(t){t.g=new fe(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Ne(t.oa);Be(e,"RID","rpc"),Be(e,"SID",t.J),Be(e,"CI",t.N?"0":"1"),Be(e,"AID",t.U),Yn(t,e),Be(e,"TYPE","xmlhttp"),t.o&&t.s&&Ln(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=Ue(Ne(e)),n.s=null,n.U=!0,ye(n,t)}function $n(t){null!=t.v&&(u.clearTimeout(t.v),t.v=null)}function Jn(t,e){var n=null;if(t.g==e){$n(t),qn(t),t.g=null;var r=2}else{if(!un(t.i,e))return;n=e.D,hn(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Tt(r=Kt(),new te(r,n,e,i)),zn(t)}else Xn(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(an(t.i)>=t.i.j-(t.m?1:0))&&(t.m?(t.l=e.D.concat(t.l),!0):!(1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya))&&(t.m=ee(g(t.Ha,t,e),Qn(t,t.C)),t.C++,!0))}(t,e)||2==r&&Hn(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Zn(t,5);break;case 4:Zn(t,10);break;case 3:Zn(t,6);break;default:Zn(t,2)}}function Qn(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Zn(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=g(t.jb,t);n||(n=new Me("//www.google.com/images/cleardot.gif"),u.location&&"http"==u.location.protocol||Le(n,"https"),Ue(n)),function(t,e){var n=new Wt;if(u.Image){var r=new Image;r.onload=m(vn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=m(vn,n,r,"TestLoadImage: error",!1,e),r.onabort=m(vn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=m(vn,n,r,"TestLoadImage: timeout",!1,e),u.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Zt(2);t.G=0,t.j&&t.j.va(e),tr(t),Un(t)}function tr(t){t.G=0,t.I=-1,t.j&&(0==ln(t.i).length&&0==t.l.length||(t.i.i.length=0,E(t.l),t.l.length=0),t.j.ua())}function er(t,e,n){var r=function(t){return t instanceof Me?Ne(t):new Me(t,void 0)}(n);if(""!=r.i)e&&De(r,e+"."+r.i),Fe(r,r.m);else{var i=u.location;r=function(t,e,n,r){var i=new Me(null,void 0);return t&&Le(i,t),e&&De(i,e),n&&Fe(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&R(t.aa,(function(t,e){Be(r,e,t)})),e=t.D,n=t.sa,e&&n&&Be(r,e,n),Be(r,"VER",t.ma),Yn(t,r),r}function nr(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new Tn(new gn({ib:!0})):new Tn(t.qa)).L=t.H,e}function rr(){}function ir(){if(B&&!(10<=Number(Q)))throw Error("Environmental error: no available transport.")}function or(t,e){_t.call(this),this.g=new Fn(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!S(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!S(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new ur(this)}function sr(t){ce.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function ar(){he.call(this),this.status=1}function ur(t){this.g=t}(o=Tn.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ae.g(),this.C=this.u?oe(this.u):oe(ae),this.g.onreadystatechange=g(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void On(this,o)}t=n||"";var i=new Ce(this.headers);r&&Oe(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=An,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}(i.T()),n=u.FormData&&t instanceof u.FormData,!(0<=x(kn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Rn(this),0<this.B&&((this.K=function(t){return B&&$()&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=g(this.pa,this)):this.A=jt(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){On(this,o)}},o.pa=function(){"undefined"!=typeof a&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Tt(this,"timeout"),this.abort(8))},o.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Tt(this,"complete"),Tt(this,"abort"),In(this))},o.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),In(this,!0)),Tn.Z.M.call(this)},o.Fa=function(){this.s||(this.F||this.v||this.l?Pn(this):this.cb())},o.cb=function(){Pn(this)},o.ba=function(){try{return 2<Mn(this)?this.g.status:-1}catch(rn){return-1}},o.ga=function(){try{return this.g?this.g.responseText:""}catch(rn){return""}},o.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),_n(e)}},o.Da=function(){return this.m},o.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(o=Fn.prototype).ma=8,o.G=1,o.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},o.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new fe(this,this.h,t,void 0),n=this.s;if(this.P&&(n?L(n=M(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"===typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Wn(this,e,r),Be(i=Ne(this.F),"RID",t),Be(i,"CVER",22),this.D&&Be(i,"X-HTTP-Session-Id",this.D),Yn(this,i),this.o&&n&&Ln(i,this.o,n),cn(this.i,e),this.Ra&&Be(i,"TYPE","init"),this.ja?(Be(i,"$req",r),Be(i,"SID","null"),e.$=!0,me(e,i,null)):me(e,i,r),this.G=2}}else 3==this.G&&(t?Gn(this,t):0==this.l.length||sn(this.i)||Gn(this))},o.Ga=function(){if(this.u=null,Kn(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=ee(g(this.bb,this),t)}},o.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Zt(10),Bn(this),Kn(this))},o.ab=function(){null!=this.v&&(this.v=null,Bn(this),Hn(this),Zt(19))},o.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Zt(2)):(this.h.info("Failed to ping google.com"),Zt(1))},(o=rr.prototype).xa=function(){},o.wa=function(){},o.va=function(){},o.ua=function(){},o.Oa=function(){},ir.prototype.g=function(t,e){return new or(t,e)},y(or,_t),or.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Rt(g(t.hb,t,e))),Zt(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=er(t,null,t.W),zn(t)},or.prototype.close=function(){jn(this.g)},or.prototype.u=function(t){if("string"===typeof t){var e={};e.__data__=t,Vn(this.g,e)}else this.v?((e={}).__data__=St(t),Vn(this.g,e)):Vn(this.g,t)},or.prototype.M=function(){this.g.j=null,delete this.j,jn(this.g),delete this.g,or.Z.M.call(this)},y(sr,ce),y(ar,he),y(ur,rr),ur.prototype.xa=function(){Tt(this.g,"a")},ur.prototype.wa=function(t){Tt(this.g,new sr(t))},ur.prototype.va=function(t){Tt(this.g,new ar(t))},ur.prototype.ua=function(){Tt(this.g,"b")},ir.prototype.createWebChannel=ir.prototype.g,or.prototype.send=or.prototype.u,or.prototype.open=or.prototype.m,or.prototype.close=or.prototype.close,ne.NO_ERROR=0,ne.TIMEOUT=8,ne.HTTP_ERROR=6,re.COMPLETE="complete",se.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",_t.prototype.listen=_t.prototype.N,Tn.prototype.listenOnce=Tn.prototype.O,Tn.prototype.getLastError=Tn.prototype.La,Tn.prototype.getLastErrorCode=Tn.prototype.Da,Tn.prototype.getStatus=Tn.prototype.ba,Tn.prototype.getResponseJson=Tn.prototype.Qa,Tn.prototype.getResponseText=Tn.prototype.ga,Tn.prototype.send=Tn.prototype.ea;var cr=function(){return new ir},hr=function(){return Kt()},lr=ne,fr=re,dr=Ht,pr={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},vr=gn,gr=se,mr=Tn}).call(this,n(45))},,,,function(t,e,n){var r=e;r.utils=n(46),r.common=n(65),r.sha=n(132),r.ripemd=n(136),r.hmac=n(137),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160},function(t,e,n){"use strict";n.d(e,"a",(function(){return T})),n.d(e,"b",(function(){return C})),n.d(e,"d",(function(){return I})),n.d(e,"c",(function(){return v})),n.d(e,"f",(function(){return g})),n.d(e,"e",(function(){return p}));var r=n(26);function i(t){return"/"===t.charAt(0)}function o(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}var s=function(t,e){void 0===e&&(e="");var n,r=t&&t.split("/")||[],s=e&&e.split("/")||[],a=t&&i(t),u=e&&i(e),c=a||u;if(t&&i(t)?s=r:r.length&&(s.pop(),s=s.concat(r)),!s.length)return"/";if(s.length){var h=s[s.length-1];n="."===h||".."===h||""===h}else n=!1;for(var l=0,f=s.length;f>=0;f--){var d=s[f];"."===d?o(s,f):".."===d?(o(s,f),l++):l&&(o(s,f),l--)}if(!c)for(;l--;l)s.unshift("..");!c||""===s[0]||s[0]&&i(s[0])||s.unshift("");var p=s.join("/");return n&&"/"!==p.substr(-1)&&(p+="/"),p};function a(t){return t.valueOf?t.valueOf():Object.prototype.valueOf.call(t)}var u=function t(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(Array.isArray(e))return Array.isArray(n)&&e.length===n.length&&e.every((function(e,r){return t(e,n[r])}));if("object"===typeof e||"object"===typeof n){var r=a(e),i=a(n);return r!==e||i!==n?t(r,i):Object.keys(Object.assign({},e,n)).every((function(r){return t(e[r],n[r])}))}return!1},c=n(34);function h(t){return"/"===t.charAt(0)?t:"/"+t}function l(t){return"/"===t.charAt(0)?t.substr(1):t}function f(t,e){return function(t,e){return 0===t.toLowerCase().indexOf(e.toLowerCase())&&-1!=="/?#".indexOf(t.charAt(e.length))}(t,e)?t.substr(e.length):t}function d(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}function p(t){var e=t.pathname,n=t.search,r=t.hash,i=e||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function v(t,e,n,i){var o;"string"===typeof t?(o=function(t){var e=t||"/",n="",r="",i=e.indexOf("#");-1!==i&&(r=e.substr(i),e=e.substr(0,i));var o=e.indexOf("?");return-1!==o&&(n=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===n?"":n,hash:"#"===r?"":r}}(t),o.state=e):(void 0===(o=Object(r.a)({},t)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==e&&void 0===o.state&&(o.state=e));try{o.pathname=decodeURI(o.pathname)}catch(a){throw a instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):a}return n&&(o.key=n),i?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=s(o.pathname,i.pathname)):o.pathname=i.pathname:o.pathname||(o.pathname="/"),o}function g(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&u(t.state,e.state)}function m(){var t=null;var e=[];return{setPrompt:function(e){return t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,n,r,i){if(null!=t){var o="function"===typeof t?t(e,n):t;"string"===typeof o?"function"===typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(t){var n=!0;function r(){n&&t.apply(void 0,arguments)}return e.push(r),function(){n=!1,e=e.filter((function(t){return t!==r}))}},notifyListeners:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.forEach((function(t){return t.apply(void 0,n)}))}}}var y=!("undefined"===typeof window||!window.document||!window.document.createElement);function b(t,e){e(window.confirm(t))}var w="popstate",x="hashchange";function _(){try{return window.history.state||{}}catch(t){return{}}}function T(t){void 0===t&&(t={}),y||Object(c.a)(!1);var e=window.history,n=function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),i=!(-1===window.navigator.userAgent.indexOf("Trident")),o=t,s=o.forceRefresh,a=void 0!==s&&s,u=o.getUserConfirmation,l=void 0===u?b:u,g=o.keyLength,T=void 0===g?6:g,E=t.basename?d(h(t.basename)):"";function S(t){var e=t||{},n=e.key,r=e.state,i=window.location,o=i.pathname+i.search+i.hash;return E&&(o=f(o,E)),v(o,r,n)}function k(){return Math.random().toString(36).substr(2,T)}var A=m();function O(t){Object(r.a)(U,t),U.length=e.length,A.notifyListeners(U.location,U.action)}function C(t){(function(t){return void 0===t.state&&-1===navigator.userAgent.indexOf("CriOS")})(t)||R(S(t.state))}function P(){R(S(_()))}var I=!1;function R(t){if(I)I=!1,O();else{A.confirmTransitionTo(t,"POP",l,(function(e){e?O({action:"POP",location:t}):function(t){var e=U.location,n=N.indexOf(e.key);-1===n&&(n=0);var r=N.indexOf(t.key);-1===r&&(r=0);var i=n-r;i&&(I=!0,D(i))}(t)}))}}var M=S(_()),N=[M.key];function L(t){return E+p(t)}function D(t){e.go(t)}var F=0;function j(t){1===(F+=t)&&1===t?(window.addEventListener(w,C),i&&window.addEventListener(x,P)):0===F&&(window.removeEventListener(w,C),i&&window.removeEventListener(x,P))}var B=!1;var U={length:e.length,action:"POP",location:M,createHref:L,push:function(t,r){var i="PUSH",o=v(t,r,k(),U.location);A.confirmTransitionTo(o,i,l,(function(t){if(t){var r=L(o),s=o.key,u=o.state;if(n)if(e.pushState({key:s,state:u},null,r),a)window.location.href=r;else{var c=N.indexOf(U.location.key),h=N.slice(0,c+1);h.push(o.key),N=h,O({action:i,location:o})}else window.location.href=r}}))},replace:function(t,r){var i="REPLACE",o=v(t,r,k(),U.location);A.confirmTransitionTo(o,i,l,(function(t){if(t){var r=L(o),s=o.key,u=o.state;if(n)if(e.replaceState({key:s,state:u},null,r),a)window.location.replace(r);else{var c=N.indexOf(U.location.key);-1!==c&&(N[c]=o.key),O({action:i,location:o})}else window.location.replace(r)}}))},go:D,goBack:function(){D(-1)},goForward:function(){D(1)},block:function(t){void 0===t&&(t=!1);var e=A.setPrompt(t);return B||(j(1),B=!0),function(){return B&&(B=!1,j(-1)),e()}},listen:function(t){var e=A.appendListener(t);return j(1),function(){j(-1),e()}}};return U}var E="hashchange",S={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+l(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:l,decodePath:h},slash:{encodePath:h,decodePath:h}};function k(t){var e=t.indexOf("#");return-1===e?t:t.slice(0,e)}function A(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)}function O(t){window.location.replace(k(window.location.href)+"#"+t)}function C(t){void 0===t&&(t={}),y||Object(c.a)(!1);var e=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),t),i=n.getUserConfirmation,o=void 0===i?b:i,s=n.hashType,a=void 0===s?"slash":s,u=t.basename?d(h(t.basename)):"",l=S[a],g=l.encodePath,w=l.decodePath;function x(){var t=w(A());return u&&(t=f(t,u)),v(t)}var _=m();function T(t){Object(r.a)(U,t),U.length=e.length,_.notifyListeners(U.location,U.action)}var C=!1,P=null;function I(){var t,e,n=A(),r=g(n);if(n!==r)O(r);else{var i=x(),s=U.location;if(!C&&(e=i,(t=s).pathname===e.pathname&&t.search===e.search&&t.hash===e.hash))return;if(P===p(i))return;P=null,function(t){if(C)C=!1,T();else{var e="POP";_.confirmTransitionTo(t,e,o,(function(n){n?T({action:e,location:t}):function(t){var e=U.location,n=L.lastIndexOf(p(e));-1===n&&(n=0);var r=L.lastIndexOf(p(t));-1===r&&(r=0);var i=n-r;i&&(C=!0,D(i))}(t)}))}}(i)}}var R=A(),M=g(R);R!==M&&O(M);var N=x(),L=[p(N)];function D(t){e.go(t)}var F=0;function j(t){1===(F+=t)&&1===t?window.addEventListener(E,I):0===F&&window.removeEventListener(E,I)}var B=!1;var U={length:e.length,action:"POP",location:N,createHref:function(t){var e=document.querySelector("base"),n="";return e&&e.getAttribute("href")&&(n=k(window.location.href)),n+"#"+g(u+p(t))},push:function(t,e){var n="PUSH",r=v(t,void 0,void 0,U.location);_.confirmTransitionTo(r,n,o,(function(t){if(t){var e=p(r),i=g(u+e);if(A()!==i){P=e,function(t){window.location.hash=t}(i);var o=L.lastIndexOf(p(U.location)),s=L.slice(0,o+1);s.push(e),L=s,T({action:n,location:r})}else T()}}))},replace:function(t,e){var n="REPLACE",r=v(t,void 0,void 0,U.location);_.confirmTransitionTo(r,n,o,(function(t){if(t){var e=p(r),i=g(u+e);A()!==i&&(P=e,O(i));var o=L.indexOf(p(U.location));-1!==o&&(L[o]=e),T({action:n,location:r})}}))},go:D,goBack:function(){D(-1)},goForward:function(){D(1)},block:function(t){void 0===t&&(t=!1);var e=_.setPrompt(t);return B||(j(1),B=!0),function(){return B&&(B=!1,j(-1)),e()}},listen:function(t){var e=_.appendListener(t);return j(1),function(){j(-1),e()}}};return U}function P(t,e,n){return Math.min(Math.max(t,e),n)}function I(t){void 0===t&&(t={});var e=t,n=e.getUserConfirmation,i=e.initialEntries,o=void 0===i?["/"]:i,s=e.initialIndex,a=void 0===s?0:s,u=e.keyLength,c=void 0===u?6:u,h=m();function l(t){Object(r.a)(w,t),w.length=w.entries.length,h.notifyListeners(w.location,w.action)}function f(){return Math.random().toString(36).substr(2,c)}var d=P(a,0,o.length-1),g=o.map((function(t){return v(t,void 0,"string"===typeof t?f():t.key||f())})),y=p;function b(t){var e=P(w.index+t,0,w.entries.length-1),r=w.entries[e];h.confirmTransitionTo(r,"POP",n,(function(t){t?l({action:"POP",location:r,index:e}):l()}))}var w={length:g.length,action:"POP",location:g[d],index:d,entries:g,createHref:y,push:function(t,e){var r="PUSH",i=v(t,e,f(),w.location);h.confirmTransitionTo(i,r,n,(function(t){if(t){var e=w.index+1,n=w.entries.slice(0);n.length>e?n.splice(e,n.length-e,i):n.push(i),l({action:r,location:i,index:e,entries:n})}}))},replace:function(t,e){var r="REPLACE",i=v(t,e,f(),w.location);h.confirmTransitionTo(i,r,n,(function(t){t&&(w.entries[w.index]=i,l({action:r,location:i}))}))},go:b,goBack:function(){b(-1)},goForward:function(){b(1)},canGo:function(t){var e=w.index+t;return e>=0&&e<w.entries.length},block:function(t){return void 0===t&&(t=!1),h.setPrompt(t)},listen:function(t){return h.appendListener(t)}};return w}},function(t,e,n){"use strict";var r="Invariant failed";e.a=function(t,e){if(!t)throw new Error(r)}},function(t,e,n){"use strict";function r(t,e){return r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(t,e)}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,r(t,e)}n.d(e,"a",(function(){return i}))},,,function(t,e){function n(t){if(t)return function(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}(t)}e.Emitter=n,n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},n.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var i=0;i<r.length;i++)if((n=r[i])===e||n.fn===e){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+t],this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,e)}return this},n.prototype.emitReserved=n.prototype.emit,n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,n){"use strict";e.a="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")()},function(t,e,n){"use strict";!function(e){function n(t){return parseInt(t)===t}function r(t){if(!n(t.length))return!1;for(var e=0;e<t.length;e++)if(!n(t[e])||t[e]<0||t[e]>255)return!1;return!0}function i(t,e){if(t.buffer&&ArrayBuffer.isView(t)&&"Uint8Array"===t.name)return e&&(t=t.slice?t.slice():Array.prototype.slice.call(t)),t;if(Array.isArray(t)){if(!r(t))throw new Error("Array contains invalid value: "+t);return new Uint8Array(t)}if(n(t.length)&&r(t))return new Uint8Array(t);throw new Error("unsupported array-like object")}function o(t){return new Uint8Array(t)}function s(t,e,n,r,i){null==r&&null==i||(t=t.slice?t.slice(r,i):Array.prototype.slice.call(t,r,i)),e.set(t,n)}var a={toBytes:function(t){var e=[],n=0;for(t=encodeURI(t);n<t.length;){var r=t.charCodeAt(n++);37===r?(e.push(parseInt(t.substr(n,2),16)),n+=2):e.push(r)}return i(e)},fromBytes:function(t){for(var e=[],n=0;n<t.length;){var r=t[n];r<128?(e.push(String.fromCharCode(r)),n++):r>191&&r<224?(e.push(String.fromCharCode((31&r)<<6|63&t[n+1])),n+=2):(e.push(String.fromCharCode((15&r)<<12|(63&t[n+1])<<6|63&t[n+2])),n+=3)}return e.join("")}},u=function(){var t="0123456789abcdef";return{toBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},fromBytes:function(e){for(var n=[],r=0;r<e.length;r++){var i=e[r];n.push(t[(240&i)>>4]+t[15&i])}return n.join("")}}}(),c={16:10,24:12,32:14},h=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],l=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],f=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],d=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],p=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],v=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],g=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],m=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],y=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],b=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],w=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],x=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],_=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],T=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],E=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function S(t){for(var e=[],n=0;n<t.length;n+=4)e.push(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3]);return e}var k=function t(e){if(!(this instanceof t))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:i(e,!0)}),this._prepare()};k.prototype._prepare=function(){var t=c[this.key.length];if(null==t)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var e=0;e<=t;e++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var n,r=4*(t+1),i=this.key.length/4,o=S(this.key);for(e=0;e<i;e++)n=e>>2,this._Ke[n][e%4]=o[e],this._Kd[t-n][e%4]=o[e];for(var s,a=0,u=i;u<r;){if(s=o[i-1],o[0]^=l[s>>16&255]<<24^l[s>>8&255]<<16^l[255&s]<<8^l[s>>24&255]^h[a]<<24,a+=1,8!=i)for(e=1;e<i;e++)o[e]^=o[e-1];else{for(e=1;e<i/2;e++)o[e]^=o[e-1];s=o[i/2-1],o[i/2]^=l[255&s]^l[s>>8&255]<<8^l[s>>16&255]<<16^l[s>>24&255]<<24;for(e=i/2+1;e<i;e++)o[e]^=o[e-1]}for(e=0;e<i&&u<r;)f=u>>2,d=u%4,this._Ke[f][d]=o[e],this._Kd[t-f][d]=o[e++],u++}for(var f=1;f<t;f++)for(var d=0;d<4;d++)s=this._Kd[f][d],this._Kd[f][d]=x[s>>24&255]^_[s>>16&255]^T[s>>8&255]^E[255&s]},k.prototype.encrypt=function(t){if(16!=t.length)throw new Error("invalid plaintext size (must be 16 bytes)");for(var e=this._Ke.length-1,n=[0,0,0,0],r=S(t),i=0;i<4;i++)r[i]^=this._Ke[0][i];for(var s=1;s<e;s++){for(i=0;i<4;i++)n[i]=d[r[i]>>24&255]^p[r[(i+1)%4]>>16&255]^v[r[(i+2)%4]>>8&255]^g[255&r[(i+3)%4]]^this._Ke[s][i];r=n.slice()}var a,u=o(16);for(i=0;i<4;i++)a=this._Ke[e][i],u[4*i]=255&(l[r[i]>>24&255]^a>>24),u[4*i+1]=255&(l[r[(i+1)%4]>>16&255]^a>>16),u[4*i+2]=255&(l[r[(i+2)%4]>>8&255]^a>>8),u[4*i+3]=255&(l[255&r[(i+3)%4]]^a);return u},k.prototype.decrypt=function(t){if(16!=t.length)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var e=this._Kd.length-1,n=[0,0,0,0],r=S(t),i=0;i<4;i++)r[i]^=this._Kd[0][i];for(var s=1;s<e;s++){for(i=0;i<4;i++)n[i]=m[r[i]>>24&255]^y[r[(i+3)%4]>>16&255]^b[r[(i+2)%4]>>8&255]^w[255&r[(i+1)%4]]^this._Kd[s][i];r=n.slice()}var a,u=o(16);for(i=0;i<4;i++)a=this._Kd[e][i],u[4*i]=255&(f[r[i]>>24&255]^a>>24),u[4*i+1]=255&(f[r[(i+3)%4]>>16&255]^a>>16),u[4*i+2]=255&(f[r[(i+2)%4]>>8&255]^a>>8),u[4*i+3]=255&(f[255&r[(i+1)%4]]^a);return u};var A=function t(e){if(!(this instanceof t))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new k(e)};A.prototype.encrypt=function(t){if((t=i(t)).length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=o(t.length),n=o(16),r=0;r<t.length;r+=16)s(t,n,0,r,r+16),s(n=this._aes.encrypt(n),e,r);return e},A.prototype.decrypt=function(t){if((t=i(t)).length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=o(t.length),n=o(16),r=0;r<t.length;r+=16)s(t,n,0,r,r+16),s(n=this._aes.decrypt(n),e,r);return e};var O=function t(e,n){if(!(this instanceof t))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",n){if(16!=n.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else n=o(16);this._lastCipherblock=i(n,!0),this._aes=new k(e)};O.prototype.encrypt=function(t){if((t=i(t)).length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var e=o(t.length),n=o(16),r=0;r<t.length;r+=16){s(t,n,0,r,r+16);for(var a=0;a<16;a++)n[a]^=this._lastCipherblock[a];this._lastCipherblock=this._aes.encrypt(n),s(this._lastCipherblock,e,r)}return e},O.prototype.decrypt=function(t){if((t=i(t)).length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var e=o(t.length),n=o(16),r=0;r<t.length;r+=16){s(t,n,0,r,r+16),n=this._aes.decrypt(n);for(var a=0;a<16;a++)e[r+a]=n[a]^this._lastCipherblock[a];s(t,this._lastCipherblock,0,r,r+16)}return e};var C=function t(e,n,r){if(!(this instanceof t))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",n){if(16!=n.length)throw new Error("invalid initialation vector size (must be 16 size)")}else n=o(16);r||(r=1),this.segmentSize=r,this._shiftRegister=i(n,!0),this._aes=new k(e)};C.prototype.encrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var e,n=i(t,!0),r=0;r<n.length;r+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)n[r+o]^=e[o];s(this._shiftRegister,this._shiftRegister,0,this.segmentSize),s(n,this._shiftRegister,16-this.segmentSize,r,r+this.segmentSize)}return n},C.prototype.decrypt=function(t){if(t.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var e,n=i(t,!0),r=0;r<n.length;r+=this.segmentSize){e=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)n[r+o]^=e[o];s(this._shiftRegister,this._shiftRegister,0,this.segmentSize),s(t,this._shiftRegister,16-this.segmentSize,r,r+this.segmentSize)}return n};var P=function t(e,n){if(!(this instanceof t))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",n){if(16!=n.length)throw new Error("invalid initialation vector size (must be 16 bytes)")}else n=o(16);this._lastPrecipher=i(n,!0),this._lastPrecipherIndex=16,this._aes=new k(e)};P.prototype.encrypt=function(t){for(var e=i(t,!0),n=0;n<e.length;n++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),e[n]^=this._lastPrecipher[this._lastPrecipherIndex++];return e},P.prototype.decrypt=P.prototype.encrypt;var I=function t(e){if(!(this instanceof t))throw Error("Counter must be instanitated with `new`");0===e||e||(e=1),"number"===typeof e?(this._counter=o(16),this.setValue(e)):this.setBytes(e)};I.prototype.setValue=function(t){if("number"!==typeof t||parseInt(t)!=t)throw new Error("invalid counter value (must be an integer)");for(var e=15;e>=0;--e)this._counter[e]=t%256,t>>=8},I.prototype.setBytes=function(t){if(16!=(t=i(t,!0)).length)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=t},I.prototype.increment=function(){for(var t=15;t>=0;t--){if(255!==this._counter[t]){this._counter[t]++;break}this._counter[t]=0}};var R=function t(e,n){if(!(this instanceof t))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",n instanceof I||(n=new I(n)),this._counter=n,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new k(e)};R.prototype.encrypt=function(t){for(var e=i(t,!0),n=0;n<e.length;n++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),e[n]^=this._remainingCounter[this._remainingCounterIndex++];return e},R.prototype.decrypt=R.prototype.encrypt;var M={AES:k,Counter:I,ModeOfOperation:{ecb:A,cbc:O,cfb:C,ofb:P,ctr:R},utils:{hex:u,utf8:a},padding:{pkcs7:{pad:function(t){var e=16-(t=i(t,!0)).length%16,n=o(t.length+e);s(t,n);for(var r=t.length;r<n.length;r++)n[r]=e;return n},strip:function(t){if((t=i(t,!0)).length<16)throw new Error("PKCS#7 invalid length");var e=t[t.length-1];if(e>16)throw new Error("PKCS#7 padding byte out of range");for(var n=t.length-e,r=0;r<e;r++)if(t[n+r]!==e)throw new Error("PKCS#7 invalid padding byte");var a=o(n);return s(t,a,0,0,n),a}}},_arrayTest:{coerceArray:i,createArray:o,copyArray:s}};t.exports=M}()},,function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return a}));var r=n(39);function i(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return n.reduce((function(e,n){return t.hasOwnProperty(n)&&(e[n]=t[n]),e}),{})}var o=setTimeout,s=clearTimeout;function a(t,e){e.useNativeTimers?(t.setTimeoutFn=o.bind(r.a),t.clearTimeoutFn=s.bind(r.a)):(t.setTimeoutFn=setTimeout.bind(r.a),t.clearTimeoutFn=clearTimeout.bind(r.a))}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return w}));var r=n(23),i=n(35),o=n(6),s=n.n(o),a=n(33),u=(n(53),n(26)),c=n(55),h=n(34),l=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).history=Object(a.a)(e.props),e}return Object(i.a)(e,t),e.prototype.render=function(){return s.a.createElement(r.c,{history:this.history,children:this.props.children})},e}(s.a.Component);s.a.Component;var f=function(t,e){return"function"===typeof t?t(e):t},d=function(t,e){return"string"===typeof t?Object(a.c)(t,null,null,e):t},p=function(t){return t},v=s.a.forwardRef;"undefined"===typeof v&&(v=p);var g=v((function(t,e){var n=t.innerRef,r=t.navigate,i=t.onClick,o=Object(c.a)(t,["innerRef","navigate","onClick"]),a=o.target,h=Object(u.a)({},o,{onClick:function(t){try{i&&i(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||a&&"_self"!==a||function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)||(t.preventDefault(),r())}});return h.ref=p!==v&&e||n,s.a.createElement("a",h)}));var m=v((function(t,e){var n=t.component,i=void 0===n?g:n,o=t.replace,l=t.to,m=t.innerRef,y=Object(c.a)(t,["component","replace","to","innerRef"]);return s.a.createElement(r.e.Consumer,null,(function(t){t||Object(h.a)(!1);var n=t.history,r=d(f(l,t.location),t.location),c=r?n.createHref(r):"",g=Object(u.a)({},y,{href:c,navigate:function(){var e=f(l,t.location),r=Object(a.e)(t.location)===Object(a.e)(d(e));(o||r?n.replace:n.push)(e)}});return p!==v?g.ref=e||m:g.innerRef=m,s.a.createElement(i,g)}))})),y=function(t){return t},b=s.a.forwardRef;"undefined"===typeof b&&(b=y);var w=b((function(t,e){var n=t["aria-current"],i=void 0===n?"page":n,o=t.activeClassName,a=void 0===o?"active":o,l=t.activeStyle,p=t.className,v=t.exact,g=t.isActive,w=t.location,x=t.sensitive,_=t.strict,T=t.style,E=t.to,S=t.innerRef,k=Object(c.a)(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return s.a.createElement(r.e.Consumer,null,(function(t){t||Object(h.a)(!1);var n=w||t.location,o=d(f(E,n),n),c=o.pathname,A=c&&c.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),O=A?Object(r.f)(n.pathname,{path:A,exact:v,sensitive:x,strict:_}):null,C=!!(g?g(O,n):O),P="function"===typeof p?p(C):p,I="function"===typeof T?T(C):T;C&&(P=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter((function(t){return t})).join(" ")}(P,a),I=Object(u.a)({},I,l));var R=Object(u.a)({"aria-current":C&&i||null,className:P,style:I,to:o},k);return y!==b?R.ref=e||S:R.innerRef=S,s.a.createElement(m,R)}))}))},function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"b",(function(){return a}));var r=n(39),i="function"===typeof Promise&&"function"===typeof Promise.resolve?function(t){return Promise.resolve().then(t)}:function(t,e){return e(t,0)},o=r.a.WebSocket||r.a.MozWebSocket,s=!0,a="arraybuffer"},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=n(64),i=n(131);function o(t,e){return 55296===(64512&t.charCodeAt(e))&&(!(e<0||e+1>=t.length)&&56320===(64512&t.charCodeAt(e+1)))}function s(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function a(t){return 1===t.length?"0"+t:t}function u(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}e.inherits=i,e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if("string"===typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!==0&&(t="0"+t),i=0;i<t.length;i+=2)n.push(parseInt(t[i]+t[i+1],16))}else for(var r=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?n[r++]=s:s<2048?(n[r++]=s>>6|192,n[r++]=63&s|128):o(t,i)?(s=65536+((1023&s)<<10)+(1023&t.charCodeAt(++i)),n[r++]=s>>18|240,n[r++]=s>>12&63|128,n[r++]=s>>6&63|128,n[r++]=63&s|128):(n[r++]=s>>12|224,n[r++]=s>>6&63|128,n[r++]=63&s|128)}else for(i=0;i<t.length;i++)n[i]=0|t[i];return n},e.toHex=function(t){for(var e="",n=0;n<t.length;n++)e+=a(t[n].toString(16));return e},e.htonl=s,e.toHex32=function(t,e){for(var n="",r=0;r<t.length;r++){var i=t[r];"little"===e&&(i=s(i)),n+=u(i.toString(16))}return n},e.zero2=a,e.zero8=u,e.join32=function(t,e,n,i){var o=n-e;r(o%4===0);for(var s=new Array(o/4),a=0,u=e;a<s.length;a++,u+=4){var c;c="big"===i?t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3]:t[u+3]<<24|t[u+2]<<16|t[u+1]<<8|t[u],s[a]=c>>>0}return s},e.split32=function(t,e){for(var n=new Array(4*t.length),r=0,i=0;r<t.length;r++,i+=4){var o=t[r];"big"===e?(n[i]=o>>>24,n[i+1]=o>>>16&255,n[i+2]=o>>>8&255,n[i+3]=255&o):(n[i+3]=o>>>24,n[i+2]=o>>>16&255,n[i+1]=o>>>8&255,n[i]=255&o)}return n},e.rotr32=function(t,e){return t>>>e|t<<32-e},e.rotl32=function(t,e){return t<<e|t>>>32-e},e.sum32=function(t,e){return t+e>>>0},e.sum32_3=function(t,e,n){return t+e+n>>>0},e.sum32_4=function(t,e,n,r){return t+e+n+r>>>0},e.sum32_5=function(t,e,n,r,i){return t+e+n+r+i>>>0},e.sum64=function(t,e,n,r){var i=t[e],o=r+t[e+1]>>>0,s=(o<r?1:0)+n+i;t[e]=s>>>0,t[e+1]=o},e.sum64_hi=function(t,e,n,r){return(e+r>>>0<e?1:0)+t+n>>>0},e.sum64_lo=function(t,e,n,r){return e+r>>>0},e.sum64_4_hi=function(t,e,n,r,i,o,s,a){var u=0,c=e;return u+=(c=c+r>>>0)<e?1:0,u+=(c=c+o>>>0)<o?1:0,t+n+i+s+(u+=(c=c+a>>>0)<a?1:0)>>>0},e.sum64_4_lo=function(t,e,n,r,i,o,s,a){return e+r+o+a>>>0},e.sum64_5_hi=function(t,e,n,r,i,o,s,a,u,c){var h=0,l=e;return h+=(l=l+r>>>0)<e?1:0,h+=(l=l+o>>>0)<o?1:0,h+=(l=l+a>>>0)<a?1:0,t+n+i+s+u+(h+=(l=l+c>>>0)<c?1:0)>>>0},e.sum64_5_lo=function(t,e,n,r,i,o,s,a,u,c){return e+r+o+a+c>>>0},e.rotr64_hi=function(t,e,n){return(e<<32-n|t>>>n)>>>0},e.rotr64_lo=function(t,e,n){return(t<<32-n|e>>>n)>>>0},e.shr64_hi=function(t,e,n){return t>>>n},e.shr64_lo=function(t,e,n){return(t<<32-n|e>>>n)>>>0}},function(t,e,n){"use strict";n.d(e,"e",(function(){return w})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return y})),n.d(e,"a",(function(){return g})),n.d(e,"b",(function(){return b}));var r=Object.create(null);r.open="0",r.close="1",r.ping="2",r.pong="3",r.message="4",r.upgrade="5",r.noop="6";var i=Object.create(null);Object.keys(r).forEach((function(t){i[r[t]]=t}));for(var o={type:"error",data:"parser error"},s="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),a="function"===typeof ArrayBuffer,u=function(t,e){var n=new FileReader;return n.onload=function(){var t=n.result.split(",")[1];e("b"+t)},n.readAsDataURL(t)},c=function(t,e,n){var i,o=t.type,c=t.data;return s&&c instanceof Blob?e?n(c):u(c,n):a&&(c instanceof ArrayBuffer||(i=c,"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer))?e?n(c):u(new Blob([c]),n):n(r[o]+(c||""))},h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l="undefined"===typeof Uint8Array?[]:new Uint8Array(256),f=0;f<h.length;f++)l[h.charCodeAt(f)]=f;var d="function"===typeof ArrayBuffer,p=function(t,e){if(d){var n=function(t){var e,n,r,i,o,s=.75*t.length,a=t.length,u=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var c=new ArrayBuffer(s),h=new Uint8Array(c);for(e=0;e<a;e+=4)n=l[t.charCodeAt(e)],r=l[t.charCodeAt(e+1)],i=l[t.charCodeAt(e+2)],o=l[t.charCodeAt(e+3)],h[u++]=n<<2|r>>4,h[u++]=(15&r)<<4|i>>2,h[u++]=(3&i)<<6|63&o;return c}(t);return v(n,e)}return{base64:!0,data:t}},v=function(t,e){return"blob"===e&&t instanceof ArrayBuffer?new Blob([t]):t},g=function(t,e){if("string"!==typeof t)return{type:"message",data:v(t,e)};var n=t.charAt(0);return"b"===n?{type:"message",data:p(t.substring(1),e)}:i[n]?t.length>1?{type:i[n],data:t.substring(1)}:{type:i[n]}:o},m=String.fromCharCode(30),y=function(t,e){var n=t.length,r=new Array(n),i=0;t.forEach((function(t,o){c(t,!1,(function(t){r[o]=t,++i===n&&e(r.join(m))}))}))},b=function(t,e){for(var n=t.split(m),r=[],i=0;i<n.length;i++){var o=g(n[i],e);if(r.push(o),"error"===o.type)break}return r},w=4},,,function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(66);function i(t,e){if(t){if("string"===typeof t)return Object(r.a)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(r.a)(t,e):void 0}}},function(t,e,n){!function(t){"use strict";function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,s){n(i=t[e].apply(t,r)).then(o,s)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new h(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function s(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function a(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function h(t,e){this._cursor=t,this._request=e}function l(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function d(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function p(t){this._db=t}function v(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new d(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new p(t)}))}function g(t){return r(indexedDB,"deleteDatabase",[t])}o(c,"_index",["name","keyPath","multiEntry","unique"]),s(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(h,"_cursor",["direction","key","primaryKey","value"]),s(h,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(h.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new h(t,e._request)}))}))})})),l.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},l.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(l,"_store",["name","keyPath","indexNames","autoIncrement"]),s(l,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(l,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(l,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new l(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),a(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new l(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),a(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[l,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,l].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=v,t.deleteDb=g,Object.defineProperty(t,"__esModule",{value:!0})}(e)},,function(t,e,n){t.exports=n(148)()},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}n.d(e,"a",(function(){return r}))},,function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var r=n(7),i=n(8),o=n(11),s=n(18),a=n(16),u=n(9),c=n(10),h=n(47),l=n(38),f=n(42),d=function(t){Object(u.a)(n,t);var e=Object(c.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this)).writable=!1,Object(f.a)(Object(o.a)(i),t),i.opts=t,i.query=t.query,i.readyState="",i.socket=t.socket,i}return Object(i.a)(n,[{key:"onError",value:function(t,e){var r=new Error(t);return r.type="TransportError",r.description=e,Object(s.a)(Object(a.a)(n.prototype),"emit",this).call(this,"error",r),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(t){"open"===this.readyState&&this.write(t)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,Object(s.a)(Object(a.a)(n.prototype),"emit",this).call(this,"open")}},{key:"onData",value:function(t){var e=Object(h.a)(t,this.socket.binaryType);this.onPacket(e)}},{key:"onPacket",value:function(t){Object(s.a)(Object(a.a)(n.prototype),"emit",this).call(this,"packet",t)}},{key:"onClose",value:function(){this.readyState="closed",Object(s.a)(Object(a.a)(n.prototype),"emit",this).call(this,"close")}}]),n}(l.Emitter)},function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(120)},function(t,e,n){"use strict";function r(t,e){return r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},r(t,e)}n.d(e,"a",(function(){return r}))},function(t,e){e.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},e.decode=function(t){for(var e={},n=t.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}},,,,function(t,e){function n(t,e){if(!t)throw new Error(e||"Assertion failed")}t.exports=n,n.equal=function(t,e,n){if(t!=e)throw new Error(n||"Assertion failed: "+t+" != "+e)}},function(t,e,n){"use strict";var r=n(46),i=n(64);function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=o,o.prototype.update=function(t,e){if(t=r.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var n=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-n,t.length),0===this.pending.length&&(this.pending=null),t=r.join32(t,0,t.length-n,this.endian);for(var i=0;i<t.length;i+=this._delta32)this._update(t,i,i+this._delta32)}return this},o.prototype.digest=function(t){return this.update(this._pad()),i(null===this.pending),this._digest(t)},o.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,n=e-(t+this.padLength)%e,r=new Array(n+this.padLength);r[0]=128;for(var i=1;i<n;i++)r[i]=0;if(t<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)r[i++]=0;r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=t>>>24&255,r[i++]=t>>>16&255,r[i++]=t>>>8&255,r[i++]=255&t}else for(r[i++]=255&t,r[i++]=t>>>8&255,r[i++]=t>>>16&255,r[i++]=t>>>24&255,r[i++]=0,r[i++]=0,r[i++]=0,r[i++]=0,o=8;o<this.padLength;o++)r[i++]=0;return r}},function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.d(e,"a",(function(){return r}))},function(t,e,n){var r,i=n(169);r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1528)}([function(t,e){function n(t,e,n){var r=n?t[e]:Object.getOwnPropertyDescriptor(t,e);return!n&&r.value&&"object"===typeof r.value&&(r=r.value),!(!r||!function(t){return!!t.get&&"function"===typeof t.get||!!t.set&&"function"===typeof t.set}(r))&&("undefined"===typeof r.enumerable&&(r.enumerable=!0),"undefined"===typeof r.configurable&&(r.configurable=!0),r)}function r(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!!n&&(n.value&&"object"===typeof n.value&&(n=n.value),!1===n.configurable)}function i(t,e,i,o){for(var a in e)if(e.hasOwnProperty(a)){var u=n(e,a,i);if(!1!==u){if(r((o||t).prototype,a)){if(s.ignoreFinals)continue;throw new Error("cannot override final property '"+a+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(t.prototype,a,u)}else t.prototype[a]=e[a]}}function o(t,e){if(e){Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++)i(t,e[n].prototype||e[n])}}function s(t){var e,n;if(t||(t={}),t.initialize){if("function"!==typeof t.initialize)throw new Error("initialize must be a function");e=t.initialize,delete t.initialize}else if(t.Extends){var r=t.Extends;e=function(){r.apply(this,arguments)}}else e=function(){};t.Extends?(e.prototype=Object.create(t.Extends.prototype),e.prototype.constructor=e,n=t.Extends,delete t.Extends):e.prototype.constructor=e;var s=null;return t.Mixins&&(s=t.Mixins,delete t.Mixins),o(e,s),i(e,t,!0,n),e}s.extend=i,s.mixin=o,s.ignoreFinals=!1,t.exports=s},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e,n){var r=typeof t;return t&&"number"!==r&&"string"!==r&&t.hasOwnProperty(e)&&void 0!==t[e]?t[e]:n}},function(t,e,n){var r=n(0),i=n(124),o=new r({initialize:function(t,e){this.x=0,this.y=0,"object"===typeof t?(this.x=t.x||0,this.y=t.y||0):(void 0===e&&(e=t),this.x=t||0,this.y=e||0)},clone:function(){return new o(this.x,this.y)},copy:function(t){return this.x=t.x||0,this.y=t.y||0,this},setFromObject:function(t){return this.x=t.x||0,this.y=t.y||0,this},set:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setTo:function(t,e){return this.set(t,e)},setToPolar:function(t,e){return null==e&&(e=1),this.x=Math.cos(t)*e,this.y=Math.sin(t)*e,this},equals:function(t){return this.x===t.x&&this.y===t.y},fuzzyEquals:function(t,e){return i(this.x,t.x,e)&&i(this.y,t.y,e)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},setAngle:function(t){return this.setToPolar(t,this.length())},add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(t){var e=t.x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},distanceSq:function(t){var e=t.x-this.x,n=t.y-this.y;return e*e+n*n},length:function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},setLength:function(t){return this.normalize().scale(t)},lengthSq:function(){var t=this.x,e=this.y;return t*t+e*e},normalize:function(){var t=this.x,e=this.y,n=t*t+e*e;return n>0&&(n=1/Math.sqrt(n),this.x=t*n,this.y=e*n),this},normalizeRightHand:function(){var t=this.x;return this.x=-1*this.y,this.y=t,this},normalizeLeftHand:function(){var t=this.x;return this.x=this.y,this.y=-1*t,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lerp:function(t,e){void 0===e&&(e=0);var n=this.x,r=this.y;return this.x=n+e*(t.x-n),this.y=r+e*(t.y-r),this},transformMat3:function(t){var e=this.x,n=this.y,r=t.val;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this},transformMat4:function(t){var e=this.x,n=this.y,r=t.val;return this.x=r[0]*e+r[4]*n+r[12],this.y=r[1]*e+r[5]*n+r[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(t){var e=this.length();return e&&e>t&&this.scale(t/e),this},reflect:function(t){return t=t.clone().normalize(),this.subtract(t.scale(2*this.dot(t)))},mirror:function(t){return this.reflect(t).negate()},rotate:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e*this.x-n*this.y,n*this.x+e*this.y)}});o.ZERO=new o,o.RIGHT=new o(1,0),o.LEFT=new o(-1,0),o.UP=new o(0,-1),o.DOWN=new o(0,1),o.ONE=new o(1,1),t.exports=o},function(t,e,n){var r=n(0),i=n(56),o=new r({initialize:function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.type=i.POINT,this.x=t,this.y=e},setTo:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this}});t.exports=o},function(t,e,n){var r=n(0),i=n(24),o=n(20),s=new r({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(o.BOOT,this.boot,this),this.events.on(o.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},existing:function(t){return(t.renderCanvas||t.renderWebGL)&&this.displayList.add(t),t.preUpdate&&this.updateList.add(t),t},shutdown:function(){this.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});s.register=function(t,e){s.prototype.hasOwnProperty(t)||(s.prototype[t]=e)},s.remove=function(t){s.prototype.hasOwnProperty(t)&&delete s.prototype[t]},i.register("GameObjectFactory",s,"add"),t.exports=s},function(t,e){t.exports=function(t,e,n){if(t&&"number"!==typeof t){if(t.hasOwnProperty(e))return t[e];if(-1!==e.indexOf(".")){for(var r=e.split("."),i=t,o=n,s=0;s<r.length;s++){if(!i.hasOwnProperty(r[s])){o=n;break}o=i[r[s]],i=i[r[s]]}return o}return n}return n}},function(t,e){t.exports=function(t){if("object"!==typeof t||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0}},function(t,e){var n={},r={install:function(t){for(var e in n)t[e]=n[e]},register:function(t,e){n[t]=e},destroy:function(){n={}}};t.exports=r},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,i="~";function o(){}function s(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function a(t,e,n,r,o){if("function"!==typeof n)throw new TypeError("The listener must be a function");var a=new s(n,r||t,o),u=i?i+e:e;return t._events[u]?t._events[u].fn?t._events[u]=[t._events[u],a]:t._events[u].push(a):(t._events[u]=a,t._eventsCount++),t}function u(t,e){0===--t._eventsCount?t._events=new o:delete t._events[e]}function c(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(i=!1)),c.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(i?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},c.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var r=0,o=n.length,s=new Array(o);r<o;r++)s[r]=n[r].fn;return s},c.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},c.prototype.emit=function(t,e,n,r,o,s){var a=i?i+t:t;if(!this._events[a])return!1;var u,c,h=this._events[a],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,n),!0;case 4:return h.fn.call(h.context,e,n,r),!0;case 5:return h.fn.call(h.context,e,n,r,o),!0;case 6:return h.fn.call(h.context,e,n,r,o,s),!0}for(c=1,u=new Array(l-1);c<l;c++)u[c-1]=arguments[c];h.fn.apply(h.context,u)}else{var f,d=h.length;for(c=0;c<d;c++)switch(h[c].once&&this.removeListener(t,h[c].fn,void 0,!0),l){case 1:h[c].fn.call(h[c].context);break;case 2:h[c].fn.call(h[c].context,e);break;case 3:h[c].fn.call(h[c].context,e,n);break;case 4:h[c].fn.call(h[c].context,e,n,r);break;default:if(!u)for(f=1,u=new Array(l-1);f<l;f++)u[f-1]=arguments[f];h[c].fn.apply(h[c].context,u)}}return!0},c.prototype.on=function(t,e,n){return a(this,t,e,n,!1)},c.prototype.once=function(t,e,n){return a(this,t,e,n,!0)},c.prototype.removeListener=function(t,e,n,r){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return u(this,o),this;var s=this._events[o];if(s.fn)s.fn!==e||r&&!s.once||n&&s.context!==n||u(this,o);else{for(var a=0,c=[],h=s.length;a<h;a++)(s[a].fn!==e||r&&!s[a].once||n&&s[a].context!==n)&&c.push(s[a]);c.length?this._events[o]=1===c.length?c[0]:c:u(this,o)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&u(this,e)):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,t.exports=c},function(t,e,n){var r=n(0),i=n(57),o=n(171),s=n(306),a=n(56),u=n(47),c=n(174),h=new r({initialize:function(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.type=a.RECTANGLE,this.x=t,this.y=e,this.width=n,this.height=r},contains:function(t,e){return i(this,t,e)},getPoint:function(t,e){return o(this,t,e)},getPoints:function(t,e,n){return s(this,t,e,n)},getRandomPoint:function(t){return c(this,t)},setTo:function(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(t){return void 0===t&&(t=new u),t.setTo(this.x,this.y,this.right,this.y),t},getLineB:function(t){return void 0===t&&(t=new u),t.setTo(this.right,this.y,this.right,this.bottom),t},getLineC:function(t){return void 0===t&&(t=new u),t.setTo(this.right,this.bottom,this.x,this.bottom),t},getLineD:function(t){return void 0===t&&(t=new u),t.setTo(this.x,this.bottom,this.x,this.y),t},left:{get:function(){return this.x},set:function(t){t>=this.right?this.width=0:this.width=this.right-t,this.x=t}},right:{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}},top:{get:function(){return this.y},set:function(t){t>=this.bottom?this.height=0:this.height=this.bottom-t,this.y=t}},bottom:{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=h},function(t,e,n){t.exports={Alpha:n(607),AlphaSingle:n(303),BlendMode:n(304),ComputedSize:n(608),Crop:n(609),Depth:n(305),Flip:n(610),GetBounds:n(611),Mask:n(309),Origin:n(632),PathFollower:n(633),Pipeline:n(167),ScrollFactor:n(312),Size:n(634),Texture:n(635),TextureCrop:n(636),Tint:n(637),ToJSON:n(176),Transform:n(313),TransformMatrix:n(25),Visible:n(314)}},function(t,e){function n(t){for(var e="",n=0;n<t;++n)n>0&&(e+="\nelse "),n<t-1&&(e+="if(test == "+n+".0){}");return e}t.exports={getTintFromFloats:function(t,e,n,r){return((255&(255*r|0))<<24|(255&(255*t|0))<<16|(255&(255*e|0))<<8|255&(255*n|0))>>>0},getTintAppendFloatAlpha:function(t,e){return((255&(255*e|0))<<24|t)>>>0},getTintAppendFloatAlphaAndSwap:function(t,e){return((255&(255*e|0))<<24|(255&(0|t))<<16|(255&(t>>8|0))<<8|255&(t>>16|0))>>>0},getFloatsFromUintRGB:function(t){return[(255&(t>>16|0))/255,(255&(t>>8|0))/255,(255&(0|t))/255]},checkShaderMax:function(t,e){e&&-1!==e||(e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS));for(var r=t.createShader(t.FRAGMENT_SHADER),i=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");;){var o=i.replace(/%forloop%/gi,n(e));if(t.shaderSource(r,o),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS))break;e=e/2|0}return e},parseFragmentShaderMaxTextures:function(t,e){if(!t)return"";for(var n="",r=0;r<e;r++)r>0&&(n+="\n\telse "),r<e-1&&(n+="if (outTexId < "+r+".5)"),n+="\n\t{",n+="\n\t\ttexture = texture2D(uMainSampler["+r+"], outTexCoord);",n+="\n\t}";return(t=t.replace(/%count%/gi,e.toString())).replace(/%forloop%/gi,n)}}},function(t,e,n){var r=n(193),i=n(6);t.exports=function(t,e,n){var o=i(t,e,null);if(null===o)return n;if(Array.isArray(o))return r.RND.pick(o);if("object"===typeof o){if(o.hasOwnProperty("randInt"))return r.RND.integerInRange(o.randInt[0],o.randInt[1]);if(o.hasOwnProperty("randFloat"))return r.RND.realInRange(o.randFloat[0],o.randFloat[1])}else if("function"===typeof o)return o(e);return o}},function(t,e){var n={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};t.exports=n},function(t,e,n){var r=n(0),i=n(176),o=n(101),s=n(9),a=n(75),u=n(20),c=new r({Extends:s,initialize:function(t,e){s.call(this),this.scene=t,this.displayList=null,this.type=e,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(a.ADDED_TO_SCENE,this.addedToScene,this),this.on(a.REMOVED_FROM_SCENE,this.removedFromScene,this),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new o(this)),this},setData:function(t,e){return this.data||(this.data=new o(this)),this.data.set(t,e),this},incData:function(t,e){return this.data||(this.data=new o(this)),this.data.inc(t,e),this},toggleData:function(t){return this.data||(this.data=new o(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new o(this)),this.data.get(t)},setInteractive:function(t,e,n){return this.scene.sys.input.enable(this,t,e,n),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return i(this)},willRender:function(t){return!(c.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,e=this.parentContainer,n=[];e&&(n.unshift(e.getIndex(t)),t=e,e.parentContainer);)e=e.parentContainer;return this.displayList?n.unshift(this.displayList.getIndex(t)):n.unshift(this.scene.sys.displayList.getIndex(t)),n},addToDisplayList:function(t){return void 0===t&&(t=this.scene.sys.displayList),this.displayList&&this.displayList!==t&&this.removeFromDisplayList(),t.exists(this)||(this.displayList=t,t.add(this,!0),t.queueDepthSort(),this.emit(a.ADDED_TO_SCENE,this,this.scene),t.events.emit(u.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var t=this.displayList||this.scene.sys.displayList;return t.exists(this)&&(t.remove(this,!0),t.queueDepthSort(),this.displayList=null,this.emit(a.REMOVED_FROM_SCENE,this,this.scene),t.events.emit(u.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(t){this.scene&&!this.ignoreDestroy&&(void 0===t&&(t=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(a.DESTROY,this,t),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});c.RENDER_MASK=15,t.exports=c},function(t,e,n){var r=n(0),i=n(24),o=n(20),s=new r({initialize:function(t){this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.displayList,this.updateList,this.events.once(o.BOOT,this.boot,this),this.events.on(o.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(o.DESTROY,this.destroy,this)},start:function(){this.events.once(o.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});s.register=function(t,e){s.prototype.hasOwnProperty(t)||(s.prototype[t]=e)},s.remove=function(t){s.prototype.hasOwnProperty(t)&&delete s.prototype[t]},i.register("GameObjectCreator",s,"make"),t.exports=s},function(t,e,n){var r=n(7);t.exports=function t(){var e,n,i,o,s,a,u=arguments[0]||{},c=1,h=arguments.length,l=!1;for("boolean"===typeof u&&(l=u,u=arguments[1]||{},c=2),h===c&&(u=this,--c);c<h;c++)if(null!=(e=arguments[c]))for(n in e)i=u[n],u!==(o=e[n])&&(l&&o&&(r(o)||(s=Array.isArray(o)))?(s?(s=!1,a=i&&Array.isArray(i)?i:[]):a=i&&r(i)?i:{},u[n]=t(l,a,o)):void 0!==o&&(u[n]=o));return u}},function(t,e){t.exports=function(t,e,n){return Math.max(e,Math.min(n,t))}},function(t,e,n){var r=n(25),i=new r,o=new r,s=new r,a={camera:i,sprite:o,calc:s};t.exports=function(t,e,n){var r=i,u=o,c=s;return u.applyITRS(t.x,t.y,t.rotation,t.scaleX,t.scaleY),r.copyFrom(e.matrix),n?(r.multiplyWithOffset(n,-e.scrollX*t.scrollFactorX,-e.scrollY*t.scrollFactorY),u.e=t.x,u.f=t.y):(u.e-=e.scrollX*t.scrollFactorX,u.f-=e.scrollY*t.scrollFactorY),r.multiply(u,c),a}},function(t,e,n){t.exports={ADDED_TO_SCENE:n(656),BOOT:n(657),CREATE:n(658),DESTROY:n(659),PAUSE:n(660),POST_UPDATE:n(661),PRE_RENDER:n(662),PRE_UPDATE:n(663),READY:n(664),REMOVED_FROM_SCENE:n(665),RENDER:n(666),RESUME:n(667),SHUTDOWN:n(668),SLEEP:n(669),START:n(670),TRANSITION_COMPLETE:n(671),TRANSITION_INIT:n(672),TRANSITION_OUT:n(673),TRANSITION_START:n(674),TRANSITION_WAKE:n(675),UPDATE:n(676),WAKE:n(677)}},function(t,e){t.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(t,e,n){t.exports={BLUR:n(612),BOOT:n(613),CONTEXT_LOST:n(614),CONTEXT_RESTORED:n(615),DESTROY:n(616),FOCUS:n(617),HIDDEN:n(618),PAUSE:n(619),POST_RENDER:n(620),POST_STEP:n(621),PRE_RENDER:n(622),PRE_STEP:n(623),READY:n(624),RESUME:n(625),STEP:n(626),VISIBLE:n(627)}},function(t,e,n){var r=n(0),i=n(21),o=n(95),s=n(2),a=n(155),u=n(240),c=n(517),h=n(156),l=new r({initialize:function(t,e){this.loader=t,this.cache=s(e,"cache",!1),this.type=s(e,"type",!1),this.key=s(e,"key",!1);var n=this.key;if(t.prefix&&""!==t.prefix&&(this.key=t.prefix+n),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var r=s(e,"url");void 0===r?r=t.path+n+"."+s(e,"extension",""):"string"!==typeof r||r.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)||(r=t.path+r),this.url=r,this.src="",this.xhrSettings=h(s(e,"responseType",void 0)),s(e,"xhrSettings",!1)&&(this.xhrSettings=u(this.xhrSettings,s(e,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"===typeof this.url?i.FILE_POPULATED:i.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=s(e,"config",{}),this.multiFile,this.linkFile},setLink:function(t){this.linkFile=t,t.linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===i.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=i.FILE_LOADING,this.src=a(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=c(this,this.loader.xhr))},onLoad:function(t,e){var n=t.responseURL&&(0===t.responseURL.indexOf("file://")||0===t.responseURL.indexOf("capacitor://"))&&0===e.target.status,r=!(e.target&&200!==e.target.status)||n;4===t.readyState&&t.status>=400&&t.status<=599&&(r=!1),this.state=i.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,r)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(t){t.lengthComputable&&(this.bytesLoaded=t.loaded,this.bytesTotal=t.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(o.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=i.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=i.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=i.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(t){void 0===t&&(t=this.data);var e=this.key,n=this.type;this.loader.emit(o.FILE_COMPLETE,e,n,t),this.loader.emit(o.FILE_KEY_COMPLETE+n+"-"+e,e,n,t),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});l.createObjectURL=function(t,e,n){if("function"===typeof URL)t.src=URL.createObjectURL(e);else{var r=new FileReader;r.onload=function(){t.removeAttribute("crossOrigin"),t.src="data:"+(e.type||n)+";base64,"+r.result.split(",")[1]},r.onerror=t.onerror,r.readAsDataURL(e)}},l.revokeObjectURL=function(t){"function"===typeof URL&&URL.revokeObjectURL(t.src)},t.exports=l},function(t,e){var n={},r={},i={register:function(t,e,r,i){void 0===i&&(i=!1),n[t]={plugin:e,mapping:r,custom:i}},registerCustom:function(t,e,n,i){r[t]={plugin:e,mapping:n,data:i}},hasCore:function(t){return n.hasOwnProperty(t)},hasCustom:function(t){return r.hasOwnProperty(t)},getCore:function(t){return n[t]},getCustom:function(t){return r[t]},getCustomClass:function(t){return r.hasOwnProperty(t)?r[t].plugin:null},remove:function(t){n.hasOwnProperty(t)&&delete n[t]},removeCustom:function(t){r.hasOwnProperty(t)&&delete r[t]},destroyCorePlugins:function(){for(var t in n)n.hasOwnProperty(t)&&delete n[t]},destroyCustomPlugins:function(){for(var t in r)r.hasOwnProperty(t)&&delete r[t]}};t.exports=i},function(t,e,n){var r=n(0),i=n(14),o=n(3),s=new r({initialize:function(t,e,n,r,i,o){void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=0),this.matrix=new Float32Array([t,e,n,r,i,o,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(t){this.matrix[0]=t}},b:{get:function(){return this.matrix[1]},set:function(t){this.matrix[1]=t}},c:{get:function(){return this.matrix[2]},set:function(t){this.matrix[2]=t}},d:{get:function(){return this.matrix[3]},set:function(t){this.matrix[3]=t}},e:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},f:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},tx:{get:function(){return this.matrix[4]},set:function(t){this.matrix[4]=t}},ty:{get:function(){return this.matrix[5]},set:function(t){this.matrix[5]=t}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var t=this.matrix,e=t[0],n=t[1],r=t[2],o=t[3];return e||n?n>0?Math.acos(e/this.scaleX):-Math.acos(e/this.scaleX):r||o?i.TAU-(o>0?Math.acos(-r/this.scaleY):-Math.acos(r/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var t=this.matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,this},translate:function(t,e){var n=this.matrix;return n[4]=n[0]*t+n[2]*e+n[4],n[5]=n[1]*t+n[3]*e+n[5],this},scale:function(t,e){var n=this.matrix;return n[0]*=t,n[1]*=t,n[2]*=e,n[3]*=e,this},rotate:function(t){var e=Math.sin(t),n=Math.cos(t),r=this.matrix,i=r[0],o=r[1],s=r[2],a=r[3];return r[0]=i*n+s*e,r[1]=o*n+a*e,r[2]=i*-e+s*n,r[3]=o*-e+a*n,this},multiply:function(t,e){var n=this.matrix,r=t.matrix,i=n[0],o=n[1],s=n[2],a=n[3],u=n[4],c=n[5],h=r[0],l=r[1],f=r[2],d=r[3],p=r[4],v=r[5],g=void 0===e?this:e;return g.a=h*i+l*s,g.b=h*o+l*a,g.c=f*i+d*s,g.d=f*o+d*a,g.e=p*i+v*s+u,g.f=p*o+v*a+c,g},multiplyWithOffset:function(t,e,n){var r=this.matrix,i=t.matrix,o=r[0],s=r[1],a=r[2],u=r[3],c=e*o+n*a+r[4],h=e*s+n*u+r[5],l=i[0],f=i[1],d=i[2],p=i[3],v=i[4],g=i[5];return r[0]=l*o+f*a,r[1]=l*s+f*u,r[2]=d*o+p*a,r[3]=d*s+p*u,r[4]=v*o+g*a+c,r[5]=v*s+g*u+h,this},transform:function(t,e,n,r,i,o){var s=this.matrix,a=s[0],u=s[1],c=s[2],h=s[3],l=s[4],f=s[5];return s[0]=t*a+e*c,s[1]=t*u+e*h,s[2]=n*a+r*c,s[3]=n*u+r*h,s[4]=i*a+o*c+l,s[5]=i*u+o*h+f,this},transformPoint:function(t,e,n){void 0===n&&(n={x:0,y:0});var r=this.matrix,i=r[0],o=r[1],s=r[2],a=r[3],u=r[4],c=r[5];return n.x=t*i+e*s+u,n.y=t*o+e*a+c,n},invert:function(){var t=this.matrix,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=e*i-n*r;return t[0]=i/a,t[1]=-n/a,t[2]=-r/a,t[3]=e/a,t[4]=(r*s-i*o)/a,t[5]=-(e*s-n*o)/a,this},copyFrom:function(t){var e=this.matrix;return e[0]=t.a,e[1]=t.b,e[2]=t.c,e[3]=t.d,e[4]=t.e,e[5]=t.f,this},copyFromArray:function(t){var e=this.matrix;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],this},copyToContext:function(t){var e=this.matrix;return t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t},setToContext:function(t){var e=this.matrix;return t.setTransform(e[0],e[1],e[2],e[3],e[4],e[5]),t},copyToArray:function(t){var e=this.matrix;return void 0===t?t=[e[0],e[1],e[2],e[3],e[4],e[5]]:(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5]),t},setTransform:function(t,e,n,r,i,o){var s=this.matrix;return s[0]=t,s[1]=e,s[2]=n,s[3]=r,s[4]=i,s[5]=o,this},decomposeMatrix:function(){var t=this.decomposedMatrix,e=this.matrix,n=e[0],r=e[1],i=e[2],o=e[3],s=n*o-r*i;if(t.translateX=e[4],t.translateY=e[5],n||r){var a=Math.sqrt(n*n+r*r);t.rotation=r>0?Math.acos(n/a):-Math.acos(n/a),t.scaleX=a,t.scaleY=s/a}else if(i||o){var u=Math.sqrt(i*i+o*o);t.rotation=.5*Math.PI-(o>0?Math.acos(-i/u):-Math.acos(i/u)),t.scaleX=s/u,t.scaleY=u}else t.rotation=0,t.scaleX=0,t.scaleY=0;return t},applyITRS:function(t,e,n,r,i){var o=this.matrix,s=Math.sin(n),a=Math.cos(n);return o[4]=t,o[5]=e,o[0]=a*r,o[1]=s*r,o[2]=-s*i,o[3]=a*i,this},applyInverse:function(t,e,n){void 0===n&&(n=new o);var r=this.matrix,i=r[0],s=r[1],a=r[2],u=r[3],c=r[4],h=r[5],l=1/(i*u+a*-s);return n.x=u*l*t+-a*l*e+(h*a-c*u)*l,n.y=i*l*e+-s*l*t+(-h*i+c*s)*l,n},getX:function(t,e){return t*this.a+e*this.c+this.e},getY:function(t,e){return t*this.b+e*this.d+this.f},getXRound:function(t,e,n){var r=this.getX(t,e);return n&&(r=Math.round(r)),r},getYRound:function(t,e,n){var r=this.getY(t,e);return n&&(r=Math.round(r)),r},getCSSMatrix:function(){var t=this.matrix;return"matrix("+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});t.exports=s},function(t,e,n){var r=n(2);t.exports=function(t,e,n,i,o,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=s.width),void 0===i&&(i=s.height),o||(o={});var a=r(o,"isNotEmpty",!1),u=r(o,"isColliding",!1),c=r(o,"hasInterestingFace",!1);t<0&&(n+=t,t=0),e<0&&(i+=e,e=0),t+n>s.width&&(n=Math.max(s.width-t,0)),e+i>s.height&&(i=Math.max(s.height-e,0));for(var h=[],l=e;l<e+i;l++)for(var f=t;f<t+n;f++){var d=s.data[l][f];if(null!==d){if(a&&-1===d.index)continue;if(u&&!d.collides)continue;if(c&&!d.hasInterestingFace)continue;h.push(d)}}return h}},function(t,e){t.exports=function(t,e,n,r,i,o){var s;void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=1);var a=0,u=t.length;if(1===o)for(s=i;s<u;s++)t[s][e]=n+a*r,a++;else for(s=i;s>=0;s--)t[s][e]=n+a*r,a++;return t}},function(t,e,n){var r=n(35),i=n(13);t.exports=function(t,e,n){e.x=i(n,"x",0),e.y=i(n,"y",0),e.depth=i(n,"depth",0),e.flipX=i(n,"flipX",!1),e.flipY=i(n,"flipY",!1);var o=i(n,"scale",null);"number"===typeof o?e.setScale(o):null!==o&&(e.scaleX=i(o,"x",1),e.scaleY=i(o,"y",1));var s=i(n,"scrollFactor",null);"number"===typeof s?e.setScrollFactor(s):null!==s&&(e.scrollFactorX=i(s,"x",1),e.scrollFactorY=i(s,"y",1)),e.rotation=i(n,"rotation",0);var a=i(n,"angle",null);null!==a&&(e.angle=a),e.alpha=i(n,"alpha",1);var u=i(n,"origin",null);if("number"===typeof u)e.setOrigin(u);else if(null!==u){var c=i(u,"x",.5),h=i(u,"y",.5);e.setOrigin(c,h)}return e.blendMode=i(n,"blendMode",r.NORMAL),e.visible=i(n,"visible",!0),i(n,"add",!0)&&t.sys.displayList.add(e),e.preUpdate&&t.sys.updateList.add(e),e}},function(t,e){t.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(t,e,n){var r=n(19);t.exports=function(t,e,n,i,o){var s=i.alpha*n.alpha;if(s<=0)return!1;var a=r(n,i,o).calc;return e.globalCompositeOperation=t.blendModes[n.blendMode],e.globalAlpha=s,e.save(),a.setToContext(e),e.imageSmoothingEnabled=!(!t.antialias||n.frame&&n.frame.source.scaleMode),!0}},function(t,e,n){var r=n(33),i=n(192),o=[],s=!1;t.exports=function(){var t=function(t,n,a,u,c){var h;void 0===n&&(n=1),void 0===a&&(a=1),void 0===u&&(u=r.CANVAS),void 0===c&&(c=!1);var l=e(u);return null===l?(l={parent:t,canvas:document.createElement("canvas"),type:u},u===r.CANVAS&&o.push(l),h=l.canvas):(l.parent=t,h=l.canvas),c&&(l.parent=h),h.width=n,h.height=a,s&&u===r.CANVAS&&i.disable(h.getContext("2d")),h},e=function(t){if(void 0===t&&(t=r.CANVAS),t===r.WEBGL)return null;for(var e=0;e<o.length;e++){var n=o[e];if(!n.parent&&n.type===t)return n}return null},n=function(){var t=0;return o.forEach((function(e){e.parent&&t++})),t};return{create2D:function(e,n,i){return t(e,n,i,r.CANVAS)},create:t,createWebGL:function(e,n,i){return t(e,n,i,r.WEBGL)},disableSmoothing:function(){s=!0},enableSmoothing:function(){s=!1},first:e,free:function(){return o.length-n()},pool:o,remove:function(t){var e=t instanceof HTMLCanvasElement;o.forEach((function(n){(e&&n.canvas===t||!e&&n.parent===t)&&(n.parent=null,n.canvas.width=1,n.canvas.height=1)}))},total:n}}()},function(t,e){var n={};t.exports=n,function(){n._nextId=0,n._seed=0,n._nowStartTime=+new Date,n.extend=function(t,e){var r,i;"boolean"===typeof e?(r=2,i=e):(r=1,i=!0);for(var o=r;o<arguments.length;o++){var s=arguments[o];if(s)for(var a in s)i&&s[a]&&s[a].constructor===Object?t[a]&&t[a].constructor!==Object?t[a]=s[a]:(t[a]=t[a]||{},n.extend(t[a],i,s[a])):t[a]=s[a]}return t},n.clone=function(t,e){return n.extend({},e,t)},n.keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)e.push(n);return e},n.values=function(t){var e=[];if(Object.keys){for(var n=Object.keys(t),r=0;r<n.length;r++)e.push(t[n[r]]);return e}for(var i in t)e.push(t[i]);return e},n.get=function(t,e,n,r){e=e.split(".").slice(n,r);for(var i=0;i<e.length;i+=1)t=t[e[i]];return t},n.set=function(t,e,r,i,o){var s=e.split(".").slice(i,o);return n.get(t,e,0,-1)[s[s.length-1]]=r,r},n.shuffle=function(t){for(var e=t.length-1;e>0;e--){var r=Math.floor(n.random()*(e+1)),i=t[e];t[e]=t[r],t[r]=i}return t},n.choose=function(t){return t[Math.floor(n.random()*t.length)]},n.isElement=function(t){return"undefined"!==typeof HTMLElement?t instanceof HTMLElement:!!(t&&t.nodeType&&t.nodeName)},n.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},n.isFunction=function(t){return"function"===typeof t},n.isPlainObject=function(t){return"object"===typeof t&&t.constructor===Object},n.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},n.clamp=function(t,e,n){return t<e?e:t>n?n:t},n.sign=function(t){return t<0?-1:1},n.now=function(){if("undefined"!==typeof window&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-n._nowStartTime},n.random=function(e,n){return n="undefined"!==typeof n?n:1,(e="undefined"!==typeof e?e:0)+t()*(n-e)};var t=function(){return n._seed=(9301*n._seed+49297)%233280,n._seed/233280};n.colorToNumber=function(t){return 3==(t=t.replace("#","")).length&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)),parseInt(t,16)},n.logLevel=1,n.log=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.info=function(){console&&n.logLevel>0&&n.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.warn=function(){console&&n.logLevel>0&&n.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},n.nextId=function(){return n._nextId++},n.indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},n.map=function(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r+=1)n.push(e(t[r]));return n},n.topologicalSort=function(t){var e=[],r=[],i=[];for(var o in t)r[o]||i[o]||n._topologicalSort(o,r,i,t,e);return e},n._topologicalSort=function(t,e,r,i,o){var s=i[t]||[];r[t]=!0;for(var a=0;a<s.length;a+=1){var u=s[a];r[u]||e[u]||n._topologicalSort(u,e,r,i,o)}r[t]=!1,e[t]=!0,o.push(t)},n.chain=function(){for(var t=[],e=0;e<arguments.length;e+=1){var n=arguments[e];n._chained?t.push.apply(t,n._chained):t.push(n)}var r=function(){for(var e,n=new Array(arguments.length),r=0,i=arguments.length;r<i;r++)n[r]=arguments[r];for(r=0;r<t.length;r+=1){var o=t[r].apply(e,n);"undefined"!==typeof o&&(e=o)}return e};return r._chained=t,r},n.chainPathBefore=function(t,e,r){return n.set(t,e,n.chain(r,n.get(t,e)))},n.chainPathAfter=function(t,e,r){return n.set(t,e,n.chain(n.get(t,e),r))}}()},function(t,e,n){var r={VERSION:"3.55.2",BlendModes:n(35),ScaleModes:n(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};t.exports=r},function(t,e,n){var r=n(0),i=n(11),o=n(15),s=n(47),a=new r({Extends:o,Mixins:[i.AlphaSingle,i.BlendMode,i.Depth,i.GetBounds,i.Mask,i.Origin,i.Pipeline,i.ScrollFactor,i.Transform,i.Visible],initialize:function(t,e,n){void 0===e&&(e="Shape"),o.call(this,t,e),this.geom=n,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new s,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.isFilled=!1:(this.fillColor=t,this.fillAlpha=e,this.isFilled=!0),this},setStrokeStyle:function(t,e,n){return void 0===n&&(n=1),void 0===t?this.isStroked=!1:(this.lineWidth=t,this.strokeColor=e,this.strokeAlpha=n,this.isStroked=!0),this},setClosePath:function(t){return this.closePath=t,this},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}}});t.exports=a},function(t,e){t.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(t,e,n){var r=n(14);t.exports=function(t){return t*r.DEG_TO_RAD}},function(t,e,n){t.exports={DESTROY:n(743),FADE_IN_COMPLETE:n(744),FADE_IN_START:n(745),FADE_OUT_COMPLETE:n(746),FADE_OUT_START:n(747),FLASH_COMPLETE:n(748),FLASH_START:n(749),FOLLOW_UPDATE:n(750),PAN_COMPLETE:n(751),PAN_START:n(752),POST_RENDER:n(753),PRE_RENDER:n(754),ROTATE_COMPLETE:n(755),ROTATE_START:n(756),SHAKE_COMPLETE:n(757),SHAKE_START:n(758),ZOOM_COMPLETE:n(759),ZOOM_START:n(760)}},function(t,e,n){var r=n(0),i=n(103),o=n(328),s=n(188),a=n(329),u=new r({initialize:function(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(t,e,n,r)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(t,e,n,r,i){return void 0===r&&(r=255),void 0===i&&(i=!0),this._locked=!0,this.red=t,this.green=e,this.blue=n,this.alpha=r,this._locked=!1,this.update(i)},setGLTo:function(t,e,n,r){return void 0===r&&(r=1),this._locked=!0,this.redGL=t,this.greenGL=e,this.blueGL=n,this.alphaGL=r,this._locked=!1,this.update(!0)},setFromRGB:function(t){return this._locked=!0,this.red=t.r,this.green=t.g,this.blue=t.b,t.hasOwnProperty("a")&&(this.alpha=t.a),this._locked=!1,this.update(!0)},setFromHSV:function(t,e,n){return s(t,e,n,this)},update:function(t){if(void 0===t&&(t=!1),this._locked)return this;var e=this.r,n=this.g,r=this.b,s=this.a;return this._color=i(e,n,r),this._color32=o(e,n,r,s),this._rgba="rgba("+e+","+n+","+r+","+s/255+")",t&&a(e,n,r,this),this},updateHSV:function(){var t=this.r,e=this.g,n=this.b;return a(t,e,n,this),this},clone:function(){return new u(this.r,this.g,this.b,this.a)},gray:function(t){return this.setTo(t,t,t)},random:function(t,e){void 0===t&&(t=0),void 0===e&&(e=255);var n=Math.floor(t+Math.random()*(e-t)),r=Math.floor(t+Math.random()*(e-t)),i=Math.floor(t+Math.random()*(e-t));return this.setTo(n,r,i)},randomGray:function(t,e){void 0===t&&(t=0),void 0===e&&(e=255);var n=Math.floor(t+Math.random()*(e-t));return this.setTo(n,n,n)},saturate:function(t){return this.s+=t/100,this},desaturate:function(t){return this.s-=t/100,this},lighten:function(t){return this.v+=t/100,this},darken:function(t){return this.v-=t/100,this},brighten:function(t){var e=this.r,n=this.g,r=this.b;return e=Math.max(0,Math.min(255,e-Math.round(-t/100*255))),n=Math.max(0,Math.min(255,n-Math.round(-t/100*255))),r=Math.max(0,Math.min(255,r-Math.round(-t/100*255))),this.setTo(e,n,r)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(t){this.gl[0]=Math.min(Math.abs(t),1),this.r=Math.floor(255*this.gl[0]),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(t){this.gl[1]=Math.min(Math.abs(t),1),this.g=Math.floor(255*this.gl[1]),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(t){this.gl[2]=Math.min(Math.abs(t),1),this.b=Math.floor(255*this.gl[2]),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(t){this.gl[3]=Math.min(Math.abs(t),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function(){return this.r},set:function(t){t=Math.floor(Math.abs(t)),this.r=Math.min(t,255),this.gl[0]=t/255,this.update(!0)}},green:{get:function(){return this.g},set:function(t){t=Math.floor(Math.abs(t)),this.g=Math.min(t,255),this.gl[1]=t/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(t){t=Math.floor(Math.abs(t)),this.b=Math.min(t,255),this.gl[2]=t/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(t){t=Math.floor(Math.abs(t)),this.a=Math.min(t,255),this.gl[3]=t/255,this.update()}},h:{get:function(){return this._h},set:function(t){this._h=t,s(t,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(t){this._s=t,s(this._h,t,this._v,this)}},v:{get:function(){return this._v},set:function(t){this._v=t,s(this._h,this._s,t,this)}}});t.exports=u},function(t,e,n){var r=new(n(0))({initialize:function(t,e,n){this.x=0,this.y=0,this.z=0,"object"===typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=n||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clone:function(){return new r(this.x,this.y,this.z)},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,o=e.x,s=e.y,a=e.z;return this.x=r*a-i*s,this.y=i*o-n*a,this.z=n*s-r*o,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this},set:function(t,e,n){return"object"===typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0):(this.x=t||0,this.y=e||0,this.z=n||0),this},setFromMatrixPosition:function(t){return this.fromArray(t.val,12)},setFromMatrixColumn:function(t,e){return this.fromArray(t.val,4*e)},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addScale:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this},scale:function(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(t){var e=t.x-this.x,n=t.y-this.y,r=t.z-this.z||0;return Math.sqrt(e*e+n*n+r*r)},distanceSq:function(t){var e=t.x-this.x,n=t.y-this.y,r=t.z-this.z||0;return e*e+n*n+r*r},length:function(){var t=this.x,e=this.y,n=this.z;return Math.sqrt(t*t+e*e+n*n)},lengthSq:function(){var t=this.x,e=this.y,n=this.z;return t*t+e*e+n*n},normalize:function(){var t=this.x,e=this.y,n=this.z,r=t*t+e*e+n*n;return r>0&&(r=1/Math.sqrt(r),this.x=t*r,this.y=e*r,this.z=n*r),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},cross:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,s=t.z;return this.x=n*s-r*o,this.y=r*i-e*s,this.z=e*o-n*i,this},lerp:function(t,e){void 0===e&&(e=0);var n=this.x,r=this.y,i=this.z;return this.x=n+e*(t.x-n),this.y=r+e*(t.y-r),this.z=i+e*(t.z-i),this},applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z,i=t.val;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.val,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this},transformMat3:function(t){var e=this.x,n=this.y,r=this.z,i=t.val;return this.x=e*i[0]+n*i[3]+r*i[6],this.y=e*i[1]+n*i[4]+r*i[7],this.z=e*i[2]+n*i[5]+r*i[8],this},transformMat4:function(t){var e=this.x,n=this.y,r=this.z,i=t.val;return this.x=i[0]*e+i[4]*n+i[8]*r+i[12],this.y=i[1]*e+i[5]*n+i[9]*r+i[13],this.z=i[2]*e+i[6]*n+i[10]*r+i[14],this},transformCoordinates:function(t){var e=this.x,n=this.y,r=this.z,i=t.val,o=e*i[0]+n*i[4]+r*i[8]+i[12],s=e*i[1]+n*i[5]+r*i[9]+i[13],a=e*i[2]+n*i[6]+r*i[10]+i[14],u=e*i[3]+n*i[7]+r*i[11]+i[15];return this.x=o/u,this.y=s/u,this.z=a/u,this},transformQuat:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,s=t.z,a=t.w,u=a*e+o*r-s*n,c=a*n+s*e-i*r,h=a*r+i*n-o*e,l=-i*e-o*n-s*r;return this.x=u*a+l*-i+c*-s-h*-o,this.y=c*a+l*-o+h*-i-u*-s,this.z=h*a+l*-s+u*-o-c*-i,this},project:function(t){var e=this.x,n=this.y,r=this.z,i=t.val,o=i[0],s=i[1],a=i[2],u=i[3],c=i[4],h=i[5],l=i[6],f=i[7],d=i[8],p=i[9],v=i[10],g=i[11],m=i[12],y=i[13],b=i[14],w=1/(e*u+n*f+r*g+i[15]);return this.x=(e*o+n*c+r*d+m)*w,this.y=(e*s+n*h+r*p+y)*w,this.z=(e*a+n*l+r*v+b)*w,this},projectViewMatrix:function(t,e){return this.applyMatrix4(t).applyMatrix4(e)},unprojectViewMatrix:function(t,e){return this.applyMatrix4(t).applyMatrix4(e)},unproject:function(t,e){var n=t.x,r=t.y,i=t.z,o=t.w,s=this.x-n,a=o-this.y-1-r,u=this.z;return this.x=2*s/i-1,this.y=2*a/o-1,this.z=2*u-1,this.project(e)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});r.ZERO=new r,r.RIGHT=new r(1,0,0),r.LEFT=new r(-1,0,0),r.UP=new r(0,-1,0),r.DOWN=new r(0,1,0),r.FORWARD=new r(0,0,1),r.BACK=new r(0,0,-1),r.ONE=new r(1,1,1),t.exports=r},function(t,e){t.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(t,e,n){var r={};t.exports=r;var i=n(64),o=n(83),s=n(165),a=n(32),u=n(84),c=n(271);!function(){r._inertiaScale=4,r._nextCollidingGroupId=1,r._nextNonCollidingGroupId=-1,r._nextCategory=1,r.create=function(e){var n={id:a.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!e.hasOwnProperty("position")&&e.hasOwnProperty("vertices")?e.position=i.centre(e.vertices):e.hasOwnProperty("vertices")||(n.vertices=i.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var r=a.extend(n,e);return t(r,e),r.setOnCollideWith=function(t,e){return e?this.onCollideWith[t.id]=e:delete this.onCollideWith[t.id],this},r},r.nextGroup=function(t){return t?r._nextNonCollidingGroupId--:r._nextCollidingGroupId++},r.nextCategory=function(){return r._nextCategory=r._nextCategory<<1,r._nextCategory};var t=function(t,e){e=e||{},r.set(t,{bounds:t.bounds||u.create(t.vertices),positionPrev:t.positionPrev||o.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t});var n=t.bounds;if(i.rotate(t.vertices,t.angle,t.position),c.rotate(t.axes,t.angle),u.update(n,t.vertices,t.velocity),r.set(t,{axes:e.axes||t.axes,area:e.area||t.area,mass:e.mass||t.mass,inertia:e.inertia||t.inertia}),1===t.parts.length){var s=t.centerOfMass,a=t.centerOffset,h=n.max.x-n.min.x,l=n.max.y-n.min.y;s.x=-(n.min.x-t.position.x)/h,s.y=-(n.min.y-t.position.y)/l,a.x=h*s.x,a.y=l*s.y}};r.set=function(t,e,n){var i;for(i in"string"===typeof e&&(i=e,(e={})[i]=n),e)if(Object.prototype.hasOwnProperty.call(e,i))switch(n=e[i],i){case"isStatic":r.setStatic(t,n);break;case"isSleeping":s.set(t,n);break;case"mass":r.setMass(t,n);break;case"density":r.setDensity(t,n);break;case"inertia":r.setInertia(t,n);break;case"vertices":r.setVertices(t,n);break;case"position":r.setPosition(t,n);break;case"angle":r.setAngle(t,n);break;case"velocity":r.setVelocity(t,n);break;case"angularVelocity":r.setAngularVelocity(t,n);break;case"parts":r.setParts(t,n);break;case"centre":r.setCentre(t,n);break;default:t[i]=n}},r.setStatic=function(t,e){for(var n=0;n<t.parts.length;n++){var r=t.parts[n];r.isStatic=e,e?(r._original={restitution:r.restitution,friction:r.friction,mass:r.mass,inertia:r.inertia,density:r.density,inverseMass:r.inverseMass,inverseInertia:r.inverseInertia},r.restitution=0,r.friction=1,r.mass=r.inertia=r.density=1/0,r.inverseMass=r.inverseInertia=0,r.positionPrev.x=r.position.x,r.positionPrev.y=r.position.y,r.anglePrev=r.angle,r.angularVelocity=0,r.speed=0,r.angularSpeed=0,r.motion=0):r._original&&(r.restitution=r._original.restitution,r.friction=r._original.friction,r.mass=r._original.mass,r.inertia=r._original.inertia,r.density=r._original.density,r.inverseMass=r._original.inverseMass,r.inverseInertia=r._original.inverseInertia,r._original=null)}},r.setMass=function(t,e){var n=t.inertia/(t.mass/6);t.inertia=n*(e/6),t.inverseInertia=1/t.inertia,t.mass=e,t.inverseMass=1/t.mass,t.density=t.mass/t.area},r.setDensity=function(t,e){r.setMass(t,e*t.area),t.density=e},r.setInertia=function(t,e){t.inertia=e,t.inverseInertia=1/t.inertia},r.setVertices=function(t,e){e[0].body===t?t.vertices=e:t.vertices=i.create(e,t),t.axes=c.fromVertices(t.vertices),t.area=i.area(t.vertices),r.setMass(t,t.density*t.area);var n=i.centre(t.vertices);i.translate(t.vertices,n,-1),r.setInertia(t,r._inertiaScale*i.inertia(t.vertices,t.mass)),i.translate(t.vertices,t.position),u.update(t.bounds,t.vertices,t.velocity)},r.setParts=function(t,e,n){var o;for(e=e.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,o=0;o<e.length;o++){var s=e[o];s!==t&&(s.parent=t,t.parts.push(s))}if(1!==t.parts.length){if(n="undefined"===typeof n||n){var a=[];for(o=0;o<e.length;o++)a=a.concat(e[o].vertices);i.clockwiseSort(a);var c=i.hull(a),h=i.centre(c);r.setVertices(t,c),i.translate(t.vertices,h)}var l=r._totalProperties(t),f=l.centre.x,d=l.centre.y,p=t.bounds,v=t.centerOfMass,g=t.centerOffset;u.update(p,t.vertices,t.velocity),v.x=-(p.min.x-f)/(p.max.x-p.min.x),v.y=-(p.min.y-d)/(p.max.y-p.min.y),g.x=f,g.y=d,t.area=l.area,t.parent=t,t.position.x=f,t.position.y=d,t.positionPrev.x=f,t.positionPrev.y=d,r.setMass(t,l.mass),r.setInertia(t,l.inertia),r.setPosition(t,l.centre)}},r.setCentre=function(t,e,n){n?(t.positionPrev.x+=e.x,t.positionPrev.y+=e.y,t.position.x+=e.x,t.position.y+=e.y):(t.positionPrev.x=e.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=e.y-(t.position.y-t.positionPrev.y),t.position.x=e.x,t.position.y=e.y)},r.setPosition=function(t,e){var n=o.sub(e,t.position);t.positionPrev.x+=n.x,t.positionPrev.y+=n.y;for(var r=0;r<t.parts.length;r++){var s=t.parts[r];s.position.x+=n.x,s.position.y+=n.y,i.translate(s.vertices,n),u.update(s.bounds,s.vertices,t.velocity)}},r.setAngle=function(t,e){var n=e-t.angle;t.anglePrev+=n;for(var r=0;r<t.parts.length;r++){var s=t.parts[r];s.angle+=n,i.rotate(s.vertices,n,t.position),c.rotate(s.axes,n),u.update(s.bounds,s.vertices,t.velocity),r>0&&o.rotateAbout(s.position,n,t.position,s.position)}},r.setVelocity=function(t,e){t.positionPrev.x=t.position.x-e.x,t.positionPrev.y=t.position.y-e.y,t.velocity.x=e.x,t.velocity.y=e.y,t.speed=o.magnitude(t.velocity)},r.setAngularVelocity=function(t,e){t.anglePrev=t.angle-e,t.angularVelocity=e,t.angularSpeed=Math.abs(t.angularVelocity)},r.translate=function(t,e){r.setPosition(t,o.add(t.position,e))},r.rotate=function(t,e,n){if(n){var i=Math.cos(e),o=Math.sin(e),s=t.position.x-n.x,a=t.position.y-n.y;r.setPosition(t,{x:n.x+(s*i-a*o),y:n.y+(s*o+a*i)}),r.setAngle(t,t.angle+e)}else r.setAngle(t,t.angle+e)},r.scale=function(t,e,n,o){var s=0,a=0;o=o||t.position;for(var h=0;h<t.parts.length;h++){var l=t.parts[h];l.scale.x=e,l.scale.y=n,i.scale(l.vertices,e,n,o),l.axes=c.fromVertices(l.vertices),l.area=i.area(l.vertices),r.setMass(l,t.density*l.area),i.translate(l.vertices,{x:-l.position.x,y:-l.position.y}),r.setInertia(l,r._inertiaScale*i.inertia(l.vertices,l.mass)),i.translate(l.vertices,{x:l.position.x,y:l.position.y}),h>0&&(s+=l.area,a+=l.inertia),l.position.x=o.x+(l.position.x-o.x)*e,l.position.y=o.y+(l.position.y-o.y)*n,u.update(l.bounds,l.vertices,t.velocity)}t.parts.length>1&&(t.area=s,t.isStatic||(r.setMass(t,t.density*s),r.setInertia(t,a))),t.circleRadius&&(e===n?t.circleRadius*=e:t.circleRadius=null)},r.update=function(t,e,n,r){var s=Math.pow(e*n*t.timeScale,2),a=1-t.frictionAir*n*t.timeScale,h=t.position.x-t.positionPrev.x,l=t.position.y-t.positionPrev.y;t.velocity.x=h*a*r+t.force.x/t.mass*s,t.velocity.y=l*a*r+t.force.y/t.mass*s,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*a*r+t.torque/t.inertia*s,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=o.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var f=0;f<t.parts.length;f++){var d=t.parts[f];i.translate(d.vertices,t.velocity),f>0&&(d.position.x+=t.velocity.x,d.position.y+=t.velocity.y),0!==t.angularVelocity&&(i.rotate(d.vertices,t.angularVelocity,t.position),c.rotate(d.axes,t.angularVelocity),f>0&&o.rotateAbout(d.position,t.angularVelocity,t.position,d.position)),u.update(d.bounds,d.vertices,t.velocity)}},r.applyForce=function(t,e,n){t.force.x+=n.x,t.force.y+=n.y;var r=e.x-t.position.x,i=e.y-t.position.y;t.torque+=r*n.y-i*n.x},r._totalProperties=function(t){for(var e={mass:0,area:0,inertia:0,centre:{x:0,y:0}},n=1===t.parts.length?0:1;n<t.parts.length;n++){var r=t.parts[n],i=r.mass!==1/0?r.mass:1;e.mass+=i,e.area+=r.area,e.inertia+=r.inertia,e.centre=o.add(e.centre,o.mult(r.position,i))}return e.centre=o.div(e.centre,e.mass),e}}()},function(t,e){t.exports=function(t){return t.y+t.height-t.height*t.originY}},function(t,e){t.exports=function(t){return t.x-t.width*t.originX}},function(t,e){t.exports=function(t){return t.x+t.width-t.width*t.originX}},function(t,e){t.exports=function(t){return t.y-t.height*t.originY}},function(t,e){t.exports=function(t,e,n,r,i,o){var s;void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=1);var a=0,u=t.length;if(1===o)for(s=i;s<u;s++)t[s][e]+=n+a*r,a++;else for(s=i;s>=0;s--)t[s][e]+=n+a*r,a++;return t}},function(t,e,n){var r=n(0),i=n(307),o=n(172),s=n(56),a=n(173),u=n(3),c=new r({initialize:function(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.type=s.LINE,this.x1=t,this.y1=e,this.x2=n,this.y2=r},getPoint:function(t,e){return i(this,t,e)},getPoints:function(t,e,n){return o(this,t,e,n)},getRandomPoint:function(t){return a(this,t)},setTo:function(t,e,n,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.x1=t,this.y1=e,this.x2=n,this.y2=r,this},getPointA:function(t){return void 0===t&&(t=new u),t.set(this.x1,this.y1),t},getPointB:function(t){return void 0===t&&(t=new u),t.set(this.x2,this.y2),t},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(t){this.x1<=this.x2?this.x1=t:this.x2=t}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(t){this.x1>this.x2?this.x1=t:this.x2=t}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(t){this.y1<=this.y2?this.y1=t:this.y2=t}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(t){this.y1>this.y2?this.y1=t:this.y2=t}}});t.exports=c},function(t,e){t.exports=function(t,e,n,r){var i=n||e.fillColor,o=r||e.fillAlpha,s=(16711680&i)>>>16,a=(65280&i)>>>8,u=255&i;t.fillStyle="rgba("+s+","+a+","+u+","+o+")"}},function(t,e,n){var r=new(n(0))({initialize:function(t,e,n,r){var i=[];r.forEach((function(t){t&&i.push(t)})),this.loader=t,this.type=e,this.key=n,this.multiKeyIndex=t.multiKeyIndex++,this.files=i,this.complete=!1,this.pending=i.length,this.failed=0,this.config={},this.baseURL=t.baseURL,this.path=t.path,this.prefix=t.prefix;for(var o=0;o<i.length;o++)i[o].multiFile=this},isReadyToProcess:function(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function(t){return this.files.push(t),t.multiFile=this,this.pending++,this.complete=!1,this},onFileComplete:function(t){-1!==this.files.indexOf(t)&&this.pending--},onFileFailed:function(t){-1!==this.files.indexOf(t)&&this.failed++}});t.exports=r},function(t,e){t.exports=function(t,e,n,r){var i=t-n,o=e-r;return Math.sqrt(i*i+o*o)}},function(t,e,n){t.exports={BOOT:n(922),DESTROY:n(923),DRAG_END:n(924),DRAG_ENTER:n(925),DRAG:n(926),DRAG_LEAVE:n(927),DRAG_OVER:n(928),DRAG_START:n(929),DROP:n(930),GAME_OUT:n(931),GAME_OVER:n(932),GAMEOBJECT_DOWN:n(933),GAMEOBJECT_DRAG_END:n(934),GAMEOBJECT_DRAG_ENTER:n(935),GAMEOBJECT_DRAG:n(936),GAMEOBJECT_DRAG_LEAVE:n(937),GAMEOBJECT_DRAG_OVER:n(938),GAMEOBJECT_DRAG_START:n(939),GAMEOBJECT_DROP:n(940),GAMEOBJECT_MOVE:n(941),GAMEOBJECT_OUT:n(942),GAMEOBJECT_OVER:n(943),GAMEOBJECT_POINTER_DOWN:n(944),GAMEOBJECT_POINTER_MOVE:n(945),GAMEOBJECT_POINTER_OUT:n(946),GAMEOBJECT_POINTER_OVER:n(947),GAMEOBJECT_POINTER_UP:n(948),GAMEOBJECT_POINTER_WHEEL:n(949),GAMEOBJECT_UP:n(950),GAMEOBJECT_WHEEL:n(951),MANAGER_BOOT:n(952),MANAGER_PROCESS:n(953),MANAGER_UPDATE:n(954),POINTER_DOWN:n(955),POINTER_DOWN_OUTSIDE:n(956),POINTER_MOVE:n(957),POINTER_OUT:n(958),POINTER_OVER:n(959),POINTER_UP:n(960),POINTER_UP_OUTSIDE:n(961),POINTER_WHEEL:n(962),POINTERLOCK_CHANGE:n(963),PRE_UPDATE:n(964),SHUTDOWN:n(965),START:n(966),UPDATE:n(967)}},function(t,e){t.exports=function(t,e){return t.y=e+t.height*t.originY,t}},function(t,e){t.exports=function(t,e){return t.x=e+t.width*t.originX,t}},function(t,e){t.exports=function(t,e){return t.x=e-t.width+t.width*t.originX,t}},function(t,e){t.exports=function(t,e){return t.y=e-t.height+t.height*t.originY,t}},function(t,e){t.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},function(t,e){t.exports=function(t,e,n){return!(t.width<=0||t.height<=0)&&t.x<=e&&t.x+t.width>=e&&t.y<=n&&t.y+t.height>=n}},function(t,e,n){var r=n(0),i=n(175),o=n(9),s=n(374),a=n(2),u=n(69),c=n(91),h=n(141),l=n(12),f=n(375),d=new r({Extends:o,initialize:function(t){o.call(this);var e=t.game,n=e.renderer,r=n.gl;this.name=a(t,"name","WebGLPipeline"),this.game=e,this.renderer=n,this.manager,this.gl=r,this.view=e.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.vertexData,this.vertexBuffer,this.topology=a(t,"topology",r.TRIANGLES),this.bytes,this.vertexViewF32,this.vertexViewU32,this.active=!0,this.currentUnit=0,this.forceZero=a(t,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.currentRenderTarget,this.shaders=[],this.currentShader,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.config=t,this.glReset=!1},boot:function(){var t,e=this.gl,n=this.config,r=this.renderer;this.isPostFX||(this.projectionMatrix=(new u).identity());var i=this.renderTargets,o=a(n,"renderTarget",!1);"boolean"===typeof o&&o&&(o=1);var l=r.width,f=r.height;if("number"===typeof o)for(t=0;t<o;t++)i.push(new h(r,l,f,1,0,!0));else if(Array.isArray(o))for(t=0;t<o.length;t++){var d=a(o[t],"scale",1),p=a(o[t],"minFilter",0),v=a(o[t],"autoClear",1);i.push(new h(r,l,f,d,p,v))}i.length&&(this.currentRenderTarget=i[0]),this.setShadersFromConfig(n);var g=this.shaders,m=0;for(t=0;t<g.length;t++)g[t].vertexSize>m&&(m=g[t].vertexSize);var y=a(n,"batchSize",r.config.batchSize);this.vertexCapacity=6*y;var b=new ArrayBuffer(this.vertexCapacity*m);this.vertexData=b,this.bytes=new Uint8Array(b),this.vertexViewF32=new Float32Array(b),this.vertexViewU32=new Uint32Array(b);var w=a(n,"vertices",null);for(w?(this.vertexViewF32.set(w),this.vertexBuffer=r.createVertexBuffer(b,e.STATIC_DRAW)):this.vertexBuffer=r.createVertexBuffer(b.byteLength,e.DYNAMIC_DRAW),this.setVertexBuffer(),t=g.length-1;t>=0;t--)g[t].rebind();this.hasBooted=!0,r.on(c.RESIZE,this.resize,this),r.on(c.PRE_RENDER,this.onPreRender,this),r.on(c.RENDER,this.onRender,this),r.on(c.POST_RENDER,this.onPostRender,this),this.emit(s.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(t,e){var n=this.renderer;return t===this.currentShader&&n.currentProgram===this.currentShader.program||(this.flush(),n.resetTextures(),this.setVertexBuffer()&&!e&&(e=!0),t.bind(e,!1),this.currentShader=t),this},getShaderByName:function(t){for(var e=this.shaders,n=0;n<e.length;n++)if(e[n].name===t)return e[n]},setShadersFromConfig:function(t){var e,n=this.shaders,r=this.renderer;for(e=0;e<n.length;e++)n[e].destroy();var o="vertShader",s="fragShader",u="attributes",c=a(t,o,null),h=l.parseFragmentShaderMaxTextures(a(t,s,null),r.maxTextures),d=a(t,u,null),p=a(t,"shaders",[]),v=p.length;if(0===v)c&&h&&(this.shaders=[new f(this,"default",c,h,i(d))]);else{var g=[];for(e=0;e<v;e++){var m=p[e],y=a(m,"name","default"),b=a(m,o,c),w=l.parseFragmentShaderMaxTextures(a(m,s,h),r.maxTextures),x=a(m,u,d);b&&w&&g.push(new f(this,y,b,w,i(x)))}this.shaders=g}return 0===this.shaders.length?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(t,e){return void 0===e&&(e=t.frame),this.currentUnit=this.renderer.setTextureSource(e.source),this.currentUnit},shouldFlush:function(t){return void 0===t&&(t=0),this.vertexCount+t>this.vertexCapacity},resize:function(t,e){t===this.width&&e===this.height||this.flush(),this.width=t,this.height=e;for(var n=this.renderTargets,r=0;r<n.length;r++)n[r].resize(t,e);return this.setProjectionMatrix(t,e),this.emit(s.RESIZE,t,e,this),this.onResize(t,e),this},setProjectionMatrix:function(t,e){var n=this.projectionMatrix;if(!n)return this;this.projectionWidth=t,this.projectionHeight=e,n.ortho(0,t,e,0,-1e3,1e3);for(var r=this.shaders,i="uProjectionMatrix",o=0;o<r.length;o++){var s=r[o];s.hasUniform(i)&&(s.resetUniform(i),s.setMatrix4fv(i,!1,n.val,s))}return this},updateProjectionMatrix:function(){if(this.projectionMatrix){var t=this.renderer.projectionWidth,e=this.renderer.projectionHeight;this.projectionWidth===t&&this.projectionHeight===e||this.setProjectionMatrix(t,e)}},bind:function(t){if(void 0===t&&(t=this.currentShader),this.glReset)return this.rebind(t);var e=this.setVertexBuffer();return t.bind(e),this.currentShader=t,this.emit(s.BIND,this,t),this.onActive(t),this},rebind:function(t){this.setVertexBuffer();for(var e=this.shaders,n=e.length-1;n>=0;n--){var r=e[n].rebind();t&&r!==t||(this.currentShader=r)}return this.emit(s.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var t=this.gl,e=this.vertexBuffer;return t.getParameter(t.ARRAY_BUFFER_BINDING)!==e&&(t.bindBuffer(t.ARRAY_BUFFER,e),!0)},preBatch:function(t){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(t),this},postBatch:function(t){return this.onDraw(this.currentRenderTarget),this.onPostBatch(t),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(t){if(void 0===t&&(t=!1),this.vertexCount>0){this.emit(s.BEFORE_FLUSH,this,t),this.onBeforeFlush(t);var e=this.gl,n=this.vertexCount,r=this.currentShader.vertexSize;this.active&&(this.setVertexBuffer(),n===this.vertexCapacity?e.bufferData(e.ARRAY_BUFFER,this.vertexData,e.DYNAMIC_DRAW):e.bufferSubData(e.ARRAY_BUFFER,0,this.bytes.subarray(0,n*r)),e.drawArrays(this.topology,0,n)),this.vertexCount=0,this.emit(s.AFTER_FLUSH,this,t),this.onAfterFlush(t)}return this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(t,e,n,r,i,o,s){var a=this.vertexViewF32,u=this.vertexViewU32,c=this.vertexCount*this.currentShader.vertexComponentCount-1;a[++c]=t,a[++c]=e,a[++c]=n,a[++c]=r,a[++c]=i,a[++c]=o,u[++c]=s,this.vertexCount++},batchQuad:function(t,e,n,r,i,o,s,a,u,c,h,l,f,d,p,v,g,m,y,b){void 0===b&&(b=this.currentUnit);var w=!1;return this.shouldFlush(6)&&(this.flush(),w=!0,b=this.setTexture2D(y)),this.batchVert(e,n,c,h,b,m,d),this.batchVert(r,i,c,f,b,m,v),this.batchVert(o,s,l,f,b,m,g),this.batchVert(e,n,c,h,b,m,d),this.batchVert(o,s,l,f,b,m,g),this.batchVert(a,u,l,h,b,m,p),this.onBatch(t),w},batchTri:function(t,e,n,r,i,o,s,a,u,c,h,l,f,d,p,v,g){void 0===g&&(g=this.currentUnit);var m=!1;return this.shouldFlush(3)&&(this.flush(),m=!0,g=this.setTexture2D(v)),this.batchVert(e,n,a,u,g,p,l),this.batchVert(r,i,a,h,g,p,f),this.batchVert(o,s,c,h,g,p,d),this.onBatch(t),m},drawFillRect:function(t,e,n,r,i,o,s,a){void 0===s&&(s=this.renderer.whiteTexture.glTexture),void 0===a&&(a=!0),t=Math.floor(t),e=Math.floor(e);var u=Math.floor(t+n),c=Math.floor(e+r),h=this.setTexture2D(s),f=l.getTintAppendFloatAlphaAndSwap(i,o),d=0,p=1;a&&(d=1,p=0),this.batchQuad(null,t,e,t,c,u,c,u,e,0,d,1,p,f,f,f,f,0,s,h)},setTexture2D:function(t){return void 0===t&&(t=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(t),this.currentUnit},bindTexture:function(t,e){void 0===e&&(e=0);var n=this.gl;return n.activeTexture(n.TEXTURE0+e),n.bindTexture(n.TEXTURE_2D,t),this},bindRenderTarget:function(t,e){return this.bindTexture(t.texture,e)},setTime:function(t){return this.set1f(t,this.game.loop.getDuration()),this},set1f:function(t,e,n){return void 0===n&&(n=this.currentShader),n.set1f(t,e),this},set2f:function(t,e,n,r){return void 0===r&&(r=this.currentShader),r.set2f(t,e,n),this},set3f:function(t,e,n,r,i){return void 0===i&&(i=this.currentShader),i.set3f(t,e,n,r),this},set4f:function(t,e,n,r,i,o){return void 0===o&&(o=this.currentShader),o.set4f(t,e,n,r,i),this},set1fv:function(t,e,n){return void 0===n&&(n=this.currentShader),n.set1fv(t,e),this},set2fv:function(t,e,n){return void 0===n&&(n=this.currentShader),n.set2fv(t,e),this},set3fv:function(t,e,n){return void 0===n&&(n=this.currentShader),n.set3fv(t,e),this},set4fv:function(t,e,n){return void 0===n&&(n=this.currentShader),n.set4fv(t,e),this},set1iv:function(t,e,n){return void 0===n&&(n=this.currentShader),n.set1iv(t,e),this},set2iv:function(t,e,n){return void 0===n&&(n=this.currentShader),n.set2iv(t,e),this},set3iv:function(t,e,n){return void 0===n&&(n=this.currentShader),n.set3iv(t,e),this},set4iv:function(t,e,n){return void 0===n&&(n=this.currentShader),n.set4iv(t,e),this},set1i:function(t,e,n){return void 0===n&&(n=this.currentShader),n.set1i(t,e),this},set2i:function(t,e,n,r){return void 0===r&&(r=this.currentShader),r.set2i(t,e,n),this},set3i:function(t,e,n,r,i){return void 0===i&&(i=this.currentShader),i.set3i(t,e,n,r),this},set4i:function(t,e,n,r,i,o){return void 0===o&&(o=this.currentShader),o.set4i(t,e,n,r,i),this},setMatrix2fv:function(t,e,n,r){return void 0===r&&(r=this.currentShader),r.setMatrix2fv(t,e,n),this},setMatrix3fv:function(t,e,n,r){return void 0===r&&(r=this.currentShader),r.setMatrix3fv(t,e,n),this},setMatrix4fv:function(t,e,n,r){return void 0===r&&(r=this.currentShader),r.setMatrix4fv(t,e,n),this},destroy:function(){var t;this.emit(s.DESTROY,this);var e=this.shaders;for(t=0;t<e.length;t++)e[t].destroy();var n=this.renderTargets;for(t=0;t<n.length;t++)n[t].destroy();this.gl.deleteBuffer(this.vertexBuffer);var r=this.renderer;return r.off(c.RESIZE,this.resize,this),r.off(c.PRE_RENDER,this.onPreRender,this),r.off(c.RENDER,this.onRender,this),r.off(c.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});t.exports=d},function(t,e,n){"use strict";function r(t,e,n){n=n||2;var r,a,u,c,h,d,p,g=e&&e.length,m=g?e[0]*n:t.length,y=i(t,0,m,n,!0),b=[];if(!y||y.next===y.prev)return b;if(g&&(y=function(t,e,n,r){var s,a,u,c=[];for(s=0,a=e.length;s<a;s++)(u=i(t,e[s]*r,s<a-1?e[s+1]*r:t.length,r,!1))===u.next&&(u.steiner=!0),c.push(v(u));for(c.sort(l),s=0;s<c.length;s++)f(c[s],n),n=o(n,n.next);return n}(t,e,y,n)),t.length>80*n){r=u=t[0],a=c=t[1];for(var w=n;w<m;w+=n)(h=t[w])<r&&(r=h),(d=t[w+1])<a&&(a=d),h>u&&(u=h),d>c&&(c=d);p=0!==(p=Math.max(u-r,c-a))?1/p:0}return s(y,b,n,r,a,p),b}function i(t,e,n,r,i){var o,s;if(i===O(t,e,n,r)>0)for(o=e;o<n;o+=r)s=S(o,t[o],t[o+1],s);else for(o=n-r;o>=e;o-=r)s=S(o,t[o],t[o+1],s);return s&&b(s,s.next)&&(k(s),s=s.next),s}function o(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!b(r,r.next)&&0!==y(r.prev,r,r.next))r=r.next;else{if(k(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function s(t,e,n,r,i,l,f){if(t){!f&&l&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=p(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,s,a,u,c=1;do{for(n=t,t=null,o=null,s=0;n;){for(s++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ);e++);for(u=c;a>0||u>0&&r;)0!==a&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(s>1)}(i)}(t,r,i,l);for(var d,v,g=t;t.prev!==t.next;)if(d=t.prev,v=t.next,l?u(t,r,i,l):a(t))e.push(d.i/n),e.push(t.i/n),e.push(v.i/n),k(t),t=v.next,g=v.next;else if((t=v)===g){f?1===f?s(t=c(o(t),e,n),e,n,r,i,l,2):2===f&&h(t,e,n,r,i,l):s(o(t),e,n,r,i,l,1);break}}}function a(t){var e=t.prev,n=t,r=t.next;if(y(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(g(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&y(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function u(t,e,n,r){var i=t.prev,o=t,s=t.next;if(y(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,u=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,c=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,h=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,l=p(a,u,e,n,r),f=p(c,h,e,n,r),d=t.prevZ,v=t.nextZ;d&&d.z>=l&&v&&v.z<=f;){if(d!==t.prev&&d!==t.next&&g(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&y(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,v!==t.prev&&v!==t.next&&g(i.x,i.y,o.x,o.y,s.x,s.y,v.x,v.y)&&y(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;d&&d.z>=l;){if(d!==t.prev&&d!==t.next&&g(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&y(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;v&&v.z<=f;){if(v!==t.prev&&v!==t.next&&g(i.x,i.y,o.x,o.y,s.x,s.y,v.x,v.y)&&y(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function c(t,e,n){var r=t;do{var i=r.prev,s=r.next.next;!b(i,s)&&w(i,r,r.next,s)&&T(i,s)&&T(s,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(s.i/n),k(r),k(r.next),r=t=s),r=r.next}while(r!==t);return o(r)}function h(t,e,n,r,i,a){var u=t;do{for(var c=u.next.next;c!==u.prev;){if(u.i!==c.i&&m(u,c)){var h=E(u,c);return u=o(u,u.next),h=o(h,h.next),s(u,e,n,r,i,a),void s(h,e,n,r,i,a)}c=c.next}u=u.next}while(u!==t)}function l(t,e){return t.x-e.x}function f(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s){if(s=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===s)return n;var u,c=n,h=n.x,l=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=h&&i!==r.x&&g(o<l?i:s,o,h,l,o<l?s:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),T(r,t)&&(u<f||u===f&&(r.x>n.x||r.x===n.x&&d(n,r)))&&(n=r,f=u)),r=r.next}while(r!==c);return n}(t,e),e){var n=E(e,t);o(e,e.next),o(n,n.next)}}function d(t,e){return y(t.prev,t,e.prev)<0&&y(e.next,t,t.next)<0}function p(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function v(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function g(t,e,n,r,i,o,s,a){return(i-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(n-s)*(e-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&w(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(T(t,e)&&T(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(y(t.prev,t,e.prev)||y(t,e.prev,e))||b(t,e)&&y(t.prev,t,t.next)>0&&y(e.prev,e,e.next)>0)}function y(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function b(t,e){return t.x===e.x&&t.y===e.y}function w(t,e,n,r){var i=_(y(t,e,n)),o=_(y(t,e,r)),s=_(y(n,r,t)),a=_(y(n,r,e));return i!==o&&s!==a||!(0!==i||!x(t,n,e))||!(0!==o||!x(t,r,e))||!(0!==s||!x(n,t,r))||!(0!==a||!x(n,e,r))}function x(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function _(t){return t>0?1:t<0?-1:0}function T(t,e){return y(t.prev,t,t.next)<0?y(t,e,t.next)>=0&&y(t,t.prev,e)>=0:y(t,e,t.prev)<0||y(t,t.next,e)<0}function E(t,e){var n=new A(t.i,t.x,t.y),r=new A(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function S(t,e,n,r){var i=new A(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function k(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function A(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(t,e,n,r){for(var i=0,o=e,s=n-r;o<n;o+=r)i+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return i}r.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,s=Math.abs(O(t,0,o,n));if(i)for(var a=0,u=e.length;a<u;a++){var c=e[a]*n,h=a<u-1?e[a+1]*n:t.length;s-=Math.abs(O(t,c,h,n))}var l=0;for(a=0;a<r.length;a+=3){var f=r[a]*n,d=r[a+1]*n,p=r[a+2]*n;l+=Math.abs((t[f]-t[p])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[p+1]-t[f+1]))}return 0===s&&0===l?0:Math.abs((l-s)/s)},r.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var s=0;s<e;s++)n.vertices.push(t[i][o][s]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n},t.exports=r},function(t,e){t.exports=function(t,e,n,r){var i=n||e.strokeColor,o=r||e.strokeAlpha,s=(16711680&i)>>>16,a=(65280&i)>>>8,u=255&i;t.strokeStyle="rgba("+s+","+a+","+u+","+o+")",t.lineWidth=e.lineWidth}},function(t,e,n){var r=n(0),i=n(21),o=n(23),s=n(8),a=n(2),u=n(6),c=n(7),h=new r({Extends:o,initialize:function(t,e,n,r,s){var h="json";if(c(e)){var l=e;e=a(l,"key"),n=a(l,"url"),r=a(l,"xhrSettings"),h=a(l,"extension",h),s=a(l,"dataKey",s)}var f={type:"json",cache:t.cacheManager.json,extension:h,responseType:"text",key:e,url:n,xhrSettings:r,config:s};o.call(this,t,f),c(n)&&(this.data=s?u(n,s):n,this.state=i.FILE_POPULATED)},onProcess:function(){if(this.state!==i.FILE_POPULATED){this.state=i.FILE_PROCESSING;try{var t=JSON.parse(this.xhrLoader.responseText)}catch(n){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),n}var e=this.config;this.data="string"===typeof e?u(t,e,t):t}this.onProcessComplete()}});s.register("json",(function(t,e,n,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new h(this,t[i]));else this.addFile(new h(this,t,e,r,n));return this})),t.exports=h},function(t,e){t.exports={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14}},function(t,e,n){var r=n(158),i=n(26);t.exports=function(t,e,n,o,s){for(var a=null,u=null,c=null,h=null,l=i(t,e,n,o,null,s),f=0;f<l.length;f++){var d=l[f];d&&(d.collides?(a=r(d.x,d.y-1,!0,s),u=r(d.x,d.y+1,!0,s),c=r(d.x-1,d.y,!0,s),h=r(d.x+1,d.y,!0,s),d.faceTop=!a||!a.collides,d.faceBottom=!u||!u.collides,d.faceLeft=!c||!c.collides,d.faceRight=!h||!h.collides):d.resetFaces())}}},function(t,e,n){var r={};t.exports=r;var i=n(83),o=n(32);r.create=function(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r],o={x:i.x,y:i.y,index:r,body:e,isInternal:!1,contact:null,offset:null};o.contact={vertex:o,normalImpulse:0,tangentImpulse:0},n.push(o)}return n},r.fromPath=function(t,e){var n=[];return t.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,(function(t,e,r){n.push({x:parseFloat(e),y:parseFloat(r)})})),r.create(n,e)},r.centre=function(t){for(var e,n,o,s=r.area(t,!0),a={x:0,y:0},u=0;u<t.length;u++)o=(u+1)%t.length,e=i.cross(t[u],t[o]),n=i.mult(i.add(t[u],t[o]),e),a=i.add(a,n);return i.div(a,6*s)},r.mean=function(t){for(var e={x:0,y:0},n=0;n<t.length;n++)e.x+=t[n].x,e.y+=t[n].y;return i.div(e,t.length)},r.area=function(t,e){for(var n=0,r=t.length-1,i=0;i<t.length;i++)n+=(t[r].x-t[i].x)*(t[r].y+t[i].y),r=i;return e?n/2:Math.abs(n)/2},r.inertia=function(t,e){for(var n,r,o=0,s=0,a=t,u=0;u<a.length;u++)r=(u+1)%a.length,o+=(n=Math.abs(i.cross(a[r],a[u])))*(i.dot(a[r],a[r])+i.dot(a[r],a[u])+i.dot(a[u],a[u])),s+=n;return e/6*(o/s)},r.translate=function(t,e,n){var r;if(n)for(r=0;r<t.length;r++)t[r].x+=e.x*n,t[r].y+=e.y*n;else for(r=0;r<t.length;r++)t[r].x+=e.x,t[r].y+=e.y;return t},r.rotate=function(t,e,n){if(0!==e){for(var r=Math.cos(e),i=Math.sin(e),o=0;o<t.length;o++){var s=t[o],a=s.x-n.x,u=s.y-n.y;s.x=n.x+(a*r-u*i),s.y=n.y+(a*i+u*r)}return t}},r.contains=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=t[(n+1)%t.length];if((e.x-r.x)*(i.y-r.y)+(e.y-r.y)*(r.x-i.x)>0)return!1}return!0},r.scale=function(t,e,n,o){if(1===e&&1===n)return t;var s,a;o=o||r.centre(t);for(var u=0;u<t.length;u++)s=t[u],a=i.sub(s,o),t[u].x=o.x+a.x*e,t[u].y=o.y+a.y*n;return t},r.chamfer=function(t,e,n,r,s){e="number"===typeof e?[e]:e||[8],n="undefined"!==typeof n?n:-1,r=r||2,s=s||14;for(var a=[],u=0;u<t.length;u++){var c=t[u-1>=0?u-1:t.length-1],h=t[u],l=t[(u+1)%t.length],f=e[u<e.length?u:e.length-1];if(0!==f){var d=i.normalise({x:h.y-c.y,y:c.x-h.x}),p=i.normalise({x:l.y-h.y,y:h.x-l.x}),v=Math.sqrt(2*Math.pow(f,2)),g=i.mult(o.clone(d),f),m=i.normalise(i.mult(i.add(d,p),.5)),y=i.sub(h,i.mult(m,v)),b=n;-1===n&&(b=1.75*Math.pow(f,.32)),(b=o.clamp(b,r,s))%2===1&&(b+=1);for(var w=Math.acos(i.dot(d,p))/b,x=0;x<b;x++)a.push(i.add(i.rotate(g,w*x),y))}else a.push(h)}return a},r.clockwiseSort=function(t){var e=r.mean(t);return t.sort((function(t,n){return i.angle(e,t)-i.angle(e,n)})),t},r.isConvex=function(t){var e,n,r,i,o=0,s=t.length;if(s<3)return null;for(e=0;e<s;e++)if(r=(e+2)%s,i=(t[n=(e+1)%s].x-t[e].x)*(t[r].y-t[n].y),(i-=(t[n].y-t[e].y)*(t[r].x-t[n].x))<0?o|=1:i>0&&(o|=2),3===o)return!1;return 0!==o||null},r.hull=function(t){var e,n,r=[],o=[];for((t=t.slice(0)).sort((function(t,e){var n=t.x-e.x;return 0!==n?n:t.y-e.y})),n=0;n<t.length;n+=1){for(e=t[n];o.length>=2&&i.cross3(o[o.length-2],o[o.length-1],e)<=0;)o.pop();o.push(e)}for(n=t.length-1;n>=0;n-=1){for(e=t[n];r.length>=2&&i.cross3(r[r.length-2],r[r.length-1],e)<=0;)r.pop();r.push(e)}return r.pop(),o.pop(),r.concat(o)}},function(t,e,n){var r=n(0),i=n(66),o=n(300),s=n(301),a=n(56),u=n(170),c=new r({initialize:function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.type=a.CIRCLE,this.x=t,this.y=e,this._radius=n,this._diameter=2*n},contains:function(t,e){return i(this,t,e)},getPoint:function(t,e){return o(this,t,e)},getPoints:function(t,e,n){return s(this,t,e,n)},getRandomPoint:function(t){return u(this,t)},setTo:function(t,e,n){return this.x=t,this.y=e,this._radius=n,this._diameter=2*n,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(t){this._radius=t,this._diameter=2*t}},diameter:{get:function(){return this._diameter},set:function(t){this._diameter=t,this._radius=.5*t}},left:{get:function(){return this.x-this._radius},set:function(t){this.x=t+this._radius}},right:{get:function(){return this.x+this._radius},set:function(t){this.x=t-this._radius}},top:{get:function(){return this.y-this._radius},set:function(t){this.y=t+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(t){this.y=t-this._radius}}});t.exports=c},function(t,e){t.exports=function(t,e,n){return t.radius>0&&e>=t.left&&e<=t.right&&n>=t.top&&n<=t.bottom&&(t.x-e)*(t.x-e)+(t.y-n)*(t.y-n)<=t.radius*t.radius}},function(t,e){t.exports=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}},function(t,e){t.exports=function(t,e,n){var r=n-e;return e+((t-e)%r+r)%r}},function(t,e,n){var r=n(0),i=n(39),o=1e-6,s=new r({initialize:function(t){this.val=new Float32Array(16),t?this.copy(t):this.identity()},clone:function(){return new s(this)},set:function(t){return this.copy(t)},setValues:function(t,e,n,r,i,o,s,a,u,c,h,l,f,d,p,v){var g=this.val;return g[0]=t,g[1]=e,g[2]=n,g[3]=r,g[4]=i,g[5]=o,g[6]=s,g[7]=a,g[8]=u,g[9]=c,g[10]=h,g[11]=l,g[12]=f,g[13]=d,g[14]=p,g[15]=v,this},copy:function(t){var e=t.val;return this.setValues(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])},fromArray:function(t){return this.setValues(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(t,e,n){var r=a.fromQuat(n).val,i=e.x,o=e.y,s=e.z;return this.setValues(r[0]*i,r[1]*i,r[2]*i,0,r[4]*o,r[5]*o,r[6]*o,0,r[8]*s,r[9]*s,r[10]*s,0,t.x,t.y,t.z,1)},xyz:function(t,e,n){this.identity();var r=this.val;return r[12]=t,r[13]=e,r[14]=n,this},scaling:function(t,e,n){this.zero();var r=this.val;return r[0]=t,r[5]=e,r[10]=n,r[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var t=this.val,e=t[1],n=t[2],r=t[3],i=t[6],o=t[7],s=t[11];return t[1]=t[4],t[2]=t[8],t[3]=t[12],t[4]=e,t[6]=t[9],t[7]=t[13],t[8]=n,t[9]=i,t[11]=t[14],t[12]=r,t[13]=o,t[14]=s,this},getInverse:function(t){return this.copy(t),this.invert()},invert:function(){var t=this.val,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],c=t[8],h=t[9],l=t[10],f=t[11],d=t[12],p=t[13],v=t[14],g=t[15],m=e*s-n*o,y=e*a-r*o,b=e*u-i*o,w=n*a-r*s,x=n*u-i*s,_=r*u-i*a,T=c*p-h*d,E=c*v-l*d,S=c*g-f*d,k=h*v-l*p,A=h*g-f*p,O=l*g-f*v,C=m*O-y*A+b*k+w*S-x*E+_*T;return C?(C=1/C,this.setValues((s*O-a*A+u*k)*C,(r*A-n*O-i*k)*C,(p*_-v*x+g*w)*C,(l*x-h*_-f*w)*C,(a*S-o*O-u*E)*C,(e*O-r*S+i*E)*C,(v*b-d*_-g*y)*C,(c*_-l*b+f*y)*C,(o*A-s*S+u*T)*C,(n*S-e*A-i*T)*C,(d*x-p*b+g*m)*C,(h*b-c*x-f*m)*C,(s*E-o*k-a*T)*C,(e*k-n*E+r*T)*C,(p*y-d*w-v*m)*C,(c*w-h*y+l*m)*C)):this},adjoint:function(){var t=this.val,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],c=t[8],h=t[9],l=t[10],f=t[11],d=t[12],p=t[13],v=t[14],g=t[15];return this.setValues(s*(l*g-f*v)-h*(a*g-u*v)+p*(a*f-u*l),-(n*(l*g-f*v)-h*(r*g-i*v)+p*(r*f-i*l)),n*(a*g-u*v)-s*(r*g-i*v)+p*(r*u-i*a),-(n*(a*f-u*l)-s*(r*f-i*l)+h*(r*u-i*a)),-(o*(l*g-f*v)-c*(a*g-u*v)+d*(a*f-u*l)),e*(l*g-f*v)-c*(r*g-i*v)+d*(r*f-i*l),-(e*(a*g-u*v)-o*(r*g-i*v)+d*(r*u-i*a)),e*(a*f-u*l)-o*(r*f-i*l)+c*(r*u-i*a),o*(h*g-f*p)-c*(s*g-u*p)+d*(s*f-u*h),-(e*(h*g-f*p)-c*(n*g-i*p)+d*(n*f-i*h)),e*(s*g-u*p)-o*(n*g-i*p)+d*(n*u-i*s),-(e*(s*f-u*h)-o*(n*f-i*h)+c*(n*u-i*s)),-(o*(h*v-l*p)-c*(s*v-a*p)+d*(s*l-a*h)),e*(h*v-l*p)-c*(n*v-r*p)+d*(n*l-r*h),-(e*(s*v-a*p)-o*(n*v-r*p)+d*(n*a-r*s)),e*(s*l-a*h)-o*(n*l-r*h)+c*(n*a-r*s))},determinant:function(){var t=this.val,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],c=t[8],h=t[9],l=t[10],f=t[11],d=t[12],p=t[13],v=t[14],g=t[15];return(e*s-n*o)*(l*g-f*v)-(e*a-r*o)*(h*g-f*p)+(e*u-i*o)*(h*v-l*p)+(n*a-r*s)*(c*g-f*d)-(n*u-i*s)*(c*v-l*d)+(r*u-i*a)*(c*p-h*d)},multiply:function(t){var e=this.val,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],h=e[8],l=e[9],f=e[10],d=e[11],p=e[12],v=e[13],g=e[14],m=e[15],y=t.val,b=y[0],w=y[1],x=y[2],_=y[3];return e[0]=b*n+w*s+x*h+_*p,e[1]=b*r+w*a+x*l+_*v,e[2]=b*i+w*u+x*f+_*g,e[3]=b*o+w*c+x*d+_*m,b=y[4],w=y[5],x=y[6],_=y[7],e[4]=b*n+w*s+x*h+_*p,e[5]=b*r+w*a+x*l+_*v,e[6]=b*i+w*u+x*f+_*g,e[7]=b*o+w*c+x*d+_*m,b=y[8],w=y[9],x=y[10],_=y[11],e[8]=b*n+w*s+x*h+_*p,e[9]=b*r+w*a+x*l+_*v,e[10]=b*i+w*u+x*f+_*g,e[11]=b*o+w*c+x*d+_*m,b=y[12],w=y[13],x=y[14],_=y[15],e[12]=b*n+w*s+x*h+_*p,e[13]=b*r+w*a+x*l+_*v,e[14]=b*i+w*u+x*f+_*g,e[15]=b*o+w*c+x*d+_*m,this},multiplyLocal:function(t){var e=this.val,n=t.val;return this.setValues(e[0]*n[0]+e[1]*n[4]+e[2]*n[8]+e[3]*n[12],e[0]*n[1]+e[1]*n[5]+e[2]*n[9]+e[3]*n[13],e[0]*n[2]+e[1]*n[6]+e[2]*n[10]+e[3]*n[14],e[0]*n[3]+e[1]*n[7]+e[2]*n[11]+e[3]*n[15],e[4]*n[0]+e[5]*n[4]+e[6]*n[8]+e[7]*n[12],e[4]*n[1]+e[5]*n[5]+e[6]*n[9]+e[7]*n[13],e[4]*n[2]+e[5]*n[6]+e[6]*n[10]+e[7]*n[14],e[4]*n[3]+e[5]*n[7]+e[6]*n[11]+e[7]*n[15],e[8]*n[0]+e[9]*n[4]+e[10]*n[8]+e[11]*n[12],e[8]*n[1]+e[9]*n[5]+e[10]*n[9]+e[11]*n[13],e[8]*n[2]+e[9]*n[6]+e[10]*n[10]+e[11]*n[14],e[8]*n[3]+e[9]*n[7]+e[10]*n[11]+e[11]*n[15],e[12]*n[0]+e[13]*n[4]+e[14]*n[8]+e[15]*n[12],e[12]*n[1]+e[13]*n[5]+e[14]*n[9]+e[15]*n[13],e[12]*n[2]+e[13]*n[6]+e[14]*n[10]+e[15]*n[14],e[12]*n[3]+e[13]*n[7]+e[14]*n[11]+e[15]*n[15])},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.val,r=e.val,i=n[0],o=n[4],s=n[8],a=n[12],u=n[1],c=n[5],h=n[9],l=n[13],f=n[2],d=n[6],p=n[10],v=n[14],g=n[3],m=n[7],y=n[11],b=n[15],w=r[0],x=r[4],_=r[8],T=r[12],E=r[1],S=r[5],k=r[9],A=r[13],O=r[2],C=r[6],P=r[10],I=r[14],R=r[3],M=r[7],N=r[11],L=r[15];return this.setValues(i*w+o*E+s*O+a*R,u*w+c*E+h*O+l*R,f*w+d*E+p*O+v*R,g*w+m*E+y*O+b*R,i*x+o*S+s*C+a*M,u*x+c*S+h*C+l*M,f*x+d*S+p*C+v*M,g*x+m*S+y*C+b*M,i*_+o*k+s*P+a*N,u*_+c*k+h*P+l*N,f*_+d*k+p*P+v*N,g*_+m*k+y*P+b*N,i*T+o*A+s*I+a*L,u*T+c*A+h*I+l*L,f*T+d*A+p*I+v*L,g*T+m*A+y*I+b*L)},translate:function(t){return this.translateXYZ(t.x,t.y,t.z)},translateXYZ:function(t,e,n){var r=this.val;return r[12]=r[0]*t+r[4]*e+r[8]*n+r[12],r[13]=r[1]*t+r[5]*e+r[9]*n+r[13],r[14]=r[2]*t+r[6]*e+r[10]*n+r[14],r[15]=r[3]*t+r[7]*e+r[11]*n+r[15],this},scale:function(t){return this.scaleXYZ(t.x,t.y,t.z)},scaleXYZ:function(t,e,n){var r=this.val;return r[0]=r[0]*t,r[1]=r[1]*t,r[2]=r[2]*t,r[3]=r[3]*t,r[4]=r[4]*e,r[5]=r[5]*e,r[6]=r[6]*e,r[7]=r[7]*e,r[8]=r[8]*n,r[9]=r[9]*n,r[10]=r[10]*n,r[11]=r[11]*n,this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,s=t.y,a=t.z,u=i*o,c=i*s;return this.setValues(u*o+n,u*s-r*a,u*a+r*s,0,u*s+r*a,c*s+n,c*a-r*o,0,u*a-r*s,c*a+r*o,i*a*a+n,0,0,0,0,1)},rotate:function(t,e){var n=this.val,r=e.x,i=e.y,s=e.z,a=Math.sqrt(r*r+i*i+s*s);if(Math.abs(a)<o)return this;r*=a=1/a,i*=a,s*=a;var u=Math.sin(t),c=Math.cos(t),h=1-c,l=n[0],f=n[1],d=n[2],p=n[3],v=n[4],g=n[5],m=n[6],y=n[7],b=n[8],w=n[9],x=n[10],_=n[11],T=n[12],E=n[13],S=n[14],k=n[15],A=r*r*h+c,O=i*r*h+s*u,C=s*r*h-i*u,P=r*i*h-s*u,I=i*i*h+c,R=s*i*h+r*u,M=r*s*h+i*u,N=i*s*h-r*u,L=s*s*h+c;return this.setValues(l*A+v*O+b*C,f*A+g*O+w*C,d*A+m*O+x*C,p*A+y*O+_*C,l*P+v*I+b*R,f*P+g*I+w*R,d*P+m*I+x*R,p*P+y*I+_*R,l*M+v*N+b*L,f*M+g*N+w*L,d*M+m*N+x*L,p*M+y*N+_*L,T,E,S,k)},rotateX:function(t){var e=this.val,n=Math.sin(t),r=Math.cos(t),i=e[4],o=e[5],s=e[6],a=e[7],u=e[8],c=e[9],h=e[10],l=e[11];return e[4]=i*r+u*n,e[5]=o*r+c*n,e[6]=s*r+h*n,e[7]=a*r+l*n,e[8]=u*r-i*n,e[9]=c*r-o*n,e[10]=h*r-s*n,e[11]=l*r-a*n,this},rotateY:function(t){var e=this.val,n=Math.sin(t),r=Math.cos(t),i=e[0],o=e[1],s=e[2],a=e[3],u=e[8],c=e[9],h=e[10],l=e[11];return e[0]=i*r-u*n,e[1]=o*r-c*n,e[2]=s*r-h*n,e[3]=a*r-l*n,e[8]=i*n+u*r,e[9]=o*n+c*r,e[10]=s*n+h*r,e[11]=a*n+l*r,this},rotateZ:function(t){var e=this.val,n=Math.sin(t),r=Math.cos(t),i=e[0],o=e[1],s=e[2],a=e[3],u=e[4],c=e[5],h=e[6],l=e[7];return e[0]=i*r+u*n,e[1]=o*r+c*n,e[2]=s*r+h*n,e[3]=a*r+l*n,e[4]=u*r-i*n,e[5]=c*r-o*n,e[6]=h*r-s*n,e[7]=l*r-a*n,this},fromRotationTranslation:function(t,e){var n=t.x,r=t.y,i=t.z,o=t.w,s=n+n,a=r+r,u=i+i,c=n*s,h=n*a,l=n*u,f=r*a,d=r*u,p=i*u,v=o*s,g=o*a,m=o*u;return this.setValues(1-(f+p),h+m,l-g,0,h-m,1-(c+p),d+v,0,l+g,d-v,1-(c+f),0,e.x,e.y,e.z,1)},fromQuat:function(t){var e=t.x,n=t.y,r=t.z,i=t.w,o=e+e,s=n+n,a=r+r,u=e*o,c=e*s,h=e*a,l=n*s,f=n*a,d=r*a,p=i*o,v=i*s,g=i*a;return this.setValues(1-(l+d),c+g,h-v,0,c-g,1-(u+d),f+p,0,h+v,f-p,1-(u+l),0,0,0,0,1)},frustum:function(t,e,n,r,i,o){var s=1/(e-t),a=1/(r-n),u=1/(i-o);return this.setValues(2*i*s,0,0,0,0,2*i*a,0,0,(e+t)*s,(r+n)*a,(o+i)*u,-1,0,0,o*i*2*u,0)},perspective:function(t,e,n,r){var i=1/Math.tan(t/2),o=1/(n-r);return this.setValues(i/e,0,0,0,0,i,0,0,0,0,(r+n)*o,-1,0,0,2*r*n*o,0)},perspectiveLH:function(t,e,n,r){return this.setValues(2*n/t,0,0,0,0,2*n/e,0,0,0,0,-r/(n-r),1,0,0,n*r/(n-r),0)},ortho:function(t,e,n,r,i,o){var s=t-e,a=n-r,u=i-o;return s=0===s?s:1/s,a=0===a?a:1/a,u=0===u?u:1/u,this.setValues(-2*s,0,0,0,0,-2*a,0,0,0,0,2*u,0,(t+e)*s,(r+n)*a,(o+i)*u,1)},lookAtRH:function(t,e,n){var r=this.val;return l.subVectors(t,e),0===l.getLengthSquared()&&(l.z=1),l.normalize(),c.crossVectors(n,l),0===c.getLengthSquared()&&(1===Math.abs(n.z)?l.x+=1e-4:l.z+=1e-4,l.normalize(),c.crossVectors(n,l)),c.normalize(),h.crossVectors(l,c),r[0]=c.x,r[1]=c.y,r[2]=c.z,r[4]=h.x,r[5]=h.y,r[6]=h.z,r[8]=l.x,r[9]=l.y,r[10]=l.z,this},lookAt:function(t,e,n){var r=t.x,i=t.y,s=t.z,a=n.x,u=n.y,c=n.z,h=e.x,l=e.y,f=e.z;if(Math.abs(r-h)<o&&Math.abs(i-l)<o&&Math.abs(s-f)<o)return this.identity();var d=r-h,p=i-l,v=s-f,g=1/Math.sqrt(d*d+p*p+v*v),m=u*(v*=g)-c*(p*=g),y=c*(d*=g)-a*v,b=a*p-u*d;(g=Math.sqrt(m*m+y*y+b*b))?(m*=g=1/g,y*=g,b*=g):(m=0,y=0,b=0);var w=p*b-v*y,x=v*m-d*b,_=d*y-p*m;return(g=Math.sqrt(w*w+x*x+_*_))?(w*=g=1/g,x*=g,_*=g):(w=0,x=0,_=0),this.setValues(m,w,d,0,y,x,p,0,b,_,v,0,-(m*r+y*i+b*s),-(w*r+x*i+_*s),-(d*r+p*i+v*s),1)},yawPitchRoll:function(t,e,n){this.zero(),a.zero(),u.zero();var r=this.val,i=a.val,o=u.val,s=Math.sin(n),c=Math.cos(n);return r[10]=1,r[15]=1,r[0]=c,r[1]=s,r[4]=-s,r[5]=c,s=Math.sin(e),c=Math.cos(e),i[0]=1,i[15]=1,i[5]=c,i[10]=c,i[9]=-s,i[6]=s,s=Math.sin(t),c=Math.cos(t),o[5]=1,o[15]=1,o[0]=c,o[2]=-s,o[8]=s,o[10]=c,this.multiplyLocal(a),this.multiplyLocal(u),this},setWorldMatrix:function(t,e,n,r,i){return this.yawPitchRoll(t.y,t.x,t.z),a.scaling(n.x,n.y,n.z),u.xyz(e.x,e.y,e.z),this.multiplyLocal(a),this.multiplyLocal(u),r&&this.multiplyLocal(r),i&&this.multiplyLocal(i),this},multiplyToMat4:function(t,e){var n=this.val,r=t.val,i=n[0],o=n[1],s=n[2],a=n[3],u=n[4],c=n[5],h=n[6],l=n[7],f=n[8],d=n[9],p=n[10],v=n[11],g=n[12],m=n[13],y=n[14],b=n[15],w=r[0],x=r[1],_=r[2],T=r[3],E=r[4],S=r[5],k=r[6],A=r[7],O=r[8],C=r[9],P=r[10],I=r[11],R=r[12],M=r[13],N=r[14],L=r[15];return e.setValues(w*i+x*u+_*f+T*g,x*o+x*c+_*d+T*m,_*s+x*h+_*p+T*y,T*a+x*l+_*v+T*b,E*i+S*u+k*f+A*g,E*o+S*c+k*d+A*m,E*s+S*h+k*p+A*y,E*a+S*l+k*v+A*b,O*i+C*u+P*f+I*g,O*o+C*c+P*d+I*m,O*s+C*h+P*p+I*y,O*a+C*l+P*v+I*b,R*i+M*u+N*f+L*g,R*o+M*c+N*d+L*m,R*s+M*h+N*p+L*y,R*a+M*l+N*v+L*b)},fromRotationXYTranslation:function(t,e,n){var r=e.x,i=e.y,o=e.z,s=Math.sin(t.x),a=Math.cos(t.x),u=Math.sin(t.y),c=Math.cos(t.y),h=r,l=i,f=o,d=-s,p=0-d*u,v=0-a*u,g=d*c,m=a*c;return n||(h=c*r+u*o,l=p*r+a*i+g*o,f=v*r+s*i+m*o),this.setValues(c,p,v,0,0,a,s,0,u,g,m,0,h,l,f,1)},getMaxScaleOnAxis:function(){var t=this.val,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}}),a=new s,u=new s,c=new i,h=new i,l=new i;t.exports=s},function(t,e,n){t.exports={COMPLETE:n(987),DECODED:n(988),DECODED_ALL:n(989),DESTROY:n(990),DETUNE:n(991),GLOBAL_DETUNE:n(992),GLOBAL_MUTE:n(993),GLOBAL_RATE:n(994),GLOBAL_VOLUME:n(995),LOOP:n(996),LOOPED:n(997),MUTE:n(998),PAN:n(999),PAUSE_ALL:n(1e3),PAUSE:n(1001),PLAY:n(1002),RATE:n(1003),RESUME_ALL:n(1004),RESUME:n(1005),SEEK:n(1006),STOP_ALL:n(1007),STOP:n(1008),UNLOCKED:n(1009),VOLUME:n(1010)}},function(t,e,n){var r=n(0),i=n(21),o=n(23),s=n(8),a=n(2),u=n(7),c=new r({Extends:o,initialize:function t(e,n,r,i,s){var c,h="png";if(u(n)){var l=n;n=a(l,"key"),r=a(l,"url"),c=a(l,"normalMap"),i=a(l,"xhrSettings"),h=a(l,"extension",h),s=a(l,"frameConfig")}Array.isArray(r)&&(c=r[1],r=r[0]);var f={type:"image",cache:e.textureManager,extension:h,responseType:"blob",key:n,url:r,xhrSettings:i,config:s};if(o.call(this,e,f),c){var d=new t(e,this.key,c,i,s);d.type="normalMap",this.setLink(d),e.addFile(d)}},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var t=this;this.data.onload=function(){o.revokeObjectURL(t.data),t.onProcessComplete()},this.data.onerror=function(){o.revokeObjectURL(t.data),t.onProcessError()},o.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var t,e=this.linkFile;e&&e.state===i.FILE_COMPLETE?(t="image"===this.type?this.cache.addImage(this.key,this.data,e.data):this.cache.addImage(e.key,e.data,this.data),this.pendingDestroy(t),e.pendingDestroy(t)):e||(t=this.cache.addImage(this.key,this.data),this.pendingDestroy(t))}});s.register("image",(function(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new c(this,t[r]));else this.addFile(new c(this,t,e,n));return this})),t.exports=c},function(t,e){t.exports=function(t,e){e?t.setCollision(!0,!0,!0,!0,!1):t.resetCollision(!1)}},function(t,e,n){var r=n(164),i=n(0),o=n(11),s=n(15),a=n(1065),u=new i({Extends:s,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Size,o.TextureCrop,o.Tint,o.Transform,o.Visible,a],initialize:function(t,e,n,i,o){s.call(this,t,"Sprite"),this._crop=this.resetCropObject(),this.anims=new r(this),this.setTexture(i,o),this.setPosition(e,n),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(t,e){this.anims.update(t,e)},play:function(t,e){return this.anims.play(t,e)},playReverse:function(t,e){return this.anims.playReverse(t,e)},playAfterDelay:function(t,e){return this.anims.playAfterDelay(t,e)},playAfterRepeat:function(t,e){return this.anims.playAfterRepeat(t,e)},chain:function(t){return this.anims.chain(t)},stop:function(){return this.anims.stop()},stopAfterDelay:function(t){return this.anims.stopAfterDelay(t)},stopAfterRepeat:function(t){return this.anims.stopAfterRepeat(t)},stopOnFrame:function(t){return this.anims.stopOnFrame(t)},toJSON:function(){return o.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});t.exports=u},function(t,e){t.exports=function(t,e){if(!(e>=t.length)){for(var n=t.length-1,r=t[e],i=e;i<n;i++)t[i]=t[i+1];return t.length=n,r}}},function(t,e,n){t.exports={ADDED_TO_SCENE:n(643),DESTROY:n(644),REMOVED_FROM_SCENE:n(645),VIDEO_COMPLETE:n(646),VIDEO_CREATED:n(647),VIDEO_ERROR:n(648),VIDEO_LOOP:n(649),VIDEO_PLAY:n(650),VIDEO_SEEKED:n(651),VIDEO_SEEKING:n(652),VIDEO_STOP:n(653),VIDEO_TIMEOUT:n(654),VIDEO_UNLOCKED:n(655)}},function(t,e){t.exports=function(t,e,n,r){return void 0===n&&(n=0),0===e?t:(t-=n,t=e*Math.floor(t/e),r?(n+t)/e:n+t)}},function(t,e){t.exports=function(t){var e={};for(var n in t)Array.isArray(t[n])?e[n]=t[n].slice(0):e[n]=t[n];return e}},function(t,e){t.exports=function(t,e,n,r){var i=t.length;if(e<0||e>i||e>=n||n>i||e+n>i){if(r)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},function(t,e){function n(t,e){return String(t).localeCompare(e)}function r(t,e,n,r){var i,o,s,a,u,c=t.length,h=0,l=2*n;for(i=0;i<c;i+=l)for(s=(o=i+n)+n,o>c&&(o=c),s>c&&(s=c),a=i,u=o;;)if(a<o&&u<s)e(t[a],t[u])<=0?r[h++]=t[a++]:r[h++]=t[u++];else if(a<o)r[h++]=t[a++];else{if(!(u<s))break;r[h++]=t[u++]}}t.exports=function(t,e){void 0===e&&(e=n);var i=function(t,e){var n=t.length;if(n<=1)return t;for(var i=new Array(n),o=1;o<n;o*=2){r(t,e,o,i);var s=t;t=i,i=s}return t}(t,e);return i!==t&&r(i,null,t.length,t),t}},function(t,e,n){var r=n(134),i=n(205);t.exports=function(t,e){var n=r.Power0;if("string"===typeof t)if(r.hasOwnProperty(t))n=r[t];else{var o="";t.indexOf(".")&&("in"===(o=t.substr(t.indexOf(".")+1)).toLowerCase()?o="easeIn":"out"===o.toLowerCase()?o="easeOut":"inout"===o.toLowerCase()&&(o="easeInOut")),t=i(t.substr(0,t.indexOf(".")+1)+o),r.hasOwnProperty(t)&&(n=r[t])}else"function"===typeof t?n=t:Array.isArray(t)&&t.length;if(!e)return n;var s=e.slice(0);return s.unshift(0),function(t){return s[0]=t,n.apply(this,s)}}},function(t,e,n){var r=n(12);t.exports=function(t,e,n,i,o){var s=t.strokeTint,a=r.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*n);s.TL=a,s.TR=a,s.BL=a,s.BR=a;var u=e.pathData,c=u.length-1,h=e.lineWidth,l=h/2,f=u[0]-i,d=u[1]-o;e.closePath||(c-=2);for(var p=2;p<c;p+=2){var v=u[p]-i,g=u[p+1]-o;t.batchLine(f,d,v,g,l,l,h,p-2,!!e.closePath&&p===c-1),f=v,d=g}}},function(t,e,n){var r=n(0),i=n(115),o=n(476),s=n(477),a=n(56),u=n(47),c=n(181),h=new r({initialize:function(t,e,n,r,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=0),this.type=a.TRIANGLE,this.x1=t,this.y1=e,this.x2=n,this.y2=r,this.x3=i,this.y3=o},contains:function(t,e){return i(this,t,e)},getPoint:function(t,e){return o(this,t,e)},getPoints:function(t,e,n){return s(this,t,e,n)},getRandomPoint:function(t){return c(this,t)},setTo:function(t,e,n,r,i,o){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=0),this.x1=t,this.y1=e,this.x2=n,this.y2=r,this.x3=i,this.y3=o,this},getLineA:function(t){return void 0===t&&(t=new u),t.setTo(this.x1,this.y1,this.x2,this.y2),t},getLineB:function(t){return void 0===t&&(t=new u),t.setTo(this.x2,this.y2,this.x3,this.y3),t},getLineC:function(t){return void 0===t&&(t=new u),t.setTo(this.x3,this.y3,this.x1,this.y1),t},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(t){var e=0;e=this.x1<=this.x2&&this.x1<=this.x3?this.x1-t:this.x2<=this.x1&&this.x2<=this.x3?this.x2-t:this.x3-t,this.x1-=e,this.x2-=e,this.x3-=e}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(t){var e=0;e=this.x1>=this.x2&&this.x1>=this.x3?this.x1-t:this.x2>=this.x1&&this.x2>=this.x3?this.x2-t:this.x3-t,this.x1-=e,this.x2-=e,this.x3-=e}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(t){var e=0;e=this.y1<=this.y2&&this.y1<=this.y3?this.y1-t:this.y2<=this.y1&&this.y2<=this.y3?this.y2-t:this.y3-t,this.y1-=e,this.y2-=e,this.y3-=e}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(t){var e=0;e=this.y1>=this.y2&&this.y1>=this.y3?this.y1-t:this.y2>=this.y1&&this.y2>=this.y3?this.y2-t:this.y3-t,this.y1-=e,this.y2-=e,this.y3-=e}}});t.exports=h},function(t,e){var n={};t.exports=n,n.create=function(t,e){return{x:t||0,y:e||0}},n.clone=function(t){return{x:t.x,y:t.y}},n.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},n.magnitudeSquared=function(t){return t.x*t.x+t.y*t.y},n.rotate=function(t,e,n){var r=Math.cos(e),i=Math.sin(e);n||(n={});var o=t.x*r-t.y*i;return n.y=t.x*i+t.y*r,n.x=o,n},n.rotateAbout=function(t,e,n,r){var i=Math.cos(e),o=Math.sin(e);r||(r={});var s=n.x+((t.x-n.x)*i-(t.y-n.y)*o);return r.y=n.y+((t.x-n.x)*o+(t.y-n.y)*i),r.x=s,r},n.normalise=function(t){var e=n.magnitude(t);return 0===e?{x:0,y:0}:{x:t.x/e,y:t.y/e}},n.dot=function(t,e){return t.x*e.x+t.y*e.y},n.cross=function(t,e){return t.x*e.y-t.y*e.x},n.cross3=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)},n.add=function(t,e,n){return n||(n={}),n.x=t.x+e.x,n.y=t.y+e.y,n},n.sub=function(t,e,n){return n||(n={}),n.x=t.x-e.x,n.y=t.y-e.y,n},n.mult=function(t,e){return{x:t.x*e,y:t.y*e}},n.div=function(t,e){return{x:t.x/e,y:t.y/e}},n.perp=function(t,e){return{x:(e=!0===e?-1:1)*-t.y,y:e*t.x}},n.neg=function(t){return{x:-t.x,y:-t.y}},n.angle=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},n._temp=[n.create(),n.create(),n.create(),n.create(),n.create(),n.create()]},function(t,e){var n={};t.exports=n,n.create=function(t){var e={min:{x:0,y:0},max:{x:0,y:0}};return t&&n.update(e,t),e},n.update=function(t,e,n){t.min.x=1/0,t.max.x=-1/0,t.min.y=1/0,t.max.y=-1/0;for(var r=0;r<e.length;r++){var i=e[r];i.x>t.max.x&&(t.max.x=i.x),i.x<t.min.x&&(t.min.x=i.x),i.y>t.max.y&&(t.max.y=i.y),i.y<t.min.y&&(t.min.y=i.y)}n&&(n.x>0?t.max.x+=n.x:t.min.x+=n.x,n.y>0?t.max.y+=n.y:t.min.y+=n.y)},n.contains=function(t,e){return e.x>=t.min.x&&e.x<=t.max.x&&e.y>=t.min.y&&e.y<=t.max.y},n.overlaps=function(t,e){return t.min.x<=e.max.x&&t.max.x>=e.min.x&&t.max.y>=e.min.y&&t.min.y<=e.max.y},n.translate=function(t,e){t.min.x+=e.x,t.max.x+=e.x,t.min.y+=e.y,t.max.y+=e.y},n.shift=function(t,e){var n=t.max.x-t.min.x,r=t.max.y-t.min.y;t.min.x=e.x,t.max.x=e.x+n,t.min.y=e.y,t.max.y=e.y+r}},function(t,e,n){var r=n(29),i=n(0),o=n(11),s=n(502),a=new i({Mixins:[o.Alpha,o.Flip,o.Visible],initialize:function(t,e,n,r,i,o,s,a){this.layer=t,this.index=e,this.x=n,this.y=r,this.width=i,this.height=o,this.right,this.bottom,this.baseWidth=void 0!==s?s:i,this.baseHeight=void 0!==a?a:o,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,this.collisionCallbackContext=this,this.tint=16777215,this.physics={}},containsPoint:function(t,e){return!(t<this.pixelX||e<this.pixelY||t>this.right||e>this.bottom)},copy:function(t){return this.index=t.index,this.alpha=t.alpha,this.properties=t.properties,this.visible=t.visible,this.setFlip(t.flipX,t.flipY),this.tint=t.tint,this.rotation=t.rotation,this.collideUp=t.collideUp,this.collideDown=t.collideDown,this.collideLeft=t.collideLeft,this.collideRight=t.collideRight,this.collisionCallback=t.collisionCallback,this.collisionCallbackContext=t.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(t){var e=this.tilemapLayer;return e?e.tileToWorldX(this.x,t):this.x*this.baseWidth},getRight:function(t){var e=this.tilemapLayer;return e?this.getLeft(t)+this.width*e.scaleX:this.getLeft(t)+this.width},getTop:function(t){var e=this.tilemapLayer;return e?e.tileToWorldY(this.y,t)-(this.height-this.baseHeight)*e.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(t){var e=this.tilemapLayer;return e?this.getTop(t)+this.height*e.scaleY:this.getTop(t)+this.height},getBounds:function(t,e){return void 0===e&&(e=new s),e.x=this.getLeft(),e.y=this.getTop(),e.width=this.getRight()-e.x,e.height=this.getBottom()-e.y,e},getCenterX:function(t){return(this.getLeft(t)+this.getRight(t))/2},getCenterY:function(t){return(this.getTop(t)+this.getBottom(t))/2},intersects:function(t,e,n,r){return!(n<=this.pixelX||r<=this.pixelY||t>=this.right||e>=this.bottom)},isInteresting:function(t,e){return t&&e?this.canCollide||this.hasInterestingFace:t?this.collides:!!e&&this.hasInterestingFace},resetCollision:function(t){return void 0===t&&(t=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,t&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(t,e,n,r,i){return void 0===e&&(e=t),void 0===n&&(n=t),void 0===r&&(r=t),void 0===i&&(i=!0),this.collideLeft=t,this.collideRight=e,this.collideUp=n,this.collideDown=r,this.faceLeft=t,this.faceRight=e,this.faceTop=n,this.faceBottom=r,i&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},setCollisionCallback:function(t,e){return null===t?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=t,this.collisionCallbackContext=e),this},setSize:function(t,e,n,r){return void 0!==t&&(this.width=t),void 0!==e&&(this.height=e),void 0!==n&&(this.baseWidth=n),void 0!==r&&(this.baseHeight=r),this.updatePixelXY(),this},updatePixelXY:function(){var t=this.layer.orientation;if(t===r.ORTHOGONAL)this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight;else if(t===r.ISOMETRIC)this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5;else if(t===r.STAGGERED)this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2);else if(t===r.HEXAGONAL){var e=this.layer.hexSideLength,n=(this.baseHeight-e)/2+e;this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*n}return this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||void 0!==this.collisionCallback}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var t=this.layer.tilemapLayer;if(t){var e=t.gidMap[this.index];if(e)return e}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var t=this.tilemapLayer;return t?t.tilemap:null}}});t.exports=a},function(t,e,n){var r={};t.exports=r;var i=n(64),o=n(32),s=n(41),a=n(84),u=n(83),c=n(1393);r.rectangle=function(t,e,n,r,a){a=a||{};var u={label:"Rectangle Body",position:{x:t,y:e},vertices:i.fromPath("L 0 0 L "+n+" 0 L "+n+" "+r+" L 0 "+r)};if(a.chamfer){var c=a.chamfer;u.vertices=i.chamfer(u.vertices,c.radius,c.quality,c.qualityMin,c.qualityMax),delete a.chamfer}return s.create(o.extend({},u,a))},r.trapezoid=function(t,e,n,r,a,u){u=u||{};var c,h=n*(a*=.5),l=h+(1-2*a)*n,f=l+h;c=a<.5?"L 0 0 L "+h+" "+-r+" L "+l+" "+-r+" L "+f+" 0":"L 0 0 L "+l+" "+-r+" L "+f+" 0";var d={label:"Trapezoid Body",position:{x:t,y:e},vertices:i.fromPath(c)};if(u.chamfer){var p=u.chamfer;d.vertices=i.chamfer(d.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete u.chamfer}return s.create(o.extend({},d,u))},r.circle=function(t,e,n,i,s){i=i||{};var a={label:"Circle Body",circleRadius:n};s=s||25;var u=Math.ceil(Math.max(10,Math.min(s,n)));return u%2===1&&(u+=1),r.polygon(t,e,u,n,o.extend({},a,i))},r.polygon=function(t,e,n,a,u){if(u=u||{},n<3)return r.circle(t,e,a,u);for(var c=2*Math.PI/n,h="",l=.5*c,f=0;f<n;f+=1){var d=l+f*c,p=Math.cos(d)*a,v=Math.sin(d)*a;h+="L "+p.toFixed(3)+" "+v.toFixed(3)+" "}var g={label:"Polygon Body",position:{x:t,y:e},vertices:i.fromPath(h)};if(u.chamfer){var m=u.chamfer;g.vertices=i.chamfer(g.vertices,m.radius,m.quality,m.qualityMin,m.qualityMax),delete u.chamfer}return s.create(o.extend({},g,u))},r.fromVertices=function(t,e,n,a,u,h,l){var f,d,p,v,g,m;for(a=a||{},d=[],u="undefined"!==typeof u&&u,h="undefined"!==typeof h?h:.01,l="undefined"!==typeof l?l:10,c||o.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),o.isArray(n[0])||(n=[n]),m=0;m<n.length;m+=1)if(v=n[m],(p=i.isConvex(v))||!c)v=p?i.clockwiseSort(v):i.hull(v),d.push({position:{x:t,y:e},vertices:v});else{var y=v.map((function(t){return[t.x,t.y]}));c.makeCCW(y),!1!==h&&c.removeCollinearPoints(y,h);var b=c.quickDecomp(y);for(g=0;g<b.length;g++){var w=b[g].map((function(t){return{x:t[0],y:t[1]}}));l>0&&i.area(w)<l||d.push({position:i.centre(w),vertices:w})}}for(g=0;g<d.length;g++)d[g]=s.create(o.extend(d[g],a));return u&&r.flagCoincidentParts(d,5),d.length>1?(f=s.create(o.extend({parts:d.slice(0)},a)),s.setPosition(f,{x:t,y:e}),f):d[0]},r.flagCoincidentParts=function(t,e){void 0===e&&(e=5);for(var n=0;n<t.length;n++)for(var r=t[n],i=n+1;i<t.length;i++){var o=t[i];if(a.overlaps(r.bounds,o.bounds))for(var s=r.vertices,c=o.vertices,h=0;h<r.vertices.length;h++)for(var l=0;l<o.vertices.length;l++){var f=u.magnitudeSquared(u.sub(s[(h+1)%s.length],c[l])),d=u.magnitudeSquared(u.sub(s[h],c[(l+1)%c.length]));f<e&&d<e&&(s[h].isInternal=!0,c[l].isInternal=!0)}}return t}},function(t,e){t.exports=function(t){return t.x-t.width*t.originX+.5*t.width}},function(t,e){t.exports=function(t,e){var n=t.width*t.originX;return t.x=e+n-.5*t.width,t}},function(t,e){t.exports=function(t){return t.y-t.height*t.originY+.5*t.height}},function(t,e){t.exports=function(t,e){var n=t.height*t.originY;return t.y=e+n-.5*t.height,t}},function(t,e,n){t.exports={POST_RENDER:n(628),PRE_RENDER:n(629),RENDER:n(630),RESIZE:n(631)}},function(t,e){t.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"}},function(t,e,n){var r=n(74);t.exports=function(t,e,n,i){var o;if(void 0===i&&(i=t),!Array.isArray(e))return-1!==(o=t.indexOf(e))?(r(t,o),n&&n.call(i,e),e):null;for(var s=e.length-1,a=[];s>=0;){var u=e[s];-1!==(o=t.indexOf(u))&&(r(t,o),a.push(u),n&&n.call(i,u)),s--}return a}},function(t,e,n){var r=n(0),i=n(199),o=n(10),s=n(3),a=new r({initialize:function(t){this.type=t,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new s,this._tmpVec2B=new s},draw:function(t,e){return void 0===e&&(e=32),t.strokePoints(this.getPoints(e))},getBounds:function(t,e){t||(t=new o),void 0===e&&(e=16);var n=this.getLength();e>n&&(e=n/2);var r=Math.max(1,Math.round(n/e));return i(this.getSpacedPoints(r),t)},getDistancePoints:function(t){var e=this.getLength(),n=Math.max(1,e/t);return this.getSpacedPoints(n)},getEndPoint:function(t){return void 0===t&&(t=new s),this.getPointAt(1,t)},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n=[],r=this.getPoint(0,this._tmpVec2A),i=0;n.push(0);for(var o=1;o<=t;o++)i+=(e=this.getPoint(o/t,this._tmpVec2B)).distance(r),n.push(i),r.copy(e);return this.cacheArcLengths=n,n},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t,e,n){void 0===n&&(n=[]),t||(t=e?this.getLength()/e:this.defaultDivisions);for(var r=0;r<=t;r++)n.push(this.getPoint(r/t));return n},getRandomPoint:function(t){return void 0===t&&(t=new s),this.getPoint(Math.random(),t)},getSpacedPoints:function(t,e,n){void 0===n&&(n=[]),t||(t=e?this.getLength()/e:this.defaultDivisions);for(var r=0;r<=t;r++){var i=this.getUtoTmapping(r/t,null,t);n.push(this.getPoint(i))}return n},getStartPoint:function(t){return void 0===t&&(t=new s),this.getPointAt(0,t)},getTangent:function(t,e){void 0===e&&(e=new s);var n=1e-4,r=t-n,i=t+n;return r<0&&(r=0),i>1&&(i=1),this.getPoint(r,this._tmpVec2A),this.getPoint(i,e),e.subtract(this._tmpVec2A).normalize()},getTangentAt:function(t,e){var n=this.getUtoTmapping(t);return this.getTangent(n,e)},getTFromDistance:function(t,e){return t<=0?0:this.getUtoTmapping(0,t,e)},getUtoTmapping:function(t,e,n){var r,i=this.getLengths(n),o=0,s=i.length;r=e?Math.min(e,i[s-1]):t*i[s-1];for(var a,u=0,c=s-1;u<=c;)if((a=i[o=Math.floor(u+(c-u)/2)]-r)<0)u=o+1;else{if(!(a>0)){c=o;break}c=o-1}if(i[o=c]===r)return o/(s-1);var h=i[o];return(o+(r-h)/(i[o+1]-h))/(s-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});t.exports=a},function(t,e,n){t.exports={ADD:n(968),COMPLETE:n(969),FILE_COMPLETE:n(970),FILE_KEY_COMPLETE:n(971),FILE_LOAD_ERROR:n(972),FILE_LOAD:n(973),FILE_PROGRESS:n(974),POST_PROCESS:n(975),PROGRESS:n(976),START:n(977)}},function(t,e,n){var r=n(4);t.exports=function(t,e,n){void 0===n&&(n=new r);var i=t.x1,o=t.y1,s=t.x2,a=t.y2,u=e.x1,c=e.y1,h=e.x2,l=e.y2,f=(l-c)*(s-i)-(h-u)*(a-o);if(0===f)return!1;var d=((h-u)*(o-c)-(l-c)*(i-u))/f,p=((s-i)*(o-c)-(a-o)*(i-u))/f;return d>=0&&d<=1&&p>=0&&p<=1&&(n.x=i+d*(s-i),n.y=o+d*(a-o),!0)}},function(t,e){t.exports=function(t){return Math.atan2(t.y2-t.y1,t.x2-t.x1)}},function(t,e,n){var r=n(18);t.exports=function(t,e,n){return(n-e)*(t=r(t,0,1))+e}},function(t,e){t.exports=function(t,e,n){return t&&t.hasOwnProperty(e)?t[e]:n}},function(t,e){t.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(t,e,n){var r=n(0),i=n(315),o=new r({initialize:function(t,e){this.parent=t,this.events=e,e||(this.events=t.events?t.events:t),this.list={},this.values={},this._frozen=!1,!t.hasOwnProperty("sys")&&this.events&&this.events.once(i.DESTROY,this.destroy,this)},get:function(t){var e=this.list;if(Array.isArray(t)){for(var n=[],r=0;r<t.length;r++)n.push(e[t[r]]);return n}return e[t]},getAll:function(){var t={};for(var e in this.list)this.list.hasOwnProperty(e)&&(t[e]=this.list[e]);return t},query:function(t){var e={};for(var n in this.list)this.list.hasOwnProperty(n)&&n.match(t)&&(e[n]=this.list[n]);return e},set:function(t,e){if(this._frozen)return this;if("string"===typeof t)return this.setValue(t,e);for(var n in t)this.setValue(n,t[n]);return this},inc:function(t,e){if(this._frozen)return this;void 0===e&&(e=1);var n=this.get(t);return void 0===n&&(n=0),this.set(t,n+e),this},toggle:function(t){return this._frozen||this.set(t,!this.get(t)),this},setValue:function(t,e){if(this._frozen)return this;if(this.has(t))this.values[t]=e;else{var n=this,r=this.list,o=this.events,s=this.parent;Object.defineProperty(this.values,t,{enumerable:!0,configurable:!0,get:function(){return r[t]},set:function(e){if(!n._frozen){var a=r[t];r[t]=e,o.emit(i.CHANGE_DATA,s,t,e,a),o.emit(i.CHANGE_DATA_KEY+t,s,e,a)}}}),r[t]=e,o.emit(i.SET_DATA,s,t,e)}return this},each:function(t,e){for(var n=[this.parent,null,void 0],r=1;r<arguments.length;r++)n.push(arguments[r]);for(var i in this.list)n[1]=i,n[2]=this.list[i],t.apply(e,n);return this},merge:function(t,e){for(var n in void 0===e&&(e=!0),t)t.hasOwnProperty(n)&&(e||!e&&!this.has(n))&&this.setValue(n,t[n]);return this},remove:function(t){if(this._frozen)return this;if(!Array.isArray(t))return this.removeValue(t);for(var e=0;e<t.length;e++)this.removeValue(t[e]);return this},removeValue:function(t){if(this.has(t)){var e=this.list[t];delete this.list[t],delete this.values[t],this.events.emit(i.REMOVE_DATA,this.parent,t,e)}return this},pop:function(t){var e=void 0;return!this._frozen&&this.has(t)&&(e=this.list[t],delete this.list[t],delete this.values[t],this.events.emit(i.REMOVE_DATA,this.parent,t,e)),e},has:function(t){return this.list.hasOwnProperty(t)},setFreeze:function(t){return this._frozen=t,this},reset:function(){for(var t in this.list)delete this.list[t],delete this.values[t];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(i.CHANGE_DATA),this.events.off(i.SET_DATA),this.events.off(i.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(t){this._frozen=!!t}},count:{get:function(){var t=0;for(var e in this.list)void 0!==this.list[e]&&t++;return t}}});t.exports=o},function(t,e,n){var r=new(n(0))({initialize:function(t){if(this.entries={},this.size=0,Array.isArray(t))for(var e=0;e<t.length;e++)this.set(t[e][0],t[e][1])},set:function(t,e){return this.has(t)||this.size++,this.entries[t]=e,this},get:function(t){if(this.has(t))return this.entries[t]},getArray:function(){var t=[],e=this.entries;for(var n in e)t.push(e[n]);return t},has:function(t){return this.entries.hasOwnProperty(t)},delete:function(t){return this.has(t)&&(delete this.entries[t],this.size--),this},clear:function(){return Object.keys(this.entries).forEach((function(t){delete this.entries[t]}),this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var t=[],e=this.entries;for(var n in e)t.push(e[n]);return t},dump:function(){var t=this.entries;for(var e in console.group("Map"),t)console.log(e,t[e]);console.groupEnd()},each:function(t){var e=this.entries;for(var n in e)if(!1===t(n,e[n]))break;return this},contains:function(t){var e=this.entries;for(var n in e)if(e[n]===t)return!0;return!1},merge:function(t,e){void 0===e&&(e=!1);var n=this.entries,r=t.entries;for(var i in r)n.hasOwnProperty(i)&&e?n[i]=r[i]:this.set(i,r[i]);return this}});t.exports=r},function(t,e){t.exports=function(t,e,n){return t<<16|e<<8|n}},function(t,e,n){t.exports={ENTER_FULLSCREEN:n(800),FULLSCREEN_FAILED:n(801),FULLSCREEN_UNSUPPORTED:n(802),LEAVE_FULLSCREEN:n(803),ORIENTATION_CHANGE:n(804),RESIZE:n(805)}},function(t,e,n){(function(e){var n={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};t.exports=function(){if("function"===typeof importScripts)return n;var t=navigator.userAgent;/Windows/.test(t)?n.windows=!0:/Mac OS/.test(t)&&!/like Mac OS/.test(t)?navigator.maxTouchPoints&&navigator.maxTouchPoints>2?(n.iOS=!0,n.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),n.iOSVersion=parseInt(RegExp.$1,10)):n.macOS=!0:/Android/.test(t)?n.android=!0:/Linux/.test(t)?n.linux=!0:/iP[ao]d|iPhone/i.test(t)?(n.iOS=!0,navigator.appVersion.match(/OS (\d+)/),n.iOSVersion=parseInt(RegExp.$1,10),n.iPhone=-1!==t.toLowerCase().indexOf("iphone"),n.iPad=-1!==t.toLowerCase().indexOf("ipad")):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?n.kindle=!0:/CrOS/.test(t)&&(n.chromeOS=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(n.android=!1,n.iOS=!1,n.macOS=!1,n.windows=!0,n.windowsPhone=!0);var r=/Silk/.test(t);return(n.windows||n.macOS||n.linux&&!r||n.chromeOS)&&(n.desktop=!0),(n.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(n.desktop=!1),navigator.standalone&&(n.webApp=!0),"function"!==typeof importScripts&&(void 0!==window.cordova&&(n.cordova=!0),void 0!==window.ejecta&&(n.ejecta=!0)),"undefined"!==typeof e&&e.versions&&e.versions.node&&(n.node=!0),n.node&&"object"===typeof e.versions&&(n.nodeWebkit=!!e.versions["node-webkit"],n.electron=!!e.versions.electron),/Crosswalk/.test(t)&&(n.crosswalk=!0),n.pixelRatio=window.devicePixelRatio||1,n}()}).call(this,n(807))},function(t,e,n){t.exports={ADD:n(861),ERROR:n(862),LOAD:n(863),READY:n(864),REMOVE:n(865)}},function(t,e){t.exports={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}}},function(t,e,n){var r=n(0),i=n(59),o=n(2),s=n(878),a=n(879),u=n(25),c=n(12),h=n(107),l=n(58),f=new r({Extends:l,initialize:function(t){var e=t.game.renderer,n=o(t,"fragShader",s);t.fragShader=c.parseFragmentShaderMaxTextures(n,e.maxTextures),t.vertShader=o(t,"vertShader",a),t.attributes=o(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:h.UNSIGNED_BYTE,normalized:!0}]),l.call(this,t),this._tempMatrix1=new u,this._tempMatrix2=new u,this._tempMatrix3=new u,this.calcMatrix=new u,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){l.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(t,e,n){this.manager.set(this,t);var r=this._tempMatrix1,i=this._tempMatrix2,o=this._tempMatrix3,s=t.frame,a=s.glTexture,u=s.u0,h=s.v0,l=s.u1,f=s.v1,d=s.x,p=s.y,v=s.cutWidth,g=s.cutHeight,m=s.customPivot,y=t.displayOriginX,b=t.displayOriginY,w=-y+d,x=-b+p;if(t.isCropped){var _=t._crop;_.flipX===t.flipX&&_.flipY===t.flipY||s.updateCropUVs(_,t.flipX,t.flipY),u=_.u0,h=_.v0,l=_.u1,f=_.v1,v=_.width,g=_.height,w=-y+(d=_.x),x=-b+(p=_.y)}var T=1,E=1;t.flipX&&(m||(w+=-s.realWidth+2*y),T=-1),(t.flipY||s.source.isGLTexture&&!a.flipY)&&(m||(x+=-s.realHeight+2*b),E=-1),i.applyITRS(t.x,t.y,t.rotation,t.scaleX*T,t.scaleY*E),r.copyFrom(e.matrix),n?(r.multiplyWithOffset(n,-e.scrollX*t.scrollFactorX,-e.scrollY*t.scrollFactorY),i.e=t.x,i.f=t.y):(i.e-=e.scrollX*t.scrollFactorX,i.f-=e.scrollY*t.scrollFactorY),r.multiply(i,o);var S=w+v,k=x+g,A=e.roundPixels,O=o.getXRound(w,x,A),C=o.getYRound(w,x,A),P=o.getXRound(w,k,A),I=o.getYRound(w,k,A),R=o.getXRound(S,k,A),M=o.getYRound(S,k,A),N=o.getXRound(S,x,A),L=o.getYRound(S,x,A),D=c.getTintAppendFloatAlpha,F=e.alpha,j=D(t.tintTopLeft,F*t._alphaTL),B=D(t.tintTopRight,F*t._alphaTR),U=D(t.tintBottomLeft,F*t._alphaBL),V=D(t.tintBottomRight,F*t._alphaBR);this.shouldFlush(6)&&this.flush();var z=this.setGameObject(t,s);this.manager.preBatch(t),this.batchQuad(t,O,C,P,I,R,M,N,L,u,h,l,f,j,B,U,V,t.tintFill,a,z),this.manager.postBatch(t)},batchTexture:function(t,e,n,r,i,o,s,a,u,c,h,l,f,d,p,v,g,m,y,b,w,x,_,T,E,S,k,A,O,C,P,I){this.manager.set(this,t);var R=this._tempMatrix1,M=this._tempMatrix2,N=this._tempMatrix3,L=m/n+k,D=y/r+A,F=(m+b)/n+k,j=(y+w)/r+A,B=s,U=a,V=-v,z=-g;if(t.isCropped){var G=t._crop,Y=G.width,W=G.height;B=Y,U=W,s=Y,a=W;var X=m=G.x,H=y=G.y;l&&(X=b-G.x-Y),f&&(H=w-G.y-W),L=X/n+k,D=H/r+A,F=(X+Y)/n+k,j=(H+W)/r+A,V=-v+m,z=-g+y}l&&(B*=-1,V+=s),(f^=!P&&e.isRenderTexture?1:0)&&(U*=-1,z+=a);var q=V+B,K=z+U;M.applyITRS(i,o,h,u,c),R.copyFrom(O.matrix),C?(R.multiplyWithOffset(C,-O.scrollX*d,-O.scrollY*p),M.e=i,M.f=o):(M.e-=O.scrollX*d,M.f-=O.scrollY*p),R.multiply(M,N);var $=O.roundPixels,J=N.getXRound(V,z,$),Q=N.getYRound(V,z,$),Z=N.getXRound(V,K,$),tt=N.getYRound(V,K,$),et=N.getXRound(q,K,$),nt=N.getYRound(q,K,$),rt=N.getXRound(q,z,$),it=N.getYRound(q,z,$);void 0===I&&(I=this.renderer.setTexture2D(e)),t&&this.manager.preBatch(t),this.batchQuad(t,J,Q,Z,tt,et,nt,rt,it,L,D,F,j,x,_,T,E,S,e,I),t&&this.manager.postBatch(t)},batchTextureFrame:function(t,e,n,r,i,o,s){this.manager.set(this);var a=this._tempMatrix1.copyFrom(o),u=this._tempMatrix2,h=e+t.width,l=n+t.height;s?a.multiply(s,u):u=a;var f=u.getX(e,n),d=u.getY(e,n),p=u.getX(e,l),v=u.getY(e,l),g=u.getX(h,l),m=u.getY(h,l),y=u.getX(h,n),b=u.getY(h,n),w=this.renderer.setTextureSource(t.source);r=c.getTintAppendFloatAlpha(r,i),this.batchQuad(null,f,d,p,v,g,m,y,b,t.u0,t.v0,t.u1,t.v1,r,r,r,r,0,t.glTexture,w)},batchFillRect:function(t,e,n,r,i,o){this.renderer.pipelines.set(this);var s=this.calcMatrix;o&&o.multiply(i,s);var a=t+n,u=e+r,c=s.getX(t,e),h=s.getY(t,e),l=s.getX(t,u),f=s.getY(t,u),d=s.getX(a,u),p=s.getY(a,u),v=s.getX(a,e),g=s.getY(a,e),m=this.fillTint;this.batchQuad(null,c,h,l,f,d,p,v,g,0,0,1,1,m.TL,m.TR,m.BL,m.BR,2)},batchFillTriangle:function(t,e,n,r,i,o,s,a){this.renderer.pipelines.set(this);var u=this.calcMatrix;a&&a.multiply(s,u);var c=u.getX(t,e),h=u.getY(t,e),l=u.getX(n,r),f=u.getY(n,r),d=u.getX(i,o),p=u.getY(i,o),v=this.fillTint;this.batchTri(null,c,h,l,f,d,p,0,0,1,1,v.TL,v.TR,v.BL,2)},batchStrokeTriangle:function(t,e,n,r,i,o,s,a,u){var c=this.tempTriangle;c[0].x=t,c[0].y=e,c[0].width=s,c[1].x=n,c[1].y=r,c[1].width=s,c[2].x=i,c[2].y=o,c[2].width=s,c[3].x=t,c[3].y=e,c[3].width=s,this.batchStrokePath(c,s,!1,a,u)},batchFillPath:function(t,e,n){this.renderer.pipelines.set(this);var r=this.calcMatrix;n&&n.multiply(e,r);for(var o,s,a=t.length,u=this.polygonCache,c=this.fillTint.TL,h=this.fillTint.TR,l=this.fillTint.BL,f=0;f<a;++f)s=t[f],u.push(s.x,s.y);a=(o=i(u)).length;for(var d=0;d<a;d+=3){var p=2*o[d+0],v=2*o[d+1],g=2*o[d+2],m=u[p+0],y=u[p+1],b=u[v+0],w=u[v+1],x=u[g+0],_=u[g+1],T=r.getX(m,y),E=r.getY(m,y),S=r.getX(b,w),k=r.getY(b,w),A=r.getX(x,_),O=r.getY(x,_);this.batchTri(null,T,E,S,k,A,O,0,0,1,1,c,h,l,2)}u.length=0},batchStrokePath:function(t,e,n,r,i){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var o=t.length-1,s=0;s<o;s++){var a=t[s],u=t[s+1];this.batchLine(a.x,a.y,u.x,u.y,a.width/2,u.width/2,e,s,!n&&s===o-1,r,i)}},batchLine:function(t,e,n,r,i,o,s,a,u,c,h){this.renderer.pipelines.set(this);var l=this.calcMatrix;h&&h.multiply(c,l);var f=n-t,d=r-e,p=Math.sqrt(f*f+d*d),v=i*(r-e)/p,g=i*(t-n)/p,m=o*(r-e)/p,y=o*(t-n)/p,b=n-m,w=r-y,x=t-v,_=e-g,T=n+m,E=r+y,S=t+v,k=e+g,A=l.getX(b,w),O=l.getY(b,w),C=l.getX(x,_),P=l.getY(x,_),I=l.getX(T,E),R=l.getY(T,E),M=l.getX(S,k),N=l.getY(S,k),L=this.strokeTint,D=L.TL,F=L.TR,j=L.BL,B=L.BR;if(this.batchQuad(null,M,N,C,P,A,O,I,R,0,0,1,1,D,F,j,B,2),!(s<=2)){var U=this.prevQuad,V=this.firstQuad;a>0&&U[4]?this.batchQuad(null,M,N,C,P,U[0],U[1],U[2],U[3],0,0,1,1,D,F,j,B,2):(V[0]=M,V[1]=N,V[2]=C,V[3]=P,V[4]=1),u&&V[4]?this.batchQuad(null,A,O,I,R,V[0],V[1],V[2],V[3],0,0,1,1,D,F,j,B,2):(U[0]=A,U[1]=O,U[2]=I,U[3]=R,U[4]=1)}}});t.exports=f},function(t,e,n){var r=n(0),i=n(18),o=n(17),s=new r({initialize:function(t,e,n,r,i,o,s){this.texture=t,this.name=e,this.source=t.source[n],this.sourceIndex=n,this.glTexture=this.source.glTexture,this.cutX,this.cutY,this.cutWidth,this.cutHeight,this.x=0,this.y=0,this.width,this.height,this.halfWidth,this.halfHeight,this.centerX,this.centerY,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(o,s,r,i)},setSize:function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0),this.cutX=n,this.cutY=r,this.cutWidth=t,this.cutHeight=e,this.width=t,this.height=e,this.halfWidth=Math.floor(.5*t),this.halfHeight=Math.floor(.5*e),this.centerX=Math.floor(t/2),this.centerY=Math.floor(e/2);var i=this.data,o=i.cut;o.x=n,o.y=r,o.w=t,o.h=e,o.r=n+t,o.b=r+e,i.sourceSize.w=t,i.sourceSize.h=e,i.spriteSourceSize.w=t,i.spriteSourceSize.h=e,i.radius=.5*Math.sqrt(t*t+e*e);var s=i.drawImage;return s.x=n,s.y=r,s.width=t,s.height=e,this.updateUVs()},setTrim:function(t,e,n,r,i,o){var s=this.data,a=s.spriteSourceSize;return s.trim=!0,s.sourceSize.w=t,s.sourceSize.h=e,a.x=n,a.y=r,a.w=i,a.h=o,a.r=n+i,a.b=r+o,this.x=n,this.y=r,this.width=i,this.height=o,this.halfWidth=.5*i,this.halfHeight=.5*o,this.centerX=Math.floor(i/2),this.centerY=Math.floor(o/2),this.updateUVs()},setCropUVs:function(t,e,n,r,o,s,a){var u=this.cutX,c=this.cutY,h=this.cutWidth,l=this.cutHeight,f=this.realWidth,d=this.realHeight,p=u+(e=i(e,0,f)),v=c+(n=i(n,0,d)),g=r=i(r,0,f-e),m=o=i(o,0,d-n),y=this.data;if(y.trim){var b=y.spriteSourceSize,w=e+(r=i(r,0,h-e)),x=n+(o=i(o,0,l-n));if(b.r<e||b.b<n||b.x>w||b.y>x)p=0,v=0,g=0,m=0;else{var _=Math.max(b.x,e),T=Math.max(b.y,n),E=Math.min(b.r,w)-_,S=Math.min(b.b,x)-T;g=E,m=S,p=s?u+(h-(_-b.x)-E):u+(_-b.x),v=a?c+(l-(T-b.y)-S):c+(T-b.y),e=_,n=T,r=E,o=S}}else s&&(p=u+(h-e-r)),a&&(v=c+(l-n-o));var k=this.source.width,A=this.source.height;return t.u0=Math.max(0,p/k),t.v0=Math.max(0,v/A),t.u1=Math.min(1,(p+g)/k),t.v1=Math.min(1,(v+m)/A),t.x=e,t.y=n,t.cx=p,t.cy=v,t.cw=g,t.ch=m,t.width=r,t.height=o,t.flipX=s,t.flipY=a,t},updateCropUVs:function(t,e,n){return this.setCropUVs(t,t.x,t.y,t.width,t.height,e,n)},setUVs:function(t,e,n,r,i,o){var s=this.data.drawImage;return s.width=t,s.height=e,this.u0=n,this.v0=r,this.u1=i,this.v1=o,this},updateUVs:function(){var t=this.cutX,e=this.cutY,n=this.cutWidth,r=this.cutHeight,i=this.data.drawImage;i.width=n,i.height=r;var o=this.source.width,s=this.source.height;return this.u0=t/o,this.v0=e/s,this.u1=(t+n)/o,this.v1=(e+r)/s,this},updateUVsInverted:function(){var t=this.source.width,e=this.source.height;return this.u0=(this.cutX+this.cutHeight)/t,this.v0=this.cutY/e,this.u1=this.cutX/t,this.v1=(this.cutY+this.cutWidth)/e,this},clone:function(){var t=new s(this.texture,this.name,this.sourceIndex);return t.cutX=this.cutX,t.cutY=this.cutY,t.cutWidth=this.cutWidth,t.cutHeight=this.cutHeight,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.halfWidth=this.halfWidth,t.halfHeight=this.halfHeight,t.centerX=this.centerX,t.centerY=this.centerY,t.rotated=this.rotated,t.data=o(!0,t.data,this.data),t.updateUVs(),t},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});t.exports=s},function(t,e,n){var r=n(208),i=n(0),o=n(1),s=n(79),a=new i({initialize:function(t){this.parent=t,this.list=[],this.position=0,this.addCallback=o,this.removeCallback=o,this._sortKey=""},add:function(t,e){return e?r.Add(this.list,t):r.Add(this.list,t,0,this.addCallback,this)},addAt:function(t,e,n){return n?r.AddAt(this.list,t,e):r.AddAt(this.list,t,e,0,this.addCallback,this)},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,e){return t?(void 0===e&&(e=function(e,n){return e[t]-n[t]}),s(this.list,e),this):this},getByName:function(t){return r.GetFirst(this.list,"name",t)},getRandom:function(t,e){return r.GetRandom(this.list,t,e)},getFirst:function(t,e,n,i){return r.GetFirst(this.list,t,e,n,i)},getAll:function(t,e,n,i){return r.GetAll(this.list,t,e,n,i)},count:function(t,e){return r.CountAllMatching(this.list,t,e)},swap:function(t,e){r.Swap(this.list,t,e)},moveTo:function(t,e){return r.MoveTo(this.list,t,e)},moveAbove:function(t,e){return r.MoveAbove(this.list,t,e)},moveBelow:function(t,e){return r.MoveBelow(this.list,t,e)},remove:function(t,e){return e?r.Remove(this.list,t):r.Remove(this.list,t,this.removeCallback,this)},removeAt:function(t,e){return e?r.RemoveAt(this.list,t):r.RemoveAt(this.list,t,this.removeCallback,this)},removeBetween:function(t,e,n){return n?r.RemoveBetween(this.list,t,e):r.RemoveBetween(this.list,t,e,this.removeCallback,this)},removeAll:function(t){for(var e=this.list.length;e--;)this.remove(this.list[e],t);return this},bringToTop:function(t){return r.BringToTop(this.list,t)},sendToBack:function(t){return r.SendToBack(this.list,t)},moveUp:function(t){return r.MoveUp(this.list,t),t},moveDown:function(t){return r.MoveDown(this.list,t),t},reverse:function(){return this.list.reverse(),this},shuffle:function(){return r.Shuffle(this.list),this},replace:function(t,e){return r.Replace(this.list,t,e)},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(t,e,n,i){return r.SetAll(this.list,t,e,n,i),this},each:function(t,e){for(var n=[null],r=2;r<arguments.length;r++)n.push(arguments[r]);for(r=0;r<this.list.length;r++)n[0]=this.list[r],t.apply(e,n)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}}});t.exports=a},function(t,e,n){var r=n(0),i=n(112),o=n(445),s=n(446),a=n(56),u=n(180),c=new r({initialize:function(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),this.type=a.ELLIPSE,this.x=t,this.y=e,this.width=n,this.height=r},contains:function(t,e){return i(this,t,e)},getPoint:function(t,e){return o(this,t,e)},getPoints:function(t,e,n){return s(this,t,e,n)},getRandomPoint:function(t){return u(this,t)},setTo:function(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(t){this.x=t+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(t){this.x=t-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(t){this.y=t+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(t){this.y=t-this.height/2}}});t.exports=c},function(t,e){t.exports=function(t,e,n){if(t.width<=0||t.height<=0)return!1;var r=(e-t.x)/t.width,i=(n-t.y)/t.height;return(r*=r)+(i*=i)<.25}},function(t,e,n){var r=n(275),i=n(0),o=n(75),s=n(9),a=n(207),u=n(2),c=n(6),h=n(7),l=n(437),f=n(149),d=n(73),p=new i({Extends:s,initialize:function(t,e,n){s.call(this),n?e&&!Array.isArray(e)&&(e=[e]):Array.isArray(e)?h(e[0])&&(n=e,e=null):h(e)&&(n=e,e=null),this.scene=t,this.children=new f,this.isParent=!0,this.type="Group",this.classType=u(n,"classType",d),this.name=u(n,"name",""),this.active=u(n,"active",!0),this.maxSize=u(n,"maxSize",-1),this.defaultKey=u(n,"defaultKey",null),this.defaultFrame=u(n,"defaultFrame",null),this.runChildUpdate=u(n,"runChildUpdate",!1),this.createCallback=u(n,"createCallback",null),this.removeCallback=u(n,"removeCallback",null),this.createMultipleCallback=u(n,"createMultipleCallback",null),this.internalCreateCallback=u(n,"internalCreateCallback",null),this.internalRemoveCallback=u(n,"internalRemoveCallback",null),e&&this.addMultiple(e),n&&this.createMultiple(n),this.on(o.ADDED_TO_SCENE,this.addedToScene,this),this.on(o.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(t,e,n,r,i,o){if(void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=this.defaultKey),void 0===r&&(r=this.defaultFrame),void 0===i&&(i=!0),void 0===o&&(o=!0),this.isFull())return null;var s=new this.classType(this.scene,t,e,n,r);return s.addToDisplayList(this.scene.sys.displayList),s.addToUpdateList(),s.visible=i,s.setActive(o),this.add(s),s},createMultiple:function(t){if(this.isFull())return[];Array.isArray(t)||(t=[t]);var e=[];if(t[0].key)for(var n=0;n<t.length;n++){var r=this.createFromConfig(t[n]);e=e.concat(r)}return e},createFromConfig:function(t){if(this.isFull())return[];this.classType=u(t,"classType",this.classType);var e=u(t,"key",void 0),n=u(t,"frame",null),i=u(t,"visible",!0),o=u(t,"active",!0),s=[];if(void 0===e)return s;Array.isArray(e)||(e=[e]),Array.isArray(n)||(n=[n]);var a=u(t,"repeat",0),h=u(t,"randomKey",!1),f=u(t,"randomFrame",!1),d=u(t,"yoyo",!1),p=u(t,"quantity",!1),v=u(t,"frameQuantity",1),g=u(t,"max",0),m=l(e,n,{max:g,qty:p||v,random:h,randomB:f,repeat:a,yoyo:d});t.createCallback&&(this.createCallback=t.createCallback),t.removeCallback&&(this.removeCallback=t.removeCallback);for(var y=0;y<m.length;y++){var b=this.create(0,0,m[y].a,m[y].b,i,o);if(!b)break;s.push(b)}var w=c(t,"setXY.x",0),x=c(t,"setXY.y",0),_=c(t,"setXY.stepX",0),T=c(t,"setXY.stepY",0);r.SetXY(s,w,x,_,T);var E=c(t,"setRotation.value",0),S=c(t,"setRotation.step",0);r.SetRotation(s,E,S);var k=c(t,"setScale.x",1),A=c(t,"setScale.y",k),O=c(t,"setScale.stepX",0),C=c(t,"setScale.stepY",0);r.SetScale(s,k,A,O,C);var P=c(t,"setOrigin.x",.5),I=c(t,"setOrigin.y",P),R=c(t,"setOrigin.stepX",0),M=c(t,"setOrigin.stepY",0);r.SetOrigin(s,P,I,R,M);var N=c(t,"setAlpha.value",1),L=c(t,"setAlpha.step",0);r.SetAlpha(s,N,L);var D=c(t,"setDepth.value",0),F=c(t,"setDepth.step",0);r.SetDepth(s,D,F);var j=c(t,"setScrollFactor.x",1),B=c(t,"setScrollFactor.y",j),U=c(t,"setScrollFactor.stepX",0),V=c(t,"setScrollFactor.stepY",0);r.SetScrollFactor(s,j,B,U,V);var z=u(t,"hitArea",null),G=u(t,"hitAreaCallback",null);z&&r.SetHitArea(s,z,G);var Y=u(t,"gridAlign",!1);return Y&&r.GridAlign(s,Y),this.createMultipleCallback&&this.createMultipleCallback.call(this,s),s},preUpdate:function(t,e){if(this.runChildUpdate&&0!==this.children.size)for(var n=this.children.entries.slice(),r=0;r<n.length;r++){var i=n[r];i.active&&i.update(t,e)}},add:function(t,e){return void 0===e&&(e=!1),this.isFull()||(this.children.set(t),this.internalCreateCallback&&this.internalCreateCallback.call(this,t),this.createCallback&&this.createCallback.call(this,t),e&&(t.addToDisplayList(this.scene.sys.displayList),t.addToUpdateList()),t.on(o.DESTROY,this.remove,this)),this},addMultiple:function(t,e){if(void 0===e&&(e=!1),Array.isArray(t))for(var n=0;n<t.length;n++)this.add(t[n],e);return this},remove:function(t,e,n){return void 0===e&&(e=!1),void 0===n&&(n=!1),this.children.contains(t)?(this.children.delete(t),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,t),this.removeCallback&&this.removeCallback.call(this,t),t.off(o.DESTROY,this.remove,this),n?t.destroy():e&&(t.removeFromDisplayList(),t.removeFromUpdateList()),this):this},clear:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);for(var n=this.children,r=0;r<n.size;r++){var i=n.entries[r];i.off(o.DESTROY,this.remove,this),e?i.destroy():t&&(i.removeFromDisplayList(),i.removeFromUpdateList())}return this.children.clear(),this},contains:function(t){return this.children.contains(t)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(t,e,n,r){return a(this.children.entries,t,e,n,r)},getFirst:function(t,e,n,r,i,o,s){return this.getHandler(!0,1,t,e,n,r,i,o,s)},getFirstNth:function(t,e,n,r,i,o,s,a){return this.getHandler(!0,t,e,n,r,i,o,s,a)},getLast:function(t,e,n,r,i,o,s){return this.getHandler(!1,1,t,e,n,r,i,o,s)},getLastNth:function(t,e,n,r,i,o,s,a){return this.getHandler(!1,t,e,n,r,i,o,s,a)},getHandler:function(t,e,n,r,i,o,s,a,u){var c,h;void 0===n&&(n=!1),void 0===r&&(r=!1);var l=0,f=this.children.entries;if(t)for(h=0;h<f.length;h++)if((c=f[h]).active===n){if(++l===e)break}else c=null;else for(h=f.length-1;h>=0;h--)if((c=f[h]).active===n){if(++l===e)break}else c=null;return c?("number"===typeof i&&(c.x=i),"number"===typeof o&&(c.y=o),c):r?this.create(i,o,s,a,u):null},get:function(t,e,n,r,i){return this.getFirst(!1,!0,t,e,n,r,i)},getFirstAlive:function(t,e,n,r,i,o){return this.getFirst(!0,t,e,n,r,i,o)},getFirstDead:function(t,e,n,r,i,o){return this.getFirst(!1,t,e,n,r,i,o)},playAnimation:function(t,e){return r.PlayAnimation(this.children.entries,t,e),this},isFull:function(){return-1!==this.maxSize&&this.children.size>=this.maxSize},countActive:function(t){void 0===t&&(t=!0);for(var e=0,n=0;n<this.children.size;n++)this.children.entries[n].active===t&&e++;return e},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var t=this.getTotalUsed();return(-1===this.maxSize?999999999999:this.maxSize)-t},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},propertyValueSet:function(t,e,n,i,o){return r.PropertyValueSet(this.children.entries,t,e,n,i,o),this},propertyValueInc:function(t,e,n,i,o){return r.PropertyValueInc(this.children.entries,t,e,n,i,o),this},setX:function(t,e){return r.SetX(this.children.entries,t,e),this},setY:function(t,e){return r.SetY(this.children.entries,t,e),this},setXY:function(t,e,n,i){return r.SetXY(this.children.entries,t,e,n,i),this},incX:function(t,e){return r.IncX(this.children.entries,t,e),this},incY:function(t,e){return r.IncY(this.children.entries,t,e),this},incXY:function(t,e,n,i){return r.IncXY(this.children.entries,t,e,n,i),this},shiftPosition:function(t,e,n){return r.ShiftPosition(this.children.entries,t,e,n),this},angle:function(t,e){return r.Angle(this.children.entries,t,e),this},rotate:function(t,e){return r.Rotate(this.children.entries,t,e),this},rotateAround:function(t,e){return r.RotateAround(this.children.entries,t,e),this},rotateAroundDistance:function(t,e,n){return r.RotateAroundDistance(this.children.entries,t,e,n),this},setAlpha:function(t,e){return r.SetAlpha(this.children.entries,t,e),this},setTint:function(t,e,n,i){return r.SetTint(this.children.entries,t,e,n,i),this},setOrigin:function(t,e,n,i){return r.SetOrigin(this.children.entries,t,e,n,i),this},scaleX:function(t,e){return r.ScaleX(this.children.entries,t,e),this},scaleY:function(t,e){return r.ScaleY(this.children.entries,t,e),this},scaleXY:function(t,e,n,i){return r.ScaleXY(this.children.entries,t,e,n,i),this},setDepth:function(t,e){return r.SetDepth(this.children.entries,t,e),this},setBlendMode:function(t){return r.SetBlendMode(this.children.entries,t),this},setHitArea:function(t,e){return r.SetHitArea(this.children.entries,t,e),this},shuffle:function(){return r.Shuffle(this.children.entries),this},kill:function(t){this.children.contains(t)&&t.setActive(!1)},killAndHide:function(t){this.children.contains(t)&&(t.setActive(!1),t.setVisible(!1))},setVisible:function(t,e,n){return r.SetVisible(this.children.entries,t,e,n),this},toggleVisible:function(){return r.ToggleVisible(this.children.entries),this},destroy:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1),this.scene&&!this.ignoreDestroy&&(this.emit(o.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(e,t),this.scene=void 0,this.children=void 0)}});t.exports=p},function(t,e,n){var r=n(12);t.exports=function(t,e,n,i,o,s){for(var a=r.getTintAppendFloatAlpha(n.fillColor,n.fillAlpha*i),u=n.pathData,c=n.pathIndexes,h=0;h<c.length;h+=3){var l=2*c[h],f=2*c[h+1],d=2*c[h+2],p=u[l+0]-o,v=u[l+1]-s,g=u[f+0]-o,m=u[f+1]-s,y=u[d+0]-o,b=u[d+1]-s,w=e.getX(p,v),x=e.getY(p,v),_=e.getX(g,m),T=e.getY(g,m),E=e.getX(y,b),S=e.getY(y,b);t.batchTri(n,w,x,_,T,E,S,0,0,1,1,a,a,a,2)}}},function(t,e){t.exports=function(t,e,n){var r=t.x3-t.x1,i=t.y3-t.y1,o=t.x2-t.x1,s=t.y2-t.y1,a=e-t.x1,u=n-t.y1,c=r*r+i*i,h=r*o+i*s,l=r*a+i*u,f=o*o+s*s,d=o*a+s*u,p=c*f-h*h,v=0===p?0:1/p,g=(f*l-h*d)*v,m=(c*d-h*l)*v;return g>=0&&m>=0&&g+m<1}},function(t,e,n){var r=n(0),i=n(10),o=n(3);function s(t,e,n,r){var i=t-n,o=e-r,s=i*i+o*o;return Math.sqrt(s)}var a=new r({initialize:function(t,e,n){this.vertex1=t,this.vertex2=e,this.vertex3=n,this.bounds=new i,this._inCenter=new o},getInCenter:function(t){void 0===t&&(t=!0);var e,n,r,i,o,a,u=this.vertex1,c=this.vertex2,h=this.vertex3;t?(e=u.x,n=u.y,r=c.x,i=c.y,o=h.x,a=h.y):(e=u.vx,n=u.vy,r=c.vx,i=c.vy,o=h.vx,a=h.vy);var l=s(o,a,r,i),f=s(e,n,o,a),d=s(r,i,e,n),p=l+f+d;return this._inCenter.set((e*l+r*f+o*d)/p,(n*l+i*f+a*d)/p)},contains:function(t,e,n){var r=this.vertex1,i=this.vertex2,o=this.vertex3,s=r.vx,a=r.vy,u=i.vx,c=i.vy,h=o.vx,l=o.vy;if(n){var f=n.a,d=n.b,p=n.c,v=n.d,g=n.e,m=n.f;s=r.vx*f+r.vy*p+g,a=r.vx*d+r.vy*v+m,u=i.vx*f+i.vy*p+g,c=i.vx*d+i.vy*v+m,h=o.vx*f+o.vy*p+g,l=o.vx*d+o.vy*v+m}var y=h-s,b=l-a,w=u-s,x=c-a,_=t-s,T=e-a,E=y*y+b*b,S=y*w+b*x,k=y*_+b*T,A=w*w+x*x,O=w*_+x*T,C=E*A-S*S,P=0===C?0:1/C,I=(A*k-S*O)*P,R=(E*O-S*k)*P;return I>=0&&R>=0&&I+R<1},isCounterClockwise:function(t){var e=this.vertex1,n=this.vertex2,r=this.vertex3,i=(n.vx-e.vx)*(r.vy-e.vy)-(n.vy-e.vy)*(r.vx-e.vx);return t<=0?i>=0:i<0},load:function(t,e,n,r,i){return n=this.vertex1.load(t,e,n,r,i),n=this.vertex2.load(t,e,n,r,i),n=this.vertex3.load(t,e,n,r,i)},transformCoordinatesLocal:function(t,e,n,r){return this.vertex1.transformCoordinatesLocal(t,e,n,r),this.vertex2.transformCoordinatesLocal(t,e,n,r),this.vertex3.transformCoordinatesLocal(t,e,n,r),this},updateBounds:function(){var t=this.vertex1,e=this.vertex2,n=this.vertex3,r=this.bounds;return r.x=Math.min(t.vx,e.vx,n.vx),r.y=Math.min(t.vy,e.vy,n.vy),r.width=Math.max(t.vx,e.vx,n.vx)-r.x,r.height=Math.max(t.vy,e.vy,n.vy)-r.y,this},isInView:function(t,e,n,r,i,o,s,a,u,c,h){var l=this.vertex1.update(i,o,s,a,u,c,h,r),f=this.vertex2.update(i,o,s,a,u,c,h,r),d=this.vertex3.update(i,o,s,a,u,c,h,r);if(l.ta<=0&&f.ta<=0&&d.ta<=0)return!1;if(e&&!this.isCounterClockwise(n))return!1;var p=this.bounds;p.x=Math.min(l.tx,f.tx,d.tx),p.y=Math.min(l.ty,f.ty,d.ty),p.width=Math.max(l.tx,f.tx,d.tx)-p.x,p.height=Math.max(l.ty,f.ty,d.ty)-p.y;var v=t.x+t.width,g=t.y+t.height;return!(p.width<=0||p.height<=0||t.width<=0||t.height<=0)&&!(p.right<t.x||p.bottom<t.y||p.x>v||p.y>g)},translate:function(t,e){void 0===e&&(e=0);var n=this.vertex1,r=this.vertex2,i=this.vertex3;return n.x+=t,n.y+=e,r.x+=t,r.y+=e,i.x+=t,i.y+=e,this},x:{get:function(){return this.getInCenter().x},set:function(t){var e=this.getInCenter();this.translate(t-e.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(t){var e=this.getInCenter();this.translate(0,t-e.y)}},alpha:{get:function(){var t=this.vertex1,e=this.vertex2,n=this.vertex3;return(t.alpha+e.alpha+n.alpha)/3},set:function(t){this.vertex1.alpha=t,this.vertex2.alpha=t,this.vertex3.alpha=t}},depth:{get:function(){var t=this.vertex1,e=this.vertex2,n=this.vertex3;return(t.vz+e.vz+n.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});t.exports=a},function(t,e,n){var r=n(0),i=n(12),o=n(39),s=new r({Extends:o,initialize:function(t,e,n,r,i,s,a,u,c,h){void 0===s&&(s=16777215),void 0===a&&(a=1),void 0===u&&(u=0),void 0===c&&(c=0),void 0===h&&(h=0),o.call(this,t,e,n),this.vx=0,this.vy=0,this.vz=0,this.nx=u,this.ny=c,this.nz=h,this.u=r,this.v=i,this.color=s,this.alpha=a,this.tx=0,this.ty=0,this.ta=0},setUVs:function(t,e){return this.u=t,this.v=e,this},transformCoordinatesLocal:function(t,e,n,r){var i=this.x,o=this.y,s=this.z,a=t.val,u=i*a[0]+o*a[4]+s*a[8]+a[12],c=i*a[1]+o*a[5]+s*a[9]+a[13],h=i*a[2]+o*a[6]+s*a[10]+a[14],l=i*a[3]+o*a[7]+s*a[11]+a[15];this.vx=u/l*e,this.vy=-c/l*n,this.vz=r<=0?h/l:-h/l},update:function(t,e,n,r,i,o,s,a){var u=this.vx*t+this.vy*n+i,c=this.vx*e+this.vy*r+o;return s&&(u=Math.round(u),c=Math.round(c)),this.tx=u,this.ty=c,this.ta=this.alpha*a,this},load:function(t,e,n,r,o){return t[++n]=this.tx,t[++n]=this.ty,t[++n]=this.u,t[++n]=this.v,t[++n]=r,t[++n]=o,e[++n]=i.getTintAppendFloatAlpha(this.color,this.ta),n}});t.exports=s},function(t,e,n){var r={};t.exports=r;var i=n(166),o=n(32),s=n(84),a=n(41);r.create=function(t){return o.extend({id:o.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},t)},r.setModified=function(t,e,n,o){if(i.trigger(t,"compositeModified",t),t.isModified=e,n&&t.parent&&r.setModified(t.parent,e,n,o),o)for(var s=0;s<t.composites.length;s++){var a=t.composites[s];r.setModified(a,e,n,o)}},r.add=function(t,e){var n=[].concat(e);i.trigger(t,"beforeAdd",{object:e});for(var s=0;s<n.length;s++){var a=n[s];switch(a.type){case"body":if(a.parent!==a){o.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}r.addBody(t,a);break;case"constraint":r.addConstraint(t,a);break;case"composite":r.addComposite(t,a);break;case"mouseConstraint":r.addConstraint(t,a.constraint)}}return i.trigger(t,"afterAdd",{object:e}),t},r.remove=function(t,e,n){var o=[].concat(e);i.trigger(t,"beforeRemove",{object:e});for(var s=0;s<o.length;s++){var a=o[s];switch(a.type){case"body":r.removeBody(t,a,n);break;case"constraint":r.removeConstraint(t,a,n);break;case"composite":r.removeComposite(t,a,n);break;case"mouseConstraint":r.removeConstraint(t,a.constraint)}}return i.trigger(t,"afterRemove",{object:e}),t},r.addComposite=function(t,e){return t.composites.push(e),e.parent=t,r.setModified(t,!0,!0,!1),t},r.removeComposite=function(t,e,n){var i=t.composites.indexOf(e);if(-1!==i&&(r.removeCompositeAt(t,i),r.setModified(t,!0,!0,!1)),n)for(var o=0;o<t.composites.length;o++)r.removeComposite(t.composites[o],e,!0);return t},r.removeCompositeAt=function(t,e){return t.composites.splice(e,1),r.setModified(t,!0,!0,!1),t},r.addBody=function(t,e){return t.bodies.push(e),r.setModified(t,!0,!0,!1),t},r.removeBody=function(t,e,n){var i=t.bodies.indexOf(e);if(-1!==i&&(r.removeBodyAt(t,i),r.setModified(t,!0,!0,!1)),n)for(var o=0;o<t.composites.length;o++)r.removeBody(t.composites[o],e,!0);return t},r.removeBodyAt=function(t,e){return t.bodies.splice(e,1),r.setModified(t,!0,!0,!1),t},r.addConstraint=function(t,e){return t.constraints.push(e),r.setModified(t,!0,!0,!1),t},r.removeConstraint=function(t,e,n){var i=t.constraints.indexOf(e);if(-1!==i&&r.removeConstraintAt(t,i),n)for(var o=0;o<t.composites.length;o++)r.removeConstraint(t.composites[o],e,!0);return t},r.removeConstraintAt=function(t,e){return t.constraints.splice(e,1),r.setModified(t,!0,!0,!1),t},r.clear=function(t,e,n){if(n)for(var i=0;i<t.composites.length;i++)r.clear(t.composites[i],e,!0);return e?t.bodies=t.bodies.filter((function(t){return t.isStatic})):t.bodies.length=0,t.constraints.length=0,t.composites.length=0,r.setModified(t,!0,!0,!1),t},r.allBodies=function(t){for(var e=[].concat(t.bodies),n=0;n<t.composites.length;n++)e=e.concat(r.allBodies(t.composites[n]));return e},r.allConstraints=function(t){for(var e=[].concat(t.constraints),n=0;n<t.composites.length;n++)e=e.concat(r.allConstraints(t.composites[n]));return e},r.allComposites=function(t){for(var e=[].concat(t.composites),n=0;n<t.composites.length;n++)e=e.concat(r.allComposites(t.composites[n]));return e},r.get=function(t,e,n){var i,o;switch(n){case"body":i=r.allBodies(t);break;case"constraint":i=r.allConstraints(t);break;case"composite":i=r.allComposites(t).concat(t)}return i?0===(o=i.filter((function(t){return t.id.toString()===e.toString()}))).length?null:o[0]:null},r.move=function(t,e,n){return r.remove(t,e),r.add(n,e),t},r.rebase=function(t){for(var e=r.allBodies(t).concat(r.allConstraints(t)).concat(r.allComposites(t)),n=0;n<e.length;n++)e[n].id=o.nextId();return r.setModified(t,!0,!0,!1),t},r.translate=function(t,e,n){for(var i=n?r.allBodies(t):t.bodies,o=0;o<i.length;o++)a.translate(i[o],e);return r.setModified(t,!0,!0,!1),t},r.rotate=function(t,e,n,i){for(var o=Math.cos(e),s=Math.sin(e),u=i?r.allBodies(t):t.bodies,c=0;c<u.length;c++){var h=u[c],l=h.position.x-n.x,f=h.position.y-n.y;a.setPosition(h,{x:n.x+(l*o-f*s),y:n.y+(l*s+f*o)}),a.rotate(h,e)}return r.setModified(t,!0,!0,!1),t},r.scale=function(t,e,n,i,o){for(var s=o?r.allBodies(t):t.bodies,u=0;u<s.length;u++){var c=s[u],h=c.position.x-i.x,l=c.position.y-i.y;a.setPosition(c,{x:i.x+h*e,y:i.y+l*n}),a.scale(c,e,n)}return r.setModified(t,!0,!0,!1),t},r.bounds=function(t){for(var e=r.allBodies(t),n=[],i=0;i<e.length;i+=1){var o=e[i];n.push(o.bounds.min,o.bounds.max)}return s.create(n)}},function(t,e){t.exports=function(t,e,n){return t>=0&&t<n.width&&e>=0&&e<n.height}},function(t,e,n){var r=n(0),i=n(29),o=n(2),s=new r({initialize:function(t){void 0===t&&(t={}),this.name=o(t,"name","layer"),this.x=o(t,"x",0),this.y=o(t,"y",0),this.width=o(t,"width",0),this.height=o(t,"height",0),this.tileWidth=o(t,"tileWidth",0),this.tileHeight=o(t,"tileHeight",0),this.baseTileWidth=o(t,"baseTileWidth",this.tileWidth),this.baseTileHeight=o(t,"baseTileHeight",this.tileHeight),this.orientation=o(t,"orientation",i.ORTHOGONAL),this.widthInPixels=o(t,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=o(t,"heightInPixels",this.height*this.baseTileHeight),this.alpha=o(t,"alpha",1),this.visible=o(t,"visible",!0),this.properties=o(t,"properties",[]),this.indexes=o(t,"indexes",[]),this.collideIndexes=o(t,"collideIndexes",[]),this.callbacks=o(t,"callbacks",[]),this.bodies=o(t,"bodies",[]),this.data=o(t,"data",[]),this.tilemapLayer=o(t,"tilemapLayer",null),this.hexSideLength=o(t,"hexSideLength",0)}});t.exports=s},function(t,e,n){var r=n(0),i=n(29),o=n(2),s=new r({initialize:function(t){void 0===t&&(t={}),this.name=o(t,"name","map"),this.width=o(t,"width",0),this.height=o(t,"height",0),this.infinite=o(t,"infinite",!1),this.tileWidth=o(t,"tileWidth",0),this.tileHeight=o(t,"tileHeight",0),this.widthInPixels=o(t,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=o(t,"heightInPixels",this.height*this.tileHeight),this.format=o(t,"format",null),this.orientation=o(t,"orientation",i.ORTHOGONAL),this.renderOrder=o(t,"renderOrder","right-down"),this.version=o(t,"version","1"),this.properties=o(t,"properties",{}),this.layers=o(t,"layers",[]),this.images=o(t,"images",[]),this.objects=o(t,"objects",{}),this.collision=o(t,"collision",{}),this.tilesets=o(t,"tilesets",[]),this.imageCollections=o(t,"imageCollections",[]),this.tiles=o(t,"tiles",[]),this.hexSideLength=o(t,"hexSideLength",0)}});t.exports=s},function(t,e,n){var r=new(n(0))({initialize:function(t,e,n,r,i,o,s,a){(void 0===n||n<=0)&&(n=32),(void 0===r||r<=0)&&(r=32),void 0===i&&(i=0),void 0===o&&(o=0),void 0===s&&(s={}),void 0===a&&(a={}),this.name=t,this.firstgid=e,this.tileWidth=n,this.tileHeight=r,this.tileMargin=i,this.tileSpacing=o,this.tileProperties=s,this.tileData=a,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(t){return this.containsTileIndex(t)?this.tileProperties[t-this.firstgid]:null},getTileData:function(t){return this.containsTileIndex(t)?this.tileData[t-this.firstgid]:null},getTileCollisionGroup:function(t){var e=this.getTileData(t);return e&&e.objectgroup?e.objectgroup:null},containsTileIndex:function(t){return t>=this.firstgid&&t<this.firstgid+this.total},getTileTextureCoordinates:function(t){return this.containsTileIndex(t)?this.texCoordinates[t-this.firstgid]:null},setImage:function(t){return this.image=t,this.glTexture=t.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(t,e){return void 0!==t&&(this.tileWidth=t),void 0!==e&&(this.tileHeight=e),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(t,e){return void 0!==t&&(this.tileMargin=t),void 0!==e&&(this.tileSpacing=e),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(t,e){var n=(e-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),r=(t-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);n%1===0&&r%1===0||console.warn("Image tile area not tile size multiple in: "+this.name),n=Math.floor(n),r=Math.floor(r),this.rows=n,this.columns=r,this.total=n*r,this.texCoordinates.length=0;for(var i=this.tileMargin,o=this.tileMargin,s=0;s<this.rows;s++){for(var a=0;a<this.columns;a++)this.texCoordinates.push({x:i,y:o}),i+=this.tileWidth+this.tileSpacing;i=this.tileMargin,o+=this.tileHeight+this.tileSpacing}return this}});t.exports=r},function(t,e){t.exports={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12}},function(t,e){t.exports=function(t,e,n){return void 0===n&&(n=1e-4),Math.abs(t-e)<n}},function(t,e,n){var r=n(0),i=n(11),o=n(15),s=n(1068),a=new r({Extends:o,Mixins:[i.Alpha,i.BlendMode,i.Depth,i.Flip,i.GetBounds,i.Mask,i.Origin,i.Pipeline,i.ScrollFactor,i.Size,i.TextureCrop,i.Tint,i.Transform,i.Visible,s],initialize:function(t,e,n,r,i){o.call(this,t,"Image"),this._crop=this.resetCropObject(),this.setTexture(r,i),this.setPosition(e,n),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});t.exports=a},function(t,e){t.exports=function(t,e){return t.hasOwnProperty(e)}},function(t,e,n){var r=n(77);t.exports=function(t,e){var n=r(t);for(var i in e)n.hasOwnProperty(i)||(n[i]=e[i]);return n}},function(t,e,n){var r={};t.exports=r;var i=n(64),o=n(83),s=n(165),a=n(84),u=n(271),c=n(32);r._warming=.4,r._torqueDampen=1,r._minLength=1e-6,r.create=function(t){var e=t;e.bodyA&&!e.pointA&&(e.pointA={x:0,y:0}),e.bodyB&&!e.pointB&&(e.pointB={x:0,y:0});var n=e.bodyA?o.add(e.bodyA.position,e.pointA):e.pointA,r=e.bodyB?o.add(e.bodyB.position,e.pointB):e.pointB,i=o.magnitude(o.sub(n,r));e.length="undefined"!==typeof e.length?e.length:i,e.id=e.id||c.nextId(),e.label=e.label||"Constraint",e.type="constraint",e.stiffness=e.stiffness||(e.length>0?1:.7),e.damping=e.damping||0,e.angularStiffness=e.angularStiffness||0,e.angleA=e.bodyA?e.bodyA.angle:e.angleA,e.angleB=e.bodyB?e.bodyB.angle:e.angleB,e.plugin={};var s={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return 0===e.length&&e.stiffness>.1?(s.type="pin",s.anchors=!1):e.stiffness<.9&&(s.type="spring"),e.render=c.extend(s,e.render),e},r.preSolveAll=function(t){for(var e=0;e<t.length;e+=1){var n=t[e],r=n.constraintImpulse;n.isStatic||0===r.x&&0===r.y&&0===r.angle||(n.position.x+=r.x,n.position.y+=r.y,n.angle+=r.angle)}},r.solveAll=function(t,e){for(var n=0;n<t.length;n+=1){var i=t[n],o=!i.bodyA||i.bodyA&&i.bodyA.isStatic,s=!i.bodyB||i.bodyB&&i.bodyB.isStatic;(o||s)&&r.solve(t[n],e)}for(n=0;n<t.length;n+=1)o=!(i=t[n]).bodyA||i.bodyA&&i.bodyA.isStatic,s=!i.bodyB||i.bodyB&&i.bodyB.isStatic,o||s||r.solve(t[n],e)},r.solve=function(t,e){var n=t.bodyA,i=t.bodyB,s=t.pointA,a=t.pointB;if(n||i){n&&!n.isStatic&&(o.rotate(s,n.angle-t.angleA,s),t.angleA=n.angle),i&&!i.isStatic&&(o.rotate(a,i.angle-t.angleB,a),t.angleB=i.angle);var u=s,c=a;if(n&&(u=o.add(n.position,s)),i&&(c=o.add(i.position,a)),u&&c){var h=o.sub(u,c),l=o.magnitude(h);l<r._minLength&&(l=r._minLength);var f,d,p,v,g,m=(l-t.length)/l,y=t.stiffness<1?t.stiffness*e:t.stiffness,b=o.mult(h,m*y),w=(n?n.inverseMass:0)+(i?i.inverseMass:0),x=w+((n?n.inverseInertia:0)+(i?i.inverseInertia:0));if(t.damping){var _=o.create();p=o.div(h,l),g=o.sub(i&&o.sub(i.position,i.positionPrev)||_,n&&o.sub(n.position,n.positionPrev)||_),v=o.dot(p,g)}n&&!n.isStatic&&(d=n.inverseMass/w,n.constraintImpulse.x-=b.x*d,n.constraintImpulse.y-=b.y*d,n.position.x-=b.x*d,n.position.y-=b.y*d,t.damping&&(n.positionPrev.x-=t.damping*p.x*v*d,n.positionPrev.y-=t.damping*p.y*v*d),f=o.cross(s,b)/x*r._torqueDampen*n.inverseInertia*(1-t.angularStiffness),n.constraintImpulse.angle-=f,n.angle-=f),i&&!i.isStatic&&(d=i.inverseMass/w,i.constraintImpulse.x+=b.x*d,i.constraintImpulse.y+=b.y*d,i.position.x+=b.x*d,i.position.y+=b.y*d,t.damping&&(i.positionPrev.x+=t.damping*p.x*v*d,i.positionPrev.y+=t.damping*p.y*v*d),f=o.cross(a,b)/x*r._torqueDampen*i.inverseInertia*(1-t.angularStiffness),i.constraintImpulse.angle+=f,i.angle+=f)}}},r.postSolveAll=function(t){for(var e=0;e<t.length;e++){var n=t[e],c=n.constraintImpulse;if(!(n.isStatic||0===c.x&&0===c.y&&0===c.angle)){s.set(n,!1);for(var h=0;h<n.parts.length;h++){var l=n.parts[h];i.translate(l.vertices,c),h>0&&(l.position.x+=c.x,l.position.y+=c.y),0!==c.angle&&(i.rotate(l.vertices,c.angle,n.position),u.rotate(l.axes,c.angle),h>0&&o.rotateAbout(l.position,c.angle,n.position,l.position)),a.update(l.bounds,l.vertices,n.velocity)}c.angle*=r._warming,c.x*=r._warming,c.y*=r._warming}}},r.pointAWorld=function(t){return{x:(t.bodyA?t.bodyA.position.x:0)+t.pointA.x,y:(t.bodyA?t.bodyA.position.y:0)+t.pointA.y}},r.pointBWorld=function(t){return{x:(t.bodyB?t.bodyB.position.x:0)+t.pointB.x,y:(t.bodyB?t.bodyB.position.y:0)+t.pointB.y}}},function(t,e,n){var r=n(35),i=n(65),o=n(66),s=n(0),a=n(11),u=n(15),c=n(10),h=n(57),l=new s({Extends:u,Mixins:[a.Depth,a.GetBounds,a.Origin,a.Transform,a.ScrollFactor,a.Visible],initialize:function(t,e,n,i,o){void 0===i&&(i=1),void 0===o&&(o=i),u.call(this,t,"Zone"),this.setPosition(e,n),this.width=i,this.height=o,this.blendMode=r.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,e,n){void 0===n&&(n=!0),this.width=t,this.height=e,this.updateDisplayOrigin();var r=this.input;return n&&r&&!r.customHitArea&&(r.hitArea.width=t,r.hitArea.height=e),this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this},setCircleDropZone:function(t){return this.setDropZone(new i(0,0,t),o)},setRectangleDropZone:function(t,e){return this.setDropZone(new c(0,0,t,e),h)},setDropZone:function(t,e){return void 0===t?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(t,e,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(t,e,n){n.addToRenderList(e)},renderWebGL:function(t,e,n){n.addToRenderList(e)}});t.exports=l},function(t,e){t.exports=function(t){return 2*(t.width+t.height)}},function(t,e){t.exports=function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),r=t[e];t[e]=t[n],t[n]=r}return t}},function(t,e,n){t.exports={ADD_ANIMATION:n(724),ANIMATION_COMPLETE:n(725),ANIMATION_COMPLETE_KEY:n(726),ANIMATION_REPEAT:n(727),ANIMATION_RESTART:n(728),ANIMATION_START:n(729),ANIMATION_STOP:n(730),ANIMATION_UPDATE:n(731),PAUSE_ALL:n(732),REMOVE_ANIMATION:n(733),RESUME_ALL:n(734)}},function(t,e,n){var r=n(0),i=n(11),o=n(36),s=n(9),a=n(37),u=n(10),c=n(25),h=n(187),l=n(3),f=new r({Extends:s,Mixins:[i.Alpha,i.Visible],initialize:function(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),s.call(this),this.scene,this.sceneManager,this.scaleManager,this.cameraManager,this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new u,this.dirty=!0,this._x=t,this._y=e,this._width=n,this._height=r,this._bounds=new u,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new c,this.transparent=!0,this.backgroundColor=h("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new l(n/2,r/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(t){this.renderList.push(t)},setOrigin:function(t,e){return void 0===t&&(t=.5),void 0===e&&(e=t),this.originX=t,this.originY=e,this},getScroll:function(t,e,n){void 0===n&&(n=new l);var r=.5*this.width,i=.5*this.height;return n.x=t-r,n.y=e-i,this.useBounds&&(n.x=this.clampX(n.x),n.y=this.clampY(n.y)),n},centerOnX:function(t){var e=.5*this.width;return this.midPoint.x=t,this.scrollX=t-e,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(t){var e=.5*this.height;return this.midPoint.y=t,this.scrollY=t-e,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(t,e){return this.centerOnX(t),this.centerOnY(e),this},centerToBounds:function(){if(this.useBounds){var t=this._bounds,e=.5*this.width,n=.5*this.height;this.midPoint.set(t.centerX,t.centerY),this.scrollX=t.centerX-e,this.scrollY=t.centerY-n}return this},centerToSize:function(){return this.scrollX=.5*this.width,this.scrollY=.5*this.height,this},cull:function(t){if(this.disableCull)return t;var e=this.matrix.matrix,n=e[0],r=e[1],i=e[2],o=e[3],s=n*o-r*i;if(!s)return t;var a=e[4],u=e[5],c=this.scrollX,h=this.scrollY,l=this.width,f=this.height,d=this.y,p=d+f,v=this.x,g=v+l,m=this.culledObjects,y=t.length;s=1/s,m.length=0;for(var b=0;b<y;++b){var w=t[b];if(w.hasOwnProperty("width")&&!w.parentContainer){var x=w.width,_=w.height,T=w.x-c*w.scrollFactorX-x*w.originX,E=w.y-h*w.scrollFactorY-_*w.originY;(T+x)*n+(E+_)*i+a>v&&T*n+E*i+a<g&&(T+x)*r+(E+_)*o+u>d&&T*r+E*o+u<p&&m.push(w)}else m.push(w)}return m},getWorldPoint:function(t,e,n){void 0===n&&(n=new l);var r=this.matrix.matrix,i=r[0],o=r[1],s=r[2],a=r[3],u=r[4],c=r[5],h=i*a-o*s;if(!h)return n.x=t,n.y=e,n;var f=a*(h=1/h),d=-o*h,p=-s*h,v=i*h,g=(s*c-a*u)*h,m=(o*u-i*c)*h,y=Math.cos(this.rotation),b=Math.sin(this.rotation),w=this.zoomX,x=this.zoomY,_=this.scrollX,T=this.scrollY,E=t+(_*y-T*b)*w,S=e+(_*b+T*y)*x;return n.x=E*f+S*p+g,n.y=E*d+S*v+m,n},ignore:function(t){var e=this.id;Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n];Array.isArray(r)?this.ignore(r):r.isParent?this.ignore(r.getChildren()):r.cameraFilter|=e}return this},preRender:function(){this.renderList.length=0;var t=this.width,e=this.height,n=.5*t,r=.5*e,i=this.zoomX,o=this.zoomY,s=this.matrix,a=t*this.originX,u=e*this.originY,c=this.scrollX,h=this.scrollY;this.useBounds&&(c=this.clampX(c),h=this.clampY(h)),this.roundPixels&&(a=Math.round(a),u=Math.round(u)),this.scrollX=c,this.scrollY=h;var l=c+n,f=h+r;this.midPoint.set(l,f);var d=t/i,p=e/o;this.worldView.setTo(l-d/2,f-p/2,d,p),s.applyITRS(this.x+a,this.y+u,this.rotation,i,o),s.translate(-a,-u)},clampX:function(t){var e=this._bounds,n=this.displayWidth,r=e.x+(n-this.width)/2,i=Math.max(r,r+e.width-n);return t<r?t=r:t>i&&(t=i),t},clampY:function(t){var e=this._bounds,n=this.displayHeight,r=e.y+(n-this.height)/2,i=Math.max(r,r+e.height-n);return t<r?t=r:t>i&&(t=i),t},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(t){return void 0===t&&(t=0),this.rotation=o(t),this},setBackgroundColor:function(t){return void 0===t&&(t="rgba(0,0,0,0)"),this.backgroundColor=h(t),this.transparent=0===this.backgroundColor.alpha,this},setBounds:function(t,e,n,r,i){return void 0===i&&(i=!1),this._bounds.setTo(t,e,n,r),this.dirty=!0,this.useBounds=!0,i?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(t){void 0===t&&(t=new u);var e=this._bounds;return t.setTo(e.x,e.y,e.width,e.height),t},setName:function(t){return void 0===t&&(t=""),this.name=t,this},setPosition:function(t,e){return void 0===e&&(e=t),this.x=t,this.y=e,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setRoundPixels:function(t){return this.roundPixels=t,this},setScene:function(t){this.scene&&this._customViewport&&this.sceneManager.customViewports--,this.scene=t;var e=t.sys;return this.sceneManager=e.game.scene,this.scaleManager=e.scale,this.cameraManager=e.cameras,this.updateSystem(),this},setScroll:function(t,e){return void 0===e&&(e=t),this.scrollX=t,this.scrollY=e,this},setSize:function(t,e){return void 0===e&&(e=t),this.width=t,this.height=e,this},setViewport:function(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this},setZoom:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),0===t&&(t=.001),0===e&&(e=.001),this.zoomX=t,this.zoomY=e,this},setMask:function(t,e){return void 0===e&&(e=!0),this.mask=t,this._maskCamera=e?this.cameraManager.default:this,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var t={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(t.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),t},update:function(){},updateSystem:function(){if(this.scaleManager){var t=0!==this._x||0!==this._y||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height,e=this.sceneManager;t&&!this._customViewport?e.customViewports++:!t&&this._customViewport&&e.customViewports--,this.dirty=!0,this._customViewport=t}},destroy:function(){this.emit(a.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(t){this._x=t,this.updateSystem()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.updateSystem()}},width:{get:function(){return this._width},set:function(t){this._width=t,this.updateSystem()}},height:{get:function(){return this._height},set:function(t){this._height=t,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(t){this._scrollX=t,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(t){this._scrollY=t,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(t){this._zoomX=t,this._zoomY=t,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(t){this._zoomX=t,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(t){this._zoomY=t,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});t.exports=f},function(t,e,n){var r=n(334),i=n(335),o=n(336),s=n(337),a=n(338),u=n(339),c=n(340),h=n(341),l=n(342),f=n(343),d=n(344),p=n(345);t.exports={Power0:c,Power1:h.Out,Power2:s.Out,Power3:l.Out,Power4:f.Out,Linear:c,Quad:h.Out,Cubic:s.Out,Quart:l.Out,Quint:f.Out,Sine:d.Out,Expo:u.Out,Circ:o.Out,Elastic:a.Out,Back:r.Out,Bounce:i.Out,Stepped:p,"Quad.easeIn":h.In,"Cubic.easeIn":s.In,"Quart.easeIn":l.In,"Quint.easeIn":f.In,"Sine.easeIn":d.In,"Expo.easeIn":u.In,"Circ.easeIn":o.In,"Elastic.easeIn":a.In,"Back.easeIn":r.In,"Bounce.easeIn":i.In,"Quad.easeOut":h.Out,"Cubic.easeOut":s.Out,"Quart.easeOut":l.Out,"Quint.easeOut":f.Out,"Sine.easeOut":d.Out,"Expo.easeOut":u.Out,"Circ.easeOut":o.Out,"Elastic.easeOut":a.Out,"Back.easeOut":r.Out,"Bounce.easeOut":i.Out,"Quad.easeInOut":h.InOut,"Cubic.easeInOut":s.InOut,"Quart.easeInOut":l.InOut,"Quint.easeInOut":f.InOut,"Sine.easeInOut":d.InOut,"Expo.easeInOut":u.InOut,"Circ.easeInOut":o.InOut,"Elastic.easeInOut":a.InOut,"Back.easeInOut":r.InOut,"Bounce.easeInOut":i.InOut}},function(t,e){t.exports=function(t,e,n){return(e-t)*n+t}},function(t,e,n){var r=n(105),i={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};t.exports=function(){var t=navigator.userAgent;return/Edge\/\d+/.test(t)?i.edge=!0:/Chrome\/(\d+)/.test(t)&&!r.windowsPhone?(i.chrome=!0,i.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(t)?(i.firefox=!0,i.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(t)&&r.iOS?i.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(t)?(i.ie=!0,i.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(t)?i.opera=!0:/Safari/.test(t)&&!r.windowsPhone?i.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(t)&&(i.ie=!0,i.trident=!0,i.tridentVersion=parseInt(RegExp.$1,10),i.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(t)&&(i.silk=!0),i}()},function(t,e){t.exports=function(t,e){return Math.random()*(e-t)+t}},function(t,e){t.exports=function(t,e){return t>0&&0===(t&t-1)&&e>0&&0===(e&e-1)}},function(t,e){t.exports=function(t,e,n,r){return void 0===n&&(n=0),0===e?t:(t-=n,t=e*Math.ceil(t/e),r?(n+t)/e:n+t)}},function(t,e,n){var r=new(n(0))({initialize:function(t,e,n,r){this.x=0,this.y=0,this.z=0,this.w=0,"object"===typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=n||0,this.w=r||0)},clone:function(){return new r(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z||0,this.w=t.w||0,this},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},set:function(t,e,n,r){return"object"===typeof t?(this.x=t.x||0,this.y=t.y||0,this.z=t.z||0,this.w=t.w||0):(this.x=t||0,this.y=e||0,this.z=n||0,this.w=r||0),this},add:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z||0,this.w+=t.w||0,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z||0,this.w-=t.w||0,this},scale:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},length:function(){var t=this.x,e=this.y,n=this.z,r=this.w;return Math.sqrt(t*t+e*e+n*n+r*r)},lengthSq:function(){var t=this.x,e=this.y,n=this.z,r=this.w;return t*t+e*e+n*n+r*r},normalize:function(){var t=this.x,e=this.y,n=this.z,r=this.w,i=t*t+e*e+n*n+r*r;return i>0&&(i=1/Math.sqrt(i),this.x=t*i,this.y=e*i,this.z=n*i,this.w=r*i),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){void 0===e&&(e=0);var n=this.x,r=this.y,i=this.z,o=this.w;return this.x=n+e*(t.x-n),this.y=r+e*(t.y-r),this.z=i+e*(t.z-i),this.w=o+e*(t.w-o),this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z||1,this.w*=t.w||1,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z||1,this.w/=t.w||1,this},distance:function(t){var e=t.x-this.x,n=t.y-this.y,r=t.z-this.z||0,i=t.w-this.w||0;return Math.sqrt(e*e+n*n+r*r+i*i)},distanceSq:function(t){var e=t.x-this.x,n=t.y-this.y,r=t.z-this.z||0,i=t.w-this.w||0;return e*e+n*n+r*r+i*i},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,o=t.val;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this},transformQuat:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,s=t.z,a=t.w,u=a*e+o*r-s*n,c=a*n+s*e-i*r,h=a*r+i*n-o*e,l=-i*e-o*n-s*r;return this.x=u*a+l*-i+c*-s-h*-o,this.y=c*a+l*-o+h*-i-u*-s,this.z=h*a+l*-s+u*-o-c*-i,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});r.prototype.sub=r.prototype.subtract,r.prototype.mul=r.prototype.multiply,r.prototype.div=r.prototype.divide,r.prototype.dist=r.prototype.distance,r.prototype.distSq=r.prototype.distanceSq,r.prototype.len=r.prototype.length,r.prototype.lenSq=r.prototype.lengthSq,t.exports=r},function(t,e,n){var r=n(0),i=n(91),o=new r({initialize:function(t,e,n,r,i,o,s){void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=!0),void 0===s&&(s=!1),this.renderer=t,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=r,this.minFilter=i,this.autoClear=o,this.autoResize=!1,this.resize(e,n),s&&this.setAutoResize(!0)},setAutoResize:function(t){return t&&!this.autoResize?(this.renderer.on(i.RESIZE,this.resize,this),this.autoResize=!0):!t&&this.autoResize&&(this.renderer.off(i.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(t,e){var n=t*this.scale,r=e*this.scale;if(n!==this.width||r!==this.height){var i=this.renderer;i.deleteFramebuffer(this.framebuffer),i.deleteTexture(this.texture),t*=this.scale,e*=this.scale,(t=Math.round(t))<=0&&(t=1),(e=Math.round(e))<=0&&(e=1),this.texture=i.createTextureFromSource(null,t,e,this.minFilter),this.framebuffer=i.createFramebuffer(t,e,this.texture,!1),this.width=t,this.height=e}return this},bind:function(t,e,n){if(void 0===t&&(t=!1),t&&this.renderer.flush(),e&&n&&this.resize(e,n),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),t&&this.adjustViewport(),this.autoClear){var r=this.renderer.gl;r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT)}},adjustViewport:function(){var t=this.renderer.gl;t.viewport(0,0,this.width,this.height),t.disable(t.SCISSOR_TEST)},clear:function(){var t=this.renderer,e=t.gl;t.pushFramebuffer(this.framebuffer),e.disable(e.SCISSOR_TEST),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),t.popFramebuffer(),t.resetScissor()},unbind:function(t){void 0===t&&(t=!1);var e=this.renderer;return t&&e.flush(),e.popFramebuffer()},destroy:function(){var t=this.renderer;t.deleteFramebuffer(this.framebuffer),t.deleteTexture(this.texture),t.off(i.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});t.exports=o},function(t,e){t.exports=function(t,e){var n;if(e)"string"===typeof e?n=document.getElementById(e):"object"===typeof e&&1===e.nodeType&&(n=e);else if(t.parentElement||null===e)return t;return n||(n=document.body),n.appendChild(t),t}},function(t,e){t.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175}},function(t,e){t.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9}},function(t,e,n){var r=n(0),i=n(77),o=n(9),s=n(70),a=n(22),u=n(1),c=n(207),h=n(428),l=new r({Extends:o,initialize:function(t){o.call(this),this.game=t,this.jsonCache=t.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,t.events.on(a.BLUR,this.onGameBlur,this),t.events.on(a.FOCUS,this.onGameFocus,this),t.events.on(a.PRE_STEP,this.update,this),t.events.once(a.DESTROY,this.destroy,this)},add:u,addAudioSprite:function(t,e){void 0===e&&(e={});var n=this.add(t,e);for(var r in n.spritemap=this.jsonCache.get(t).spritemap,n.spritemap)if(n.spritemap.hasOwnProperty(r)){var o=i(e),s=n.spritemap[r];o.loop=!!s.hasOwnProperty("loop")&&s.loop,n.addMarker({name:r,start:s.start,duration:s.end-s.start,config:o})}return n},get:function(t){return h(this.sounds,"key",t)},getAll:function(t){return c(this.sounds,"key",t)},play:function(t,e){var n=this.add(t);return n.once(s.COMPLETE,n.destroy,n),e?e.name?(n.addMarker(e),n.play(e.name)):n.play(e):n.play()},playAudioSprite:function(t,e,n){var r=this.addAudioSprite(t);return r.once(s.COMPLETE,r.destroy,r),r.play(e,n)},remove:function(t){var e=this.sounds.indexOf(t);return-1!==e&&(t.destroy(),this.sounds.splice(e,1),!0)},removeAll:function(){this.sounds.forEach((function(t){t.destroy()})),this.sounds.length=0},removeByKey:function(t){for(var e=0,n=this.sounds.length-1;n>=0;n--){var r=this.sounds[n];r.key===t&&(r.destroy(),this.sounds.splice(n,1),e++)}return e},pauseAll:function(){this.forEachActiveSound((function(t){t.pause()})),this.emit(s.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound((function(t){t.resume()})),this.emit(s.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound((function(t){t.stop()})),this.emit(s.STOP_ALL,this)},stopByKey:function(t){var e=0;return this.getAll(t).forEach((function(t){t.stop()&&e++})),e},unlock:u,onBlur:u,onFocus:u,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(t,e){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(s.UNLOCKED,this));for(var n=this.sounds.length-1;n>=0;n--)this.sounds[n].pendingRemove&&this.sounds.splice(n,1);this.sounds.forEach((function(n){n.update(t,e)}))},destroy:function(){this.game.events.off(a.BLUR,this.onGameBlur,this),this.game.events.off(a.FOCUS,this.onGameFocus,this),this.game.events.off(a.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(t,e){var n=this;this.sounds.forEach((function(r,i){r&&!r.pendingRemove&&t.call(e||n,r,i,n.sounds)}))},setRate:function(t){return this.rate=t,this},rate:{get:function(){return this._rate},set:function(t){this._rate=t,this.forEachActiveSound((function(t){t.calculateRate()})),this.emit(s.GLOBAL_RATE,this,t)}},setDetune:function(t){return this.detune=t,this},detune:{get:function(){return this._detune},set:function(t){this._detune=t,this.forEachActiveSound((function(t){t.calculateRate()})),this.emit(s.GLOBAL_DETUNE,this,t)}}});t.exports=l},function(t,e,n){var r=n(0),i=n(9),o=n(70),s=n(17),a=n(1),u=new r({Extends:i,initialize:function(t,e,n){i.call(this),this.manager=t,this.key=e,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=s(this.config,n),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(t){return!(!t||!t.name||"string"!==typeof t.name)&&(this.markers[t.name]?(console.error("addMarker "+t.name+" already exists in Sound"),!1):(t=s(!0,{name:"",start:0,duration:this.totalDuration-(t.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},t),this.markers[t.name]=t,!0))},updateMarker:function(t){return!(!t||!t.name||"string"!==typeof t.name)&&(this.markers[t.name]?(this.markers[t.name]=s(!0,this.markers[t.name],t),!0):(console.warn("Audio Marker: "+t.name+" missing in Sound: "+this.key),!1))},removeMarker:function(t){var e=this.markers[t];return e?(this.markers[t]=null,e):null},play:function(t,e){if(void 0===t&&(t=""),"object"===typeof t&&(e=t,t=""),"string"!==typeof t)return!1;if(t){if(!this.markers[t])return console.warn("Marker: "+t+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[t],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}else this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;return this.resetConfig(),this.currentConfig=s(this.currentConfig,e),this.isPlaying=!0,this.isPaused=!1,!0},pause:function(){return!(this.isPaused||!this.isPlaying)&&(this.isPlaying=!1,this.isPaused=!0,!0)},resume:function(){return!(!this.isPaused||this.isPlaying)&&(this.isPlaying=!0,this.isPaused=!1,!0)},stop:function(){return!(!this.isPaused&&!this.isPlaying)&&(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),!0)},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:a,calculateRate:function(){var t=this.currentConfig.detune+this.manager.detune,e=Math.pow(1.0005777895065548,t);this.totalRate=this.currentConfig.rate*this.manager.rate*e},destroy:function(){this.pendingRemove||(this.emit(o.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});t.exports=u},function(t,e,n){var r=n(209),i=n(435);t.exports=function(t,e){if(void 0===e&&(e=90),!r(t))return null;if("string"!==typeof e&&(e=(e%360+360)%360),90===e||-270===e||"rotateLeft"===e)(t=i(t)).reverse();else if(-90===e||270===e||"rotateRight"===e)t.reverse(),t=i(t);else if(180===Math.abs(e)||"rotate180"===e){for(var n=0;n<t.length;n++)t[n].reverse();t.reverse()}return t}},function(t,e,n){var r=n(0),i=n(18),o=n(11),s=n(15),a=n(1043),u=n(1044),c=n(212),h=n(10),l=n(1045),f=new r({Extends:s,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Texture,o.Tint,o.Transform,o.Visible,l],initialize:function(t,e,n,r,i,o,u){void 0===i&&(i=""),void 0===u&&(u=0),s.call(this,t,"BitmapText"),this.font=r;var c=this.scene.sys.cache.bitmapFont.get(r);c||console.warn("Invalid BitmapText key: "+r),this.fontData=c.data,this._text="",this._fontSize=o||this.fontData.size,this._letterSpacing=0,this._align=u,this._bounds=a(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=c.fromAtlas,this.setTexture(c.texture,c.frame),this.setPosition(e,n),this.setOrigin(0,0),this.initPipeline(),this.setText(i)},setLeftAlign:function(){return this._align=f.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=f.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=f.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(t){return this._fontSize=t,this._dirty=!0,this},setLetterSpacing:function(t){return void 0===t&&(t=0),this._letterSpacing=t,this._dirty=!0,this},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this.text&&(this._text=t.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(t,e,n,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=.5),this.dropShadowX=t,this.dropShadowY=e,this.dropShadowColor=n,this.dropShadowAlpha=r,this},setCharacterTint:function(t,e,n,r,o,s,a){void 0===t&&(t=0),void 0===e&&(e=1),void 0===n&&(n=!1),void 0===r&&(r=-1),void 0===o&&(o=r,s=r,a=r);var u=this.text.length;-1===e&&(e=u),t<0&&(t=u+t),t=i(t,0,u-1);for(var c=i(t+e,t,u),h=this.charColors,l=t;l<c;l++){var f=h[l];if(-1===r)h[l]=null;else{var d=n?1:0;f?(f.tintEffect=d,f.tintTL=r,f.tintTR=o,f.tintBL=s,f.tintBR=a):h[l]={tintEffect:d,tintTL:r,tintTR:o,tintBL:s,tintBR:a}}}return this},setWordTint:function(t,e,n,r,i,o,s){void 0===e&&(e=1);for(var a=this.getTextBounds().words,u="number"===typeof t,c=0,h=0;h<a.length;h++){var l=a[h];if((u&&h===t||!u&&l.word===t)&&(this.setCharacterTint(l.i,l.word.length,n,r,i,o,s),++c===e))return this}return this},getTextBounds:function(t){var e=this._bounds;return(this._dirty||t||this.scaleX!==e.scaleX||this.scaleY!==e.scaleY)&&(a(this,t,!0,e),this._dirty=!1),e},getCharacterAt:function(t,e,n){for(var r=this.getLocalPoint(t,e,null,n),i=this.getTextBounds().characters,o=new h,s=0;s<i.length;s++){var a=i[s];if(o.setTo(a.x,a.t,a.r-a.x,a.b),o.contains(r.x,r.y))return a}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(t,e,n){if(void 0===e&&(e=this._fontSize),void 0===n&&(n=this._align),t!==this.font){var r=this.scene.sys.cache.bitmapFont.get(t);r&&(this.font=t,this.fontData=r.data,this._fontSize=e,this._align=n,this.fromAtlas=!0===r.fromAtlas,this.setTexture(r.texture,r.frame),a(this,!1,!0,this._bounds))}return this},setMaxWidth:function(t,e){return this._maxWidth=t,this._dirty=!0,void 0!==e&&(this.wordWrapCharCode=e),this},align:{set:function(t){this._align=t,this._dirty=!0},get:function(){return this._align}},text:{set:function(t){this.setText(t)},get:function(){return this._text}},fontSize:{set:function(t){this._fontSize=t,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(t){this._letterSpacing=t,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(t){this._maxWidth=t,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var t=o.ToJSON(this),e={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align};return t.data=e,t},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});f.ALIGN_LEFT=0,f.ALIGN_CENTER=1,f.ALIGN_RIGHT=2,f.ParseFromAtlas=u,f.ParseXMLBitmapFont=c,t.exports=f},function(t,e,n){var r=new(n(0))({initialize:function(t){if(this.entries=[],Array.isArray(t))for(var e=0;e<t.length;e++)this.set(t[e])},set:function(t){return-1===this.entries.indexOf(t)&&this.entries.push(t),this},get:function(t,e){for(var n=0;n<this.entries.length;n++){var r=this.entries[n];if(r[t]===e)return r}},getArray:function(){return this.entries.slice(0)},delete:function(t){var e=this.entries.indexOf(t);return e>-1&&this.entries.splice(e,1),this},dump:function(){console.group("Set");for(var t=0;t<this.entries.length;t++){var e=this.entries[t];console.log(e)}console.groupEnd()},each:function(t,e){var n,r=this.entries.slice(),i=r.length;if(e)for(n=0;n<i&&!1!==t.call(e,r[n],n);n++);else for(n=0;n<i&&!1!==t(r[n],n);n++);return this},iterate:function(t,e){var n,r=this.entries.length;if(e)for(n=0;n<r&&!1!==t.call(e,this.entries[n],n);n++);else for(n=0;n<r&&!1!==t(this.entries[n],n);n++);return this},iterateLocal:function(t){var e,n=[];for(e=1;e<arguments.length;e++)n.push(arguments[e]);var r=this.entries.length;for(e=0;e<r;e++){var i=this.entries[e];i[t].apply(i,n)}return this},clear:function(){return this.entries.length=0,this},contains:function(t){return this.entries.indexOf(t)>-1},union:function(t){var e=new r;return t.entries.forEach((function(t){e.set(t)})),this.entries.forEach((function(t){e.set(t)})),e},intersect:function(t){var e=new r;return this.entries.forEach((function(n){t.contains(n)&&e.set(n)})),e},difference:function(t){var e=new r;return this.entries.forEach((function(n){t.contains(n)||e.set(n)})),e},size:{get:function(){return this.entries.length},set:function(t){return t<this.entries.length?this.entries.length=t:this.entries.length}}});t.exports=r},function(t,e,n){var r=n(0),i=n(11),o=n(15),s=n(189),a=n(92),u=n(1182),c=new r({Extends:o,Mixins:[i.AlphaSingle,i.BlendMode,i.Depth,i.GetBounds,i.Mask,i.Pipeline,i.ScrollFactor,i.Transform,i.Visible,u],initialize:function(t,e,n,r,i,u,c){void 0===r&&(r=16777215),void 0===i&&(i=128),void 0===u&&(u=1),void 0===c&&(c=.1),o.call(this,t,"PointLight"),this.initPipeline(a.POINTLIGHT_PIPELINE),this.setPosition(e,n),this.color=s(r),this.intensity=u,this.attenuation=c,this.width=2*i,this.height=2*i,this._radius=i},radius:{get:function(){return this._radius},set:function(t){this._radius=t,this.width=2*t,this.height=2*t}},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});t.exports=c},function(t,e){t.exports=function(t,e){var n=e.width/2,r=e.height/2,i=Math.abs(t.x-e.x-n),o=Math.abs(t.y-e.y-r),s=n+t.radius,a=r+t.radius;if(i>s||o>a)return!1;if(i<=n||o<=r)return!0;var u=i-n,c=o-r;return u*u+c*c<=t.radius*t.radius}},function(t,e){t.exports=function(t,e){return!(t.width<=0||t.height<=0||e.width<=0||e.height<=0)&&!(t.right<e.x||t.bottom<e.y||t.x>e.right||t.y>e.bottom)}},function(t,e,n){var r=n(6),i={},o={register:function(t,e,n,r,o){i[t]={plugin:e,mapping:n,settingsKey:r,configKey:o}},getPlugin:function(t){return i[t]},install:function(t){var e=t.scene.sys,n=e.settings.input,o=e.game.config;for(var s in i){var a=i[s].plugin,u=i[s].mapping,c=i[s].settingsKey,h=i[s].configKey;r(n,c,o[h])&&(t[u]=new a(t))}},remove:function(t){i.hasOwnProperty(t)&&delete i[t]}};t.exports=o},function(t,e,n){t.exports={ANY_KEY_DOWN:n(1323),ANY_KEY_UP:n(1324),COMBO_MATCH:n(1325),DOWN:n(1326),KEY_DOWN:n(1327),KEY_UP:n(1328),UP:n(1329)}},function(t,e){t.exports=function(t,e){return!!t.url&&(t.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t.url:e+t.url)}},function(t,e){t.exports=function(t,e,n,r,i,o){return void 0===t&&(t=""),void 0===e&&(e=!0),void 0===n&&(n=""),void 0===r&&(r=""),void 0===i&&(i=0),void 0===o&&(o=!1),{responseType:t,async:e,user:n,password:r,timeout:i,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:o}}},function(t,e,n){var r=n(0),i=n(243),o=n(73),s=new r({Extends:o,Mixins:[i.Acceleration,i.Angular,i.Bounce,i.Debug,i.Drag,i.Enable,i.Friction,i.Gravity,i.Immovable,i.Mass,i.Pushable,i.Size,i.Velocity],initialize:function(t,e,n,r,i){o.call(this,t,e,n,r,i),this.body=null}});t.exports=s},function(t,e,n){var r=n(119);t.exports=function(t,e,n,i){if(void 0===n&&(n=!1),r(t,e,i)){var o=i.data[e][t]||null;return o?-1===o.index?n?o:null:o:null}return null}},function(t,e){t.exports=function(t,e,n,r){var i,o,s,a=t.data,u=t.width,c=t.height,h=t.tilemapLayer,l=Math.max(0,e.left),f=Math.min(u,e.right),d=Math.max(0,e.top),p=Math.min(c,e.bottom);if(0===n)for(o=d;o<p;o++)for(i=l;a[o]&&i<f;i++)(s=a[o][i])&&-1!==s.index&&s.visible&&0!==s.alpha&&r.push(s);else if(1===n)for(o=d;o<p;o++)for(i=f;a[o]&&i>=l;i--)(s=a[o][i])&&-1!==s.index&&s.visible&&0!==s.alpha&&r.push(s);else if(2===n)for(o=p;o>=d;o--)for(i=l;a[o]&&i<f;i++)(s=a[o][i])&&-1!==s.index&&s.visible&&0!==s.alpha&&r.push(s);else if(3===n)for(o=p;o>=d;o--)for(i=f;a[o]&&i>=l;i--)(s=a[o][i])&&-1!==s.index&&s.visible&&0!==s.alpha&&r.push(s);return h.tilesDrawn=r.length,h.tilesTotal=u*c,r}},function(t,e){t.exports=function(t,e,n){var r=n.collideIndexes.indexOf(t);e&&-1===r?n.collideIndexes.push(t):e||-1===r||n.collideIndexes.splice(r,1)}},function(t,e,n){var r=n(2);t.exports=function(t,e,n){if(!e)return{i:0,layers:t.layers,name:"",opacity:1,visible:!0,x:0,y:0};var i=e.x+r(e,"startx",0)*t.tilewidth+r(e,"offsetx",0),o=e.y+r(e,"starty",0)*t.tileheight+r(e,"offsety",0);return{i:0,layers:e.layers,name:n.name+e.name+"/",opacity:n.opacity*e.opacity,visible:n.visible&&e.visible,x:n.x+i,y:n.y+o}}},function(t,e){t.exports=function(t,e,n){return t.hasOwnProperty(e)?"function"===typeof t[e]?function(n,r,i,o,s,a){return t[e](n,r,i,o,s,a)}:function(){return t[e]}:"function"===typeof n?n:function(){return n}}},function(t,e,n){var r=n(265),i=n(13),o=n(99),s=n(80),a=n(162),u=n(583),c=n(263),h=n(6),l=n(264),f=n(266),d=n(268);t.exports=function(t,e,n){void 0===n&&(n=r);for(var p=n.targets?n.targets:c(e),v=u(e),g=a(e,"delay",n.delay),m=a(e,"duration",n.duration),y=h(e,"easeParams",n.easeParams),b=s(h(e,"ease",n.ease),y),w=a(e,"hold",n.hold),x=a(e,"repeat",n.repeat),_=a(e,"repeatDelay",n.repeatDelay),T=o(e,"yoyo",n.yoyo),E=o(e,"flipX",n.flipX),S=o(e,"flipY",n.flipY),k=[],A=0;A<v.length;A++)for(var O=v[A].key,C=v[A].value,P=0;P<p.length;P++){var I=l(O,C),R=d(p[P],P,O,I.getEnd,I.getStart,I.getActive,s(h(C,"ease",b),h(C,"easeParams",y)),a(C,"delay",g),a(C,"duration",m),o(C,"yoyo",T),a(C,"hold",w),a(C,"repeat",x),a(C,"repeatDelay",_),o(C,"flipX",E),o(C,"flipY",S));k.push(R)}var M=new f(t,k,p);M.offset=i(e,"offset",null),M.completeDelay=i(e,"completeDelay",0),M.loop=Math.round(i(e,"loop",0)),M.loopDelay=Math.round(i(e,"loopDelay",0)),M.paused=o(e,"paused",!1),M.useFrames=o(e,"useFrames",!1);for(var N=h(e,"callbackScope",M),L=[M,null],D=f.TYPES,F=0;F<D.length;F++){var j=D[F],B=h(e,j,!1);if(B){var U=h(e,j+"Scope",N),V=h(e,j+"Params",[]);M.setCallback(j,B,L.concat(V),U)}}return M}},function(t,e,n){var r=n(0),i=n(102),o=n(2),s=n(132),a=n(185),u=new r({initialize:function(t){this.parent=t,this.animationManager=t.scene.sys.anims,this.animationManager.on(s.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0,this._pendingStopValue},chain:function(t){var e=this.parent;if(void 0===t)return this.nextAnimsQueue.length=0,this.nextAnim=null,e;Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n];null===this.nextAnim?this.nextAnim=r:this.nextAnimsQueue.push(r)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(t){this.isPlaying&&this.stop();var e=this.animationManager,n="string"===typeof t?t:o(t,"key",null),r=this.exists(n)?this.get(n):e.get(n);if(r){this.currentAnim=r;var i=r.getTotalFrames(),s=o(t,"frameRate",r.frameRate),a=o(t,"duration",r.duration);r.calculateDuration(this,i,a,s),this.delay=o(t,"delay",r.delay),this.repeat=o(t,"repeat",r.repeat),this.repeatDelay=o(t,"repeatDelay",r.repeatDelay),this.yoyo=o(t,"yoyo",r.yoyo),this.showOnStart=o(t,"showOnStart",r.showOnStart),this.hideOnComplete=o(t,"hideOnComplete",r.hideOnComplete),this.skipMissedFrames=o(t,"skipMissedFrames",r.skipMissedFrames),this.timeScale=o(t,"timeScale",this.timeScale);var u=o(t,"startFrame",0);u>r.getTotalFrames()&&(u=0);var c=r.frames[u];0!==u||this.forward||(c=r.getLastFrame()),this.currentFrame=c}else console.warn("Missing animation: "+n);return this.parent},pause:function(t){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),void 0!==t&&this.setCurrentFrame(t),this.parent},resume:function(t){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),void 0!==t&&this.setCurrentFrame(t),this.parent},playAfterDelay:function(t,e){if(this.isPlaying){var n=this.nextAnim,r=this.nextAnimsQueue;n&&r.unshift(n),this.nextAnim=t,this._pendingStop=1,this._pendingStopValue=e}else this.delayCounter=e,this.play(t,!0);return this.parent},playAfterRepeat:function(t,e){if(void 0===e&&(e=1),this.isPlaying){var n=this.nextAnim,r=this.nextAnimsQueue;n&&r.unshift(n),-1!==this.repeatCounter&&e>this.repeatCounter&&(e=this.repeatCounter),this.nextAnim=t,this._pendingStop=2,this._pendingStopValue=e}else this.play(t);return this.parent},play:function(t,e){void 0===e&&(e=!1);var n=this.currentAnim,r=this.parent,i="string"===typeof t?t:t.key;if(e&&this.isPlaying&&n.key===i)return r;if(n&&this.isPlaying){var o=this.animationManager.getMix(n.key,t);if(o>0)return this.playAfterDelay(t,o)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(t)},playReverse:function(t,e){void 0===e&&(e=!1);var n="string"===typeof t?t:t.key;return e&&this.isPlaying&&this.currentAnim.key===n?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(t))},startAnimation:function(t){this.load(t);var e=this.currentAnim,n=this.parent;return e?(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat,e.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,0===this.delayCounter&&this.handleStart(),n):n},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(s.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(s.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(s.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(s.ANIMATION_COMPLETE,s.ANIMATION_COMPLETE_KEY)},emitEvents:function(t,e){var n=this.currentAnim,r=this.currentFrame,i=this.parent,o=r.textureFrame;i.emit(t,n,r,i,o),e&&i.emit(e+n.key,n,r,i,o)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var t=this.currentFrame;if(!t)return 0;var e=t.progress;return this.inReverse&&(e*=-1),e},setProgress:function(t){return this.forward||(t=1-t),this.setCurrentFrame(this.currentAnim.getFrameByProgress(t)),this.parent},setRepeat:function(t){return this.repeatCounter=-1===t?Number.MAX_VALUE:t,this.parent},globalRemove:function(t,e){void 0===e&&(e=this.currentAnim),this.isPlaying&&e.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var n=this.currentAnim,r=this.parent;return n?(e&&(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat),n.getFirstTick(this),this.emitEvents(s.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!t,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(n.frames[0]),this.parent):r},complete:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim){var t=this.nextAnim;this.nextAnim=this.nextAnimsQueue.length>0?this.nextAnimsQueue.shift():null,this.play(t)}return this.parent},stop:function(){if(this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim){var t=this.nextAnim;this.nextAnim=this.nextAnimsQueue.shift(),this.play(t)}return this.parent},stopAfterDelay:function(t){return this._pendingStop=1,this._pendingStopValue=t,this.parent},stopAfterRepeat:function(t){return void 0===t&&(t=1),-1!==this.repeatCounter&&t>this.repeatCounter&&(t=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=t,this.parent},stopOnFrame:function(t){return this._pendingStop=3,this._pendingStopValue=t,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(t,e){var n=this.currentAnim;if(this.isPlaying&&n&&!n.paused){if(this.accumulator+=e*this.timeScale,1===this._pendingStop&&(this._pendingStopValue-=e,this._pendingStopValue<=0))return this.stop();if(this.hasStarted){if(this.accumulator>=this.nextTick&&(this.forward?n.nextFrame(this):n.previousFrame(this),this.isPlaying&&0===this._pendingStop&&this.skipMissedFrames&&this.accumulator>this.nextTick)){var r=0;do{this.forward?n.nextFrame(this):n.previousFrame(this),r++}while(this.isPlaying&&this.accumulator>this.nextTick&&r<60)}}else this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart())}},setCurrentFrame:function(t){var e=this.parent;return this.currentFrame=t,e.texture=t.frame.texture,e.frame=t.frame,e.isCropped&&e.frame.updateCropUVs(e._crop,e.flipX,e.flipY),t.setAlpha&&(e.alpha=t.alpha),e.setSizeToFrame(),e._originComponent&&(t.frame.customPivot?e.setOrigin(t.frame.pivotX,t.frame.pivotY):e.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(s.ANIMATION_UPDATE),3===this._pendingStop&&this._pendingStopValue===t&&this.stop()),e},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(t){return this.anims?this.anims.get(t):null},exists:function(t){return!!this.anims&&this.anims.has(t)},create:function(t){var e=t.key,n=!1;return e&&((n=this.get(e))||(n=new a(this,e,t),this.anims||(this.anims=new i),this.anims.set(e,n))),n},generateFrameNames:function(t,e){return this.animationManager.generateFrameNames(t,e)},generateFrameNumbers:function(t,e){return this.animationManager.generateFrameNumbers(t,e)},remove:function(t){var e=this.get(t);return e&&(this.currentAnim===e&&this.stop(),this.anims.delete(t)),e},destroy:function(){this.animationManager.off(s.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});t.exports=u},function(t,e,n){var r={};t.exports=r;var i=n(166);r._motionWakeThreshold=.18,r._motionSleepThreshold=.08,r._minBias=.9,r.update=function(t,e){for(var n=e*e*e,i=0;i<t.length;i++){var o=t[i],s=o.speed*o.speed+o.angularSpeed*o.angularSpeed;if(0===o.force.x&&0===o.force.y){var a=Math.min(o.motion,s),u=Math.max(o.motion,s);o.motion=r._minBias*a+(1-r._minBias)*u,o.sleepThreshold>0&&o.motion<r._motionSleepThreshold*n?(o.sleepCounter+=1,o.sleepCounter>=o.sleepThreshold&&r.set(o,!0)):o.sleepCounter>0&&(o.sleepCounter-=1)}else r.set(o,!1)}},r.afterCollisions=function(t,e){for(var n=e*e*e,i=0;i<t.length;i++){var o=t[i];if(o.isActive){var s=o.collision,a=s.bodyA.parent,u=s.bodyB.parent;if(!(a.isSleeping&&u.isSleeping||a.isStatic||u.isStatic)&&(a.isSleeping||u.isSleeping)){var c=a.isSleeping&&!a.isStatic?a:u,h=c===a?u:a;!c.isStatic&&h.motion>r._motionWakeThreshold*n&&r.set(c,!1)}}}},r.set=function(t,e){var n=t.isSleeping;e?(t.isSleeping=!0,t.sleepCounter=t.sleepThreshold,t.positionImpulse.x=0,t.positionImpulse.y=0,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.anglePrev=t.angle,t.speed=0,t.angularSpeed=0,t.motion=0,n||i.trigger(t,"sleepStart")):(t.isSleeping=!1,t.sleepCounter=0,n&&i.trigger(t,"sleepEnd"))}},function(t,e,n){var r={};t.exports=r;var i=n(32);r.on=function(t,e,n){for(var r,i=e.split(" "),o=0;o<i.length;o++)r=i[o],t.events=t.events||{},t.events[r]=t.events[r]||[],t.events[r].push(n);return n},r.off=function(t,e,n){if(e){"function"===typeof e&&(n=e,e=i.keys(t.events).join(" "));for(var r=e.split(" "),o=0;o<r.length;o++){var s=t.events[r[o]],a=[];if(n&&s)for(var u=0;u<s.length;u++)s[u]!==n&&a.push(s[u]);t.events[r[o]]=a}}else t.events={}},r.trigger=function(t,e,n){var r,o,s,a,u=t.events;if(u&&i.keys(u).length>0){n||(n={}),r=e.split(" ");for(var c=0;c<r.length;c++)if(s=u[o=r[c]]){(a=i.clone(n,!1)).name=o,a.source=t;for(var h=0;h<s.length;h++)s[h].apply(t,[a])}}}},function(t,e,n){var r=n(175),i=n(92),o=n(74),s={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(t){void 0===t&&(t=i.MULTI_PIPELINE);var e=this.scene.sys.renderer;if(!e)return!1;var n=e.pipelines;if(this.postPipelines=[],this.pipelineData={},n){var r=n.get(t);if(r)return this.defaultPipeline=r,this.pipeline=r,!0}return!1},setPipeline:function(t,e,n){var i=this.scene.sys.renderer;if(!i)return this;var o=i.pipelines;if(o){var s=o.get(t);s&&(this.pipeline=s),e&&(this.pipelineData=n?r(e):e)}return this},setPostPipeline:function(t,e,n){var i=this.scene.sys.renderer;if(!i)return this;var o=i.pipelines;if(o){Array.isArray(t)||(t=[t]);for(var s=0;s<t.length;s++){var a=o.getPostPipeline(t[s],this);a&&this.postPipelines.push(a)}e&&(this.pipelineData=n?r(e):e)}return this.hasPostPipeline=this.postPipelines.length>0,this},setPipelineData:function(t,e){var n=this.pipelineData;return void 0===e?delete n[t]:n[t]=e,this},getPostPipeline:function(t){for(var e=this.postPipelines,n=[],r=0;r<e.length;r++){var i=e[r];("string"===typeof t&&i.name===t||i instanceof t)&&n.push(i)}return 1===n.length?n[0]:n},resetPipeline:function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),this.pipeline=this.defaultPipeline,t&&(this.postPipelines=[],this.hasPostPipeline=!1),e&&(this.pipelineData={}),null!==this.pipeline},resetPostPipeline:function(t){void 0===t&&(t=!1);for(var e=this.postPipelines,n=0;n<e.length;n++)e[n].destroy();this.postPipelines=[],this.hasPostPipeline=!1,t&&(this.pipelineData={})},removePostPipeline:function(t){for(var e=this.postPipelines,n=e.length-1;n>=0;n--){var r=e[n];("string"===typeof t&&r.name===t||"string"!==typeof t&&r instanceof t)&&(r.destroy(),o(e,n))}return this.hasPostPipeline=this.postPipelines.length>0,this},getPipelineName:function(){return this.pipeline.name}};t.exports=s},function(t,e){t.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},function(t,e,n){var r=n(4);t.exports=function(t,e,n){return void 0===n&&(n=new r),n.x=t.x+t.radius*Math.cos(e),n.y=t.y+t.radius*Math.sin(e),n}},function(t,e,n){var r=n(4);t.exports=function(t,e){void 0===e&&(e=new r);var n=2*Math.PI*Math.random(),i=Math.random()+Math.random(),o=i>1?2-i:i,s=o*Math.cos(n),a=o*Math.sin(n);return e.x=t.x+s*t.radius,e.y=t.y+a*t.radius,e}},function(t,e,n){var r=n(130),i=n(4);t.exports=function(t,e,n){if(void 0===n&&(n=new i),e<=0||e>=1)return n.x=t.x,n.y=t.y,n;var o=r(t)*e;return e>.5?(o-=t.width+t.height)<=t.width?(n.x=t.right-o,n.y=t.bottom):(n.x=t.x,n.y=t.bottom-(o-t.width)):o<=t.width?(n.x=t.x+o,n.y=t.y):(n.x=t.right,n.y=t.y+(o-t.width)),n}},function(t,e,n){var r=n(67),i=n(4);t.exports=function(t,e,n,o){void 0===o&&(o=[]),!e&&n>0&&(e=r(t)/n);for(var s=t.x1,a=t.y1,u=t.x2,c=t.y2,h=0;h<e;h++){var l=h/e,f=s+(u-s)*l,d=a+(c-a)*l;o.push(new i(f,d))}return o}},function(t,e,n){var r=n(4);t.exports=function(t,e){void 0===e&&(e=new r);var n=Math.random();return e.x=t.x1+n*(t.x2-t.x1),e.y=t.y1+n*(t.y2-t.y1),e}},function(t,e,n){var r=n(4);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=t.x+Math.random()*t.width,e.y=t.y+Math.random()*t.height,e}},function(t,e){t.exports=function t(e){var n,r,i;if("object"!==typeof e||null===e)return e;for(i in n=Array.isArray(e)?[]:{},e)r=e[i],n[i]=t(r);return n}},function(t,e){t.exports=function(t){var e={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(e.textureKey=t.texture.key,e.frameKey=t.frame.name),e}},function(t,e,n){var r=n(3);t.exports=function(t,e,n,i,o,s,a,u){void 0===u&&(u=new r);var c=Math.sin(o),h=Math.cos(o),l=h*s,f=c*s,d=-c*a,p=h*a,v=1/(l*p+d*-f);return u.x=p*v*t+-d*v*e+(i*d-n*p)*v,u.y=l*v*e+-f*v*t+(-i*l+n*f)*v,u}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);for(var n=null,r=0;r<e;r++)n=t.shift(),t.push(n);return n}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);for(var n=null,r=0;r<e;r++)n=t.pop(),t.unshift(n);return n}},function(t,e,n){var r=n(4);t.exports=function(t,e){void 0===e&&(e=new r);var n=Math.random()*Math.PI*2,i=Math.sqrt(Math.random());return e.x=t.x+i*Math.cos(n)*t.width/2,e.y=t.y+i*Math.sin(n)*t.height/2,e}},function(t,e,n){var r=n(4);t.exports=function(t,e){void 0===e&&(e=new r);var n=t.x2-t.x1,i=t.y2-t.y1,o=t.x3-t.x1,s=t.y3-t.y1,a=Math.random(),u=Math.random();return a+u>=1&&(a=1-a,u=1-u),e.x=t.x1+(n*a+o*u),e.y=t.y1+(i*a+s*u),e}},function(t,e){t.exports=function(t,e,n,r,i){var o=r+Math.atan2(t.y-n,t.x-e);return t.x=e+i*Math.cos(o),t.y=n+i*Math.sin(o),t}},function(t,e){t.exports=function(t,e,n){return(t=Math.max(0,Math.min(1,(t-e)/(n-e))))*t*t*(t*(6*t-15)+10)}},function(t,e){t.exports=function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)}},function(t,e,n){var r=n(18),i=n(0),o=n(132),s=n(318),a=n(319),u=n(6),c=n(320),h=new i({initialize:function(t,e,n){this.manager=t,this.key=e,this.type="frame",this.frames=this.getFrames(t.textureManager,u(n,"frames",[]),u(n,"defaultTextureKey",null),u(n,"sortFrames",!0)),this.frameRate=u(n,"frameRate",null),this.duration=u(n,"duration",null),this.msPerFrame,this.skipMissedFrames=u(n,"skipMissedFrames",!0),this.delay=u(n,"delay",0),this.repeat=u(n,"repeat",0),this.repeatDelay=u(n,"repeatDelay",0),this.yoyo=u(n,"yoyo",!1),this.showOnStart=u(n,"showOnStart",!1),this.hideOnComplete=u(n,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(o.PAUSE_ALL,this.pause,this),this.manager.on(o.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(t,e,n,r){null===n&&null===r?(t.frameRate=24,t.duration=24/e*1e3):n&&null===r?(t.duration=n,t.frameRate=e/(n/1e3)):(t.frameRate=r,t.duration=e/r*1e3),t.msPerFrame=1e3/t.frameRate},addFrame:function(t){return this.addFrameAt(this.frames.length,t)},addFrameAt:function(t,e){var n=this.getFrames(this.manager.textureManager,e);if(n.length>0){if(0===t)this.frames=n.concat(this.frames);else if(t===this.frames.length)this.frames=this.frames.concat(n);else{var r=this.frames.slice(0,t),i=this.frames.slice(t);this.frames=r.concat(n,i)}this.updateFrameSequence()}return this},checkFrame:function(t){return t>=0&&t<this.frames.length},getFirstTick:function(t){t.accumulator=0,t.nextTick=t.msPerFrame+t.currentFrame.duration},getFrameAt:function(t){return this.frames[t]},getFrames:function(t,e,n,r){void 0===r&&(r=!0);var i,o,s,h,l=[],f=1;if("string"===typeof e){h=e;var d=t.get(h).getFrameNames();r&&c(d),e=[],d.forEach((function(t){e.push({key:h,frame:t})}))}if(!Array.isArray(e)||0===e.length)return l;for(s=0;s<e.length;s++){var p=e[s],v=u(p,"key",n);if(v){var g=u(p,"frame",0),m=t.getFrame(v,g);(o=new a(v,g,f,m)).duration=u(p,"duration",0),o.isFirst=!i,i&&(i.nextFrame=o,o.prevFrame=i),l.push(o),i=o,f++}}if(l.length>0){o.isLast=!0,o.nextFrame=l[0],l[0].prevFrame=o;var y=1/(l.length-1);for(s=0;s<l.length;s++)l[s].progress=s*y}return l},getNextTick:function(t){t.accumulator-=t.nextTick,t.nextTick=t.msPerFrame+t.currentFrame.duration},getFrameByProgress:function(t){return t=r(t,0,1),s(t,this.frames,"progress")},nextFrame:function(t){var e=t.currentFrame;e.isLast?t.yoyo?this.handleYoyoFrame(t,!1):t.repeatCounter>0?t.inReverse&&t.forward?t.forward=!1:this.repeatAnimation(t):t.complete():this.updateAndGetNextTick(t,e.nextFrame)},handleYoyoFrame:function(t,e){if(e||(e=!1),t.inReverse===!e&&t.repeatCounter>0)return(0===t.repeatDelay||t.pendingRepeat)&&(t.forward=e),void this.repeatAnimation(t);if(t.inReverse===e||0!==t.repeatCounter){t.forward=e;var n=e?t.currentFrame.nextFrame:t.currentFrame.prevFrame;this.updateAndGetNextTick(t,n)}else t.complete()},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(t){var e=t.currentFrame;e.isFirst?t.yoyo?this.handleYoyoFrame(t,!0):t.repeatCounter>0?(t.inReverse&&!t.forward||(t.forward=!0),this.repeatAnimation(t)):t.complete():this.updateAndGetNextTick(t,e.prevFrame)},updateAndGetNextTick:function(t,e){t.setCurrentFrame(e),this.getNextTick(t)},removeFrame:function(t){var e=this.frames.indexOf(t);return-1!==e&&this.removeFrameAt(e),this},removeFrameAt:function(t){return this.frames.splice(t,1),this.updateFrameSequence(),this},repeatAnimation:function(t){if(2===t._pendingStop){if(0===t._pendingStopValue)return t.stop();t._pendingStopValue--}t.repeatDelay>0&&!t.pendingRepeat?(t.pendingRepeat=!0,t.accumulator-=t.nextTick,t.nextTick+=t.repeatDelay):(t.repeatCounter--,t.forward?t.setCurrentFrame(t.currentFrame.nextFrame):t.setCurrentFrame(t.currentFrame.prevFrame),t.isPlaying&&(this.getNextTick(t),t.handleRepeat()))},toJSON:function(){var t={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach((function(e){t.frames.push(e.toJSON())})),t},updateFrameSequence:function(){for(var t,e=this.frames.length,n=1/(e-1),r=0;r<e;r++)(t=this.frames[r]).index=r+1,t.isFirst=!1,t.isLast=!1,t.progress=r*n,0===r?(t.isFirst=!0,1===e?(t.isLast=!0,t.nextFrame=t,t.prevFrame=t):(t.isLast=!1,t.prevFrame=this.frames[e-1],t.nextFrame=this.frames[r+1])):r===e-1&&e>1?(t.isLast=!0,t.prevFrame=this.frames[e-2],t.nextFrame=this.frames[0]):e>1&&(t.prevFrame=this.frames[r-1],t.nextFrame=this.frames[r+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(o.PAUSE_ALL,this.pause,this),this.manager.off(o.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var t=0;t<this.frames.length;t++)this.frames[t].destroy();this.frames=[],this.manager=null}});t.exports=h},function(t,e){t.exports=function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=" "),void 0===r&&(r=3);var i=0;if(e+1>=(t=t.toString()).length)switch(r){case 1:t=new Array(e+1-t.length).join(n)+t;break;case 3:var o=Math.ceil((i=e-t.length)/2);t=new Array(i-o+1).join(n)+t+new Array(o+1).join(n);break;default:t+=new Array(e+1-t.length).join(n)}return t}},function(t,e,n){var r=n(327),i=n(189),o=n(331),s=n(332);t.exports=function(t){switch(typeof t){case"string":return"rgb"===t.substr(0,3).toLowerCase()?s(t):r(t);case"number":return i(t);case"object":return o(t)}}},function(t,e,n){var r=n(103);function i(t,e,n,r){var i=(t+6*e)%6,o=Math.min(i,4-i,1);return Math.round(255*(r-r*n*Math.max(0,o)))}t.exports=function(t,e,n,o){void 0===e&&(e=1),void 0===n&&(n=1);var s=i(5,t,e,n),a=i(3,t,e,n),u=i(1,t,e,n);return o?o.setTo?o.setTo(s,a,u,o.alpha,!1):(o.r=s,o.g=a,o.b=u,o.color=r(s,a,u),o):{r:s,g:a,b:u,color:r(s,a,u)}}},function(t,e,n){var r=n(38),i=n(330);t.exports=function(t){var e=i(t);return new r(e.r,e.g,e.b,e.a)}},function(t,e){t.exports=function(t,e,n){return t.x=e-t.width/2,t.y=n-t.height/2,t}},function(t,e,n){var r=n(105),i=n(136),o=n(31),s={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};t.exports=function(){if("function"===typeof importScripts)return s;s.canvas=!!window.CanvasRenderingContext2D;try{s.localStorage=!!localStorage.getItem}catch(e){s.localStorage=!1}s.file=!!window.File&&!!window.FileReader&&!!window.FileList&&!!window.Blob,s.fileSystem=!!window.requestFileSystem;var t=!1;return s.webGL=function(){if(window.WebGLRenderingContext)try{var e=o.createWebGL(this),n=e.getContext("webgl")||e.getContext("experimental-webgl"),r=o.create2D(this),i=r.getContext("2d").createImageData(1,1);return t=i.data instanceof Uint8ClampedArray,o.remove(e),o.remove(r),!!n}catch(s){return!1}return!1}(),s.worker=!!window.Worker,s.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,s.getUserMedia=s.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,i.firefox&&i.firefoxVersion<21&&(s.getUserMedia=!1),!r.iOS&&(i.ie||i.firefox||i.chrome)&&(s.canvasBitBltShift=!0),(i.safari||i.mobileSafari)&&(s.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(s.vibration=!0),"undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint32Array&&(s.littleEndian=function(){var t=new ArrayBuffer(4),e=new Uint8Array(t),n=new Uint32Array(t);return e[0]=161,e[1]=178,e[2]=195,e[3]=212,3569595041===n[0]||2712847316!==n[0]&&null}()),s.support32bit="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof Int32Array&&null!==s.littleEndian&&t,s}()},function(t,e){var n="";t.exports=function(){var t=function(t){for(var e=["i","webkitI","msI","mozI","oI"],n=0;n<e.length;n++){var r=e[n]+"mageSmoothingEnabled";if(r in t)return r}return null};return{disable:function(e){return""===n&&(n=t(e)),n&&(e[n]=!1),e},enable:function(e){return""===n&&(n=t(e)),n&&(e[n]=!0),e},getPrefix:t,isEnabled:function(t){return null!==n?t[n]:null}}}()},function(t,e,n){var r=n(14),i=n(17),o={Angle:n(812),Distance:n(821),Easing:n(826),Fuzzy:n(827),Interpolation:n(830),Pow2:n(835),Snap:n(837),RandomDataGenerator:n(839),Average:n(840),Bernstein:n(356),Between:n(195),CatmullRom:n(194),CeilTo:n(841),Clamp:n(18),DegToRad:n(36),Difference:n(842),Euler:n(843),Factorial:n(357),FloatBetween:n(137),FloorTo:n(844),FromPercent:n(98),GetSpeed:n(845),IsEven:n(846),IsEvenStrict:n(847),Linear:n(135),MaxAdd:n(848),Median:n(849),MinSub:n(850),Percent:n(851),RadToDeg:n(196),RandomXY:n(852),RandomXYZ:n(853),RandomXYZW:n(854),Rotate:n(362),RotateAround:n(308),RotateAroundDistance:n(182),RotateTo:n(855),RoundAwayFromZero:n(363),RoundTo:n(856),SinCosTableGenerator:n(857),SmootherStep:n(183),SmoothStep:n(184),ToXY:n(858),TransformXY:n(177),Within:n(859),Wrap:n(68),Vector2:n(3),Vector3:n(39),Vector4:n(140),Matrix3:n(364),Matrix4:n(69),Quaternion:n(365),RotateVec3:n(860)};o=i(!1,o,r),t.exports=o},function(t,e){t.exports=function(t,e,n,r,i){var o=.5*(r-e),s=.5*(i-n),a=t*t;return(2*n-2*r+o+s)*(t*a)+(-3*n+3*r-2*o-s)*a+o*t+n}},function(t,e){t.exports=function(t,e){return Math.floor(Math.random()*(e-t+1)+t)}},function(t,e,n){var r=n(14);t.exports=function(t){return t*r.RAD_TO_DEG}},function(t,e,n){t.exports={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]}},function(t,e,n){var r=new(n(0))({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0,this._data},set:function(t){return this._matrix=t,this._dirty=!0,this},reset:function(){var t=this._matrix;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=0,t[6]=1,t[7]=0,t[8]=0,t[9]=0,t[10]=0,t[11]=0,t[12]=1,t[13]=0,t[14]=0,t[15]=0,t[16]=0,t[17]=0,t[18]=1,t[19]=0,this._dirty=!0,this},getData:function(){if(this._dirty){var t=new Float32Array(this._matrix);t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,this._data=t,this._dirty=!1}return this._data},brightness:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var n=t;return this.multiply([n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0],e)},saturate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var n=2*t/3+1,r=-.5*(n-1);return this.multiply([n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0],e)},desaturate:function(t){return void 0===t&&(t=!1),this.saturate(-1,t)},hue:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1),t=t/180*Math.PI;var n=Math.cos(t),r=Math.sin(t),i=.213,o=.715,s=.072;return this.multiply([i+.787*n+r*-i,o+n*-o+r*-o,s+n*-s+.928*r,0,0,i+n*-i+.143*r,o+n*(1-o)+.14*r,s+n*-s+-.283*r,0,0,i+n*-i+-.787*r,o+n*-o+r*o,s+.928*n+r*s,0,0,0,0,0,1,0],e)},grayscale:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=!1),this.saturate(-t,e)},blackWhite:function(t){return void 0===t&&(t=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},contrast:function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1);var n=t+1,r=-.5*(n-1);return this.multiply([n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0],e)},negative:function(t){return void 0===t&&(t=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},desaturateLuminance:function(t){return void 0===t&&(t=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],t)},sepia:function(t){return void 0===t&&(t=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},night:function(t,e){return void 0===t&&(t=.1),void 0===e&&(e=!1),this.multiply([-2*t,-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0],e)},lsd:function(t){return void 0===t&&(t=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},brown:function(t){return void 0===t&&(t=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},vintagePinhole:function(t){return void 0===t&&(t=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},kodachrome:function(t){return void 0===t&&(t=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},technicolor:function(t){return void 0===t&&(t=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},polaroid:function(t){return void 0===t&&(t=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},shiftToBGR:function(t){return void 0===t&&(t=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},multiply:function(t,e){e||this.reset();for(var n=this._matrix,r=[],i=0;i<20;i++)r[i]=n[i];return n[0]=r[0]*t[0]+r[1]*t[5]+r[2]*t[10]+r[3]*t[15],n[1]=r[0]*t[1]+r[1]*t[6]+r[2]*t[11]+r[3]*t[16],n[2]=r[0]*t[2]+r[1]*t[7]+r[2]*t[12]+r[3]*t[17],n[3]=r[0]*t[3]+r[1]*t[8]+r[2]*t[13]+r[3]*t[18],n[4]=r[0]*t[4]+r[1]*t[9]+r[2]*t[14]+r[3]*t[19]+r[4],n[5]=r[5]*t[0]+r[6]*t[5]+r[7]*t[10]+r[8]*t[15],n[6]=r[5]*t[1]+r[6]*t[6]+r[7]*t[11]+r[8]*t[16],n[7]=r[5]*t[2]+r[6]*t[7]+r[7]*t[12]+r[8]*t[17],n[8]=r[5]*t[3]+r[6]*t[8]+r[7]*t[13]+r[8]*t[18],n[9]=r[5]*t[4]+r[6]*t[9]+r[7]*t[14]+r[8]*t[19]+r[9],n[10]=r[10]*t[0]+r[11]*t[5]+r[12]*t[10]+r[13]*t[15],n[11]=r[10]*t[1]+r[11]*t[6]+r[12]*t[11]+r[13]*t[16],n[12]=r[10]*t[2]+r[11]*t[7]+r[12]*t[12]+r[13]*t[17],n[13]=r[10]*t[3]+r[11]*t[8]+r[12]*t[13]+r[13]*t[18],n[14]=r[10]*t[4]+r[11]*t[9]+r[12]*t[14]+r[13]*t[19]+r[14],n[15]=r[15]*t[0]+r[16]*t[5]+r[17]*t[10]+r[18]*t[15],n[16]=r[15]*t[1]+r[16]*t[6]+r[17]*t[11]+r[18]*t[16],n[17]=r[15]*t[2]+r[16]*t[7]+r[17]*t[12]+r[18]*t[17],n[18]=r[15]*t[3]+r[16]*t[8]+r[17]*t[13]+r[18]*t[18],n[19]=r[15]*t[4]+r[16]*t[9]+r[17]*t[14]+r[18]*t[19]+r[19],this._dirty=!0,this}});t.exports=r},function(t,e,n){var r=n(10),i=n(14);t.exports=function(t,e){if(void 0===e&&(e=new r),0===t.length)return e;for(var n,o,s,a=Number.MAX_VALUE,u=Number.MAX_VALUE,c=i.MIN_SAFE_INTEGER,h=i.MIN_SAFE_INTEGER,l=0;l<t.length;l++)n=t[l],Array.isArray(n)?(o=n[0],s=n[1]):(o=n.x,s=n.y),a=Math.min(a,o),u=Math.min(u,s),c=Math.max(c,o),h=Math.max(h,s);return e.x=a,e.y=u,e.width=c-a,e.height=h-u,e}},function(t,e,n){var r=n(0),i=n(1),o=new r({initialize:function(t,e,n){this._rgb=[0,0,0],this.onChangeCallback=i,this.dirty=!1,this.set(t,e,n)},set:function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this._rgb=[t,e,n],this.onChange(),this},equals:function(t,e,n){var r=this._rgb;return r.r===t&&r.g===e&&r.b===n},onChange:function(){this.dirty=!0;var t=this._rgb;this.onChangeCallback.call(this,t[0],t[1],t[2])},r:{get:function(){return this._rgb[0]},set:function(t){this._rgb[0]=t,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(t){this._rgb[1]=t,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(t){this._rgb[2]=t,this.onChange()}},destroy:function(){this.onChangeCallback=null}});t.exports=o},function(t,e,n){var r={CENTER:n(403),ORIENTATION:n(404),SCALE_MODE:n(405),ZOOM:n(406)};t.exports=r},function(t,e){t.exports=function(t){t.parentNode&&t.parentNode.removeChild(t)}},function(t,e){t.exports={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8}},function(t,e,n){var r=n(0),i=n(144),o=n(197),s=n(20),a=n(419),u=n(420),c=n(33),h=n(1),l=n(421),f=new r({initialize:function(t,e){this.scene=t,this.game,this.renderer,this.config=e,this.settings=l.create(e),this.canvas,this.context,this.anims,this.cache,this.plugins,this.registry,this.scale,this.sound,this.textures,this.add,this.cameras,this.displayList,this.events,this.make,this.scenePlugin,this.updateList,this.sceneUpdate=h},init:function(t){this.settings.status=i.INIT,this.sceneUpdate=h,this.game=t,this.renderer=t.renderer,this.canvas=t.canvas,this.context=t.context;var e=t.plugins;this.plugins=e,e.addToScene(this,o.Global,[o.CoreScene,u(this),a(this)]),this.events.emit(s.BOOT,this),this.settings.isBooted=!0},step:function(t,e){var n=this.events;n.emit(s.PRE_UPDATE,t,e),n.emit(s.UPDATE,t,e),this.sceneUpdate.call(this.scene,t,e),n.emit(s.POST_UPDATE,t,e)},render:function(t){var e=this.displayList;e.depthSort(),this.events.emit(s.PRE_RENDER,t),this.cameras.render(t,e),this.events.emit(s.RENDER,t)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(t){var e=this.events,n=this.settings;return this.settings.active&&(n.status=i.PAUSED,n.active=!1,e.emit(s.PAUSE,this,t)),this},resume:function(t){var e=this.events,n=this.settings;return this.settings.active||(n.status=i.RUNNING,n.active=!0,e.emit(s.RESUME,this,t)),this},sleep:function(t){var e=this.events,n=this.settings;return n.status=i.SLEEPING,n.active=!1,n.visible=!1,e.emit(s.SLEEP,this,t),this},wake:function(t){var e=this.events,n=this.settings;return n.status=i.RUNNING,n.active=!0,n.visible=!0,e.emit(s.WAKE,this,t),n.isTransition&&e.emit(s.TRANSITION_WAKE,n.transitionFrom,n.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===i.SLEEPING},isActive:function(){return this.settings.status===i.RUNNING},isPaused:function(){return this.settings.status===i.PAUSED},isTransitioning:function(){return this.settings.isTransition||null!==this.scenePlugin._target},isTransitionOut:function(){return null!==this.scenePlugin._target&&this.scenePlugin._duration>0},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(t){return this.settings.visible=t,this},setActive:function(t,e){return t?this.resume(e):this.pause(e)},start:function(t){var e=this.events,n=this.settings;t&&(n.data=t),n.status=i.START,n.active=!0,n.visible=!0,e.emit(s.START,this),e.emit(s.READY,this,t)},shutdown:function(t){var e=this.events,n=this.settings;e.off(s.TRANSITION_INIT),e.off(s.TRANSITION_START),e.off(s.TRANSITION_COMPLETE),e.off(s.TRANSITION_OUT),n.status=i.SHUTDOWN,n.active=!1,n.visible=!1,this.renderer===c.WEBGL&&this.renderer.resetTextures(!0),e.emit(s.SHUTDOWN,this,t)},destroy:function(){var t=this.events,e=this.settings;e.status=i.DESTROYED,e.active=!1,e.visible=!1,t.emit(s.DESTROY,this),t.removeAllListeners();for(var n=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],r=0;r<n.length;r++)this[n[r]]=null}});t.exports=f},function(t,e){t.exports=function(t){return t&&t[0].toUpperCase()+t.slice(1)}},function(t,e,n){var r=n(33),i=n(0),o=n(109),s=n(424),a="Texture.frame missing: ",u=new i({initialize:function(t,e,n,r,i){Array.isArray(n)||(n=[n]),this.manager=t,this.key=e,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE",this.frameTotal=0;for(var o=0;o<n.length;o++)this.source.push(new s(this,n[o],r,i))},add:function(t,e,n,r,i,s){if(this.has(t))return null;var a=new o(this,t,e,n,r,i,s);return this.frames[t]=a,"__BASE"===this.firstFrame&&(this.firstFrame=t),this.frameTotal++,a},remove:function(t){return!!this.has(t)&&(this.get(t).destroy(),delete this.frames[t],!0)},has:function(t){return this.frames[t]},get:function(t){t||(t=this.firstFrame);var e=this.frames[t];return e||(console.warn(a+t),e=this.frames[this.firstFrame]),e},getTextureSourceIndex:function(t){for(var e=0;e<this.source.length;e++)if(this.source[e]===t)return e;return-1},getFramesFromTextureSource:function(t,e){void 0===e&&(e=!1);var n=[];for(var r in this.frames)if("__BASE"!==r||e){var i=this.frames[r];i.sourceIndex===t&&n.push(i)}return n},getFrameNames:function(t){void 0===t&&(t=!1);var e=Object.keys(this.frames);if(!t){var n=e.indexOf("__BASE");-1!==n&&e.splice(n,1)}return e},getSourceImage:function(t){void 0!==t&&null!==t&&1!==this.frameTotal||(t="__BASE");var e=this.frames[t];return e?e.source.image:(console.warn(a+t),this.frames.__BASE.source.image)},getDataSourceImage:function(t){void 0!==t&&null!==t&&1!==this.frameTotal||(t="__BASE");var e,n=this.frames[t];return n?e=n.sourceIndex:(console.warn(a+t),e=this.frames.__BASE.sourceIndex),this.dataSource[e].image},setDataSource:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var n=this.source[e];this.dataSource.push(new s(this,t[e],n.width,n.height))}},setFilter:function(t){var e;for(e=0;e<this.source.length;e++)this.source[e].setFilter(t);for(e=0;e<this.dataSource.length;e++)this.dataSource[e].setFilter(t)},destroy:function(){var t;for(t=0;t<this.source.length;t++)this.source[t].destroy();for(t=0;t<this.dataSource.length;t++)this.dataSource[t].destroy();for(var e in this.frames)this.frames[e].destroy();this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var n=this.manager.game.renderer;n&&n.type===r.WEBGL&&n.resetTextures(!0),this.manager=null}});t.exports=u},function(t,e,n){var r=n(78);t.exports=function(t,e,n,i,o){void 0===i&&(i=0),void 0===o&&(o=t.length);var s=[];if(r(t,i,o))for(var a=i;a<o;a++){var u=t[a];(!e||e&&void 0===n&&u.hasOwnProperty(e)||e&&void 0!==n&&u[e]===n)&&s.push(u)}return s}},function(t,e,n){t.exports={Matrix:n(1013),Add:n(1021),AddAt:n(1022),BringToTop:n(1023),CountAllMatching:n(1024),Each:n(1025),EachInRange:n(1026),FindClosestInSorted:n(318),GetAll:n(207),GetFirst:n(428),GetRandom:n(210),MoveDown:n(1027),MoveTo:n(1028),MoveUp:n(1029),MoveAbove:n(1030),MoveBelow:n(1031),NumberArray:n(322),NumberArrayStep:n(1032),QuickSelect:n(436),Range:n(437),Remove:n(93),RemoveAt:n(1033),RemoveBetween:n(1034),RemoveRandomElement:n(1035),Replace:n(1036),RotateLeft:n(178),RotateRight:n(179),SafeRange:n(78),SendToBack:n(1037),SetAll:n(1038),Shuffle:n(131),SortByDigits:n(320),SpliceOne:n(74),StableSort:n(79),Swap:n(1039)}},function(t,e){t.exports=function(t){if(!Array.isArray(t)||t.length<2||!Array.isArray(t[0]))return!1;for(var e=t[0].length,n=1;n<t.length;n++)if(t[n].length!==e)return!1;return!0}},function(t,e){t.exports=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.length);var r=e+Math.floor(Math.random()*n);return void 0===t[r]?null:t[r]}},function(t,e,n){var r=n(0),i=n(9),o=n(438),s=new r({Extends:i,initialize:function(){i.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(t){return this._pending.push(t),this._toProcess++,t},remove:function(t){return this._destroy.push(t),this._toProcess++,t},removeAll:function(){for(var t=this._active,e=this._destroy,n=t.length;n--;)e.push(t[n]),this._toProcess++;return this},update:function(){if(0===this._toProcess)return this._active;var t,e,n=this._destroy,r=this._active;for(t=0;t<n.length;t++){e=n[t];var i=r.indexOf(e);-1!==i&&(r.splice(i,1),this.emit(o.PROCESS_QUEUE_REMOVE,e))}for(n.length=0,n=this._pending,t=0;t<n.length;t++)e=n[t],(!this.checkQueue||this.checkQueue&&-1===r.indexOf(e))&&(r.push(e),this.emit(o.PROCESS_QUEUE_ADD,e));return n.length=0,this._toProcess=0,r},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});t.exports=s},function(t,e){function n(t,e){return parseInt(t.getAttribute(e),10)}t.exports=function(t,e,r,i,o){void 0===r&&(r=0),void 0===i&&(i=0);var s=e.cutX,a=e.cutY,u=e.source.width,c=e.source.height,h=e.sourceIndex,l={},f=t.getElementsByTagName("info")[0],d=t.getElementsByTagName("common")[0];l.font=f.getAttribute("face"),l.size=n(f,"size"),l.lineHeight=n(d,"lineHeight")+i,l.chars={};var p=t.getElementsByTagName("char"),v=void 0!==e&&e.trimmed;if(v)var g=e.height,m=e.width;for(var y=0;y<p.length;y++){var b=p[y],w=n(b,"id"),x=String.fromCharCode(w),_=n(b,"x"),T=n(b,"y"),E=n(b,"width"),S=n(b,"height");v&&(_<m&&(m=_),T<g&&(g=T)),v&&0!==g&&0!==m&&(_-=e.x,T-=e.y);var k=(s+_)/u,A=(a+T)/c,O=(s+_+E)/u,C=(a+T+S)/c;if(l.chars[w]={x:_,y:T,width:E,height:S,centerX:Math.floor(E/2),centerY:Math.floor(S/2),xOffset:n(b,"xoffset"),yOffset:n(b,"yoffset"),xAdvance:n(b,"xadvance")+r,data:{},kerning:{},u0:k,v0:A,u1:O,v1:C},o&&0!==E&&0!==S){var P=o.add(x,h,_,T,E,S);P&&P.setUVs(E,S,k,A,O,C)}}var I=t.getElementsByTagName("kerning");for(y=0;y<I.length;y++){var R=I[y],M=n(R,"first"),N=n(R,"second"),L=n(R,"amount");l.chars[N].kerning[M]=L}return l}},function(t,e,n){var r=n(1049),i=n(440),o=n(0),s=n(11),a=n(109),u=n(15),c=n(110),h=new o({Extends:u,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Mask,s.Pipeline,s.ScrollFactor,s.Size,s.Texture,s.Transform,s.Visible,r],initialize:function(t,e,n,r,i){u.call(this,t,"Blitter"),this.setTexture(r,i),this.setPosition(e,n),this.initPipeline(),this.children=new c,this.renderList=[],this.dirty=!1},create:function(t,e,n,r,o){void 0===r&&(r=!0),void 0===o&&(o=this.children.length),void 0===n?n=this.frame:n instanceof a||(n=this.texture.get(n));var s=new i(this,t,e,n,r);return this.children.addAt(s,o,!1),this.dirty=!0,s},createFromCallback:function(t,e,n,r){for(var i=this.createMultiple(e,n,r),o=0;o<i.length;o++){var s=i[o];t.call(this,s,o)}return i},createMultiple:function(t,e,n){void 0===e&&(e=this.frame.name),void 0===n&&(n=!0),Array.isArray(e)||(e=[e]);var r=[],i=this;return e.forEach((function(e){for(var o=0;o<t;o++)r.push(i.create(0,0,e,n))})),r},childCanRender:function(t){return t.visible&&t.alpha>0},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});t.exports=h},function(t,e,n){var r=n(208),i=n(35),o=n(0),s=n(11),a=n(75),u=n(15),c=n(10),h=n(1052),l=n(441),f=n(3),d=new o({Extends:u,Mixins:[s.AlphaSingle,s.BlendMode,s.ComputedSize,s.Depth,s.Mask,s.Pipeline,s.Transform,s.Visible,h],initialize:function(t,e,n,r){u.call(this,t,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new s.TransformMatrix,this.tempTransformMatrix=new s.TransformMatrix,this._sortKey="",this._sysEvents=t.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(e,n),this.clearAlpha(),this.setBlendMode(i.SKIP_CHECK),r&&this.add(r)},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return.5*this.width}},displayOriginY:{get:function(){return.5*this.height}},setExclusive:function(t){return void 0===t&&(t=!0),this.exclusive=t,this},getBounds:function(t){if(void 0===t&&(t=new c),t.setTo(this.x,this.y,0,0),this.parentContainer){var e=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y);t.setTo(e.x,e.y,0,0)}if(this.list.length>0){var n=this.list,r=new c,i=!1;t.setEmpty();for(var o=0;o<n.length;o++){var s=n[o];s.getBounds&&(s.getBounds(r),i?l(r,t,t):(t.setTo(r.x,r.y,r.width,r.height),i=!0))}}return t},addHandler:function(t){t.once(a.DESTROY,this.remove,this),this.exclusive&&(t.parentContainer&&t.parentContainer.remove(t),t.removeFromDisplayList(),t.parentContainer=this)},removeHandler:function(t){t.off(a.DESTROY,this.remove),this.exclusive&&(t.parentContainer=null,t.addToDisplayList())},pointToContainer:function(t,e){void 0===e&&(e=new f),this.parentContainer?this.parentContainer.pointToContainer(t,e):e=new f(t.x,t.y);var n=this.tempTransformMatrix;return n.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),n.invert(),n.transformPoint(t.x,t.y,e),e},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(t){return r.Add(this.list,t,this.maxSize,this.addHandler,this),this},addAt:function(t,e){return r.AddAt(this.list,t,e,this.maxSize,this.addHandler,this),this},getAt:function(t){return this.list[t]},getIndex:function(t){return this.list.indexOf(t)},sort:function(t,e){return t?(void 0===e&&(e=function(e,n){return e[t]-n[t]}),r.StableSort(this.list,e),this):this},getByName:function(t){return r.GetFirst(this.list,"name",t)},getRandom:function(t,e){return r.GetRandom(this.list,t,e)},getFirst:function(t,e,n,i){return r.GetFirst(this.list,t,e,n,i)},getAll:function(t,e,n,i){return r.GetAll(this.list,t,e,n,i)},count:function(t,e,n,i){return r.CountAllMatching(this.list,t,e,n,i)},swap:function(t,e){return r.Swap(this.list,t,e),this},moveTo:function(t,e){return r.MoveTo(this.list,t,e),this},moveAbove:function(t,e){return r.MoveAbove(this.list,t,e),this},moveBelow:function(t,e){return r.MoveBelow(this.list,t,e),this},remove:function(t,e){var n=r.Remove(this.list,t,this.removeHandler,this);if(e&&n){Array.isArray(n)||(n=[n]);for(var i=0;i<n.length;i++)n[i].destroy()}return this},removeAt:function(t,e){var n=r.RemoveAt(this.list,t,this.removeHandler,this);return e&&n&&n.destroy(),this},removeBetween:function(t,e,n){var i=r.RemoveBetween(this.list,t,e,this.removeHandler,this);if(n)for(var o=0;o<i.length;o++)i[o].destroy();return this},removeAll:function(t){var e=r.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(t)for(var n=0;n<e.length;n++)e[n].destroy();return this},bringToTop:function(t){return r.BringToTop(this.list,t),this},sendToBack:function(t){return r.SendToBack(this.list,t),this},moveUp:function(t){return r.MoveUp(this.list,t),this},moveDown:function(t){return r.MoveDown(this.list,t),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return r.Shuffle(this.list),this},replace:function(t,e,n){return r.Replace(this.list,t,e)&&(this.addHandler(e),this.removeHandler(t),n&&t.destroy()),this},exists:function(t){return this.list.indexOf(t)>-1},setAll:function(t,e,n,i){return r.SetAll(this.list,t,e,n,i),this},each:function(t,e){var n,r=[null],i=this.list.slice(),o=i.length;for(n=2;n<arguments.length;n++)r.push(arguments[n]);for(n=0;n<o;n++)r[0]=i[n],t.apply(e,r);return this},iterate:function(t,e){var n,r=[null];for(n=2;n<arguments.length;n++)r.push(arguments[n]);for(n=0;n<this.list.length;n++)r[0]=this.list[n],t.apply(e,r);return this},setScrollFactor:function(t,e,n){return void 0===e&&(e=t),void 0===n&&(n=!1),this.scrollFactorX=t,this.scrollFactorY=e,n&&(r.SetAll(this.list,"scrollFactorX",t),r.SetAll(this.list,"scrollFactorY",e)),this},length:{get:function(){return this.list.length}},first:{get:function(){return this.position=0,this.list.length>0?this.list[0]:null}},last:{get:function(){return this.list.length>0?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return this.position>0?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});t.exports=d},function(t,e,n){var r=n(148),i=n(0),o=n(1057),s=new i({Extends:r,Mixins:[o],initialize:function(t,e,n,i,o,s,a){r.call(this,t,e,n,i,o,s,a),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.displayCallback,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(t,e){return this.cropWidth=t,this.cropHeight=e,this},setDisplayCallback:function(t){return this.displayCallback=t,this},setScrollX:function(t){return this.scrollX=t,this},setScrollY:function(t){return this.scrollY=t,this}});t.exports=s},function(t,e,n){var r=n(133),i=n(0),o=n(217),s=n(303),a=n(304),u=n(305),c=n(309),h=n(167),l=n(312),f=n(313),d=n(314),p=n(111),v=n(15),g=n(2),m=n(6),y=n(14),b=n(1063),w=new i({Extends:v,Mixins:[s,a,u,c,h,f,d,l,b],initialize:function(t,e){var n=m(e,"x",0),r=m(e,"y",0);v.call(this,t,"Graphics"),this.setPosition(n,r),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(e)},setDefaultStyles:function(t){return m(t,"lineStyle",null)&&(this.defaultStrokeWidth=m(t,"lineStyle.width",1),this.defaultStrokeColor=m(t,"lineStyle.color",16777215),this.defaultStrokeAlpha=m(t,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),m(t,"fillStyle",null)&&(this.defaultFillColor=m(t,"fillStyle.color",16777215),this.defaultFillAlpha=m(t,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(t,e,n){return void 0===n&&(n=1),this.commandBuffer.push(o.LINE_STYLE,t,e,n),this._lineWidth=t,this},fillStyle:function(t,e){return void 0===e&&(e=1),this.commandBuffer.push(o.FILL_STYLE,t,e),this},fillGradientStyle:function(t,e,n,r,i,s,a,u){return void 0===i&&(i=1),void 0===s&&(s=i),void 0===a&&(a=i),void 0===u&&(u=i),this.commandBuffer.push(o.GRADIENT_FILL_STYLE,i,s,a,u,t,e,n,r),this},lineGradientStyle:function(t,e,n,r,i,s){return void 0===s&&(s=1),this.commandBuffer.push(o.GRADIENT_LINE_STYLE,t,s,e,n,r,i),this},beginPath:function(){return this.commandBuffer.push(o.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(o.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(o.FILL_PATH),this},fill:function(){return this.commandBuffer.push(o.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(o.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(o.STROKE_PATH),this},fillCircleShape:function(t){return this.fillCircle(t.x,t.y,t.radius)},strokeCircleShape:function(t){return this.strokeCircle(t.x,t.y,t.radius)},fillCircle:function(t,e,n){return this.beginPath(),this.arc(t,e,n,0,y.PI2),this.fillPath(),this},strokeCircle:function(t,e,n){return this.beginPath(),this.arc(t,e,n,0,y.PI2),this.strokePath(),this},fillRectShape:function(t){return this.fillRect(t.x,t.y,t.width,t.height)},strokeRectShape:function(t){return this.strokeRect(t.x,t.y,t.width,t.height)},fillRect:function(t,e,n,r){return this.commandBuffer.push(o.FILL_RECT,t,e,n,r),this},strokeRect:function(t,e,n,r){var i=this._lineWidth/2,o=t-i,s=t+i;return this.beginPath(),this.moveTo(t,e),this.lineTo(t,e+r),this.strokePath(),this.beginPath(),this.moveTo(t+n,e),this.lineTo(t+n,e+r),this.strokePath(),this.beginPath(),this.moveTo(o,e),this.lineTo(s+n,e),this.strokePath(),this.beginPath(),this.moveTo(o,e+r),this.lineTo(s+n,e+r),this.strokePath(),this},fillRoundedRect:function(t,e,n,r,i){void 0===i&&(i=20);var o=i,s=i,a=i,u=i;return"number"!==typeof i&&(o=g(i,"tl",20),s=g(i,"tr",20),a=g(i,"bl",20),u=g(i,"br",20)),this.beginPath(),this.moveTo(t+o,e),this.lineTo(t+n-s,e),this.arc(t+n-s,e+s,s,-y.TAU,0),this.lineTo(t+n,e+r-u),this.arc(t+n-u,e+r-u,u,0,y.TAU),this.lineTo(t+a,e+r),this.arc(t+a,e+r-a,a,y.TAU,Math.PI),this.lineTo(t,e+o),this.arc(t+o,e+o,o,-Math.PI,-y.TAU),this.fillPath(),this},strokeRoundedRect:function(t,e,n,r,i){void 0===i&&(i=20);var o=i,s=i,a=i,u=i;return"number"!==typeof i&&(o=g(i,"tl",20),s=g(i,"tr",20),a=g(i,"bl",20),u=g(i,"br",20)),this.beginPath(),this.moveTo(t+o,e),this.lineTo(t+n-s,e),this.moveTo(t+n-s,e),this.arc(t+n-s,e+s,s,-y.TAU,0),this.lineTo(t+n,e+r-u),this.moveTo(t+n,e+r-u),this.arc(t+n-u,e+r-u,u,0,y.TAU),this.lineTo(t+a,e+r),this.moveTo(t+a,e+r),this.arc(t+a,e+r-a,a,y.TAU,Math.PI),this.lineTo(t,e+o),this.moveTo(t,e+o),this.arc(t+o,e+o,o,-Math.PI,-y.TAU),this.strokePath(),this},fillPointShape:function(t,e){return this.fillPoint(t.x,t.y,e)},fillPoint:function(t,e,n){return!n||n<1?n=1:(t-=n/2,e-=n/2),this.commandBuffer.push(o.FILL_RECT,t,e,n,n),this},fillTriangleShape:function(t){return this.fillTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},strokeTriangleShape:function(t){return this.strokeTriangle(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)},fillTriangle:function(t,e,n,r,i,s){return this.commandBuffer.push(o.FILL_TRIANGLE,t,e,n,r,i,s),this},strokeTriangle:function(t,e,n,r,i,s){return this.commandBuffer.push(o.STROKE_TRIANGLE,t,e,n,r,i,s),this},strokeLineShape:function(t){return this.lineBetween(t.x1,t.y1,t.x2,t.y2)},lineBetween:function(t,e,n,r){return this.beginPath(),this.moveTo(t,e),this.lineTo(n,r),this.strokePath(),this},lineTo:function(t,e){return this.commandBuffer.push(o.LINE_TO,t,e),this},moveTo:function(t,e){return this.commandBuffer.push(o.MOVE_TO,t,e),this},strokePoints:function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===r&&(r=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var i=1;i<r;i++)this.lineTo(t[i].x,t[i].y);return e&&this.lineTo(t[0].x,t[0].y),n&&this.closePath(),this.strokePath(),this},fillPoints:function(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===r&&(r=t.length),this.beginPath(),this.moveTo(t[0].x,t[0].y);for(var i=1;i<r;i++)this.lineTo(t[i].x,t[i].y);return e&&this.lineTo(t[0].x,t[0].y),n&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(t,e){void 0===e&&(e=32);var n=t.getPoints(e);return this.strokePoints(n,!0)},strokeEllipse:function(t,e,n,r,i){void 0===i&&(i=32);var o=new p(t,e,n,r).getPoints(i);return this.strokePoints(o,!0)},fillEllipseShape:function(t,e){void 0===e&&(e=32);var n=t.getPoints(e);return this.fillPoints(n,!0)},fillEllipse:function(t,e,n,r,i){void 0===i&&(i=32);var o=new p(t,e,n,r).getPoints(i);return this.fillPoints(o,!0)},arc:function(t,e,n,r,i,s,a){return void 0===s&&(s=!1),void 0===a&&(a=0),this.commandBuffer.push(o.ARC,t,e,n,r,i,s,a),this},slice:function(t,e,n,r,i,s,a){return void 0===s&&(s=!1),void 0===a&&(a=0),this.commandBuffer.push(o.BEGIN_PATH),this.commandBuffer.push(o.MOVE_TO,t,e),this.commandBuffer.push(o.ARC,t,e,n,r,i,s,a),this.commandBuffer.push(o.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(o.SAVE),this},restore:function(){return this.commandBuffer.push(o.RESTORE),this},translateCanvas:function(t,e){return this.commandBuffer.push(o.TRANSLATE,t,e),this},scaleCanvas:function(t,e){return this.commandBuffer.push(o.SCALE,t,e),this},rotateCanvas:function(t){return this.commandBuffer.push(o.ROTATE,t),this},clear:function(){return this.commandBuffer.length=0,this.defaultFillColor>-1&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),this.defaultStrokeColor>-1&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(t,e,n){var r,i,o=this.scene.sys,s=o.game.renderer;if(void 0===e&&(e=o.scale.width),void 0===n&&(n=o.scale.height),w.TargetCamera.setScene(this.scene),w.TargetCamera.setViewport(0,0,e,n),w.TargetCamera.scrollX=this.x,w.TargetCamera.scrollY=this.y,"string"===typeof t)if(o.textures.exists(t)){var a=(r=o.textures.get(t)).getSourceImage();a instanceof HTMLCanvasElement&&(i=a.getContext("2d"))}else i=(r=o.textures.createCanvas(t,e,n)).getSourceImage().getContext("2d");else t instanceof HTMLCanvasElement&&(i=t.getContext("2d"));return i&&(this.renderCanvas(s,this,w.TargetCamera,null,i,!1),r&&r.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});w.TargetCamera=new r,t.exports=w},function(t,e){t.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(t,e,n){var r=n(4);t.exports=function(t,e,n){void 0===n&&(n=new r);var i=t.width/2,o=t.height/2;return n.x=t.x+i*Math.cos(e),n.y=t.y+o*Math.sin(e),n}},function(t,e,n){var r=n(35),i=n(0),o=n(11),s=n(176),a=n(101),u=n(9),c=n(75),h=n(110),l=n(1071),f=n(20),d=n(79),p=new i({Extends:h,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.Mask,o.Pipeline,o.Visible,u,l],initialize:function(t,e){h.call(this,t),u.call(this),this.scene=t,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=t.sys,this.events=t.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(r.SKIP_CHECK),e&&this.add(e),t.sys.queueDepthSort()},setActive:function(t){return this.active=t,this},setName:function(t){return this.name=t,this},setState:function(t){return this.state=t,this},setDataEnabled:function(){return this.data||(this.data=new a(this)),this},setData:function(t,e){return this.data||(this.data=new a(this)),this.data.set(t,e),this},incData:function(t,e){return this.data||(this.data=new a(this)),this.data.inc(t,e),this},toggleData:function(t){return this.data||(this.data=new a(this)),this.data.toggle(t),this},getData:function(t){return this.data||(this.data=new a(this)),this.data.get(t)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return s(this)},willRender:function(t){return!(15!==this.renderFlags||0===this.list.length||0!==this.cameraFilter&&this.cameraFilter&t.id)},getIndexList:function(){for(var t=this,e=this.parentContainer,n=[];e&&(n.unshift(e.getIndex(t)),t=e,e.parentContainer);)e=e.parentContainer;return n.unshift(this.displayList.getIndex(t)),n},addChildCallback:function(t){t.displayList&&t.displayList!==this&&t.removeFromDisplayList(),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(c.ADDED_TO_SCENE,t,this.scene),this.events.emit(f.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function(t){this.queueDepthSort(),t.displayList=null,t.emit(c.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(f.REMOVED_FROM_SCENE,t,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(d(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(t,e){return t._depth-e._depth},getChildren:function(){return this.list},destroy:function(){if(this.scene&&!this.ignoreDestroy){this.emit(c.DESTROY,this);for(var t=this.list.length;t--;)this.list[t].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});t.exports=p},function(t,e,n){var r=n(0),i=n(11),o=n(15),s=n(450),a=n(110),u=n(452),c=n(1075),h=new r({Extends:o,Mixins:[i.Depth,i.Mask,i.Pipeline,i.Transform,i.Visible,c],initialize:function(t,e,n,r){if(o.call(this,t,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],null===n||"object"!==typeof n&&!Array.isArray(n)||(r=n,n=null),this.setTexture(e,n),this.initPipeline(),this.emitters=new a(this),this.wells=new a(this),r){Array.isArray(r)||(r=[r]);for(var i=0;i<r.length;i++)this.createEmitter(r[i])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t){this.frame=this.texture.get(t);var e=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),n=[];return e.forEach((function(t){n.push(t.name)})),this.frameNames=n,this.defaultFrame=this.frame,this},setEmitterFrames:function(t,e){Array.isArray(t)||(t=[t]);var n=e.frames;n.length=0;for(var r=0;r<t.length;r++){var i=t[r];-1!==this.frameNames.indexOf(i)&&n.push(this.texture.get(i))}return n.length>0?e.defaultFrame=n[0]:e.defaultFrame=this.defaultFrame,this},addEmitter:function(t){return this.emitters.add(t)},createEmitter:function(t){return this.addEmitter(new u(this,t))},removeEmitter:function(t){return this.emitters.remove(t,!0)},addGravityWell:function(t){return this.wells.add(t)},createGravityWell:function(t){return this.addGravityWell(new s(t))},emitParticle:function(t,e,n){for(var r=this.emitters.list,i=0;i<r.length;i++){var o=r[i];o.active&&o.emitParticle(t,e,n)}return this},emitParticleAt:function(t,e,n){return this.emitParticle(n,t,e)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(t,e){e*=this.timeScale;for(var n=this.emitters.list,r=0;r<n.length;r++){var i=n[r];i.active&&i.preUpdate(t,e)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});t.exports=h},function(t,e,n){var r=n(35),i=n(133),o=n(31),s=n(0),a=n(11),u=n(33),c=n(109),h=n(15),l=n(1),f=n(92),d=n(1079),p=n(141),v=n(12),g=n(222),m=new s({Extends:h,Mixins:[a.Alpha,a.BlendMode,a.ComputedSize,a.Crop,a.Depth,a.Flip,a.GetBounds,a.Mask,a.Origin,a.Pipeline,a.ScrollFactor,a.Tint,a.Transform,a.Visible,d],initialize:function(t,e,n,r,s,a,c){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=32),void 0===s&&(s=32),h.call(this,t,"RenderTexture"),this.renderer=t.sys.renderer,this.textureManager=t.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,void 0===a?(this.canvas=o.create2D(this,r,s),this.texture=t.sys.textures.addCanvas(g(),this.canvas),this.frame=this.texture.get()):(this.texture=t.sys.textures.get(a),this.frame=this.texture.get(c),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new i(0,0,r,s),this.renderTarget=null;var d=this.renderer;d?d.type===u.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new p(d,r,s,1,0,!1)):d.type===u.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=l,this.camera.setScene(t),this.setPosition(e,n),void 0===a&&this.setSize(r,s),this.setOrigin(0,0),this.initPipeline(f.SINGLE_PIPELINE)},setSize:function(t,e){return this.resize(t,e)},resize:function(t,e){void 0===e&&(e=t);var n=this.frame;if(t!==this.width||e!==this.height){if("__BASE"===n.name){this.canvas.width=t,this.canvas.height=e,this.texture.width=t,this.texture.height=e;var r=this.renderTarget;r&&(r.resize(t,e),n.glTexture=r.texture,n.source.isRenderTexture=!0,n.source.isGLTexture=!0,n.source.glTexture=r.texture),this.camera.setSize(t,e),n.source.width=t,n.source.height=e,n.setSize(t,e),this.width=t,this.height=e}}else{var i=this.texture.getSourceImage();n.cutX+t>i.width&&(t=i.width-n.cutX),n.cutY+e>i.height&&(e=i.height-n.cutY),n.setSize(t,e,n.cutX,n.cutY)}this.updateDisplayOrigin();var o=this.input;return o&&!o.customHitArea&&(o.hitArea.width=t,o.hitArea.height=e),this},setGlobalTint:function(t){return this.globalTint=t,this},setGlobalAlpha:function(t){return this.globalAlpha=t,this},saveTexture:function(t){return this.textureManager.renameTexture(this.texture.key,t),this._saved=!0,this.texture},fill:function(t,e,n,r,i,o){var s=this.frame,a=this.camera,u=this.renderer;void 0===e&&(e=1),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=s.cutWidth),void 0===o&&(o=s.cutHeight);var c=(t>>16&255)/255,h=(t>>8&255)/255,l=(255&t)/255,f=this.renderTarget;if(a.preRender(),f){f.bind(!0);var d=this.pipeline;d.manager.set(d);var p=f.width,g=f.height,m=u.width/p,y=u.height/g;d.drawFillRect(n*m,r*y,i*m,o*y,v.getTintFromFloats(l,h,c,1),e),f.unbind(!0)}else{var b=this.context;u.setContext(b),b.fillStyle="rgba("+c+","+h+","+l+","+e+")",b.fillRect(n+s.cutX,r+s.cutY,i,o),u.setContext()}return this.dirty=!0,this},clear:function(){if(this.dirty){var t=this.renderTarget;if(t)t.clear();else{var e=this.context;e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),e.restore()}this.dirty=!1}return this},erase:function(t,e,n){return this._eraseMode=!0,this.draw(t,e,n,1,16777215),this._eraseMode=!1,this},draw:function(t,e,n,r,i){return this.beginDraw(),this.batchDraw(t,e,n,r,i),this.endDraw(),this},drawFrame:function(t,e,n,r,i,o){return this.beginDraw(),this.batchDrawFrame(t,e,n,r,i,o),this.endDraw(),this},beginDraw:function(){var t=this.camera,e=this.renderer,n=this.renderTarget;return t.preRender(),n?e.beginCapture(n.width,n.height):e.setContext(this.context),this},batchDraw:function(t,e,n,r,i){return void 0===r&&(r=this.globalAlpha),i=void 0===i?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(i>>16)+(65280&i)+((255&i)<<16),Array.isArray(t)||(t=[t]),this.batchList(t,e,n,r,i),this},batchDrawFrame:function(t,e,n,r,i,o){void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=this.globalAlpha),o=void 0===o?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(o>>16)+(65280&o)+((255&o)<<16);var s=this.textureManager.getFrame(t,e);return s&&(this.renderTarget?this.pipeline.batchTextureFrame(s,n,r,o,i,this.camera.matrix,null):this.batchTextureFrame(s,n+this.frame.cutX,r+this.frame.cutY,i,o)),this},endDraw:function(t){void 0===t&&(t=this._eraseMode);var e=this.renderer,n=this.renderTarget;if(n){var r=e.endCapture();e.pipelines.setUtility().blitFrame(r,n,1,!1,!1,t),e.resetScissor(),e.resetViewport()}else e.setContext();return this.dirty=!0,this},batchList:function(t,e,n,r,i){for(var o=0;o<t.length;o++){var s=t[o];s&&s!==this&&(s.renderWebGL||s.renderCanvas?this.drawGameObject(s,e,n):s.isParent||s.list?this.batchGroup(s.getChildren(),e,n):"string"===typeof s?this.batchTextureFrameKey(s,null,e,n,r,i):s instanceof c?this.batchTextureFrame(s,e,n,r,i):Array.isArray(s)&&this.batchList(s,e,n,r,i))}},batchGroup:function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),e+=this.frame.cutX,n+=this.frame.cutY;for(var r=0;r<t.length;r++){var i=t[r];if(i.willRender(this.camera)){var o=i.x+e,s=i.y+n;this.drawGameObject(i,o,s)}}},batchGameObjectWebGL:function(t,e,n){void 0===e&&(e=t.x),void 0===n&&(n=t.y);var r=t.x,i=t.y;t.setPosition(e+this.frame.cutX,n+this.frame.cutY),t.renderDirect?t.renderDirect(this.renderer,t,this.camera):t.renderWebGL(this.renderer,t,this.camera),t.setPosition(r,i)},batchGameObjectCanvas:function(t,e,n){void 0===e&&(e=t.x),void 0===n&&(n=t.y);var i=t.x,o=t.y;if(this._eraseMode){var s=t.blendMode;t.blendMode=r.ERASE}t.setPosition(e+this.frame.cutX,n+this.frame.cutY),t.renderCanvas(this.renderer,t,this.camera,null),t.setPosition(i,o),this._eraseMode&&(t.blendMode=s)},batchTextureFrameKey:function(t,e,n,r,i,o){var s=this.textureManager.getFrame(t,e);s&&this.batchTextureFrame(s,n,r,i,o)},batchTextureFrame:function(t,e,n,r,i){if(void 0===e&&(e=0),void 0===n&&(n=0),e+=this.frame.cutX,n+=this.frame.cutY,this.renderTarget)this.pipeline.batchTextureFrame(t,e,n,i,r,this.camera.matrix,null);else{var o=this.context,s=t.canvasData,a=t.source.image,u=this.camera.matrix;o.save(),o.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",o.globalAlpha=r,u.setToContext(o),o.drawImage(a,s.x,s.y,s.width,s.height,e,n,s.width,s.height),o.restore()}},snapshotArea:function(t,e,n,r,i,o,s){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,i,!1,t,e,n,r,o,s):this.renderer.snapshotCanvas(this.canvas,i,!1,t,e,n,r,o,s),this},snapshot:function(t,e,n){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,t,!1,0,0,this.width,this.height,e,n):this.renderer.snapshotCanvas(this.canvas,t,!1,0,0,this.width,this.height,e,n),this},snapshotPixel:function(t,e,n){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,n,!0,t,e):this.renderer.snapshotCanvas(this.canvas,n,!0,t,e),this},preDestroy:function(){this._saved||(o.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});t.exports=m},function(t,e){t.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}},function(t,e,n){var r=n(164),i=n(0),o=n(11),s=n(15),a=n(92),u=n(1085),c=n(3),h=new i({Extends:s,Mixins:[o.AlphaSingle,o.BlendMode,o.Depth,o.Flip,o.Mask,o.Pipeline,o.Size,o.Texture,o.Transform,o.Visible,o.ScrollFactor,u],initialize:function(t,e,n,i,o,u,h,l,f){void 0===i&&(i="__DEFAULT"),void 0===u&&(u=2),void 0===h&&(h=!0),s.call(this,t,"Rope"),this.anims=new r(this),this.points=u,this.vertices,this.uv,this.colors,this.alphas,this.tintFill="__DEFAULT"===i,this.dirty=!1,this.horizontal=h,this._flipX=!1,this._flipY=!1,this._perp=new c,this.debugCallback=null,this.debugGraphic=null,this.setTexture(i,o),this.setPosition(e,n),this.setSizeToFrame(),this.initPipeline(a.ROPE_PIPELINE),Array.isArray(u)&&this.resizeArrays(u.length),this.setPoints(u,l,f),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(t,e){var n=this.anims.currentFrame;this.anims.update(t,e),this.anims.currentFrame!==n&&(this.updateUVs(),this.updateVertices())},play:function(t,e,n){return this.anims.play(t,e,n),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(t,e,n){return void 0===t&&(t=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(t,e,n))},setVertical:function(t,e,n){return void 0===t&&(t=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(t,e,n)):this},setTintFill:function(t){return void 0===t&&(t=!1),this.tintFill=t,this},setAlphas:function(t,e){var n=this.points.length;if(n<1)return this;var r,i=this.alphas;void 0===t?t=[1]:Array.isArray(t)||void 0!==e||(t=[t]);var o=0;if(void 0!==e)for(r=0;r<n;r++)i[o=2*r]=t,i[o+1]=e;else if(t.length===n)for(r=0;r<n;r++)i[o=2*r]=t[r],i[o+1]=t[r];else{var s=t[0];for(r=0;r<n;r++)o=2*r,t.length>o&&(s=t[o]),i[o]=s,t.length>o+1&&(s=t[o+1]),i[o+1]=s}return this},setColors:function(t){var e=this.points.length;if(e<1)return this;var n,r=this.colors;void 0===t?t=[16777215]:Array.isArray(t)||(t=[t]);var i=0;if(t.length===e)for(n=0;n<e;n++)r[i=2*n]=t[n],r[i+1]=t[n];else{var o=t[0];for(n=0;n<e;n++)i=2*n,t.length>i&&(o=t[i]),r[i]=o,t.length>i+1&&(o=t[i+1]),r[i+1]=o}return this},setPoints:function(t,e,n){if(void 0===t&&(t=2),"number"===typeof t){var r,i,o,s=t;if(s<2&&(s=2),t=[],this.horizontal)for(o=-this.frame.halfWidth,i=this.frame.width/(s-1),r=0;r<s;r++)t.push({x:o+r*i,y:0});else for(o=-this.frame.halfHeight,i=this.frame.height/(s-1),r=0;r<s;r++)t.push({x:0,y:o+r*i})}var a=t.length,u=this.points.length;return a<1?(console.warn("Rope: Not enough points given"),this):(1===a&&(t.unshift({x:0,y:0}),a++),u!==a&&this.resizeArrays(a),this.points=t,this.updateUVs(),void 0!==e&&null!==e&&this.setColors(e),void 0!==n&&null!==n&&this.setAlphas(n),this)},updateUVs:function(){for(var t=this.uv,e=this.points.length,n=this.frame.u0,r=this.frame.v0,i=this.frame.u1,o=this.frame.v1,s=(i-n)/(e-1),a=(o-r)/(e-1),u=0;u<e;u++){var c,h,l,f,d=4*u;this.horizontal?(this._flipX?(c=i-u*s,l=i-u*s):(c=n+u*s,l=n+u*s),this._flipY?(h=o,f=r):(h=r,f=o)):(this._flipX?(c=n,l=i):(c=i,l=n),this._flipY?(h=o-u*a,f=o-u*a):(h=r+u*a,f=r+u*a)),t[d+0]=c,t[d+1]=h,t[d+2]=l,t[d+3]=f}return this},resizeArrays:function(t){var e=this.colors,n=this.alphas;this.vertices=new Float32Array(4*t),this.uv=new Float32Array(4*t),e=new Uint32Array(2*t),n=new Float32Array(2*t);for(var r=0;r<2*t;r++)e[r]=16777215,n[r]=1;return this.colors=e,this.alphas=n,this.dirty=!0,this},updateVertices:function(){var t=this._perp,e=this.points,n=this.vertices,r=e.length;if(this.dirty=!1,!(r<1)){for(var i,o=e[0],s=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,a=0;a<r;a++){var u=e[a],c=4*a;i=a<r-1?e[a+1]:u,t.x=i.y-o.y,t.y=-(i.x-o.x);var h=t.length();t.x/=h,t.y/=h,t.x*=s,t.y*=s,n[c]=u.x+t.x,n[c+1]=u.y+t.y,n[c+2]=u.x-t.x,n[c+3]=u.y-t.y,o=u}return this}},setDebug:function(t,e){return this.debugGraphic=t,this.debugCallback=t||e?e||this.renderDebugVerts:null,this},renderDebugVerts:function(t,e,n){var r=t.debugGraphic,i=n[0],o=n[1],s=n[2],a=n[3];r.lineBetween(i,o,s,a);for(var u=4;u<e;u+=4){var c=n[u+0],h=n[u+1],l=n[u+2],f=n[u+3];r.lineBetween(i,o,c,h),r.lineBetween(s,a,l,f),r.lineBetween(s,a,c,h),r.lineBetween(c,h,l,f),i=c,o=h,s=l,a=f}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(t){return this._flipX=t,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(t){return this._flipY=t,this.updateUVs()}}});t.exports=h},function(t,e,n){var r=n(142),i=n(31),o=n(0),s=n(11),a=n(22),u=n(15),c=n(458),h=n(6),l=n(202),f=n(1088),d=n(459),p=new o({Extends:u,Mixins:[s.Alpha,s.BlendMode,s.ComputedSize,s.Crop,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Tint,s.Transform,s.Visible,f],initialize:function(t,e,n,r,o){void 0===e&&(e=0),void 0===n&&(n=0),u.call(this,t,"Text"),this.renderer=t.sys.renderer,this.setPosition(e,n),this.setOrigin(0,0),this.initPipeline(),this.canvas=i.create(this),this.context=this.canvas.getContext("2d"),this.style=new d(this,o),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,0===this.style.resolution&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(r),o&&o.padding&&this.setPadding(o.padding),o&&o.lineSpacing&&this.setLineSpacing(o.lineSpacing),t.sys.game.events.on(a.CONTEXT_RESTORED,(function(){this.dirty=!0}),this)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",r(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(t){var e=this.style;if(e.wordWrapCallback){var n=e.wordWrapCallback.call(e.wordWrapCallbackScope,t,this);return Array.isArray(n)&&(n=n.join("\n")),n}return e.wordWrapWidth?e.wordWrapUseAdvanced?this.advancedWordWrap(t,this.context,this.style.wordWrapWidth):this.basicWordWrap(t,this.context,this.style.wordWrapWidth):t},advancedWordWrap:function(t,e,n){for(var r="",i=t.replace(/ +/gi," ").split(this.splitRegExp),o=i.length,s=0;s<o;s++){var a=i[s],u="";if(a=a.replace(/^ *|\s*$/gi,""),e.measureText(a).width<n)r+=a+"\n";else{for(var c=n,h=a.split(" "),l=0;l<h.length;l++){var f=h[l],d=f+" ",p=e.measureText(d).width;if(p>c){if(0===l){for(var v=d;v.length&&(v=v.slice(0,-1),!((p=e.measureText(v).width)<=c)););if(!v.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var g=f.substr(v.length);h[l]=g,u+=v}var m=h[l].length?l:l+1,y=h.slice(m).join(" ").replace(/[ \n]*$/gi,"");i[s+1]=y+" "+(i[s+1]||""),o=i.length;break}u+=d,c-=p}r+=u.replace(/[ \n]*$/gi,"")+"\n"}}return r=r.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function(t,e,n){for(var r="",i=t.split(this.splitRegExp),o=i.length-1,s=e.measureText(" ").width,a=0;a<=o;a++){for(var u=n,c=i[a].split(" "),h=c.length-1,l=0;l<=h;l++){var f=c[l],d=e.measureText(f).width,p=d;l<h&&(p+=s),p>u&&l>0&&(r+="\n",u=n),r+=f,l<h?(r+=" ",u-=p):u-=d}a<o&&(r+="\n")}return r},getWrappedText:function(t){return void 0===t&&(t=this._text),this.style.syncFont(this.canvas,this.context),this.runWordWrap(t).split(this.splitRegExp)},setText:function(t){return t||0===t||(t=""),Array.isArray(t)&&(t=t.join("\n")),t!==this._text&&(this._text=t.toString(),this.updateText()),this},setStyle:function(t){return this.style.setStyle(t)},setFont:function(t){return this.style.setFont(t)},setFontFamily:function(t){return this.style.setFontFamily(t)},setFontSize:function(t){return this.style.setFontSize(t)},setFontStyle:function(t){return this.style.setFontStyle(t)},setFixedSize:function(t,e){return this.style.setFixedSize(t,e)},setBackgroundColor:function(t){return this.style.setBackgroundColor(t)},setFill:function(t){return this.style.setFill(t)},setColor:function(t){return this.style.setColor(t)},setStroke:function(t,e){return this.style.setStroke(t,e)},setShadow:function(t,e,n,r,i,o){return this.style.setShadow(t,e,n,r,i,o)},setShadowOffset:function(t,e){return this.style.setShadowOffset(t,e)},setShadowColor:function(t){return this.style.setShadowColor(t)},setShadowBlur:function(t){return this.style.setShadowBlur(t)},setShadowStroke:function(t){return this.style.setShadowStroke(t)},setShadowFill:function(t){return this.style.setShadowFill(t)},setWordWrapWidth:function(t,e){return this.style.setWordWrapWidth(t,e)},setWordWrapCallback:function(t,e){return this.style.setWordWrapCallback(t,e)},setAlign:function(t){return this.style.setAlign(t)},setResolution:function(t){return this.style.setResolution(t)},setLineSpacing:function(t){return this.lineSpacing=t,this.updateText()},setPadding:function(t,e,n,r){if("object"===typeof t){var i=t,o=h(i,"x",null);null!==o?(t=o,n=o):(t=h(i,"left",0),n=h(i,"right",t));var s=h(i,"y",null);null!==s?(e=s,r=s):(e=h(i,"top",0),r=h(i,"bottom",e))}else void 0===t&&(t=0),void 0===e&&(e=t),void 0===n&&(n=t),void 0===r&&(r=e);return this.padding.left=t,this.padding.top=e,this.padding.right=n,this.padding.bottom=r,this.updateText()},setMaxLines:function(t){return this.style.setMaxLines(t)},updateText:function(){var t=this.canvas,e=this.context,n=this.style,r=n.resolution,i=n.metrics;n.syncFont(t,e);var o=this._text;(n.wordWrapWidth||n.wordWrapCallback)&&(o=this.runWordWrap(this._text));var s,a=o.split(this.splitRegExp),u=c(this,i,a),h=this.padding;0===n.fixedWidth?(this.width=u.width+h.left+h.right,s=u.width):(this.width=n.fixedWidth,(s=this.width-h.left-h.right)<u.width&&(s=u.width)),0===n.fixedHeight?this.height=u.height+h.top+h.bottom:this.height=n.fixedHeight;var l,f,d=this.width,p=this.height;this.updateDisplayOrigin(),d*=r,p*=r,d=Math.max(d,1),p=Math.max(p,1),t.width!==d||t.height!==p?(t.width=d,t.height=p,this.frame.setSize(d,p),n.syncFont(t,e)):e.clearRect(0,0,d,p),e.save(),e.scale(r,r),n.backgroundColor&&(e.fillStyle=n.backgroundColor,e.fillRect(0,0,d,p)),n.syncStyle(t,e),e.textBaseline="alphabetic",e.translate(h.left,h.top);for(var v=0;v<u.lines;v++){if(l=n.strokeThickness/2,f=n.strokeThickness/2+v*u.lineHeight+i.ascent,v>0&&(f+=u.lineSpacing*v),n.rtl)l=d-l;else if("right"===n.align)l+=s-u.lineWidths[v];else if("center"===n.align)l+=(s-u.lineWidths[v])/2;else if("justify"===n.align&&u.lineWidths[v]/u.width>=.85){var g=u.width-u.lineWidths[v],m=e.measureText(" ").width,y=a[v].trim(),b=y.split(" ");g+=(a[v].length-y.length)*m;for(var w=Math.floor(g/m),x=0;w>0;)b[x]+=" ",x=(x+1)%(b.length-1||1),--w;a[v]=b.join(" ")}this.autoRound&&(l=Math.round(l),f=Math.round(f)),n.strokeThickness&&(this.style.syncShadow(e,n.shadowStroke),e.strokeText(a[v],l,f)),n.color&&(this.style.syncShadow(e,n.shadowFill),e.fillText(a[v],l,f))}e.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(t,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var _=this.input;return _&&!_.customHitArea&&(_.hitArea.width=this.width,_.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(t){this.setText(t)}},toJSON:function(){var t=s.ToJSON(this),e={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return t.data=e,t},preDestroy:function(){this.style.rtl&&l(this.canvas),i.remove(this.canvas),this.texture.destroy()}});t.exports=p},function(t,e,n){var r=n(31),i=n(0),o=n(11),s=n(22),a=n(15),u=n(361),c=n(192),h=n(1091),l=n(3),f=new i({Extends:a,Mixins:[o.Alpha,o.BlendMode,o.ComputedSize,o.Crop,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Tint,o.Transform,o.Visible,h],initialize:function(t,e,n,i,o,c,h){var f=t.sys.renderer;a.call(this,t,"TileSprite");var d=t.sys.textures.get(c),p=d.get(h);i&&o?(i=Math.floor(i),o=Math.floor(o)):(i=p.width,o=p.height),this._tilePosition=new l,this._tileScale=new l(1,1),this.dirty=!1,this.renderer=f,this.canvas=r.create(this,i,o),this.context=this.canvas.getContext("2d"),this.displayTexture=d,this.displayFrame=p,this._crop=this.resetCropObject(),this.texture=t.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=u(p.width),this.potHeight=u(p.height),this.fillCanvas=r.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(e,n),this.setSize(i,o),this.setFrame(h),this.setOriginFromFrame(),this.initPipeline(),t.sys.game.events.on(s.CONTEXT_RESTORED,(function(t){if(t){var e=t.gl;this.dirty=!0,this.fillPattern=null,this.fillPattern=t.createTexture2D(0,e.LINEAR,e.LINEAR,e.REPEAT,e.REPEAT,e.RGBA,this.fillCanvas,this.potWidth,this.potHeight)}}),this)},setTexture:function(t,e){return this.displayTexture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t){var e=this.displayTexture.get(t);return this.potWidth=u(e.width),this.potHeight=u(e.height),this.canvas.width=0,e.cutWidth&&e.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this.displayFrame=e,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(t,e){return void 0!==t&&(this.tilePositionX=t),void 0!==e&&(this.tilePositionY=e),this},setTileScale:function(t,e){return void 0===t&&(t=this.tileScaleX),void 0===e&&(e=t),this.tileScaleX=t,this.tileScaleY=e,this},updateTileTexture:function(){if(this.dirty&&this.renderer){var t=this.displayFrame;if(t.source.isRenderTexture||t.source.isGLTexture)return console.warn("TileSprites can only use Image or Canvas based textures"),void(this.dirty=!1);var e=this.fillContext,n=this.fillCanvas,r=this.potWidth,i=this.potHeight;this.renderer&&this.renderer.gl||(r=t.cutWidth,i=t.cutHeight),e.clearRect(0,0,r,i),n.width=r,n.height=i,e.drawImage(t.source.image,t.cutX,t.cutY,t.cutWidth,t.cutHeight,0,0,r,i),this.renderer&&this.renderer.gl?this.fillPattern=this.renderer.canvasToTexture(n,this.fillPattern):this.fillPattern=e.createPattern(n,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var t=this.canvas;if(t.width===this.width&&t.height===this.height||(t.width=this.width,t.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl)this.dirty=!1;else{var e=this.context;this.scene.sys.game.config.antialias||c.disable(e);var n=this._tileScale.x,r=this._tileScale.y,i=this._tilePosition.x,o=this._tilePosition.y;e.clearRect(0,0,this.width,this.height),e.save(),e.scale(n,r),e.translate(-i,-o),e.fillStyle=this.fillPattern,e.fillRect(i,o,this.width/n,this.height/r),e.restore(),this.dirty=!1}},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),r.remove(this.canvas),r.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(t){this._tilePosition.x=t,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(t){this._tilePosition.y=t,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(t){this._tileScale.x=t,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(t){this._tileScale.y=t,this.dirty=!0}}});t.exports=f},function(t,e,n){var r=n(0),i=n(18),o=n(11),s=n(75),a=n(22),u=n(51),c=n(15),h=n(70),l=n(222),f=n(1094),d=n(14),p=new r({Extends:c,Mixins:[o.Alpha,o.BlendMode,o.Depth,o.Flip,o.GetBounds,o.Mask,o.Origin,o.Pipeline,o.ScrollFactor,o.Size,o.TextureCrop,o.Tint,o.Transform,o.Visible,f],initialize:function(t,e,n,r){c.call(this,t,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=l(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=d.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(e,n),this.initPipeline(),r&&this.changeSource(r,!1);var i=t.sys.game.events;i.on(a.PAUSE,this.globalPause,this),i.on(a.RESUME,this.globalResume,this);var o=t.sys.sound;o&&o.on(h.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(t,e,n){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var r=this.video;if(!r)return console.warn("Video not loaded"),this;void 0===t&&(t=r.loop);var i=this.scene.sys.sound;i&&i.mute&&this.setMute(!0),isNaN(e)||(this._markerIn=e),!isNaN(n)&&n>e&&(this._markerOut=n),r.loop=t;var o=this._callbacks,s=r.play();return void 0!==s?s.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(r.addEventListener("playing",o.play,!0),r.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),r.addEventListener("ended",o.end,!0),r.addEventListener("timeupdate",o.time,!0),r.addEventListener("seeking",o.seeking,!0),r.addEventListener("seeked",o.seeked,!0),this},changeSource:function(t,e,n,r,i){void 0===e&&(e=!0),this.video&&this.stop();var o=this.scene.sys.cache.video.get(t);return o?(this.video=o,this._cacheKey=t,this._codePaused=o.paused,this._codeMuted=o.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,o,o.videoWidth,o.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,o.videoWidth,o.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(s.VIDEO_CREATED,this,o.videoWidth,o.videoHeight)):this.updateTexture(),o.currentTime=0,this._lastUpdate=0,e&&this.play(n,r,i)):this.video=null,this},addMarker:function(t,e,n){return!isNaN(e)&&e>=0&&!isNaN(n)&&(this.markers[t]=[e,n]),this},playMarker:function(t,e){var n=this.markers[t];return n&&this.play(e,n[0],n[1]),this},removeMarker:function(t){return delete this.markers[t],this},snapshot:function(t,e){return void 0===t&&(t=this.width),void 0===e&&(e=this.height),this.snapshotArea(0,0,this.width,this.height,t,e)},snapshotArea:function(t,e,n,r,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=this.width),void 0===r&&(r=this.height),void 0===i&&(i=n),void 0===o&&(o=r);var s=this.video,a=this.snapshotTexture;return a?(a.setSize(i,o),s&&a.context.drawImage(s,t,e,n,r,0,0,i,o)):(a=this.scene.sys.textures.createCanvas(l(),i,o),this.snapshotTexture=a,s&&a.context.drawImage(s,t,e,n,r,0,0,i,o)),a.update()},saveSnapshotTexture:function(t){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,t):this.snapshotTexture=this.scene.sys.textures.createCanvas(t,this.width,this.height),this.snapshotTexture},loadURL:function(t,e,n){void 0===e&&(e="loadeddata"),void 0===n&&(n=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var r=document.createElement("video");return r.controls=!1,n&&(r.muted=!0,r.defaultMuted=!0,r.setAttribute("autoplay","autoplay")),r.setAttribute("playsinline","playsinline"),r.setAttribute("preload","auto"),r.addEventListener("error",this._callbacks.error,!0),r.src=t,r.load(),this.video=r,this},loadMediaStream:function(t,e,n){void 0===e&&(e="loadeddata"),void 0===n&&(n=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var r=document.createElement("video");r.controls=!1,n&&(r.muted=!0,r.defaultMuted=!0,r.setAttribute("autoplay","autoplay")),r.setAttribute("playsinline","playsinline"),r.setAttribute("preload","auto"),r.addEventListener("error",this._callbacks.error,!0);try{r.srcObject=t}catch(i){r.src=window.URL.createObjectURL(t)}return r.load(),this.video=r,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(s.VIDEO_PLAY,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(t){this.scene.sys.input.once(u.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(s.VIDEO_ERROR,this,t)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(s.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(t){this.stop(),this.emit(s.VIDEO_ERROR,this,t)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(s.VIDEO_UNLOCKED,this),this._markerIn>-1&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(s.VIDEO_PLAY,this)},completeHandler:function(){this.emit(s.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(s.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var t=this.video;if(t){var e=t.currentTime;e!==this._lastUpdate&&(this._lastUpdate=e,this.updateTexture(),e>=this._markerOut&&(t.loop?(t.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=e,this.emit(s.VIDEO_LOOP,this)):(this.emit(s.VIDEO_COMPLETE,this),this.stop())))}},checkVideoProgress:function(){this.video.readyState>=2?this.updateTexture():(this.retry--,this.retry>0?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(s.VIDEO_TIMEOUT,this))},updateTexture:function(){var t=this.video,e=t.videoWidth,n=t.videoHeight;if(this.videoTexture){var r=this.videoTextureSource;r.source!==t&&(r.source=t,r.width=e,r.height=n),r.update()}else this.videoTexture=this.scene.sys.textures.create(this._key,t,e,n),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,e,n),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(s.VIDEO_CREATED,this,e,n)},getVideoKey:function(){return this._cacheKey},seekTo:function(t){var e=this.video;if(e){var n=e.duration;if(n!==1/0&&!isNaN(n)){var r=n*t;this.setCurrentTime(r)}}return this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(t){var e=this.video;if(e){if("string"===typeof t){var n=t[0],r=parseFloat(t.substr(1));"+"===n?t=e.currentTime+r:"-"===n&&(t=e.currentTime-r)}e.currentTime=t,this._lastUpdate=t}return this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(s.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(s.VIDEO_SEEKED,this),this.video&&this.updateTexture()},getProgress:function(){var t=this.video;if(t){var e=t.currentTime,n=t.duration;if(n!==1/0&&!isNaN(n))return e/n}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(t){void 0===t&&(t=!0),this._codeMuted=t;var e=this.video;return e&&(e.muted=!!this._systemMuted||t),this},isMuted:function(){return this._codeMuted},globalMute:function(t,e){this._systemMuted=e;var n=this.video;n&&(n.muted=!!this._codeMuted||e)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(t){void 0===t&&(t=!0);var e=this.video;return this._codePaused=t,e&&(t?e.paused||e.pause():t||e.paused&&!this._systemPaused&&e.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(t){return void 0===t&&(t=1),this.video&&(this.video.volume=i(t,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(t){return this.video&&(this.video.playbackRate=t),this},getLoop:function(){return!!this.video&&this.video.loop},setLoop:function(t){return void 0===t&&(t=!0),this.video&&(this.video.loop=t),this},isPlaying:function(){return!!this.video&&!(this.video.paused||this.video.ended)},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(t,e){return void 0===e&&(e=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,t),this._key=t,this.flipY=e,this.videoTextureSource&&this.videoTextureSource.setFlipY(e),this.videoTexture},stop:function(){var t=this.video;if(t){var e=this._callbacks;for(var n in e)t.removeEventListener(n,e[n],!0);t.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(s.VIDEO_STOP,this),this},removeVideoElement:function(){var t=this.video;if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("autoplay"),t.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var t=this.scene.sys.game.events;t.off(a.PAUSE,this.globalPause,this),t.off(a.RESUME,this.globalResume,this);var e=this.scene.sys.sound;e&&e.off(h.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});t.exports=p},function(t,e,n){var r=n(0),i=n(228),o=n(470),s=n(56),a=new r({initialize:function(t){this.type=s.POLYGON,this.area=0,this.points=[],t&&this.setTo(t)},contains:function(t,e){return i(this,t,e)},setTo:function(t){if(this.area=0,this.points=[],"string"===typeof t&&(t=t.split(" ")),!Array.isArray(t))return this;for(var e,n=Number.MAX_VALUE,r=0;r<t.length;r++)e={x:0,y:0},"number"===typeof t[r]||"string"===typeof t[r]?(e.x=parseFloat(t[r]),e.y=parseFloat(t[r+1]),r++):Array.isArray(t[r])?(e.x=t[r][0],e.y=t[r][1]):(e.x=t[r].x,e.y=t[r].y),this.points.push(e),e.y<n&&(n=e.y);return this.calculateArea(n),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var t,e,n=0,r=0;r<this.points.length-1;r++)t=this.points[r],n+=((e=this.points[r+1]).x-t.x)*(t.y+e.y);return t=this.points[0],e=this.points[this.points.length-1],n+=(t.x-e.x)*(e.y+t.y),this.area=.5*-n,this.area},getPoints:function(t,e,n){return o(this,t,e,n)}});t.exports=a},function(t,e){t.exports=function(t,e,n){for(var r=!1,i=-1,o=t.points.length-1;++i<t.points.length;o=i){var s=t.points[i].x,a=t.points[i].y,u=t.points[o].x,c=t.points[o].y;(a<=n&&n<c||c<=n&&n<a)&&e<(u-s)*(n-a)/(c-a)+s&&(r=!r)}return r}},function(t,e,n){var r=n(0),i=n(11),o=n(15),s=n(2),a=n(17),u=n(478),c=n(1176),h=n(25),l=new r({Extends:o,Mixins:[i.ComputedSize,i.Depth,i.GetBounds,i.Mask,i.Origin,i.ScrollFactor,i.Transform,i.Visible,c],initialize:function(t,e,n,r,i,s,a,u){void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=128),void 0===s&&(s=128),o.call(this,t,"Shader"),this.blendMode=-1,this.shader;var c=t.sys.renderer;this.renderer=c,this.gl=c.gl,this.vertexData=new ArrayBuffer(2*Float32Array.BYTES_PER_ELEMENT*6),this.vertexBuffer=c.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new h,this._tempMatrix2=new h,this._tempMatrix3=new h,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=c.width,this._rendererHeight=c.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(n,r),this.setSize(i,s),this.setOrigin(.5,.5),this.setShader(e,a,u)},willRender:function(t){return!!this.renderToTexture||!(o.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setRenderToTexture:function(t,e){if(void 0===e&&(e=!1),!this.renderToTexture){var n=this.width,r=this.height,i=this.renderer;this.glTexture=i.createTextureFromSource(null,n,r,0),this.glTexture.flipY=e,this.framebuffer=i.createFramebuffer(n,r,this.glTexture,!1),this._rendererWidth=n,this._rendererHeight=r,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),t&&(this.texture=this.scene.sys.textures.addGLTexture(t,this.glTexture,n,r))}return this.shader&&(i.pipelines.clear(),this.load(),this.flush(),i.pipelines.rebind()),this},setShader:function(t,e,n){if(void 0===e&&(e=[]),"string"===typeof t){var r=this.scene.sys.cache.shader;if(!r.has(t))return console.warn("Shader missing: "+t),this;this.shader=r.get(t)}else this.shader=t;var i=this.gl,o=this.renderer;this.program&&i.deleteProgram(this.program);var s=o.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);i.uniformMatrix4fv(i.getUniformLocation(s,"uViewMatrix"),!1,this.viewMatrix),i.uniformMatrix4fv(i.getUniformLocation(s,"uProjectionMatrix"),!1,this.projectionMatrix),i.uniform2f(i.getUniformLocation(s,"uResolution"),this.width,this.height),this.program=s;var u=new Date,c={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[u.getFullYear(),u.getMonth(),u.getDate(),60*u.getHours()*60+60*u.getMinutes()+u.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.shader.uniforms?this.uniforms=a(!0,{},this.shader.uniforms,c):this.uniforms=c;for(var h=0;h<4;h++)e[h]&&this.setSampler2D("iChannel"+h,e[h],h,n);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(t){return this.pointer=t,this},projOrtho:function(t,e,n,r){var i=1/(t-e),o=1/(n-r),s=this.projectionMatrix;s[0]=-2*i,s[5]=-2*o,s[10]=-.001,s[12]=(t+e)*i,s[13]=(r+n)*o,s[14]=-0;var a=this.program,u=this.gl;this.renderer.setProgram(a),u.uniformMatrix4fv(u.getUniformLocation(a,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=e,this._rendererHeight=n},initUniforms:function(){var t=this.gl,e=this.renderer.glFuncMap,n=this.program;for(var r in this._textureCount=0,this.uniforms){var i=this.uniforms[r],o=i.type,s=e[o];i.uniformLocation=t.getUniformLocation(n,r),"sampler2D"!==o&&(i.glMatrix=s.matrix,i.glValueLength=s.length,i.glFunc=s.func)}},setSampler2DBuffer:function(t,e,n,r,i,o){void 0===i&&(i=0),void 0===o&&(o={});var s=this.uniforms[t];return s.value=e,o.width=n,o.height=r,s.textureData=o,this._textureCount=i,this.initSampler2D(s),this},setSampler2D:function(t,e,n,r){void 0===n&&(n=0);var i=this.scene.sys.textures;if(i.exists(e)){var o=i.getFrame(e);if(o.glTexture&&o.glTexture.isRenderTexture)return this.setSampler2DBuffer(t,o.glTexture,o.width,o.height,n,r);var s=this.uniforms[t],a=o.source;s.textureKey=e,s.source=a.image,s.value=o.glTexture,a.isGLTexture&&(r||(r={}),r.width=a.width,r.height=a.height),r&&(s.textureData=r),this._textureCount=n,this.initSampler2D(s)}return this},setUniform:function(t,e){return u(this.uniforms,t,e),this},getUniform:function(t){return s(this.uniforms,t,null)},setChannel0:function(t,e){return this.setSampler2D("iChannel0",t,0,e)},setChannel1:function(t,e){return this.setSampler2D("iChannel1",t,1,e)},setChannel2:function(t,e){return this.setSampler2D("iChannel2",t,2,e)},setChannel3:function(t,e){return this.setSampler2D("iChannel3",t,3,e)},initSampler2D:function(t){if(t.value){var e=this.gl;e.activeTexture(e.TEXTURE0+this._textureCount),e.bindTexture(e.TEXTURE_2D,t.value);var n=t.textureData;if(n&&!t.value.isRenderTexture){var r=e[s(n,"magFilter","linear").toUpperCase()],i=e[s(n,"minFilter","linear").toUpperCase()],o=e[s(n,"wrapS","repeat").toUpperCase()],a=e[s(n,"wrapT","repeat").toUpperCase()],u=e[s(n,"format","rgba").toUpperCase()];if(n.repeat&&(o=e.REPEAT,a=e.REPEAT),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!!n.flipY),n.width){var c=s(n,"width",512),h=s(n,"height",2),l=s(n,"border",0);e.texImage2D(e.TEXTURE_2D,0,u,c,h,l,u,e.UNSIGNED_BYTE,null)}else e.texImage2D(e.TEXTURE_2D,0,u,e.RGBA,e.UNSIGNED_BYTE,t.source);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,a)}this.renderer.setProgram(this.program),e.uniform1i(t.uniformLocation,this._textureCount),this._textureCount++}},syncUniforms:function(){var t,e,n,r,i,o=this.gl,s=this.uniforms,a=0;for(var u in s)n=(t=s[u]).glFunc,e=t.glValueLength,r=t.uniformLocation,null!==(i=t.value)&&(1===e?t.glMatrix?n.call(o,r,t.transpose,i):n.call(o,r,i):2===e?n.call(o,r,i.x,i.y):3===e?n.call(o,r,i.x,i.y,i.z):4===e?n.call(o,r,i.x,i.y,i.z,i.w):"sampler2D"===t.type&&(o.activeTexture(o.TEXTURE0+a),o.bindTexture(o.TEXTURE_2D,i),o.uniform1i(r,a),a++))},load:function(t){var e=this.gl,n=this.width,r=this.height,i=this.renderer,o=this.program,s=this.viewMatrix;if(!this.renderToTexture){var a=-this._displayOriginX,u=-this._displayOriginY;s[0]=t[0],s[1]=t[1],s[4]=t[2],s[5]=t[3],s[8]=t[4],s[9]=t[5],s[12]=s[0]*a+s[4]*u,s[13]=s[1]*a+s[5]*u}e.useProgram(o),e.uniformMatrix4fv(e.getUniformLocation(o,"uViewMatrix"),!1,s),e.uniform2f(e.getUniformLocation(o,"uResolution"),this.width,this.height);var c=this.uniforms,h=c.resolution;h.value.x=n,h.value.y=r,c.time.value=i.game.loop.getDuration();var l=this.pointer;if(l){var f=c.mouse,d=l.x/n,p=1-l.y/r;f.value.x=d.toFixed(2),f.value.y=p.toFixed(2)}this.syncUniforms()},flush:function(){var t=this.width,e=this.height,n=this.program,r=this.gl,i=this.vertexBuffer,o=this.renderer,s=2*Float32Array.BYTES_PER_ELEMENT;this.renderToTexture&&(o.setFramebuffer(this.framebuffer),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT)),r.bindBuffer(r.ARRAY_BUFFER,i);var a=r.getAttribLocation(n,"inPosition");-1!==a&&(r.enableVertexAttribArray(a),r.vertexAttribPointer(a,2,r.FLOAT,!1,s,0));var u=this.vertexViewF32;u[3]=e,u[4]=t,u[5]=e,u[8]=t,u[9]=e,u[10]=t,r.bufferSubData(r.ARRAY_BUFFER,0,this.bytes.subarray(0,6*s)),r.drawArrays(r.TRIANGLES,0,6),this.renderToTexture&&o.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var t=this.gl;t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});t.exports=l},function(t,e,n){var r=n(0),i=n(11),o=n(36),s=n(116),a=n(15),u=n(479),c=n(480),h=n(19),l=n(69),f=n(1179),d=n(79),p=n(39),v=n(117),g=new r({Extends:a,Mixins:[i.AlphaSingle,i.BlendMode,i.Depth,i.Mask,i.Pipeline,i.Size,i.Texture,i.Transform,i.Visible,i.ScrollFactor,f],initialize:function(t,e,n,r,i,o,s,u,c,h,f,d){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r="__WHITE"),a.call(this,t,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new p,this.modelScale=new p(1,1,1),this.modelRotation=new p,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new l,this.viewPosition=new p,this.viewMatrix=new l,this.projectionMatrix=new l,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var v=t.sys.renderer;this.setPosition(e,n),this.setTexture(r,i),this.setSize(v.width,v.height),this.initPipeline(),this.setPerspective(v.width,v.height),o&&this.addVertices(o,s,u,c,h,f,d)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(t){return this.viewPosition.addScale(p.LEFT,t),this.dirtyCache[10]=1,this},panY:function(t){return this.viewPosition.y+=p.DOWN.y*t,this.dirtyCache[10]=1,this},panZ:function(t){return this.viewPosition.z+=t,this.dirtyCache[10]=1,this},setPerspective:function(t,e,n,r,i){return void 0===n&&(n=45),void 0===r&&(r=.01),void 0===i&&(i=1e3),this.projectionMatrix.perspective(o(n),t/e,r,i),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(t,e,n,r){return void 0===t&&(t=this.scene.sys.renderer.getAspectRatio()),void 0===e&&(e=1),void 0===n&&(n=-1e3),void 0===r&&(r=1e3),this.projectionMatrix.ortho(-t,t,-e,e,n,r),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach((function(t){t.destroy()})),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(t,e,n,r,i,o,s,a,u){var h=this.scene.sys.cache.obj.get(t);return h&&c(h,this,e,n,r,i,o,s,a,u),this},sortByDepth:function(t,e){return t.depth-e.depth},depthSort:function(){return d(this.faces,this.sortByDepth),this},addVertex:function(t,e,n,r,i,o,s){var a=new v(t,e,n,r,i,o,s);return this.vertices.push(a),a},addFace:function(t,e,n){var r=new s(t,e,n);return this.faces.push(r),this.dirtyCache[9]=-1,r},addVertices:function(t,e,n,r,i,o,s){var a=u(t,e,n,r,i,o,s);return a&&(this.faces=this.faces.concat(a.faces),this.vertices=this.vertices.concat(a.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(t){return this.faces[t]},getFaceAt:function(t,e,n){void 0===n&&(n=this.scene.sys.cameras.main);for(var r=h(this,n).calc,i=this.faces,o=[],s=0;s<i.length;s++){var a=i[s];a.contains(t,e,r)&&o.push(a)}return d(o,this.sortByDepth)},setDebug:function(t,e){return this.debugGraphic=t,this.debugCallback=t||e?e||this.renderDebug:null,this},isDirty:function(){var t=this.modelPosition,e=this.modelRotation,n=this.modelScale,r=this.dirtyCache,i=t.x,o=t.y,s=t.z,a=e.x,u=e.y,c=e.z,h=n.x,l=n.y,f=n.z,d=this.getFaceCount(),p=r[0],v=r[1],g=r[2],m=r[3],y=r[4],b=r[5],w=r[6],x=r[7],_=r[8],T=r[9];return r[0]=i,r[1]=o,r[2]=s,r[3]=a,r[4]=u,r[5]=c,r[6]=h,r[7]=l,r[8]=f,r[9]=d,p!==i||v!==o||g!==s||m!==a||y!==u||b!==c||w!==h||x!==l||_!==f||T!==d},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var t=this.dirtyCache;if(this.ignoreDirtyCache||t[10]||this.isDirty()){var e=this.width,n=this.height,r=this.viewMatrix,i=this.viewPosition;t[10]&&(r.identity(),r.translate(i),r.invert(),t[10]=0);var o=this.transformMatrix;o.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var s=i.z,a=this.faces,u=0;u<a.length;u++)a[u].transformCoordinatesLocal(o,e,n,s);this.depthSort()}},renderDebug:function(t,e){for(var n=t.debugGraphic,r=0;r<e.length;r++){var i=e[r],o=i.vertex1.tx,s=i.vertex1.ty,a=i.vertex2.tx,u=i.vertex2.ty,c=i.vertex3.tx,h=i.vertex3.ty;n.strokeTriangle(o,s,a,u,c,h)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});t.exports=g},function(t,e,n){var r=n(50);t.exports=function(t,e){return r(t.x,t.y,e.x,e.y)<=t.radius+e.radius}},function(t,e,n){var r=n(4),i=n(233);t.exports=function(t,e,n){if(void 0===n&&(n=[]),i(t,e)){var o,s,a=t.x1,u=t.y1,c=t.x2,h=t.y2,l=e.x,f=e.y,d=e.radius,p=c-a,v=h-u,g=a-l,m=u-f,y=p*p+v*v,b=2*(p*g+v*m),w=b*b-4*y*(g*g+m*m-d*d);if(0===w){var x=-b/(2*y);o=a+x*p,s=u+x*v,x>=0&&x<=1&&n.push(new r(o,s))}else if(w>0){var _=(-b-Math.sqrt(w))/(2*y);o=a+_*p,s=u+_*v,_>=0&&_<=1&&n.push(new r(o,s));var T=(-b+Math.sqrt(w))/(2*y);o=a+T*p,s=u+T*v,T>=0&&T<=1&&n.push(new r(o,s))}}return n}},function(t,e,n){var r=n(66),i=new(n(4));t.exports=function(t,e,n){if(void 0===n&&(n=i),r(e,t.x1,t.y1))return n.x=t.x1,n.y=t.y1,!0;if(r(e,t.x2,t.y2))return n.x=t.x2,n.y=t.y2,!0;var o=t.x2-t.x1,s=t.y2-t.y1,a=e.x-t.x1,u=e.y-t.y1,c=o*o+s*s,h=o,l=s;if(c>0){var f=(a*o+u*s)/c;h*=f,l*=f}return n.x=t.x1+h,n.y=t.y1+l,h*h+l*l<=c&&h*o+l*s>=0&&r(e,n.x,n.y)}},function(t,e,n){var r=n(4),i=n(96),o=n(488);t.exports=function(t,e,n){if(void 0===n&&(n=[]),o(t,e))for(var s=e.getLineA(),a=e.getLineB(),u=e.getLineC(),c=e.getLineD(),h=[new r,new r,new r,new r],l=[i(s,t,h[0]),i(a,t,h[1]),i(u,t,h[2]),i(c,t,h[3])],f=0;f<4;f++)l[f]&&n.push(h[f]);return n}},function(t,e){t.exports=function(t,e,n,r){void 0===n&&(n=!1),void 0===r&&(r=[]);for(var i,o,s,a,u,c,h=t.x3-t.x1,l=t.y3-t.y1,f=t.x2-t.x1,d=t.y2-t.y1,p=h*h+l*l,v=h*f+l*d,g=f*f+d*d,m=p*g-v*v,y=0===m?0:1/m,b=t.x1,w=t.y1,x=0;x<e.length&&(o=(p*(c=f*(s=e[x].x-b)+d*(a=e[x].y-w))-v*(u=h*s+l*a))*y,!((i=(g*u-v*c)*y)>=0&&o>=0&&i+o<1&&(r.push({x:e[x].x,y:e[x].y}),n)));x++);return r}},function(t,e){t.exports=function(t,e,n,r){var i=Math.cos(r),o=Math.sin(r),s=t.x1-e,a=t.y1-n;return t.x1=s*i-a*o+e,t.y1=s*o+a*i+n,s=t.x2-e,a=t.y2-n,t.x2=s*i-a*o+e,t.y2=s*o+a*i+n,t}},function(t,e){t.exports=function(t){return 0===t.height?NaN:t.width/t.height}},function(t,e){t.exports=function(t,e,n,r){var i=Math.cos(r),o=Math.sin(r),s=t.x1-e,a=t.y1-n;return t.x1=s*i-a*o+e,t.y1=s*o+a*i+n,s=t.x2-e,a=t.y2-n,t.x2=s*i-a*o+e,t.y2=s*o+a*i+n,s=t.x3-e,a=t.y3-n,t.x3=s*i-a*o+e,t.y3=s*o+a*i+n,t}},function(t,e,n){t.exports={BUTTON_DOWN:n(1310),BUTTON_UP:n(1311),CONNECTED:n(1312),DISCONNECTED:n(1313),GAMEPAD_BUTTON_DOWN:n(1314),GAMEPAD_BUTTON_UP:n(1315)}},function(t,e,n){var r=n(17),i=n(156);t.exports=function(t,e){var n=void 0===t?i():r({},t);if(e)for(var o in e)void 0!==e[o]&&(n[o]=e[o]);return n}},function(t,e,n){var r=n(0),i=n(21),o=n(23),s=n(8),a=n(2),u=n(7),c=n(408),h=new r({Extends:o,initialize:function(t,e,n,r){var i="xml";if(u(e)){var s=e;e=a(s,"key"),n=a(s,"url"),r=a(s,"xhrSettings"),i=a(s,"extension",i)}var c={type:"xml",cache:t.cacheManager.xml,extension:i,responseType:"text",key:e,url:n,xhrSettings:r};o.call(this,t,c)},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=c(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});s.register("xml",(function(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new h(this,t[r]));else this.addFile(new h(this,t,e,n));return this})),t.exports=h},function(t,e,n){var r=n(0),i=n(21),o=n(23),s=n(8),a=n(2),u=n(7),c=new r({Extends:o,initialize:function(t,e,n,r){var i="text",s="txt",c=t.cacheManager.text;if(u(e)){var h=e;e=a(h,"key"),n=a(h,"url"),r=a(h,"xhrSettings"),s=a(h,"extension",s),i=a(h,"type",i),c=a(h,"cache",c)}var l={type:i,cache:c,extension:s,responseType:"text",key:e,url:n,xhrSettings:r};o.call(this,t,l)},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});s.register("text",(function(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new c(this,t[r]));else this.addFile(new c(this,t,e,n));return this})),t.exports=c},function(t,e,n){t.exports={Acceleration:n(1368),Angular:n(1369),Bounce:n(1370),Debug:n(1371),Drag:n(1372),Enable:n(1373),Friction:n(1374),Gravity:n(1375),Immovable:n(1376),Mass:n(1377),OverlapCirc:n(523),OverlapRect:n(244),Pushable:n(1378),Size:n(1379),Velocity:n(1380)}},function(t,e){t.exports=function(t,e,n,r,i,o,s){void 0===o&&(o=!0),void 0===s&&(s=!1);var a=[],u=[],c=t.treeMinMax;if(c.minX=e,c.minY=n,c.maxX=e+r,c.maxY=n+i,s&&(u=t.staticTree.search(c)),o&&t.useTree)a=t.tree.search(c);else if(o){var h=t.bodies,l={position:{x:e,y:n},left:e,top:n,right:e+r,bottom:n+i,isCircle:!1},f=t.intersects;h.iterate((function(t){f(t,l)&&a.push(t)}))}return u.concat(a)}},function(t,e,n){t.exports={COLLIDE:n(1381),OVERLAP:n(1382),PAUSE:n(1383),RESUME:n(1384),TILE_COLLIDE:n(1385),TILE_OVERLAP:n(1386),WORLD_BOUNDS:n(1387),WORLD_STEP:n(1388)}},function(t,e,n){var r=n(62);t.exports=function(t,e,n,i){var o=0,s=t.deltaAbsX()+e.deltaAbsX()+i;return 0===t._dx&&0===e._dx?(t.embedded=!0,e.embedded=!0):t._dx>e._dx?(o=t.right-e.x)>s&&!n||!1===t.checkCollision.right||!1===e.checkCollision.left?o=0:(t.touching.none=!1,t.touching.right=!0,e.touching.none=!1,e.touching.left=!0,e.physicsType!==r.STATIC_BODY||n||(t.blocked.none=!1,t.blocked.right=!0),t.physicsType!==r.STATIC_BODY||n||(e.blocked.none=!1,e.blocked.left=!0)):t._dx<e._dx&&(-(o=t.x-e.width-e.x)>s&&!n||!1===t.checkCollision.left||!1===e.checkCollision.right?o=0:(t.touching.none=!1,t.touching.left=!0,e.touching.none=!1,e.touching.right=!0,e.physicsType!==r.STATIC_BODY||n||(t.blocked.none=!1,t.blocked.left=!0),t.physicsType!==r.STATIC_BODY||n||(e.blocked.none=!1,e.blocked.right=!0))),t.overlapX=o,e.overlapX=o,o}},function(t,e,n){var r=n(62);t.exports=function(t,e,n,i){var o=0,s=t.deltaAbsY()+e.deltaAbsY()+i;return 0===t._dy&&0===e._dy?(t.embedded=!0,e.embedded=!0):t._dy>e._dy?(o=t.bottom-e.y)>s&&!n||!1===t.checkCollision.down||!1===e.checkCollision.up?o=0:(t.touching.none=!1,t.touching.down=!0,e.touching.none=!1,e.touching.up=!0,e.physicsType!==r.STATIC_BODY||n||(t.blocked.none=!1,t.blocked.down=!0),t.physicsType!==r.STATIC_BODY||n||(e.blocked.none=!1,e.blocked.up=!0)):t._dy<e._dy&&(-(o=t.y-e.bottom)>s&&!n||!1===t.checkCollision.up||!1===e.checkCollision.down?o=0:(t.touching.none=!1,t.touching.up=!0,e.touching.none=!1,e.touching.down=!0,e.physicsType!==r.STATIC_BODY||n||(t.blocked.none=!1,t.blocked.up=!0),t.physicsType!==r.STATIC_BODY||n||(e.blocked.none=!1,e.blocked.down=!0))),t.overlapY=o,e.overlapY=o,o}},function(t,e){t.exports=function(t,e){return!(e.right<=t.left||e.bottom<=t.top||e.position.x>=t.right||e.position.y>=t.bottom)}},function(t,e,n){t.exports={Bounce:n(1495),Collision:n(1496),Force:n(1497),Friction:n(1498),Gravity:n(1499),Mass:n(1500),Sensor:n(1501),SetBody:n(1502),Sleep:n(1503),Static:n(1520),Transform:n(1521),Velocity:n(1522)}},function(t,e){var n={};t.exports=n,n.create=function(t,e){var r=t.bodyA,i=t.bodyB,o={id:n.id(r,i),bodyA:r,bodyB:i,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:r.isSensor||i.isSensor,timeCreated:e,timeUpdated:e,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return n.update(o,t,e),o},n.update=function(t,e,r){if(t.collision=e,e.collided){var i=e.supports,o=t.activeContacts,s=e.parentA,a=e.parentB;t.inverseMass=s.inverseMass+a.inverseMass,t.friction=Math.min(s.friction,a.friction),t.frictionStatic=Math.max(s.frictionStatic,a.frictionStatic),t.restitution=Math.max(s.restitution,a.restitution),t.slop=Math.max(s.slop,a.slop);for(var u=0;u<i.length;u++)o[u]=i[u].contact;var c=i.length;c<o.length&&(o.length=c),t.separation=e.depth,n.setActive(t,!0,r)}else!0===t.isActive&&n.setActive(t,!1,r)},n.setActive=function(t,e,n){e?(t.isActive=!0,t.timeUpdated=n):(t.isActive=!1,t.activeContacts.length=0)},n.id=function(t,e){return t.id<e.id?"A"+t.id+"B"+e.id:"A"+e.id+"B"+t.id}},function(t,e,n){t.exports={CalculateFacesAt:n(252),CalculateFacesWithin:n(63),CheckIsoBounds:n(541),Copy:n(1420),CreateFromTiles:n(1421),CullBounds:n(543),CullTiles:n(544),Fill:n(1422),FilterTiles:n(1423),FindByIndex:n(1424),FindTile:n(1425),ForEachTile:n(1426),GetCullTilesFunction:n(1427),GetTileAt:n(158),GetTileAtWorldXY:n(1428),GetTilesWithin:n(26),GetTilesWithinShape:n(1429),GetTilesWithinWorldXY:n(529),GetTileToWorldXFunction:n(1430),GetTileToWorldXYFunction:n(1431),GetTileToWorldYFunction:n(1432),GetWorldToTileXFunction:n(1433),GetWorldToTileXYFunction:n(1434),GetWorldToTileYFunction:n(1435),HasTileAt:n(562),HasTileAtWorldXY:n(1436),HexagonalCullBounds:n(546),HexagonalCullTiles:n(545),HexagonalTileToWorldXY:n(550),HexagonalTileToWorldY:n(554),HexagonalWorldToTileXY:n(556),HexagonalWorldToTileY:n(560),IsInLayerBounds:n(119),IsometricCullTiles:n(547),IsometricTileToWorldXY:n(551),IsometricWorldToTileXY:n(557),PutTileAt:n(257),PutTileAtWorldXY:n(1437),PutTilesAt:n(1438),Randomize:n(1439),RemoveTileAt:n(563),RemoveTileAtWorldXY:n(1440),RenderDebug:n(1441),ReplaceByIndex:n(542),RunCull:n(159),SetCollision:n(1442),SetCollisionBetween:n(1443),SetCollisionByExclusion:n(1444),SetCollisionByProperty:n(1445),SetCollisionFromCollisionGroup:n(1446),SetLayerCollisionIndex:n(160),SetTileCollision:n(72),SetTileIndexCallback:n(1447),SetTileLocationCallback:n(1448),Shuffle:n(1449),StaggeredCullBounds:n(549),StaggeredCullTiles:n(548),StaggeredTileToWorldXY:n(552),StaggeredTileToWorldY:n(555),StaggeredWorldToTileXY:n(558),StaggeredWorldToTileY:n(561),SwapByIndex:n(1450),TileToWorldX:n(253),TileToWorldXY:n(553),TileToWorldY:n(254),WeightedRandomize:n(1451),WorldToTileX:n(255),WorldToTileXY:n(559),WorldToTileY:n(256)}},function(t,e,n){var r=n(158);t.exports=function(t,e,n){var i=r(t,e,!0,n),o=r(t,e-1,!0,n),s=r(t,e+1,!0,n),a=r(t-1,e,!0,n),u=r(t+1,e,!0,n),c=i&&i.collides;return c&&(i.faceTop=!0,i.faceBottom=!0,i.faceLeft=!0,i.faceRight=!0),o&&o.collides&&(c&&(i.faceTop=!1),o.faceBottom=!c),s&&s.collides&&(c&&(i.faceBottom=!1),s.faceTop=!c),a&&a.collides&&(c&&(i.faceLeft=!1),a.faceRight=!c),u&&u.collides&&(c&&(i.faceRight=!1),u.faceLeft=!c),i&&!i.collides&&i.resetFaces(),i}},function(t,e){t.exports=function(t,e,n){var r=n.baseTileWidth,i=n.tilemapLayer,o=0;return i&&(e||(e=i.scene.cameras.main),o=i.x+e.scrollX*(1-i.scrollFactorX),r*=i.scaleX),o+t*r}},function(t,e){t.exports=function(t,e,n){var r=n.baseTileHeight,i=n.tilemapLayer,o=0;return i&&(e||(e=i.scene.cameras.main),o=i.y+e.scrollY*(1-i.scrollFactorY),r*=i.scaleY),o+t*r}},function(t,e){t.exports=function(t,e,n,r){void 0===e&&(e=!0);var i=r.baseTileWidth,o=r.tilemapLayer;return o&&(n||(n=o.scene.cameras.main),t-=o.x+n.scrollX*(1-o.scrollFactorX),i*=o.scaleX),e?Math.floor(t/i):t/i}},function(t,e){t.exports=function(t,e,n,r){void 0===e&&(e=!0);var i=r.baseTileHeight,o=r.tilemapLayer;return o&&(n||(n=o.scene.cameras.main),t-=o.y+n.scrollY*(1-o.scrollFactorY),i*=o.scaleY),e?Math.floor(t/i):t/i}},function(t,e,n){var r=n(85),i=n(119),o=n(252),s=n(72);t.exports=function(t,e,n,a,u){if(void 0===a&&(a=!0),!i(e,n,u))return null;var c=u.data[n][e],h=c&&c.collides;if(t instanceof r)null===u.data[n][e]&&(u.data[n][e]=new r(u,t.index,e,n,u.tileWidth,u.tileHeight)),u.data[n][e].copy(t);else{var l=t;null===u.data[n][e]?u.data[n][e]=new r(u,l,e,n,u.tileWidth,u.tileHeight):u.data[n][e].index=l}var f=u.data[n][e],d=-1!==u.collideIndexes.indexOf(f.index);return s(f,d),a&&h!==f.collides&&o(e,n,u),f}},function(t,e,n){var r=n(29);t.exports=function(t){return"isometric"===(t=t.toLowerCase())?r.ISOMETRIC:"staggered"===t?r.STAGGERED:"hexagonal"===t?r.HEXAGONAL:r.ORTHOGONAL}},function(t,e,n){var r=n(40),i=n(120),o=n(121),s=n(85);t.exports=function(t,e,n,a,u){for(var c=new i({tileWidth:n,tileHeight:a}),h=new o({name:t,tileWidth:n,tileHeight:a,format:r.ARRAY_2D,layers:[c]}),l=[],f=e.length,d=0,p=0;p<e.length;p++){l[p]=[];for(var v=e[p],g=0;g<v.length;g++){var m=parseInt(v[g],10);isNaN(m)||-1===m?l[p][g]=u?null:new s(c,-1,g,p,n,a):l[p][g]=new s(c,m,g,p,n,a)}0===d&&(d=v.length)}return h.width=c.width=d,h.height=c.height=f,h.widthInPixels=c.widthInPixels=d*n,h.heightInPixels=c.heightInPixels=f*a,c.data=l,h}},function(t,e,n){var r=n(571),i=n(261),o=function(t){return{x:t.x,y:t.y}},s=["id","name","type","rotation","properties","visible","x","y","width","height"];t.exports=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0);var a=r(t,s);if(a.x+=e,a.y+=n,t.gid){var u=i(t.gid);a.gid=u.gid,a.flippedHorizontal=u.flippedHorizontal,a.flippedVertical=u.flippedVertical,a.flippedAntiDiagonal=u.flippedAntiDiagonal}else t.polyline?a.polyline=t.polyline.map(o):t.polygon?a.polygon=t.polygon.map(o):t.ellipse?a.ellipse=t.ellipse:t.text?a.text=t.text:t.point?a.point=!0:a.rectangle=!0;return a}},function(t,e){var n=2147483648,r=1073741824,i=536870912;t.exports=function(t){var e=Boolean(t&n),o=Boolean(t&r),s=Boolean(t&i);t&=536870911;var a=0,u=!1;return e&&o&&s?(a=Math.PI/2,u=!0):e&&o&&!s?(a=Math.PI,u=!1):e&&!o&&s?(a=Math.PI/2,u=!1):!e||o||s?!e&&o&&s?(a=3*Math.PI/2,u=!1):e||!o||s?e||o||!s?e||o||s||(a=0,u=!1):(a=3*Math.PI/2,u=!0):(a=Math.PI,u=!0):(a=0,u=!0),{gid:t,flippedHorizontal:e,flippedVertical:o,flippedAntiDiagonal:s,rotation:a,flipped:u}}},function(t,e,n){var r=n(40),i=n(121),o=n(564),s=n(580);t.exports=function(t,e,n,a,u,c,h,l){void 0===n&&(n=32),void 0===a&&(a=32),void 0===u&&(u=10),void 0===c&&(c=10),void 0===l&&(l=!1);var f=null;if(Array.isArray(h))f=o(void 0!==e?e:"map",r.ARRAY_2D,h,n,a,l);else if(void 0!==e){var d=t.cache.tilemap.get(e);d?f=o(e,d.format,d.data,n,a,l):console.warn("No map data found for key "+e)}return null===f&&(f=new i({tileWidth:n,tileHeight:a,width:u,height:c})),new s(t,f)}},function(t,e,n){var r=n(6);t.exports=function(t){var e=r(t,"targets",null);return null===e||("function"===typeof e&&(e=e.call()),Array.isArray(e)||(e=[e])),e}},function(t,e){function n(t){return!!t.getActive&&"function"===typeof t.getActive}function r(t){return!!t.getStart&&"function"===typeof t.getStart}function i(t){return!!t.getEnd&&"function"===typeof t.getEnd}t.exports=function t(e,o){var s,a,u=function(t,e,n){return n},c=function(t,e,n){return n},h=null,l=typeof o;if("number"===l)u=function(){return o};else if("string"===l){var f=o[0],d=parseFloat(o.substr(2));switch(f){case"+":u=function(t,e,n){return n+d};break;case"-":u=function(t,e,n){return n-d};break;case"*":u=function(t,e,n){return n*d};break;case"/":u=function(t,e,n){return n/d};break;default:u=function(){return parseFloat(o)}}}else if("function"===l)u=o;else if("object"===l)if(r(a=o)||i(a)||n(a))n(o)&&(h=o.getActive),i(o)&&(u=o.getEnd),r(o)&&(c=o.getStart);else if(o.hasOwnProperty("value"))s=t(e,o.value);else{var p=o.hasOwnProperty("to"),v=o.hasOwnProperty("from"),g=o.hasOwnProperty("start");if(p&&(v||g)){if(s=t(e,o.to),g){var m=t(e,o.start);s.getActive=m.getEnd}if(v){var y=t(e,o.from);s.getStart=y.getEnd}}}return s||(s={getActive:h,getEnd:u,getStart:c}),s}},function(t,e){t.exports={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1}},function(t,e,n){var r=n(0),i=n(9),o=n(267),s=n(16),a=n(5),u=n(100),c=n(14),h=new r({Extends:i,initialize:function(t,e,n){i.call(this),this.parent=t,this.parentIsTimeline=t.hasOwnProperty("isTimeline"),this.data=e,this.totalData=e.length,this.targets=n,this.totalTargets=n.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=u.PENDING_ADD,this._pausedState=u.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null},this.callbackScope},getValue:function(t){return void 0===t&&(t=0),this.data[t].current},setTimeScale:function(t){return this.timeScale=t,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===u.ACTIVE},isPaused:function(){return this.state===u.PAUSED},hasTarget:function(t){return-1!==this.targets.indexOf(t)},updateTo:function(t,e,n){void 0===n&&(n=!1);for(var r=0;r<this.totalData;r++){var i=this.data[r];i.key===t&&(i.end=e,n&&(i.start=i.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===u.ACTIVE?this.seek(0):this.state===u.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===u.PENDING_ADD?this:this.play()},calcDuration:function(){for(var t=0,e=c.MAX_SAFE_INTEGER,n=this.data,r=0;r<this.totalData;r++){var i=n[r];i.t1=i.duration+i.hold,i.yoyo&&(i.t1+=i.duration),i.t2=i.t1+i.repeatDelay,i.totalDuration=i.delay+i.t1,-1===i.repeat?i.totalDuration+=999999999999*i.t2:i.repeat>0&&(i.totalDuration+=i.t2*i.repeat),i.totalDuration>t&&(t=i.totalDuration),i.delay<e&&(e=i.delay)}this.duration=Math.max(t,.001),this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay,this.startDelay=e},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=u.PENDING_ADD,this._pausedState=u.INIT,!1;for(var t=this.data,e=this.totalTargets,n=0;n<this.totalData;n++){var r=t[n],i=r.target,o=r.gen,s=r.key,a=r.index;r.delay=o.delay(i,s,0,a,e,this),r.duration=Math.max(o.duration(i,s,0,a,e,this),.001),r.hold=o.hold(i,s,0,a,e,this),r.repeat=o.repeat(i,s,0,a,e,this),r.repeatDelay=o.repeatDelay(i,s,0,a,e,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=u.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(o.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=u.LOOP_DELAY):(this.state=u.ACTIVE,this.dispatchTweenEvent(o.TWEEN_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=u.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=u.PENDING_REMOVE,this.dispatchTweenEvent(o.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===u.PAUSED||(this.paused=!0,this._pausedState=this.state,this.state=u.PAUSED),this},play:function(t){void 0===t&&(t=!1);var e=this.state;return e!==u.INIT||this.parentIsTimeline?e===u.ACTIVE||e===u.PENDING_ADD&&this._pausedState===u.PENDING_ADD?this:this.parentIsTimeline||e!==u.PENDING_REMOVE&&e!==u.REMOVED?(this.parentIsTimeline?(this.resetTweenData(t),0===this.calculatedOffset?this.state=u.ACTIVE:(this.countdown=this.calculatedOffset,this.state=u.OFFSET_DELAY)):this.paused?(this.paused=!1,this.makeActive()):(this.resetTweenData(t),this.state=u.ACTIVE,this.makeActive()),this):(this.seek(0),this.parent.makeActive(this),this):(this.resetTweenData(!1),this.state=u.ACTIVE,this)},resetTweenData:function(t){for(var e=this.data,n=this.totalData,r=this.totalTargets,i=0;i<n;i++){var o=e[i],s=o.target,a=o.key,c=o.index;o.progress=0,o.elapsed=0,o.repeatCounter=-1===o.repeat?999999999999:o.repeat,t?(o.start=o.getStartValue(s,a,o.start,c,r,this),o.end=o.getEndValue(s,a,o.end,c,r,this),o.current=o.start,o.state=u.PLAYING_FORWARD):o.state=u.PENDING_RENDER,o.delay>0&&(o.elapsed=o.delay,o.state=u.DELAY),o.getActiveValue&&(s[a]=o.getActiveValue(o.target,o.key,o.start))}},resume:function(){return this.state===u.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(t,e){void 0===e&&(e=16.6),this.state===u.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var n=this.data,r=this.totalTargets,i=0;i<this.totalData;i++){var o=n[i],s=o.target,a=o.gen,c=o.key,h=o.index;o.progress=0,o.elapsed=0,o.repeatCounter=-1===o.repeat?999999999999:o.repeat,o.delay=a.delay(s,c,0,h,r,this),o.duration=Math.max(a.duration(s,c,0,h,r,this),.001),o.hold=a.hold(s,c,0,h,r,this),o.repeat=a.repeat(s,c,0,h,r,this),o.repeatDelay=a.repeatDelay(s,c,0,h,r,this),o.current=o.start,o.state=u.PLAYING_FORWARD,this.updateTweenData(this,o,0,h,r),o.delay>0&&(o.elapsed=o.delay,o.state=u.DELAY)}this.calcDuration();var l=!1;this.state===u.PAUSED&&(l=!0,this.state=u.ACTIVE),this.isSeeking=!0;do{this.update(0,e)}while(this.totalProgress<t);return this.isSeeking=!1,l&&(this.state=u.PAUSED),this},setCallback:function(t,e,n,r){return this.callbacks[t]={func:e,scope:r,params:n},this},complete:function(t){return void 0===t&&(t=0),t?(this.state=u.COMPLETE_DELAY,this.countdown=t):(this.state=u.PENDING_REMOVE,this.dispatchTweenEvent(o.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(t){return this.state===u.ACTIVE&&void 0!==t&&this.seek(t),this.state!==u.REMOVED&&(this.state!==u.PAUSED&&this.state!==u.PENDING_ADD||(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(o.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=u.PENDING_REMOVE),this},update:function(t,e){if(this.state===u.PAUSED)return!1;switch(this.useFrames&&(e=1*this.parent.timeScale),e*=this.timeScale,this.elapsed+=e,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=e,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case u.ACTIVE:this.hasStarted||this.isSeeking||(this.startDelay-=e,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(o.TWEEN_START,this.callbacks.onStart)));for(var n=!1,r=0;r<this.totalData;r++){var i=this.data[r];this.updateTweenData(this,i,e)&&(n=!0)}n||this.nextState();break;case u.LOOP_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=u.ACTIVE,this.dispatchTweenEvent(o.TWEEN_LOOP,this.callbacks.onLoop));break;case u.OFFSET_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=u.ACTIVE);break;case u.COMPLETE_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=u.PENDING_REMOVE,this.dispatchTweenEvent(o.TWEEN_COMPLETE,this.callbacks.onComplete))}return this.state===u.PENDING_REMOVE},dispatchTweenDataEvent:function(t,e,n){this.isSeeking||(this.emit(t,this,n.key,n.target,n.current,n.previous),e&&(e.params[1]=n.target,e.func.apply(e.scope,e.params)))},dispatchTweenEvent:function(t,e){this.isSeeking||(this.emit(t,this,this.targets),e&&(e.params[1]=this.targets,e.func.apply(e.scope,e.params)))},setStateFromEnd:function(t,e,n){return e.yoyo?(e.elapsed=n,e.progress=n/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY(),this.dispatchTweenDataEvent(o.TWEEN_YOYO,t.callbacks.onYoyo,e),e.start=e.getStartValue(e.target,e.key,e.start,e.index,t.totalTargets,t),u.PLAYING_BACKWARD):e.repeatCounter>0?(e.repeatCounter--,e.elapsed=n,e.progress=n/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY(),e.start=e.getStartValue(e.target,e.key,e.start,e.index,t.totalTargets,t),e.end=e.getEndValue(e.target,e.key,e.start,e.index,t.totalTargets,t),e.repeatDelay>0?(e.elapsed=e.repeatDelay-n,e.current=e.start,e.target[e.key]=e.current,u.REPEAT_DELAY):(this.dispatchTweenDataEvent(o.TWEEN_REPEAT,t.callbacks.onRepeat,e),u.PLAYING_FORWARD)):u.COMPLETE},setStateFromStart:function(t,e,n){return e.repeatCounter>0?(e.repeatCounter--,e.elapsed=n,e.progress=n/e.duration,e.flipX&&e.target.toggleFlipX(),e.flipY&&e.target.toggleFlipY(),e.end=e.getEndValue(e.target,e.key,e.start,e.index,t.totalTargets,t),e.repeatDelay>0?(e.elapsed=e.repeatDelay-n,e.current=e.start,e.target[e.key]=e.current,u.REPEAT_DELAY):(this.dispatchTweenDataEvent(o.TWEEN_REPEAT,t.callbacks.onRepeat,e),u.PLAYING_FORWARD)):u.COMPLETE},updateTweenData:function(t,e,n){var r=e.target;switch(e.state){case u.PLAYING_FORWARD:case u.PLAYING_BACKWARD:if(!r){e.state=u.COMPLETE;break}var i=e.elapsed,s=e.duration,a=0;(i+=n)>s&&(a=i-s,i=s);var c=e.state===u.PLAYING_FORWARD,h=i/s;if(e.elapsed=i,e.progress=h,e.previous=e.current,1===h)c?(e.current=e.end,r[e.key]=e.end,e.hold>0?(e.elapsed=e.hold-a,e.state=u.HOLD_DELAY):e.state=this.setStateFromEnd(t,e,a)):(e.current=e.start,r[e.key]=e.start,e.state=this.setStateFromStart(t,e,a));else{var l=c?e.ease(h):e.ease(1-h);e.current=e.start+(e.end-e.start)*l,r[e.key]=e.current}this.dispatchTweenDataEvent(o.TWEEN_UPDATE,t.callbacks.onUpdate,e);break;case u.DELAY:e.elapsed-=n,e.elapsed<=0&&(e.elapsed=Math.abs(e.elapsed),e.state=u.PENDING_RENDER);break;case u.REPEAT_DELAY:e.elapsed-=n,e.elapsed<=0&&(e.elapsed=Math.abs(e.elapsed),e.state=u.PLAYING_FORWARD,this.dispatchTweenDataEvent(o.TWEEN_REPEAT,t.callbacks.onRepeat,e));break;case u.HOLD_DELAY:e.elapsed-=n,e.elapsed<=0&&(e.state=this.setStateFromEnd(t,e,Math.abs(e.elapsed)));break;case u.PENDING_RENDER:r?(e.start=e.getStartValue(r,e.key,r[e.key],e.index,t.totalTargets,t),e.end=e.getEndValue(r,e.key,e.start,e.index,t.totalTargets,t),e.current=e.start,r[e.key]=e.start,e.state=u.PLAYING_FORWARD):e.state=u.COMPLETE}return e.state!==u.COMPLETE}});h.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],a.register("tween",(function(t){return this.scene.sys.tweens.add(t)})),s.register("tween",(function(t){return this.scene.sys.tweens.create(t)})),t.exports=h},function(t,e,n){t.exports={TIMELINE_COMPLETE:n(1466),TIMELINE_LOOP:n(1467),TIMELINE_PAUSE:n(1468),TIMELINE_RESUME:n(1469),TIMELINE_START:n(1470),TIMELINE_UPDATE:n(1471),TWEEN_ACTIVE:n(1472),TWEEN_COMPLETE:n(1473),TWEEN_LOOP:n(1474),TWEEN_REPEAT:n(1475),TWEEN_START:n(1476),TWEEN_STOP:n(1477),TWEEN_UPDATE:n(1478),TWEEN_YOYO:n(1479)}},function(t,e){t.exports=function(t,e,n,r,i,o,s,a,u,c,h,l,f,d,p){return{target:t,index:e,key:n,getActiveValue:o,getEndValue:r,getStartValue:i,ease:s,duration:0,totalDuration:0,delay:0,yoyo:c,hold:0,repeat:0,repeatDelay:0,flipX:d,flipY:p,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:a,duration:u,hold:h,repeat:l,repeatDelay:f},state:0}}},function(t,e,n){var r=n(68);t.exports=function(t){return r(t,-Math.PI,Math.PI)}},function(t,e,n){var r=n(68);t.exports=function(t){return r(t,-180,180)}},function(t,e,n){var r={};t.exports=r;var i=n(83),o=n(32);r.fromVertices=function(t){for(var e={},n=0;n<t.length;n++){var r=(n+1)%t.length,s=i.normalise({x:t[r].y-t[n].y,y:t[n].x-t[r].x}),a=0===s.y?1/0:s.x/s.y;e[a=a.toFixed(3).toString()]=s}return o.values(e)},r.rotate=function(t,e){if(0!==e)for(var n=Math.cos(e),r=Math.sin(e),i=0;i<t.length;i++){var o,s=t[i];o=s.x*n-s.y*r,s.y=s.x*r+s.y*n,s.x=o}}},function(t,e,n){t.exports={AFTER_ADD:n(1504),AFTER_REMOVE:n(1505),AFTER_UPDATE:n(1506),BEFORE_ADD:n(1507),BEFORE_REMOVE:n(1508),BEFORE_UPDATE:n(1509),COLLISION_ACTIVE:n(1510),COLLISION_END:n(1511),COLLISION_START:n(1512),DRAG_END:n(1513),DRAG:n(1514),DRAG_START:n(1515),PAUSE:n(1516),RESUME:n(1517),SLEEP_END:n(1518),SLEEP_START:n(1519)}},function(t,e,n){var r={};t.exports=r;var i=n(274),o=n(250),s=n(84);r.collisions=function(t,e){for(var n=[],a=e.pairs.table,u=e.metrics,c=0;c<t.length;c++){var h=t[c][0],l=t[c][1];if((!h.isStatic&&!h.isSleeping||!l.isStatic&&!l.isSleeping)&&r.canCollide(h.collisionFilter,l.collisionFilter)&&(u.midphaseTests+=1,s.overlaps(h.bounds,l.bounds)))for(var f=h.parts.length>1?1:0;f<h.parts.length;f++)for(var d=h.parts[f],p=l.parts.length>1?1:0;p<l.parts.length;p++){var v=l.parts[p];if(d===h&&v===l||s.overlaps(d.bounds,v.bounds)){var g,m=a[o.id(d,v)];g=m&&m.isActive?m.collision:null;var y=i.collides(d,v,g);u.narrowphaseTests+=1,y.reused&&(u.narrowReuseCount+=1),y.collided&&(n.push(y),u.narrowDetections+=1)}}}return n},r.canCollide=function(t,e){return t.group===e.group&&0!==t.group?t.group>0:0!==(t.mask&e.category)&&0!==(e.mask&t.category)}},function(t,e,n){var r={};t.exports=r;var i=n(64),o=n(83);r.collides=function(t,e,n){var s,a,u,c,h=!1;if(n){var l=t.parent,f=e.parent,d=l.speed*l.speed+l.angularSpeed*l.angularSpeed+f.speed*f.speed+f.angularSpeed*f.angularSpeed;h=n&&n.collided&&d<.2,c=n}else c={collided:!1,bodyA:t,bodyB:e};if(n&&h){var p=c.axisBody,v=p===t?e:t,g=[p.axes[n.axisNumber]];if(u=r._overlapAxes(p.vertices,v.vertices,g),c.reused=!0,u.overlap<=0)return c.collided=!1,c}else{if((s=r._overlapAxes(t.vertices,e.vertices,t.axes)).overlap<=0)return c.collided=!1,c;if((a=r._overlapAxes(e.vertices,t.vertices,e.axes)).overlap<=0)return c.collided=!1,c;s.overlap<a.overlap?(u=s,c.axisBody=t):(u=a,c.axisBody=e),c.axisNumber=u.axisNumber}c.bodyA=t.id<e.id?t:e,c.bodyB=t.id<e.id?e:t,c.collided=!0,c.depth=u.overlap,c.parentA=c.bodyA.parent,c.parentB=c.bodyB.parent,t=c.bodyA,e=c.bodyB,o.dot(u.axis,o.sub(e.position,t.position))<0?c.normal={x:u.axis.x,y:u.axis.y}:c.normal={x:-u.axis.x,y:-u.axis.y},c.tangent=o.perp(c.normal),c.penetration=c.penetration||{},c.penetration.x=c.normal.x*c.depth,c.penetration.y=c.normal.y*c.depth;var m=r._findSupports(t,e,c.normal),y=[];if(i.contains(t.vertices,m[0])&&y.push(m[0]),i.contains(t.vertices,m[1])&&y.push(m[1]),y.length<2){var b=r._findSupports(e,t,o.neg(c.normal));i.contains(e.vertices,b[0])&&y.push(b[0]),y.length<2&&i.contains(e.vertices,b[1])&&y.push(b[1])}return y.length<1&&(y=[m[0]]),c.supports=y,c},r._overlapAxes=function(t,e,n){for(var i,s,a=o._temp[0],u=o._temp[1],c={overlap:Number.MAX_VALUE},h=0;h<n.length;h++){if(s=n[h],r._projectToAxis(a,t,s),r._projectToAxis(u,e,s),(i=Math.min(a.max-u.min,u.max-a.min))<=0)return c.overlap=i,c;i<c.overlap&&(c.overlap=i,c.axis=s,c.axisNumber=h)}return c},r._projectToAxis=function(t,e,n){for(var r=o.dot(e[0],n),i=r,s=1;s<e.length;s+=1){var a=o.dot(e[s],n);a>i?i=a:a<r&&(r=a)}t.min=r,t.max=i},r._findSupports=function(t,e,n){for(var r,i,s,a,u=Number.MAX_VALUE,c=o._temp[0],h=e.vertices,l=t.position,f=0;f<h.length;f++)i=h[f],c.x=i.x-l.x,c.y=i.y-l.y,(r=-o.dot(n,c))<u&&(u=r,s=i);return i=h[s.index-1>=0?s.index-1:h.length-1],c.x=i.x-l.x,c.y=i.y-l.y,u=-o.dot(n,c),a=i,i=h[(s.index+1)%h.length],c.x=i.x-l.x,c.y=i.y-l.y,(r=-o.dot(n,c))<u&&(a=i),[s,a]}},function(t,e,n){t.exports={AlignTo:n(601),Angle:n(602),Call:n(603),GetFirst:n(604),GetLast:n(605),GridAlign:n(606),IncAlpha:n(678),IncX:n(679),IncXY:n(680),IncY:n(681),PlaceOnCircle:n(682),PlaceOnEllipse:n(683),PlaceOnLine:n(684),PlaceOnRectangle:n(685),PlaceOnTriangle:n(686),PlayAnimation:n(687),PropertyValueInc:n(46),PropertyValueSet:n(27),RandomCircle:n(688),RandomEllipse:n(689),RandomLine:n(690),RandomRectangle:n(691),RandomTriangle:n(692),Rotate:n(693),RotateAround:n(694),RotateAroundDistance:n(695),ScaleX:n(696),ScaleXY:n(697),ScaleY:n(698),SetAlpha:n(699),SetBlendMode:n(700),SetDepth:n(701),SetHitArea:n(702),SetOrigin:n(703),SetRotation:n(704),SetScale:n(705),SetScaleX:n(706),SetScaleY:n(707),SetScrollFactor:n(708),SetScrollFactorX:n(709),SetScrollFactorY:n(710),SetTint:n(711),SetVisible:n(712),SetX:n(713),SetXY:n(714),SetY:n(715),ShiftPosition:n(716),Shuffle:n(717),SmootherStep:n(718),SmoothStep:n(719),Spread:n(720),ToggleVisible:n(721),WrapInRectangle:n(722)}},function(t,e,n){var r=n(123),i=[];i[r.BOTTOM_CENTER]=n(277),i[r.BOTTOM_LEFT]=n(278),i[r.BOTTOM_RIGHT]=n(279),i[r.LEFT_BOTTOM]=n(280),i[r.LEFT_CENTER]=n(281),i[r.LEFT_TOP]=n(282),i[r.RIGHT_BOTTOM]=n(283),i[r.RIGHT_CENTER]=n(284),i[r.RIGHT_TOP]=n(285),i[r.TOP_CENTER]=n(286),i[r.TOP_LEFT]=n(287),i[r.TOP_RIGHT]=n(288),t.exports=function(t,e,n,r,o){return i[n](t,e,r,o)}},function(t,e,n){var r=n(42),i=n(87),o=n(88),s=n(52);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),o(t,i(e)+n),s(t,r(e)+a),t}},function(t,e,n){var r=n(42),i=n(43),o=n(53),s=n(52);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),o(t,i(e)-n),s(t,r(e)+a),t}},function(t,e,n){var r=n(42),i=n(44),o=n(54),s=n(52);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),o(t,i(e)+n),s(t,r(e)+a),t}},function(t,e,n){var r=n(42),i=n(43),o=n(55),s=n(54);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),s(t,i(e)-n),o(t,r(e)+a),t}},function(t,e,n){var r=n(89),i=n(43),o=n(90),s=n(54);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),s(t,i(e)-n),o(t,r(e)+a),t}},function(t,e,n){var r=n(43),i=n(45),o=n(54),s=n(52);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),o(t,r(e)-n),s(t,i(e)-a),t}},function(t,e,n){var r=n(42),i=n(44),o=n(55),s=n(53);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),s(t,i(e)+n),o(t,r(e)+a),t}},function(t,e,n){var r=n(89),i=n(44),o=n(90),s=n(53);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),s(t,i(e)+n),o(t,r(e)+a),t}},function(t,e,n){var r=n(44),i=n(45),o=n(53),s=n(52);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),o(t,r(e)+n),s(t,i(e)-a),t}},function(t,e,n){var r=n(87),i=n(45),o=n(55),s=n(88);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),s(t,r(e)+n),o(t,i(e)-a),t}},function(t,e,n){var r=n(43),i=n(45),o=n(55),s=n(53);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),s(t,r(e)-n),o(t,i(e)-a),t}},function(t,e,n){var r=n(44),i=n(45),o=n(55),s=n(54);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),s(t,r(e)+n),o(t,i(e)-a),t}},function(t,e,n){var r=n(123),i=[];i[r.BOTTOM_CENTER]=n(290),i[r.BOTTOM_LEFT]=n(291),i[r.BOTTOM_RIGHT]=n(292),i[r.CENTER]=n(293),i[r.LEFT_CENTER]=n(295),i[r.RIGHT_CENTER]=n(296),i[r.TOP_CENTER]=n(297),i[r.TOP_LEFT]=n(298),i[r.TOP_RIGHT]=n(299),i[r.LEFT_BOTTOM]=i[r.BOTTOM_LEFT],i[r.LEFT_TOP]=i[r.TOP_LEFT],i[r.RIGHT_BOTTOM]=i[r.BOTTOM_RIGHT],i[r.RIGHT_TOP]=i[r.TOP_RIGHT],t.exports=function(t,e,n,r,o){return i[n](t,e,r,o)}},function(t,e,n){var r=n(42),i=n(87),o=n(55),s=n(88);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),s(t,i(e)+n),o(t,r(e)+a),t}},function(t,e,n){var r=n(42),i=n(43),o=n(55),s=n(53);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),s(t,i(e)-n),o(t,r(e)+a),t}},function(t,e,n){var r=n(42),i=n(44),o=n(55),s=n(54);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),s(t,i(e)+n),o(t,r(e)+a),t}},function(t,e,n){var r=n(294),i=n(87),o=n(89);t.exports=function(t,e,n,s){return void 0===n&&(n=0),void 0===s&&(s=0),r(t,i(e)+n,o(e)+s),t}},function(t,e,n){var r=n(88),i=n(90);t.exports=function(t,e,n){return r(t,e),i(t,n)}},function(t,e,n){var r=n(89),i=n(43),o=n(90),s=n(53);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),s(t,i(e)-n),o(t,r(e)+a),t}},function(t,e,n){var r=n(89),i=n(44),o=n(90),s=n(54);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),s(t,i(e)+n),o(t,r(e)+a),t}},function(t,e,n){var r=n(87),i=n(45),o=n(88),s=n(52);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),o(t,r(e)+n),s(t,i(e)-a),t}},function(t,e,n){var r=n(43),i=n(45),o=n(53),s=n(52);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),o(t,r(e)-n),s(t,i(e)-a),t}},function(t,e,n){var r=n(44),i=n(45),o=n(54),s=n(52);t.exports=function(t,e,n,a){return void 0===n&&(n=0),void 0===a&&(a=0),o(t,r(e)+n),s(t,i(e)-a),t}},function(t,e,n){var r=n(169),i=n(98),o=n(14),s=n(4);t.exports=function(t,e,n){void 0===n&&(n=new s);var a=i(e,0,o.PI2);return r(t,a,n)}},function(t,e,n){var r=n(302),i=n(169),o=n(98),s=n(14);t.exports=function(t,e,n,a){void 0===a&&(a=[]),!e&&n>0&&(e=r(t)/n);for(var u=0;u<e;u++){var c=o(u/e,0,s.PI2);a.push(i(t,c))}return a}},function(t,e){t.exports=function(t){return Math.PI*t.radius*2}},function(t,e,n){var r=n(18),i={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t){return void 0===t&&(t=1),this.alpha=t,this},alpha:{get:function(){return this._alpha},set:function(t){var e=r(t,0,1);this._alpha=e,0===e?this.renderFlags&=-3:this.renderFlags|=2}}};t.exports=i},function(t,e,n){var r=n(35),i={_blendMode:r.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(t){"string"===typeof t&&(t=r[t]),(t|=0)>=-1&&(this._blendMode=t)}},setBlendMode:function(t){return this.blendMode=t,this}};t.exports=i},function(t,e){var n={_depth:0,depth:{get:function(){return this._depth},set:function(t){this.displayList&&this.displayList.queueDepthSort(),this._depth=t}},setDepth:function(t){return void 0===t&&(t=0),this.depth=t,this}};t.exports=n},function(t,e,n){var r=n(171),i=n(130);t.exports=function(t,e,n,o){void 0===o&&(o=[]),!e&&n>0&&(e=i(t)/n);for(var s=0;s<e;s++){var a=s/e;o.push(r(t,a))}return o}},function(t,e,n){var r=n(4);t.exports=function(t,e,n){return void 0===n&&(n=new r),n.x=t.x1+(t.x2-t.x1)*e,n.y=t.y1+(t.y2-t.y1)*e,n}},function(t,e){t.exports=function(t,e,n,r){var i=Math.cos(r),o=Math.sin(r),s=t.x-e,a=t.y-n;return t.x=s*i-a*o+e,t.y=s*o+a*i+n,t}},function(t,e,n){var r=n(310),i=n(311),o={mask:null,setMask:function(t){return this.mask=t,this},clearMask:function(t){return void 0===t&&(t=!1),t&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(t){return void 0===t&&(this.texture||this.shader)&&(t=this),new r(this.scene,t)},createGeometryMask:function(t){return void 0===t&&"Graphics"===this.type&&(t=this),new i(this.scene,t)}};t.exports=o},function(t,e,n){var r=n(0),i=n(22),o=n(91),s=new r({initialize:function(t,e){var n=t.sys.renderer;this.renderer=n,this.bitmapMask=e,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),t.sys.game.events.on(i.CONTEXT_RESTORED,this.createMask,this),n&&n.on(o.RESIZE,this.createMask,this)},createMask:function(){var t=this.renderer;if(t&&t.gl){this.mainTexture&&this.clearMask();var e=t.width,n=t.height,r=0===(e&e-1)&&0===(n&n-1),i=t.gl,o=r?i.REPEAT:i.CLAMP_TO_EDGE,s=i.LINEAR;this.mainTexture=t.createTexture2D(0,s,s,o,o,i.RGBA,null,e,n),this.maskTexture=t.createTexture2D(0,s,s,o,o,i.RGBA,null,e,n),this.mainFramebuffer=t.createFramebuffer(e,n,this.mainTexture,!0),this.maskFramebuffer=t.createFramebuffer(e,n,this.maskTexture,!0)}},clearMask:function(){var t=this.renderer;t&&t.gl&&this.mainTexture&&(t.deleteTexture(this.mainTexture),t.deleteTexture(this.maskTexture),t.deleteFramebuffer(this.mainFramebuffer),t.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(t){this.bitmapMask=t},preRenderWebGL:function(t,e,n){t.pipelines.BITMAPMASK_PIPELINE.beginMask(this,e,n)},postRenderWebGL:function(t,e){t.pipelines.BITMAPMASK_PIPELINE.endMask(this,e)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(o.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});t.exports=s},function(t,e,n){var r=new(n(0))({initialize:function(t,e){this.geometryMask=e,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(t){return this.geometryMask=t,this},setInvertAlpha:function(t){return void 0===t&&(t=!0),this.invertAlpha=t,this},preRenderWebGL:function(t,e,n){var r=t.gl;t.flush(),0===t.maskStack.length&&(r.enable(r.STENCIL_TEST),r.clear(r.STENCIL_BUFFER_BIT),t.maskCount=0),t.currentCameraMask.mask!==this&&(t.currentMask.mask=this),t.maskStack.push({mask:this,camera:n}),this.applyStencil(t,n,!0),t.maskCount++},applyStencil:function(t,e,n){var r=t.gl,i=this.geometryMask,o=t.maskCount;r.colorMask(!1,!1,!1,!1),n?(r.stencilFunc(r.EQUAL,o,255),r.stencilOp(r.KEEP,r.KEEP,r.INCR)):(r.stencilFunc(r.EQUAL,o+1,255),r.stencilOp(r.KEEP,r.KEEP,r.DECR)),i.renderWebGL(t,i,e),t.flush(),r.colorMask(!0,!0,!0,!0),r.stencilOp(r.KEEP,r.KEEP,r.KEEP),n?this.invertAlpha?r.stencilFunc(r.NOTEQUAL,o+1,255):r.stencilFunc(r.EQUAL,o+1,255):this.invertAlpha?r.stencilFunc(r.NOTEQUAL,o,255):r.stencilFunc(r.EQUAL,o,255)},postRenderWebGL:function(t){var e=t.gl;t.maskStack.pop(),t.maskCount--,t.flush();var n=t.currentMask;if(0===t.maskStack.length)n.mask=null,e.disable(e.STENCIL_TEST);else{var r=t.maskStack[t.maskStack.length-1];r.mask.applyStencil(t,r.camera,!1),t.currentCameraMask.mask!==r.mask?(n.mask=r.mask,n.camera=r.camera):n.mask=null}},preRenderCanvas:function(t,e,n){var r=this.geometryMask;t.currentContext.save(),r.renderCanvas(t,r,n,null,null,!0),t.currentContext.clip()},postRenderCanvas:function(t){t.currentContext.restore()},destroy:function(){this.geometryMask=null}});t.exports=r},function(t,e){var n={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(t,e){return void 0===e&&(e=t),this.scrollFactorX=t,this.scrollFactorY=e,this}};t.exports=n},function(t,e,n){var r=n(14),i=n(25),o=n(177),s=n(269),a=n(270),u=n(3),c={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(t){this._scaleX=t,this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(t){this._scaleX=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function(){return this._scaleY},set:function(t){this._scaleY=t,0===t?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function(){return a(this._rotation*r.RAD_TO_DEG)},set:function(t){this.rotation=a(t)*r.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=s(t)}},setPosition:function(t,e,n,r){return void 0===t&&(t=0),void 0===e&&(e=t),void 0===n&&(n=0),void 0===r&&(r=0),this.x=t,this.y=e,this.z=n,this.w=r,this},copyPosition:function(t){return void 0!==t.x&&(this.x=t.x),void 0!==t.y&&(this.y=t.y),void 0!==t.z&&(this.z=t.z),void 0!==t.w&&(this.w=t.w),this},setRandomPosition:function(t,e,n,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=this.scene.sys.scale.width),void 0===r&&(r=this.scene.sys.scale.height),this.x=t+Math.random()*n,this.y=e+Math.random()*r,this},setRotation:function(t){return void 0===t&&(t=0),this.rotation=t,this},setAngle:function(t){return void 0===t&&(t=0),this.angle=t,this},setScale:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.scaleX=t,this.scaleY=e,this},setX:function(t){return void 0===t&&(t=0),this.x=t,this},setY:function(t){return void 0===t&&(t=0),this.y=t,this},setZ:function(t){return void 0===t&&(t=0),this.z=t,this},setW:function(t){return void 0===t&&(t=0),this.w=t,this},getLocalTransformMatrix:function(t){return void 0===t&&(t=new i),t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(t,e){void 0===t&&(t=new i),void 0===e&&(e=new i);var n=this.parentContainer;if(!n)return this.getLocalTransformMatrix(t);for(t.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);n;)e.applyITRS(n.x,n.y,n._rotation,n._scaleX,n._scaleY),e.multiply(t,t),n=n.parentContainer;return t},getLocalPoint:function(t,e,n,r){n||(n=new u),r||(r=this.scene.sys.cameras.main);var i=r.scrollX,s=r.scrollY,a=t+i*this.scrollFactorX-i,c=e+s*this.scrollFactorY-s;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(a,c,n):o(a,c,this.x,this.y,this.rotation,this.scaleX,this.scaleY,n),this._originComponent&&(n.x+=this._displayOriginX,n.y+=this._displayOriginY),n},getParentRotation:function(){for(var t=0,e=this.parentContainer;e;)t+=e.rotation,e=e.parentContainer;return t}};t.exports=c},function(t,e){var n={_visible:!0,visible:{get:function(){return this._visible},set:function(t){t?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(t){return this.visible=t,this}};t.exports=n},function(t,e,n){t.exports={CHANGE_DATA:n(638),CHANGE_DATA_KEY:n(639),DESTROY:n(640),REMOVE_DATA:n(641),SET_DATA:n(642)}},function(t,e,n){var r=n(130),i=n(4);t.exports=function(t,e,n,o){if(void 0===o&&(o=[]),!e&&!n)return o;e?n=Math.round(r(t)/e):e=r(t)/n;for(var s=t.x,a=t.y,u=0,c=0;c<n;c++)switch(o.push(new i(s,a)),u){case 0:(s+=e)>=t.right&&(u=1,a+=s-t.right,s=t.right);break;case 1:(a+=e)>=t.bottom&&(u=2,s-=a-t.bottom,a=t.bottom);break;case 2:(s-=e)<=t.left&&(u=3,a-=t.left-s,s=t.left);break;case 3:(a-=e)<=t.top&&(u=0,a=t.top)}return o}},function(t,e){t.exports=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=[]);var r=Math.round(t.x1),i=Math.round(t.y1),o=Math.round(t.x2),s=Math.round(t.y2),a=Math.abs(o-r),u=Math.abs(s-i),c=r<o?1:-1,h=i<s?1:-1,l=a-u;n.push({x:r,y:i});for(var f=1;r!==o||i!==s;){var d=l<<1;d>-u&&(l-=u,r+=c),d<a&&(l+=a,i+=h),f%e===0&&n.push({x:r,y:i}),f++}return n}},function(t,e){t.exports=function(t,e,n){if(!e.length)return NaN;if(1===e.length)return e[0];var r,i,o=1;if(n){if(t<e[0][n])return e[0];for(;e[o][n]<t;)o++}else for(;e[o]<t;)o++;return o>e.length&&(o=e.length),n?(r=e[o-1][n],(i=e[o][n])-t<=t-r?e[o]:e[o-1]):(r=e[o-1],(i=e[o])-t<=t-r?i:r)}},function(t,e,n){var r=new(n(0))({initialize:function(t,e,n,r,i){void 0===i&&(i=!1),this.textureKey=t,this.textureFrame=e,this.index=n,this.frame=r,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=i},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});t.exports=r},function(t,e){t.exports=function(t){var e=/\D/g;return t.sort((function(t,n){return parseInt(t.replace(e,""),10)-parseInt(n.replace(e,""),10)})),t}},function(t,e,n){var r=n(185),i=n(0),o=n(102),s=n(9),a=n(132),u=n(22),c=n(2),h=n(6),l=n(186),f=n(322),d=new i({Extends:s,initialize:function(t){s.call(this),this.game=t,this.textureManager=null,this.globalTimeScale=1,this.anims=new o,this.mixes=new o,this.paused=!1,this.name="AnimationManager",t.events.once(u.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(u.DESTROY,this.destroy,this)},addMix:function(t,e,n){var r=this.anims,i=this.mixes,o="string"===typeof t?t:t.key,s="string"===typeof e?e:e.key;if(r.has(o)&&r.has(s)){var a=i.get(o);a||(a={}),a[s]=n,i.set(o,a)}return this},removeMix:function(t,e){var n=this.mixes,r="string"===typeof t?t:t.key,i=n.get(r);if(i)if(e){var o="string"===typeof e?e:e.key;i.hasOwnProperty(o)&&delete i[o]}else e||n.delete(r);return this},getMix:function(t,e){var n=this.mixes,r="string"===typeof t?t:t.key,i="string"===typeof e?e:e.key,o=n.get(r);return o&&o.hasOwnProperty(i)?o[i]:0},add:function(t,e){return this.anims.has(t)?(console.warn("Animation key exists: "+t),this):(e.key=t,this.anims.set(t,e),this.emit(a.ADD_ANIMATION,t,e),this)},exists:function(t){return this.anims.has(t)},createFromAseprite:function(t,e){var n=[],r=this.game.cache.json.get(t);if(!r)return n;var i=this,o=h(r,"meta",null),s=h(r,"frames",null);return o&&s&&h(o,"frameTags",[]).forEach((function(r){var o=[],a=c(r,"name",null),u=c(r,"from",0),h=c(r,"to",0),l=c(r,"direction","forward");if(a&&(!e||e&&e.indexOf(a)>-1)){for(var f=[],d=Number.MAX_SAFE_INTEGER,p=u;p<=h;p++){var v=p.toString(),g=s[v];if(g){var m=c(g,"duration",Number.MAX_SAFE_INTEGER);m<d&&(d=m),f.push({frame:v,duration:m})}}f.forEach((function(e){o.push({key:t,frame:e.frame,duration:d-e.duration})}));var y=d*o.length;"reverse"===l&&(o=o.reverse());var b={key:a,frames:o,duration:y,yoyo:"pingpong"===l},w=i.create(b);w&&n.push(w)}})),n},create:function(t){var e=t.key,n=!1;return e&&((n=this.get(e))||(n=new r(this,e,t),this.anims.set(e,n),this.emit(a.ADD_ANIMATION,e,n))),n},fromJSON:function(t,e){void 0===e&&(e=!1),e&&this.anims.clear(),"string"===typeof t&&(t=JSON.parse(t));var n=[];if(t.hasOwnProperty("anims")&&Array.isArray(t.anims)){for(var r=0;r<t.anims.length;r++)n.push(this.create(t.anims[r]));t.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=t.globalTimeScale)}else t.hasOwnProperty("key")&&"frame"===t.type&&n.push(this.create(t));return n},generateFrameNames:function(t,e){var n,r=h(e,"prefix",""),i=h(e,"start",0),o=h(e,"end",0),s=h(e,"suffix",""),a=h(e,"zeroPad",0),u=h(e,"outputArray",[]),c=h(e,"frames",!1),d=this.textureManager.get(t);if(!d)return u;if(e)for(c||(c=f(i,o)),n=0;n<c.length;n++){var p=r+l(c[n],a,"0",1)+s;d.has(p)?u.push({key:t,frame:p}):console.warn("generateFrameNames: Frame missing: "+p+" from texture: "+t)}else for(c=d.getFrameNames(),n=0;n<c.length;n++)u.push({key:t,frame:c[n]});return u},generateFrameNumbers:function(t,e){var n=h(e,"start",0),r=h(e,"end",-1),i=h(e,"first",!1),o=h(e,"outputArray",[]),s=h(e,"frames",!1),a=this.textureManager.get(t);if(!a)return o;i&&a.has(i)&&o.push({key:t,frame:i}),s||(-1===r&&(r=a.frameTotal-2),s=f(n,r));for(var u=0;u<s.length;u++)a.has(s[u])?o.push({key:t,frame:s[u]}):console.warn("generateFrameNumbers: Frame "+u+" missing from texture: "+t);return o},get:function(t){return this.anims.get(t)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(a.PAUSE_ALL)),this},play:function(t,e){Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++)e[n].anims.play(t);return this},staggerPlay:function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=!0),Array.isArray(e)||(e=[e]);var i=e.length;r||i--;for(var o=0;o<e.length;o++){var s=n<0?Math.abs(n)*(i-o):n*o;e[o].anims.playAfterDelay(t,s)}return this},remove:function(t){var e=this.get(t);return e&&(this.emit(a.REMOVE_ANIMATION,t,e),this.anims.delete(t),this.removeMix(t)),e},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(a.RESUME_ALL)),this},toJSON:function(t){var e={anims:[],globalTimeScale:this.globalTimeScale};return void 0!==t&&""!==t?e.anims.push(this.anims.get(t).toJSON()):this.anims.each((function(t,n){e.anims.push(n.toJSON())})),e},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});t.exports=d},function(t,e){t.exports=function(t,e,n,r){var i,o=[],s=!1;if((n||r)&&(s=!0,n||(n=""),r||(r="")),e<t)for(i=t;i>=e;i--)s?o.push(n+i.toString()+r):o.push(i);else for(i=t;i<=e;i++)s?o.push(n+i.toString()+r):o.push(i);return o}},function(t,e,n){var r=n(0),i=n(102),o=n(9),s=n(324),a=new r({initialize:function(){this.entries=new i,this.events=new o},add:function(t,e){return this.entries.set(t,e),this.events.emit(s.ADD,this,t,e),this},has:function(t){return this.entries.has(t)},exists:function(t){return this.entries.has(t)},get:function(t){return this.entries.get(t)},remove:function(t){var e=this.get(t);return e&&(this.entries.delete(t),this.events.emit(s.REMOVE,this,t,e.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});t.exports=a},function(t,e,n){t.exports={ADD:n(736),REMOVE:n(737)}},function(t,e,n){var r=n(323),i=n(0),o=n(22),s=new i({initialize:function(t){this.game=t,this.binary=new r,this.bitmapFont=new r,this.json=new r,this.physics=new r,this.shader=new r,this.audio=new r,this.video=new r,this.text=new r,this.html=new r,this.obj=new r,this.tilemap=new r,this.xml=new r,this.custom={},this.game.events.once(o.DESTROY,this.destroy,this)},addCustom:function(t){return this.custom.hasOwnProperty(t)||(this.custom[t]=new r),this.custom[t]},destroy:function(){for(var t=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],e=0;e<t.length;e++)this[t[e]].destroy(),this[t[e]]=null;for(var n in this.custom)this.custom[n].destroy();this.custom=null,this.game=null}});t.exports=s},function(t,e,n){var r=n(133),i=n(190),o=n(18),s=n(0),a=n(11),u=n(333),c=n(37),h=n(135),l=n(10),f=n(3),d=new s({Extends:r,Mixins:[a.Flip,a.Tint,a.Pipeline],initialize:function(t,e,n,i){r.call(this,t,e,n,i),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new u.Fade(this),this.flashEffect=new u.Flash(this),this.shakeEffect=new u.Shake(this),this.panEffect=new u.Pan(this),this.rotateToEffect=new u.RotateTo(this),this.zoomEffect=new u.Zoom(this),this.lerp=new f(1,1),this.followOffset=new f,this.deadzone=null,this._follow=null},setDeadzone:function(t,e){if(void 0===t)this.deadzone=null;else{if(this.deadzone?(this.deadzone.width=t,this.deadzone.height=e):this.deadzone=new l(0,0,t,e),this._follow){var n=this.width/2,r=this.height/2,o=this._follow.x-this.followOffset.x,s=this._follow.y-this.followOffset.y;this.midPoint.set(o,s),this.scrollX=o-n,this.scrollY=s-r}i(this.deadzone,this.midPoint.x,this.midPoint.y)}return this},fadeIn:function(t,e,n,r,i,o){return this.fadeEffect.start(!1,t,e,n,r,!0,i,o)},fadeOut:function(t,e,n,r,i,o){return this.fadeEffect.start(!0,t,e,n,r,!0,i,o)},fadeFrom:function(t,e,n,r,i,o,s){return this.fadeEffect.start(!1,t,e,n,r,i,o,s)},fade:function(t,e,n,r,i,o,s){return this.fadeEffect.start(!0,t,e,n,r,i,o,s)},flash:function(t,e,n,r,i,o,s){return this.flashEffect.start(t,e,n,r,i,o,s)},shake:function(t,e,n,r,i){return this.shakeEffect.start(t,e,n,r,i)},pan:function(t,e,n,r,i,o,s){return this.panEffect.start(t,e,n,r,i,o,s)},rotateTo:function(t,e,n,r,i,o,s){return this.rotateToEffect.start(t,e,n,r,i,o,s)},zoomTo:function(t,e,n,r,i,o){return this.zoomEffect.start(t,e,n,r,i,o)},preRender:function(){this.renderList.length=0;var t=this.width,e=this.height,n=.5*t,r=.5*e,o=this.zoom,s=this.matrix,a=t*this.originX,u=e*this.originY,l=this._follow,f=this.deadzone,d=this.scrollX,p=this.scrollY;f&&i(f,this.midPoint.x,this.midPoint.y);var v=!1;if(l&&!this.panEffect.isRunning){var g=l.x-this.followOffset.x,m=l.y-this.followOffset.y;f?(g<f.x?d=h(d,d-(f.x-g),this.lerp.x):g>f.right&&(d=h(d,d+(g-f.right),this.lerp.x)),m<f.y?p=h(p,p-(f.y-m),this.lerp.y):m>f.bottom&&(p=h(p,p+(m-f.bottom),this.lerp.y))):(d=h(d,g-a,this.lerp.x),p=h(p,m-u,this.lerp.y)),v=!0}this.useBounds&&(d=this.clampX(d),p=this.clampY(p)),this.roundPixels&&(a=Math.round(a),u=Math.round(u),d=Math.round(d),p=Math.round(p)),this.scrollX=d,this.scrollY=p;var y=d+n,b=p+r;this.midPoint.set(y,b);var w=t/o,x=e/o,_=y-w/2,T=b-x/2;this.roundPixels&&(_=Math.round(_),T=Math.round(T)),this.worldView.setTo(_,T,w,x),s.applyITRS(this.x+a,this.y+u,this.rotation,o,o),s.translate(-a,-u),this.shakeEffect.preRender(),v&&this.emit(c.FOLLOW_UPDATE,this,l)},setLerp:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=t),this.lerp.set(t,e),this},setFollowOffset:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),this.followOffset.set(t,e),this},startFollow:function(t,e,n,r,i,s){void 0===e&&(e=!1),void 0===n&&(n=1),void 0===r&&(r=n),void 0===i&&(i=0),void 0===s&&(s=i),this._follow=t,this.roundPixels=e,n=o(n,0,1),r=o(r,0,1),this.lerp.set(n,r),this.followOffset.set(i,s);var a=this.width/2,u=this.height/2,c=t.x-i,h=t.y-s;return this.midPoint.set(c,h),this.scrollX=c-a,this.scrollY=h-u,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(t,e){this.visible&&(this.rotateToEffect.update(t,e),this.panEffect.update(t,e),this.zoomEffect.update(t,e),this.shakeEffect.update(t,e),this.flashEffect.update(t,e),this.fadeEffect.update(t,e))},destroy:function(){this.resetFX(),r.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});t.exports=d},function(t,e,n){var r=n(38);t.exports=function(t){var e=new r;t=t.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,n,r){return e+e+n+n+r+r}));var n=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);if(n){var i=parseInt(n[1],16),o=parseInt(n[2],16),s=parseInt(n[3],16);e.setTo(i,o,s)}return e}},function(t,e){t.exports=function(t,e,n,r){return r<<24|t<<16|e<<8|n}},function(t,e){t.exports=function(t,e,n,r){void 0===r&&(r={h:0,s:0,v:0}),t/=255,e/=255,n/=255;var i=Math.min(t,e,n),o=Math.max(t,e,n),s=o-i,a=0,u=0===o?0:s/o,c=o;return o!==i&&(o===t?a=(e-n)/s+(e<n?6:0):o===e?a=(n-t)/s+2:o===n&&(a=(t-e)/s+4),a/=6),r.hasOwnProperty("_h")?(r._h=a,r._s=u,r._v=c):(r.h=a,r.s=u,r.v=c),r}},function(t,e){t.exports=function(t){return t>16777215?{a:t>>>24,r:t>>16&255,g:t>>8&255,b:255&t}:{a:255,r:t>>16&255,g:t>>8&255,b:255&t}}},function(t,e,n){var r=n(38);t.exports=function(t){return new r(t.r,t.g,t.b,t.a)}},function(t,e,n){var r=n(38);t.exports=function(t){var e=new r,n=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(t.toLowerCase());if(n){var i=parseInt(n[1],10),o=parseInt(n[2],10),s=parseInt(n[3],10),a=void 0!==n[4]?parseFloat(n[4]):1;e.setTo(i,o,s,255*a)}return e}},function(t,e,n){t.exports={Fade:n(761),Flash:n(762),Pan:n(763),Shake:n(796),RotateTo:n(797),Zoom:n(798)}},function(t,e,n){t.exports={In:n(764),Out:n(765),InOut:n(766)}},function(t,e,n){t.exports={In:n(767),Out:n(768),InOut:n(769)}},function(t,e,n){t.exports={In:n(770),Out:n(771),InOut:n(772)}},function(t,e,n){t.exports={In:n(773),Out:n(774),InOut:n(775)}},function(t,e,n){t.exports={In:n(776),Out:n(777),InOut:n(778)}},function(t,e,n){t.exports={In:n(779),Out:n(780),InOut:n(781)}},function(t,e,n){t.exports=n(782)},function(t,e,n){t.exports={In:n(783),Out:n(784),InOut:n(785)}},function(t,e,n){t.exports={In:n(786),Out:n(787),InOut:n(788)}},function(t,e,n){t.exports={In:n(789),Out:n(790),InOut:n(791)}},function(t,e,n){t.exports={In:n(792),Out:n(793),InOut:n(794)}},function(t,e,n){t.exports=n(795)},function(t,e,n){var r=n(0),i=n(33),o=n(347),s=n(2),a=n(6),u=n(7),c=n(193),h=n(1),l=n(197),f=n(187),d=new r({initialize:function(t){void 0===t&&(t={}),this.width=a(t,"width",1024),this.height=a(t,"height",768),this.zoom=a(t,"zoom",1),this.parent=a(t,"parent",void 0),this.scaleMode=a(t,"scaleMode",0),this.expandParent=a(t,"expandParent",!0),this.autoRound=a(t,"autoRound",!1),this.autoCenter=a(t,"autoCenter",0),this.resizeInterval=a(t,"resizeInterval",500),this.fullscreenTarget=a(t,"fullscreenTarget",null),this.minWidth=a(t,"minWidth",0),this.maxWidth=a(t,"maxWidth",0),this.minHeight=a(t,"minHeight",0),this.maxHeight=a(t,"maxHeight",0);var e=a(t,"scale",null);e&&(this.width=a(e,"width",this.width),this.height=a(e,"height",this.height),this.zoom=a(e,"zoom",this.zoom),this.parent=a(e,"parent",this.parent),this.scaleMode=a(e,"mode",this.scaleMode),this.expandParent=a(e,"expandParent",this.expandParent),this.autoRound=a(e,"autoRound",this.autoRound),this.autoCenter=a(e,"autoCenter",this.autoCenter),this.resizeInterval=a(e,"resizeInterval",this.resizeInterval),this.fullscreenTarget=a(e,"fullscreenTarget",this.fullscreenTarget),this.minWidth=a(e,"min.width",this.minWidth),this.maxWidth=a(e,"max.width",this.maxWidth),this.minHeight=a(e,"min.height",this.minHeight),this.maxHeight=a(e,"max.height",this.maxHeight)),this.renderType=a(t,"type",i.AUTO),this.canvas=a(t,"canvas",null),this.context=a(t,"context",null),this.canvasStyle=a(t,"canvasStyle",null),this.customEnvironment=a(t,"customEnvironment",!1),this.sceneConfig=a(t,"scene",null),this.seed=a(t,"seed",[(Date.now()*Math.random()).toString()]),c.RND=new c.RandomDataGenerator(this.seed),this.gameTitle=a(t,"title",""),this.gameURL=a(t,"url","https://phaser.io"),this.gameVersion=a(t,"version",""),this.autoFocus=a(t,"autoFocus",!0),this.domCreateContainer=a(t,"dom.createContainer",!1),this.domBehindCanvas=a(t,"dom.behindCanvas",!1),this.domPointerEvents=a(t,"dom.pointerEvents","none"),this.inputKeyboard=a(t,"input.keyboard",!0),this.inputKeyboardEventTarget=a(t,"input.keyboard.target",window),this.inputKeyboardCapture=a(t,"input.keyboard.capture",[]),this.inputMouse=a(t,"input.mouse",!0),this.inputMouseEventTarget=a(t,"input.mouse.target",null),this.inputMousePreventDefaultDown=a(t,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=a(t,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=a(t,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=a(t,"input.mouse.preventDefaultWheel",!0),this.inputTouch=a(t,"input.touch",o.input.touch),this.inputTouchEventTarget=a(t,"input.touch.target",null),this.inputTouchCapture=a(t,"input.touch.capture",!0),this.inputActivePointers=a(t,"input.activePointers",1),this.inputSmoothFactor=a(t,"input.smoothFactor",0),this.inputWindowEvents=a(t,"input.windowEvents",!0),this.inputGamepad=a(t,"input.gamepad",!1),this.inputGamepadEventTarget=a(t,"input.gamepad.target",window),this.disableContextMenu=a(t,"disableContextMenu",!1),this.audio=a(t,"audio",{}),this.hideBanner=!1===a(t,"banner",null),this.hidePhaser=a(t,"banner.hidePhaser",!1),this.bannerTextColor=a(t,"banner.text","#ffffff"),this.bannerBackgroundColor=a(t,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]),""===this.gameTitle&&this.hidePhaser&&(this.hideBanner=!0),this.fps=a(t,"fps",null);var n=a(t,"render",t);this.pipeline=a(n,"pipeline",null),this.antialias=a(n,"antialias",!0),this.antialiasGL=a(n,"antialiasGL",!0),this.mipmapFilter=a(n,"mipmapFilter","LINEAR"),this.desynchronized=a(n,"desynchronized",!1),this.roundPixels=a(n,"roundPixels",!1),this.pixelArt=a(n,"pixelArt",1!==this.zoom),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=a(n,"transparent",!1),this.clearBeforeRender=a(n,"clearBeforeRender",!0),this.preserveDrawingBuffer=a(n,"preserveDrawingBuffer",!1),this.premultipliedAlpha=a(n,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=a(n,"failIfMajorPerformanceCaveat",!1),this.powerPreference=a(n,"powerPreference","default"),this.batchSize=a(n,"batchSize",4096),this.maxTextures=a(n,"maxTextures",-1),this.maxLights=a(n,"maxLights",10);var r=a(t,"backgroundColor",0);this.backgroundColor=f(r),this.transparent&&(this.backgroundColor=f(0),this.backgroundColor.alpha=0),this.preBoot=a(t,"callbacks.preBoot",h),this.postBoot=a(t,"callbacks.postBoot",h),this.physics=a(t,"physics",{}),this.defaultPhysicsSystem=a(this.physics,"default",!1),this.loaderBaseURL=a(t,"loader.baseURL",""),this.loaderPath=a(t,"loader.path","");var d=o.os.android?6:32;this.loaderMaxParallelDownloads=a(t,"loader.maxParallelDownloads",d),this.loaderCrossOrigin=a(t,"loader.crossOrigin",void 0),this.loaderResponseType=a(t,"loader.responseType",""),this.loaderAsync=a(t,"loader.async",!0),this.loaderUser=a(t,"loader.user",""),this.loaderPassword=a(t,"loader.password",""),this.loaderTimeout=a(t,"loader.timeout",0),this.loaderWithCredentials=a(t,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var p=a(t,"plugins",null),v=l.DefaultScene;p&&(Array.isArray(p)?this.defaultPlugins=p:u(p)&&(this.installGlobalPlugins=s(p,"global",[]),this.installScenePlugins=s(p,"scene",[]),Array.isArray(p.default)?v=p.default:Array.isArray(p.defaultMerge)&&(v=v.concat(p.defaultMerge)))),this.defaultPlugins=v;var g="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=a(t,"images.default",g+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=a(t,"images.missing",g+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=a(t,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=i.WEBGL:window.FORCE_CANVAS&&(this.renderType=i.CANVAS))}});t.exports=d},function(t,e,n){t.exports={os:n(105),browser:n(136),features:n(191),input:n(808),audio:n(809),video:n(810),fullscreen:n(811),canvasFeatures:n(348)}},function(t,e,n){var r=n(31),i={supportInverseAlpha:!1,supportNewBlendModes:!1};t.exports=("function"!==typeof importScripts&&void 0!==document&&(i.supportNewBlendModes=function(){var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",e="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",n=new Image;return n.onload=function(){var o=new Image;o.onload=function(){var t=r.create(o,6,1).getContext("2d");if(t.globalCompositeOperation="multiply",t.drawImage(n,0,0),t.drawImage(o,2,0),!t.getImageData(2,0,1,1))return!1;var e=t.getImageData(2,0,1,1).data;r.remove(o),i.supportNewBlendModes=255===e[0]&&0===e[1]&&0===e[2]},o.src=t+"/wCKxvRF"+e},n.src=t+"AP804Oa6"+e,!1}(),i.supportInverseAlpha=function(){var t=r.create(this,2,1).getContext("2d");t.fillStyle="rgba(10, 20, 30, 0.5)",t.fillRect(0,0,1,1);var e=t.getImageData(0,0,1,1);if(null===e)return!1;t.putImageData(e,1,0);var n=t.getImageData(1,0,1,1);return n.data[0]===e.data[0]&&n.data[1]===e.data[1]&&n.data[2]===e.data[2]&&n.data[3]===e.data[3]}()),i)},function(t,e){t.exports=function(t,e,n,r){return Math.atan2(r-e,n-t)}},function(t,e){t.exports=function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)}},function(t,e){t.exports=function(t){return(t%=2*Math.PI)>=0?t:t+2*Math.PI}},function(t,e){t.exports=function(t,e){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}},function(t,e){t.exports=function(t,e,n,r){var i=t-n,o=e-r;return i*i+o*o}},function(t,e){t.exports=function(t,e,n){return void 0===n&&(n=1e-4),t>e-n}},function(t,e){t.exports=function(t,e,n){return void 0===n&&(n=1e-4),t<e+n}},function(t,e,n){var r=n(357);t.exports=function(t,e){return r(t)/r(e)/r(t-e)}},function(t,e){t.exports=function(t){if(0===t)return 1;for(var e=t;--t;)e*=t;return e}},function(t,e){t.exports=function(t,e,n,r,i){return function(t,e){var n=1-t;return n*n*n*e}(t,e)+function(t,e){var n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,r)+function(t,e){return t*t*t*e}(t,i)}},function(t,e){t.exports=function(t,e,n,r){return function(t,e){var n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,r)}},function(t,e,n){var r=n(184);t.exports=function(t,e,n){return e+(n-e)*r(t,0,1)}},function(t,e){t.exports=function(t){var e=Math.log(t)/.6931471805599453;return 1<<Math.ceil(e)}},function(t,e){t.exports=function(t,e){var n=t.x,r=t.y;return t.x=n*Math.cos(e)-r*Math.sin(e),t.y=n*Math.sin(e)+r*Math.cos(e),t}},function(t,e){t.exports=function(t){return t>0?Math.ceil(t):Math.floor(t)}},function(t,e,n){var r=new(n(0))({initialize:function(t){this.val=new Float32Array(9),t?this.copy(t):this.identity()},clone:function(){return new r(this)},set:function(t){return this.copy(t)},copy:function(t){var e=this.val,n=t.val;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},fromMat4:function(t){var e=t.val,n=this.val;return n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=e[4],n[4]=e[5],n[5]=e[6],n[6]=e[8],n[7]=e[9],n[8]=e[10],this},fromArray:function(t){var e=this.val;return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this},identity:function(){var t=this.val;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},transpose:function(){var t=this.val,e=t[1],n=t[2],r=t[5];return t[1]=t[3],t[2]=t[6],t[3]=e,t[5]=t[7],t[6]=n,t[7]=r,this},invert:function(){var t=this.val,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],c=t[8],h=c*o-s*u,l=-c*i+s*a,f=u*i-o*a,d=e*h+n*l+r*f;return d?(d=1/d,t[0]=h*d,t[1]=(-c*n+r*u)*d,t[2]=(s*n-r*o)*d,t[3]=l*d,t[4]=(c*e-r*a)*d,t[5]=(-s*e+r*i)*d,t[6]=f*d,t[7]=(-u*e+n*a)*d,t[8]=(o*e-n*i)*d,this):null},adjoint:function(){var t=this.val,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],c=t[8];return t[0]=o*c-s*u,t[1]=r*u-n*c,t[2]=n*s-r*o,t[3]=s*a-i*c,t[4]=e*c-r*a,t[5]=r*i-e*s,t[6]=i*u-o*a,t[7]=n*a-e*u,t[8]=e*o-n*i,this},determinant:function(){var t=this.val,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],c=t[8];return e*(c*o-s*u)+n*(-c*i+s*a)+r*(u*i-o*a)},multiply:function(t){var e=this.val,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=e[6],c=e[7],h=e[8],l=t.val,f=l[0],d=l[1],p=l[2],v=l[3],g=l[4],m=l[5],y=l[6],b=l[7],w=l[8];return e[0]=f*n+d*o+p*u,e[1]=f*r+d*s+p*c,e[2]=f*i+d*a+p*h,e[3]=v*n+g*o+m*u,e[4]=v*r+g*s+m*c,e[5]=v*i+g*a+m*h,e[6]=y*n+b*o+w*u,e[7]=y*r+b*s+w*c,e[8]=y*i+b*a+w*h,this},translate:function(t){var e=this.val,n=t.x,r=t.y;return e[6]=n*e[0]+r*e[3]+e[6],e[7]=n*e[1]+r*e[4]+e[7],e[8]=n*e[2]+r*e[5]+e[8],this},rotate:function(t){var e=this.val,n=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],u=Math.sin(t),c=Math.cos(t);return e[0]=c*n+u*o,e[1]=c*r+u*s,e[2]=c*i+u*a,e[3]=c*o-u*n,e[4]=c*s-u*r,e[5]=c*a-u*i,this},scale:function(t){var e=this.val,n=t.x,r=t.y;return e[0]=n*e[0],e[1]=n*e[1],e[2]=n*e[2],e[3]=r*e[3],e[4]=r*e[4],e[5]=r*e[5],this},fromQuat:function(t){var e=t.x,n=t.y,r=t.z,i=t.w,o=e+e,s=n+n,a=r+r,u=e*o,c=e*s,h=e*a,l=n*s,f=n*a,d=r*a,p=i*o,v=i*s,g=i*a,m=this.val;return m[0]=1-(l+d),m[3]=c+g,m[6]=h-v,m[1]=c-g,m[4]=1-(u+d),m[7]=f+p,m[2]=h+v,m[5]=f-p,m[8]=1-(u+l),this},normalFromMat4:function(t){var e=t.val,n=this.val,r=e[0],i=e[1],o=e[2],s=e[3],a=e[4],u=e[5],c=e[6],h=e[7],l=e[8],f=e[9],d=e[10],p=e[11],v=e[12],g=e[13],m=e[14],y=e[15],b=r*u-i*a,w=r*c-o*a,x=r*h-s*a,_=i*c-o*u,T=i*h-s*u,E=o*h-s*c,S=l*g-f*v,k=l*m-d*v,A=l*y-p*v,O=f*m-d*g,C=f*y-p*g,P=d*y-p*m,I=b*P-w*C+x*O+_*A-T*k+E*S;return I?(I=1/I,n[0]=(u*P-c*C+h*O)*I,n[1]=(c*A-a*P-h*k)*I,n[2]=(a*C-u*A+h*S)*I,n[3]=(o*C-i*P-s*O)*I,n[4]=(r*P-o*A+s*k)*I,n[5]=(i*A-r*C-s*S)*I,n[6]=(g*E-m*T+y*_)*I,n[7]=(m*x-v*E-y*w)*I,n[8]=(v*T-g*x+y*b)*I,this):null}});t.exports=r},function(t,e,n){var r=n(0),i=n(364),o=n(1),s=n(39),a=1e-6,u=new Int8Array([1,2,0]),c=new Float32Array([0,0,0]),h=new s(1,0,0),l=new s(0,1,0),f=new s,d=new i,p=new r({initialize:function(t,e,n,r){this.onChangeCallback=o,this.set(t,e,n,r)},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback(this)}},copy:function(t){return this.set(t)},set:function(t,e,n,r,i){return void 0===i&&(i=!0),"object"===typeof t?(this._x=t.x||0,this._y=t.y||0,this._z=t.z||0,this._w=t.w||0):(this._x=t||0,this._y=e||0,this._z=n||0,this._w=r||0),i&&this.onChangeCallback(this),this},add:function(t){return this._x+=t.x,this._y+=t.y,this._z+=t.z,this._w+=t.w,this.onChangeCallback(this),this},subtract:function(t){return this._x-=t.x,this._y-=t.y,this._z-=t.z,this._w-=t.w,this.onChangeCallback(this),this},scale:function(t){return this._x*=t,this._y*=t,this._z*=t,this._w*=t,this.onChangeCallback(this),this},length:function(){var t=this.x,e=this.y,n=this.z,r=this.w;return Math.sqrt(t*t+e*e+n*n+r*r)},lengthSq:function(){var t=this.x,e=this.y,n=this.z,r=this.w;return t*t+e*e+n*n+r*r},normalize:function(){var t=this.x,e=this.y,n=this.z,r=this.w,i=t*t+e*e+n*n+r*r;return i>0&&(i=1/Math.sqrt(i),this._x=t*i,this._y=e*i,this._z=n*i,this._w=r*i),this.onChangeCallback(this),this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lerp:function(t,e){void 0===e&&(e=0);var n=this.x,r=this.y,i=this.z,o=this.w;return this.set(n+e*(t.x-n),r+e*(t.y-r),i+e*(t.z-i),o+e*(t.w-o))},rotationTo:function(t,e){var n=t.x*e.x+t.y*e.y+t.z*e.z;return n<-.999999?(f.copy(h).cross(t).length()<a&&f.copy(l).cross(t),f.normalize(),this.setAxisAngle(f,Math.PI)):n>.999999?this.set(0,0,0,1):(f.copy(t).cross(e),this._x=f.x,this._y=f.y,this._z=f.z,this._w=1+n,this.normalize())},setAxes:function(t,e,n){var r=d.val;return r[0]=e.x,r[3]=e.y,r[6]=e.z,r[1]=n.x,r[4]=n.y,r[7]=n.z,r[2]=-t.x,r[5]=-t.y,r[8]=-t.z,this.fromMat3(d).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(t,e){e*=.5;var n=Math.sin(e);return this.set(n*t.x,n*t.y,n*t.z,Math.cos(e))},multiply:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,o=t.x,s=t.y,a=t.z,u=t.w;return this.set(e*u+i*o+n*a-r*s,n*u+i*s+r*o-e*a,r*u+i*a+e*s-n*o,i*u-e*o-n*s-r*a)},slerp:function(t,e){var n=this.x,r=this.y,i=this.z,o=this.w,s=t.x,u=t.y,c=t.z,h=t.w,l=n*s+r*u+i*c+o*h;l<0&&(l=-l,s=-s,u=-u,c=-c,h=-h);var f=1-e,d=e;if(1-l>a){var p=Math.acos(l),v=Math.sin(p);f=Math.sin((1-e)*p)/v,d=Math.sin(e*p)/v}return this.set(f*n+d*s,f*r+d*u,f*i+d*c,f*o+d*h)},invert:function(){var t=this.x,e=this.y,n=this.z,r=this.w,i=t*t+e*e+n*n+r*r,o=i?1/i:0;return this.set(-t*o,-e*o,-n*o,r*o)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(t){t*=.5;var e=this.x,n=this.y,r=this.z,i=this.w,o=Math.sin(t),s=Math.cos(t);return this.set(e*s+i*o,n*s+r*o,r*s-n*o,i*s-e*o)},rotateY:function(t){t*=.5;var e=this.x,n=this.y,r=this.z,i=this.w,o=Math.sin(t),s=Math.cos(t);return this.set(e*s-r*o,n*s+i*o,r*s+e*o,i*s-n*o)},rotateZ:function(t){t*=.5;var e=this.x,n=this.y,r=this.z,i=this.w,o=Math.sin(t),s=Math.cos(t);return this.set(e*s+n*o,n*s-e*o,r*s+i*o,i*s-r*o)},calculateW:function(){var t=this.x,e=this.y,n=this.z;return this.w=-Math.sqrt(1-t*t-e*e-n*n),this},setFromEuler:function(t,e){var n=t.x/2,r=t.y/2,i=t.z/2,o=Math.cos(n),s=Math.cos(r),a=Math.cos(i),u=Math.sin(n),c=Math.sin(r),h=Math.sin(i);switch(t.order){case"XYZ":this.set(u*s*a+o*c*h,o*c*a-u*s*h,o*s*h+u*c*a,o*s*a-u*c*h,e);break;case"YXZ":this.set(u*s*a+o*c*h,o*c*a-u*s*h,o*s*h-u*c*a,o*s*a+u*c*h,e);break;case"ZXY":this.set(u*s*a-o*c*h,o*c*a+u*s*h,o*s*h+u*c*a,o*s*a-u*c*h,e);break;case"ZYX":this.set(u*s*a-o*c*h,o*c*a+u*s*h,o*s*h-u*c*a,o*s*a+u*c*h,e);break;case"YZX":this.set(u*s*a+o*c*h,o*c*a+u*s*h,o*s*h-u*c*a,o*s*a-u*c*h,e);break;case"XZY":this.set(u*s*a-o*c*h,o*c*a-u*s*h,o*s*h+u*c*a,o*s*a+u*c*h,e)}return this},setFromRotationMatrix:function(t){var e,n=t.val,r=n[0],i=n[4],o=n[8],s=n[1],a=n[5],u=n[9],c=n[2],h=n[6],l=n[10],f=r+a+l;return f>0?(e=.5/Math.sqrt(f+1),this.set((h-u)*e,(o-c)*e,(s-i)*e,.25/e)):r>a&&r>l?(e=2*Math.sqrt(1+r-a-l),this.set(.25*e,(i+s)/e,(o+c)/e,(h-u)/e)):a>l?(e=2*Math.sqrt(1+a-r-l),this.set((i+s)/e,.25*e,(u+h)/e,(o-c)/e)):(e=2*Math.sqrt(1+l-r-a),this.set((o+c)/e,(u+h)/e,.25*e,(s-i)/e)),this},fromMat3:function(t){var e,n=t.val,r=n[0]+n[4]+n[8];if(r>0)e=Math.sqrt(r+1),this.w=.5*e,e=.5/e,this._x=(n[7]-n[5])*e,this._y=(n[2]-n[6])*e,this._z=(n[3]-n[1])*e;else{var i=0;n[4]>n[0]&&(i=1),n[8]>n[3*i+i]&&(i=2);var o=u[i],s=u[o];e=Math.sqrt(n[3*i+i]-n[3*o+o]-n[3*s+s]+1),c[i]=.5*e,e=.5/e,c[o]=(n[3*o+i]+n[3*i+o])*e,c[s]=(n[3*s+i]+n[3*i+s])*e,this._x=c[0],this._y=c[1],this._z=c[2],this._w=(n[3*s+o]-n[3*o+s])*e}return this.onChangeCallback(this),this}});t.exports=p},function(t,e,n){var r=n(367),i=n(31),o=n(33),s=n(191);t.exports=function(t){var e=t.config;if((e.customEnvironment||e.canvas)&&e.renderType===o.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!e.customEnvironment&&!e.canvas&&e.renderType!==o.HEADLESS)if(e.renderType===o.CANVAS||e.renderType!==o.CANVAS&&!s.webGL){if(!s.canvas)throw new Error("Cannot create Canvas or WebGL context, aborting.");e.renderType=o.CANVAS}else e.renderType=o.WEBGL;e.antialias||i.disableSmoothing();var a,u,c=t.scale.baseSize,h=c.width,l=c.height;e.canvas?(t.canvas=e.canvas,t.canvas.width=h,t.canvas.height=l):t.canvas=i.create(t,h,l,e.renderType),e.canvasStyle&&(t.canvas.style=e.canvasStyle),e.antialias||r.setCrisp(t.canvas),e.renderType!==o.HEADLESS&&(a=n(368),u=n(371),e.renderType===o.WEBGL?t.renderer=new u(t):(t.renderer=new a(t),t.context=t.renderer.gameContext))}},function(t,e){t.exports={setCrisp:function(t){return["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"].forEach((function(e){t.style["image-rendering"]=e})),t.style.msInterpolationMode="nearest-neighbor",t},setBicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}}},function(t,e,n){var r=n(37),i=n(369),o=n(0),s=n(33),a=n(9),u=n(91),c=n(370),h=n(104),l=n(106),f=n(25),d=new o({Extends:a,initialize:function(t){a.call(this);var e=t.config;this.config={clearBeforeRender:e.clearBeforeRender,backgroundColor:e.backgroundColor,antialias:e.antialias,roundPixels:e.roundPixels},this.game=t,this.type=s.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=t.canvas;var n={alpha:t.config.transparent,desynchronized:t.config.desynchronized};this.gameContext=e.context?e.context:this.gameCanvas.getContext("2d",n),this.currentContext=this.gameContext,this.antialias=t.config.antialias,this.blendModes=c(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new f,this._tempMatrix2=new f,this._tempMatrix3=new f,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(l.READY,this.boot,this)},boot:function(){var t=this.game,e=t.scale.baseSize;this.width=e.width,this.height=e.height,this.isBooted=!0,t.scale.on(h.RESIZE,this.onResize,this),this.resize(e.width,e.height)},onResize:function(t,e){e.width===this.width&&e.height===this.height||this.resize(e.width,e.height)},resize:function(t,e){this.width=t,this.height=e,this.emit(u.RESIZE,t,e)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(t){return this.currentContext.globalCompositeOperation=t,this},setContext:function(t){return this.currentContext=t||this.gameContext,this},setAlpha:function(t){return this.currentContext.globalAlpha=t,this},preRender:function(){var t=this.gameContext,e=this.config,n=this.width,r=this.height;t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),e.clearBeforeRender&&(t.clearRect(0,0,n,r),e.transparent||(t.fillStyle=e.backgroundColor.rgba,t.fillRect(0,0,n,r))),t.save(),this.drawCount=0,this.emit(u.PRE_RENDER)},render:function(t,e,n){var i=e.length;this.emit(u.RENDER,t,n);var o=n.x,s=n.y,a=n.width,c=n.height,h=n.renderToTexture?n.context:t.sys.context;h.save(),this.game.scene.customViewports&&(h.beginPath(),h.rect(o,s,a,c),h.clip()),this.currentContext=h;var l=n.mask;l&&l.preRenderCanvas(this,null,n._maskCamera),n.transparent||(h.fillStyle=n.backgroundColor.rgba,h.fillRect(o,s,a,c)),h.globalAlpha=n.alpha,h.globalCompositeOperation="source-over",this.drawCount+=i,n.renderToTexture&&n.emit(r.PRE_RENDER,n),n.matrix.copyToContext(h);for(var f=0;f<i;f++){var d=e[f];d.mask&&d.mask.preRenderCanvas(this,d,n),d.renderCanvas(this,d,n),d.mask&&d.mask.postRenderCanvas(this,d,n)}h.setTransform(1,0,0,1,0,0),h.globalCompositeOperation="source-over",h.globalAlpha=1,n.flashEffect.postRenderCanvas(h),n.fadeEffect.postRenderCanvas(h),n.dirty=!1,l&&l.postRenderCanvas(this),h.restore(),n.renderToTexture&&(n.emit(r.POST_RENDER,n),n.renderToGame&&t.sys.context.drawImage(n.canvas,o,s))},postRender:function(){this.gameContext.restore(),this.emit(u.POST_RENDER);var t=this.snapshotState;t.callback&&(i(this.gameCanvas,t),t.callback=null)},snapshotCanvas:function(t,e,n,r,o,s,a,u,c){void 0===n&&(n=!1),this.snapshotArea(r,o,s,a,e,u,c);var h=this.snapshotState;return h.getPixel=n,i(this.canvas,h),h.callback=null,this},snapshot:function(t,e,n){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,t,e,n)},snapshotArea:function(t,e,n,r,i,o,s){var a=this.snapshotState;return a.callback=i,a.type=o,a.encoder=s,a.getPixel=!1,a.x=t,a.y=e,a.width=Math.min(n,this.gameCanvas.width),a.height=Math.min(r,this.gameCanvas.height),this},snapshotPixel:function(t,e,n){return this.snapshotArea(t,e,1,1,n),this.snapshotState.getPixel=!0,this},batchSprite:function(t,e,n,r){var i=n.alpha*t.alpha;if(0!==i){var o=this.currentContext,s=this._tempMatrix1,a=this._tempMatrix2,u=e.canvasData,c=u.x,h=u.y,l=e.cutWidth,f=e.cutHeight,d=e.customPivot,p=e.source.resolution,v=t.displayOriginX,g=t.displayOriginY,m=-v+e.x,y=-g+e.y;if(t.isCropped){var b=t._crop;b.flipX===t.flipX&&b.flipY===t.flipY||e.updateCropUVs(b,t.flipX,t.flipY),l=b.cw,f=b.ch,c=b.cx,h=b.cy,m=-v+b.x,y=-g+b.y,t.flipX&&(m>=0?m=-(m+l):m<0&&(m=Math.abs(m)-l)),t.flipY&&(y>=0?y=-(y+f):y<0&&(y=Math.abs(y)-f))}var w=1,x=1;t.flipX&&(d||(m+=-e.realWidth+2*v),w=-1),t.flipY&&(d||(y+=-e.realHeight+2*g),x=-1),a.applyITRS(t.x,t.y,t.rotation,t.scaleX*w,t.scaleY*x),s.copyFrom(n.matrix),r?(s.multiplyWithOffset(r,-n.scrollX*t.scrollFactorX,-n.scrollY*t.scrollFactorY),a.e=t.x,a.f=t.y):(a.e-=n.scrollX*t.scrollFactorX,a.f-=n.scrollY*t.scrollFactorY),s.multiply(a),o.save(),s.setToContext(o),o.globalCompositeOperation=this.blendModes[t.blendMode],o.globalAlpha=i,o.imageSmoothingEnabled=!(!this.antialias||e.source.scaleMode),t.mask&&t.mask.preRenderCanvas(this,t,n),o.drawImage(e.source.image,c,h,l,f,m,y,l/p,f/p),t.mask&&t.mask.postRenderCanvas(this,t,n),o.restore()}},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});t.exports=d},function(t,e,n){var r=n(31),i=n(38),o=n(2);t.exports=function(t,e){var n=o(e,"callback"),s=o(e,"type","image/png"),a=o(e,"encoder",.92),u=Math.abs(Math.round(o(e,"x",0))),c=Math.abs(Math.round(o(e,"y",0))),h=o(e,"width",t.width),l=o(e,"height",t.height);if(o(e,"getPixel",!1)){var f=t.getContext("2d").getImageData(u,c,1,1).data;n.call(null,new i(f[0],f[1],f[2],f[3]/255))}else if(0!==u||0!==c||h!==t.width||l!==t.height){var d=r.createWebGL(this,h,l);d.getContext("2d").drawImage(t,u,c,h,l,0,0,h,l);var p=new Image;p.onerror=function(){n.call(null),r.remove(d)},p.onload=function(){n.call(null,p),r.remove(d)},p.src=d.toDataURL(s,a)}else{var v=new Image;v.onerror=function(){n.call(null)},v.onload=function(){n.call(null,v)},v.src=t.toDataURL(s,a)}}},function(t,e,n){var r=n(35),i=n(348);t.exports=function(){var t=[],e=i.supportNewBlendModes,n="source-over";return t[r.NORMAL]=n,t[r.ADD]="lighter",t[r.MULTIPLY]=e?"multiply":n,t[r.SCREEN]=e?"screen":n,t[r.OVERLAY]=e?"overlay":n,t[r.DARKEN]=e?"darken":n,t[r.LIGHTEN]=e?"lighten":n,t[r.COLOR_DODGE]=e?"color-dodge":n,t[r.COLOR_BURN]=e?"color-burn":n,t[r.HARD_LIGHT]=e?"hard-light":n,t[r.SOFT_LIGHT]=e?"soft-light":n,t[r.DIFFERENCE]=e?"difference":n,t[r.EXCLUSION]=e?"exclusion":n,t[r.HUE]=e?"hue":n,t[r.SATURATION]=e?"saturation":n,t[r.COLOR]=e?"color":n,t[r.LUMINOSITY]=e?"luminosity":n,t[r.ERASE]="destination-out",t[r.SOURCE_IN]="source-in",t[r.SOURCE_OUT]="source-out",t[r.SOURCE_ATOP]="source-atop",t[r.DESTINATION_OVER]="destination-over",t[r.DESTINATION_IN]="destination-in",t[r.DESTINATION_OUT]="destination-out",t[r.DESTINATION_ATOP]="destination-atop",t[r.LIGHTER]="lighter",t[r.COPY]="copy",t[r.XOR]="xor",t}},function(t,e,n){var r=n(93),i=n(37),o=n(0),s=n(33),a=n(9),u=n(91),c=n(22),h=n(138),l=n(69),f=n(1),d=n(372),p=n(141),v=n(104),g=n(106),m=n(12),y=n(383),b=new o({Extends:a,initialize:function(t){a.call(this);var e=t.config,n={alpha:e.transparent,desynchronized:e.desynchronized,depth:!1,antialias:e.antialiasGL,premultipliedAlpha:e.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:e.failIfMajorPerformanceCaveat,powerPreference:e.powerPreference,preserveDrawingBuffer:e.preserveDrawingBuffer};this.config={clearBeforeRender:e.clearBeforeRender,antialias:e.antialias,backgroundColor:e.backgroundColor,contextCreation:n,roundPixels:e.roundPixels,maxTextures:e.maxTextures,maxTextureSize:e.maxTextureSize,batchSize:e.batchSize,maxLights:e.maxLights,mipmapFilter:e.mipmapFilter},this.game=t,this.type=s.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=t.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.textureIndexes,this.tempTextures,this.textureZero,this.normalTexture,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=f,this.contextRestoredHandler=f,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionMatrix,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(t){var e,n=this.game,r=this.canvas,i=t.backgroundColor;if(!(e=n.config.context?n.config.context:r.getContext("webgl",t.contextCreation)||r.getContext("experimental-webgl",t.contextCreation))||e.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=e;var o=this;this.contextLostHandler=function(t){o.contextLost=!0,o.game.events.emit(c.CONTEXT_LOST,o),t.preventDefault()},this.contextRestoredHandler=function(){o.contextLost=!1,o.init(o.config),o.game.events.emit(c.CONTEXT_RESTORED,o)},r.addEventListener("webglcontextlost",this.contextLostHandler,!1),r.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),n.context=e;for(var a=0;a<=27;a++)this.blendModes.push({func:[e.ONE,e.ONE_MINUS_SRC_ALPHA],equation:e.FUNC_ADD});this.blendModes[1].func=[e.ONE,e.DST_ALPHA],this.blendModes[2].func=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[e.ONE,e.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[e.ZERO,e.ONE_MINUS_SRC_ALPHA],equation:e.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=e.BYTE,this.glFormats[1]=e.SHORT,this.glFormats[2]=e.UNSIGNED_BYTE,this.glFormats[3]=e.UNSIGNED_SHORT,this.glFormats[4]=e.FLOAT,this.glFuncMap={mat2:{func:e.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:e.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:e.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:e.uniform1f,length:1},"1fv":{func:e.uniform1fv,length:1},"1i":{func:e.uniform1i,length:1},"1iv":{func:e.uniform1iv,length:1},"2f":{func:e.uniform2f,length:2},"2fv":{func:e.uniform2fv,length:1},"2i":{func:e.uniform2i,length:2},"2iv":{func:e.uniform2iv,length:1},"3f":{func:e.uniform3f,length:3},"3fv":{func:e.uniform3fv,length:1},"3i":{func:e.uniform3i,length:3},"3iv":{func:e.uniform3iv,length:1},"4f":{func:e.uniform4f,length:4},"4fv":{func:e.uniform4fv,length:1},"4i":{func:e.uniform4i,length:4},"4iv":{func:e.uniform4iv,length:1}};var u=e.getSupportedExtensions();t.maxTextures&&-1!==t.maxTextures||(t.maxTextures=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)),t.maxTextureSize||(t.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE));var h="WEBGL_compressed_texture_",f="WEBKIT_"+h;this.compression.ETC1=e.getExtension(h+"etc1")||e.getExtension(f+"etc1"),this.compression.PVRTC=e.getExtension(h+"pvrtc")||e.getExtension(f+"pvrtc"),this.compression.S3TC=e.getExtension(h+"s3tc")||e.getExtension(f+"s3tc"),this.supportedExtensions=u;var p="ANGLE_instanced_arrays";this.instancedArraysExtension=u.indexOf(p)>-1?e.getExtension(p):null;var v="OES_vertex_array_object";this.vaoExtension=u.indexOf(v)>-1?e.getExtension(v):null,e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),e.clearColor(i.redGL,i.greenGL,i.blueGL,i.alphaGL),this.mipmapFilter=e[t.mipmapFilter],this.maxTextures=m.checkShaderMax(e,t.maxTextures),this.textureIndexes=[];var y=this.tempTextures;if(Array.isArray(y))for(var b=0;a<this.maxTextures;b++)e.deleteTexture(y[b]);else y=new Array(this.maxTextures);for(var w=0;w<this.maxTextures;w++){var x=e.createTexture();e.activeTexture(e.TEXTURE0+w),e.bindTexture(e.TEXTURE_2D,x),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),y[w]=x,this.textureIndexes.push(w)}return this.tempTextures=y,this.currentActiveTexture=1,this.startActiveTexture++,e.activeTexture(e.TEXTURE1),this.pipelines=new d(this),this.setBlendMode(s.BlendModes.NORMAL),this.projectionMatrix=(new l).identity(),n.textures.once(g.READY,this.boot,this),this},boot:function(){var t=this.game,e=this.pipelines,n=t.scale.baseSize;this.width=n.width,this.height=n.height,this.isBooted=!0,this.renderTarget=new p(this,this.width,this.height,1,0,!0,!0),e.boot(t.config.pipeline),this.blankTexture=t.textures.getFrame("__DEFAULT"),this.whiteTexture=t.textures.getFrame("__WHITE");var r=this.gl;r.bindFramebuffer(r.FRAMEBUFFER,null),r.enable(r.SCISSOR_TEST),t.scale.on(v.RESIZE,this.onResize,this),this.resize(n.width,n.height)},onResize:function(t,e){e.width===this.width&&e.height===this.height||this.resize(e.width,e.height)},beginCapture:function(t,e){void 0===t&&(t=this.width),void 0===e&&(e=this.height),this.renderTarget.bind(!0,t,e),this.setProjectionMatrix(t,e),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(t,e){var n=this.gl;return this.width=t,this.height=e,this.setProjectionMatrix(t,e),n.viewport(0,0,t,e),this.drawingBufferHeight=n.drawingBufferHeight,n.scissor(0,n.drawingBufferHeight-e,t,e),this.defaultScissor[2]=t,this.defaultScissor[3]=e,this.emit(u.RESIZE,t,e),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(t,e){return t===this.projectionWidth&&e===this.projectionHeight||(this.projectionWidth=t,this.projectionHeight=e,this.projectionMatrix.ortho(0,t,e,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(t){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(t)},getExtension:function(t){return this.hasExtension(t)?(t in this.extensions||(this.extensions[t]=this.gl.getExtension(t)),this.extensions[t]):null},flush:function(){this.pipelines.flush()},pushScissor:function(t,e,n,r,i){void 0===i&&(i=this.drawingBufferHeight);var o=[t,e,n,r];return this.scissorStack.push(o),this.setScissor(t,e,n,r,i),this.currentScissor=o,o},setScissor:function(t,e,n,r,i){void 0===i&&(i=this.drawingBufferHeight);var o=this.gl,s=this.currentScissor,a=n>0&&r>0;if(s&&a){var u=s[0],c=s[1],h=s[2],l=s[3];a=u!==t||c!==e||h!==n||l!==r}a&&(this.flush(),o.scissor(t,i-e-r,n,r))},resetScissor:function(){var t=this.gl;t.enable(t.SCISSOR_TEST);var e=this.currentScissor;if(e){var n=e[0],r=e[1],i=e[2],o=e[3];i>0&&o>0&&t.scissor(n,this.drawingBufferHeight-r-o,i,o)}},popScissor:function(){var t=this.scissorStack;t.pop();var e=t[t.length-1];e&&this.setScissor(e[0],e[1],e[2],e[3]),this.currentScissor=e},hasActiveStencilMask:function(){var t=this.currentMask.mask,e=this.currentCameraMask.mask;return t&&t.isStencil||e&&e.isStencil},resetViewport:function(){var t=this.gl;t.viewport(0,0,this.width,this.height),this.drawingBufferHeight=t.drawingBufferHeight},setBlendMode:function(t,e){void 0===e&&(e=!1);var n=this.gl,r=this.blendModes[t];return!!(e||t!==s.BlendModes.SKIP_CHECK&&this.currentBlendMode!==t)&&(this.flush(),n.enable(n.BLEND),n.blendEquation(r.equation),r.func.length>2?n.blendFuncSeparate(r.func[0],r.func[1],r.func[2],r.func[3]):n.blendFunc(r.func[0],r.func[1]),this.currentBlendMode=t,!0)},addBlendMode:function(t,e){return this.blendModes.push({func:t,equation:e})-1},updateBlendMode:function(t,e,n){return this.blendModes[t]&&(this.blendModes[t].func=e,n&&(this.blendModes[t].equation=n)),this},removeBlendMode:function(t){return t>17&&this.blendModes[t]&&this.blendModes.splice(t,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(t){if(this.pipelines.forceZero())return this.setTextureZero(t.glTexture,!0),0;var e=this.gl,n=this.currentActiveTexture;return t.glIndexCounter<this.startActiveTexture&&(t.glIndexCounter=this.startActiveTexture,n<this.maxTextures?(t.glIndex=n,e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,t.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,t.glIndexCounter=this.startActiveTexture,t.glIndex=1,e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,t.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,t.glIndex},isNewNormalMap:function(t,e){return this.textureZero!==t||this.normalTexture!==e},setTextureZero:function(t,e){if(this.textureZero!==t){e&&this.flush();var n=this.gl;n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,t),this.textureZero=t}},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(t){if(this.normalTexture!==t){var e=this.gl;e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,t),this.normalTexture=t,1===this.currentActiveTexture&&(this.currentActiveTexture=2)}},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var t=this.gl,e=this.tempTextures,n=0;n<e.length;n++)t.activeTexture(t.TEXTURE0+n),t.bindTexture(t.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(t){if(void 0===t&&(t=!1),!this.isTextureClean){this.flush();var e=this.gl,n=this.tempTextures;if(t){for(var r=0;r<n.length;r++)e.activeTexture(e.TEXTURE0+r),e.bindTexture(e.TEXTURE_2D,n[r]);e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,n[1]),this.isTextureClean=!0}else e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,n[0]),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,n[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(t){if(this.pipelines.forceZero())return this.setTextureZero(t,!0),0;var e=this.gl,n=this.currentActiveTexture;return t.glIndexCounter<this.startActiveTexture&&(t.glIndexCounter=this.startActiveTexture,n<this.maxTextures?(t.glIndex=n,e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,t),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,t.glIndexCounter=this.startActiveTexture,t.glIndex=1,e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,t),this.currentActiveTexture=2)),this.isTextureClean=!1,t.glIndex},pushFramebuffer:function(t,e,n,r){return t===this.currentFramebuffer?this:(this.fboStack.push(t),this.setFramebuffer(t,e,n,r))},setFramebuffer:function(t,e,n,r){if(void 0===e&&(e=!1),void 0===n&&(n=!1),void 0===r&&(r=!0),t===this.currentFramebuffer)return this;var i=this.gl,o=this.width,s=this.height;return t&&t.renderTexture&&r?(o=t.renderTexture.width,s=t.renderTexture.height):this.flush(),i.bindFramebuffer(i.FRAMEBUFFER,t),r&&i.viewport(0,0,o,s),e&&(t?(this.drawingBufferHeight=s,this.pushScissor(0,0,o,s)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=t,n&&this.resetTextures(),this},popFramebuffer:function(t,e,n){void 0===t&&(t=!1),void 0===e&&(e=!1),void 0===n&&(n=!0);var r=this.fboStack;r.pop();var i=r[r.length-1];return i||(i=null),this.setFramebuffer(i,t,e,n),i},setProgram:function(t){return t!==this.currentProgram&&(this.flush(),this.gl.useProgram(t),this.currentProgram=t,!0)},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(t,e,n,r){var i=this.gl,o=i.NEAREST,a=i.NEAREST,u=i.CLAMP_TO_EDGE;e=t?t.width:e,n=t?t.height:n;var c=h(e,n);return c&&(u=i.REPEAT),r===s.ScaleModes.LINEAR&&this.config.antialias&&(o=c?this.mipmapFilter:i.LINEAR,a=i.LINEAR),t||"number"!==typeof e||"number"!==typeof n?this.createTexture2D(0,o,a,u,u,i.RGBA,t):this.createTexture2D(0,o,a,u,u,i.RGBA,null,e,n)},createTexture2D:function(t,e,n,r,i,o,s,a,u,c,l,f){c=void 0===c||null===c||c,void 0===l&&(l=!1),void 0===f&&(f=!1);var d=this.gl,p=d.createTexture();d.activeTexture(d.TEXTURE0);var v=d.getParameter(d.TEXTURE_BINDING_2D);return d.bindTexture(d.TEXTURE_2D,p),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,e),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,n),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,i),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,r),d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,c),d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,f),null===s||void 0===s?d.texImage2D(d.TEXTURE_2D,t,o,a,u,0,o,d.UNSIGNED_BYTE,null):(l||(a=s.width,u=s.height),d.texImage2D(d.TEXTURE_2D,t,o,o,d.UNSIGNED_BYTE,s)),h(a,u)&&d.generateMipmap(d.TEXTURE_2D),v&&d.bindTexture(d.TEXTURE_2D,v),p.isAlphaPremultiplied=c,p.isRenderTexture=!1,p.width=a,p.height=u,p.glIndex=0,p.glIndexCounter=-1,p},createFramebuffer:function(t,e,n,r){var i,o=this.gl,s=o.createFramebuffer();if(this.setFramebuffer(s),r){var a=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,a),o.renderbufferStorage(o.RENDERBUFFER,o.DEPTH_STENCIL,t,e),o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,a)}if(n.isRenderTexture=!0,n.isAlphaPremultiplied=!1,o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,n,0),(i=o.checkFramebufferStatus(o.FRAMEBUFFER))!==o.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer status: "+{36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"}[i]);return s.renderTexture=n,this.setFramebuffer(null),this.resetTextures(),s},createProgram:function(t,e){var n=this.gl,r=n.createProgram(),i=n.createShader(n.VERTEX_SHADER),o=n.createShader(n.FRAGMENT_SHADER);if(n.shaderSource(i,t),n.shaderSource(o,e),n.compileShader(i),n.compileShader(o),!n.getShaderParameter(i,n.COMPILE_STATUS))throw new Error("Vertex Shader failed:\n"+n.getShaderInfoLog(i));if(!n.getShaderParameter(o,n.COMPILE_STATUS))throw new Error("Fragment Shader failed:\n"+n.getShaderInfoLog(o));if(n.attachShader(r,i),n.attachShader(r,o),n.linkProgram(r),!n.getProgramParameter(r,n.LINK_STATUS))throw new Error("Link Program failed:\n"+n.getProgramInfoLog(r));return n.useProgram(r),r},createVertexBuffer:function(t,e){var n=this.gl,r=n.createBuffer();return n.bindBuffer(n.ARRAY_BUFFER,r),n.bufferData(n.ARRAY_BUFFER,t,e),n.bindBuffer(n.ARRAY_BUFFER,null),r},createIndexBuffer:function(t,e){var n=this.gl,r=n.createBuffer();return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t,e),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null),r},deleteTexture:function(t,e){return e&&this.resetTextures(!0),t&&this.gl.deleteTexture(t),this},deleteFramebuffer:function(t){return t&&(this.gl.deleteFramebuffer(t),r(this.fboStack,t),this.currentFramebuffer===t&&(this.currentFramebuffer=null)),this},deleteProgram:function(t){return t&&this.gl.deleteProgram(t),this},deleteBuffer:function(t){return this.gl.deleteBuffer(t),this},preRenderCamera:function(t){var e=t.x,n=t.y,r=t.width,o=t.height,s=t.backgroundColor;t.emit(i.PRE_RENDER,t),this.pipelines.preBatchCamera(t),this.pushScissor(e,n,r,o),t.mask&&(this.currentCameraMask.mask=t.mask,this.currentCameraMask.camera=t._maskCamera,t.mask.preRenderWebGL(this,t,t._maskCamera)),s.alphaGL>0&&this.pipelines.setMulti().drawFillRect(e,n,r,o,m.getTintFromFloats(s.blueGL,s.greenGL,s.redGL,1),s.alphaGL)},getCurrentStencilMask:function(){var t=null,e=this.maskStack,n=this.currentCameraMask;return e.length>0?t=e[e.length-1]:n.mask&&n.mask.isStencil&&(t=n),t},postRenderCamera:function(t){var e=t.flashEffect,n=t.fadeEffect;if(e.isRunning||n.isRunning||n.isComplete){var r=this.pipelines.setMulti();e.postRenderWebGL(r,m.getTintFromFloats),n.postRenderWebGL(r,m.getTintFromFloats)}t.dirty=!1,this.popScissor(),t.mask&&(this.currentCameraMask.mask=null,t.mask.postRenderWebGL(this,t._maskCamera)),this.pipelines.postBatchCamera(t),t.emit(i.POST_RENDER,t)},preRender:function(){if(!this.contextLost){var t=this.gl;if(t.bindFramebuffer(t.FRAMEBUFFER,null),this.config.clearBeforeRender){var e=this.config.backgroundColor;t.clearColor(e.redGL,e.greenGL,e.blueGL,e.alphaGL),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT)}t.enable(t.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&t.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(u.PRE_RENDER)}},render:function(t,e,n){if(!this.contextLost){var r=e.length;if(this.emit(u.RENDER,t,n),this.preRenderCamera(n),0===r)return this.setBlendMode(s.BlendModes.NORMAL),void this.postRenderCamera(n);this.currentType="";for(var i=this.currentMask,o=0;o<r;o++){this.finalType=o===r-1;var a=e[o],c=a.mask;(i=this.currentMask).mask&&i.mask!==c&&i.mask.postRenderWebGL(this,i.camera),c&&i.mask!==c&&c.preRenderWebGL(this,a,n),a.blendMode!==this.currentBlendMode&&this.setBlendMode(a.blendMode);var h=a.type;h!==this.currentType&&(this.newType=!0,this.currentType=h),this.finalType?this.nextTypeMatch=!1:this.nextTypeMatch=e[o+1].type===this.currentType,a.renderWebGL(this,a,n),this.newType=!1}(i=this.currentMask).mask&&i.mask.postRenderWebGL(this,i.camera),this.setBlendMode(s.BlendModes.NORMAL),this.postRenderCamera(n)}},postRender:function(){if(!this.contextLost){this.flush(),this.emit(u.POST_RENDER);var t=this.snapshotState;t.callback&&(y(this.canvas,t),t.callback=null),this.textureFlush>0&&(this.startActiveTexture++,this.currentActiveTexture=1)}},snapshot:function(t,e,n){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,t,e,n)},snapshotArea:function(t,e,n,r,i,o,s){var a=this.snapshotState;return a.callback=i,a.type=o,a.encoder=s,a.getPixel=!1,a.x=t,a.y=e,a.width=Math.min(n,this.gl.drawingBufferWidth),a.height=Math.min(r,this.gl.drawingBufferHeight),this},snapshotPixel:function(t,e,n){return this.snapshotArea(t,e,1,1,n),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(t,e,n,r,i,o,s,a,u,c,h){void 0===i&&(i=!1),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=e),void 0===u&&(u=n);var l=this.currentFramebuffer;this.snapshotArea(o,s,a,u,r,c,h);var f=this.snapshotState;return f.getPixel=i,f.isFramebuffer=!0,f.bufferWidth=e,f.bufferHeight=n,this.setFramebuffer(t),y(this.canvas,f),this.setFramebuffer(l),f.callback=null,f.isFramebuffer=!1,this},canvasToTexture:function(t,e,n,r){return void 0===n&&(n=!1),void 0===r&&(r=!1),e?this.updateCanvasTexture(t,e,r):this.createCanvasTexture(t,n,r)},createCanvasTexture:function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=this.gl,i=r.NEAREST,o=r.NEAREST,s=t.width,a=t.height,u=r.CLAMP_TO_EDGE,c=h(s,a);return!e&&c&&(u=r.REPEAT),this.config.antialias&&(i=c?this.mipmapFilter:r.LINEAR,o=r.LINEAR),this.createTexture2D(0,i,o,u,u,r.RGBA,t,s,a,!0,!1,n)},updateCanvasTexture:function(t,e,n){void 0===n&&(n=!1);var r=this.gl,i=t.width,o=t.height;if(i>0&&o>0){r.activeTexture(r.TEXTURE0);var s=r.getParameter(r.TEXTURE_BINDING_2D);r.bindTexture(r.TEXTURE_2D,e),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,n),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),e.width=i,e.height=o,s&&r.bindTexture(r.TEXTURE_2D,s)}return e},createVideoTexture:function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var r=this.gl,i=r.NEAREST,o=r.NEAREST,s=t.videoWidth,a=t.videoHeight,u=r.CLAMP_TO_EDGE,c=h(s,a);return!e&&c&&(u=r.REPEAT),this.config.antialias&&(i=c?this.mipmapFilter:r.LINEAR,o=r.LINEAR),this.createTexture2D(0,i,o,u,u,r.RGBA,t,s,a,!0,!0,n)},updateVideoTexture:function(t,e,n){void 0===n&&(n=!1);var r=this.gl,i=t.videoWidth,o=t.videoHeight;if(i>0&&o>0){r.activeTexture(r.TEXTURE0);var s=r.getParameter(r.TEXTURE_BINDING_2D);r.bindTexture(r.TEXTURE_2D,e),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,n),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),e.width=i,e.height=o,s&&r.bindTexture(r.TEXTURE_2D,s)}return e},setTextureFilter:function(t,e){var n=this.gl,r=[n.LINEAR,n.NEAREST][e];n.activeTexture(n.TEXTURE0);var i=n.getParameter(n.TEXTURE_BINDING_2D);return n.bindTexture(n.TEXTURE_2D,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,r),i&&n.bindTexture(n.TEXTURE_2D,i),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var t=this.gl,e=this.tempTextures,n=0;n<e.length;n++)t.deleteTexture(e[n]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});t.exports=b},function(t,e,n){var r=n(0),i=n(92),o=n(102),s=n(373),a=n(376),u=n(377),c=n(108),h=n(378),l=n(379),f=n(380),d=n(381),p=new r({initialize:function(t){this.game=t.game,this.renderer=t,this.classes=new o([[i.UTILITY_PIPELINE,d],[i.MULTI_PIPELINE,c],[i.BITMAPMASK_PIPELINE,s],[i.SINGLE_PIPELINE,f],[i.ROPE_PIPELINE,l],[i.LIGHT_PIPELINE,u],[i.POINTLIGHT_PIPELINE,h],[i.GRAPHICS_PIPELINE,a]]),this.postPipelineClasses=new o,this.pipelines=new o,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(t){var e,n,r=this,o=this.game;if(this.classes.each((function(t,n){e=r.add(t,new n({game:o})),t===i.UTILITY_PIPELINE&&(r.UTILITY_PIPELINE=e,r.fullFrame1=e.fullFrame1,r.fullFrame2=e.fullFrame2,r.halfFrame1=e.halfFrame1,r.halfFrame2=e.halfFrame2)})),this.MULTI_PIPELINE=this.get(i.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(i.BITMAPMASK_PIPELINE),t)for(n in t){var s=t[n];(e=new s(o)).isPostFX?this.postPipelineClasses.set(n,s):this.has(n)||(this.classes.set(n,s),this.add(n,e))}},add:function(t,e){if(!e.isPostFX){var n=this.pipelines,r=this.renderer;return n.has(t)?console.warn("Pipeline exists: "+t):(e.name=t,e.manager=this,n.set(t,e)),e.hasBooted||e.boot(),0!==r.width&&0!==r.height&&e.resize(r.width,r.height),e}console.warn(t+" is a Post Pipeline. Use `addPostPipeline` instead")},addPostPipeline:function(t,e){this.postPipelineClasses.has(t)||this.postPipelineClasses.set(t,e)},flush:function(){this.current&&this.current.flush()},has:function(t){var e=this.pipelines;return"string"===typeof t?e.has(t):!!e.contains(t)},get:function(t){var e=this.pipelines;return"string"===typeof t?e.get(t):e.contains(t)?t:void 0},getPostPipeline:function(t,e){var n,r=this.postPipelineClasses;if("string"===typeof t?n=r.get(t):"function"===typeof t?r.contains(t)&&(n=t):"object"===typeof t&&(n=r.get(t.name)),n){var i=new n(this.game);return e&&(i.gameObject=e),i}},remove:function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!0),this.pipelines.delete(t),e&&this.classes.delete(t),n&&this.postPipelineClasses.delete(t)},set:function(t,e,n){if(!t.isPostFX)return this.isCurrent(t,n)||(this.flush(),this.current&&this.current.unbind(),this.current=t,t.bind(n)),t.updateProjectionMatrix(),t.onBind(e),t},preBatch:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,n=e.length-1;n>=0;n--){var r=e[n];r.active&&r.preBatch(t)}}},postBatch:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,n=0;n<e.length;n++){var r=e[n];r.active&&r.postBatch(t)}}},preBatchCamera:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,n=e.length-1;n>=0;n--){var r=e[n];r.active&&r.preBatch(t)}}},postBatchCamera:function(t){if(t.hasPostPipeline){this.flush();for(var e=t.postPipelines,n=0;n<e.length;n++){var r=e[n];r.active&&r.postBatch(t)}}},isCurrent:function(t,e){var n=this.renderer,r=this.current;return r&&!e&&(e=r.currentShader),!(r!==t||e.program!==n.currentProgram)},copyFrame:function(t,e,n,r,i){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(t,e,n,r,i),this},copyToGame:function(t){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(t),this},drawFrame:function(t,e,n,r){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(t,e,n,r),this},blendFrames:function(t,e,n,r,i){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(t,e,n,r,i),this},blendFramesAdditive:function(t,e,n,r,i){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(t,e,n,r,i),this},clearFrame:function(t,e){return this.UTILITY_PIPELINE.clearFrame(t,e),this},blitFrame:function(t,e,n,r,i,o){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(t,e,n,r,i,o),this},copyFrameRect:function(t,e,n,r,i,o,s,a){return this.UTILITY_PIPELINE.copyFrameRect(t,e,n,r,i,o,s,a),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(t){return this.UTILITY_PIPELINE.bind(t)},rebind:function(t){void 0===t&&this.previous&&(t=this.previous);var e=this.renderer,n=e.gl;n.disable(n.DEPTH_TEST),n.disable(n.CULL_FACE),e.hasActiveStencilMask()?n.clear(n.DEPTH_BUFFER_BIT):(n.disable(n.STENCIL_TEST),n.clear(n.DEPTH_BUFFER_BIT|n.STENCIL_BUFFER_BIT)),n.viewport(0,0,e.width,e.height),e.currentProgram=null,e.setBlendMode(0,!0);var r=this.pipelines.entries;for(var i in r)r[i].glReset=!0;t&&(this.current=t,t.rebind()),e.resetTextures()},clear:function(){var t=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,t.currentProgram=null,t.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});t.exports=p},function(t,e,n){var r=n(0),i=n(2),o=n(866),s=n(867),a=n(107),u=n(58),c=new r({Extends:u,initialize:function(t){t.fragShader=i(t,"fragShader",o),t.vertShader=i(t,"vertShader",s),t.batchSize=i(t,"batchSize",1),t.vertices=i(t,"vertices",[-1,1,-1,-7,7,1]),t.attributes=i(t,"attributes",[{name:"inPosition",size:2,type:a.FLOAT}]),u.call(this,t)},boot:function(){u.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(t,e){u.prototype.resize.call(this,t,e),this.set2f("uResolution",t,e)},beginMask:function(t,e,n){var r=this.gl;if(t.bitmapMask&&r){var i=this.renderer;i.flush(),i.pushFramebuffer(t.mainFramebuffer),r.disable(r.STENCIL_TEST),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),i.currentCameraMask.mask!==t&&(i.currentMask.mask=t,i.currentMask.camera=n)}},endMask:function(t,e){var n=this.gl,r=this.renderer,i=t.bitmapMask;if(i&&n){r.flush(),r.pushFramebuffer(t.maskFramebuffer),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),r.setBlendMode(0,!0),i.renderWebGL(r,i,e),r.flush(),r.popFramebuffer(),r.popFramebuffer();var o=r.getCurrentStencilMask();o?(n.enable(n.STENCIL_TEST),o.mask.applyStencil(r,o.camera,!0)):r.currentMask.mask=null,r.pipelines.set(this),n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,t.maskTexture),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,t.mainTexture),this.set1i("uInvertMaskAlpha",t.invertAlpha),n.drawArrays(this.topology,0,3),r.resetTextures()}}});t.exports=c},function(t,e,n){t.exports={AFTER_FLUSH:n(868),BEFORE_FLUSH:n(869),BIND:n(870),BOOT:n(871),DESTROY:n(872),REBIND:n(873),RESIZE:n(874)}},function(t,e,n){var r=n(0),i=n(2),o=n(107),s=new r({initialize:function(t,e,n,r,i){this.pipeline=t,this.name=e,this.renderer=t.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(n,r),this.attributes,this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(i),this.createUniforms()},createAttributes:function(t){var e=0,n=0,r=[];this.vertexComponentCount=0;for(var s=0;s<t.length;s++){var a=t[s],u=a.name,c=i(a,"size",1),h=i(a,"type",o.FLOAT),l=h.enum,f=h.size,d=!!a.normalized;r.push({name:u,size:c,type:l,normalized:d,offset:n,enabled:!1,location:-1}),4===f?e+=c:e++,n+=c*f}this.vertexSize=n,this.vertexComponentCount=e,this.attributes=r},bind:function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),e&&this.pipeline.flush(),this.renderer.setProgram(this.program),t&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(t){void 0===t&&(t=!1);for(var e=this.gl,n=this.vertexSize,r=this.attributes,i=this.program,o=0;o<r.length;o++){var s=r[o],a=s.size,u=s.type,c=s.offset,h=s.enabled,l=s.location,f=!!s.normalized;if(t){var d=e.getAttribLocation(i,s.name);d>=0?(e.enableVertexAttribArray(d),e.vertexAttribPointer(d,a,u,f,n,c),s.enabled=!0,s.location=d):-1!==d&&e.disableVertexAttribArray(d)}else h?e.vertexAttribPointer(l,a,u,f,n,c):!h&&l>-1&&(e.disableVertexAttribArray(l),s.location=-1)}return this},createUniforms:function(){var t,e,n,r=this.gl,i=this.program,o=this.uniforms,s=r.getProgramParameter(i,r.ACTIVE_UNIFORMS);for(t=0;t<s;t++){var a=r.getActiveUniform(i,t);if(a){e=a.name,null!==(n=r.getUniformLocation(i,e))&&(o[e]={name:e,location:n,value1:null,value2:null,value3:null,value4:null});var u=e.indexOf("[");u>0&&(e=e.substr(0,u),o.hasOwnProperty(e)||null!==(n=r.getUniformLocation(i,e))&&(o[e]={name:e,location:n,value1:null,value2:null,value3:null,value4:null}))}}return this},hasUniform:function(t){return this.uniforms.hasOwnProperty(t)},resetUniform:function(t){var e=this.uniforms[t];return e&&(e.value1=null,e.value2=null,e.value3=null,e.value4=null),this},setUniform1:function(t,e,n,r){var i=this.uniforms[e];return i?((r||i.value1!==n)&&(i.value1=n,this.renderer.setProgram(this.program),t.call(this.gl,i.location,n),this.pipeline.currentShader=this),this):this},setUniform2:function(t,e,n,r,i){var o=this.uniforms[e];return o?((i||o.value1!==n||o.value2!==r)&&(o.value1=n,o.value2=r,this.renderer.setProgram(this.program),t.call(this.gl,o.location,n,r),this.pipeline.currentShader=this),this):this},setUniform3:function(t,e,n,r,i,o){var s=this.uniforms[e];return s?((o||s.value1!==n||s.value2!==r||s.value3!==i)&&(s.value1=n,s.value2=r,s.value3=i,this.renderer.setProgram(this.program),t.call(this.gl,s.location,n,r,i),this.pipeline.currentShader=this),this):this},setUniform4:function(t,e,n,r,i,o,s){var a=this.uniforms[e];return a?((s||a.value1!==n||a.value2!==r||a.value3!==i||a.value4!==o)&&(a.value1=n,a.value2=r,a.value3=i,a.value4=o,this.renderer.setProgram(this.program),t.call(this.gl,a.location,n,r,i,o),this.pipeline.currentShader=this),this):this},set1f:function(t,e){return this.setUniform1(this.gl.uniform1f,t,e)},set2f:function(t,e,n){return this.setUniform2(this.gl.uniform2f,t,e,n)},set3f:function(t,e,n,r){return this.setUniform3(this.gl.uniform3f,t,e,n,r)},set4f:function(t,e,n,r,i){return this.setUniform4(this.gl.uniform4f,t,e,n,r,i)},set1fv:function(t,e){return this.setUniform1(this.gl.uniform1fv,t,e,!0)},set2fv:function(t,e){return this.setUniform1(this.gl.uniform2fv,t,e,!0)},set3fv:function(t,e){return this.setUniform1(this.gl.uniform3fv,t,e,!0)},set4fv:function(t,e){return this.setUniform1(this.gl.uniform4fv,t,e,!0)},set1iv:function(t,e){return this.setUniform1(this.gl.uniform1iv,t,e,!0)},set2iv:function(t,e){return this.setUniform1(this.gl.uniform2iv,t,e,!0)},set3iv:function(t,e){return this.setUniform1(this.gl.uniform3iv,t,e,!0)},set4iv:function(t,e){return this.setUniform1(this.gl.uniform4iv,t,e,!0)},set1i:function(t,e){return this.setUniform1(this.gl.uniform1i,t,e)},set2i:function(t,e,n){return this.setUniform2(this.gl.uniform2i,t,e,n)},set3i:function(t,e,n,r){return this.setUniform3(this.gl.uniform3i,t,e,n,r)},set4i:function(t,e,n,r,i){return this.setUniform4(this.gl.uniform4i,t,e,n,r,i)},setMatrix2fv:function(t,e,n){return this.setUniform2(this.gl.uniformMatrix2fv,t,e,n,!0)},setMatrix3fv:function(t,e,n){return this.setUniform2(this.gl.uniformMatrix3fv,t,e,n,!0)},setMatrix4fv:function(t,e,n){return this.setUniform2(this.gl.uniformMatrix4fv,t,e,n,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});t.exports=s},function(t,e,n){var r=n(0),i=n(59),o=n(2),s=n(875),a=n(876),u=n(25),c=n(107),h=n(58),l=new r({Extends:h,initialize:function(t){t.fragShader=o(t,"fragShader",s),t.vertShader=o(t,"vertShader",a),t.attributes=o(t,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:c.UNSIGNED_BYTE,normalized:!0}]),h.call(this,t),this.calcMatrix=new u,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(t,e,n,r,i,o){this.renderer.pipelines.set(this);var s=this.calcMatrix;o&&o.multiply(i,s);var a=t+n,u=e+r,c=s.getX(t,e),h=s.getY(t,e),l=s.getX(t,u),f=s.getY(t,u),d=s.getX(a,u),p=s.getY(a,u),v=s.getX(a,e),g=s.getY(a,e),m=this.fillTint;this.batchQuad(c,h,l,f,d,p,v,g,m.TL,m.TR,m.BL,m.BR)},batchFillTriangle:function(t,e,n,r,i,o,s,a){this.renderer.pipelines.set(this);var u=this.calcMatrix;a&&a.multiply(s,u);var c=u.getX(t,e),h=u.getY(t,e),l=u.getX(n,r),f=u.getY(n,r),d=u.getX(i,o),p=u.getY(i,o),v=this.fillTint;this.batchTri(c,h,l,f,d,p,v.TL,v.TR,v.BL)},batchStrokeTriangle:function(t,e,n,r,i,o,s,a,u){var c=this.tempTriangle;c[0].x=t,c[0].y=e,c[0].width=s,c[1].x=n,c[1].y=r,c[1].width=s,c[2].x=i,c[2].y=o,c[2].width=s,c[3].x=t,c[3].y=e,c[3].width=s,this.batchStrokePath(c,s,!1,a,u)},batchFillPath:function(t,e,n){this.renderer.pipelines.set(this);var r=this.calcMatrix;n&&n.multiply(e,r);for(var o,s,a=t.length,u=this.polygonCache,c=this.fillTint.TL,h=this.fillTint.TR,l=this.fillTint.BL,f=0;f<a;++f)s=t[f],u.push(s.x,s.y);a=(o=i(u)).length;for(var d=0;d<a;d+=3){var p=2*o[d+0],v=2*o[d+1],g=2*o[d+2],m=u[p+0],y=u[p+1],b=u[v+0],w=u[v+1],x=u[g+0],_=u[g+1],T=r.getX(m,y),E=r.getY(m,y),S=r.getX(b,w),k=r.getY(b,w),A=r.getX(x,_),O=r.getY(x,_);this.batchTri(T,E,S,k,A,O,c,h,l)}u.length=0},batchStrokePath:function(t,e,n,r,i){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var o=t.length-1,s=0;s<o;s++){var a=t[s],u=t[s+1];this.batchLine(a.x,a.y,u.x,u.y,a.width/2,u.width/2,e,s,!n&&s===o-1,r,i)}},batchLine:function(t,e,n,r,i,o,s,a,u,c,h){this.renderer.pipelines.set(this);var l=this.calcMatrix;h&&h.multiply(c,l);var f=n-t,d=r-e,p=Math.sqrt(f*f+d*d),v=i*(r-e)/p,g=i*(t-n)/p,m=o*(r-e)/p,y=o*(t-n)/p,b=n-m,w=r-y,x=t-v,_=e-g,T=n+m,E=r+y,S=t+v,k=e+g,A=l.getX(b,w),O=l.getY(b,w),C=l.getX(x,_),P=l.getY(x,_),I=l.getX(T,E),R=l.getY(T,E),M=l.getX(S,k),N=l.getY(S,k),L=this.strokeTint,D=L.TL,F=L.TR,j=L.BL,B=L.BR;if(this.batchQuad(M,N,C,P,A,O,I,R,D,F,j,B),!(s<=2)){var U=this.prevQuad,V=this.firstQuad;a>0&&U[4]?this.batchQuad(M,N,C,P,U[0],U[1],U[2],U[3],D,F,j,B):(V[0]=M,V[1]=N,V[2]=C,V[3]=P,V[4]=1),u&&V[4]?this.batchQuad(A,O,I,R,V[0],V[1],V[2],V[3],D,F,j,B):(U[0]=A,U[1]=O,U[2]=I,U[3]=R,U[4]=1)}},batchVert:function(t,e,n){var r=this.vertexViewF32,i=this.vertexViewU32,o=this.vertexCount*this.currentShader.vertexComponentCount-1;r[++o]=t,r[++o]=e,i[++o]=n,this.vertexCount++},batchQuad:function(t,e,n,r,i,o,s,a,u,c,h,l){var f=!1;return this.shouldFlush(6)&&(this.flush(),f=!0),this.batchVert(t,e,u),this.batchVert(n,r,h),this.batchVert(i,o,l),this.batchVert(t,e,u),this.batchVert(i,o,l),this.batchVert(s,a,c),f},batchTri:function(t,e,n,r,i,o,s,a,u){var c=!1;return this.shouldFlush(3)&&(this.flush(),c=!0),this.batchVert(t,e,s),this.batchVert(n,r,a),this.batchVert(i,o,u),c},destroy:function(){return h.prototype.destroy.call(this),this.polygonCache=null,this}});t.exports=l},function(t,e,n){var r=n(0),i=n(2),o=n(877),s=n(108),a=n(3),u=n(58),c=10,h=new a,l=new r({Extends:s,initialize:function(t){c=t.game.renderer.config.maxLights;for(var e=i(t,"fragShader",o),n=[],r=1;r<=c;r++)n.push({name:"lights"+r,fragShader:e.replace("%LIGHT_COUNT%",r.toString())});t.shaders=n,s.call(this,t),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.defaultNormalMap,this.lightsActive=!0},boot:function(){u.prototype.boot.call(this);var t=this.gl,e=t.createTexture();t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,e),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:e};for(var n=0;n<this.shaders.length;n++)this["lightShader"+(n+1)]=this.shaders[n]},onRender:function(t,e){var n=t.sys.lights;if(this.lightsActive=!1,n&&n.active){var r=n.getLights(e),i=r.length;if(0!==i){var o;this.lightsActive=!0,this.setShader(this["lightShader"+i],!0);var s=this.renderer.height,a=e.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",e.x,e.y,e.rotation,e.zoom),this.set3f("uAmbientLightColor",n.ambientColor.r,n.ambientColor.g,n.ambientColor.b),o=0;o<i;o++){var u=r[o].light,c=u.color,l="uLights["+o+"].";a.transformPoint(u.x,u.y,h),this.set2f(l+"position",h.x-e.scrollX*u.scrollFactorX*e.zoom,s-(h.y-e.scrollY*u.scrollFactorY*e.zoom)),this.set3f(l+"color",c.r,c.g,c.b),this.set1f(l+"intensity",u.intensity),this.set1f(l+"radius",u.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(t){if(t!==this.currentNormalMapRotation||0===this.vertexCount){this.vertexCount>0&&this.flush();var e=this.inverseRotationMatrix;if(t){var n=-t,r=Math.cos(n),i=Math.sin(n);e[1]=i,e[3]=-i,e[0]=e[4]=r}else e[0]=e[4]=1,e[1]=e[3]=0;this.setMatrix3fv("uInverseRotationMatrix",!1,e),this.currentNormalMapRotation=t}},setTexture2D:function(t,e){var n=this.renderer;void 0===t&&(t=n.tempTextures[0]);var r=this.getNormalMap(e);n.isNewNormalMap(t,r)&&(this.flush(),n.setTextureZero(t),n.setNormalMap(r));var i=e?e.rotation:0;return this.setNormalMapRotation(i),this.currentUnit=0,0},setGameObject:function(t,e){void 0===e&&(e=t.frame);var n=this.renderer,r=e.glTexture,i=this.getNormalMap(t);return n.isNewNormalMap()&&(this.flush(),n.setTextureZero(r),n.setNormalMap(i)),this.setNormalMapRotation(t.rotation),this.currentUnit=0,0},getNormalMap:function(t){var e;return t?t.displayTexture?e=t.displayTexture.dataSource[t.displayFrame.sourceIndex]:t.texture?e=t.texture.dataSource[t.frame.sourceIndex]:t.tileset&&(e=Array.isArray(t.tileset)?t.tileset[0].image.dataSource[0]:t.tileset.image.dataSource[0]):e=this.defaultNormalMap,e||(e=this.defaultNormalMap),e.glTexture},batchSprite:function(t,e,n){this.lightsActive&&s.prototype.batchSprite.call(this,t,e,n)},batchTexture:function(t,e,n,r,i,o,a,u,c,h,l,f,d,p,v,g,m,y,b,w,x,_,T,E,S,k,A,O,C,P,I,R){this.lightsActive&&s.prototype.batchTexture.call(this,t,e,n,r,i,o,a,u,c,h,l,f,d,p,v,g,m,y,b,w,x,_,T,E,S,k,A,O,C,P,I,R)},batchTextureFrame:function(t,e,n,r,i,o,a){this.lightsActive&&s.prototype.batchTextureFrame.call(this,t,e,n,r,i,o,a)}});l.LIGHT_COUNT=c,t.exports=l},function(t,e,n){var r=n(0),i=n(2),o=n(880),s=n(881),a=n(58),u=new r({Extends:a,initialize:function(t){t.vertShader=i(t,"vertShader",s),t.fragShader=i(t,"fragShader",o),t.attributes=i(t,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),a.call(this,t)},onRender:function(t,e){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",e.zoom)},batchPointLight:function(t,e,n,r,i,o,s,a,u,c,h,l){var f=t.color,d=t.intensity,p=t.radius,v=t.attenuation,g=f.r*d,m=f.g*d,y=f.b*d,b=e.alpha*t.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(n,r,h,l,p,v,g,m,y,b),this.batchLightVert(i,o,h,l,p,v,g,m,y,b),this.batchLightVert(s,a,h,l,p,v,g,m,y,b),this.batchLightVert(n,r,h,l,p,v,g,m,y,b),this.batchLightVert(s,a,h,l,p,v,g,m,y,b),this.batchLightVert(u,c,h,l,p,v,g,m,y,b)},batchLightVert:function(t,e,n,r,i,o,s,a,u,c){var h=this.vertexViewF32,l=this.vertexCount*this.currentShader.vertexComponentCount-1;h[++l]=t,h[++l]=e,h[++l]=n,h[++l]=r,h[++l]=i,h[++l]=o,h[++l]=s,h[++l]=a,h[++l]=u,h[++l]=c,this.vertexCount++}});t.exports=u},function(t,e,n){var r=n(0),i=n(2),o=n(108),s=new r({Extends:o,initialize:function(t){t.topology=5,t.batchSize=i(t,"batchSize",256),o.call(this,t)}});t.exports=s},function(t,e,n){var r=n(0),i=n(2),o=n(108),s=n(882),a=n(883),u=n(58),c=new r({Extends:o,initialize:function(t){t.fragShader=i(t,"fragShader",s),t.vertShader=i(t,"vertShader",a),t.forceZero=!0,o.call(this,t)},boot:function(){u.prototype.boot.call(this),this.set1i("uMainSampler",0)}});t.exports=c},function(t,e,n){var r=n(884),i=n(35),o=n(0),s=n(198),a=n(885),u=n(886),c=n(2),h=n(887),l=n(382),f=n(58),d=new o({Extends:f,initialize:function(t){t.renderTarget=c(t,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),t.vertShader=c(t,"vertShader",l),t.shaders=c(t,"shaders",[{name:"Copy",fragShader:u},{name:"AddBlend",fragShader:r},{name:"LinearBlend",fragShader:h},{name:"ColorMatrix",fragShader:a}]),t.attributes=c(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],t.batchSize=1,f.call(this,t),this.colorMatrix=new s,this.copyShader,this.addShader,this.linearShader,this.colorMatrixShader,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2},boot:function(){f.prototype.boot.call(this);var t=this.shaders,e=this.renderTargets;this.copyShader=t[0],this.addShader=t[1],this.linearShader=t[2],this.colorMatrixShader=t[3],this.fullFrame1=e[0],this.fullFrame2=e[1],this.halfFrame1=e[2],this.halfFrame2=e[3]},copyFrame:function(t,e,n,r,i){void 0===n&&(n=1),void 0===r&&(r=!0),void 0===i&&(i=!0);var o=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",n),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,t.texture),e?(o.viewport(0,0,e.width,e.height),o.bindFramebuffer(o.FRAMEBUFFER,e.framebuffer),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,e.texture,0)):o.viewport(0,0,t.width,t.height),r&&(i?o.clearColor(0,0,0,0):o.clearColor(0,0,0,1),o.clear(o.COLOR_BUFFER_BIT)),o.bufferData(o.ARRAY_BUFFER,this.vertexData,o.STATIC_DRAW),o.drawArrays(o.TRIANGLES,0,6),o.bindFramebuffer(o.FRAMEBUFFER,null),o.bindTexture(o.TEXTURE_2D,null)},blitFrame:function(t,e,n,r,o,s){void 0===n&&(n=1),void 0===r&&(r=!0),void 0===o&&(o=!0),void 0===s&&(s=!1);var a=this.gl;if(this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",n),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,t.texture),t.height>e.height)a.viewport(0,0,t.width,t.height),this.setTargetUVs(t,e);else{var u=e.height-t.height;a.viewport(0,u,t.width,t.height)}if(a.bindFramebuffer(a.FRAMEBUFFER,e.framebuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,e.texture,0),r&&(o?a.clearColor(0,0,0,0):a.clearColor(0,0,0,1),a.clear(a.COLOR_BUFFER_BIT)),s){var c=this.renderer.currentBlendMode;this.renderer.setBlendMode(i.ERASE)}a.bufferData(a.ARRAY_BUFFER,this.vertexData,a.STATIC_DRAW),a.drawArrays(a.TRIANGLES,0,6),s&&this.renderer.setBlendMode(c),a.bindFramebuffer(a.FRAMEBUFFER,null),a.bindTexture(a.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(t,e,n,r,i,o,s,a){void 0===s&&(s=!0),void 0===a&&(a=!0);var u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,t.framebuffer),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,t.texture,0),s&&(a?u.clearColor(0,0,0,0):u.clearColor(0,0,0,1),u.clear(u.COLOR_BUFFER_BIT)),u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,e.texture),u.copyTexSubImage2D(u.TEXTURE_2D,0,0,0,n,r,i,o),u.bindFramebuffer(u.FRAMEBUFFER,null),u.bindTexture(u.TEXTURE_2D,null)},copyToGame:function(t){var e=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t.texture),e.bufferData(e.ARRAY_BUFFER,this.vertexData,e.STATIC_DRAW),e.drawArrays(e.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(t,e,n,r){void 0===n&&(n=!0),void 0===r&&(r=this.colorMatrix);var i=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",r.getData()),this.set1f("uAlpha",r.alpha),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,t.texture),e?(i.viewport(0,0,e.width,e.height),i.bindFramebuffer(i.FRAMEBUFFER,e.framebuffer),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,e.texture,0)):i.viewport(0,0,t.width,t.height),n?i.clearColor(0,0,0,0):i.clearColor(0,0,0,1),i.clear(i.COLOR_BUFFER_BIT),i.bufferData(i.ARRAY_BUFFER,this.vertexData,i.STATIC_DRAW),i.drawArrays(i.TRIANGLES,0,6),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindTexture(i.TEXTURE_2D,null)},blendFrames:function(t,e,n,r,i,o){void 0===r&&(r=1),void 0===i&&(i=!0),void 0===o&&(o=this.linearShader);var s=this.gl;this.setShader(o),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",r),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,t.texture),s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,e.texture),n?(s.bindFramebuffer(s.FRAMEBUFFER,n.framebuffer),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,n.texture,0),s.viewport(0,0,n.width,n.height)):s.viewport(0,0,t.width,t.height),i?s.clearColor(0,0,0,0):s.clearColor(0,0,0,1),s.clear(s.COLOR_BUFFER_BIT),s.bufferData(s.ARRAY_BUFFER,this.vertexData,s.STATIC_DRAW),s.drawArrays(s.TRIANGLES,0,6),s.bindFramebuffer(s.FRAMEBUFFER,null),s.bindTexture(s.TEXTURE_2D,null)},blendFramesAdditive:function(t,e,n,r,i){this.blendFrames(t,e,n,r,i,this.addShader)},clearFrame:function(t,e){void 0===e&&(e=!0);var n=this.gl;n.viewport(0,0,t.width,t.height),n.bindFramebuffer(n.FRAMEBUFFER,t.framebuffer),e?n.clearColor(0,0,0,0):n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT);var r=this.renderer.currentFramebuffer;n.bindFramebuffer(n.FRAMEBUFFER,r)},setUVs:function(t,e,n,r,i,o,s,a){var u=this.vertexViewF32;u[2]=t,u[3]=e,u[6]=n,u[7]=r,u[10]=i,u[11]=o,u[14]=t,u[15]=e,u[18]=i,u[19]=o,u[22]=s,u[23]=a},setTargetUVs:function(t,e){var n=e.height/t.height;n=n>.5?.5-(n-.5):.5-n+.5,this.setUVs(0,n,0,1+n,1,1+n,1,n)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});t.exports=d},function(t,e){t.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join("\n")},function(t,e,n){var r=n(31),i=n(38),o=n(2);t.exports=function(t,e){var n=t.getContext("experimental-webgl"),s=o(e,"callback"),a=o(e,"type","image/png"),u=o(e,"encoder",.92),c=o(e,"x",0),h=o(e,"y",0),l=o(e,"getPixel",!1),f=o(e,"isFramebuffer",!1),d=f?o(e,"bufferWidth",1):n.drawingBufferWidth,p=f?o(e,"bufferHeight",1):n.drawingBufferHeight;if(l){var v=new Uint8Array(4),g=f?h:p-h;n.readPixels(c,g,1,1,n.RGBA,n.UNSIGNED_BYTE,v),s.call(null,new i(v[0],v[1],v[2],v[3]/255))}else{var m=o(e,"width",d),y=o(e,"height",p),b=new Uint8Array(m*y*4);n.readPixels(c,p-h-y,m,y,n.RGBA,n.UNSIGNED_BYTE,b);for(var w=r.createWebGL(this,m,y),x=w.getContext("2d"),_=x.getImageData(0,0,m,y),T=_.data,E=0;E<y;E++)for(var S=0;S<m;S++){var k=4*((y-E-1)*m+S),A=4*(E*m+S);T[A+0]=b[k+0],T[A+1]=b[k+1],T[A+2]=b[k+2],T[A+3]=b[k+3]}x.putImageData(_,0,0);var O=new Image;O.onerror=function(){s.call(null),r.remove(w)},O.onload=function(){s.call(null,O),r.remove(w)},O.src=w.toDataURL(a,u)}}},function(t,e,n){var r=n(33);t.exports=function(t){var e=t.config;if(!e.hideBanner){var n="WebGL";e.renderType===r.CANVAS?n="Canvas":e.renderType===r.HEADLESS&&(n="Headless");var i,o=e.audio,s=t.device.audio;if(i=s.webAudio&&!o.disableWebAudio?"Web Audio":o.noAudio||!s.webAudio&&!s.audioData?"No Audio":"HTML5 Audio",t.device.browser.ie)window.console&&console.log("Phaser v"+r.VERSION+" / https://phaser.io");else{var a,u="",c=[u];Array.isArray(e.bannerBackgroundColor)?(e.bannerBackgroundColor.forEach((function(t){u=u.concat("%c "),c.push("background: "+t),a=t})),c[c.length-1]="color: "+e.bannerTextColor+"; background: "+a):(u=u.concat("%c "),c.push("color: "+e.bannerTextColor+"; background: "+e.bannerBackgroundColor)),c.push("background: transparent"),e.gameTitle&&(u=u.concat(e.gameTitle),e.gameVersion&&(u=u.concat(" v"+e.gameVersion)),e.hidePhaser||(u=u.concat(" / "))),e.hidePhaser||(u=u.concat("Phaser v"+r.VERSION+" ("+n+" | "+i+")")),u=u.concat(" %c "+e.gameURL),c[0]=u,console.log.apply(console,c)}}}},function(t,e,n){var r=n(0),i=n(6),o=n(1),s=n(386),a=new r({initialize:function(t,e){this.game=t,this.raf=new s,this.started=!1,this.running=!1,this.minFps=i(e,"min",5),this.targetFps=i(e,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=o,this.forceSetTimeOut=i(e,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=i(e,"deltaHistory",10),this.panicMax=i(e,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=i(e,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var t=window.performance.now();this.time=t,this.lastTime=t,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0;for(var e=0;e<this.deltaSmoothingMax;e++)this.deltaHistory[e]=Math.min(this._target,this.deltaHistory[e]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(t){if(this.started)return this;this.started=!0,this.running=!0;for(var e=0;e<this.deltaSmoothingMax;e++)this.deltaHistory[e]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=t,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var t=window.performance.now();this.now=t;var e=t-this.lastTime;e<0&&(e=0),this.rawDelta=e;var n=this.deltaIndex,r=this.deltaHistory,i=this.deltaSmoothingMax,o=e,s=e;if(this.smoothStep){(this._coolDown>0||!this.inFocus)&&(this._coolDown--,o=Math.min(o,this._target)),o>this._min&&(o=r[n],o=Math.min(o,this._min)),r[n]=o,this.deltaIndex++,this.deltaIndex>i&&(this.deltaIndex=0),s=0;for(var a=0;a<i;a++)s+=r[a];s/=i}this.delta=s,this.time+=this.rawDelta,t>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=t+1e3,this.framesThisSecond=0),this.framesThisSecond++;var u=s/this._target;this.callback(t,s,u),this.lastTime=t,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(t){this.running||(t&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=o,this.raf=null,this.game=null}});t.exports=a},function(t,e,n){var r=n(0),i=n(1),o=new r({initialize:function(){this.isRunning=!1,this.callback=i,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var t=this;this.step=function e(){var n=window.performance.now();t.lastTime=t.tick,t.tick=n,t.callback(n),t.timeOutID=window.requestAnimationFrame(e)},this.stepTimeout=function e(){var n=Date.now(),r=Math.min(Math.max(2*t.target+t.tick-n,0),t.target);t.lastTime=t.tick,t.tick=n,t.callback(n),t.timeOutID=window.setTimeout(e,r)}},start:function(t,e,n){this.isRunning||(this.callback=t,this.isSetTimeOut=e,this.target=n,this.isRunning=!0,this.timeOutID=e?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=i}});t.exports=o},function(t,e,n){var r=n(22);t.exports=function(t){var e,n=t.events;void 0!==document.hidden?e="visibilitychange":["webkit","moz","ms"].forEach((function(t){void 0!==document[t+"Hidden"]&&(document.hidden=function(){return document[t+"Hidden"]},e=t+"visibilitychange")})),e&&document.addEventListener(e,(function(t){document.hidden||"pause"===t.type?n.emit(r.HIDDEN):n.emit(r.VISIBLE)}),!1),window.onblur=function(){n.emit(r.BLUR)},window.onfocus=function(){n.emit(r.FOCUS)},window.focus&&t.config.autoFocus&&window.focus()}},function(t,e,n){var r=n(389),i=n(31),o=n(6);t.exports=function(t){var e=o(t,"data",[]),n=o(t,"canvas",null),s=o(t,"palette",r),a=o(t,"pixelWidth",1),u=o(t,"pixelHeight",a),c=o(t,"resizeCanvas",!0),h=o(t,"clearCanvas",!0),l=o(t,"preRender",null),f=o(t,"postRender",null),d=Math.floor(Math.abs(e[0].length*a)),p=Math.floor(Math.abs(e.length*u));n||(n=i.create2D(this,d,p),c=!1,h=!1),c&&(n.width=d,n.height=p);var v=n.getContext("2d");h&&v.clearRect(0,0,d,p),l&&l(n,v);for(var g=0;g<e.length;g++)for(var m=e[g],y=0;y<m.length;y++){var b=m[y];"."!==b&&" "!==b&&(v.fillStyle=s[b],v.fillRect(y*a,g*u,a,u))}return f&&f(n,v),n}},function(t,e){t.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(t,e,n){var r=n(0),i=n(358),o=n(94),s=n(3),a=new r({Extends:o,initialize:function(t,e,n,r){o.call(this,"CubicBezierCurve"),Array.isArray(t)&&(r=new s(t[6],t[7]),n=new s(t[4],t[5]),e=new s(t[2],t[3]),t=new s(t[0],t[1])),this.p0=t,this.p1=e,this.p2=n,this.p3=r},getStartPoint:function(t){return void 0===t&&(t=new s),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,e){void 0===e&&(e=new s);var n=this.p0,r=this.p1,o=this.p2,a=this.p3;return e.set(i(t,n.x,r.x,o.x,a.x),i(t,n.y,r.y,o.y,a.y))},draw:function(t,e){void 0===e&&(e=32);var n=this.getPoints(e);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var r=1;r<n.length;r++)t.lineTo(n[r].x,n[r].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});a.fromJSON=function(t){var e=t.points,n=new s(e[0],e[1]),r=new s(e[2],e[3]),i=new s(e[4],e[5]),o=new s(e[6],e[7]);return new a(n,r,i,o)},t.exports=a},function(t,e,n){var r=n(0),i=n(94),o=n(36),s=n(6),a=n(196),u=n(3),c=new r({Extends:i,initialize:function(t,e,n,r,a,c,h,l){if("object"===typeof t){var f=t;t=s(f,"x",0),e=s(f,"y",0),n=s(f,"xRadius",0),r=s(f,"yRadius",n),a=s(f,"startAngle",0),c=s(f,"endAngle",360),h=s(f,"clockwise",!1),l=s(f,"rotation",0)}else void 0===r&&(r=n),void 0===a&&(a=0),void 0===c&&(c=360),void 0===h&&(h=!1),void 0===l&&(l=0);i.call(this,"EllipseCurve"),this.p0=new u(t,e),this._xRadius=n,this._yRadius=r,this._startAngle=o(a),this._endAngle=o(c),this._clockwise=h,this._rotation=o(l)},getStartPoint:function(t){return void 0===t&&(t=new u),this.getPoint(0,t)},getResolution:function(t){return 2*t},getPoint:function(t,e){void 0===e&&(e=new u);for(var n=2*Math.PI,r=this._endAngle-this._startAngle,i=Math.abs(r)<Number.EPSILON;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=i?0:n),this._clockwise&&!i&&(r===n?r=-n:r-=n);var o=this._startAngle+t*r,s=this.p0.x+this._xRadius*Math.cos(o),a=this.p0.y+this._yRadius*Math.sin(o);if(0!==this._rotation){var c=Math.cos(this._rotation),h=Math.sin(this._rotation),l=s-this.p0.x,f=a-this.p0.y;s=l*c-f*h+this.p0.x,a=l*h+f*c+this.p0.y}return e.set(s,a)},setXRadius:function(t){return this.xRadius=t,this},setYRadius:function(t){return this.yRadius=t,this},setWidth:function(t){return this.xRadius=t/2,this},setHeight:function(t){return this.yRadius=t/2,this},setStartAngle:function(t){return this.startAngle=t,this},setEndAngle:function(t){return this.endAngle=t,this},setClockwise:function(t){return this.clockwise=t,this},setRotation:function(t){return this.rotation=t,this},x:{get:function(){return this.p0.x},set:function(t){this.p0.x=t}},y:{get:function(){return this.p0.y},set:function(t){this.p0.y=t}},xRadius:{get:function(){return this._xRadius},set:function(t){this._xRadius=t}},yRadius:{get:function(){return this._yRadius},set:function(t){this._yRadius=t}},startAngle:{get:function(){return a(this._startAngle)},set:function(t){this._startAngle=o(t)}},endAngle:{get:function(){return a(this._endAngle)},set:function(t){this._endAngle=o(t)}},clockwise:{get:function(){return this._clockwise},set:function(t){this._clockwise=t}},angle:{get:function(){return a(this._rotation)},set:function(t){this._rotation=o(t)}},rotation:{get:function(){return this._rotation},set:function(t){this._rotation=t}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:a(this._startAngle),endAngle:a(this._endAngle),clockwise:this._clockwise,rotation:a(this._rotation)}}});c.fromJSON=function(t){return new c(t)},t.exports=c},function(t,e,n){var r=n(0),i=n(94),o=n(199),s=n(10),a=n(3),u=new r({Extends:i,initialize:function(t,e){i.call(this,"LineCurve"),Array.isArray(t)&&(e=new a(t[2],t[3]),t=new a(t[0],t[1])),this.p0=t,this.p1=e,this.arcLengthDivisions=1},getBounds:function(t){return void 0===t&&(t=new s),o([this.p0,this.p1],t)},getStartPoint:function(t){return void 0===t&&(t=new a),t.copy(this.p0)},getResolution:function(t){return void 0===t&&(t=1),t},getPoint:function(t,e){return void 0===e&&(e=new a),1===t?e.copy(this.p1):(e.copy(this.p1).subtract(this.p0).scale(t).add(this.p0),e)},getPointAt:function(t,e){return this.getPoint(t,e)},getTangent:function(t,e){return void 0===e&&(e=new a),e.copy(this.p1).subtract(this.p0).normalize(),e},getUtoTmapping:function(t,e,n){var r;if(e){var i=this.getLengths(n),o=i[i.length-1];r=Math.min(e,o)/o}else r=t;return r},draw:function(t){return t.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});u.fromJSON=function(t){var e=t.points,n=new a(e[0],e[1]),r=new a(e[2],e[3]);return new u(n,r)},t.exports=u},function(t,e,n){var r=n(0),i=n(3),o=new r({initialize:function(t,e){this.active=!1,this.p0=new i(t,e)},getPoint:function(t,e){return void 0===e&&(e=new i),e.copy(this.p0)},getPointAt:function(t,e){return this.getPoint(t,e)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});t.exports=o},function(t,e,n){var r=n(0),i=n(94),o=n(359),s=n(3),a=new r({Extends:i,initialize:function(t,e,n){i.call(this,"QuadraticBezier"),Array.isArray(t)&&(n=new s(t[4],t[5]),e=new s(t[2],t[3]),t=new s(t[0],t[1])),this.p0=t,this.p1=e,this.p2=n},getStartPoint:function(t){return void 0===t&&(t=new s),t.copy(this.p0)},getResolution:function(t){return t},getPoint:function(t,e){void 0===e&&(e=new s);var n=this.p0,r=this.p1,i=this.p2;return e.set(o(t,n.x,r.x,i.x),o(t,n.y,r.y,i.y))},draw:function(t,e){void 0===e&&(e=32);var n=this.getPoints(e);t.beginPath(),t.moveTo(this.p0.x,this.p0.y);for(var r=1;r<n.length;r++)t.lineTo(n[r].x,n[r].y);return t.strokePath(),t},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});a.fromJSON=function(t){var e=t.points,n=new s(e[0],e[1]),r=new s(e[2],e[3]),i=new s(e[4],e[5]);return new a(n,r,i)},t.exports=a},function(t,e,n){var r=n(194),i=n(0),o=n(94),s=n(3),a=new i({Extends:o,initialize:function(t){void 0===t&&(t=[]),o.call(this,"SplineCurve"),this.points=[],this.addPoints(t)},addPoints:function(t){for(var e=0;e<t.length;e++){var n=new s;"number"===typeof t[e]?(n.x=t[e],n.y=t[e+1],e++):Array.isArray(t[e])?(n.x=t[e][0],n.y=t[e][1]):(n.x=t[e].x,n.y=t[e].y),this.points.push(n)}return this},addPoint:function(t,e){var n=new s(t,e);return this.points.push(n),n},getStartPoint:function(t){return void 0===t&&(t=new s),t.copy(this.points[0])},getResolution:function(t){return t*this.points.length},getPoint:function(t,e){void 0===e&&(e=new s);var n=this.points,i=(n.length-1)*t,o=Math.floor(i),a=i-o,u=n[0===o?o:o-1],c=n[o],h=n[o>n.length-2?n.length-1:o+1],l=n[o>n.length-3?n.length-1:o+2];return e.set(r(a,u.x,c.x,h.x,l.x),r(a,u.y,c.y,h.y,l.y))},toJSON:function(){for(var t=[],e=0;e<this.points.length;e++)t.push(this.points[e].x),t.push(this.points[e].y);return{type:this.type,points:t}}});a.fromJSON=function(t){return new a(t.points)},t.exports=a},function(t,e,n){var r=new(n(0))({initialize:function(t,e,n,r){e&&""!==e||(e=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join("\n")),n&&""!==n||(n=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join("\n")),void 0===r&&(r=null),this.key=t,this.fragmentSrc=e,this.vertexSrc=n,this.uniforms=r}});t.exports=r},function(t,e,n){var r=n(38);r.ColorSpectrum=n(909),r.ColorToRGBA=n(910),r.ComponentToHex=n(398),r.GetColor=n(103),r.GetColor32=n(328),r.HexStringToColor=n(327),r.HSLToColor=n(911),r.HSVColorWheel=n(912),r.HSVToRGB=n(188),r.HueToComponent=n(399),r.IntegerToColor=n(189),r.IntegerToRGB=n(330),r.Interpolate=n(913),r.ObjectToColor=n(331),r.RandomRGB=n(914),r.RGBStringToColor=n(332),r.RGBToHSV=n(329),r.RGBToString=n(915),r.ValueToColor=n(187),t.exports=r},function(t,e){t.exports=function(t){var e=t.toString(16);return 1===e.length?"0"+e:e}},function(t,e){t.exports=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}},function(t,e,n){var r=n(105);t.exports=function(t){if("complete"!==document.readyState&&"interactive"!==document.readyState){var e=function e(){document.removeEventListener("deviceready",e,!0),document.removeEventListener("DOMContentLoaded",e,!0),window.removeEventListener("load",e,!0),t()};document.body?r.cordova?document.addEventListener("deviceready",e,!1):(document.addEventListener("DOMContentLoaded",e,!0),window.addEventListener("load",e,!0)):window.setTimeout(e,20)}else t()}},function(t,e){t.exports=function(t){if(!t)return window.innerHeight;var e=Math.abs(window.orientation),n={w:0,h:0},r=document.createElement("div");return r.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(r),n.w=90===e?r.offsetHeight:window.innerWidth,n.h=90===e?window.innerWidth:r.offsetHeight,document.documentElement.removeChild(r),r=null,90!==Math.abs(window.orientation)?n.h:n.w}},function(t,e,n){var r=n(201);t.exports=function(t,e){var n=window.screen,i=!!n&&(n.orientation||n.mozOrientation||n.msOrientation);return i&&"string"===typeof i.type?i.type:"string"===typeof i?i:"number"===typeof window.orientation?0===window.orientation||180===window.orientation?r.ORIENTATION.PORTRAIT:r.ORIENTATION.LANDSCAPE:window.matchMedia?window.matchMedia("(orientation: portrait)").matches?r.ORIENTATION.PORTRAIT:window.matchMedia("(orientation: landscape)").matches?r.ORIENTATION.LANDSCAPE:void 0:e>t?r.ORIENTATION.PORTRAIT:r.ORIENTATION.LANDSCAPE}},function(t,e){t.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(t,e){t.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(t,e){t.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(t,e){t.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(t,e){t.exports=function(t){var e;return""!==t&&("string"===typeof t?e=document.getElementById(t):t&&1===t.nodeType&&(e=t)),e||(e=document.body),e}},function(t,e){t.exports=function(t){var e="";try{window.DOMParser?e=(new DOMParser).parseFromString(t,"text/xml"):(e=new ActiveXObject("Microsoft.XMLDOM")).loadXML(t)}catch(n){e=null}return e&&e.documentElement&&!e.getElementsByTagName("parsererror").length?e:null}},function(t,e,n){var r=n(0),i=n(203),o=n(9),s=n(51),a=n(22),u=n(410),c=n(411),h=n(412),l=n(413),f=n(25),d=n(177),p=new r({initialize:function(t,e){this.game=t,this.scaleManager,this.canvas,this.config=e,this.enabled=!0,this.events=new o,this.isOver=!0,this.defaultCursor="",this.keyboard=e.inputKeyboard?new u(this):null,this.mouse=e.inputMouse?new c(this):null,this.touch=e.inputTouch?new l(this):null,this.pointers=[],this.pointersTotal=e.inputActivePointers,e.inputTouch&&1===this.pointersTotal&&(this.pointersTotal=2);for(var n=0;n<=this.pointersTotal;n++){var r=new h(this,n);r.smoothFactor=e.inputSmoothFactor,this.pointers.push(r)}this.mousePointer=e.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new f,this._tempMatrix2=new f,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],t.events.once(a.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(s.MANAGER_BOOT),this.game.events.on(a.PRE_RENDER,this.preRender,this),this.game.events.once(a.DESTROY,this.destroy,this)},setCanvasOver:function(t){this.isOver=!0,this.events.emit(s.GAME_OVER,t)},setCanvasOut:function(t){this.isOver=!1,this.events.emit(s.GAME_OUT,t)},preRender:function(){var t=this.game.loop.now,e=this.game.loop.delta,n=this.game.scene.getScenes(!0,!0);this.time=t,this.events.emit(s.MANAGER_UPDATE);for(var r=0;r<n.length;r++){var i=n[r];if(i.sys.input&&i.sys.input.updatePoll(t,e)&&this.globalTopOnly)return}},setDefaultCursor:function(t){this.defaultCursor=t,this.canvas.style.cursor!==t&&(this.canvas.style.cursor=t)},setCursor:function(t){t.cursor&&(this.canvas.style.cursor=t.cursor)},resetCursor:function(t){t.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(t){void 0===t&&(t=1);var e=[];this.pointersTotal+t>10&&(t=10-this.pointersTotal);for(var n=0;n<t;n++){var r=this.pointers.length,i=new h(this,r);i.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(i),this.pointersTotal++,e.push(i)}return e},updateInputPlugins:function(t,e){var n=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var r=0;r<n.length;r++){var i=n[r];if(i.sys.input&&(i.sys.input.update(t,e)&&this.globalTopOnly||this._tempSkip))return}},onTouchStart:function(t){for(var e=this.pointers,n=[],r=0;r<t.changedTouches.length;r++)for(var o=t.changedTouches[r],s=1;s<this.pointersTotal;s++){var a=e[s];if(!a.active){a.touchstart(o,t),this.activePointer=a,n.push(a);break}}this.updateInputPlugins(i.TOUCH_START,n)},onTouchMove:function(t){for(var e=this.pointers,n=[],r=0;r<t.changedTouches.length;r++)for(var o=t.changedTouches[r],s=1;s<this.pointersTotal;s++){var a=e[s];if(a.active&&a.identifier===o.identifier){a.touchmove(o,t),this.activePointer=a,n.push(a);break}}this.updateInputPlugins(i.TOUCH_MOVE,n)},onTouchEnd:function(t){for(var e=this.pointers,n=[],r=0;r<t.changedTouches.length;r++)for(var o=t.changedTouches[r],s=1;s<this.pointersTotal;s++){var a=e[s];if(a.active&&a.identifier===o.identifier){a.touchend(o,t),n.push(a);break}}this.updateInputPlugins(i.TOUCH_END,n)},onTouchCancel:function(t){for(var e=this.pointers,n=[],r=0;r<t.changedTouches.length;r++)for(var o=t.changedTouches[r],s=1;s<this.pointersTotal;s++){var a=e[s];if(a.active&&a.identifier===o.identifier){a.touchcancel(o,t),n.push(a);break}}this.updateInputPlugins(i.TOUCH_CANCEL,n)},onMouseDown:function(t){var e=this.mousePointer;e.down(t),e.updateMotion(),this.activePointer=e,this.updateInputPlugins(i.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(t){var e=this.mousePointer;e.move(t),e.updateMotion(),this.activePointer=e,this.updateInputPlugins(i.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(t){var e=this.mousePointer;e.up(t),e.updateMotion(),this.activePointer=e,this.updateInputPlugins(i.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(t){var e=this.mousePointer;e.wheel(t),this.activePointer=e,this.updateInputPlugins(i.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(t){var e=this.mouse.locked;this.mousePointer.locked=e,this.events.emit(s.POINTERLOCK_CHANGE,t,e)},inputCandidate:function(t,e){var n=t.input;if(!n||!n.enabled||!n.alwaysEnabled&&!t.willRender(e))return!1;var r=!0,i=t.parentContainer;if(i)do{if(!i.willRender(e)){r=!1;break}i=i.parentContainer}while(i);return r},hitTest:function(t,e,n,r){void 0===r&&(r=this._tempHitTest);var i=this._tempPoint,o=n.scrollX,s=n.scrollY;r.length=0;var a=t.x,u=t.y;n.getWorldPoint(a,u,i),t.worldX=i.x,t.worldY=i.y;for(var c={x:0,y:0},h=this._tempMatrix,l=this._tempMatrix2,f=0;f<e.length;f++){var p=e[f];if(this.inputCandidate(p,n)){var v=i.x+o*p.scrollFactorX-o,g=i.y+s*p.scrollFactorY-s;p.parentContainer?(p.getWorldTransformMatrix(h,l),h.applyInverse(v,g,c)):d(v,g,p.x,p.y,p.rotation,p.scaleX,p.scaleY,c),this.pointWithinHitArea(p,c.x,c.y)&&r.push(p)}}return r},pointWithinHitArea:function(t,e,n){e+=t.displayOriginX,n+=t.displayOriginY;var r=t.input;return!(!r||!r.hitAreaCallback(r.hitArea,e,n,t))&&(r.localX=e,r.localY=n,!0)},pointWithinInteractiveObject:function(t,e,n){return!!t.hitArea&&(e+=t.gameObject.displayOriginX,n+=t.gameObject.displayOriginY,t.localX=e,t.localY=n,t.hitAreaCallback(t.hitArea,e,n,t))},transformPointer:function(t,e,n,r){var i=t.position,o=t.prevPosition;o.x=i.x,o.y=i.y;var s=this.scaleManager.transformX(e),a=this.scaleManager.transformY(n),u=t.smoothFactor;r&&0!==u?(i.x=s*u+o.x*(1-u),i.y=a*u+o.y*(1-u)):(i.x=s,i.y=a)},destroy:function(){this.events.removeAllListeners(),this.game.events.off(a.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var t=0;t<this.pointers.length;t++)this.pointers[t].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});t.exports=p},function(t,e,n){var r=n(93),i=n(0),o=n(22),s=n(51),a=n(143),u=n(1),c=new i({initialize:function(t){this.manager=t,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.target,this.onKeyDown=u,this.onKeyUp=u,t.events.once(s.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputKeyboard,this.target=t.inputKeyboardEventTarget,this.addCapture(t.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(o.POST_STEP,this.postUpdate,this)},startListeners:function(){var t=this;this.onKeyDown=function(e){if(!e.defaultPrevented&&t.enabled&&t.manager){t.queue.push(e),t.manager.events.emit(s.MANAGER_PROCESS);var n=e.altKey||e.ctrlKey||e.shiftKey||e.metaKey;t.preventDefault&&!n&&t.captures.indexOf(e.keyCode)>-1&&e.preventDefault()}},this.onKeyUp=function(e){if(!e.defaultPrevented&&t.enabled&&t.manager){t.queue.push(e),t.manager.events.emit(s.MANAGER_PROCESS);var n=e.altKey||e.ctrlKey||e.shiftKey||e.metaKey;t.preventDefault&&!n&&t.captures.indexOf(e.keyCode)>-1&&e.preventDefault()}};var e=this.target;e&&(e.addEventListener("keydown",this.onKeyDown,!1),e.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var t=this.target;t.removeEventListener("keydown",this.onKeyDown,!1),t.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(t){"string"===typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var e=this.captures,n=0;n<t.length;n++){var r=t[n];"string"===typeof r&&(r=a[r.trim().toUpperCase()]),-1===e.indexOf(r)&&e.push(r)}this.preventDefault=e.length>0},removeCapture:function(t){"string"===typeof t&&(t=t.split(",")),Array.isArray(t)||(t=[t]);for(var e=this.captures,n=0;n<t.length;n++){var i=t[n];"string"===typeof i&&(i=a[i.toUpperCase()]),r(e,i)}this.preventDefault=e.length>0},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(o.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});t.exports=c},function(t,e,n){var r=n(0),i=n(191),o=n(51),s=n(1),a=new r({initialize:function(t){this.manager=t,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.target,this.locked=!1,this.onMouseMove=s,this.onMouseDown=s,this.onMouseUp=s,this.onMouseDownWindow=s,this.onMouseUpWindow=s,this.onMouseOver=s,this.onMouseOut=s,this.onMouseWheel=s,this.pointerLockChange=s,this.isTop=!0,t.events.once(o.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputMouse,this.target=t.inputMouseEventTarget,this.passive=t.inputMousePassive,this.preventDefaultDown=t.inputMousePreventDefaultDown,this.preventDefaultUp=t.inputMousePreventDefaultUp,this.preventDefaultMove=t.inputMousePreventDefaultMove,this.preventDefaultWheel=t.inputMousePreventDefaultWheel,this.target?"string"===typeof this.target&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),this},requestPointerLock:function(){if(i.pointerLock){var t=this.target;t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock()}},releasePointerLock:function(){i.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var t=this.target;if(t){var e=this,n=this.manager,r=n.canvas,o=window&&window.focus&&n.game.config.autoFocus;this.onMouseMove=function(t){!t.defaultPrevented&&e.enabled&&n&&n.enabled&&(n.onMouseMove(t),e.preventDefaultMove&&t.preventDefault())},this.onMouseDown=function(t){o&&window.focus(),!t.defaultPrevented&&e.enabled&&n&&n.enabled&&(n.onMouseDown(t),e.preventDefaultDown&&t.target===r&&t.preventDefault())},this.onMouseDownWindow=function(t){!t.defaultPrevented&&e.enabled&&n&&n.enabled&&t.target!==r&&n.onMouseDown(t)},this.onMouseUp=function(t){!t.defaultPrevented&&e.enabled&&n&&n.enabled&&(n.onMouseUp(t),e.preventDefaultUp&&t.target===r&&t.preventDefault())},this.onMouseUpWindow=function(t){!t.defaultPrevented&&e.enabled&&n&&n.enabled&&t.target!==r&&n.onMouseUp(t)},this.onMouseOver=function(t){!t.defaultPrevented&&e.enabled&&n&&n.enabled&&n.setCanvasOver(t)},this.onMouseOut=function(t){!t.defaultPrevented&&e.enabled&&n&&n.enabled&&n.setCanvasOut(t)},this.onMouseWheel=function(t){!t.defaultPrevented&&e.enabled&&n&&n.enabled&&n.onMouseWheel(t),e.preventDefaultWheel&&t.target===r&&t.preventDefault()};var s={passive:!0};if(t.addEventListener("mousemove",this.onMouseMove),t.addEventListener("mousedown",this.onMouseDown),t.addEventListener("mouseup",this.onMouseUp),t.addEventListener("mouseover",this.onMouseOver,s),t.addEventListener("mouseout",this.onMouseOut,s),this.preventDefaultWheel?t.addEventListener("wheel",this.onMouseWheel,{passive:!1}):t.addEventListener("wheel",this.onMouseWheel,s),window&&n.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,s),window.top.addEventListener("mouseup",this.onMouseUpWindow,s)}catch(a){window.addEventListener("mousedown",this.onMouseDownWindow,s),window.addEventListener("mouseup",this.onMouseUpWindow,s),this.isTop=!1}i.pointerLock&&(this.pointerLockChange=function(t){var r=e.target;e.locked=document.pointerLockElement===r||document.mozPointerLockElement===r||document.webkitPointerLockElement===r,n.onPointerLockChange(t)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var t=this.target;t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("mouseover",this.onMouseOver),t.removeEventListener("mouseout",this.onMouseOut),window&&((t=this.isTop?window.top:window).removeEventListener("mousedown",this.onMouseDownWindow),t.removeEventListener("mouseup",this.onMouseUpWindow)),i.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=a},function(t,e,n){var r=n(349),i=n(0),o=n(50),s=n(124),a=n(360),u=n(3),c=n(105),h=new i({initialize:function(t,e){this.manager=t,this.id=e,this.event,this.downElement,this.upElement,this.camera=null,this.button=0,this.buttons=0,this.position=new u,this.prevPosition=new u,this.midPoint=new u(-1,-1),this.velocity=new u,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=0===e,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(t){var e=t.getWorldPoint(this.x,this.y);return this.worldX=e.x,this.worldY=e.y,this},positionToCamera:function(t,e){return t.getWorldPoint(this.x,this.y,e)},updateMotion:function(){var t=this.position.x,e=this.position.y,n=this.midPoint.x,i=this.midPoint.y;if(t!==n||e!==i){var o=a(this.motionFactor,n,t),u=a(this.motionFactor,i,e);s(o,t,.1)&&(o=t),s(u,e,.1)&&(u=e),this.midPoint.set(o,u);var c=t-o,h=e-u;this.velocity.set(c,h),this.angle=r(o,u,t,e),this.distance=Math.sqrt(c*c+h*h)}},up:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),0===this.buttons&&(this.isDown=!1,this.upTime=t.timeStamp,this.wasTouch=!1)},down:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.button=t.button,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),0===t.button&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),c.macOS&&t.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=t.timeStamp),this.wasTouch=!1},move:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.locked&&(this.movementX=t.movementX||t.mozMovementX||t.webkitMovementX||0,this.movementY=t.movementY||t.mozMovementY||t.webkitMovementY||0),this.moveTime=t.timeStamp,this.wasTouch=!1},wheel:function(t){"buttons"in t&&(this.buttons=t.buttons),this.event=t,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.deltaX=t.deltaX,this.deltaY=t.deltaY,this.deltaZ=t.deltaZ,this.wasTouch=!1},touchstart:function(t,e){t.pointerId&&(this.pointerId=t.pointerId),this.identifier=t.identifier,this.target=t.target,this.active=!0,this.buttons=1,this.event=e,this.downElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=e.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(t,e){this.event=e,this.manager.transformPointer(this,t.pageX,t.pageY,!0),this.moveTime=e.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(t,e){this.buttons=0,this.event=e,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=e.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(t,e){this.buttons=0,this.event=e,this.upElement=t.target,this.manager.transformPointer(this,t.pageX,t.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=e.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return 0===this.buttons},leftButtonDown:function(){return!!(1&this.buttons)},rightButtonDown:function(){return!!(2&this.buttons)},middleButtonDown:function(){return!!(4&this.buttons)},backButtonDown:function(){return!!(8&this.buttons)},forwardButtonDown:function(){return!!(16&this.buttons)},leftButtonReleased:function(){return 0===this.button&&!this.isDown},rightButtonReleased:function(){return 2===this.button&&!this.isDown},middleButtonReleased:function(){return 1===this.button&&!this.isDown},backButtonReleased:function(){return 3===this.button&&!this.isDown},forwardButtonReleased:function(){return 4===this.button&&!this.isDown},getDistance:function(){return this.isDown?o(this.downX,this.downY,this.x,this.y):o(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?r(this.downX,this.downY,this.x,this.y):r(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(t,e){void 0===t&&(t=10),void 0===e&&(e=[]);for(var n=this.prevPosition.x,r=this.prevPosition.y,i=this.position.x,o=this.position.y,s=0;s<t;s++){var u=1/t*s;e[s]={x:a(u,n,i),y:a(u,r,o)}}return e},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},time:{get:function(){return this.event?this.event.timeStamp:0}}});t.exports=h},function(t,e,n){var r=n(0),i=n(51),o=n(1),s=new r({initialize:function(t){this.manager=t,this.capture=!0,this.enabled=!1,this.target,this.onTouchStart=o,this.onTouchStartWindow=o,this.onTouchMove=o,this.onTouchEnd=o,this.onTouchEndWindow=o,this.onTouchCancel=o,this.onTouchCancelWindow=o,this.onTouchOver=o,this.onTouchOut=o,t.events.once(i.MANAGER_BOOT,this.boot,this)},boot:function(){var t=this.manager.config;this.enabled=t.inputTouch,this.target=t.inputTouchEventTarget,this.capture=t.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),t.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",(function(t){return t.preventDefault(),!1})),this},startListeners:function(){var t=this,e=this.manager.canvas,n=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(r){n&&window.focus(),!r.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchStart(r),t.capture&&r.cancelable&&r.target===e&&r.preventDefault())},this.onTouchStartWindow=function(n){!n.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&n.target!==e&&t.manager.onTouchStart(n)},this.onTouchMove=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchMove(e),t.capture&&e.cancelable&&e.preventDefault())},this.onTouchEnd=function(n){!n.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchEnd(n),t.capture&&n.cancelable&&n.target===e&&n.preventDefault())},this.onTouchEndWindow=function(n){!n.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&n.target!==e&&t.manager.onTouchEnd(n)},this.onTouchCancel=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&(t.manager.onTouchCancel(e),t.capture&&e.preventDefault())},this.onTouchCancelWindow=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.onTouchCancel(e)},this.onTouchOver=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOver(e)},this.onTouchOut=function(e){!e.defaultPrevented&&t.enabled&&t.manager&&t.manager.enabled&&t.manager.setCanvasOut(e)};var r=this.target;if(r){var i={passive:!0},o={passive:!1};r.addEventListener("touchstart",this.onTouchStart,this.capture?o:i),r.addEventListener("touchmove",this.onTouchMove,this.capture?o:i),r.addEventListener("touchend",this.onTouchEnd,this.capture?o:i),r.addEventListener("touchcancel",this.onTouchCancel,this.capture?o:i),r.addEventListener("touchover",this.onTouchOver,this.capture?o:i),r.addEventListener("touchout",this.onTouchOut,this.capture?o:i),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,o),window.addEventListener("touchend",this.onTouchEndWindow,o),window.addEventListener("touchcancel",this.onTouchCancelWindow,o)),this.enabled=!0}},stopListeners:function(){var t=this.target;t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("touchcancel",this.onTouchCancel),t.removeEventListener("touchover",this.onTouchOver),t.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});t.exports=s},function(t,e,n){var r=n(0),i=n(22),o=n(9),s=n(8),a=n(16),u=n(5),c=n(2),h=n(24),l=n(93),f=new r({Extends:o,initialize:function(t){o.call(this),this.game=t,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],t.isBooted?this.boot():t.events.once(i.BOOT,this.boot,this)},boot:function(){var t,e,n,r,o,s,a,u=this.game.config,h=u.installGlobalPlugins;for(h=h.concat(this._pendingGlobal),t=0;t<h.length;t++)e=h[t],n=c(e,"key",null),r=c(e,"plugin",null),o=c(e,"start",!1),s=c(e,"mapping",null),a=c(e,"data",null),n&&(r?this.install(n,r,o,s,a):console.warn("Missing `plugin` for key: "+n));for(h=(h=u.installScenePlugins).concat(this._pendingScene),t=0;t<h.length;t++)e=h[t],n=c(e,"key",null),r=c(e,"plugin",null),s=c(e,"mapping",null),n&&(r?this.installScenePlugin(n,r,s):console.warn("Missing `plugin` for key: "+n));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(i.DESTROY,this.destroy,this)},addToScene:function(t,e,n){var r,i,o,s=this.game,a=t.scene,u=t.settings.map,c=t.settings.isBooted;for(r=0;r<e.length;r++)s[i=e[r]]?(t[i]=s[i],u.hasOwnProperty(i)&&(a[u[i]]=t[i])):"game"===i&&u.hasOwnProperty(i)&&(a[u[i]]=s);for(var l=0;l<n.length;l++)for(o=n[l],r=0;r<o.length;r++)if(i=o[r],h.hasCore(i)){var f=h.getCore(i),d=f.mapping,p=new f.plugin(a,this,d);t[d]=p,f.custom?a[d]=p:u.hasOwnProperty(d)&&(a[u[d]]=p),c&&p.boot()}for(o=this.plugins,r=0;r<o.length;r++){var v=o[r];v.mapping&&(a[v.mapping]=v.plugin)}},getDefaultScenePlugins:function(){var t=this.game.config.defaultPlugins;return t=t.concat(this.scenePlugins)},installScenePlugin:function(t,e,n,r,i){if(void 0===i&&(i=!1),"function"===typeof e){if(h.hasCore(t)){if(!i&&h.hasCore(t))return void console.warn("Scene Plugin key in use: "+t)}else h.register(t,e,n,!0),this.scenePlugins.push(t);if(r){var o=new e(r,this,t);r.sys[t]=o,n&&""!==n&&(r[n]=o),o.boot()}}else console.warn("Invalid Scene Plugin: "+t)},install:function(t,e,n,r,i){if(void 0===n&&(n=!1),void 0===r&&(r=null),void 0===i&&(i=null),"function"!==typeof e)return console.warn("Invalid Plugin: "+t),null;if(h.hasCustom(t))return console.warn("Plugin key in use: "+t),null;if(null!==r&&(n=!0),this.game.isBooted){if(h.registerCustom(t,e,r,i),n)return this.start(t)}else this._pendingGlobal.push({key:t,plugin:e,start:n,mapping:r,data:i});return null},getIndex:function(t){for(var e=this.plugins,n=0;n<e.length;n++)if(e[n].key===t)return n;return-1},getEntry:function(t){var e=this.getIndex(t);if(-1!==e)return this.plugins[e]},isActive:function(t){var e=this.getEntry(t);return e&&e.active},start:function(t,e){void 0===e&&(e=t);var n=this.getEntry(e);return n&&!n.active?(n.active=!0,n.plugin.start()):n||(n=this.createEntry(t,e)),n?n.plugin:null},createEntry:function(t,e){var n=h.getCustom(t);if(n){var r=new n.plugin(this);n={key:e,plugin:r,active:!0,mapping:n.mapping,data:n.data},this.plugins.push(n),r.init(n.data),r.start()}return n},stop:function(t){var e=this.getEntry(t);return e&&e.active&&(e.active=!1,e.plugin.stop()),this},get:function(t,e){void 0===e&&(e=!0);var n=this.getEntry(t);if(n)return n.plugin;var r=this.getClass(t);return r&&e?(n=this.createEntry(t,t))?n.plugin:null:r||null},getClass:function(t){return h.getCustomClass(t)},removeGlobalPlugin:function(t){var e=this.getEntry(t);e&&l(this.plugins,e),h.removeCustom(t)},removeScenePlugin:function(t){l(this.scenePlugins,t),h.remove(t)},registerGameObject:function(t,e,n){return e&&u.register(t,e),n&&a.register(t,n),this},removeGameObject:function(t,e,n){return void 0===e&&(e=!0),void 0===n&&(n=!0),e&&u.remove(t),n&&a.remove(t),this},registerFileType:function(t,e,n){s.register(t,e),n&&n.sys.load&&(n.sys.load[t]=e)},destroy:function(){for(var t=0;t<this.plugins.length;t++)this.plugins[t].plugin.destroy();h.destroyCustomPlugins(),this.game.noReturn&&h.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});t.exports=f},function(t,e,n){var r=n(201),i=n(0),o=n(9),s=n(104),a=n(22),u=n(401),c=n(407),h=n(402),l=n(1),f=n(10),d=n(416),p=n(76),v=n(3),g=new i({Extends:o,initialize:function(t){o.call(this),this.game=t,this.canvas,this.canvasBounds=new f,this.parent=null,this.parentIsWindow=!1,this.parentSize=new d,this.gameSize=new d,this.baseSize=new d,this.displaySize=new d,this.scaleMode=r.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new v(1,1),this.autoRound=!1,this.autoCenter=r.CENTER.NO_CENTER,this.orientation=r.ORIENTATION.LANDSCAPE,this.fullscreen,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:l,windowResize:l,fullScreenChange:l,fullScreenError:l}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(a.BOOT,this.boot,this)},boot:function(){var t=this.game;this.canvas=t.canvas,this.fullscreen=t.device.fullscreen,this.scaleMode!==r.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===r.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),this.parentSize.width>0&&this.parentSize.height>0&&this.displaySize.setParent(this.parentSize),this.refresh()),t.events.on(a.PRE_STEP,this.step,this),t.events.once(a.READY,this.refresh,this),t.events.once(a.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(t){this.getParent(t),this.getParentBounds();var e=t.width,n=t.height,i=t.scaleMode,o=t.zoom,s=t.autoRound;if("string"===typeof e){var a=this.parentSize.width;0===a&&(a=window.innerWidth);var u=parseInt(e,10)/100;e=Math.floor(a*u)}if("string"===typeof n){var c=this.parentSize.height;0===c&&(c=window.innerHeight);var l=parseInt(n,10)/100;n=Math.floor(c*l)}this.scaleMode=i,this.autoRound=s,this.autoCenter=t.autoCenter,this.resizeInterval=t.resizeInterval,s&&(e=Math.floor(e),n=Math.floor(n)),this.gameSize.setSize(e,n),o===r.ZOOM.MAX_ZOOM&&(o=this.getMaxZoom()),this.zoom=o,1!==o&&(this._resetZoom=!0),this.baseSize.setSize(e,n),s&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),t.minWidth>0&&this.displaySize.setMin(t.minWidth*o,t.minHeight*o),t.maxWidth>0&&this.displaySize.setMax(t.maxWidth*o,t.maxHeight*o),this.displaySize.setSize(e,n),this.orientation=h(e,n)},getParent:function(t){var e=t.parent;if(null!==e){if(this.parent=c(e),this.parentIsWindow=this.parent===document.body,t.expandParent&&t.scaleMode!==r.SCALE_MODE.NONE){var n=this.parent.getBoundingClientRect();(this.parentIsWindow||0===n.height)&&(document.documentElement.style.height="100%",document.body.style.height="100%",n=this.parent.getBoundingClientRect(),this.parentIsWindow||0!==n.height||(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))}t.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=c(t.fullscreenTarget))}},getParentBounds:function(){if(!this.parent)return!1;var t=this.parentSize,e=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(e.height=u(!0));var n=e.width,r=e.height;return(t.width!==n||t.height!==r)&&(t.setSize(n,r),!0)},lockOrientation:function(t){var e=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return!!e&&e.call(screen,t)},setParentSize:function(t,e){return this.parentSize.setSize(t,e),this.refresh()},setGameSize:function(t,e){var n=this.autoRound;n&&(t=Math.floor(t),e=Math.floor(e));var r=this.width,i=this.height;return this.gameSize.resize(t,e),this.baseSize.resize(t,e),n&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(t/e),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(r,i)},resize:function(t,e){var n=this.zoom,r=this.autoRound;r&&(t=Math.floor(t),e=Math.floor(e));var i=this.width,o=this.height;this.gameSize.resize(t,e),this.baseSize.resize(t,e),r&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(t*n,e*n),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var s=this.canvas.style,a=t*n,u=e*n;return r&&(a=Math.floor(a),u=Math.floor(u)),a===t&&u===e||(s.width=a+"px",s.height=u+"px"),this.refresh(i,o)},setZoom:function(t){return this.zoom=t,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(t,e){void 0===t&&(t=this.width),void 0===e&&(e=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var n=this.game.domContainer;if(n){this.baseSize.setCSS(n);var r=this.canvas.style,i=n.style;i.transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",i.marginLeft=r.marginLeft,i.marginTop=r.marginTop}return this.emit(s.RESIZE,this.gameSize,this.baseSize,this.displaySize,t,e),this},updateOrientation:function(){if(this._checkOrientation){this._checkOrientation=!1;var t=h(this.width,this.height);t!==this.orientation&&(this.orientation=t,this.emit(s.ORIENTATION_CHANGE,t))}},updateScale:function(){var t,e,n=this.canvas.style,i=this.gameSize.width,o=this.gameSize.height,s=this.zoom,a=this.autoRound;this.scaleMode===r.SCALE_MODE.NONE?(this.displaySize.setSize(i*s,o*s),t=this.displaySize.width,e=this.displaySize.height,a&&(t=Math.floor(t),e=Math.floor(e)),this._resetZoom&&(n.width=t+"px",n.height=e+"px",this._resetZoom=!1)):this.scaleMode===r.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),t=this.displaySize.width,e=this.displaySize.height,a&&(t=Math.floor(t),e=Math.floor(e)),this.canvas.width=t,this.canvas.height=e):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),t=this.displaySize.width,e=this.displaySize.height,a&&(t=Math.floor(t),e=Math.floor(e)),n.width=t+"px",n.height=e+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var t=p(this.parentSize.width,this.gameSize.width,0,!0),e=p(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(t,e),1)},updateCenter:function(){var t=this.autoCenter;if(t!==r.CENTER.NO_CENTER){var e=this.canvas,n=e.style,i=e.getBoundingClientRect(),o=i.width,s=i.height,a=Math.floor((this.parentSize.width-o)/2),u=Math.floor((this.parentSize.height-s)/2);t===r.CENTER.CENTER_HORIZONTALLY?u=0:t===r.CENTER.CENTER_VERTICALLY&&(a=0),n.marginLeft=a+"px",n.marginTop=u+"px"}},updateBounds:function(){var t=this.canvasBounds,e=this.canvas.getBoundingClientRect();t.x=e.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),t.y=e.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),t.width=e.width,t.height=e.height},transformX:function(t){return(t-this.canvasBounds.left)*this.displayScale.x},transformY:function(t){return(t-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(t){void 0===t&&(t={navigationUI:"hide"});var e=this.fullscreen;if(e.available){if(!e.active){var n=this.getFullscreenTarget();e.keyboard?n[e.request](Element.ALLOW_KEYBOARD_INPUT):n[e.request](t)}}else this.emit(s.FULLSCREEN_UNSUPPORTED)},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(s.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(t){this.removeFullscreenTarget(),this.emit(s.FULLSCREEN_FAILED,t)},getFullscreenTarget:function(){if(!this.fullscreenTarget){var t=document.createElement("div");t.style.margin="0",t.style.padding="0",t.style.width="100%",t.style.height="100%",this.fullscreenTarget=t,this._createdFullscreenTarget=!0}return this._createdFullscreenTarget&&(this.canvas.parentNode.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)),this.fullscreenTarget},removeFullscreenTarget:function(){if(this._createdFullscreenTarget){var t=this.fullscreenTarget;if(t&&t.parentNode){var e=t.parentNode;e.insertBefore(this.canvas,t),e.removeChild(t)}}},stopFullscreen:function(){var t=this.fullscreen;if(!t.available)return this.emit(s.FULLSCREEN_UNSUPPORTED),!1;t.active&&document[t.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(s.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(t){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(t)},startListeners:function(){var t=this,e=this.listeners;e.orientationChange=function(){t.updateBounds(),t._checkOrientation=!0,t.dirty=!0},e.windowResize=function(){t.updateBounds(),t.dirty=!0},window.addEventListener("orientationchange",e.orientationChange,!1),window.addEventListener("resize",e.windowResize,!1),this.fullscreen.available&&(e.fullScreenChange=function(e){return t.onFullScreenChange(e)},e.fullScreenError=function(e){return t.onFullScreenError(e)},["webkit","moz",""].forEach((function(t){document.addEventListener(t+"fullscreenchange",e.fullScreenChange,!1),document.addEventListener(t+"fullscreenerror",e.fullScreenError,!1)})),document.addEventListener("MSFullscreenChange",e.fullScreenChange,!1),document.addEventListener("MSFullscreenError",e.fullScreenError,!1))},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(t,e){this.parent&&(this._lastCheck+=e,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var t=this.listeners;window.removeEventListener("orientationchange",t.orientationChange,!1),window.removeEventListener("resize",t.windowResize,!1),["webkit","moz",""].forEach((function(e){document.removeEventListener(e+"fullscreenchange",t.fullScreenChange,!1),document.removeEventListener(e+"fullscreenerror",t.fullScreenError,!1)})),document.removeEventListener("MSFullscreenChange",t.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",t.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===r.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===r.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});t.exports=g},function(t,e,n){var r=n(18),i=n(0),o=n(76),s=n(3),a=new i({initialize:function(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=t),void 0===n&&(n=0),void 0===r&&(r=null),this._width=t,this._height=e,this._parent=r,this.aspectMode=n,this.aspectRatio=0===e?1:t/e,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new s},setAspectMode:function(t){return void 0===t&&(t=0),this.aspectMode=t,this.setSize(this._width,this._height)},setSnap:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.snapTo.set(t,e),this.setSize(this._width,this._height)},setParent:function(t){return this._parent=t,this.setSize(this._width,this._height)},setMin:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.minWidth=r(t,0,this.maxWidth),this.minHeight=r(e,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(t,e){return void 0===t&&(t=Number.MAX_VALUE),void 0===e&&(e=t),this.maxWidth=r(t,this.minWidth,Number.MAX_VALUE),this.maxHeight=r(e,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(t,e){switch(void 0===t&&(t=0),void 0===e&&(e=t),this.aspectMode){case a.NONE:this._width=this.getNewWidth(o(t,this.snapTo.x)),this._height=this.getNewHeight(o(e,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height;break;case a.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(o(t,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case a.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(o(e,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case a.FIT:this.constrain(t,e,!0);break;case a.ENVELOP:this.constrain(t,e,!1)}return this},setAspectRatio:function(t){return this.aspectRatio=t,this.setSize(this._width,this._height)},resize:function(t,e){return this._width=this.getNewWidth(o(t,this.snapTo.x)),this._height=this.getNewHeight(o(e,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height,this},getNewWidth:function(t,e){return void 0===e&&(e=!0),t=r(t,this.minWidth,this.maxWidth),e&&this._parent&&t>this._parent.width&&(t=Math.max(this.minWidth,this._parent.width)),t},getNewHeight:function(t,e){return void 0===e&&(e=!0),t=r(t,this.minHeight,this.maxHeight),e&&this._parent&&t>this._parent.height&&(t=Math.max(this.minHeight,this._parent.height)),t},constrain:function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=t),void 0===n&&(n=!0),t=this.getNewWidth(t),e=this.getNewHeight(e);var r=this.snapTo,i=0===e?1:t/e;return n&&this.aspectRatio>i||!n&&this.aspectRatio<i?(e=(t=o(t,r.x))/this.aspectRatio,r.y>0&&(t=(e=o(e,r.y))*this.aspectRatio)):(n&&this.aspectRatio<i||!n&&this.aspectRatio>i)&&(t=(e=o(e,r.y))*this.aspectRatio,r.x>0&&(e=(t=o(t,r.x))*(1/this.aspectRatio))),this._width=t,this._height=e,this},fitTo:function(t,e){return this.constrain(t,e,!0)},envelop:function(t,e){return this.constrain(t,e,!1)},setWidth:function(t){return this.setSize(t,this._height)},setHeight:function(t){return this.setSize(this._width,t)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(t){t&&t.style&&(t.style.width=this._width+"px",t.style.height=this._height+"px")},copy:function(t){return t.setAspectMode(this.aspectMode),t.aspectRatio=this.aspectRatio,t.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(t){this.setSize(t,this._height)}},height:{get:function(){return this._height},set:function(t){this.setSize(this._width,t)}}});a.NONE=0,a.WIDTH_CONTROLS_HEIGHT=1,a.HEIGHT_CONTROLS_WIDTH=2,a.FIT=3,a.ENVELOP=4,t.exports=a},function(t,e,n){var r=n(0),i=n(144),o=n(20),s=n(22),a=n(6),u=n(95),c=n(1),h=n(418),l=n(204),f=new r({initialize:function(t,e){if(this.game=t,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,e){Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++)this._pending.push({key:"default",scene:e[n],autoStart:0===n,data:{}})}t.events.once(s.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){var t,e,n,r;for(t=0;t<this._pending.length;t++){var i;n=(e=this._pending[t]).key,(r=e.scene)instanceof h?i=this.createSceneFromInstance(n,r):"object"===typeof r?i=this.createSceneFromObject(n,r):"function"===typeof r&&(i=this.createSceneFromFunction(n,r)),n=i.sys.settings.key,this.keys[n]=i,this.scenes.push(i),this._data[n]&&(i.sys.settings.data=this._data[n].data,this._data[n].autoStart&&(e.autoStart=!0)),(e.autoStart||i.sys.settings.active)&&this._start.push(n)}for(this._pending.length=0,this._data={},this.isBooted=!0,t=0;t<this._start.length;t++)e=this._start[t],this.start(e);this._start.length=0}},processQueue:function(){var t=this._pending.length,e=this._queue.length;if(0!==t||0!==e){var n,r;if(t){for(n=0;n<t;n++)r=this._pending[n],this.add(r.key,r.scene,r.autoStart,r.data);for(n=0;n<this._start.length;n++)r=this._start[n],this.start(r);return this._start.length=0,void(this._pending.length=0)}for(n=0;n<this._queue.length;n++)this[(r=this._queue[n]).op](r.keyA,r.keyB);this._queue.length=0}},add:function(t,e,n,r){return void 0===n&&(n=!1),void 0===r&&(r={}),this.isProcessing||!this.isBooted?(this._pending.push({key:t,scene:e,autoStart:n,data:r}),this.isBooted||(this._data[t]={data:r}),null):(t=this.getKey(t,e),e instanceof h?i=this.createSceneFromInstance(t,e):"object"===typeof e?(e.key=t,i=this.createSceneFromObject(t,e)):"function"===typeof e&&(i=this.createSceneFromFunction(t,e)),i.sys.settings.data=r,t=i.sys.settings.key,this.keys[t]=i,this.scenes.push(i),(n||i.sys.settings.active)&&(this._pending.length?this._start.push(t):this.start(t)),i);var i},remove:function(t){if(this.isProcessing)this._queue.push({op:"remove",keyA:t,keyB:null});else{var e=this.getScene(t);if(!e||e.sys.isTransitioning())return this;var n=this.scenes.indexOf(e),r=e.sys.settings.key;n>-1&&(delete this.keys[r],this.scenes.splice(n,1),this._start.indexOf(r)>-1&&(n=this._start.indexOf(r),this._start.splice(n,1)),e.sys.destroy())}return this},bootScene:function(t){var e,n=t.sys,r=n.settings;n.sceneUpdate=c,t.init&&(t.init.call(t,r.data),r.status=i.INIT,r.isTransition&&n.events.emit(o.TRANSITION_INIT,r.transitionFrom,r.transitionDuration)),n.load&&(e=n.load).reset(),e&&t.preload?(t.preload.call(t),0===e.list.size?this.create(t):(r.status=i.LOADING,e.once(u.COMPLETE,this.loadComplete,this),e.start())):this.create(t)},loadComplete:function(t){this.create(t.scene)},payloadComplete:function(t){this.bootScene(t.scene)},update:function(t,e){this.processQueue(),this.isProcessing=!0;for(var n=this.scenes.length-1;n>=0;n--){var r=this.scenes[n].sys;r.settings.status>i.START&&r.settings.status<=i.RUNNING&&r.step(t,e)}},render:function(t){for(var e=0;e<this.scenes.length;e++){var n=this.scenes[e].sys;n.settings.visible&&n.settings.status>=i.LOADING&&n.settings.status<i.SLEEPING&&n.render(t)}this.isProcessing=!1},create:function(t){var e=t.sys,n=e.settings;t.create&&(n.status=i.CREATING,t.create.call(t,n.data),n.status===i.DESTROYED)||(n.isTransition&&e.events.emit(o.TRANSITION_START,n.transitionFrom,n.transitionDuration),t.update&&(e.sceneUpdate=t.update),n.status=i.RUNNING,e.events.emit(o.CREATE,t))},createSceneFromFunction:function(t,e){var n=new e;if(n instanceof h){var r=n.sys.settings.key;if(""!==r&&(t=r),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return this.createSceneFromInstance(t,n)}return n.sys=new l(n),n.sys.settings.key=t,n.sys.init(this.game),n},createSceneFromInstance:function(t,e){return""===e.sys.settings.key&&(e.sys.settings.key=t),e.sys.init(this.game),e},createSceneFromObject:function(t,e){var n=new h(e),r=n.sys.settings.key;""!==r?t=r:n.sys.settings.key=t,n.sys.init(this.game);for(var i=["init","preload","create","update","render"],o=0;o<i.length;o++){var s=a(e,i[o],null);s&&(n[i[o]]=s)}if(e.hasOwnProperty("extend"))for(var u in e.extend)if(e.extend.hasOwnProperty(u)){var c=e.extend[u];"data"===u&&n.hasOwnProperty("data")&&"object"===typeof c?n.data.merge(c):"sys"!==u&&(n[u]=c)}return n},getKey:function(t,e){if(t||(t="default"),"function"===typeof e)return t;if(e instanceof h?t=e.sys.settings.key:"object"===typeof e&&e.hasOwnProperty("key")&&(t=e.key),this.keys.hasOwnProperty(t))throw new Error("Cannot add a Scene with duplicate key: "+t);return t},getScenes:function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1);for(var n=[],r=this.scenes,i=0;i<r.length;i++){var o=r[i];o&&(!t||t&&o.sys.isActive())&&n.push(o)}return e?n.reverse():n},getScene:function(t){if("string"===typeof t){if(this.keys[t])return this.keys[t]}else for(var e=0;e<this.scenes.length;e++)if(t===this.scenes[e])return t;return null},isActive:function(t){var e=this.getScene(t);return e?e.sys.isActive():null},isPaused:function(t){var e=this.getScene(t);return e?e.sys.isPaused():null},isVisible:function(t){var e=this.getScene(t);return e?e.sys.isVisible():null},isSleeping:function(t){var e=this.getScene(t);return e?e.sys.isSleeping():null},pause:function(t,e){var n=this.getScene(t);return n&&n.sys.pause(e),this},resume:function(t,e){var n=this.getScene(t);return n&&n.sys.resume(e),this},sleep:function(t,e){var n=this.getScene(t);return n&&!n.sys.isTransitioning()&&n.sys.sleep(e),this},wake:function(t,e){var n=this.getScene(t);return n&&n.sys.wake(e),this},run:function(t,e){var n=this.getScene(t);if(!n){for(var r=0;r<this._pending.length;r++)if(this._pending[r].key===t){this.queueOp("start",t,e);break}return this}n.sys.isSleeping()?n.sys.wake(e):n.sys.isPaused()?n.sys.resume(e):this.start(t,e)},start:function(t,e){if(!this.isBooted)return this._data[t]={autoStart:!0,data:e},this;var n=this.getScene(t);if(n){var r,o=n.sys;if(o.isActive()||o.isPaused())o.shutdown(),o.sceneUpdate=c,o.start(e);else if(o.sceneUpdate=c,o.start(e),o.load&&(r=o.load),r&&o.settings.hasOwnProperty("pack")&&(r.reset(),r.addPack({payload:o.settings.pack})))return o.settings.status=i.LOADING,r.once(u.COMPLETE,this.payloadComplete,this),r.start(),this;this.bootScene(n)}return this},stop:function(t,e){var n=this.getScene(t);return n&&!n.sys.isTransitioning()&&n.sys.shutdown(e),this},switch:function(t,e){var n=this.getScene(t),r=this.getScene(e);return n&&r&&n!==r&&(this.sleep(t),this.isSleeping(e)?this.wake(e):this.start(e)),this},getAt:function(t){return this.scenes[t]},getIndex:function(t){var e=this.getScene(t);return this.scenes.indexOf(e)},bringToTop:function(t){if(this.isProcessing)this._queue.push({op:"bringToTop",keyA:t,keyB:null});else{var e=this.getIndex(t);if(-1!==e&&e<this.scenes.length){var n=this.getScene(t);this.scenes.splice(e,1),this.scenes.push(n)}}return this},sendToBack:function(t){if(this.isProcessing)this._queue.push({op:"sendToBack",keyA:t,keyB:null});else{var e=this.getIndex(t);if(-1!==e&&e>0){var n=this.getScene(t);this.scenes.splice(e,1),this.scenes.unshift(n)}}return this},moveDown:function(t){if(this.isProcessing)this._queue.push({op:"moveDown",keyA:t,keyB:null});else{var e=this.getIndex(t);if(e>0){var n=e-1,r=this.getScene(t),i=this.getAt(n);this.scenes[e]=i,this.scenes[n]=r}}return this},moveUp:function(t){if(this.isProcessing)this._queue.push({op:"moveUp",keyA:t,keyB:null});else{var e=this.getIndex(t);if(e<this.scenes.length-1){var n=e+1,r=this.getScene(t),i=this.getAt(n);this.scenes[e]=i,this.scenes[n]=r}}return this},moveAbove:function(t,e){if(t===e)return this;if(this.isProcessing)this._queue.push({op:"moveAbove",keyA:t,keyB:e});else{var n=this.getIndex(t),r=this.getIndex(e);if(-1!==n&&-1!==r){var i=this.getAt(r);this.scenes.splice(r,1),this.scenes.splice(n+1,0,i)}}return this},moveBelow:function(t,e){if(t===e)return this;if(this.isProcessing)this._queue.push({op:"moveBelow",keyA:t,keyB:e});else{var n=this.getIndex(t),r=this.getIndex(e);if(-1!==n&&-1!==r){var i=this.getAt(r);this.scenes.splice(r,1),0===n?this.scenes.unshift(i):this.scenes.splice(n,0,i)}}return this},queueOp:function(t,e,n){return this._queue.push({op:t,keyA:e,keyB:n}),this},swapPosition:function(t,e){if(t===e)return this;if(this.isProcessing)this._queue.push({op:"swapPosition",keyA:t,keyB:e});else{var n=this.getIndex(t),r=this.getIndex(e);if(n!==r&&-1!==n&&-1!==r){var i=this.getAt(n);this.scenes[n]=this.scenes[r],this.scenes[r]=i}}return this},dump:function(){for(var t=[],e=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],n=0;n<this.scenes.length;n++){var r=this.scenes[n].sys,o=!r.settings.visible||r.settings.status!==i.RUNNING&&r.settings.status!==i.PAUSED?"[-] ":"[*] ";o+=r.settings.key+" ("+e[r.settings.status]+")",t.push(o)}console.log(t.join("\n"))},destroy:function(){for(var t=0;t<this.scenes.length;t++)this.scenes[t].sys.destroy();this.update=c,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});t.exports=f},function(t,e,n){var r=n(0),i=n(204),o=new r({initialize:function(t){this.sys=new i(this,t),this.game,this.anims,this.cache,this.registry,this.sound,this.textures,this.events,this.cameras,this.add,this.make,this.scene,this.children,this.lights,this.data,this.input,this.load,this.time,this.tweens,this.physics,this.matter,this.scale,this.plugins,this.renderer},update:function(){}});t.exports=o},function(t,e,n){var r=n(2),i=n(205);t.exports=function(t){var e=t.game.config.defaultPhysicsSystem,n=r(t.settings,"physics",!1);if(e||n){var o=[];if(e&&o.push(i(e+"Physics")),n)for(var s in n)s=i(s.concat("Physics")),-1===o.indexOf(s)&&o.push(s);return o}}},function(t,e,n){var r=n(2);t.exports=function(t){var e=t.plugins.getDefaultScenePlugins(),n=r(t.settings,"plugins",!1);return Array.isArray(n)?n:e||[]}},function(t,e,n){var r=n(144),i=n(6),o=n(127),s=n(978),a={create:function(t){return"string"===typeof t?t={key:t}:void 0===t&&(t={}),{status:r.PENDING,key:i(t,"key",""),active:i(t,"active",!1),visible:i(t,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:i(t,"pack",!1),cameras:i(t,"cameras",null),map:i(t,"map",o(s,i(t,"mapAdd",{}))),physics:i(t,"physics",{}),loader:i(t,"loader",{}),plugins:i(t,"plugins",!1),input:i(t,"input",{})}}};t.exports=a},function(t,e,n){var r=n(31),i=n(423),o=n(0),s=n(38),a=n(33),u=n(9),c=n(106),h=n(22),l=n(388),f=n(6),d=n(425),p=n(206),v=new o({Extends:u,initialize:function(t){u.call(this),this.game=t,this.name="TextureManager",this.list={},this._tempCanvas=r.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,t.events.once(h.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(c.LOAD,this.updatePending,this),this.on(c.ERROR,this.updatePending,this);var t=this.game.config;this.addBase64("__DEFAULT",t.defaultImage),this.addBase64("__MISSING",t.missingImage),this.addBase64("__WHITE",t.whiteImage),this.game.events.once(h.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,0===this._pending&&(this.off(c.LOAD),this.off(c.ERROR),this.emit(c.READY))},checkKey:function(t){return!this.exists(t)||(console.error("Texture key already in use: "+t),!1)},remove:function(t){if("string"===typeof t){if(!this.exists(t))return console.warn("No texture found matching key: "+t),this;t=this.get(t)}return this.list.hasOwnProperty(t.key)&&(t.destroy(),this.emit(c.REMOVE,t.key)),this},removeKey:function(t){return this.list.hasOwnProperty(t)&&delete this.list[t],this},addBase64:function(t,e){if(this.checkKey(t)){var n=this,r=new Image;r.onerror=function(){n.emit(c.ERROR,t)},r.onload=function(){var e=n.create(t,r);d.Image(e,0),n.emit(c.ADD,t,e),n.emit(c.LOAD,t,e)},r.src=e}return this},getBase64:function(t,e,n,i){void 0===n&&(n="image/png"),void 0===i&&(i=.92);var o="",s=this.getFrame(t,e);if(s&&(s.source.isRenderTexture||s.source.isGLTexture))console.warn("Cannot getBase64 from WebGL Texture");else if(s){var a=s.canvasData,u=r.create2D(this,a.width,a.height);u.getContext("2d").drawImage(s.source.image,a.x,a.y,a.width,a.height,0,0,a.width,a.height),o=u.toDataURL(n,i),r.remove(u)}return o},addImage:function(t,e,n){var r=null;return this.checkKey(t)&&(r=this.create(t,e),d.Image(r,0),n&&r.setDataSource(n),this.emit(c.ADD,t,r)),r},addGLTexture:function(t,e,n,r){var i=null;return this.checkKey(t)&&(void 0===n&&(n=e.width),void 0===r&&(r=e.height),(i=this.create(t,e,n,r)).add("__BASE",0,0,0,n,r),this.emit(c.ADD,t,i)),i},addRenderTexture:function(t,e){var n=null;return this.checkKey(t)&&((n=this.create(t,e)).add("__BASE",0,0,0,e.width,e.height),this.emit(c.ADD,t,n)),n},generate:function(t,e){if(this.checkKey(t)){var n=r.create(this,1,1);return e.canvas=n,l(e),this.addCanvas(t,n)}return null},createCanvas:function(t,e,n){if(void 0===e&&(e=256),void 0===n&&(n=256),this.checkKey(t)){var i=r.create(this,e,n,a.CANVAS,!0);return this.addCanvas(t,i)}return null},addCanvas:function(t,e,n){void 0===n&&(n=!1);var r=null;return n?r=new i(this,t,e,e.width,e.height):this.checkKey(t)&&(r=new i(this,t,e,e.width,e.height),this.list[t]=r,this.emit(c.ADD,t,r)),r},addAtlas:function(t,e,n,r){return Array.isArray(n.textures)||Array.isArray(n.frames)?this.addAtlasJSONArray(t,e,n,r):this.addAtlasJSONHash(t,e,n,r)},addAtlasJSONArray:function(t,e,n,r){var i=null;if(this.checkKey(t)){if(i=this.create(t,e),Array.isArray(n))for(var o=1===n.length,s=0;s<i.source.length;s++){var a=o?n[0]:n[s];d.JSONArray(i,s,a)}else d.JSONArray(i,0,n);r&&i.setDataSource(r),this.emit(c.ADD,t,i)}return i},addAtlasJSONHash:function(t,e,n,r){var i=null;if(this.checkKey(t)){if(i=this.create(t,e),Array.isArray(n))for(var o=0;o<n.length;o++)d.JSONHash(i,o,n[o]);else d.JSONHash(i,0,n);r&&i.setDataSource(r),this.emit(c.ADD,t,i)}return i},addAtlasXML:function(t,e,n,r){var i=null;return this.checkKey(t)&&(i=this.create(t,e),d.AtlasXML(i,0,n),r&&i.setDataSource(r),this.emit(c.ADD,t,i)),i},addUnityAtlas:function(t,e,n,r){var i=null;return this.checkKey(t)&&(i=this.create(t,e),d.UnityYAML(i,0,n),r&&i.setDataSource(r),this.emit(c.ADD,t,i)),i},addSpriteSheet:function(t,e,n){var r=null;if(this.checkKey(t)){var i=(r=this.create(t,e)).source[0].width,o=r.source[0].height;d.SpriteSheet(r,0,0,0,i,o,n),this.emit(c.ADD,t,r)}return r},addSpriteSheetFromAtlas:function(t,e){if(!this.checkKey(t))return null;var n=f(e,"atlas",null),r=f(e,"frame",null);if(n&&r){var i=this.get(n).get(r);if(i){var o=this.create(t,i.source.image);return i.trimmed?d.SpriteSheetFromAtlas(o,i,e):d.SpriteSheet(o,0,i.cutX,i.cutY,i.cutWidth,i.cutHeight,e),this.emit(c.ADD,t,o),o}}},create:function(t,e,n,r){var i=null;return this.checkKey(t)&&(i=new p(this,t,e,n,r),this.list[t]=i),i},exists:function(t){return this.list.hasOwnProperty(t)},get:function(t){return void 0===t&&(t="__DEFAULT"),this.list[t]?this.list[t]:t instanceof p?t:this.list.__MISSING},cloneFrame:function(t,e){if(this.list[t])return this.list[t].get(e).clone()},getFrame:function(t,e){if(this.list[t])return this.list[t].get(e)},getTextureKeys:function(){var t=[];for(var e in this.list)"__DEFAULT"!==e&&"__MISSING"!==e&&t.push(e);return t},getPixel:function(t,e,n,r){var i=this.getFrame(n,r);if(i){t-=i.x,e-=i.y;var o=i.data.cut;if(t+=o.x,e+=o.y,t>=o.x&&t<o.r&&e>=o.y&&e<o.b){var a=this._tempContext;a.clearRect(0,0,1,1),a.drawImage(i.source.image,t,e,1,1,0,0,1,1);var u=a.getImageData(0,0,1,1);return new s(u.data[0],u.data[1],u.data[2],u.data[3])}}return null},getPixelAlpha:function(t,e,n,r){var i=this.getFrame(n,r);if(i){t-=i.x,e-=i.y;var o=i.data.cut;if(t+=o.x,e+=o.y,t>=o.x&&t<o.r&&e>=o.y&&e<o.b){var s=this._tempContext;return s.clearRect(0,0,1,1),s.drawImage(i.source.image,t,e,1,1,0,0,1,1),s.getImageData(0,0,1,1).data[3]}}return null},setTexture:function(t,e,n){return this.list[e]&&(t.texture=this.list[e],t.frame=t.texture.get(n)),t},renameTexture:function(t,e){var n=this.get(t);return!(!n||t===e)&&(n.key=e,this.list[e]=n,delete this.list[t],!0)},each:function(t,e){for(var n=[null],r=1;r<arguments.length;r++)n.push(arguments[r]);for(var i in this.list)n[0]=this.list[i],t.apply(e,n)},destroy:function(){for(var t in this.list)this.list[t].destroy();this.list={},this.game=null,r.remove(this._tempCanvas)}});t.exports=v},function(t,e,n){var r=n(0),i=n(18),o=n(38),s=n(33),a=n(138),u=n(206),c=new r({Extends:u,initialize:function(t,e,n,r,i){u.call(this,t,e,n,r,i),this.add("__BASE",0,0,0,r,i),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=r,this.height=i,this.imageData=this.context.getImageData(0,0,r,i),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.buffer,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===s.WEBGL&&this.refresh(),this},draw:function(t,e,n){return this.context.drawImage(n,t,e),this.update()},drawFrame:function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=this.manager.getFrame(t,e);if(i){var o=i.canvasData,s=i.cutWidth,a=i.cutHeight,u=i.source.resolution;return this.context.drawImage(i.source.image,o.x,o.y,s,a,n,r,s/u,a/u),this.update()}return this},setPixel:function(t,e,n,r,i,o){if(void 0===o&&(o=255),t=Math.abs(Math.floor(t)),e=Math.abs(Math.floor(e)),this.getIndex(t,e)>-1){var s=this.context.getImageData(t,e,1,1);s.data[0]=n,s.data[1]=r,s.data[2]=i,s.data[3]=o,this.context.putImageData(s,t,e)}return this},putData:function(t,e,n,r,i,o,s){return void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=t.width),void 0===s&&(s=t.height),this.context.putImageData(t,e,n,r,i,o,s),this},getData:function(t,e,n,r){return t=i(Math.floor(t),0,this.width-1),e=i(Math.floor(e),0,this.height-1),n=i(n,1,this.width-t),r=i(r,1,this.height-e),this.context.getImageData(t,e,n,r)},getPixel:function(t,e,n){n||(n=new o);var r=this.getIndex(t,e);if(r>-1){var i=this.data,s=i[r+0],a=i[r+1],u=i[r+2],c=i[r+3];n.setTo(s,a,u,c)}return n},getPixels:function(t,e,n,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=this.width),void 0===r&&(r=n),t=Math.abs(Math.round(t)),e=Math.abs(Math.round(e));for(var s=i(t,0,this.width),a=i(t+n,0,this.width),u=i(e,0,this.height),c=i(e+r,0,this.height),h=new o,l=[],f=u;f<c;f++){for(var d=[],p=s;p<a;p++)h=this.getPixel(p,f,h),d.push({x:p,y:f,color:h.color,alpha:h.alphaGL});l.push(d)}return l},getIndex:function(t,e){return t=Math.abs(Math.round(t)),e=Math.abs(Math.round(e)),t<this.width&&e<this.height?4*(t+e*this.width):-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(t,e,n,r){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=this.width),void 0===r&&(r=this.height),this.context.clearRect(t,e,n,r),this.update()},setSize:function(t,e){return void 0===e&&(e=t),t===this.width&&e===this.height||(this.canvas.width=t,this.canvas.height=e,this._source.width=t,this._source.height=e,this._source.isPowerOf2=a(t,e),this.frames.__BASE.setSize(t,e,0,0),this.width=t,this.height=e,this.refresh()),this},destroy:function(){u.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});t.exports=c},function(t,e,n){var r=n(31),i=n(0),o=n(138),s=n(168),a=new i({initialize:function(t,e,n,r,i){void 0===i&&(i=!1);var a=t.manager.game;this.renderer=a.renderer,this.texture=t,this.source=e,this.image=e,this.compressionAlgorithm=null,this.resolution=1,this.width=n||e.naturalWidth||e.videoWidth||e.width||0,this.height=r||e.naturalHeight||e.videoHeight||e.height||0,this.scaleMode=s.DEFAULT,this.isCanvas=e instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&e instanceof HTMLVideoElement,this.isRenderTexture="RenderTexture"===e.type,this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&e instanceof WebGLTexture,this.isPowerOf2=o(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=i,this.init(a)},init:function(t){var e=this.renderer;e&&(e.gl?this.isCanvas?this.glTexture=e.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=e.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=e.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.isGLTexture?this.glTexture=this.source:this.glTexture=e.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),t.config.antialias||this.setFilter(1)},setFilter:function(t){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,t),this.scaleMode=t},setFlipY:function(t){return void 0===t&&(t=!0),this.flipY=t,this},update:function(){var t=this.renderer.gl;t&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):t&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&r.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});t.exports=a},function(t,e,n){t.exports={AtlasXML:n(979),Canvas:n(980),Image:n(981),JSONArray:n(982),JSONHash:n(983),SpriteSheet:n(984),SpriteSheetFromAtlas:n(985),UnityYAML:n(986)}},function(t,e,n){var r=n(427),i=n(430),o=n(432),s={create:function(t){var e=t.config.audio,n=t.device.audio;return e.noAudio||!n.webAudio&&!n.audioData?new i(t):n.webAudio&&!e.disableWebAudio?new o(t):new r(t)}};t.exports=s},function(t,e,n){var r=n(145),i=n(0),o=n(70),s=n(429),a=new i({Extends:r,initialize:function(t){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,r.call(this,t)},add:function(t,e){var n=new s(this,t,e);return this.sounds.push(n),n},unlock:function(){this.locked=!1;var t=this;if(this.game.cache.audio.entries.each((function(e,n){for(var r=0;r<n.length;r++)if("true"===n[r].dataset.locked)return t.locked=!0,!1;return!0})),this.locked){var e=!1,n=function(){e=!0},r=function r(){if(e)e=!1;else{document.body.removeEventListener("touchmove",n),document.body.removeEventListener("touchend",r);var i=[];if(t.game.cache.audio.entries.each((function(t,e){for(var n=0;n<e.length;n++){var r=e[n];"true"===r.dataset.locked&&i.push(r)}return!0})),0!==i.length){var o=i[i.length-1];o.oncanplaythrough=function(){o.oncanplaythrough=null,i.forEach((function(t){t.dataset.locked="false"})),t.unlocked=!0},i.forEach((function(t){t.load()}))}}};this.once(o.UNLOCKED,(function(){for(this.forEachActiveSound((function(t){null===t.currentMarker&&0===t.duration&&(t.duration=t.tags[0].duration),t.totalDuration=t.tags[0].duration}));this.lockedActionsQueue.length;){var t=this.lockedActionsQueue.shift();t.sound[t.prop].apply?t.sound[t.prop].apply(t.sound,t.value||[]):t.sound[t.prop]=t.value}}),this),document.body.addEventListener("touchmove",n,!1),document.body.addEventListener("touchend",r,!1)}},onBlur:function(){this.forEachActiveSound((function(t){t.isPlaying&&(this.onBlurPausedSounds.push(t),t.onBlur())}))},onFocus:function(){this.onBlurPausedSounds.forEach((function(t){t.onFocus()})),this.onBlurPausedSounds.length=0},destroy:function(){r.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(t,e,n){return"true"===t.tags[0].dataset.locked&&(this.lockedActionsQueue.push({sound:t,prop:e,value:n}),!0)},setMute:function(t){return this.mute=t,this},mute:{get:function(){return this._mute},set:function(t){this._mute=t,this.forEachActiveSound((function(t){t.updateMute()})),this.emit(o.GLOBAL_MUTE,this,t)}},setVolume:function(t){return this.volume=t,this},volume:{get:function(){return this._volume},set:function(t){this._volume=t,this.forEachActiveSound((function(t){t.updateVolume()})),this.emit(o.GLOBAL_VOLUME,this,t)}}});t.exports=a},function(t,e,n){var r=n(78);t.exports=function(t,e,n,i,o){if(void 0===i&&(i=0),void 0===o&&(o=t.length),r(t,i,o))for(var s=i;s<o;s++){var a=t[s];if(!e||e&&void 0===n&&a.hasOwnProperty(e)||e&&void 0!==n&&a[e]===n)return a}return null}},function(t,e,n){var r=n(146),i=n(0),o=n(70),s=n(18),a=new i({Extends:r,initialize:function(t,e,n){if(void 0===n&&(n={}),this.tags=t.game.cache.audio.get(e),!this.tags)throw new Error('There is no audio asset with key "'+e+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,r.call(this,t,e,n)},play:function(t,e){return!this.manager.isLocked(this,"play",[t,e])&&!!r.prototype.play.call(this,t,e)&&!!this.pickAndPlayAudioTag()&&(this.emit(o.PLAY,this),!0)},pause:function(){return!this.manager.isLocked(this,"pause")&&!(this.startTime>0)&&!!r.prototype.pause.call(this)&&(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(o.PAUSE,this),!0)},resume:function(){return!this.manager.isLocked(this,"resume")&&!(this.startTime>0)&&!!r.prototype.resume.call(this)&&!!this.pickAndPlayAudioTag()&&(this.emit(o.RESUME,this),!0)},stop:function(){return!this.manager.isLocked(this,"stop")&&!!r.prototype.stop.call(this)&&(this.stopAndReleaseAudioTag(),this.emit(o.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var t=this.currentConfig.seek,e=this.currentConfig.delay,n=(this.currentMarker?this.currentMarker.start:0)+t;return this.previousTime=n,this.audio.currentTime=n,this.applyConfig(),0===e?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+1e3*e,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var t=0;t<this.tags.length;t++){var e=this.tags[t];if("false"===e.dataset.used)return e.dataset.used="true",this.audio=e,!0}if(!this.manager.override)return!1;var n=[];this.manager.forEachActiveSound((function(t){t.key===this.key&&t.audio&&n.push(t)}),this),n.sort((function(t,e){return t.loop===e.loop?e.seek/e.duration-t.seek/t.duration:t.loop?1:-1}));var r=n[0];return this.audio=r.audio,r.reset(),r.audio=null,r.startTime=0,r.previousTime=0,!0},playCatchPromise:function(){var t=this.audio.play();t&&t.catch((function(t){console.warn(t)}))},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){r.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(t){if(this.isPlaying)if(this.startTime>0)this.startTime<t-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,t-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());else{var e=this.currentMarker?this.currentMarker.start:0,n=e+this.duration,r=this.audio.currentTime;if(this.currentConfig.loop)r>=n-this.manager.loopEndOffset?(this.audio.currentTime=e+Math.max(0,r-n),r=this.audio.currentTime):r<e&&(this.audio.currentTime+=e,r=this.audio.currentTime),r<this.previousTime&&this.emit(o.LOOPED,this);else if(r>=n)return this.reset(),this.stopAndReleaseAudioTag(),void this.emit(o.COMPLETE,this);this.previousTime=r}},destroy:function(){r.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=s(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){r.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(t){this.currentConfig.mute=t,this.manager.isLocked(this,"mute",t)||(this.updateMute(),this.emit(o.MUTE,this,t))}},setMute:function(t){return this.mute=t,this},volume:{get:function(){return this.currentConfig.volume},set:function(t){this.currentConfig.volume=t,this.manager.isLocked(this,"volume",t)||(this.updateVolume(),this.emit(o.VOLUME,this,t))}},setVolume:function(t){return this.volume=t,this},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,this.manager.isLocked(this,o.RATE,t)||(this.calculateRate(),this.emit(o.RATE,this,t))}},setRate:function(t){return this.rate=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,this.manager.isLocked(this,o.DETUNE,t)||(this.calculateRate(),this.emit(o.DETUNE,this,t))}},setDetune:function(t){return this.detune=t,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.isLocked(this,"seek",t)||this.startTime>0||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.isPlaying?(this.previousTime=t,this.audio.currentTime=t):this.isPaused&&(this.currentConfig.seek=t),this.emit(o.SEEK,this,t))}},setSeek:function(t){return this.seek=t,this},loop:{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.manager.isLocked(this,"loop",t)||(this.audio&&(this.audio.loop=t),this.emit(o.LOOP,this,t))}},setLoop:function(t){return this.loop=t,this},pan:{get:function(){return this.currentConfig.pan},set:function(t){this.currentConfig.pan=t,this.emit(o.PAN,this,t)}},setPan:function(t){return this.pan=t,this}});t.exports=a},function(t,e,n){var r=n(145),i=n(0),o=n(9),s=n(431),a=n(1),u=new i({Extends:o,initialize:function(t){o.call(this),this.game=t,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(t,e){var n=new s(this,t,e);return this.sounds.push(n),n},addAudioSprite:function(t,e){var n=this.add(t,e);return n.spritemap={},n},play:function(t,e){return!1},playAudioSprite:function(t,e,n){return!1},remove:function(t){return r.prototype.remove.call(this,t)},removeByKey:function(t){return r.prototype.removeByKey.call(this,t)},pauseAll:a,resumeAll:a,stopAll:a,update:a,setRate:a,setDetune:a,setMute:a,setVolume:a,forEachActiveSound:function(t,e){r.prototype.forEachActiveSound.call(this,t,e)},destroy:function(){r.prototype.destroy.call(this)}});t.exports=u},function(t,e,n){var r=n(146),i=n(0),o=n(9),s=n(17),a=function(){return!1},u=function(){return this},c=new i({Extends:o,initialize:function(t,e,n){void 0===n&&(n={}),o.call(this),this.manager=t,this.key=e,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=s({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},n),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:a,updateMarker:a,removeMarker:function(){return null},play:a,pause:a,resume:a,stop:a,destroy:function(){r.prototype.destroy.call(this)},setMute:u,setVolume:u,setRate:u,setDetune:u,setSeek:u,setLoop:u,setPan:u});t.exports=c},function(t,e,n){var r=n(433),i=n(145),o=n(0),s=n(70),a=n(22),u=n(434),c=new o({Extends:i,initialize:function(t){this.context=this.createAudioContext(t),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked="suspended"===this.context.state&&("ontouchstart"in window||"onclick"in window),i.call(this,t),this.locked&&t.isBooted?this.unlock():t.events.once(a.BOOT,this.unlock,this)},createAudioContext:function(t){var e=t.config.audio;return e.context?(e.context.resume(),e.context):window.hasOwnProperty("AudioContext")?new AudioContext:window.hasOwnProperty("webkitAudioContext")?new window.webkitAudioContext:void 0},setAudioContext:function(t){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=t,this.masterMuteNode=t.createGain(),this.masterVolumeNode=t.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(t.destination),this.destination=this.masterMuteNode,this},add:function(t,e){var n=new u(this,t,e);return this.sounds.push(n),n},decodeAudio:function(t,e){var n;n=Array.isArray(t)?t:[{key:t,data:e}];for(var i=this.game.cache.audio,o=n.length,a=0;a<n.length;a++){var u=n[a],c=u.key,h=u.data;"string"===typeof h&&(h=r(h));var l=function(t,e){i.add(t,e),this.emit(s.DECODED,t),0===--o&&this.emit(s.DECODED_ALL)}.bind(this,c),f=function(t,e){console.error("Error decoding audio: "+t+" - ",e?e.message:""),0===--o&&this.emit(s.DECODED_ALL)}.bind(this,c);this.context.decodeAudioData(h,l,f)}},unlock:function(){var t=this,e=document.body,n=function n(){if(t.context&&e){var r=e.removeEventListener;t.context.resume().then((function(){r("touchstart",n),r("touchend",n),r("click",n),r("keydown",n),t.unlocked=!0}),(function(){r("touchstart",n),r("touchend",n),r("click",n),r("keydown",n)}))}};e&&(e.addEventListener("touchstart",n,!1),e.addEventListener("touchend",n,!1),e.addEventListener("click",n,!1),e.addEventListener("keydown",n,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var t=this.context;"suspended"!==t.state&&"interrupted"!==t.state||this.locked||t.resume()},update:function(t,e){i.prototype.update.call(this,t,e);var n=this.context;n&&"interrupted"===n.state&&n.resume()},destroy:function(){if(this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context)this.context.suspend();else{var t=this;this.context.close().then((function(){t.context=null}))}i.prototype.destroy.call(this)},setMute:function(t){return this.mute=t,this},mute:{get:function(){return 0===this.masterMuteNode.gain.value},set:function(t){this.masterMuteNode.gain.setValueAtTime(t?0:1,0),this.emit(s.GLOBAL_MUTE,this,t)}},setVolume:function(t){return this.volume=t,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(t){this.masterVolumeNode.gain.setValueAtTime(t,0),this.emit(s.GLOBAL_VOLUME,this,t)}}});t.exports=c},function(t,e){for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(256),i=0;i<n.length;i++)r[n.charCodeAt(i)]=i;t.exports=function(t){var e,n,i,o,s=(t=t.substr(t.indexOf(",")+1)).length,a=.75*s,u=0;"="===t[s-1]&&(a--,"="===t[s-2]&&a--);for(var c=new ArrayBuffer(a),h=new Uint8Array(c),l=0;l<s;l+=4)e=r[t.charCodeAt(l)],n=r[t.charCodeAt(l+1)],i=r[t.charCodeAt(l+2)],o=r[t.charCodeAt(l+3)],h[u++]=e<<2|n>>4,h[u++]=(15&n)<<4|i>>2,h[u++]=(3&i)<<6|63&o;return c}},function(t,e,n){var r=n(146),i=n(0),o=n(70),s=new i({Extends:r,initialize:function(t,e,n){if(void 0===n&&(n={}),this.audioBuffer=t.game.cache.audio.get(e),!this.audioBuffer)throw new Error('Audio key "'+e+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=t.context.createGain(),this.volumeNode=t.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),t.context.createStereoPanner?(this.pannerNode=t.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(t.destination)):this.volumeNode.connect(t.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,r.call(this,t,e,n)},play:function(t,e){return!!r.prototype.play.call(this,t,e)&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(o.PLAY,this),!0)},pause:function(){return!(this.manager.context.currentTime<this.startTime)&&!!r.prototype.pause.call(this)&&(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(o.PAUSE,this),!0)},resume:function(){return!(this.manager.context.currentTime<this.startTime)&&!!r.prototype.resume.call(this)&&(this.createAndStartBufferSource(),this.emit(o.RESUME,this),!0)},stop:function(){return!!r.prototype.stop.call(this)&&(this.stopAndRemoveBufferSource(),this.emit(o.STOP,this),!0)},createAndStartBufferSource:function(){var t=this.currentConfig.seek,e=this.currentConfig.delay,n=this.manager.context.currentTime+e,r=(this.currentMarker?this.currentMarker.start:0)+t,i=this.duration-t;this.playTime=n-t,this.startTime=n,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,n),Math.max(0,r),Math.max(0,i)),this.resetConfig()},createAndStartLoopBufferSource:function(){var t=this.getLoopTime(),e=this.currentMarker?this.currentMarker.start:0,n=this.duration;this.loopTime=t,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,t),Math.max(0,e),Math.max(0,n))},createBufferSource:function(){var t=this,e=this.manager.context.createBufferSource();return e.buffer=this.audioBuffer,e.connect(this.muteNode),e.onended=function(e){e.target===t.source&&(t.currentConfig.loop?t.hasLooped=!0:t.hasEnded=!0)},e},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),r.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,r.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(o.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(o.LOOPED,this))},destroy:function(){r.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){r.prototype.calculateRate.call(this);var t=this.manager.context.currentTime;this.source&&"number"===typeof this.totalRate&&this.source.playbackRate.setValueAtTime(this.totalRate,t),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,t)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var t=0,e=0;e<this.rateUpdates.length;e++)t+=((e<this.rateUpdates.length-1?this.rateUpdates[e+1].time:this.manager.context.currentTime-this.playTime)-this.rateUpdates[e].time)*this.rateUpdates[e].rate;return t},getLoopTime:function(){for(var t=0,e=0;e<this.rateUpdates.length-1;e++)t+=(this.rateUpdates[e+1].time-this.rateUpdates[e].time)*this.rateUpdates[e].rate;var n=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+n.time+(this.duration-t)/n.rate},rate:{get:function(){return this.currentConfig.rate},set:function(t){this.currentConfig.rate=t,this.calculateRate(),this.emit(o.RATE,this,t)}},setRate:function(t){return this.rate=t,this},detune:{get:function(){return this.currentConfig.detune},set:function(t){this.currentConfig.detune=t,this.calculateRate(),this.emit(o.DETUNE,this,t)}},setDetune:function(t){return this.detune=t,this},mute:{get:function(){return 0===this.muteNode.gain.value},set:function(t){this.currentConfig.mute=t,this.muteNode.gain.setValueAtTime(t?0:1,0),this.emit(o.MUTE,this,t)}},setMute:function(t){return this.mute=t,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(t){this.currentConfig.volume=t,this.volumeNode.gain.setValueAtTime(t,0),this.emit(o.VOLUME,this,t)}},setVolume:function(t){return this.volume=t,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(t){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(t=Math.min(Math.max(0,t),this.duration),this.currentConfig.seek=t,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(o.SEEK,this,t))}},setSeek:function(t){return this.seek=t,this},loop:{get:function(){return this.currentConfig.loop},set:function(t){this.currentConfig.loop=t,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),t&&this.createAndStartLoopBufferSource()),this.emit(o.LOOP,this,t)}},setLoop:function(t){return this.loop=t,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(t){this.currentConfig.pan=t,this.pannerNode&&this.pannerNode.pan.setValueAtTime(t,this.manager.context.currentTime),this.emit(o.PAN,this,t)}},setPan:function(t){return this.pan=t,this}});t.exports=s},function(t,e){t.exports=function(t){for(var e=t.length,n=t[0].length,r=new Array(n),i=0;i<n;i++){r[i]=new Array(e);for(var o=e-1;o>-1;o--)r[i][o]=t[o][i]}return r}},function(t,e){function n(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function r(t,e){return t<e?-1:t>e?1:0}t.exports=function t(e,i,o,s,a){for(void 0===o&&(o=0),void 0===s&&(s=e.length-1),void 0===a&&(a=r);s>o;){if(s-o>600){var u=s-o+1,c=i-o+1,h=Math.log(u),l=.5*Math.exp(2*h/3),f=.5*Math.sqrt(h*l*(u-l)/u)*(c-u/2<0?-1:1);t(e,i,Math.max(o,Math.floor(i-c*l/u+f)),Math.min(s,Math.floor(i+(u-c)*l/u+f)),a)}var d=e[i],p=o,v=s;for(n(e,o,i),a(e[s],d)>0&&n(e,o,s);p<v;){for(n(e,p,v),p++,v--;a(e[p],d)<0;)p++;for(;a(e[v],d)>0;)v--}0===a(e[o],d)?n(e,o,v):n(e,++v,s),v<=i&&(o=v+1),i<=v&&(s=v-1)}}},function(t,e,n){var r=n(6),i=n(131),o=function(t,e,n){for(var r=[],i=0;i<t.length;i++)for(var o=0;o<e.length;o++)for(var s=0;s<n;s++)r.push({a:t[i],b:e[o]});return r};t.exports=function(t,e,n){var s=r(n,"max",0),a=r(n,"qty",1),u=r(n,"random",!1),c=r(n,"randomB",!1),h=r(n,"repeat",0),l=r(n,"yoyo",!1),f=[];if(c&&i(e),-1===h)if(0===s)h=0;else{var d=t.length*e.length*a;l&&(d*=2),h=Math.ceil(s/d)}for(var p=0;p<=h;p++){var v=o(t,e,a);u&&i(v),f=f.concat(v),l&&(v.reverse(),f=f.concat(v))}return s&&f.splice(s),f}},function(t,e,n){t.exports={PROCESS_QUEUE_ADD:n(1041),PROCESS_QUEUE_REMOVE:n(1042)}},function(t,e,n){var r=n(13);t.exports=function(t,e){var n=r(e,"anims",null);if(null===n)return t;if("string"===typeof n)t.anims.play(n);else if("object"===typeof n){var i=t.anims,o=r(n,"key",void 0);if(o){var s=r(n,"startFrame",void 0),a=r(n,"delay",0),u=r(n,"repeat",0),c=r(n,"repeatDelay",0),h=r(n,"yoyo",!1),l=r(n,"play",!1),f=r(n,"delayedPlay",0),d={key:o,delay:a,repeat:u,repeatDelay:c,yoyo:h,startFrame:s};l?i.play(d):f>0?i.playAfterDelay(d,f):i.load(d)}}return t}},function(t,e,n){var r=n(0),i=n(109),o=new r({initialize:function(t,e,n,r,i){this.parent=t,this.x=e,this.y=n,this.frame=r,this.data={},this.tint=16777215,this._visible=i,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(t){return void 0===t?this.frame=this.parent.frame:t instanceof i&&t.texture===this.parent.texture?this.frame=t:this.frame=this.parent.texture.get(t),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(t,e,n){return this.x=t,this.y=e,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,n&&this.setFrame(n),this},setPosition:function(t,e){return this.x=t,this.y=e,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,e){return this.flipX=t,this.flipY=e,this},setVisible:function(t){return this.visible=t,this},setAlpha:function(t){return this.alpha=t,this},setTint:function(t){return this.tint=t,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(t){this.parent.dirty|=this._visible!==t,this._visible=t}},alpha:{get:function(){return this._alpha},set:function(t){this.parent.dirty|=this._alpha>0!==t>0,this._alpha=t}}});t.exports=o},function(t,e,n){var r=n(10);t.exports=function(t,e,n){void 0===n&&(n=new r);var i=Math.min(t.x,e.x),o=Math.min(t.y,e.y),s=Math.max(t.right,e.right)-i,a=Math.max(t.bottom,e.bottom)-o;return n.setTo(i,o,s,a)}},function(t,e,n){var r=n(0),i=n(11),o=n(1055),s=n(15),a=n(7),u=n(202),c=n(20),h=n(140),l=new r({Extends:s,Mixins:[i.AlphaSingle,i.BlendMode,i.Depth,i.Origin,i.ScrollFactor,i.Transform,i.Visible,o],initialize:function(t,e,n,r,i,o){s.call(this,t,"DOMElement"),this.parent=t.sys.game.domContainer,this.cache=t.sys.cache.html,this.node,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new h,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(e,n),"string"===typeof r?"#"===r[0]?this.setElement(r.substr(1),i,o):this.createElement(r,i,o):r&&this.setElement(r,i,o),t.sys.events.on(c.SLEEP,this.handleSceneEvent,this),t.sys.events.on(c.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(t){var e=this.node,n=e.style;e&&(n.display=t.settings.visible?"block":"none")},setSkew:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.skewX=t,this.skewY=e,this},setPerspective:function(t){return this.parent.style.perspective=t+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(t){this.parent.style.perspective=t+"px"}},addListener:function(t){if(this.node){t=t.split(" ");for(var e=0;e<t.length;e++)this.node.addEventListener(t[e],this.handler,!1)}return this},removeListener:function(t){if(this.node){t=t.split(" ");for(var e=0;e<t.length;e++)this.node.removeEventListener(t[e],this.handler)}return this},dispatchNativeEvent:function(t){this.emit(t.type,t)},createElement:function(t,e,n){return this.setElement(document.createElement(t),e,n)},setElement:function(t,e,n){var r;if(this.removeElement(),"string"===typeof t?("#"===t[0]&&(t=t.substr(1)),r=document.getElementById(t)):"object"===typeof t&&1===t.nodeType&&(r=t),!r)return this;if(this.node=r,e&&a(e))for(var i in e)r.style[i]=e[i];else"string"===typeof e&&(r.style=e);return r.style.zIndex="0",r.style.display="inline",r.style.position="absolute",r.phaser=this,this.parent&&this.parent.appendChild(r),n&&(r.innerText=n),this.updateSize()},createFromCache:function(t,e){var n=this.cache.get(t);return n&&this.createFromHTML(n,e),this},createFromHTML:function(t,e){void 0===e&&(e="div"),this.removeElement();var n=document.createElement(e);return this.node=n,n.style.zIndex="0",n.style.display="inline",n.style.position="absolute",n.phaser=this,this.parent&&this.parent.appendChild(n),n.innerHTML=t,this.updateSize()},removeElement:function(){return this.node&&(u(this.node),this.node=null),this},updateSize:function(){var t=this.node,e=t.getBoundingClientRect();return this.width=t.clientWidth,this.height=t.clientHeight,this.displayWidth=e.width||0,this.displayHeight=e.height||0,this},getChildByProperty:function(t,e){if(this.node)for(var n=this.node.querySelectorAll("*"),r=0;r<n.length;r++)if(n[r][t]===e)return n[r];return null},getChildByID:function(t){return this.getChildByProperty("id",t)},getChildByName:function(t){return this.getChildByProperty("name",t)},setClassName:function(t){return this.node&&(this.node.className=t,this.updateSize()),this},setText:function(t){return this.node&&(this.node.innerText=t,this.updateSize()),this},setHTML:function(t){return this.node&&(this.node.innerHTML=t,this.updateSize()),this},preUpdate:function(){var t=this.parentContainer,e=this.node;e&&t&&!t.willRender()&&(e.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(c.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(c.WAKE,this.handleSceneEvent,this)}});t.exports=l},function(t,e,n){var r=n(1056),i=n(15),o=n(25),s=new o,a=new o,u=new o;t.exports=function(t,e,n,o){if(e.node){var c=e.node.style,h=e.scene.sys.settings;if(!c||!h.visible||i.RENDER_MASK!==e.renderFlags||0!==e.cameraFilter&&e.cameraFilter&n.id||e.parentContainer&&!e.parentContainer.willRender())c.display="none";else{var l=e.parentContainer,f=n.alpha*e.alpha;l&&(f*=l.alpha);var d=s,p=a,v=u,g=0,m=0,y="0%",b="0%";o?(g=e.width*e.scaleX*e.originX,m=e.height*e.scaleY*e.originY,p.applyITRS(e.x-g,e.y-m,e.rotation,e.scaleX,e.scaleY),d.copyFrom(n.matrix),d.multiplyWithOffset(o,-n.scrollX*e.scrollFactorX,-n.scrollY*e.scrollFactorY),p.e=e.x-g,p.f=e.y-m,d.multiply(p,v)):(g=e.width*e.originX,m=e.height*e.originY,p.applyITRS(e.x-g,e.y-m,e.rotation,e.scaleX,e.scaleY),d.copyFrom(n.matrix),y=100*e.originX+"%",b=100*e.originY+"%",p.e-=n.scrollX*e.scrollFactorX,p.f-=n.scrollY*e.scrollFactorY,d.multiply(p,v)),e.transformOnly||(c.display="block",c.opacity=f,c.zIndex=e._depth,c.pointerEvents=e.pointerEvents,c.mixBlendMode=r[e._blendMode]),c.transform=v.getCSSMatrix()+" skew("+e.skewX+"rad, "+e.skewY+"rad) rotate3d("+e.rotate3d.x+","+e.rotate3d.y+","+e.rotate3d.z+","+e.rotate3d.w+e.rotate3dAngle+")",c.transformOrigin=y+" "+b}}}},function(t,e,n){var r=n(0),i=n(11),o=n(15),s=n(1060),a=new r({Extends:o,Mixins:[i.Alpha,i.BlendMode,i.Depth,i.Flip,i.Origin,i.ScrollFactor,i.Size,i.Texture,i.Tint,i.Transform,i.Visible,s],initialize:function(t){o.call(this,t,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});t.exports=a},function(t,e,n){var r=n(218),i=n(98),o=n(14),s=n(4);t.exports=function(t,e,n){void 0===n&&(n=new s);var a=i(e,0,o.PI2);return r(t,a,n)}},function(t,e,n){var r=n(447),i=n(218),o=n(98),s=n(14);t.exports=function(t,e,n,a){void 0===a&&(a=[]),!e&&n>0&&(e=r(t)/n);for(var u=0;u<e;u++){var c=o(u/e,0,s.PI2);a.push(i(t,c))}return a}},function(t,e){t.exports=function(t){var e=t.width/2,n=t.height/2,r=Math.pow(e-n,2)/Math.pow(e+n,2);return Math.PI*(e+n)*(1+3*r/(10+Math.sqrt(4-3*r)))}},function(t,e,n){var r=n(217),i=n(30);t.exports=function(t,e,n,o,s,a){var u=e.commandBuffer,c=u.length,h=s||t.currentContext;if(0!==c&&i(t,h,e,n,o)){n.addToRenderList(e);var l=1,f=1,d=0,p=0,v=1,g=0,m=0,y=0;h.beginPath();for(var b=0;b<c;++b)switch(u[b]){case r.ARC:h.arc(u[b+1],u[b+2],u[b+3],u[b+4],u[b+5],u[b+6]),b+=7;break;case r.LINE_STYLE:v=u[b+1],d=u[b+2],l=u[b+3],g=(16711680&d)>>>16,m=(65280&d)>>>8,y=255&d,h.strokeStyle="rgba("+g+","+m+","+y+","+l+")",h.lineWidth=v,b+=3;break;case r.FILL_STYLE:p=u[b+1],f=u[b+2],g=(16711680&p)>>>16,m=(65280&p)>>>8,y=255&p,h.fillStyle="rgba("+g+","+m+","+y+","+f+")",b+=2;break;case r.BEGIN_PATH:h.beginPath();break;case r.CLOSE_PATH:h.closePath();break;case r.FILL_PATH:a||h.fill();break;case r.STROKE_PATH:a||h.stroke();break;case r.FILL_RECT:a?h.rect(u[b+1],u[b+2],u[b+3],u[b+4]):h.fillRect(u[b+1],u[b+2],u[b+3],u[b+4]),b+=4;break;case r.FILL_TRIANGLE:h.beginPath(),h.moveTo(u[b+1],u[b+2]),h.lineTo(u[b+3],u[b+4]),h.lineTo(u[b+5],u[b+6]),h.closePath(),a||h.fill(),b+=6;break;case r.STROKE_TRIANGLE:h.beginPath(),h.moveTo(u[b+1],u[b+2]),h.lineTo(u[b+3],u[b+4]),h.lineTo(u[b+5],u[b+6]),h.closePath(),a||h.stroke(),b+=6;break;case r.LINE_TO:h.lineTo(u[b+1],u[b+2]),b+=2;break;case r.MOVE_TO:h.moveTo(u[b+1],u[b+2]),b+=2;break;case r.LINE_FX_TO:h.lineTo(u[b+1],u[b+2]),b+=5;break;case r.MOVE_FX_TO:h.moveTo(u[b+1],u[b+2]),b+=5;break;case r.SAVE:h.save();break;case r.RESTORE:h.restore();break;case r.TRANSLATE:h.translate(u[b+1],u[b+2]),b+=2;break;case r.SCALE:h.scale(u[b+1],u[b+2]),b+=2;break;case r.ROTATE:h.rotate(u[b+1]),b+=1;break;case r.GRADIENT_FILL_STYLE:b+=5;break;case r.GRADIENT_LINE_STYLE:b+=6}h.restore()}}},function(t,e,n){var r=n(0),i=n(137),o=n(80),s=n(2),a=n(68),u=new r({initialize:function(t,e,n,r){void 0===r&&(r=!1),this.propertyKey=e,this.propertyValue=n,this.defaultValue=n,this.steps=0,this.counter=0,this.start=0,this.end=0,this.ease,this.emitOnly=r,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(t)},loadConfig:function(t,e){void 0===t&&(t={}),e&&(this.propertyKey=e),this.propertyValue=s(t,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(t){return this.propertyValue=t,this.setMethods()},setMethods:function(){var t=this.propertyValue,e=typeof t;if(this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,"number"===e)this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate;else if(Array.isArray(t))this.onEmit=this.randomStaticValueEmit;else if("function"===e)this.emitOnly?this.onEmit=t:this.onUpdate=t;else if("object"===e&&this.hasBoth(t,"start","end")){this.start=t.start,this.end=t.end;var n=this.has(t,"random");if(n&&(this.onEmit=this.randomRangedValueEmit),this.has(t,"steps"))this.steps=t.steps,this.counter=this.start,this.onEmit=this.steppedEmit;else{var r=this.has(t,"ease")?t.ease:"Linear";this.ease=o(r,t.easeParams),n||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate}}else if("object"===e&&this.hasBoth(t,"min","max"))this.start=t.min,this.end=t.max,this.onEmit=this.randomRangedValueEmit;else if("object"===e&&this.has(t,"random")){var i=t.random;Array.isArray(i)&&(this.start=i[0],this.end=i[1]),this.onEmit=this.randomRangedValueEmit}else"object"===e&&this.hasEither(t,"onEmit","onUpdate")&&(this.has(t,"onEmit")&&(this.onEmit=t.onEmit),this.has(t,"onUpdate")&&(this.onUpdate=t.onUpdate));return this},has:function(t,e){return t.hasOwnProperty(e)},hasBoth:function(t,e,n){return t.hasOwnProperty(e)&&t.hasOwnProperty(n)},hasEither:function(t,e,n){return t.hasOwnProperty(e)||t.hasOwnProperty(n)},defaultEmit:function(t,e,n){return n},defaultUpdate:function(t,e,n,r){return r},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var t=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[t]},randomRangedValueEmit:function(t,e){var n=i(this.start,this.end);return t&&t.data[e]&&(t.data[e].min=n),n},steppedEmit:function(){var t=this.counter,e=this.counter+(this.end-this.start)/this.steps;return this.counter=a(e,this.start,this.end),t},easedValueEmit:function(t,e){if(t&&t.data[e]){var n=t.data[e];n.min=this.start,n.max=this.end}return this.start},easeValueUpdate:function(t,e,n){var r=t.data[e];return(r.max-r.min)*this.ease(n)+r.min}});t.exports=u},function(t,e,n){var r=n(0),i=n(2),o=new r({initialize:function(t,e,n,r,o){if("object"===typeof t){var s=t;t=i(s,"x",0),e=i(s,"y",0),n=i(s,"power",0),r=i(s,"epsilon",100),o=i(s,"gravity",50)}else void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=100),void 0===o&&(o=50);this.x=t,this.y=e,this.active=!0,this._gravity=o,this._power=0,this._epsilon=0,this.power=n,this.epsilon=r},update:function(t,e){var n=this.x-t.x,r=this.y-t.y,i=n*n+r*r;if(0!==i){var o=Math.sqrt(i);i<this._epsilon&&(i=this._epsilon);var s=this._power*e/(i*o)*100;t.velocityX+=n*s,t.velocityY+=r*s}},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(t){this._epsilon=t*t}},power:{get:function(){return this._power/this._gravity},set:function(t){this._power=t*this._gravity}},gravity:{get:function(){return this._gravity},set:function(t){var e=this.power;this._gravity=t,this.power=e}}});t.exports=o},function(t,e,n){var r=n(0),i=n(36),o=n(50),s=new r({initialize:function(t){this.emitter=t,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return this.lifeCurrent>0},resetPosition:function(){this.x=0,this.y=0},fire:function(t,e){var n=this.emitter;this.frame=n.getFrame(),n.emitZone&&n.emitZone.getPoint(this),this.x+=void 0===t?n.x.onEmit(this,"x"):t,this.y+=void 0===e?n.y.onEmit(this,"y"):e,this.life=n.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var r=n.speedX.onEmit(this,"speedX"),s=n.speedY?n.speedY.onEmit(this,"speedY"):r;if(n.radial){var a=i(n.angle.onEmit(this,"angle"));this.velocityX=Math.cos(a)*Math.abs(r),this.velocityY=Math.sin(a)*Math.abs(s)}else if(n.moveTo){var u=n.moveToX.onEmit(this,"moveToX"),c=n.moveToY?n.moveToY.onEmit(this,"moveToY"):u,h=Math.atan2(c-this.y,u-this.x),l=o(this.x,this.y,u,c)/(this.life/1e3);this.velocityX=Math.cos(h)*l,this.velocityY=Math.sin(h)*l}else this.velocityX=r,this.velocityY=s;n.acceleration&&(this.accelerationX=n.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=n.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=n.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=n.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=n.delay.onEmit(this,"delay"),this.scaleX=n.scaleX.onEmit(this,"scaleX"),this.scaleY=n.scaleY?n.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=n.rotate.onEmit(this,"rotate"),this.rotation=i(this.angle),this.bounce=n.bounce.onEmit(this,"bounce"),this.alpha=n.alpha.onEmit(this,"alpha"),this.tint=n.tint.onEmit(this,"tint")},computeVelocity:function(t,e,n,r){var i=this.velocityX,o=this.velocityY,s=this.accelerationX,a=this.accelerationY,u=this.maxVelocityX,c=this.maxVelocityY;i+=t.gravityX*n,o+=t.gravityY*n,s&&(i+=s*n),a&&(o+=a*n),i>u?i=u:i<-u&&(i=-u),o>c?o=c:o<-c&&(o=-c),this.velocityX=i,this.velocityY=o;for(var h=0;h<r.length;h++)r[h].update(this,e,n)},checkBounds:function(t){var e=t.bounds,n=-this.bounce;this.x<e.x&&t.collideLeft?(this.x=e.x,this.velocityX*=n):this.x>e.right&&t.collideRight&&(this.x=e.right,this.velocityX*=n),this.y<e.y&&t.collideTop?(this.y=e.y,this.velocityY*=n):this.y>e.bottom&&t.collideBottom&&(this.y=e.bottom,this.velocityY*=n)},update:function(t,e,n){if(this.delayCurrent>0)return this.delayCurrent-=t,!1;var r=this.emitter,o=1-this.lifeCurrent/this.life;return this.lifeT=o,this.computeVelocity(r,t,e,n),this.x+=this.velocityX*e,this.y+=this.velocityY*e,r.bounds&&this.checkBounds(r),r.deathZone&&r.deathZone.willKill(this)?(this.lifeCurrent=0,!0):(this.scaleX=r.scaleX.onUpdate(this,"scaleX",o,this.scaleX),r.scaleY?this.scaleY=r.scaleY.onUpdate(this,"scaleY",o,this.scaleY):this.scaleY=this.scaleX,this.angle=r.rotate.onUpdate(this,"rotate",o,this.angle),this.rotation=i(this.angle),this.alpha=r.alpha.onUpdate(this,"alpha",o,this.alpha),this.tint=r.tint.onUpdate(this,"tint",o,this.tint),this.lifeCurrent-=t,this.lifeCurrent<=0)}});t.exports=s},function(t,e,n){var r=n(35),i=n(0),o=n(11),s=n(453),a=n(454),u=n(449),c=n(2),h=n(210),l=n(455),f=n(126),d=n(451),p=n(456),v=n(10),g=n(79),m=n(3),y=n(68),b=new i({Mixins:[o.BlendMode,o.Mask,o.ScrollFactor,o.Visible],initialize:function(t,e){this.manager=t,this.texture=t.texture,this.frames=[t.defaultFrame],this.defaultFrame=t.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=d,this.x=new u(e,"x",0,!0),this.y=new u(e,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new u(e,"accelerationX",0,!0),this.accelerationY=new u(e,"accelerationY",0,!0),this.maxVelocityX=new u(e,"maxVelocityX",1e4,!0),this.maxVelocityY=new u(e,"maxVelocityY",1e4,!0),this.speedX=new u(e,"speedX",0,!0),this.speedY=new u(e,"speedY",0,!0),this.moveTo=!1,this.moveToX=new u(e,"moveToX",0,!0),this.moveToY=new u(e,"moveToY",0,!0),this.bounce=new u(e,"bounce",0,!0),this.scaleX=new u(e,"scaleX",1),this.scaleY=new u(e,"scaleY",1),this.tint=new u(e,"tint",16777215),this.alpha=new u(e,"alpha",1),this.lifespan=new u(e,"lifespan",1e3,!0),this.angle=new u(e,"angle",{min:0,max:360},!0),this.rotate=new u(e,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new u(e,"quantity",1,!0),this.delay=new u(e,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=r.NORMAL,this.follow=null,this.followOffset=new m,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,e&&this.fromJSON(e)},fromJSON:function(t){if(!t)return this;var e=0,n="";for(e=0;e<this.configFastMap.length;e++)n=this.configFastMap[e],f(t,n)&&(this[n]=c(t,n));for(e=0;e<this.configOpMap.length;e++)n=this.configOpMap[e],f(t,n)&&this[n].loadConfig(t);if(this.acceleration=0!==this.accelerationX.propertyValue||0!==this.accelerationY.propertyValue,this.moveTo=0!==this.moveToX.propertyValue||0!==this.moveToY.propertyValue,f(t,"speed")&&(this.speedX.loadConfig(t,"speed"),this.speedY=null),(l(t,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),f(t,"scale")&&(this.scaleX.loadConfig(t,"scale"),this.scaleY=null),f(t,"callbackScope")){var r=c(t,"callbackScope",null);this.emitCallbackScope=r,this.deathCallbackScope=r}return f(t,"emitZone")&&this.setEmitZone(t.emitZone),f(t,"deathZone")&&this.setDeathZone(t.deathZone),f(t,"bounds")&&this.setBounds(t.bounds),f(t,"followOffset")&&this.followOffset.setFromObject(c(t,"followOffset",0)),f(t,"frame")&&this.setFrame(t.frame),f(t,"reserve")&&this.reserve(t.reserve),this},toJSON:function(t){void 0===t&&(t={});var e=0,n="";for(e=0;e<this.configFastMap.length;e++)t[n=this.configFastMap[e]]=this[n];for(e=0;e<this.configOpMap.length;e++)this[n=this.configOpMap[e]]&&(t[n]=this[n].toJSON());return this.speedY||(delete t.speedX,t.speed=this.speedX.toJSON()),this.scaleY||(delete t.scaleX,t.scale=this.scaleX.toJSON()),t},startFollow:function(t,e,n,r){return void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=!1),this.follow=t,this.followOffset.set(e,n),this.trackVisible=r,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(1===this.frames.length)return this.defaultFrame;if(this.randomFrame)return h(this.frames);var t=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=y(this.currentFrame+1,0,this._frameLength)),t},setFrame:function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=1),this.randomFrame=e,this.frameQuantity=n,this.currentFrame=0,this._frameCounter=0;var r=typeof t;if(Array.isArray(t)||"string"===r||"number"===r)this.manager.setEmitterFrames(t,this);else if("object"===r){var i=t;(t=c(i,"frames",null))&&this.manager.setEmitterFrames(t,this);var o=c(i,"cycle",!1);this.randomFrame=!o,this.frameQuantity=c(i,"quantity",n)}return this._frameLength=this.frames.length,1===this._frameLength&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(t){return void 0===t&&(t=!0),this.radial=t,this},setPosition:function(t,e){return this.x.onChange(t),this.y.onChange(e),this},setBounds:function(t,e,n,r){if("object"===typeof t){var i=t;t=i.x,e=i.y,n=f(i,"w")?i.w:i.width,r=f(i,"h")?i.h:i.height}return this.bounds?this.bounds.setTo(t,e,n,r):this.bounds=new v(t,e,n,r),this},setSpeedX:function(t){return this.speedX.onChange(t),this.radial=!1,this},setSpeedY:function(t){return this.speedY&&(this.speedY.onChange(t),this.radial=!1),this},setSpeed:function(t){return this.speedX.onChange(t),this.speedY=null,this.radial=!0,this},setScaleX:function(t){return this.scaleX.onChange(t),this},setScaleY:function(t){return this.scaleY.onChange(t),this},setScale:function(t){return this.scaleX.onChange(t),this.scaleY=null,this},setGravityX:function(t){return this.gravityX=t,this},setGravityY:function(t){return this.gravityY=t,this},setGravity:function(t,e){return this.gravityX=t,this.gravityY=e,this},setAlpha:function(t){return this.alpha.onChange(t),this},setTint:function(t){return this.tint.onChange(t),this},setEmitterAngle:function(t){return this.angle.onChange(t),this},setAngle:function(t){return this.angle.onChange(t),this},setLifespan:function(t){return this.lifespan.onChange(t),this},setQuantity:function(t){return this.quantity.onChange(t),this},setFrequency:function(t,e){return this.frequency=t,this._counter=0,e&&this.quantity.onChange(e),this},setEmitZone:function(t){if(void 0===t)this.emitZone=null;else{var e=c(t,"type","random"),n=c(t,"source",null);switch(e){case"random":this.emitZone=new p(n);break;case"edge":var r=c(t,"quantity",1),i=c(t,"stepRate",0),o=c(t,"yoyo",!1),s=c(t,"seamless",!0);this.emitZone=new a(n,r,i,o,s)}}return this},setDeathZone:function(t){if(void 0===t)this.deathZone=null;else{var e=c(t,"type","onEnter"),n=c(t,"source",null);if(n&&"function"===typeof n.contains){var r="onEnter"===e;this.deathZone=new s(n,r)}}return this},reserve:function(t){for(var e=this.dead,n=0;n<t;n++)e.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return this.maxParticles>0&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(t,e){return void 0===t?(this.emitCallback=null,this.emitCallbackScope=null):"function"===typeof t&&(this.emitCallback=t,e&&(this.emitCallbackScope=e)),this},onParticleDeath:function(t,e){return void 0===t?(this.deathCallback=null,this.deathCallbackScope=null):"function"===typeof t&&(this.deathCallback=t,e&&(this.deathCallbackScope=e)),this},killAll:function(){for(var t=this.dead,e=this.alive;e.length>0;)t.push(e.pop());return this},forEachAlive:function(t,e){for(var n=this.alive,r=n.length,i=0;i<r;++i)t.call(e,n[i],this);return this},forEachDead:function(t,e){for(var n=this.dead,r=n.length,i=0;i<r;++i)t.call(e,n[i],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return g(this.alive,this.depthSortCallback),this},flow:function(t,e){return void 0===e&&(e=1),this.frequency=t,this.quantity.onChange(e),this.start()},explode:function(t,e,n){return this.frequency=-1,this.emitParticle(t,e,n)},emitParticleAt:function(t,e,n){return this.emitParticle(n,t,e)},emitParticle:function(t,e,n){if(!this.atLimit()){void 0===t&&(t=this.quantity.onEmit());for(var r=this.dead,i=this.follow?this.follow.x+this.followOffset.x:e,o=this.follow?this.follow.y+this.followOffset.y:n,s=0;s<t;s++){var a=r.pop();if(a||(a=new this.particleClass(this)),a.fire(i,o),this.particleBringToTop?this.alive.push(a):this.alive.unshift(a),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,a,this),this.atLimit())break}return a}},preUpdate:function(t,e){var n=(e*=this.timeScale)/1e3;this.trackVisible&&(this.visible=this.follow.visible);var r=this.manager.getProcessors(),i=this.alive,o=this.dead,s=0,a=[],u=i.length;for(s=0;s<u;s++){var c=i[s];c.update(e,n,r)&&a.push({index:s,particle:c})}if((u=a.length)>0){var h=this.deathCallback,l=this.deathCallbackScope;for(s=u-1;s>=0;s--){var f=a[s];i.splice(f.index,1),o.push(f.particle),h&&h.call(l,f.particle),f.particle.resetPosition()}}this.on&&(0===this.frequency?this.emitParticle():this.frequency>0&&(this._counter-=e,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(t,e){return t.y-e.y}});t.exports=b},function(t,e,n){var r=new(n(0))({initialize:function(t,e){this.source=t,this.killOnEnter=e},willKill:function(t){var e=this.source.contains(t.x,t.y);return e&&this.killOnEnter||!e&&!this.killOnEnter}});t.exports=r},function(t,e,n){var r=new(n(0))({initialize:function(t,e,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=!0),this.source=t,this.points=[],this.quantity=e,this.stepRate=n,this.yoyo=r,this.counter=-1,this.seamless=i,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){if(this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless){var t=this.points[0],e=this.points[this.points.length-1];t.x===e.x&&t.y===e.y&&this.points.pop()}var n=this._length;return this._length=this.points.length,this._length<n&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(t){return this.source=t,this.updateSource()},getPoint:function(t){0===this._direction?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,-1===this.counter&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var e=this.points[this.counter];e&&(t.x=e.x,t.y=e.y)}});t.exports=r},function(t,e){t.exports=function(t,e){for(var n=0;n<e.length;n++)if(t.hasOwnProperty(e[n]))return!0;return!1}},function(t,e,n){var r=n(0),i=n(3),o=new r({initialize:function(t){this.source=t,this._tempVec=new i},getPoint:function(t){var e=this._tempVec;this.source.getRandomPoint(e),t.x=e.x,t.y=e.y}});t.exports=o},function(t,e,n){var r=n(0),i=n(11),o=n(73),s=new r({Extends:o,Mixins:[i.PathFollower],initialize:function(t,e,n,r,i,s){o.call(this,t,n,r,i,s),this.path=e},preUpdate:function(t,e){this.anims.update(t,e),this.pathUpdate(t)}});t.exports=s},function(t,e){t.exports=function(t,e,n){var r=t.canvas,i=t.context,o=t.style,s=[],a=0,u=n.length;o.maxLines>0&&o.maxLines<n.length&&(u=o.maxLines),o.syncFont(r,i);for(var c=0;c<u;c++){var h=o.strokeThickness;h+=i.measureText(n[c]).width,o.wordWrap&&(h-=i.measureText(" ").width),s[c]=Math.ceil(h),a=Math.max(a,s[c])}var l=e.fontSize+o.strokeThickness,f=l*u,d=t.lineSpacing;return u>1&&(f+=d*(u-1)),{width:a,height:f,lines:u,lineWidths:s,lineSpacing:d,lineHeight:l}}},function(t,e,n){var r=n(0),i=n(13),o=n(6),s=n(460),a={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|M\xc3\u2030qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},u=new r({initialize:function(t,e){this.parent=t,this.fontFamily,this.fontSize,this.fontStyle,this.backgroundColor,this.color,this.stroke,this.strokeThickness,this.shadowOffsetX,this.shadowOffsetY,this.shadowColor,this.shadowBlur,this.shadowStroke,this.shadowFill,this.align,this.maxLines,this.fixedWidth,this.fixedHeight,this.resolution,this.rtl,this.testString,this.baselineX,this.baselineY,this.wordWrapWidth,this.wordWrapCallback,this.wordWrapCallbackScope,this.wordWrapUseAdvanced,this._font,this.setStyle(e,!1,!0);var n=o(e,"metrics",!1);this.metrics=n?{ascent:o(n,"ascent",0),descent:o(n,"descent",0),fontSize:o(n,"fontSize",0)}:s(this)},setStyle:function(t,e,n){for(var r in void 0===e&&(e=!0),void 0===n&&(n=!1),t&&t.hasOwnProperty("fontSize")&&"number"===typeof t.fontSize&&(t.fontSize=t.fontSize.toString()+"px"),a){var s=n?a[r][1]:this[r];this[r]="wordWrapCallback"===r||"wordWrapCallbackScope"===r?o(t,a[r][0],s):i(t,a[r][0],s)}var u=o(t,"font",null);null!==u&&this.setFont(u,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var c=o(t,"fill",null);return null!==c&&(this.color=c),e?this.update(!0):this.parent},syncFont:function(t,e){e.font=this._font},syncStyle:function(t,e){e.textBaseline="alphabetic",e.fillStyle=this.color,e.strokeStyle=this.stroke,e.lineWidth=this.strokeThickness,e.lineCap="round",e.lineJoin="round"},syncShadow:function(t,e){e?(t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur):(t.shadowOffsetX=0,t.shadowOffsetY=0,t.shadowColor=0,t.shadowBlur=0)},update:function(t){return t&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=s(this)),this.parent.updateText()},setFont:function(t,e){void 0===e&&(e=!0);var n=t,r="",i="";if("string"!==typeof t)n=o(t,"fontFamily","Courier"),r=o(t,"fontSize","16px"),i=o(t,"fontStyle","");else{var s=t.split(" "),a=0;i=s.length>2?s[a++]:"",r=s[a++]||"16px",n=s[a++]||"Courier"}return n===this.fontFamily&&r===this.fontSize&&i===this.fontStyle||(this.fontFamily=n,this.fontSize=r,this.fontStyle=i,e&&this.update(!0)),this.parent},setFontFamily:function(t){return this.fontFamily!==t&&(this.fontFamily=t,this.update(!0)),this.parent},setFontStyle:function(t){return this.fontStyle!==t&&(this.fontStyle=t,this.update(!0)),this.parent},setFontSize:function(t){return"number"===typeof t&&(t=t.toString()+"px"),this.fontSize!==t&&(this.fontSize=t,this.update(!0)),this.parent},setTestString:function(t){return this.testString=t,this.update(!0)},setFixedSize:function(t,e){return this.fixedWidth=t,this.fixedHeight=e,t&&(this.parent.width=t),e&&(this.parent.height=e),this.update(!1)},setBackgroundColor:function(t){return this.backgroundColor=t,this.update(!1)},setFill:function(t){return this.color=t,this.update(!1)},setColor:function(t){return this.color=t,this.update(!1)},setResolution:function(t){return this.resolution=t,this.update(!1)},setStroke:function(t,e){return void 0===e&&(e=this.strokeThickness),void 0===t&&0!==this.strokeThickness?(this.strokeThickness=0,this.update(!0)):this.stroke===t&&this.strokeThickness===e||(this.stroke=t,this.strokeThickness=e,this.update(!0)),this.parent},setShadow:function(t,e,n,r,i,o){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n="#000"),void 0===r&&(r=0),void 0===i&&(i=!1),void 0===o&&(o=!0),this.shadowOffsetX=t,this.shadowOffsetY=e,this.shadowColor=n,this.shadowBlur=r,this.shadowStroke=i,this.shadowFill=o,this.update(!1)},setShadowOffset:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.shadowOffsetX=t,this.shadowOffsetY=e,this.update(!1)},setShadowColor:function(t){return void 0===t&&(t="#000"),this.shadowColor=t,this.update(!1)},setShadowBlur:function(t){return void 0===t&&(t=0),this.shadowBlur=t,this.update(!1)},setShadowStroke:function(t){return this.shadowStroke=t,this.update(!1)},setShadowFill:function(t){return this.shadowFill=t,this.update(!1)},setWordWrapWidth:function(t,e){return void 0===e&&(e=!1),this.wordWrapWidth=t,this.wordWrapUseAdvanced=e,this.update(!1)},setWordWrapCallback:function(t,e){return void 0===e&&(e=null),this.wordWrapCallback=t,this.wordWrapCallbackScope=e,this.update(!1)},setAlign:function(t){return void 0===t&&(t="left"),this.align=t,this.update(!1)},setMaxLines:function(t){return void 0===t&&(t=0),this.maxLines=t,this.update(!1)},getTextMetrics:function(){var t=this.metrics;return{ascent:t.ascent,descent:t.descent,fontSize:t.fontSize}},toJSON:function(){var t={};for(var e in a)t[e]=this[e];return t.metrics=this.getTextMetrics(),t},destroy:function(){this.parent=void 0}});t.exports=u},function(t,e,n){var r=n(31);t.exports=function(t){var e=r.create(this),n=e.getContext("2d");t.syncFont(e,n);var i=n.measureText(t.testString);if("actualBoundingBoxAscent"in i){var o=i.actualBoundingBoxAscent,s=i.actualBoundingBoxDescent;return r.remove(e),{ascent:o,descent:s,fontSize:o+s}}var a=Math.ceil(i.width*t.baselineX),u=a,c=2*u;u=u*t.baselineY|0,e.width=a,e.height=c,n.fillStyle="#f00",n.fillRect(0,0,a,c),n.font=t._font,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(t.testString,0,u);var h={ascent:0,descent:0,fontSize:0},l=n.getImageData(0,0,a,c);if(!l)return h.ascent=u,h.descent=u+6,h.fontSize=h.ascent+h.descent,r.remove(e),h;var f,d,p=l.data,v=p.length,g=4*a,m=0,y=!1;for(f=0;f<u;f++){for(d=0;d<g;d+=4)if(255!==p[m+d]){y=!0;break}if(y)break;m+=g}for(h.ascent=u-f,m=v-g,y=!1,f=c;f>u;f--){for(d=0;d<g;d+=4)if(255!==p[m+d]){y=!0;break}if(y)break;m-=g}return h.descent=f-u,h.fontSize=h.ascent+h.descent,r.remove(e),h}},function(t,e,n){var r=n(1097),i=n(0),o=n(36),s=n(59),a=n(65),u=n(14),c=n(34),h=new i({Extends:c,Mixins:[r],initialize:function(t,e,n,r,i,o,s,u,h){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=128),void 0===i&&(i=0),void 0===o&&(o=360),void 0===s&&(s=!1),c.call(this,t,"Arc",new a(0,0,r)),this._startAngle=i,this._endAngle=o,this._anticlockwise=s,this._iterations=.01,this.setPosition(e,n);var l=2*this.geom.radius;this.setSize(l,l),void 0!==u&&this.setFillStyle(u,h),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(t){this._iterations=t,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(t){this.geom.radius=t;var e=2*t;this.setSize(e,e),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(t){this._startAngle=t,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(t){this._endAngle=t,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(t){this._anticlockwise=t,this.updateData()}},setRadius:function(t){return this.radius=t,this},setIterations:function(t){return void 0===t&&(t=.01),this.iterations=t,this},setStartAngle:function(t,e){return this._startAngle=t,void 0!==e&&(this._anticlockwise=e),this.updateData()},setEndAngle:function(t,e){return this._endAngle=t,void 0!==e&&(this._anticlockwise=e),this.updateData()},updateData:function(){var t=this._iterations,e=t,n=this.geom.radius,r=o(this._startAngle),i=o(this._endAngle),a=n,c=n;i-=r,this._anticlockwise?i<-u.PI2?i=-u.PI2:i>0&&(i=-u.PI2+i%u.PI2):i>u.PI2?i=u.PI2:i<0&&(i=u.PI2+i%u.PI2);for(var h,l=[a+Math.cos(r)*n,c+Math.sin(r)*n];e<1;)h=i*e+r,l.push(a+Math.cos(h)*n,c+Math.sin(h)*n),e+=t;return h=i+r,l.push(a+Math.cos(h)*n,c+Math.sin(h)*n),l.push(a+Math.cos(r)*n,c+Math.sin(r)*n),this.pathIndexes=s(l),this.pathData=l,this}});t.exports=h},function(t,e,n){var r=n(0),i=n(1100),o=n(59),s=n(10),a=n(34),u=new r({Extends:a,Mixins:[i],initialize:function(t,e,n,r,i,o){void 0===e&&(e=0),void 0===n&&(n=0),a.call(this,t,"Curve",r),this._smoothness=32,this._curveBounds=new s,this.closePath=!1,this.setPosition(e,n),void 0!==i&&this.setFillStyle(i,o),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){var t=this._curveBounds,e=this._smoothness;this.geom.getBounds(t,e),this.setSize(t.width,t.height),this.updateDisplayOrigin();for(var n=[],r=this.geom.getPoints(e),i=0;i<r.length;i++)n.push(r[i].x,r[i].y);return n.push(r[0].x,r[0].y),this.pathIndexes=o(n),this.pathData=n,this}});t.exports=u},function(t,e,n){var r=n(0),i=n(59),o=n(1103),s=n(111),a=n(34),u=new r({Extends:a,Mixins:[o],initialize:function(t,e,n,r,i,o,u){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=128),void 0===i&&(i=128),a.call(this,t,"Ellipse",new s(r/2,i/2,r,i)),this._smoothness=64,this.setPosition(e,n),this.width=r,this.height=i,void 0!==o&&this.setFillStyle(o,u),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(t){this._smoothness=t,this.updateData()}},setSize:function(t,e){return this.width=t,this.height=e,this.geom.setPosition(t/2,e/2),this.geom.setSize(t,e),this.updateData()},setSmoothness:function(t){return this._smoothness=t,this.updateData()},updateData:function(){for(var t=[],e=this.geom.getPoints(this._smoothness),n=0;n<e.length;n++)t.push(e[n].x,e[n].y);return t.push(e[0].x,e[0].y),this.pathIndexes=i(t),this.pathData=t,this}});t.exports=u},function(t,e,n){var r=n(0),i=n(34),o=n(1106),s=new r({Extends:i,Mixins:[o],initialize:function(t,e,n,r,o,s,a,u,c,h,l){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=128),void 0===o&&(o=128),void 0===s&&(s=32),void 0===a&&(a=32),i.call(this,t,"Grid",null),this.cellWidth=s,this.cellHeight=a,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.altFillColor,this.altFillAlpha,this.setPosition(e,n),this.setSize(r,o),this.setFillStyle(u,c),void 0!==h&&this.setOutlineStyle(h,l),this.updateDisplayOrigin()},setFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showCells=!1:(this.fillColor=t,this.fillAlpha=e,this.showCells=!0),this},setAltFillStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showAltCells=!1:(this.altFillColor=t,this.altFillAlpha=e,this.showAltCells=!0),this},setOutlineStyle:function(t,e){return void 0===e&&(e=1),void 0===t?this.showOutline=!1:(this.outlineFillColor=t,this.outlineFillAlpha=e,this.showOutline=!0),this}});t.exports=s},function(t,e,n){var r=n(1109),i=n(0),o=n(34),s=new i({Extends:o,Mixins:[r],initialize:function(t,e,n,r,i,s,a,u){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=48),void 0===i&&(i=32),void 0===s&&(s=15658734),void 0===a&&(a=10066329),void 0===u&&(u=13421772),o.call(this,t,"IsoBox",null),this.projection=4,this.fillTop=s,this.fillLeft=a,this.fillRight=u,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(e,n),this.setSize(r,i),this.updateDisplayOrigin()},setProjection:function(t){return this.projection=t,this},setFaces:function(t,e,n){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),this.showTop=t,this.showLeft=e,this.showRight=n,this},setFillStyle:function(t,e,n){return this.fillTop=t,this.fillLeft=e,this.fillRight=n,this.isFilled=!0,this}});t.exports=s},function(t,e,n){var r=n(0),i=n(1112),o=n(34),s=new r({Extends:o,Mixins:[i],initialize:function(t,e,n,r,i,s,a,u,c){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=48),void 0===i&&(i=32),void 0===s&&(s=!1),void 0===a&&(a=15658734),void 0===u&&(u=10066329),void 0===c&&(c=13421772),o.call(this,t,"IsoTriangle",null),this.projection=4,this.fillTop=a,this.fillLeft=u,this.fillRight=c,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=s,this.isFilled=!0,this.setPosition(e,n),this.setSize(r,i),this.updateDisplayOrigin()},setProjection:function(t){return this.projection=t,this},setReversed:function(t){return this.isReversed=t,this},setFaces:function(t,e,n){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),this.showTop=t,this.showLeft=e,this.showRight=n,this},setFillStyle:function(t,e,n){return this.fillTop=t,this.fillLeft=e,this.fillRight=n,this.isFilled=!0,this}});t.exports=s},function(t,e,n){var r=n(0),i=n(34),o=n(47),s=n(1115),a=new r({Extends:i,Mixins:[s],initialize:function(t,e,n,r,s,a,u,c,h){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=0),void 0===a&&(a=128),void 0===u&&(u=0),i.call(this,t,"Line",new o(r,s,a,u));var l=Math.max(1,this.geom.right-this.geom.left),f=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(e,n),this.setSize(l,f),void 0!==c&&this.setStrokeStyle(1,c,h),this.updateDisplayOrigin()},setLineWidth:function(t,e){return void 0===e&&(e=t),this._startWidth=t,this._endWidth=e,this.lineWidth=t,this},setTo:function(t,e,n,r){return this.geom.setTo(t,e,n,r),this}});t.exports=a},function(t,e,n){var r=n(1118),i=n(0),o=n(59),s=n(469),a=n(227),u=n(34),c=n(472),h=new i({Extends:u,Mixins:[r],initialize:function(t,e,n,r,i,o){void 0===e&&(e=0),void 0===n&&(n=0),u.call(this,t,"Polygon",new a(r));var c=s(this.geom);this.setPosition(e,n),this.setSize(c.width,c.height),void 0!==i&&this.setFillStyle(i,o),this.updateDisplayOrigin(),this.updateData()},smooth:function(t){void 0===t&&(t=1);for(var e=0;e<t;e++)c(this.geom);return this.updateData()},updateData:function(){for(var t=[],e=this.geom.points,n=0;n<e.length;n++)t.push(e[n].x,e[n].y);return t.push(e[0].x,e[0].y),this.pathIndexes=o(t),this.pathData=t,this}});t.exports=h},function(t,e,n){var r=n(10);t.exports=function(t,e){void 0===e&&(e=new r);for(var n,i=1/0,o=1/0,s=-i,a=-o,u=0;u<t.points.length;u++)n=t.points[u],i=Math.min(i,n.x),o=Math.min(o,n.y),s=Math.max(s,n.x),a=Math.max(a,n.y);return e.x=i,e.y=o,e.width=s-i,e.height=a-o,e}},function(t,e,n){var r=n(67),i=n(47),o=n(471);t.exports=function(t,e,n,s){void 0===s&&(s=[]);var a=t.points,u=o(t);!e&&n>0&&(e=u/n);for(var c=0;c<e;c++)for(var h=u*(c/e),l=0,f=0;f<a.length;f++){var d=a[f],p=a[(f+1)%a.length],v=new i(d.x,d.y,p.x,p.y),g=r(v);if(!(h<l||h>l+g)){var m=v.getPoint((h-l)/g);s.push(m);break}l+=g}return s}},function(t,e,n){var r=n(67),i=n(47);t.exports=function(t){for(var e=t.points,n=0,o=0;o<e.length;o++){var s=e[o],a=e[(o+1)%e.length],u=new i(s.x,s.y,a.x,a.y);n+=r(u)}return n}},function(t,e){var n=function(t,e){return t[0]=e[0],t[1]=e[1],t};t.exports=function(t){var e,r=[],i=t.points;for(e=0;e<i.length;e++)r.push([i[e].x,i[e].y]);var o=[];for(r.length>0&&o.push(n([0,0],r[0])),e=0;e<r.length-1;e++){var s=r[e],a=r[e+1],u=s[0],c=s[1],h=a[0],l=a[1];o.push([.85*u+.15*h,.85*c+.15*l]),o.push([.15*u+.85*h,.15*c+.85*l])}return r.length>1&&o.push(n([0,0],r[r.length-1])),t.setTo(o)}},function(t,e,n){var r=n(0),i=n(10),o=n(34),s=n(1121),a=new r({Extends:o,Mixins:[s],initialize:function(t,e,n,r,s,a,u){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=128),void 0===s&&(s=128),o.call(this,t,"Rectangle",new i(0,0,r,s)),this.setPosition(e,n),this.setSize(r,s),void 0!==a&&this.setFillStyle(a,u),this.updateDisplayOrigin(),this.updateData()},setSize:function(t,e){return this.width=t,this.height=e,this.geom.setSize(t,e),this.updateData(),this},updateData:function(){var t=[],e=this.geom,n=this._tempLine;return e.getLineA(n),t.push(n.x1,n.y1,n.x2,n.y2),e.getLineB(n),t.push(n.x2,n.y2),e.getLineC(n),t.push(n.x2,n.y2),e.getLineD(n),t.push(n.x2,n.y2),this.pathData=t,this}});t.exports=a},function(t,e,n){var r=n(1124),i=n(0),o=n(59),s=n(34),a=new i({Extends:s,Mixins:[r],initialize:function(t,e,n,r,i,o,a,u){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=5),void 0===i&&(i=32),void 0===o&&(o=64),s.call(this,t,"Star",null),this._points=r,this._innerRadius=i,this._outerRadius=o,this.setPosition(e,n),this.setSize(2*o,2*o),void 0!==a&&this.setFillStyle(a,u),this.updateDisplayOrigin(),this.updateData()},setPoints:function(t){return this._points=t,this.updateData()},setInnerRadius:function(t){return this._innerRadius=t,this.updateData()},setOuterRadius:function(t){return this._outerRadius=t,this.updateData()},points:{get:function(){return this._points},set:function(t){this._points=t,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(t){this._innerRadius=t,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(t){this._outerRadius=t,this.updateData()}},updateData:function(){var t=[],e=this._points,n=this._innerRadius,r=this._outerRadius,i=Math.PI/2*3,s=Math.PI/e,a=r,u=r;t.push(a,u+-r);for(var c=0;c<e;c++)t.push(a+Math.cos(i)*r,u+Math.sin(i)*r),i+=s,t.push(a+Math.cos(i)*n,u+Math.sin(i)*n),i+=s;return t.push(a,u+-r),this.pathIndexes=o(t),this.pathData=t,this}});t.exports=a},function(t,e,n){var r=n(0),i=n(34),o=n(82),s=n(1127),a=new r({Extends:i,Mixins:[s],initialize:function(t,e,n,r,s,a,u,c,h,l,f){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===s&&(s=128),void 0===a&&(a=64),void 0===u&&(u=0),void 0===c&&(c=128),void 0===h&&(h=128),i.call(this,t,"Triangle",new o(r,s,a,u,c,h));var d=this.geom.right-this.geom.left,p=this.geom.bottom-this.geom.top;this.setPosition(e,n),this.setSize(d,p),void 0!==l&&this.setFillStyle(l,f),this.updateDisplayOrigin(),this.updateData()},setTo:function(t,e,n,r,i,o){return this.geom.setTo(t,e,n,r,i,o),this.updateData()},updateData:function(){var t=[],e=this.geom,n=this._tempLine;return e.getLineA(n),t.push(n.x1,n.y1,n.x2,n.y2),e.getLineB(n),t.push(n.x2,n.y2),e.getLineC(n),t.push(n.x2,n.y2),this.pathData=t,this}});t.exports=a},function(t,e,n){var r=n(4),i=n(67);t.exports=function(t,e,n){void 0===n&&(n=new r);var o=t.getLineA(),s=t.getLineB(),a=t.getLineC();if(e<=0||e>=1)return n.x=o.x1,n.y=o.y1,n;var u=i(o),c=i(s),h=i(a),l=(u+c+h)*e,f=0;return l<u?(f=l/u,n.x=o.x1+(o.x2-o.x1)*f,n.y=o.y1+(o.y2-o.y1)*f):l>u+c?(f=(l-=u+c)/h,n.x=a.x1+(a.x2-a.x1)*f,n.y=a.y1+(a.y2-a.y1)*f):(f=(l-=u)/c,n.x=s.x1+(s.x2-s.x1)*f,n.y=s.y1+(s.y2-s.y1)*f),n}},function(t,e,n){var r=n(67),i=n(4);t.exports=function(t,e,n,o){void 0===o&&(o=[]);var s=t.getLineA(),a=t.getLineB(),u=t.getLineC(),c=r(s),h=r(a),l=r(u),f=c+h+l;!e&&n>0&&(e=f/n);for(var d=0;d<e;d++){var p=f*(d/e),v=0,g=new i;p<c?(v=p/c,g.x=s.x1+(s.x2-s.x1)*v,g.y=s.y1+(s.y2-s.y1)*v):p>c+h?(v=(p-=c+h)/l,g.x=u.x1+(u.x2-u.x1)*v,g.y=u.y1+(u.y2-u.y1)*v):(v=(p-=c)/h,g.x=a.x1+(a.x2-a.x1)*v,g.y=a.y1+(a.y2-a.y1)*v),o.push(g)}return o}},function(t,e){t.exports=function(t,e,n){if(!t||"number"===typeof t)return!1;if(t.hasOwnProperty(e))return t[e]=n,!0;if(-1!==e.indexOf(".")){for(var r=e.split("."),i=t,o=t,s=0;s<r.length;s++){if(!i.hasOwnProperty(r[s]))return!1;o=i,i=i[r[s]]}return o[r[r.length-1]]=n,!0}return!1}},function(t,e,n){var r=n(116),i=n(117);t.exports=function(t,e,n,o,s,a,u){if(void 0===o&&(o=!1),void 0===a&&(a=16777215),void 0===u&&(u=1),t.length===e.length){var c,h,l,f,d,p,v,g,m,y,b,w={faces:[],vertices:[]},x=o?3:2,_=Array.isArray(a),T=Array.isArray(u);if(Array.isArray(n)&&n.length>0)for(c=0;c<n.length;c++){var E=n[c],S=2*n[c],k=n[c]*x;h=t[k],l=t[k+1],f=o?t[k+2]:0,d=e[S],p=e[S+1],v=_?a[E]:a,g=T?u[E]:u,m=0,y=0,b=0,s&&(m=s[k],y=s[k+1],b=o?s[k+2]:0),w.vertices.push(new i(h,l,f,d,p,v,g,m,y,b))}else{var A=0,O=0;for(c=0;c<t.length;c+=x)h=t[c],l=t[c+1],f=o?t[c+2]:0,d=e[A],p=e[A+1],v=_?a[O]:a,g=T?u[O]:u,m=0,y=0,b=0,s&&(m=s[c],y=s[c+1],b=o?s[c+2]:0),w.vertices.push(new i(h,l,f,d,p,v,g,m,y,b)),A+=2,O++}for(c=0;c<w.vertices.length;c+=3){var C=w.vertices[c],P=w.vertices[c+1],I=w.vertices[c+2];w.faces.push(new r(C,P,I))}return w}console.warn("GenerateVerts: vertices and uvs count not equal")}},function(t,e,n){var r=n(116),i=n(69),o=n(39),s=n(117),a=new o,u=new o,c=new i;t.exports=function(t,e,n,i,o,h,l,f,d,p){void 0===n&&(n=1),void 0===i&&(i=0),void 0===o&&(o=0),void 0===h&&(h=0),void 0===l&&(l=0),void 0===f&&(f=0),void 0===d&&(d=0),void 0===p&&(p=!0);var v={faces:[],verts:[]},g=t.materials;a.set(i,o,h),u.set(l,f,d),c.fromRotationXYTranslation(u,a,p);for(var m=0;m<t.models.length;m++)for(var y=t.models[m],b=y.vertices,w=y.textureCoords,x=y.faces,_=0;_<x.length;_++){var T=x[_],E=T.vertices[0],S=T.vertices[1],k=T.vertices[2],A=b[E.vertexIndex],O=b[S.vertexIndex],C=b[k.vertexIndex],P=E.textureCoordsIndex,I=S.textureCoordsIndex,R=k.textureCoordsIndex,M=-1===P?{u:0,v:1}:w[P],N=-1===I?{u:0,v:0}:w[I],L=-1===R?{u:1,v:1}:w[R],D=16777215;""!==T.material&&g[T.material]&&(D=g[T.material]);var F=new s(A.x*n,A.y*n,A.z*n,M.u,M.v,D).transformMat4(c),j=new s(O.x*n,O.y*n,O.z*n,N.u,N.v,D).transformMat4(c),B=new s(C.x*n,C.y*n,C.z*n,L.u,L.v,D).transformMat4(c);v.verts.push(F,j,B),v.faces.push(new r(F,j,B))}return e&&(e.faces=e.faces.concat(v.faces),e.vertices=e.vertices.concat(v.verts)),v}},function(t,e,n){var r=n(65),i=n(0),o=n(11),s=n(200),a=n(12),u=new i({Extends:r,Mixins:[o.ScrollFactor,o.Visible],initialize:function(t,e,n,i,o,a,u){r.call(this,t,e,n),this.color=new s(i,o,a),this.intensity=u,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(t){return!(u.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&t.id)},setColor:function(t){var e=a.getFloatsFromUintRGB(t);return this.color.set(e[0],e[1],e[2]),this},setIntensity:function(t){return this.intensity=t,this},setRadius:function(t){return this.radius=t,this}});u.RENDER_MASK=15,t.exports=u},function(t,e,n){var r=n(151),i=n(0),o=n(50),s=n(481),a=n(150),u=n(200),c=n(74),h=n(79),l=n(12),f=new i({initialize:function(){this.lights=[],this.ambientColor=new u(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(t,e,n,r,i,o){return this.systems.displayList.add(new a(this.scene,t,e,n,r,i,o))},enable:function(){return-1===this.maxLights&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(t){for(var e=this.lights,n=t.worldView,i=[],s=0;s<e.length;s++){var a=e[s];a.willRender(t)&&r(a,n)&&i.push({light:a,distance:o(a.x,a.y,n.centerX,n.centerY)})}return i.length>this.maxLights&&(h(i,this.sortByDistance),i=i.slice(0,this.maxLights)),this.visibleLights=i.length,i},sortByDistance:function(t,e){return t.distance>=e.distance},setAmbientColor:function(t){var e=l.getFloatsFromUintRGB(t);return this.ambientColor.set(e[0],e[1],e[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(t,e,n,r,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=128),void 0===r&&(r=16777215),void 0===i&&(i=1);var o=l.getFloatsFromUintRGB(r),a=new s(t,e,n,o[0],o[1],o[2],i);return this.lights.push(a),a},removeLight:function(t){var e=this.lights.indexOf(t);return e>=0&&c(this.lights,e),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});t.exports=f},function(t,e,n){var r=n(56),i=n(17),o={Circle:n(1191),Ellipse:n(1201),Intersects:n(484),Line:n(1221),Mesh:n(1243),Point:n(1246),Polygon:n(1260),Rectangle:n(502),Triangle:n(1293)};o=i(!1,o,r),t.exports=o},function(t,e,n){t.exports={CircleToCircle:n(231),CircleToRectangle:n(151),GetCircleToCircle:n(1211),GetCircleToRectangle:n(1212),GetLineToCircle:n(232),GetLineToLine:n(485),GetLineToPoints:n(486),GetLineToPolygon:n(487),GetLineToRectangle:n(234),GetRaysFromPointToPolygon:n(1213),GetRectangleIntersection:n(1214),GetRectangleToRectangle:n(1215),GetRectangleToTriangle:n(1216),GetTriangleToCircle:n(1217),GetTriangleToLine:n(492),GetTriangleToTriangle:n(1218),LineToCircle:n(233),LineToLine:n(96),LineToRectangle:n(488),PointToLine:n(496),PointToLineSegment:n(1219),RectangleToRectangle:n(152),RectangleToTriangle:n(489),RectangleToValues:n(1220),TriangleToCircle:n(491),TriangleToLine:n(493),TriangleToTriangle:n(494)}},function(t,e,n){var r=n(39);t.exports=function(t,e,n){var i=t.x1,o=t.y1,s=t.x2,a=t.y2,u=e.x1,c=e.y1,h=s-i,l=a-o,f=e.x2-u,d=e.y2-c;if(0===h||0===d*h-f*l)return!1;var p=(h*(c-o)+l*(i-u))/(f*l-d*h),v=(u+f*p-i)/h;return v<0||p<0||p>1?null:(void 0===n&&(n=new r),n.set(i+h*v,o+l*v,v))}},function(t,e,n){var r=n(39),i=n(485),o=new(n(47)),s=new r;t.exports=function(t,e,n){void 0===n&&(n=new r);var a=!1;n.set(),s.set();for(var u=e[0],c=1;c<e.length;c++){var h=e[c];o.setTo(u.x,u.y,h.x,h.y),u=h,i(t,o,s)&&(!a||s.z<n.z)&&(n.copy(s),a=!0)}return a?n:null}},function(t,e,n){var r=n(39),i=n(140),o=n(486),s=new r;t.exports=function(t,e,n){void 0===n&&(n=new i),Array.isArray(e)||(e=[e]);var r=!1;n.set(),s.set();for(var a=0;a<e.length;a++)o(t,e[a].points,s)&&(!r||s.z<n.z)&&(n.set(s.x,s.y,s.z,a),r=!0);return r?n:null}},function(t,e){t.exports=function(t,e){var n=t.x1,r=t.y1,i=t.x2,o=t.y2,s=e.x,a=e.y,u=e.right,c=e.bottom,h=0;if(n>=s&&n<=u&&r>=a&&r<=c||i>=s&&i<=u&&o>=a&&o<=c)return!0;if(n<s&&i>=s){if((h=r+(o-r)*(s-n)/(i-n))>a&&h<=c)return!0}else if(n>u&&i<=u&&(h=r+(o-r)*(u-n)/(i-n))>=a&&h<=c)return!0;if(r<a&&o>=a){if((h=n+(i-n)*(a-r)/(o-r))>=s&&h<=u)return!0}else if(r>c&&o<=c&&(h=n+(i-n)*(c-r)/(o-r))>=s&&h<=u)return!0;return!1}},function(t,e,n){var r=n(96),i=n(57),o=n(235),s=n(490);t.exports=function(t,e){if(e.left>t.right||e.right<t.left||e.top>t.bottom||e.bottom<t.top)return!1;var n=e.getLineA(),a=e.getLineB(),u=e.getLineC();if(i(t,n.x1,n.y1)||i(t,n.x2,n.y2))return!0;if(i(t,a.x1,a.y1)||i(t,a.x2,a.y2))return!0;if(i(t,u.x1,u.y1)||i(t,u.x2,u.y2))return!0;var c=t.getLineA(),h=t.getLineB(),l=t.getLineC(),f=t.getLineD();if(r(n,c)||r(n,h)||r(n,l)||r(n,f))return!0;if(r(a,c)||r(a,h)||r(a,l)||r(a,f))return!0;if(r(u,c)||r(u,h)||r(u,l)||r(u,f))return!0;var d=s(t);return o(e,d,!0).length>0}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=[]),e.push({x:t.x,y:t.y}),e.push({x:t.right,y:t.y}),e.push({x:t.right,y:t.bottom}),e.push({x:t.x,y:t.bottom}),e}},function(t,e,n){var r=n(233),i=n(115);t.exports=function(t,e){return!(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)&&(!!i(t,e.x,e.y)||!!r(t.getLineA(),e)||!!r(t.getLineB(),e)||!!r(t.getLineC(),e))}},function(t,e,n){var r=n(4),i=n(493),o=n(96);t.exports=function(t,e,n){if(void 0===n&&(n=[]),i(t,e))for(var s=t.getLineA(),a=t.getLineB(),u=t.getLineC(),c=[new r,new r,new r],h=[o(s,e,c[0]),o(a,e,c[1]),o(u,e,c[2])],l=0;l<3;l++)h[l]&&n.push(c[l]);return n}},function(t,e,n){var r=n(96);t.exports=function(t,e){return!(!t.contains(e.x1,e.y1)&&!t.contains(e.x2,e.y2))||!!r(t.getLineA(),e)||!!r(t.getLineB(),e)||!!r(t.getLineC(),e)}},function(t,e,n){var r=n(235),i=n(495),o=n(96);t.exports=function(t,e){if(t.left>e.right||t.right<e.left||t.top>e.bottom||t.bottom<e.top)return!1;var n=t.getLineA(),s=t.getLineB(),a=t.getLineC(),u=e.getLineA(),c=e.getLineB(),h=e.getLineC();if(o(n,u)||o(n,c)||o(n,h))return!0;if(o(s,u)||o(s,c)||o(s,h))return!0;if(o(a,u)||o(a,c)||o(a,h))return!0;var l=i(t),f=r(e,l,!0);return f.length>0||(l=i(e),(f=r(t,l,!0)).length>0)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=[]),e.push({x:t.x1,y:t.y1}),e.push({x:t.x2,y:t.y2}),e.push({x:t.x3,y:t.y3}),e}},function(t,e){t.exports=function(t,e,n){void 0===n&&(n=1);var r=e.x1,i=e.y1,o=e.x2,s=e.y2,a=t.x,u=t.y,c=(o-r)*(o-r)+(s-i)*(s-i);if(0===c)return!1;var h=((a-r)*(o-r)+(u-i)*(s-i))/c;if(h<0)return Math.sqrt((r-a)*(r-a)+(i-u)*(i-u))<=n;if(h>=0&&h<=1){var l=((i-u)*(o-r)-(r-a)*(s-i))/c;return Math.abs(l)*Math.sqrt(c)<=n}return Math.sqrt((o-a)*(o-a)+(s-u)*(s-u))<=n}},function(t,e,n){var r=n(14),i=n(68),o=n(97);t.exports=function(t){var e=o(t)-r.TAU;return i(e,-Math.PI,Math.PI)}},function(t,e){var n=!0,r="untitled",i="",o="";function s(t){var e=t.indexOf("#");return e>-1?t.substring(0,e):t}function a(t){return 0===t.models.length&&t.models.push({faces:[],name:r,textureCoords:[],vertexNormals:[],vertices:[]}),i="",t.models[t.models.length-1]}function u(t,e){var n=t.length>=2?t[1]:r;e.models.push({faces:[],name:n,textureCoords:[],vertexNormals:[],vertices:[]}),i=""}function c(t){2===t.length&&(i=t[1])}function h(t,e){var n=t.length,r=n>=2?parseFloat(t[1]):0,i=n>=3?parseFloat(t[2]):0,o=n>=4?parseFloat(t[3]):0;a(e).vertices.push({x:r,y:i,z:o})}function l(t,e){var r=t.length,i=r>=2?parseFloat(t[1]):0,o=r>=3?parseFloat(t[2]):0,s=r>=4?parseFloat(t[3]):0;isNaN(i)&&(i=0),isNaN(o)&&(o=0),isNaN(s)&&(s=0),n&&(o=1-o),a(e).textureCoords.push({u:i,v:o,w:s})}function f(t,e){var n=t.length,r=n>=2?parseFloat(t[1]):0,i=n>=3?parseFloat(t[2]):0,o=n>=4?parseFloat(t[3]):0;a(e).vertexNormals.push({x:r,y:i,z:o})}function d(t,e){var n=t.length-1;if(!(n<3)){for(var r={group:i,material:o,vertices:[]},s=0;s<n;s++){var u=t[s+1].split("/"),c=u.length;if(!(c<1||c>3)){var h=0,l=0,f=0;h=parseInt(u[0],10),c>1&&""!==u[1]&&(l=parseInt(u[1],10)),c>2&&(f=parseInt(u[2],10)),0!==h&&(h<0&&(h=a(e).vertices.length+1+h),l-=1,h-=1,f-=1,r.vertices.push({textureCoordsIndex:l,vertexIndex:h,vertexNormalIndex:f}))}}a(e).faces.push(r)}}function p(t,e){t.length>=2&&e.materialLibraries.push(t[1])}function v(t){t.length>=2&&(o=t[1])}t.exports=function(t,e){void 0===e&&(e=!0),n=e;var r={materials:{},materialLibraries:[],models:[]};i="",o="";for(var a=t.split("\n"),g=0;g<a.length;g++){var m=s(a[g]).replace(/\s\s+/g," ").trim().split(" ");switch(m[0].toLowerCase()){case"o":u(m,r);break;case"g":c(m);break;case"v":h(m,r);break;case"vt":l(m,r);break;case"vn":f(m,r);break;case"f":d(m,r);break;case"mtllib":p(m,r);break;case"usemtl":v(m)}}return r}},function(t,e,n){var r=n(103);t.exports=function(t){for(var e={},n=t.split("\n"),i="",o=0;o<n.length;o++){var s=n[o].trim();if(0!==s.indexOf("#")&&""!==s){var a=s.replace(/\s\s+/g," ").trim().split(" ");switch(a[0].toLowerCase()){case"newmtl":i=a[1];break;case"kd":var u=Math.floor(255*a[1]),c=a.length>=2?Math.floor(255*a[2]):u,h=a.length>=3?Math.floor(255*a[3]):u;e[i]=r(u,c,h)}}}return e}},function(t,e){t.exports=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)}},function(t,e){t.exports=function(t){return t.x*t.x+t.y*t.y}},function(t,e,n){var r=n(10);r.Area=n(1267),r.Ceil=n(1268),r.CeilAll=n(1269),r.CenterOn=n(190),r.Clone=n(1270),r.Contains=n(57),r.ContainsPoint=n(1271),r.ContainsRect=n(503),r.CopyFrom=n(1272),r.Decompose=n(490),r.Equals=n(1273),r.FitInside=n(1274),r.FitOutside=n(1275),r.Floor=n(1276),r.FloorAll=n(1277),r.FromPoints=n(199),r.FromXY=n(1278),r.GetAspectRatio=n(237),r.GetCenter=n(1279),r.GetPoint=n(171),r.GetPoints=n(306),r.GetSize=n(1280),r.Inflate=n(1281),r.Intersection=n(1282),r.MarchingAnts=n(316),r.MergePoints=n(1283),r.MergeRect=n(1284),r.MergeXY=n(1285),r.Offset=n(1286),r.OffsetPoint=n(1287),r.Overlaps=n(1288),r.Perimeter=n(130),r.PerimeterPoint=n(1289),r.Random=n(174),r.RandomOutside=n(1290),r.SameDimensions=n(1291),r.Scale=n(1292),r.Union=n(441),t.exports=r},function(t,e){t.exports=function(t,e){return!(e.width*e.height>t.width*t.height)&&e.x>t.x&&e.x<t.right&&e.right>t.x&&e.right<t.right&&e.y>t.y&&e.y<t.bottom&&e.bottom>t.y&&e.bottom<t.bottom}},function(t,e,n){var r=n(4);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=(t.x1+t.x2+t.x3)/3,e.y=(t.y1+t.y2+t.y3)/3,e}},function(t,e){t.exports=function(t,e,n){return t.x1+=e,t.y1+=n,t.x2+=e,t.y2+=n,t.x3+=e,t.y3+=n,t}},function(t,e,n){var r=n(4);function i(t,e,n,r){var i=t-n,o=e-r,s=i*i+o*o;return Math.sqrt(s)}t.exports=function(t,e){void 0===e&&(e=new r);var n=t.x1,o=t.y1,s=t.x2,a=t.y2,u=t.x3,c=t.y3,h=i(u,c,s,a),l=i(n,o,u,c),f=i(s,a,n,o),d=h+l+f;return e.x=(n*h+s*l+u*f)/d,e.y=(o*h+a*l+c*f)/d,e}},function(t,e){t.exports=function(t,e){return function(n,r,i,o){var s=t.getPixelAlpha(r,i,o.texture.key,o.frame.name);return s&&s>=e}}},function(t,e){t.exports=function(t,e,n){return{gameObject:t,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:e,hitAreaCallback:n,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}}},function(t,e,n){var r=new(n(0))({initialize:function(t,e){this.pad=t,this.events=t.events,this.index=e,this.value=0,this.threshold=.1},update:function(t){this.value=t},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});t.exports=r},function(t,e,n){var r=n(0),i=n(239),o=new r({initialize:function(t,e){this.pad=t,this.events=t.manager,this.index=e,this.value=0,this.threshold=1,this.pressed=!1},update:function(t){this.value=t;var e=this.pad,n=this.index;t>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(i.BUTTON_DOWN,e,this,t),this.pad.emit(i.GAMEPAD_BUTTON_DOWN,n,t,this)):this.pressed&&(this.pressed=!1,this.events.emit(i.BUTTON_UP,e,this,t),this.pad.emit(i.GAMEPAD_BUTTON_UP,n,t,this))},destroy:function(){this.pad=null,this.events=null}});t.exports=o},function(t,e,n){var r=n(509),i=n(510),o=n(0),s=n(9),a=n(3),u=new o({Extends:s,initialize:function(t,e){s.call(this),this.manager=t,this.pad=e,this.id=e.id,this.index=e.index;for(var n=[],o=0;o<e.buttons.length;o++)n.push(new i(this,o));this.buttons=n;var u=[];for(o=0;o<e.axes.length;o++)u.push(new r(this,o));this.axes=u,this.vibration=e.vibrationActuator;var c={value:0,pressed:!1};this._LCLeft=n[14]?n[14]:c,this._LCRight=n[15]?n[15]:c,this._LCTop=n[12]?n[12]:c,this._LCBottom=n[13]?n[13]:c,this._RCLeft=n[2]?n[2]:c,this._RCRight=n[1]?n[1]:c,this._RCTop=n[3]?n[3]:c,this._RCBottom=n[0]?n[0]:c,this._FBLeftTop=n[4]?n[4]:c,this._FBLeftBottom=n[6]?n[6]:c,this._FBRightTop=n[5]?n[5]:c,this._FBRightBottom=n[7]?n[7]:c;var h={value:0};this._HAxisLeft=u[0]?u[0]:h,this._VAxisLeft=u[1]?u[1]:h,this._HAxisRight=u[2]?u[2]:h,this._VAxisRight=u[3]?u[3]:h,this.leftStick=new a,this.rightStick=new a,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(t){return this.axes[t].getValue()},setAxisThreshold:function(t){for(var e=0;e<this.axes.length;e++)this.axes[e].threshold=t},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(t){return this.buttons[t].value},isButtonDown:function(t){return this.buttons[t].pressed},update:function(t){if(!(t.timestamp<this._created)){var e,n=this.buttons,r=t.buttons,i=n.length;for(e=0;e<i;e++)n[e].update(r[e].value);var o=this.axes,s=t.axes;for(i=o.length,e=0;e<i;e++)o[e].update(s[e]);i>=2&&(this.leftStick.set(o[0].getValue(),o[1].getValue()),i>=4&&this.rightStick.set(o[2].getValue(),o[3].getValue()))}},destroy:function(){var t;for(this.removeAllListeners(),this.manager=null,this.pad=null,t=0;t<this.buttons.length;t++)this.buttons[t].destroy();for(t=0;t<this.axes.length;t++)this.axes[t].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});t.exports=u},function(t,e,n){var r=n(0),i=n(9),o=n(154),s=new r({Extends:i,initialize:function(t,e){i.call(this),this.plugin=t,this.keyCode=e,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(t){return this.emitOnRepeat=t,this},onDown:function(t){this.originalEvent=t,this.enabled&&(this.altKey=t.altKey,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.location=t.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(o.DOWN,this,t):(this.isDown=!0,this.isUp=!1,this.timeDown=t.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(o.DOWN,this,t)))},onUp:function(t){this.originalEvent=t,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=t.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(o.UP,this,t))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});t.exports=s},function(t,e,n){var r=n(0),i=n(154),o=n(2),s=n(514),a=n(516),u=new r({initialize:function(t,e,n){if(void 0===n&&(n={}),e.length<2)return!1;this.manager=t,this.enabled=!0,this.keyCodes=[];for(var r=0;r<e.length;r++){var u=e[r];"string"===typeof u?this.keyCodes.push(u.toUpperCase().charCodeAt(0)):"number"===typeof u?this.keyCodes.push(u):u.hasOwnProperty("keyCode")&&this.keyCodes.push(u.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=o(n,"resetOnWrongKey",!0),this.maxKeyDelay=o(n,"maxKeyDelay",0),this.resetOnMatch=o(n,"resetOnMatch",!1),this.deleteOnMatch=o(n,"deleteOnMatch",!1);var c=this;this.onKeyDown=function(t){!c.matched&&c.enabled&&s(t,c)&&(c.manager.emit(i.COMBO_MATCH,c,t),c.resetOnMatch?a(c):c.deleteOnMatch&&c.destroy())},this.manager.on(i.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(i.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});t.exports=u},function(t,e,n){var r=n(515);t.exports=function(t,e){if(e.matched)return!0;var n=!1,i=!1;if(t.keyCode===e.current)if(e.index>0&&e.maxKeyDelay>0){var o=e.timeLastMatched+e.maxKeyDelay;t.timeStamp<=o&&(i=!0,n=r(t,e))}else i=!0,n=r(t,e);return!i&&e.resetOnWrongKey&&(e.index=0,e.current=e.keyCodes[0]),n&&(e.timeLastMatched=t.timeStamp,e.matched=!0,e.timeMatched=t.timeStamp),n}},function(t,e){t.exports=function(t,e){return e.timeLastMatched=t.timeStamp,e.index++,e.index===e.size||(e.current=e.keyCodes[e.index],!1)}},function(t,e){t.exports=function(t){return t.current=t.keyCodes[0],t.index=0,t.timeLastMatched=0,t.matched=!1,t.timeMatched=0,t}},function(t,e,n){var r=n(240);t.exports=function(t,e){var n=r(e,t.xhrSettings),i=new XMLHttpRequest;if(i.open("GET",t.src,n.async,n.user,n.password),i.responseType=t.xhrSettings.responseType,i.timeout=n.timeout,n.headers)for(var o in n.headers)i.setRequestHeader(o,n.headers[o]);return n.header&&n.headerValue&&i.setRequestHeader(n.header,n.headerValue),n.requestedWith&&i.setRequestHeader("X-Requested-With",n.requestedWith),n.overrideMimeType&&i.overrideMimeType(n.overrideMimeType),n.withCredentials&&(i.withCredentials=!0),i.onload=t.onLoad.bind(t,i),i.onerror=t.onError.bind(t,i),i.onprogress=t.onProgress.bind(t),i.send(),i}},function(t,e,n){var r=n(0),i=n(21),o=n(23),s=n(8),a=n(2),u=n(519),c=n(7),h=new r({Extends:o,initialize:function(t,e,n,r,i){if(c(e)){var s=e;e=a(s,"key"),r=a(s,"xhrSettings"),i=a(s,"context",i)}var u={type:"audio",cache:t.cacheManager.audio,extension:n.type,responseType:"arraybuffer",key:e,url:n.url,xhrSettings:r,config:{context:i}};o.call(this,t,u)},onProcess:function(){this.state=i.FILE_PROCESSING;var t=this;this.config.context.decodeAudioData(this.xhrLoader.response,(function(e){t.data=e,t.onProcessComplete()}),(function(e){console.error("Error decoding audio: "+t.key+" - ",e?e.message:null),t.onProcessError()})),this.config.context=null}});h.create=function(t,e,n,r,i){var o=t.systems.game,s=o.config.audio,l=o.device.audio;c(e)&&(n=a(e,"url",[]),r=a(e,"config",{}));var f=h.getAudioURL(o,n);return f?l.webAudio&&!s.disableWebAudio?new h(t,e,f,i,o.sound.context):new u(t,e,f,r):null},h.getAudioURL=function(t,e){Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var r=a(e[n],"url",e[n]);if(0===r.indexOf("blob:")||0===r.indexOf("data:"))return{url:r,type:""};var i=r.match(/\.([a-zA-Z0-9]+)($|\?)/);if(i=a(e[n],"type",i?i[1]:"").toLowerCase(),t.device.audio[i])return{url:r,type:i}}return null},s.register("audio",(function(t,e,n,r){var i,o=this.systems.game,s=o.config.audio,a=o.device.audio;if(s.noAudio||!a.webAudio&&!a.audioData)return this;if(Array.isArray(t))for(var u=0;u<t.length;u++)(i=h.create(this,t[u]))&&this.addFile(i);else(i=h.create(this,t,e,n,r))&&this.addFile(i);return this})),t.exports=h},function(t,e,n){var r=n(0),i=n(95),o=n(23),s=n(2),a=n(155),u=n(7),c=new r({Extends:o,initialize:function(t,e,n,r){if(u(e)){var i=e;e=s(i,"key"),r=s(i,"config",r)}var a={type:"audio",cache:t.cacheManager.audio,extension:n.type,key:e,url:n.url,config:r};o.call(this,t,a),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var t=0;t<this.data.length;t++){var e=this.data[t];e.oncanplaythrough=null,e.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(t){var e=t.target;e.oncanplaythrough=null,e.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(i.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var t=this.config&&this.config.instances||1;this.filesTotal=t,this.filesLoaded=0,this.percentComplete=0;for(var e=0;e<t;e++){var n=new Audio;n.dataset||(n.dataset={}),n.dataset.name=this.key+("0"+e).slice(-2),n.dataset.used="false",this.locked?n.dataset.locked="true":(n.dataset.locked="false",n.preload="auto",n.oncanplaythrough=this.onProgress.bind(this),n.onerror=this.onError.bind(this)),this.data.push(n)}for(e=0;e<this.data.length;e++)(n=this.data[e]).src=a(this,this.loader.baseURL),this.locked||n.load();this.locked&&setTimeout(this.onLoad.bind(this))}});t.exports=c},function(t,e,n){var r=n(0),i=n(21),o=n(23),s=n(8),a=n(2),u=n(7),c=new r({Extends:o,initialize:function(t,e,n,r){var i="js";if(u(e)){var s=e;e=a(s,"key"),n=a(s,"url"),r=a(s,"xhrSettings"),i=a(s,"extension",i)}var c={type:"script",cache:!1,extension:i,responseType:"text",key:e,url:n,xhrSettings:r};o.call(this,t,c)},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});s.register("script",(function(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new c(this,t[r]));else this.addFile(new c(this,t,e,n));return this})),t.exports=c},function(t,e,n){var r=n(522),i=n(157),o=n(0),s=n(62),a=n(524),u=n(525),c=new o({initialize:function(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},collider:function(t,e,n,r,i){return this.world.addCollider(t,e,n,r,i)},overlap:function(t,e,n,r,i){return this.world.addOverlap(t,e,n,r,i)},existing:function(t,e){var n=e?s.STATIC_BODY:s.DYNAMIC_BODY;return this.world.enableBody(t,n),t},staticImage:function(t,e,n,i){var o=new r(this.scene,t,e,n,i);return this.sys.displayList.add(o),this.world.enableBody(o,s.STATIC_BODY),o},image:function(t,e,n,i){var o=new r(this.scene,t,e,n,i);return this.sys.displayList.add(o),this.world.enableBody(o,s.DYNAMIC_BODY),o},staticSprite:function(t,e,n,r){var o=new i(this.scene,t,e,n,r);return this.sys.displayList.add(o),this.sys.updateList.add(o),this.world.enableBody(o,s.STATIC_BODY),o},sprite:function(t,e,n,r){var o=new i(this.scene,t,e,n,r);return this.sys.displayList.add(o),this.sys.updateList.add(o),this.world.enableBody(o,s.DYNAMIC_BODY),o},staticGroup:function(t,e){return this.sys.updateList.add(new u(this.world,this.world.scene,t,e))},group:function(t,e){return this.sys.updateList.add(new a(this.world,this.world.scene,t,e))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});t.exports=c},function(t,e,n){var r=n(0),i=n(243),o=n(125),s=new r({Extends:o,Mixins:[i.Acceleration,i.Angular,i.Bounce,i.Debug,i.Drag,i.Enable,i.Friction,i.Gravity,i.Immovable,i.Mass,i.Pushable,i.Size,i.Velocity],initialize:function(t,e,n,r,i){o.call(this,t,e,n,r,i),this.body=null}});t.exports=s},function(t,e,n){var r=n(244),i=n(65),o=n(231),s=n(151);t.exports=function(t,e,n,a,u,c){var h=r(t,e-a,n-a,2*a,2*a,u,c);if(0===h.length)return h;for(var l=new i(e,n,a),f=new i,d=[],p=0;p<h.length;p++){var v=h[p];v.isCircle?(f.setTo(v.center.x,v.center.y,v.halfWidth),o(l,f)&&d.push(v)):s(l,v)&&d.push(v)}return d}},function(t,e,n){var r=n(157),i=n(0),o=n(62),s=n(2),a=n(113),u=n(7),c=new i({Extends:a,initialize:function(t,e,n,i){if(n||i)if(u(n))i=n,n=null,i.internalCreateCallback=this.createCallbackHandler,i.internalRemoveCallback=this.removeCallbackHandler;else if(Array.isArray(n)&&u(n[0])){i=n[0];var c=this;n.forEach((function(t){t.internalCreateCallback=c.createCallbackHandler,t.internalRemoveCallback=c.removeCallbackHandler})),n=null}else i={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};else i={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler};this.world=t,i.classType=s(i,"classType",r),this.physicsType=o.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:s(i,"collideWorldBounds",!1),setBoundsRectangle:s(i,"customBoundsRectangle",null),setAccelerationX:s(i,"accelerationX",0),setAccelerationY:s(i,"accelerationY",0),setAllowDrag:s(i,"allowDrag",!0),setAllowGravity:s(i,"allowGravity",!0),setAllowRotation:s(i,"allowRotation",!0),setBounceX:s(i,"bounceX",0),setBounceY:s(i,"bounceY",0),setDragX:s(i,"dragX",0),setDragY:s(i,"dragY",0),setEnable:s(i,"enable",!0),setGravityX:s(i,"gravityX",0),setGravityY:s(i,"gravityY",0),setFrictionX:s(i,"frictionX",0),setFrictionY:s(i,"frictionY",0),setMaxVelocityX:s(i,"maxVelocityX",1e4),setMaxVelocityY:s(i,"maxVelocityY",1e4),setVelocityX:s(i,"velocityX",0),setVelocityY:s(i,"velocityY",0),setAngularVelocity:s(i,"angularVelocity",0),setAngularAcceleration:s(i,"angularAcceleration",0),setAngularDrag:s(i,"angularDrag",0),setMass:s(i,"mass",1),setImmovable:s(i,"immovable",!1)},a.call(this,e,n,i),this.type="PhysicsGroup"},createCallbackHandler:function(t){t.body||this.world.enableBody(t,o.DYNAMIC_BODY);var e=t.body;for(var n in this.defaults)e[n](this.defaults[n])},removeCallbackHandler:function(t){t.body&&this.world.disableBody(t)},setVelocity:function(t,e,n){void 0===n&&(n=0);for(var r=this.getChildren(),i=0;i<r.length;i++)r[i].body.velocity.set(t+i*n,e+i*n);return this},setVelocityX:function(t,e){void 0===e&&(e=0);for(var n=this.getChildren(),r=0;r<n.length;r++)n[r].body.velocity.x=t+r*e;return this},setVelocityY:function(t,e){void 0===e&&(e=0);for(var n=this.getChildren(),r=0;r<n.length;r++)n[r].body.velocity.y=t+r*e;return this}});t.exports=c},function(t,e,n){var r=n(157),i=n(0),o=n(62),s=n(2),a=n(113),u=n(7),c=new i({Extends:a,initialize:function(t,e,n,i){n||i?u(n)?(i=n,n=null,i.internalCreateCallback=this.createCallbackHandler,i.internalRemoveCallback=this.removeCallbackHandler,i.createMultipleCallback=this.createMultipleCallbackHandler,i.classType=s(i,"classType",r)):Array.isArray(n)&&u(n[0])?(i=n,n=null,i.forEach((function(t){t.internalCreateCallback=this.createCallbackHandler,t.internalRemoveCallback=this.removeCallbackHandler,t.createMultipleCallback=this.createMultipleCallbackHandler,t.classType=s(t,"classType",r)}))):i={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:i={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:r},this.world=t,this.physicsType=o.STATIC_BODY,a.call(this,e,n,i),this.type="StaticPhysicsGroup"},createCallbackHandler:function(t){t.body||this.world.enableBody(t,o.STATIC_BODY)},removeCallbackHandler:function(t){t.body&&this.world.disableBody(t)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var t=this.children.entries,e=0;e<t.length;e++)t[e].body.reset();return this}});t.exports=c},function(t,e,n){var r=n(350),i=n(527),o=n(18),s=n(0),a=n(528),u=n(62),c=n(50),h=n(9),l=n(245),f=n(124),d=n(354),p=n(355),v=n(246),g=n(247),m=n(529),y=n(6),b=n(14),w=n(211),x=n(530),_=n(10),T=n(531),E=n(532),S=n(537),k=n(538),A=n(149),O=n(539),C=n(248),P=n(25),I=n(3),R=n(68),M=new s({Extends:h,initialize:function(t,e){h.call(this),this.scene=t,this.bodies=new A,this.staticBodies=new A,this.pendingDestroy=new A,this.colliders=new w,this.gravity=new I(y(e,"gravity.x",0),y(e,"gravity.y",0)),this.bounds=new _(y(e,"x",0),y(e,"y",0),y(e,"width",t.sys.scale.width),y(e,"height",t.sys.scale.height)),this.checkCollision={up:y(e,"checkCollision.up",!0),down:y(e,"checkCollision.down",!0),left:y(e,"checkCollision.left",!0),right:y(e,"checkCollision.right",!0)},this.fps=y(e,"fps",60),this.fixedStep=y(e,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=y(e,"timeScale",1),this.OVERLAP_BIAS=y(e,"overlapBias",4),this.TILE_BIAS=y(e,"tileBias",16),this.forceX=y(e,"forceX",!1),this.isPaused=y(e,"isPaused",!1),this._total=0,this.drawDebug=y(e,"debug",!1),this.debugGraphic,this.defaults={debugShowBody:y(e,"debugShowBody",!0),debugShowStaticBody:y(e,"debugShowStaticBody",!0),debugShowVelocity:y(e,"debugShowVelocity",!0),bodyDebugColor:y(e,"debugBodyColor",16711935),staticBodyDebugColor:y(e,"debugStaticBodyColor",255),velocityDebugColor:y(e,"debugVelocityColor",65280)},this.maxEntries=y(e,"maxEntries",16),this.useTree=y(e,"useTree",!0),this.tree=new T(this.maxEntries),this.staticTree=new T(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new P,this._tempMatrix2=new P,this.drawDebug&&this.createDebugGraphic()},enable:function(t,e){void 0===e&&(e=u.DYNAMIC_BODY),Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n];if(r.isParent)for(var i=r.getChildren(),o=0;o<i.length;o++){var s=i[o];s.isParent?this.enable(s,e):this.enableBody(s,e)}else this.enableBody(r,e)}},enableBody:function(t,e){return void 0===e&&(e=u.DYNAMIC_BODY),t.body||(e===u.DYNAMIC_BODY?t.body=new i(this,t):e===u.STATIC_BODY&&(t.body=new O(this,t))),this.add(t.body),t},add:function(t){return t.physicsType===u.DYNAMIC_BODY?this.bodies.set(t):t.physicsType===u.STATIC_BODY&&(this.staticBodies.set(t),this.staticTree.insert(t)),t.enable=!0,t},disable:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var n=t[e];if(n.isParent)for(var r=n.getChildren(),i=0;i<r.length;i++){var o=r[i];o.isParent?this.disable(o):this.disableBody(o.body)}else this.disableBody(n.body)}},disableBody:function(t){this.remove(t),t.enable=!1},remove:function(t){t.physicsType===u.DYNAMIC_BODY?(this.tree.remove(t),this.bodies.delete(t)):t.physicsType===u.STATIC_BODY&&(this.staticBodies.delete(t),this.staticTree.remove(t))},createDebugGraphic:function(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},setBounds:function(t,e,n,r,i,o,s,a){return this.bounds.setTo(t,e,n,r),void 0!==i&&this.setBoundsCollision(i,o,s,a),this},setBoundsCollision:function(t,e,n,r){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===r&&(r=!0),this.checkCollision.left=t,this.checkCollision.right=e,this.checkCollision.up=n,this.checkCollision.down=r,this},pause:function(){return this.isPaused=!0,this.emit(l.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(l.RESUME),this},addCollider:function(t,e,n,r,i){void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=n);var o=new a(this,!1,t,e,n,r,i);return this.colliders.add(o),o},addOverlap:function(t,e,n,r,i){void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=n);var o=new a(this,!0,t,e,n,r,i);return this.colliders.add(o),o},removeCollider:function(t){return this.colliders.remove(t),this},setFPS:function(t){return this.fps=t,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(t,e){if(!this.isPaused&&0!==this.bodies.size){var n,r,i=this._frameTime,o=this._frameTimeMS*this.timeScale;this._elapsed+=e;var s=this.bodies.entries,a=this._elapsed>=o;for(this.fixedStep||(i=.001*e,a=!0,this._elapsed=0),n=0;n<s.length;n++)(r=s[n]).enable&&r.preUpdate(a,i);if(a){this._elapsed-=o,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(s));var u=this.colliders.update();for(n=0;n<u.length;n++){var c=u[n];c.active&&c.update()}this.emit(l.WORLD_STEP,i)}for(;this._elapsed>=o;)this._elapsed-=o,this.step(i)}},step:function(t){var e,n,r=this.bodies.entries,i=r.length;for(e=0;e<i;e++)(n=r[e]).enable&&n.update(t);this.useTree&&(this.tree.clear(),this.tree.load(r));var o=this.colliders.update();for(e=0;e<o.length;e++){var s=o[e];s.active&&s.update()}this.emit(l.WORLD_STEP,t),this.stepsLastFrame++},postUpdate:function(){var t,e,n=this.bodies.entries,r=n.length,i=this.bodies,o=this.staticBodies;if(this.stepsLastFrame)for(this.stepsLastFrame=0,t=0;t<r;t++)(e=n[t]).enable&&e.postUpdate();if(this.drawDebug){var s=this.debugGraphic;for(s.clear(),t=0;t<r;t++)(e=n[t]).willDrawDebug()&&e.drawDebug(s);for(r=(n=o.entries).length,t=0;t<r;t++)(e=n[t]).willDrawDebug()&&e.drawDebug(s)}var a=this.pendingDestroy;if(a.size>0){var c=this.tree,h=this.staticTree;for(r=(n=a.entries).length,t=0;t<r;t++)(e=n[t]).physicsType===u.DYNAMIC_BODY?(c.remove(e),i.delete(e)):e.physicsType===u.STATIC_BODY&&(h.remove(e),o.delete(e)),e.world=void 0,e.gameObject=void 0;a.clear()}},updateMotion:function(t,e){t.allowRotation&&this.computeAngularVelocity(t,e),this.computeVelocity(t,e)},computeAngularVelocity:function(t,e){var n=t.angularVelocity,r=t.angularAcceleration,i=t.angularDrag,s=t.maxAngular;r?n+=r*e:t.allowDrag&&i&&(d(n-(i*=e),0,.1)?n-=i:p(n+i,0,.1)?n+=i:n=0);var a=(n=o(n,-s,s))-t.angularVelocity;t.angularVelocity+=a,t.rotation+=t.angularVelocity*e},computeVelocity:function(t,e){var n=t.velocity.x,r=t.acceleration.x,i=t.drag.x,s=t.maxVelocity.x,a=t.velocity.y,u=t.acceleration.y,c=t.drag.y,h=t.maxVelocity.y,l=t.speed,v=t.maxSpeed,g=t.allowDrag,m=t.useDamping;t.allowGravity&&(n+=(this.gravity.x+t.gravity.x)*e,a+=(this.gravity.y+t.gravity.y)*e),r?n+=r*e:g&&i&&(m?(n*=i=Math.pow(i,e),l=Math.sqrt(n*n+a*a),f(l,0,.001)&&(n=0)):d(n-(i*=e),0,.01)?n-=i:p(n+i,0,.01)?n+=i:n=0),u?a+=u*e:g&&c&&(m?(a*=c=Math.pow(c,e),l=Math.sqrt(n*n+a*a),f(l,0,.001)&&(a=0)):d(a-(c*=e),0,.01)?a-=c:p(a+c,0,.01)?a+=c:a=0),n=o(n,-s,s),a=o(a,-h,h),t.velocity.set(n,a),v>-1&&l>v&&(t.velocity.normalize().scale(v),l=v),t.speed=l},separate:function(t,e,n,r,i,o){if(!o&&!t.enable||!e.enable||t.checkCollision.none||e.checkCollision.none||!this.intersects(t,e))return!1;if(n&&!1===n.call(r,t.gameObject,e.gameObject))return!1;if(t.isCircle&&e.isCircle)return this.separateCircle(t,e,i);if(t.isCircle!==e.isCircle){var s=t.isCircle?e:t,a=t.isCircle?t:e,u={x:s.x,y:s.y,right:s.right,bottom:s.bottom},c=a.center;if((c.y<u.y||c.y>u.bottom)&&(c.x<u.x||c.x>u.right))return this.separateCircle(t,e,i)}var h=!1,f=!1;i?(h=S(t,e,i,this.OVERLAP_BIAS),f=k(t,e,i,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+t.gravity.y)<Math.abs(this.gravity.x+t.gravity.x)?(h=S(t,e,i,this.OVERLAP_BIAS),this.intersects(t,e)&&(f=k(t,e,i,this.OVERLAP_BIAS))):(f=k(t,e,i,this.OVERLAP_BIAS),this.intersects(t,e)&&(h=S(t,e,i,this.OVERLAP_BIAS)));var d=h||f;return d&&(i?(t.onOverlap||e.onOverlap)&&this.emit(l.OVERLAP,t.gameObject,e.gameObject,t,e):(t.onCollide||e.onCollide)&&this.emit(l.COLLIDE,t.gameObject,e.gameObject,t,e)),d},separateCircle:function(t,e,n,i){v(t,e,!1,i),g(t,e,!1,i);var o=0;if(t.isCircle!==e.isCircle){var s={x:e.isCircle?t.position.x:e.position.x,y:e.isCircle?t.position.y:e.position.y,right:e.isCircle?t.right:e.right,bottom:e.isCircle?t.bottom:e.bottom},a={x:t.isCircle?t.center.x:e.center.x,y:t.isCircle?t.center.y:e.center.y,radius:t.isCircle?t.halfWidth:e.halfWidth};a.y<s.y?a.x<s.x?o=c(a.x,a.y,s.x,s.y)-a.radius:a.x>s.right&&(o=c(a.x,a.y,s.right,s.y)-a.radius):a.y>s.bottom&&(a.x<s.x?o=c(a.x,a.y,s.x,s.bottom)-a.radius:a.x>s.right&&(o=c(a.x,a.y,s.right,s.bottom)-a.radius)),o*=-1}else o=t.halfWidth+e.halfWidth-c(t.center.x,t.center.y,e.center.x,e.center.y);if(t.overlapR=o,e.overlapR=o,n||0===o||t.immovable&&e.immovable||t.customSeparateX||e.customSeparateX)return 0!==o&&(t.onOverlap||e.onOverlap)&&this.emit(l.OVERLAP,t.gameObject,e.gameObject,t,e),0!==o;var u=t.center.x-e.center.x,h=t.center.y-e.center.y,f=Math.sqrt(Math.pow(u,2)+Math.pow(h,2)),d=(e.center.x-t.center.x)/f||0,p=(e.center.y-t.center.y)/f||0,m=2*(t.velocity.x*d+t.velocity.y*p-e.velocity.x*d-e.velocity.y*p)/(t.mass+e.mass);(t.immovable||e.immovable)&&(m*=2),t.immovable||(t.velocity.x=t.velocity.x-m/t.mass*d,t.velocity.y=t.velocity.y-m/t.mass*p),e.immovable||(e.velocity.x=e.velocity.x+m/e.mass*d,e.velocity.y=e.velocity.y+m/e.mass*p),t.immovable||e.immovable||(o/=2);var y=r(t.center,e.center),w=(o+b.EPSILON)*Math.cos(y),x=(o+b.EPSILON)*Math.sin(y);return t.immovable||(t.x-=w,t.y-=x,t.updateCenter()),e.immovable||(e.x+=w,e.y+=x,e.updateCenter()),t.velocity.x*=t.bounce.x,t.velocity.y*=t.bounce.y,e.velocity.x*=e.bounce.x,e.velocity.y*=e.bounce.y,(t.onCollide||e.onCollide)&&this.emit(l.COLLIDE,t.gameObject,e.gameObject,t,e),!0},intersects:function(t,e){return t!==e&&(t.isCircle||e.isCircle?t.isCircle?e.isCircle?c(t.center.x,t.center.y,e.center.x,e.center.y)<=t.halfWidth+e.halfWidth:this.circleBodyIntersects(t,e):this.circleBodyIntersects(e,t):!(t.right<=e.position.x||t.bottom<=e.position.y||t.position.x>=e.right||t.position.y>=e.bottom))},circleBodyIntersects:function(t,e){var n=o(t.center.x,e.left,e.right),r=o(t.center.y,e.top,e.bottom);return(t.center.x-n)*(t.center.x-n)+(t.center.y-r)*(t.center.y-r)<=t.halfWidth*t.halfWidth},overlap:function(t,e,n,r,i){return void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=n),this.collideObjects(t,e,n,r,i,!0)},collide:function(t,e,n,r,i){return void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=n),this.collideObjects(t,e,n,r,i,!1)},collideObjects:function(t,e,n,r,i,o){var s,a;t.isParent&&void 0===t.physicsType&&(t=t.children.entries),e&&e.isParent&&void 0===e.physicsType&&(e=e.children.entries);var u=Array.isArray(t),c=Array.isArray(e);if(this._total=0,u||c)if(!u&&c)for(s=0;s<e.length;s++)this.collideHandler(t,e[s],n,r,i,o);else if(u&&!c)if(e)for(s=0;s<t.length;s++)this.collideHandler(t[s],e,n,r,i,o);else for(s=0;s<t.length;s++){var h=t[s];for(a=s+1;a<t.length;a++)s!==a&&this.collideHandler(h,t[a],n,r,i,o)}else for(s=0;s<t.length;s++)for(a=0;a<e.length;a++)this.collideHandler(t[s],e[a],n,r,i,o);else this.collideHandler(t,e,n,r,i,o);return this._total>0},collideHandler:function(t,e,n,r,i,o){if(void 0===e&&t.isParent)return this.collideGroupVsGroup(t,t,n,r,i,o);if(!t||!e)return!1;if(t.body){if(e.body)return this.collideSpriteVsSprite(t,e,n,r,i,o);if(e.isParent)return this.collideSpriteVsGroup(t,e,n,r,i,o);if(e.isTilemap)return this.collideSpriteVsTilemapLayer(t,e,n,r,i,o)}else if(t.isParent){if(e.body)return this.collideSpriteVsGroup(e,t,n,r,i,o);if(e.isParent)return this.collideGroupVsGroup(t,e,n,r,i,o);if(e.isTilemap)return this.collideGroupVsTilemapLayer(t,e,n,r,i,o)}else if(t.isTilemap){if(e.body)return this.collideSpriteVsTilemapLayer(e,t,n,r,i,o);if(e.isParent)return this.collideGroupVsTilemapLayer(e,t,n,r,i,o)}},collideSpriteVsSprite:function(t,e,n,r,i,o){return!(!t.body||!e.body)&&(this.separate(t.body,e.body,r,i,o)&&(n&&n.call(i,t,e),this._total++),!0)},collideSpriteVsGroup:function(t,e,n,r,i,o){var s,a,c,h=t.body;if(0!==e.length&&h&&h.enable&&!h.checkCollision.none)if(this.useTree||e.physicsType===u.STATIC_BODY){var l=this.treeMinMax;l.minX=h.left,l.minY=h.top,l.maxX=h.right,l.maxY=h.bottom;var f=e.physicsType===u.DYNAMIC_BODY?this.tree.search(l):this.staticTree.search(l);for(a=f.length,s=0;s<a;s++)h!==(c=f[s])&&c.enable&&!c.checkCollision.none&&e.contains(c.gameObject)&&this.separate(h,c,r,i,o,!0)&&(n&&n.call(i,h.gameObject,c.gameObject),this._total++)}else{var d=e.getChildren(),p=e.children.entries.indexOf(t);for(a=d.length,s=0;s<a;s++)(c=d[s].body)&&s!==p&&c.enable&&this.separate(h,c,r,i,o)&&(n&&n.call(i,h.gameObject,c.gameObject),this._total++)}},collideGroupVsTilemapLayer:function(t,e,n,r,i,o){var s=t.getChildren();if(0===s.length)return!1;for(var a=!1,u=0;u<s.length;u++)s[u].body&&this.collideSpriteVsTilemapLayer(s[u],e,n,r,i,o)&&(a=!0);return a},collideTiles:function(t,e,n,r,i){return!(!t.body.enable||0===e.length)&&this.collideSpriteVsTilesHandler(t,e,n,r,i,!1,!1)},overlapTiles:function(t,e,n,r,i){return!(!t.body.enable||0===e.length)&&this.collideSpriteVsTilesHandler(t,e,n,r,i,!0,!1)},collideSpriteVsTilemapLayer:function(t,e,n,r,i,o){var s=t.body;if(!s.enable||s.checkCollision.none)return!1;var a=s.position.x,u=s.position.y,c=s.width,h=s.height,l=e.layer;if(l.tileWidth>l.baseTileWidth){var f=(l.tileWidth-l.baseTileWidth)*e.scaleX;a-=f,c+=f}l.tileHeight>l.baseTileHeight&&(h+=(l.tileHeight-l.baseTileHeight)*e.scaleY);var d=m(a,u,c,h,null,e.scene.cameras.main,e.layer);return 0!==d.length&&this.collideSpriteVsTilesHandler(t,d,n,r,i,o,!0)},collideSpriteVsTilesHandler:function(t,e,n,r,i,o,s){for(var a,u,c=t.body,h={left:0,right:0,top:0,bottom:0},f=!1,d=0;d<e.length;d++){var p=(u=(a=e[d]).tilemapLayer).tileToWorldXY(a.x,a.y);h.left=p.x,h.top=p.y,a.baseHeight!==a.height&&(h.top-=(a.height-a.baseHeight)*u.scaleY),h.right=h.left+a.width*u.scaleX,h.bottom=h.top+a.height*u.scaleY,C(h,c)&&(!r||r.call(i,t,a))&&x(a,t)&&(o||E(d,c,a,h,u,this.TILE_BIAS,s))&&(this._total++,f=!0,n&&n.call(i,t,a),o&&c.onOverlap?this.emit(l.TILE_OVERLAP,t,a,c):c.onCollide&&this.emit(l.TILE_COLLIDE,t,a,c))}return f},collideGroupVsGroup:function(t,e,n,r,i,o){if(0!==t.length&&0!==e.length)for(var s=t.getChildren(),a=0;a<s.length;a++)this.collideSpriteVsGroup(s[a],e,n,r,i,o)},wrap:function(t,e){t.body?this.wrapObject(t,e):t.getChildren?this.wrapArray(t.getChildren(),e):Array.isArray(t)?this.wrapArray(t,e):this.wrapObject(t,e)},wrapArray:function(t,e){for(var n=0;n<t.length;n++)this.wrapObject(t[n],e)},wrapObject:function(t,e){void 0===e&&(e=0),t.x=R(t.x,this.bounds.left-e,this.bounds.right+e),t.y=R(t.y,this.bounds.top-e,this.bounds.bottom+e)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});t.exports=M},function(t,e,n){var r=n(0),i=n(62),o=n(245),s=n(196),a=n(10),u=n(57),c=n(3),h=new r({initialize:function(t,e){var n=e.displayWidth?e.displayWidth:64,r=e.displayHeight?e.displayHeight:64;this.world=t,this.gameObject=e,this.transform={x:e.x,y:e.y,rotation:e.angle,scaleX:e.scaleX,scaleY:e.scaleY,displayOriginX:e.displayOriginX,displayOriginY:e.displayOriginY},this.debugShowBody=t.defaults.debugShowBody,this.debugShowVelocity=t.defaults.debugShowVelocity,this.debugBodyColor=t.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new c,this.position=new c(e.x-e.scaleX*e.displayOriginX,e.y-e.scaleY*e.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=e.angle,this.preRotation=e.angle,this.width=n,this.height=r,this.sourceWidth=n,this.sourceHeight=r,e.frame&&(this.sourceWidth=e.frame.realWidth,this.sourceHeight=e.frame.realHeight),this.halfWidth=Math.abs(n/2),this.halfHeight=Math.abs(r/2),this.center=new c(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new c,this.newVelocity=new c,this.deltaMax=new c,this.acceleration=new c,this.allowDrag=!0,this.drag=new c,this.allowGravity=!0,this.gravity=new c,this.bounce=new c,this.worldBounce=null,this.customBoundsRectangle=t.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new c(1e4,1e4),this.maxSpeed=-1,this.friction=new c(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=i.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=i.DYNAMIC_BODY,this._sx=e.scaleX,this._sy=e.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new a},updateBounds:function(){var t=this.gameObject,e=this.transform;if(t.parentContainer){var n=t.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2);e.x=n.tx,e.y=n.ty,e.rotation=s(n.rotation),e.scaleX=n.scaleX,e.scaleY=n.scaleY,e.displayOriginX=t.displayOriginX,e.displayOriginY=t.displayOriginY}else e.x=t.x,e.y=t.y,e.rotation=t.angle,e.scaleX=t.scaleX,e.scaleY=t.scaleY,e.displayOriginX=t.displayOriginX,e.displayOriginY=t.displayOriginY;var r=!1;if(this.syncBounds){var i=t.getBounds(this._bounds);this.width=i.width,this.height=i.height,r=!0}else{var o=Math.abs(e.scaleX),a=Math.abs(e.scaleY);this._sx===o&&this._sy===a||(this.width=this.sourceWidth*o,this.height=this.sourceHeight*a,this._sx=o,this._sy=a,r=!0)}r&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var t=this.transform;this.position.x=t.x+t.scaleX*(this.offset.x-t.displayOriginX),this.position.y=t.y+t.scaleY*(this.offset.y-t.displayOriginY),this.updateCenter()},resetFlags:function(t){void 0===t&&(t=!1);var e=this.wasTouching,n=this.touching,r=this.blocked;t?(e.none=!0,e.up=!1,e.down=!1,e.left=!1,e.right=!1):(e.none=n.none,e.up=n.up,e.down=n.down,e.left=n.left,e.right=n.right),n.none=!0,n.up=!1,n.down=!1,n.left=!1,n.right=!1,r.none=!0,r.up=!1,r.down=!1,r.left=!1,r.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(t,e){t&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),t&&this.update(e)},update:function(t){if(this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves){this.world.updateMotion(this,t);var e=this.velocity.x,n=this.velocity.y;this.newVelocity.set(e*t,n*t),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(n,e),this.speed=Math.sqrt(e*e+n*n),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(o.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)}this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var t=this.position.x-this.prevFrame.x,e=this.position.y-this.prevFrame.y;if(this.moves){var n=this.deltaMax.x,r=this.deltaMax.y;0!==n&&0!==t&&(t<0&&t<-n?t=-n:t>0&&t>n&&(t=n)),0!==r&&0!==e&&(e<0&&e<-r?e=-r:e>0&&e>r&&(e=r)),this.gameObject.x+=t,this.gameObject.y+=e}t<0?this.facing=i.FACING_LEFT:t>0&&(this.facing=i.FACING_RIGHT),e<0?this.facing=i.FACING_UP:e>0&&(this.facing=i.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=t,this._ty=e},setBoundsRectangle:function(t){return this.customBoundsRectangle=t||this.world.bounds,this},checkWorldBounds:function(){var t=this.position,e=this.customBoundsRectangle,n=this.world.checkCollision,r=this.worldBounce?-this.worldBounce.x:-this.bounce.x,i=this.worldBounce?-this.worldBounce.y:-this.bounce.y,o=!1;return t.x<e.x&&n.left?(t.x=e.x,this.velocity.x*=r,this.blocked.left=!0,o=!0):this.right>e.right&&n.right&&(t.x=e.right-this.width,this.velocity.x*=r,this.blocked.right=!0,o=!0),t.y<e.y&&n.up?(t.y=e.y,this.velocity.y*=i,this.blocked.up=!0,o=!0):this.bottom>e.bottom&&n.down&&(t.y=e.bottom-this.height,this.velocity.y*=i,this.blocked.down=!0,o=!0),o&&(this.blocked.none=!1,this.updateCenter()),o},setOffset:function(t,e){return void 0===e&&(e=t),this.offset.set(t,e),this},setSize:function(t,e,n){void 0===n&&(n=!0);var r=this.gameObject;if(!t&&r.frame&&(t=r.frame.realWidth),!e&&r.frame&&(e=r.frame.realHeight),this.sourceWidth=t,this.sourceHeight=e,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),n&&r.getCenter){var i=(r.width-t)/2,o=(r.height-e)/2;this.offset.set(i,o)}return this.isCircle=!1,this.radius=0,this},setCircle:function(t,e,n){return void 0===e&&(e=this.offset.x),void 0===n&&(n=this.offset.y),t>0?(this.isCircle=!0,this.radius=t,this.sourceWidth=2*t,this.sourceHeight=2*t,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(e,n),this.updateCenter()):this.isCircle=!1,this},reset:function(t,e){this.stop();var n=this.gameObject;n.setPosition(t,e),n.getTopLeft?n.getTopLeft(this.position):this.position.set(t,e),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=n.angle,this.preRotation=n.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(t,e){return this.isCircle?this.radius>0&&t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom&&(this.center.x-t)*(this.center.x-t)+(this.center.y-e)*(this.center.y-e)<=this.radius*this.radius:u(this,t,e)},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this._dx>0?this._dx:-this._dx},deltaAbsY:function(){return this._dy>0?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(t){var e=this.position,n=e.x+this.halfWidth,r=e.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor),this.isCircle?t.strokeCircle(n,r,this.width/2):(this.checkCollision.up&&t.lineBetween(e.x,e.y,e.x+this.width,e.y),this.checkCollision.right&&t.lineBetween(e.x+this.width,e.y,e.x+this.width,e.y+this.height),this.checkCollision.down&&t.lineBetween(e.x,e.y+this.height,e.x+this.width,e.y+this.height),this.checkCollision.left&&t.lineBetween(e.x,e.y,e.x,e.y+this.height))),this.debugShowVelocity&&(t.lineStyle(t.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),t.lineBetween(n,r,n+this.velocity.x/2,r+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(t,e,n,r){void 0===t&&(t=!0),this.collideWorldBounds=t;var i=void 0!==e,o=void 0!==n;return(i||o)&&(this.worldBounce||(this.worldBounce=new c),i&&(this.worldBounce.x=e),o&&(this.worldBounce.y=n)),void 0!==r&&(this.onWorldBounds=r),this},setVelocity:function(t,e){return this.velocity.set(t,e),t=this.velocity.x,e=this.velocity.y,this.speed=Math.sqrt(t*t+e*e),this},setVelocityX:function(t){this.velocity.x=t;var e=t,n=this.velocity.y;return this.speed=Math.sqrt(e*e+n*n),this},setVelocityY:function(t){this.velocity.y=t;var e=this.velocity.x,n=t;return this.speed=Math.sqrt(e*e+n*n),this},setMaxVelocity:function(t,e){return this.maxVelocity.set(t,e),this},setMaxVelocityX:function(t){return this.maxVelocity.x=t,this},setMaxVelocityY:function(t){return this.maxVelocity.y=t,this},setMaxSpeed:function(t){return this.maxSpeed=t,this},setBounce:function(t,e){return this.bounce.set(t,e),this},setBounceX:function(t){return this.bounce.x=t,this},setBounceY:function(t){return this.bounce.y=t,this},setAcceleration:function(t,e){return this.acceleration.set(t,e),this},setAccelerationX:function(t){return this.acceleration.x=t,this},setAccelerationY:function(t){return this.acceleration.y=t,this},setAllowDrag:function(t){return void 0===t&&(t=!0),this.allowDrag=t,this},setAllowGravity:function(t){return void 0===t&&(t=!0),this.allowGravity=t,this},setAllowRotation:function(t){return void 0===t&&(t=!0),this.allowRotation=t,this},setDrag:function(t,e){return this.drag.set(t,e),this},setDamping:function(t){return this.useDamping=t,this},setDragX:function(t){return this.drag.x=t,this},setDragY:function(t){return this.drag.y=t,this},setGravity:function(t,e){return this.gravity.set(t,e),this},setGravityX:function(t){return this.gravity.x=t,this},setGravityY:function(t){return this.gravity.y=t,this},setFriction:function(t,e){return this.friction.set(t,e),this},setFrictionX:function(t){return this.friction.x=t,this},setFrictionY:function(t){return this.friction.y=t,this},setAngularVelocity:function(t){return this.angularVelocity=t,this},setAngularAcceleration:function(t){return this.angularAcceleration=t,this},setAngularDrag:function(t){return this.angularDrag=t,this},setMass:function(t){return this.mass=t,this},setImmovable:function(t){return void 0===t&&(t=!0),this.immovable=t,this},setEnable:function(t){return void 0===t&&(t=!0),this.enable=t,this},processX:function(t,e,n,r){this.x+=t,this.updateCenter(),null!==e&&(this.velocity.x=e);var i=this.blocked;n&&(i.left=!0),r&&(i.right=!0)},processY:function(t,e,n,r){this.y+=t,this.updateCenter(),null!==e&&(this.velocity.y=e);var i=this.blocked;n&&(i.up=!0),r&&(i.down=!0)},x:{get:function(){return this.position.x},set:function(t){this.position.x=t}},y:{get:function(){return this.position.y},set:function(t){this.position.y=t}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});t.exports=h},function(t,e,n){var r=new(n(0))({initialize:function(t,e,n,r,i,o,s){this.world=t,this.name="",this.active=!0,this.overlapOnly=e,this.object1=n,this.object2=r,this.collideCallback=i,this.processCallback=o,this.callbackContext=s},setName:function(t){return this.name=t,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});t.exports=r},function(t,e,n){var r=n(26),i=n(3),o=new i,s=new i;t.exports=function(t,e,n,i,a,u,c){var h=c.tilemapLayer.tilemap._convert.WorldToTileXY;h(t,e,!0,o,u,c);var l=o.x,f=o.y;h(t+n,e+i,!1,s,u,c);var d=Math.ceil(s.x),p=Math.ceil(s.y);return r(l,f,d-l,p-f,a,c)}},function(t,e){t.exports=function(t,e){return t.collisionCallback?!t.collisionCallback.call(t.collisionCallbackContext,e,t):!t.layer.callbacks[t.index]||!t.layer.callbacks[t.index].callback.call(t.layer.callbacks[t.index].callbackContext,e,t)}},function(t,e,n){var r,o=n(436);function s(t){if(!(this instanceof s))return new s(t,[".left",".top",".right",".bottom"]);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}function a(t,e,n){if(!n)return e.indexOf(t);for(var r=0;r<e.length;r++)if(n(t,e[r]))return r;return-1}function u(t,e){c(t,0,t.children.length,e,t)}function c(t,e,n,r,i){i||(i=y(null)),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var o,s=e;s<n;s++)o=t.children[s],h(i,t.leaf?r(o):o);return i}function h(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function f(t,e){return t.minY-e.minY}function d(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function v(t,e){var n=Math.max(t.minX,e.minX),r=Math.max(t.minY,e.minY),i=Math.min(t.maxX,e.maxX),o=Math.min(t.maxY,e.maxY);return Math.max(0,i-n)*Math.max(0,o-r)}function g(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function m(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function y(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function b(t,e,n,r,i){for(var s,a=[e,n];a.length;)(n=a.pop())-(e=a.pop())<=r||(s=e+Math.ceil((n-e)/r/2)*r,o(t,s,e,n,i),a.push(e,s,s,n))}s.prototype=(i(r={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,n=[],r=this.toBBox;if(!m(t,e))return n;for(var i,o,s,a,u=[];e;){for(i=0,o=e.children.length;i<o;i++)s=e.children[i],m(t,a=e.leaf?r(s):s)&&(e.leaf?n.push(s):g(t,a)?this._all(s,n):u.push(s));e=u.pop()}return n},collides:function(t){var e=this.data,n=this.toBBox;if(!m(t,e))return!1;for(var r,i,o,s,a=[];e;){for(r=0,i=e.children.length;r<i;r++)if(o=e.children[r],m(t,s=e.leaf?n(o):o)){if(e.leaf||g(t,s))return!0;a.push(o)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,n=t.length;e<n;e++)this.insert(t[e]);return this}var r=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===r.height)this._splitRoot(this.data,r);else{if(this.data.height<r.height){var i=this.data;this.data=r,r=i}this._insert(r,this.data.height-r.height-1,!0)}else this.data=r;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=y([]),this},remove:function(t,e){if(!t)return this;for(var n,r,i,o,s=this.data,u=this.toBBox(t),c=[],h=[];s||c.length;){if(s||(s=c.pop(),r=c[c.length-1],n=h.pop(),o=!0),s.leaf&&-1!==(i=a(t,s.children,e)))return s.children.splice(i,1),c.push(s),this._condense(c),this;o||s.leaf||!g(s,u)?r?(n++,s=r.children[n],o=!1):s=null:(c.push(s),h.push(n),n=0,r=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:l,compareMinY:f,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},_build:function(t,e,n,r){var i,o=n-e+1,s=this._maxEntries;if(o<=s)return u(i=y(t.slice(e,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/Math.pow(s,r-1))),(i=y([])).leaf=!1,i.height=r;var a,c,h,l,f=Math.ceil(o/s),d=f*Math.ceil(Math.sqrt(s));for(b(t,e,n,d,this.compareMinX),a=e;a<=n;a+=d)for(b(t,a,h=Math.min(a+d-1,n),f,this.compareMinY),c=a;c<=h;c+=f)l=Math.min(c+f-1,h),i.children.push(this._build(t,c,l,r-1));return u(i,this.toBBox),i},_chooseSubtree:function(t,e,n,r){for(var i,o,s,a,u,c,h,l,f,p;r.push(e),!e.leaf&&r.length-1!==n;){for(h=l=1/0,i=0,o=e.children.length;i<o;i++)u=d(s=e.children[i]),f=t,p=s,(c=(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-u)<l?(l=c,h=u<h?u:h,a=s):c===l&&u<h&&(h=u,a=s);e=a||e.children[0]}return e},_insert:function(t,e,n){var r=this.toBBox,i=n?t:r(t),o=[],s=this._chooseSubtree(i,this.data,e,o);for(s.children.push(t),h(s,i);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(i,o,e)},_split:function(t,e){var n=t[e],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=y(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,u(n,this.toBBox),u(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(n,s)},_splitRoot:function(t,e){this.data=y([t,e]),this.data.height=t.height+1,this.data.leaf=!1,u(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,n){var r,i,o,s,a,u,h,l;for(u=h=1/0,r=e;r<=n-e;r++)s=v(i=c(t,0,r,this.toBBox),o=c(t,r,n,this.toBBox)),a=d(i)+d(o),s<u?(u=s,l=r,h=a<h?a:h):s===u&&a<h&&(h=a,l=r);return l},_chooseSplitAxis:function(t,e,n){var r=t.leaf?this.compareMinX:l,i=t.leaf?this.compareMinY:f;this._allDistMargin(t,e,n,r)<this._allDistMargin(t,e,n,i)&&t.children.sort(r)},_allDistMargin:function(t,e,n,r){t.children.sort(r);var i,o,s=this.toBBox,a=c(t,0,e,s),u=c(t,n-e,n,s),l=p(a)+p(u);for(i=e;i<n-e;i++)o=t.children[i],h(a,t.leaf?s(o):o),l+=p(a);for(i=n-e-1;i>=e;i--)o=t.children[i],h(u,t.leaf?s(o):o),l+=p(u);return l},_adjustParentBBoxes:function(t,e,n){for(var r=n;r>=0;r--)h(e[r],t)},_condense:function(t){for(var e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children).splice(e.indexOf(t[n]),1):this.clear():u(t[n],this.toBBox)}},"compareMinX",(function(t,e){return t.left-e.left})),i(r,"compareMinY",(function(t,e){return t.top-e.top})),i(r,"toBBox",(function(t){return{minX:t.left,minY:t.top,maxX:t.right,maxY:t.bottom}})),r),t.exports=s},function(t,e,n){var r=n(533),i=n(535),o=n(248);t.exports=function(t,e,n,s,a,u,c){var h=s.left,l=s.top,f=s.right,d=s.bottom,p=n.faceLeft||n.faceRight,v=n.faceTop||n.faceBottom;if(c||(p=!0,v=!0),!p&&!v)return!1;var g=0,m=0,y=0,b=1;if(e.deltaAbsX()>e.deltaAbsY()?y=-1:e.deltaAbsX()<e.deltaAbsY()&&(b=-1),0!==e.deltaX()&&0!==e.deltaY()&&p&&v&&(y=Math.min(Math.abs(e.position.x-f),Math.abs(e.right-h)),b=Math.min(Math.abs(e.position.y-d),Math.abs(e.bottom-l))),y<b){if(p&&0!==(g=r(e,n,h,f,u,c))&&!o(s,e))return!0;v&&(m=i(e,n,l,d,u,c))}else{if(v&&0!==(m=i(e,n,l,d,u,c))&&!o(s,e))return!0;p&&(g=r(e,n,h,f,u,c))}return 0!==g||0!==m}},function(t,e,n){var r=n(534);t.exports=function(t,e,n,i,o,s){var a=0,u=e.faceLeft,c=e.faceRight,h=e.collideLeft,l=e.collideRight;return s||(u=!0,c=!0,h=!0,l=!0),t.deltaX()<0&&l&&t.checkCollision.left?c&&t.x<i&&(a=t.x-i)<-o&&(a=0):t.deltaX()>0&&h&&t.checkCollision.right&&u&&t.right>n&&(a=t.right-n)>o&&(a=0),0!==a&&(t.customSeparateX?t.overlapX=a:r(t,a)),a}},function(t,e){t.exports=function(t,e){e<0?(t.blocked.none=!1,t.blocked.left=!0):e>0&&(t.blocked.none=!1,t.blocked.right=!0),t.position.x-=e,0===t.bounce.x?t.velocity.x=0:t.velocity.x=-t.velocity.x*t.bounce.x}},function(t,e,n){var r=n(536);t.exports=function(t,e,n,i,o,s){var a=0,u=e.faceTop,c=e.faceBottom,h=e.collideUp,l=e.collideDown;return s||(u=!0,c=!0,h=!0,l=!0),t.deltaY()<0&&l&&t.checkCollision.up?c&&t.y<i&&(a=t.y-i)<-o&&(a=0):t.deltaY()>0&&h&&t.checkCollision.down&&u&&t.bottom>n&&(a=t.bottom-n)>o&&(a=0),0!==a&&(t.customSeparateY?t.overlapY=a:r(t,a)),a}},function(t,e){t.exports=function(t,e){e<0?(t.blocked.none=!1,t.blocked.up=!0):e>0&&(t.blocked.none=!1,t.blocked.down=!0),t.position.y-=e,0===t.bounce.y?t.velocity.y=0:t.velocity.y=-t.velocity.y*t.bounce.y}},function(t,e,n){var r=n(246),i=n(1389);t.exports=function(t,e,n,o){var s=r(t,e,n,o),a=t.immovable,u=e.immovable;if(n||0===s||a&&u||t.customSeparateX||e.customSeparateX)return 0!==s||t.embedded&&e.embedded;var c=i.Set(t,e,s);return a||u?(a?i.RunImmovableBody1(c):u&&i.RunImmovableBody2(c),!0):c>0||i.Check()}},function(t,e,n){var r=n(247),i=n(1390);t.exports=function(t,e,n,o){var s=r(t,e,n,o),a=t.immovable,u=e.immovable;if(n||0===s||a&&u||t.customSeparateY||e.customSeparateY)return 0!==s||t.embedded&&e.embedded;var c=i.Set(t,e,s);return a||u?(a?i.RunImmovableBody1(c):u&&i.RunImmovableBody2(c),!0):c>0||i.Check()}},function(t,e,n){var r=n(66),i=n(0),o=n(62),s=n(57),a=n(3),u=new i({initialize:function(t,e){var n=e.displayWidth?e.displayWidth:64,r=e.displayHeight?e.displayHeight:64;this.world=t,this.gameObject=e,this.debugShowBody=t.defaults.debugShowStaticBody,this.debugBodyColor=t.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new a,this.position=new a(e.x-n*e.originX,e.y-r*e.originY),this.width=n,this.height=r,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new a(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=a.ZERO,this.allowGravity=!1,this.gravity=a.ZERO,this.bounce=a.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=o.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(t,e){return t&&t!==this.gameObject&&(this.gameObject.body=null,t.body=this,this.gameObject=t),e&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var t=this.gameObject;return t.getTopLeft(this.position),this.width=t.displayWidth,this.height=t.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(t,e){return void 0===e&&(e=t),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(t,e),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(t,e,n){void 0===n&&(n=!0);var r=this.gameObject;if(!t&&r.frame&&(t=r.frame.realWidth),!e&&r.frame&&(e=r.frame.realHeight),this.world.staticTree.remove(this),this.width=t,this.height=e,this.halfWidth=Math.floor(t/2),this.halfHeight=Math.floor(e/2),n&&r.getCenter){var i=r.displayWidth/2,o=r.displayHeight/2;this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(i-this.halfWidth,o-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y}return this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(t,e,n){return void 0===e&&(e=this.offset.x),void 0===n&&(n=this.offset.y),t>0?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=t,this.width=2*t,this.height=2*t,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(e,n),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(t,e){var n=this.gameObject;void 0===t&&(t=n.x),void 0===e&&(e=n.y),this.world.staticTree.remove(this),n.setPosition(t,e),n.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(t){return t.x=this.x,t.y=this.y,t.right=this.right,t.bottom=this.bottom,t},hitTest:function(t,e){return this.isCircle?r(this,t,e):s(this,t,e)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(t){var e=this.position,n=e.x+this.halfWidth,r=e.y+this.halfHeight;this.debugShowBody&&(t.lineStyle(t.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?t.strokeCircle(n,r,this.width/2):t.strokeRect(e.x,e.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(t){return t<=0&&(t=.1),this.mass=t,this},x:{get:function(){return this.position.x},set:function(t){this.world.staticTree.remove(this),this.position.x=t,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(t){this.world.staticTree.remove(this),this.position.y=t,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});t.exports=u},function(t,e,n){var r=new(n(0))({initialize:function(t){this.pluginManager=t,this.game=t.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=r},function(t,e,n){var r=new(n(3));t.exports=function(t,e,n,i){var o=n.tilemapLayer,s=o.cullPaddingX,a=o.cullPaddingY,u=o.tilemap.tileToWorldXY(t,e,r,i,o);return u.x>i.worldView.x+o.scaleX*n.tileWidth*(-s-.5)&&u.x<i.worldView.right+o.scaleX*n.tileWidth*(s-.5)&&u.y>i.worldView.y+o.scaleY*n.tileHeight*(-a-1)&&u.y<i.worldView.bottom+o.scaleY*n.tileHeight*(a-.5)}},function(t,e,n){var r=n(26);t.exports=function(t,e,n,i,o,s,a){for(var u=r(n,i,o,s,null,a),c=0;c<u.length;c++)u[c]&&u[c].index===t&&(u[c].index=e)}},function(t,e,n){var r=n(10),i=n(139),o=n(76),s=new r;t.exports=function(t,e){var n=t.tilemapLayer.tilemap,r=t.tilemapLayer,a=Math.floor(n.tileWidth*r.scaleX),u=Math.floor(n.tileHeight*r.scaleY),c=o(e.worldView.x-r.x,a,0,!0)-r.cullPaddingX,h=i(e.worldView.right-r.x,a,0,!0)+r.cullPaddingX,l=o(e.worldView.y-r.y,u,0,!0)-r.cullPaddingY,f=i(e.worldView.bottom-r.y,u,0,!0)+r.cullPaddingY;return s.setTo(c,l,h-c,f-l)}},function(t,e,n){var r=n(543),i=n(159);t.exports=function(t,e,n,o){void 0===n&&(n=[]),void 0===o&&(o=0),n.length=0;var s=t.tilemapLayer,a=r(t,e);return(s.skipCull||1!==s.scrollFactorX||1!==s.scrollFactorY)&&(a.left=0,a.right=t.width,a.top=0,a.bottom=t.height),i(t,a,o,n),n}},function(t,e,n){var r=n(546),i=n(159);t.exports=function(t,e,n,o){void 0===n&&(n=[]),void 0===o&&(o=0),n.length=0;var s=t.tilemapLayer;if(!s.skipCull&&1===s.scrollFactorX&&1===s.scrollFactorY){var a=r(t,e);i(t,a,o,n)}return n}},function(t,e,n){var r=n(139),i=n(76);t.exports=function(t,e){var n=t.tilemapLayer.tilemap,o=t.tilemapLayer,s=Math.floor(n.tileWidth*o.scaleX),a=Math.floor(n.tileHeight*o.scaleY),u=t.hexSideLength,c=(a-u)/2+u;return{left:i(e.worldView.x-o.x,s,0,!0)-o.cullPaddingX,right:r(e.worldView.right-o.x,s,0,!0)+o.cullPaddingX,top:i(e.worldView.y-o.y,c,0,!0)-o.cullPaddingY,bottom:r(e.worldView.bottom-o.y,c,0,!0)+o.cullPaddingY}}},function(t,e,n){var r=n(541);t.exports=function(t,e,n,i){void 0===n&&(n=[]),void 0===i&&(i=0),n.length=0;var o,s,a,u=t.tilemapLayer,c=t.data,h=t.width,l=t.height,f=h,d=l;if(!u.skipCull)if(0===i){for(s=0;s<d;s++)for(o=0;c[s]&&o<f;o++)if(r(o,s,t,e)){if(!(a=c[s][o])||-1===a.index||!a.visible||0===a.alpha)continue;n.push(a)}}else if(1===i){for(s=0;s<d;s++)for(o=f;c[s]&&o>=0;o--)if(r(o,s,t,e)){if(!(a=c[s][o])||-1===a.index||!a.visible||0===a.alpha)continue;n.push(a)}}else if(2===i){for(s=d;s>=0;s--)for(o=0;c[s]&&o<f;o++)if(r(o,s,t,e)){if(!(a=c[s][o])||-1===a.index||!a.visible||0===a.alpha)continue;n.push(a)}}else if(3===i)for(s=d;s>=0;s--)for(o=f;c[s]&&o>=0;o--)if(r(o,s,t,e)){if(!(a=c[s][o])||-1===a.index||!a.visible||0===a.alpha)continue;n.push(a)}return u.tilesDrawn=n.length,u.tilesTotal=h*l,n}},function(t,e,n){var r=n(549),i=n(159);t.exports=function(t,e,n,o){void 0===n&&(n=[]),void 0===o&&(o=0),n.length=0;var s=t.tilemapLayer;if(!s.skipCull&&1===s.scrollFactorX&&1===s.scrollFactorY){var a=r(t,e);i(t,a,o,n)}return n}},function(t,e,n){var r=n(139),i=n(76);t.exports=function(t,e){var n=t.tilemapLayer.tilemap,o=t.tilemapLayer,s=Math.floor(n.tileWidth*o.scaleX),a=Math.floor(n.tileHeight*o.scaleY);return{left:i(e.worldView.x-o.x,s,0,!0)-o.cullPaddingX,right:r(e.worldView.right-o.x,s,0,!0)+o.cullPaddingX,top:i(e.worldView.y-o.y,a/2,0,!0)-o.cullPaddingY,bottom:r(e.worldView.bottom-o.y,a/2,0,!0)+o.cullPaddingY}}},function(t,e,n){var r=n(3);t.exports=function(t,e,n,i,o){n||(n=new r);var s=o.baseTileWidth,a=o.baseTileHeight,u=o.tilemapLayer,c=0,h=0;u&&(i||(i=u.scene.cameras.main),c=u.x+i.scrollX*(1-u.scrollFactorX),s*=u.scaleX,h=u.y+i.scrollY*(1-u.scrollFactorY),a*=u.scaleY);var l=o.hexSideLength,f=c+t*s+e%2*(s/2),d=h+e*((a-l)/2+l);return n.set(f,d)}},function(t,e,n){var r=n(3);t.exports=function(t,e,n,i,o){n||(n=new r);var s=o.baseTileWidth,a=o.baseTileHeight,u=o.tilemapLayer,c=0,h=0;u&&(i||(i=u.scene.cameras.main),c=u.x+i.scrollX*(1-u.scrollFactorX),s*=u.scaleX,h=u.y+i.scrollY*(1-u.scrollFactorY),a*=u.scaleY);var l=c+s/2*(t-e),f=h+(t+e)*(a/2);return n.set(l,f)}},function(t,e,n){var r=n(3);t.exports=function(t,e,n,i,o){n||(n=new r);var s=o.baseTileWidth,a=o.baseTileHeight,u=o.tilemapLayer,c=0,h=0;u&&(i||(i=u.scene.cameras.main),c=u.x+i.scrollX*(1-u.scrollFactorX),s*=u.scaleX,h=u.y+i.scrollY*(1-u.scrollFactorY),a*=u.scaleY);var l=c+t*s+e%2*(s/2),f=h+e*(a/2);return n.set(l,f)}},function(t,e,n){var r=n(253),i=n(254),o=n(3);t.exports=function(t,e,n,s,a){return n||(n=new o(0,0)),n.x=r(t,s,a),n.y=i(e,s,a),n}},function(t,e){t.exports=function(t,e,n){var r=n.baseTileHeight,i=n.tilemapLayer,o=0;i&&(void 0===e&&(e=i.scene.cameras.main),o=i.y+e.scrollY*(1-i.scrollFactorY),r*=i.scaleY);var s=i.tilemap.hexSideLength;return o+t*((r-s)/2+s)}},function(t,e){t.exports=function(t,e,n){var r=n.baseTileHeight,i=n.tilemapLayer,o=0;return i&&(void 0===e&&(e=i.scene.cameras.main),o=i.y+e.scrollY*(1-i.scrollFactorY),r*=i.scaleY),o+t*(r/2)}},function(t,e,n){var r=n(3);t.exports=function(t,e,n,i,o,s){i||(i=new r);var a=s.baseTileWidth,u=s.baseTileHeight,c=s.tilemapLayer;c&&(o||(o=c.scene.cameras.main),e-=c.y+o.scrollY*(1-c.scrollFactorY),u*=c.scaleY,t-=c.x+o.scrollX*(1-c.scrollFactorX),a*=c.scaleX);var h=s.hexSideLength,l=(u-h)/2+h,f=n?Math.floor(e/l):e/l,d=n?Math.floor((t-f%2*.5*a)/a):(t-f%2*.5*a)/a;return i.set(d,f)}},function(t,e,n){var r=n(3);t.exports=function(t,e,n,i,o,s){i||(i=new r);var a=s.baseTileWidth,u=s.baseTileHeight,c=s.tilemapLayer;c&&(o||(o=c.scene.cameras.main),e-=c.y+o.scrollY*(1-c.scrollFactorY),u*=c.scaleY,t-=c.x+o.scrollX*(1-c.scrollFactorX),a*=c.scaleX);var h=n?Math.floor((t/(a/2)+e/(u/2))/2):(t/(a/2)+e/(u/2))/2,l=n?Math.floor((e/(u/2)-t/(a/2))/2):(e/(u/2)-t/(a/2))/2;return i.set(h,l)}},function(t,e,n){var r=n(3);t.exports=function(t,e,n,i,o,s){i||(i=new r);var a=s.baseTileWidth,u=s.baseTileHeight,c=s.tilemapLayer;c&&(o||(o=c.scene.cameras.main),e-=c.y+o.scrollY*(1-c.scrollFactorY),u*=c.scaleY,t-=c.x+o.scrollX*(1-c.scrollFactorX),a*=c.scaleX);var h=n?Math.floor(e/(u/2)):e/(u/2),l=n?Math.floor((t+h%2*.5*a)/a):(t+h%2*.5*a)/a;return i.set(l,h)}},function(t,e,n){var r=n(255),i=n(256),o=n(3);t.exports=function(t,e,n,s,a,u){return void 0===n&&(n=!0),s||(s=new o(0,0)),s.x=r(t,n,a,u),s.y=i(e,n,a,u),s}},function(t,e){t.exports=function(t,e,n,r){var i=r.baseTileHeight,o=r.tilemapLayer;o&&(n||(n=o.scene.cameras.main),t-=o.y+n.scrollY*(1-o.scrollFactorY),i*=o.scaleY);var s=r.hexSideLength,a=(i-s)/2+s;return e?Math.floor(t/a):t/a}},function(t,e){t.exports=function(t,e,n,r){var i=r.baseTileHeight,o=r.tilemapLayer;return o&&(n||(n=o.scene.cameras.main),t-=o.y+n.scrollY*(1-o.scrollFactorY),i*=o.scaleY),e?Math.floor(t/(i/2)):t/(i/2)}},function(t,e,n){var r=n(119);t.exports=function(t,e,n){if(r(t,e,n)){var i=n.data[e][t];return null!==i&&i.index>-1}return!1}},function(t,e,n){var r=n(85),i=n(119),o=n(252);t.exports=function(t,e,n,s,a){if(void 0===n&&(n=!0),void 0===s&&(s=!0),!i(t,e,a))return null;var u=a.data[e][t];return u?(a.data[e][t]=n?null:new r(a,-1,t,e,a.tileWidth,a.tileHeight),s&&u&&u.collides&&o(t,e,a),u):null}},function(t,e,n){var r=n(40),i=n(259),o=n(565),s=n(566),a=n(577);t.exports=function(t,e,n,u,c,h){var l;switch(e){case r.ARRAY_2D:l=i(t,n,u,c,h);break;case r.CSV:l=o(t,n,u,c,h);break;case r.TILED_JSON:l=s(t,n,h);break;case r.WELTMEISTER:l=a(t,n,h);break;default:console.warn("Unrecognized tilemap data format: "+e),l=null}return l}},function(t,e,n){var r=n(40),i=n(259);t.exports=function(t,e,n,o,s){var a=e.trim().split("\n").map((function(t){return t.split(",")})),u=i(t,a,n,o,s);return u.format=r.CSV,u}},function(t,e,n){var r=n(567),i=n(568),o=n(29),s=n(40),a=n(258),u=n(121),c=n(569),h=n(570),l=n(573),f=n(575);t.exports=function(t,e,n){var d=new u({width:e.width,height:e.height,name:t,tileWidth:e.tilewidth,tileHeight:e.tileheight,orientation:a(e.orientation),format:s.TILED_JSON,version:e.version,properties:e.properties,renderOrder:e.renderorder,infinite:e.infinite});d.orientation===o.HEXAGONAL&&(d.hexSideLength=e.hexsidelength),d.layers=l(e,n),d.images=c(e);var p=f(e);return d.tilesets=p.tilesets,d.imageCollections=p.imageCollections,d.objects=h(e),d.tiles=i(d),r(d),d}},function(t,e,n){var r=n(17);t.exports=function(t){for(var e,n,i,o,s,a=0;a<t.layers.length;a++){e=t.layers[a],o=null;for(var u=0;u<e.data.length;u++){s=e.data[u];for(var c=0;c<s.length;c++)null===(n=s[c])||n.index<0||(i=t.tiles[n.index][2],o=t.tilesets[i],n.width=o.tileWidth,n.height=o.tileHeight,o.tileProperties&&o.tileProperties[n.index-o.firstgid]&&(n.properties=r(n.properties,o.tileProperties[n.index-o.firstgid])))}}}},function(t,e,n){var r=n(122);t.exports=function(t){var e,n,i=[];for(e=0;e<t.imageCollections.length;e++)for(var o=t.imageCollections[e],s=o.images,a=0;a<s.length;a++){var u=s[a];(n=new r(u.image,u.gid,o.imageWidth,o.imageHeight,0,0)).updateTileData(o.imageWidth,o.imageHeight),t.tilesets.push(n)}for(e=0;e<t.tilesets.length;e++)for(var c=(n=t.tilesets[e]).tileMargin,h=n.tileMargin,l=0,f=0,d=0,p=n.firstgid;p<n.firstgid+n.total&&(i[p]=[c,h,e],c+=n.tileWidth+n.tileSpacing,++l!==n.total)&&(++f!==n.columns||(c=n.tileMargin,h+=n.tileHeight+n.tileSpacing,f=0,++d!==n.rows));p++);return i}},function(t,e,n){var r=n(2),i=n(161);t.exports=function(t){for(var e=[],n=[],o=i(t);o.i<o.layers.length||n.length>0;)if(o.i>=o.layers.length){if(n.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}o=n.pop()}else{var s=o.layers[o.i];if(o.i++,"imagelayer"===s.type){var a=r(s,"offsetx",0)+r(s,"startx",0),u=r(s,"offsety",0)+r(s,"starty",0);e.push({name:o.name+s.name,image:s.image,x:o.x+a+s.x,y:o.y+u+s.y,alpha:o.opacity*s.opacity,visible:o.visible&&s.visible,properties:r(s,"properties",{})})}else if("group"===s.type){var c=i(t,s,o);n.push(o),o=c}}return e}},function(t,e,n){var r=n(2),i=n(260),o=n(572),s=n(161);t.exports=function(t){for(var e=[],n=[],a=s(t);a.i<a.layers.length||n.length>0;)if(a.i>=a.layers.length){if(n.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}a=n.pop()}else{var u=a.layers[a.i];if(a.i++,u.opacity*=a.opacity,u.visible=a.visible&&u.visible,"objectgroup"===u.type){u.name=a.name+u.name;for(var c=a.x+r(u,"startx",0)+r(u,"offsetx",0),h=a.y+r(u,"starty",0)+r(u,"offsety",0),l=[],f=0;f<u.objects.length;f++){var d=i(u.objects[f],c,h);l.push(d)}var p=new o(u);p.objects=l,e.push(p)}else if("group"===u.type){var v=s(t,u,a);n.push(a),a=v}}return e}},function(t,e,n){var r=n(126);t.exports=function(t,e){for(var n={},i=0;i<e.length;i++){var o=e[i];r(t,o)&&(n[o]=t[o])}return n}},function(t,e,n){var r=n(0),i=n(2),o=new r({initialize:function(t){void 0===t&&(t={}),this.name=i(t,"name","object layer"),this.opacity=i(t,"opacity",1),this.properties=i(t,"properties",{}),this.propertyTypes=i(t,"propertytypes",{}),this.type=i(t,"type","objectgroup"),this.visible=i(t,"visible",!0),this.objects=i(t,"objects",[])}});t.exports=o},function(t,e,n){var r=n(574),i=n(29),o=n(161),s=n(258),a=n(2),u=n(120),c=n(261),h=n(85);t.exports=function(t,e){for(var n=a(t,"infinite",!1),l=[],f=[],d=o(t);d.i<d.layers.length||f.length>0;)if(d.i>=d.layers.length){if(f.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}d=f.pop()}else{var p=d.layers[d.i];if(d.i++,"tilelayer"===p.type)if(p.compression)console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+p.name+"'");else{if(p.encoding&&"base64"===p.encoding){if(p.chunks)for(var v=0;v<p.chunks.length;v++)p.chunks[v].data=r(p.chunks[v].data);p.data&&(p.data=r(p.data)),delete p.encoding}var g,m,y,b,w=[],x=0;if(n){var _=a(p,"startx",0)+p.x,T=a(p,"starty",0)+p.y;(g=new u({name:d.name+p.name,x:d.x+a(p,"offsetx",0)+_*t.tilewidth,y:d.y+a(p,"offsety",0)+T*t.tileheight,width:p.width,height:p.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:d.opacity*p.opacity,visible:d.visible&&p.visible,properties:a(p,"properties",[]),orientation:s(t.orientation)})).orientation===i.HEXAGONAL&&(g.hexSideLength=t.hexsidelength);for(var E=0;E<p.height;E++){w.push([null]);for(var S=0;S<p.width;S++)w[E][S]=null}for(E=0,D=p.chunks.length;E<D;E++)for(var k=p.chunks[E],A=k.x-_,O=k.y-T,C=0,P=0,I=k.data.length;P<I;P++){var R=x+A,M=C+O;(m=c(k.data[P])).gid>0?((y=new h(g,m.gid,R,M,t.tilewidth,t.tileheight)).rotation=m.rotation,y.flipX=m.flipped,w[M][R]=y):(b=e?null:new h(g,-1,R,M,t.tilewidth,t.tileheight),w[M][R]=b),++x===k.width&&(C++,x=0)}}else{(g=new u({name:d.name+p.name,x:d.x+a(p,"offsetx",0)+p.x,y:d.y+a(p,"offsety",0)+p.y,width:p.width,height:p.height,tileWidth:t.tilewidth,tileHeight:t.tileheight,alpha:d.opacity*p.opacity,visible:d.visible&&p.visible,properties:a(p,"properties",[]),orientation:s(t.orientation)})).orientation===i.HEXAGONAL&&(g.hexSideLength=t.hexsidelength);for(var N=[],L=0,D=p.data.length;L<D;L++)(m=c(p.data[L])).gid>0?((y=new h(g,m.gid,x,w.length,t.tilewidth,t.tileheight)).rotation=m.rotation,y.flipX=m.flipped,N.push(y)):(b=e?null:new h(g,-1,x,w.length,t.tilewidth,t.tileheight),N.push(b)),++x===p.width&&(w.push(N),x=0,N=[])}g.data=w,l.push(g)}else if("group"===p.type){var F=o(t,p,d);f.push(d),d=F}}return l}},function(t,e){t.exports=function(t){for(var e=window.atob(t),n=e.length,r=new Array(n/4),i=0;i<n;i+=4)r[i/4]=(e.charCodeAt(i)|e.charCodeAt(i+1)<<8|e.charCodeAt(i+2)<<16|e.charCodeAt(i+3)<<24)>>>0;return r}},function(t,e,n){var r=n(122),i=n(576),o=n(260),s=n(1453);t.exports=function(t){for(var e,n=[],a=[],u=null,c=0;c<t.tilesets.length;c++){var h=t.tilesets[c];if(h.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(h.image){var l=new r(h.name,h.firstgid,h.tilewidth,h.tileheight,h.margin,h.spacing);if(t.version>1){var f=void 0,d=void 0;if(Array.isArray(h.tiles)){f=f||{},d=d||{};for(var p=0;p<h.tiles.length;p++){var v=h.tiles[p];if(v.properties){var g={};v.properties.forEach((function(t){g[t.name]=t.value})),d[v.id]=g}if(v.objectgroup&&((f[v.id]||(f[v.id]={})).objectgroup=v.objectgroup,v.objectgroup.objects)){var m=v.objectgroup.objects.map((function(t){return o(t)}));f[v.id].objectgroup.objects=m}v.animation&&((f[v.id]||(f[v.id]={})).animation=v.animation),v.type&&((f[v.id]||(f[v.id]={})).type=v.type)}}Array.isArray(h.wangsets)&&(f=f||{},d=d||{},s(h.wangsets,f)),f&&(l.tileData=f,l.tileProperties=d)}else if(h.tileproperties&&(l.tileProperties=h.tileproperties),h.tiles)for(e in l.tileData=h.tiles,l.tileData){var y=l.tileData[e].objectgroup;if(y&&y.objects){var b=y.objects.map((function(t){return o(t)}));l.tileData[e].objectgroup.objects=b}}l.updateTileData(h.imagewidth,h.imageheight),n.push(l)}else{var w=new i(h.name,h.firstgid,h.tilewidth,h.tileheight,h.margin,h.spacing,h.properties),x=0;for(p=0;p<h.tiles.length;p++){var _=(v=h.tiles[p]).image,T=parseInt(v.id,10),E=h.firstgid+T;w.addImage(E,_),x=Math.max(T,x)}w.maxId=x,a.push(w)}u&&(u.lastgid=h.firstgid-1),u=h}return{tilesets:n,imageCollections:a}}},function(t,e,n){var r=new(n(0))({initialize:function(t,e,n,r,i,o,s){(void 0===n||n<=0)&&(n=32),(void 0===r||r<=0)&&(r=32),void 0===i&&(i=0),void 0===o&&(o=0),this.name=t,this.firstgid=0|e,this.imageWidth=0|n,this.imageHeight=0|r,this.imageMargin=0|i,this.imageSpacing=0|o,this.properties=s||{},this.images=[],this.total=0},containsImageIndex:function(t){return t>=this.firstgid&&t<this.firstgid+this.total},addImage:function(t,e){return this.images.push({gid:t,image:e}),this.total++,this}});t.exports=r},function(t,e,n){var r=n(40),i=n(121),o=n(578),s=n(579);t.exports=function(t,e,n){if(0===e.layer.length)return console.warn("No layers found in the Weltmeister map: "+t),null;for(var a=0,u=0,c=0;c<e.layer.length;c++)e.layer[c].width>a&&(a=e.layer[c].width),e.layer[c].height>u&&(u=e.layer[c].height);var h=new i({width:a,height:u,name:t,tileWidth:e.layer[0].tilesize,tileHeight:e.layer[0].tilesize,format:r.WELTMEISTER});return h.layers=o(e,n),h.tilesets=s(e),h}},function(t,e,n){var r=n(120),i=n(85);t.exports=function(t,e){for(var n=[],o=0;o<t.layer.length;o++){for(var s=t.layer[o],a=new r({name:s.name,width:s.width,height:s.height,tileWidth:s.tilesize,tileHeight:s.tilesize,visible:1===s.visible}),u=[],c=[],h=0;h<s.data.length;h++){for(var l=0;l<s.data[h].length;l++){var f,d=s.data[h][l]-1;f=d>-1?new i(a,d,l,h,s.tilesize,s.tilesize):e?null:new i(a,-1,l,h,s.tilesize,s.tilesize),u.push(f)}c.push(u),u=[]}a.data=c,n.push(a)}return n}},function(t,e,n){var r=n(122);t.exports=function(t){for(var e=[],n=[],i=0;i<t.layer.length;i++){var o=t.layer[i],s=o.tilesetName;""!==s&&-1===n.indexOf(s)&&(n.push(s),e.push(new r(s,0,o.tilesize,o.tilesize,0,0)))}return e}},function(t,e,n){var r=n(0),i=n(36),o=n(40),s=n(2),a=n(120),u=n(29),c=n(362),h=n(74),l=n(73),f=n(85),d=n(251),p=n(581),v=n(122),g=new r({initialize:function(t,e){this.scene=t,this.tileWidth=e.tileWidth,this.tileHeight=e.tileHeight,this.width=e.width,this.height=e.height,this.orientation=e.orientation,this.renderOrder=e.renderOrder,this.format=e.format,this.version=e.version,this.properties=e.properties,this.widthInPixels=e.widthInPixels,this.heightInPixels=e.heightInPixels,this.imageCollections=e.imageCollections,this.images=e.images,this.layers=e.layers,this.tilesets=e.tilesets,this.objects=e.objects,this.currentLayerIndex=0,this.hexSideLength=e.hexSideLength;var n=this.orientation;this._convert={WorldToTileXY:d.GetWorldToTileXYFunction(n),WorldToTileX:d.GetWorldToTileXFunction(n),WorldToTileY:d.GetWorldToTileYFunction(n),TileToWorldXY:d.GetTileToWorldXYFunction(n),TileToWorldX:d.GetTileToWorldXFunction(n),TileToWorldY:d.GetTileToWorldYFunction(n)}},createBlankDynamicLayer:function(t,e,n,r,i,o,s,a){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(t,e,n,r,i,o,s,a)},createDynamicLayer:function(t,e,n,r){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(t,e,n,r)},createStaticLayer:function(t,e,n,r){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(t,e,n,r)},setRenderOrder:function(t){var e=["right-down","left-down","right-up","left-up"];return"number"===typeof t&&(t=e[t]),e.indexOf(t)>-1&&(this.renderOrder=t),this},addTilesetImage:function(t,e,n,r,i,s,a){if(void 0===t)return null;if(void 0!==e&&null!==e||(e=t),!this.scene.sys.textures.exists(e))return console.warn("Invalid Tileset Image: "+e),null;var u=this.scene.sys.textures.get(e),c=this.getTilesetIndex(t);if(null===c&&this.format===o.TILED_JSON)return console.warn("No data found for Tileset: "+t),null;var h=this.tilesets[c];return h?(h.setTileSize(n,r),h.setSpacing(i,s),h.setImage(u),h):(void 0===n&&(n=this.tileWidth),void 0===r&&(r=this.tileHeight),void 0===i&&(i=0),void 0===s&&(s=0),void 0===a&&(a=0),(h=new v(t,a,n,r,i,s)).setImage(u),this.tilesets.push(h),h)},copy:function(t,e,n,r,i,o,s,a){return null!==(a=this.getLayer(a))?(d.Copy(t,e,n,r,i,o,s,a),this):null},createBlankLayer:function(t,e,n,r,i,o,s,u){if(void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=this.width),void 0===o&&(o=this.height),void 0===s&&(s=this.tileWidth),void 0===u&&(u=this.tileHeight),null!==this.getLayerIndex(t))return console.warn("Invalid Tilemap Layer ID: "+t),null;for(var c,h=new a({name:t,tileWidth:s,tileHeight:u,width:i,height:o,orientation:this.orientation}),l=0;l<o;l++){c=[];for(var d=0;d<i;d++)c.push(new f(h,-1,d,l,s,u,this.tileWidth,this.tileHeight));h.data.push(c)}this.layers.push(h),this.currentLayerIndex=this.layers.length-1;var v=new p(this.scene,this,this.currentLayerIndex,e,n,r);return v.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(v),v},createLayer:function(t,e,n,r){var i=this.getLayerIndex(t);if(null===i)return console.warn("Invalid Tilemap Layer ID: "+t),"string"===typeof t&&console.warn("Valid tilelayer names:\n\t"+this.getTileLayerNames().join(",\n\t")),null;var o=this.layers[i];if(o.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+t),null;this.currentLayerIndex=i,void 0===n&&(n=o.x),void 0===r&&(r=o.y);var s=new p(this.scene,this,i,e,n,r);return s.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(s),s},createFromObjects:function(t,e){var n=[],r=this.getObjectLayer(t);if(!r)return console.warn("createFromObjects: Invalid objectLayerName given: "+t),n;Array.isArray(e)||(e=[e]);for(var o=r.objects,a=0;a<e.length;a++){for(var u,h=e[a],f=s(h,"id",null),d=s(h,"gid",null),p=s(h,"name",null),v=[],g=0;g<o.length;g++)u=o[g],(null===f&&null===d&&null===p||null!==f&&u.id===f||null!==d&&u.gid===d||null!==p&&u.name===p)&&v.push(u);for(var m=s(h,"classType",l),y=s(h,"scene",this.scene),b=s(h,"container",null),w=s(h,"key",null),x=s(h,"frame",null),_=0;_<v.length;_++){u=v[_];var T=new m(y);T.setName(u.name),T.setPosition(u.x,u.y),T.setTexture(w,x),u.width&&(T.displayWidth=u.width),u.height&&(T.displayHeight=u.height);var E={x:T.originX*u.width,y:(T.originY-1)*u.height};if(u.rotation){var S=i(u.rotation);c(E,S),T.rotation=S}if(T.x+=E.x,T.y+=E.y,void 0===u.flippedHorizontal&&void 0===u.flippedVertical||T.setFlip(u.flippedHorizontal,u.flippedVertical),u.visible||(T.visible=!1),Array.isArray(u.properties))u.properties.forEach((function(t){var e=t.name;void 0!==T[e]?T[e]=t.value:T.setData(e,t.value)}));else for(var k in u.properties)void 0!==T[k]?T[k]=u.properties[k]:T.setData(k,u.properties[k]);b?b.add(T):y.add.existing(T),n.push(T)}}return n},createFromTiles:function(t,e,n,r,i,o){return null===(o=this.getLayer(o))?null:d.CreateFromTiles(t,e,n,r,i,o)},fill:function(t,e,n,r,i,o,s){return void 0===o&&(o=!0),null===(s=this.getLayer(s))?null:(d.Fill(t,e,n,r,i,o,s),this)},filterObjects:function(t,e,n){if("string"===typeof t){var r=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+r),null}return t.objects.filter(e,n)},filterTiles:function(t,e,n,r,i,o,s,a){return null===(a=this.getLayer(a))?null:d.FilterTiles(t,e,n,r,i,o,s,a)},findByIndex:function(t,e,n,r){return null===(r=this.getLayer(r))?null:d.FindByIndex(t,e,n,r)},findObject:function(t,e,n){if("string"===typeof t){var r=t;if(!(t=this.getObjectLayer(t)))return console.warn("No object layer found with the name: "+r),null}return t.objects.find(e,n)||null},findTile:function(t,e,n,r,i,o,s,a){return null===(a=this.getLayer(a))?null:d.FindTile(t,e,n,r,i,o,s,a)},forEachTile:function(t,e,n,r,i,o,s,a){return null===(a=this.getLayer(a))?null:(d.ForEachTile(t,e,n,r,i,o,s,a),this)},getImageIndex:function(t){return this.getIndex(this.images,t)},getImageLayerNames:function(){return this.images&&Array.isArray(this.images)?this.images.map((function(t){return t.name})):[]},getIndex:function(t,e){for(var n=0;n<t.length;n++)if(t[n].name===e)return n;return null},getLayer:function(t){var e=this.getLayerIndex(t);return null!==e?this.layers[e]:null},getObjectLayer:function(t){var e=this.getIndex(this.objects,t);return null!==e?this.objects[e]:null},getObjectLayerNames:function(){return this.objects&&Array.isArray(this.objects)?this.objects.map((function(t){return t.name})):[]},getLayerIndex:function(t){return void 0===t?this.currentLayerIndex:"string"===typeof t?this.getLayerIndexByName(t):"number"===typeof t&&t<this.layers.length?t:t instanceof p?t.layerIndex:null},getLayerIndexByName:function(t){return this.getIndex(this.layers,t)},getTileAt:function(t,e,n,r){return null===(r=this.getLayer(r))?null:d.GetTileAt(t,e,n,r)},getTileAtWorldXY:function(t,e,n,r,i){return null===(i=this.getLayer(i))?null:d.GetTileAtWorldXY(t,e,n,r,i)},getTileLayerNames:function(){return this.layers&&Array.isArray(this.layers)?this.layers.map((function(t){return t.name})):[]},getTilesWithin:function(t,e,n,r,i,o){return null===(o=this.getLayer(o))?null:d.GetTilesWithin(t,e,n,r,i,o)},getTilesWithinShape:function(t,e,n,r){return null===(r=this.getLayer(r))?null:d.GetTilesWithinShape(t,e,n,r)},getTilesWithinWorldXY:function(t,e,n,r,i,o,s){return null===(s=this.getLayer(s))?null:d.GetTilesWithinWorldXY(t,e,n,r,i,o,s)},getTileset:function(t){var e=this.getIndex(this.tilesets,t);return null!==e?this.tilesets[e]:null},getTilesetIndex:function(t){return this.getIndex(this.tilesets,t)},hasTileAt:function(t,e,n){return null===(n=this.getLayer(n))?null:d.HasTileAt(t,e,n)},hasTileAtWorldXY:function(t,e,n,r){return null===(r=this.getLayer(r))?null:d.HasTileAtWorldXY(t,e,n,r)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(t){this.setLayer(t)}},putTileAt:function(t,e,n,r,i){return void 0===r&&(r=!0),null===(i=this.getLayer(i))?null:d.PutTileAt(t,e,n,r,i)},putTileAtWorldXY:function(t,e,n,r,i,o){return void 0===r&&(r=!0),null===(o=this.getLayer(o))?null:d.PutTileAtWorldXY(t,e,n,r,i,o)},putTilesAt:function(t,e,n,r,i){return void 0===r&&(r=!0),null===(i=this.getLayer(i))?null:(d.PutTilesAt(t,e,n,r,i),this)},randomize:function(t,e,n,r,i,o){return null===(o=this.getLayer(o))?null:(d.Randomize(t,e,n,r,i,o),this)},calculateFacesAt:function(t,e,n){return null===(n=this.getLayer(n))?null:(d.CalculateFacesAt(t,e,n),this)},calculateFacesWithin:function(t,e,n,r,i){return null===(i=this.getLayer(i))?null:(d.CalculateFacesWithin(t,e,n,r,i),this)},removeLayer:function(t){var e=this.getLayerIndex(t);if(null!==e){h(this.layers,e);for(var n=e;n<this.layers.length;n++)this.layers[n].tilemapLayer&&this.layers[n].tilemapLayer.layerIndex--;return this.currentLayerIndex===e&&(this.currentLayerIndex=0),this}return null},destroyLayer:function(t){var e=this.getLayerIndex(t);return null!==e?((t=this.layers[e]).destroy(),h(this.layers,e),this.currentLayerIndex===e&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var t=this.layers,e=0;e<t.length;e++)t[e].tilemapLayer&&t[e].tilemapLayer.destroy(!1);return t.length=0,this.currentLayerIndex=0,this},removeTile:function(t,e,n){void 0===e&&(e=-1),void 0===n&&(n=!0);var r=[];Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var o=t[i];r.push(this.removeTileAt(o.x,o.y,!0,n,o.tilemapLayer)),e>-1&&this.putTileAt(e,o.x,o.y,n,o.tilemapLayer)}return r},removeTileAt:function(t,e,n,r,i){return void 0===n&&(n=!0),void 0===r&&(r=!0),null===(i=this.getLayer(i))?null:d.RemoveTileAt(t,e,n,r,i)},removeTileAtWorldXY:function(t,e,n,r,i,o){return void 0===n&&(n=!0),void 0===r&&(r=!0),null===(o=this.getLayer(o))?null:d.RemoveTileAtWorldXY(t,e,n,r,i,o)},renderDebug:function(t,e,n){return null===(n=this.getLayer(n))?null:(this.orientation===u.ORTHOGONAL&&d.RenderDebug(t,e,n),this)},renderDebugFull:function(t,e){for(var n=this.layers,r=0;r<n.length;r++)d.RenderDebug(t,e,n[r]);return this},replaceByIndex:function(t,e,n,r,i,o,s){return null===(s=this.getLayer(s))?null:(d.ReplaceByIndex(t,e,n,r,i,o,s),this)},setCollision:function(t,e,n,r,i){return void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===i&&(i=!0),null===(r=this.getLayer(r))?null:(d.SetCollision(t,e,n,r,i),this)},setCollisionBetween:function(t,e,n,r,i){return void 0===n&&(n=!0),void 0===r&&(r=!0),null===(i=this.getLayer(i))?null:(d.SetCollisionBetween(t,e,n,r,i),this)},setCollisionByProperty:function(t,e,n,r){return void 0===e&&(e=!0),void 0===n&&(n=!0),null===(r=this.getLayer(r))?null:(d.SetCollisionByProperty(t,e,n,r),this)},setCollisionByExclusion:function(t,e,n,r){return void 0===e&&(e=!0),void 0===n&&(n=!0),null===(r=this.getLayer(r))?null:(d.SetCollisionByExclusion(t,e,n,r),this)},setCollisionFromCollisionGroup:function(t,e,n){return void 0===t&&(t=!0),void 0===e&&(e=!0),null===(n=this.getLayer(n))?null:(d.SetCollisionFromCollisionGroup(t,e,n),this)},setTileIndexCallback:function(t,e,n,r){return null===(r=this.getLayer(r))?null:(d.SetTileIndexCallback(t,e,n,r),this)},setTileLocationCallback:function(t,e,n,r,i,o,s){return null===(s=this.getLayer(s))?null:(d.SetTileLocationCallback(t,e,n,r,i,o,s),this)},setLayer:function(t){var e=this.getLayerIndex(t);return null!==e&&(this.currentLayerIndex=e),this},setBaseTileSize:function(t,e){this.tileWidth=t,this.tileHeight=e,this.widthInPixels=this.width*t,this.heightInPixels=this.height*e;for(var n=0;n<this.layers.length;n++){this.layers[n].baseTileWidth=t,this.layers[n].baseTileHeight=e;for(var r=this.layers[n].data,i=this.layers[n].width,o=this.layers[n].height,s=0;s<o;s++)for(var a=0;a<i;a++){var u=r[s][a];null!==u&&u.setSize(void 0,void 0,t,e)}}return this},setLayerTileSize:function(t,e,n){if(null===(n=this.getLayer(n)))return this;n.tileWidth=t,n.tileHeight=e;for(var r=n.data,i=n.width,o=n.height,s=0;s<o;s++)for(var a=0;a<i;a++){var u=r[s][a];null!==u&&u.setSize(t,e)}return this},shuffle:function(t,e,n,r,i){return null===(i=this.getLayer(i))?null:(d.Shuffle(t,e,n,r,i),this)},swapByIndex:function(t,e,n,r,i,o,s){return null===(s=this.getLayer(s))?null:(d.SwapByIndex(t,e,n,r,i,o,s),this)},tileToWorldX:function(t,e,n){return null===(n=this.getLayer(n))?null:this._convert.TileToWorldX(t,e,n)},tileToWorldY:function(t,e,n){return null===(n=this.getLayer(n))?null:this._convert.TileToWorldY(t,e,n)},tileToWorldXY:function(t,e,n,r,i){return null===(i=this.getLayer(i))?null:this._convert.TileToWorldXY(t,e,n,r,i)},weightedRandomize:function(t,e,n,r,i,o){return null===(o=this.getLayer(o))?null:(d.WeightedRandomize(e,n,r,i,t,o),this)},worldToTileX:function(t,e,n,r){return null===(r=this.getLayer(r))?null:this._convert.WorldToTileX(t,e,n,r)},worldToTileY:function(t,e,n,r){return null===(r=this.getLayer(r))?null:this._convert.WorldToTileY(t,e,n,r)},worldToTileXY:function(t,e,n,r,i,o){return null===(o=this.getLayer(o))?null:this._convert.WorldToTileXY(t,e,n,r,i,o)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});t.exports=g},function(t,e,n){var r=n(0),i=n(11),o=n(15),s=n(251),a=n(1456),u=new r({Extends:o,Mixins:[i.Alpha,i.BlendMode,i.ComputedSize,i.Depth,i.Flip,i.GetBounds,i.Origin,i.Pipeline,i.Transform,i.Visible,i.ScrollFactor,a],initialize:function(t,e,n,r,i,a){o.call(this,t,"TilemapLayer"),this.isTilemap=!0,this.tilemap=e,this.layerIndex=n,this.layer=e.layers[n],this.layer.tilemapLayer=this,this.tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=s.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(r),this.setAlpha(this.layer.alpha),this.setPosition(i,a),this.setOrigin(),this.setSize(e.tileWidth*this.layer.width,e.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(t){var e=[],n=[],r=this.tilemap;Array.isArray(t)||(t=[t]);for(var i=0;i<t.length;i++){var o=t[i];if("string"===typeof o&&(o=r.getTileset(o)),o){n.push(o);for(var s=o.firstgid,a=0;a<o.total;a++)e[s+a]=o}}this.gidMap=e,this.tileset=n},setRenderOrder:function(t){return"string"===typeof t&&(t=["right-down","left-down","right-up","left-up"].indexOf(t)),t>=0&&t<4&&(this._renderOrder=t),this},calculateFacesAt:function(t,e){return s.CalculateFacesAt(t,e,this.layer),this},calculateFacesWithin:function(t,e,n,r){return s.CalculateFacesWithin(t,e,n,r,this.layer),this},createFromTiles:function(t,e,n,r,i){return s.CreateFromTiles(t,e,n,r,i,this.layer)},cull:function(t){return this.cullCallback(this.layer,t,this.culledTiles,this._renderOrder)},copy:function(t,e,n,r,i,o,a){return s.Copy(t,e,n,r,i,o,a,this.layer),this},fill:function(t,e,n,r,i,o){return s.Fill(t,e,n,r,i,o,this.layer),this},filterTiles:function(t,e,n,r,i,o,a){return s.FilterTiles(t,e,n,r,i,o,a,this.layer)},findByIndex:function(t,e,n){return s.FindByIndex(t,e,n,this.layer)},findTile:function(t,e,n,r,i,o,a){return s.FindTile(t,e,n,r,i,o,a,this.layer)},forEachTile:function(t,e,n,r,i,o,a){return s.ForEachTile(t,e,n,r,i,o,a,this.layer),this},getTileAt:function(t,e,n){return s.GetTileAt(t,e,n,this.layer)},getTileAtWorldXY:function(t,e,n,r){return s.GetTileAtWorldXY(t,e,n,r,this.layer)},getTilesWithin:function(t,e,n,r,i){return s.GetTilesWithin(t,e,n,r,i,this.layer)},getTilesWithinShape:function(t,e,n){return s.GetTilesWithinShape(t,e,n,this.layer)},getTilesWithinWorldXY:function(t,e,n,r,i,o){return s.GetTilesWithinWorldXY(t,e,n,r,i,o,this.layer)},hasTileAt:function(t,e){return s.HasTileAt(t,e,this.layer)},hasTileAtWorldXY:function(t,e,n){return s.HasTileAtWorldXY(t,e,n,this.layer)},putTileAt:function(t,e,n,r){return s.PutTileAt(t,e,n,r,this.layer)},putTileAtWorldXY:function(t,e,n,r,i){return s.PutTileAtWorldXY(t,e,n,r,i,this.layer)},putTilesAt:function(t,e,n,r){return s.PutTilesAt(t,e,n,r,this.layer),this},randomize:function(t,e,n,r,i){return s.Randomize(t,e,n,r,i,this.layer),this},removeTileAt:function(t,e,n,r){return s.RemoveTileAt(t,e,n,r,this.layer)},removeTileAtWorldXY:function(t,e,n,r,i){return s.RemoveTileAtWorldXY(t,e,n,r,i,this.layer)},renderDebug:function(t,e){return s.RenderDebug(t,e,this.layer),this},replaceByIndex:function(t,e,n,r,i,o){return s.ReplaceByIndex(t,e,n,r,i,o,this.layer),this},setSkipCull:function(t){return void 0===t&&(t=!0),this.skipCull=t,this},setCullPadding:function(t,e){return void 0===t&&(t=1),void 0===e&&(e=1),this.cullPaddingX=t,this.cullPaddingY=e,this},setCollision:function(t,e,n,r){return s.SetCollision(t,e,n,this.layer,r),this},setCollisionBetween:function(t,e,n,r){return s.SetCollisionBetween(t,e,n,r,this.layer),this},setCollisionByProperty:function(t,e,n){return s.SetCollisionByProperty(t,e,n,this.layer),this},setCollisionByExclusion:function(t,e,n){return s.SetCollisionByExclusion(t,e,n,this.layer),this},setCollisionFromCollisionGroup:function(t,e){return s.SetCollisionFromCollisionGroup(t,e,this.layer),this},setTileIndexCallback:function(t,e,n){return s.SetTileIndexCallback(t,e,n,this.layer),this},setTileLocationCallback:function(t,e,n,r,i,o){return s.SetTileLocationCallback(t,e,n,r,i,o,this.layer),this},shuffle:function(t,e,n,r){return s.Shuffle(t,e,n,r,this.layer),this},swapByIndex:function(t,e,n,r,i,o){return s.SwapByIndex(t,e,n,r,i,o,this.layer),this},tileToWorldX:function(t,e){return this.tilemap.tileToWorldX(t,e,this)},tileToWorldY:function(t,e){return this.tilemap.tileToWorldY(t,e,this)},tileToWorldXY:function(t,e,n,r){return this.tilemap.tileToWorldXY(t,e,n,r,this)},weightedRandomize:function(t,e,n,r,i){return s.WeightedRandomize(e,n,r,i,t,this.layer),this},worldToTileX:function(t,e,n){return this.tilemap.worldToTileX(t,e,n,this)},worldToTileY:function(t,e,n){return this.tilemap.worldToTileY(t,e,n,this)},worldToTileXY:function(t,e,n,r,i){return this.tilemap.worldToTileXY(t,e,n,r,i,this)},destroy:function(t){void 0===t&&(t=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),t&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],o.prototype.destroy.call(this))}});t.exports=u},function(t,e,n){var r=n(0),i=n(2),o=new r({initialize:function(t){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.callback,this.callbackScope,this.args,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(t)},reset:function(t){return this.delay=i(t,"delay",0),this.repeat=i(t,"repeat",0),this.loop=i(t,"loop",!1),this.callback=i(t,"callback",void 0),this.callbackScope=i(t,"callbackScope",this.callback),this.args=i(t,"args",[]),this.timeScale=i(t,"timeScale",1),this.startAt=i(t,"startAt",0),this.paused=i(t,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=-1===this.repeat||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){if(this.repeat>0){var t=this.delay+this.delay*this.repeat;return(this.elapsed+this.delay*(this.repeat-this.repeatCount))/t}return this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return.001*this.elapsed},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return.001*this.getRemaining()},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return.001*this.getOverallRemaining()},remove:function(t){void 0===t&&(t=!1),this.elapsed=this.delay,this.hasDispatched=!t,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});t.exports=o},function(t,e,n){var r=n(1465);t.exports=function(t){var e,n=[];if(t.hasOwnProperty("props"))for(e in t.props)"_"!==e.substr(0,1)&&n.push({key:e,value:t.props[e]});else for(e in t)-1===r.indexOf(e)&&"_"!==e.substr(0,1)&&n.push({key:e,value:t[e]});return n}},function(t,e,n){var r=n(6);t.exports=function(t){var e=r(t,"tweens",null);return null===e?[]:("function"===typeof e&&(e=e.call()),Array.isArray(e)||(e=[e]),e)}},function(t,e,n){var r=n(265),i=n(13),o=n(99),s=n(80),a=n(162),u=n(6),c=n(264),h=n(266),l=n(268);t.exports=function(t,e,n){void 0===n&&(n=r);var f=u(e,"from",0),d=u(e,"to",1),p=[{value:f}],v=a(e,"delay",n.delay),g=a(e,"duration",n.duration),m=u(e,"easeParams",n.easeParams),y=s(u(e,"ease",n.ease),m),b=a(e,"hold",n.hold),w=a(e,"repeat",n.repeat),x=a(e,"repeatDelay",n.repeatDelay),_=o(e,"yoyo",n.yoyo),T=[],E=c("value",d),S=l(p[0],0,"value",E.getEnd,E.getStart,E.getActive,y,v,g,_,b,w,x,!1,!1);S.start=f,S.current=f,S.to=d,T.push(S);var k=new h(t,T,p);k.offset=i(e,"offset",null),k.completeDelay=i(e,"completeDelay",0),k.loop=Math.round(i(e,"loop",0)),k.loopDelay=Math.round(i(e,"loopDelay",0)),k.paused=o(e,"paused",!1),k.useFrames=o(e,"useFrames",!1);for(var A=u(e,"callbackScope",k),O=[k,null],C=h.TYPES,P=0;P<C.length;P++){var I=C[P],R=u(e,I,!1);if(R){var M=u(e,I+"Scope",A),N=u(e,I+"Params",[]);k.setCallback(I,R,O.concat(N),M)}}return k}},function(t,e,n){var r=n(80),i=n(6),o=n(14);t.exports=function(t,e){var n;void 0===e&&(e={});var s=i(e,"start",0),a=i(e,"ease",null),u=i(e,"grid",null),c=i(e,"from",0),h="first"===c,l="center"===c,f="last"===c,d="number"===typeof c,p=Array.isArray(t),v=p?parseFloat(t[0]):parseFloat(t),g=p?parseFloat(t[1]):0,m=Math.max(v,g);if(p&&(s+=v),u){var y=u[0],b=u[1],w=0,x=0,_=0,T=0,E=[];f?(w=y-1,x=b-1):d?(w=c%y,x=Math.floor(c/y)):l&&(w=(y-1)/2,x=(b-1)/2);for(var S=o.MIN_SAFE_INTEGER,k=0;k<b;k++){E[k]=[];for(var A=0;A<y;A++){_=w-A,T=x-k;var O=Math.sqrt(_*_+T*T);O>S&&(S=O),E[k][A]=O}}}var C=a?r(a):null;return n=u?function(t,e,n,r){var i,o=0,a=r%y,u=Math.floor(r/y);if(a>=0&&a<y&&u>=0&&u<b&&(o=E[u][a]),p){var c=g-v;i=C?o/S*c*C(o/S):o/S*c}else i=C?o*v*C(o/S):o*v;return i+s}:function(t,e,n,r,i){var o,a,u;return i--,h?o=r:l?o=Math.abs(i/2-r):f?o=i-r:d&&(o=Math.abs(c-r)),p?(u=l?(g-v)/i*(2*o):(g-v)/i*o,a=C?u*C(o/i):u):a=C?i*m*C(o/i):o*v,a+s},n}},function(t,e,n){var r=n(77),i=n(265),o=n(13),s=n(99),a=n(80),u=n(162),c=n(263),h=n(584),l=n(6),f=n(588),d=n(163);t.exports=function(t,e){var n=new f(t);n.completeDelay=o(e,"completeDelay",0),n.loop=Math.round(o(e,"loop",0)),n.loopDelay=Math.round(o(e,"loopDelay",0)),n.paused=s(e,"paused",!1),n.useFrames=s(e,"useFrames",!1);var p=l(e,"callbackScope",n),v=[n],g=l(e,"onStart",!1);if(g){var m=l(e,"onStartScope",p),y=l(e,"onStartParams",[]);n.setCallback("onStart",g,v.concat(y),m)}var b=l(e,"onUpdate",!1);if(b){var w=l(e,"onUpdateScope",p),x=l(e,"onUpdateParams",[]);n.setCallback("onUpdate",b,v.concat(x),w)}var _=l(e,"onLoop",!1);if(_){var T=l(e,"onLoopScope",p),E=l(e,"onLoopParams",[]);n.setCallback("onLoop",_,v.concat(E),T)}var S=l(e,"onYoyo",!1);if(S){var k=l(e,"onYoyoScope",p),A=l(e,"onYoyoParams",[]);n.setCallback("onYoyo",S,v.concat(null,A),k)}var O=l(e,"onComplete",!1);if(O){var C=l(e,"onCompleteScope",p),P=l(e,"onCompleteParams",[]);n.setCallback("onComplete",O,v.concat(P),C)}var I=h(e);if(0===I.length)return n.paused=!0,n;var R=r(i);R.targets=c(e);var M=o(e,"totalDuration",0);R.duration=M>0?Math.floor(M/I.length):u(e,"duration",R.duration),R.delay=u(e,"delay",R.delay),R.easeParams=l(e,"easeParams",R.easeParams),R.ease=a(l(e,"ease",R.ease),R.easeParams),R.hold=u(e,"hold",R.hold),R.repeat=u(e,"repeat",R.repeat),R.repeatDelay=u(e,"repeatDelay",R.repeatDelay),R.yoyo=s(e,"yoyo",R.yoyo),R.flipX=s(e,"flipX",R.flipX),R.flipY=s(e,"flipY",R.flipY);for(var N=0;N<I.length;N++)n.queue(d(n,I[N],R));return n}},function(t,e,n){var r=n(0),i=n(9),o=n(267),s=n(163),a=n(100),u=new r({Extends:i,initialize:function(t){i.call(this),this.manager=t,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=a.PENDING_ADD,this._pausedState=a.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null},this.callbackScope},dispatchTimelineEvent:function(t,e){this.emit(t,this),e&&e.func.apply(e.scope,e.params)},setTimeScale:function(t){return this.timeScale=t,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===a.ACTIVE},add:function(t){return this.queue(s(this,t))},queue:function(t){return this.isPlaying()||(t.parent=this,t.parentIsTimeline=!0,this.data.push(t),this.totalData=this.data.length),this},hasOffset:function(t){return null!==t.offset},isOffsetAbsolute:function(t){return"number"===typeof t},isOffsetRelative:function(t){if("string"===typeof t){var e=t[0];if("-"===e||"+"===e)return!0}return!1},getRelativeOffset:function(t,e){var n=t[0],r=parseFloat(t.substr(2)),i=e;switch(n){case"+":i+=r;break;case"-":i-=r}return Math.max(0,i)},calcDuration:function(){for(var t=0,e=0,n=0,r=0;r<this.totalData;r++){var i=this.data[r];i.init(),this.hasOffset(i)?this.isOffsetAbsolute(i.offset)?(i.calculatedOffset=i.offset,0===i.offset&&(n=0)):this.isOffsetRelative(i.offset)&&(i.calculatedOffset=this.getRelativeOffset(i.offset,t)):i.calculatedOffset=n,t=i.totalDuration+i.calculatedOffset,e+=i.totalDuration,n+=i.totalDuration}this.duration=e,this.loopCounter=-1===this.loop?999999999999:this.loop,this.loopCounter>0?this.totalDuration=this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.totalDuration=this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,!this.paused||(this.state=a.PAUSED,!1)},resetTweens:function(t){for(var e=0;e<this.totalData;e++)this.data[e].play(t)},setCallback:function(t,e,n,r){return-1!==u.TYPES.indexOf(t)&&(this.callbacks[t]={func:e,scope:r,params:n}),this},makeActive:function(t){return this.manager.makeActive(t)},play:function(){if(this.state!==a.ACTIVE){if(this.paused)return this.paused=!1,void this.manager.makeActive(this);this.resetTweens(!1),this.state=a.ACTIVE,this.dispatchTimelineEvent(o.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){this.loopCounter>0?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),this.loopDelay>0?(this.countdown=this.loopDelay,this.state=a.LOOP_DELAY):(this.state=a.ACTIVE,this.dispatchTimelineEvent(o.TIMELINE_LOOP,this.callbacks.onLoop))):this.completeDelay>0?(this.state=a.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=a.PENDING_REMOVE,this.dispatchTimelineEvent(o.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(t,e){if(this.state!==a.PAUSED){switch(this.useFrames&&(e=1*this.manager.timeScale),e*=this.timeScale,this.elapsed+=e,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=e,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case a.ACTIVE:for(var n=this.totalData,r=0;r<this.totalData;r++)this.data[r].update(t,e)&&n--;this.dispatchTimelineEvent(o.TIMELINE_UPDATE,this.callbacks.onUpdate),0===n&&this.nextState();break;case a.LOOP_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=a.ACTIVE,this.dispatchTimelineEvent(o.TIMELINE_LOOP,this.callbacks.onLoop));break;case a.COMPLETE_DELAY:this.countdown-=e,this.countdown<=0&&(this.state=a.PENDING_REMOVE,this.dispatchTimelineEvent(o.TIMELINE_COMPLETE,this.callbacks.onComplete))}return this.state===a.PENDING_REMOVE}},stop:function(){this.state=a.PENDING_REMOVE},pause:function(){if(this.state!==a.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=a.PAUSED,this.emit(o.TIMELINE_PAUSE,this),this},resume:function(){return this.state===a.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(o.TIMELINE_RESUME,this)),this},hasTarget:function(t){for(var e=0;e<this.data.length;e++)if(this.data[e].hasTarget(t))return!0;return!1},destroy:function(){for(var t=0;t<this.data.length;t++)this.data[t].stop()}});u.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],t.exports=u},function(t,e,n){var r=n(86),i=n(41),o=n(32),s=n(2),a=n(64),u={parseBody:function(t,e,n,r){void 0===r&&(r={});for(var a=s(n,"fixtures",[]),u=[],c=0;c<a.length;c++)for(var h=this.parseFixture(a[c]),l=0;l<h.length;l++)u.push(h[l]);var f=o.clone(n,!0);o.extend(f,r,!0),delete f.fixtures,delete f.type;var d=i.create(f);return i.setParts(d,u),i.setPosition(d,{x:t,y:e}),d},parseFixture:function(t){var e,n=o.extend({},!1,t);if(delete n.circle,delete n.vertices,t.circle){var i=s(t.circle,"x"),a=s(t.circle,"y"),u=s(t.circle,"radius");e=[r.circle(i,a,u,n)]}else t.vertices&&(e=this.parseVertices(t.vertices,n));return e},parseVertices:function(t,e){void 0===e&&(e={});for(var n=[],s=0;s<t.length;s++)a.clockwiseSort(t[s]),n.push(i.create(o.extend({position:a.centre(t[s]),vertices:t[s]},e)));return r.flagCoincidentParts(n)}};t.exports=u},function(t,e,n){var r=n(86),i=n(41),o={parseBody:function(t,e,n,o){var s;void 0===o&&(o={});var a=n.vertices;if(1===a.length)o.vertices=a[0],s=i.create(o),r.flagCoincidentParts(s.parts);else{for(var u=[],c=0;c<a.length;c++){var h=i.create({vertices:a[c]});u.push(h)}r.flagCoincidentParts(u),o.parts=u,s=i.create(o)}return s.label=n.label,i.setPosition(s,{x:t,y:e}),s}};t.exports=o},function(t,e,n){var r={};t.exports=r;var i=n(118),o=n(128),s=n(32),a=n(41),u=n(86);r.stack=function(t,e,n,r,o,s,u){for(var c,h=i.create({label:"Stack"}),l=t,f=e,d=0,p=0;p<r;p++){for(var v=0,g=0;g<n;g++){var m=u(l,f,g,p,c,d);if(m){var y=m.bounds.max.y-m.bounds.min.y,b=m.bounds.max.x-m.bounds.min.x;y>v&&(v=y),a.translate(m,{x:.5*b,y:.5*y}),l=m.bounds.max.x+o,i.addBody(h,m),c=m,d+=1}else l+=o}f+=v+s,l=t}return h},r.chain=function(t,e,n,r,a,u){for(var c=t.bodies,h=1;h<c.length;h++){var l=c[h-1],f=c[h],d=l.bounds.max.y-l.bounds.min.y,p=l.bounds.max.x-l.bounds.min.x,v=f.bounds.max.y-f.bounds.min.y,g={bodyA:l,pointA:{x:p*e,y:d*n},bodyB:f,pointB:{x:(f.bounds.max.x-f.bounds.min.x)*r,y:v*a}},m=s.extend(g,u);i.addConstraint(t,o.create(m))}return t.label+=" Chain",t},r.mesh=function(t,e,n,r,a){var u,c,h,l,f,d=t.bodies;for(u=0;u<n;u++){for(c=1;c<e;c++)h=d[c-1+u*e],l=d[c+u*e],i.addConstraint(t,o.create(s.extend({bodyA:h,bodyB:l},a)));if(u>0)for(c=0;c<e;c++)h=d[c+(u-1)*e],l=d[c+u*e],i.addConstraint(t,o.create(s.extend({bodyA:h,bodyB:l},a))),r&&c>0&&(f=d[c-1+(u-1)*e],i.addConstraint(t,o.create(s.extend({bodyA:f,bodyB:l},a)))),r&&c<e-1&&(f=d[c+1+(u-1)*e],i.addConstraint(t,o.create(s.extend({bodyA:f,bodyB:l},a))))}return t.label+=" Mesh",t},r.pyramid=function(t,e,n,i,o,s,u){return r.stack(t,e,n,i,o,s,(function(e,r,s,c,h,l){var f=Math.min(i,Math.ceil(n/2)),d=h?h.bounds.max.x-h.bounds.min.x:0;if(!(c>f)&&!(s<(c=f-c)||s>n-1-c))return 1===l&&a.translate(h,{x:(s+(n%2===1?1:-1))*d,y:0}),u(t+(h?s*d:0)+s*o,r,s,c,h,l)}))},r.newtonsCradle=function(t,e,n,r,s){for(var a=i.create({label:"Newtons Cradle"}),c=0;c<n;c++){var h=u.circle(t+c*(1.9*r),e+s,r,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),l=o.create({pointA:{x:t+c*(1.9*r),y:e},bodyB:h});i.addBody(a,h),i.addConstraint(a,l)}return a},r.car=function(t,e,n,r,s){var c=a.nextGroup(!0),h=.5*-n+20,l=.5*n-20,f=i.create({label:"Car"}),d=u.rectangle(t,e,n,r,{collisionFilter:{group:c},chamfer:{radius:.5*r},density:2e-4}),p=u.circle(t+h,e+0,s,{collisionFilter:{group:c},friction:.8}),v=u.circle(t+l,e+0,s,{collisionFilter:{group:c},friction:.8}),g=o.create({bodyB:d,pointB:{x:h,y:0},bodyA:p,stiffness:1,length:0}),m=o.create({bodyB:d,pointB:{x:l,y:0},bodyA:v,stiffness:1,length:0});return i.addBody(f,d),i.addBody(f,p),i.addBody(f,v),i.addConstraint(f,g),i.addConstraint(f,m),f},r.softBody=function(t,e,n,i,o,a,c,h,l,f){l=s.extend({inertia:1/0},l),f=s.extend({stiffness:.2,render:{type:"line",anchors:!1}},f);var d=r.stack(t,e,n,i,o,a,(function(t,e){return u.circle(t,e,h,l)}));return r.mesh(d,n,i,c,f),d.label="Soft Body",d}},function(t,e,n){var r={};t.exports=r,n(84);var i=n(32);r.pathToVertices=function(t,e){"undefined"===typeof window||"SVGPathSeg"in window||i.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var n,o,s,a,u,c,h,l,f,d,p,v=[],g=0,m=0,y=0;e=e||15;var b=function(t,e,n){var r=n%2===1&&n>1;if(!f||t!=f.x||e!=f.y){f&&r?(d=f.x,p=f.y):(d=0,p=0);var i={x:d+t,y:p+e};!r&&f||(f=i),v.push(i),m=d+t,y=p+e}},w=function(t){var e=t.pathSegTypeAsLetter.toUpperCase();if("Z"!==e){switch(e){case"M":case"L":case"T":case"C":case"S":case"Q":m=t.x,y=t.y;break;case"H":m=t.x;break;case"V":y=t.y}b(m,y,t.pathSegType)}};for(r._svgPathToAbsolute(t),s=t.getTotalLength(),c=[],n=0;n<t.pathSegList.numberOfItems;n+=1)c.push(t.pathSegList.getItem(n));for(h=c.concat();g<s;){if((u=c[t.getPathSegAtLength(g)])!=l){for(;h.length&&h[0]!=u;)w(h.shift());l=u}switch(u.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":a=t.getPointAtLength(g),b(a.x,a.y,0)}g+=e}for(n=0,o=h.length;n<o;++n)w(h[n]);return v},r._svgPathToAbsolute=function(t){for(var e,n,r,i,o,s,a=t.pathSegList,u=0,c=0,h=a.numberOfItems,l=0;l<h;++l){var f=a.getItem(l),d=f.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(d))"x"in f&&(u=f.x),"y"in f&&(c=f.y);else switch("x1"in f&&(r=u+f.x1),"x2"in f&&(o=u+f.x2),"y1"in f&&(i=c+f.y1),"y2"in f&&(s=c+f.y2),"x"in f&&(u+=f.x),"y"in f&&(c+=f.y),d){case"m":a.replaceItem(t.createSVGPathSegMovetoAbs(u,c),l);break;case"l":a.replaceItem(t.createSVGPathSegLinetoAbs(u,c),l);break;case"h":a.replaceItem(t.createSVGPathSegLinetoHorizontalAbs(u),l);break;case"v":a.replaceItem(t.createSVGPathSegLinetoVerticalAbs(c),l);break;case"c":a.replaceItem(t.createSVGPathSegCurvetoCubicAbs(u,c,r,i,o,s),l);break;case"s":a.replaceItem(t.createSVGPathSegCurvetoCubicSmoothAbs(u,c,o,s),l);break;case"q":a.replaceItem(t.createSVGPathSegCurvetoQuadraticAbs(u,c,r,i),l);break;case"t":a.replaceItem(t.createSVGPathSegCurvetoQuadraticSmoothAbs(u,c),l);break;case"a":a.replaceItem(t.createSVGPathSegArcAbs(u,c,f.r1,f.r2,f.angle,f.largeArcFlag,f.sweepFlag),l);break;case"z":case"Z":u=e,c=n}"M"!=d&&"m"!=d||(e=u,n=c)}}},function(t,e,n){var r=n(86),i=n(41),o=n(0),s=n(249),a=n(9),u=n(2),c=n(126),h=n(64),l=new o({Extends:a,Mixins:[s.Bounce,s.Collision,s.Friction,s.Gravity,s.Mass,s.Sensor,s.Sleep,s.Static],initialize:function(t,e,n){a.call(this),this.tile=e,this.world=t,e.physics.matterBody&&e.physics.matterBody.destroy(),e.physics.matterBody=this;var r=u(n,"body",null),i=u(n,"addToWorld",!0);if(r)this.setBody(r,i);else{var o=e.getCollisionGroup();u(o,"objects",[]).length>0?this.setFromTileCollision(n):this.setFromTileRectangle(n)}},setFromTileRectangle:function(t){void 0===t&&(t={}),c(t,"isStatic")||(t.isStatic=!0),c(t,"addToWorld")||(t.addToWorld=!0);var e=this.tile.getBounds(),n=e.x+e.width/2,i=e.y+e.height/2,o=r.rectangle(n,i,e.width,e.height,t);return this.setBody(o,t.addToWorld),this},setFromTileCollision:function(t){void 0===t&&(t={}),c(t,"isStatic")||(t.isStatic=!0),c(t,"addToWorld")||(t.addToWorld=!0);for(var e=this.tile.tilemapLayer.scaleX,n=this.tile.tilemapLayer.scaleY,o=this.tile.getLeft(),s=this.tile.getTop(),a=this.tile.getCollisionGroup(),l=u(a,"objects",[]),f=[],d=0;d<l.length;d++){var p=l[d],v=o+p.x*e,g=s+p.y*n,m=p.width*e,y=p.height*n,b=null;if(p.rectangle)b=r.rectangle(v+m/2,g+y/2,m,y,t);else if(p.ellipse)b=r.circle(v+m/2,g+y/2,m/2,t);else if(p.polygon||p.polyline){var w=(p.polygon?p.polygon:p.polyline).map((function(t){return{x:t.x*e,y:t.y*n}})),x=h.create(w),_=h.centre(x);v+=_.x,g+=_.y,b=r.fromVertices(v,g,x,t)}b&&f.push(b)}return 1===f.length?this.setBody(f[0],t.addToWorld):f.length>1&&(t.parts=f,this.setBody(i.create(t),t.addToWorld)),this},setBody:function(t,e){return void 0===e&&(e=!0),this.body&&this.removeBody(),this.body=t,this.body.gameObject=this,e&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});t.exports=l},function(t,e,n){var r=n(1399);r.Body=n(41),r.Composite=n(118),r.World=n(596),r.Detector=n(273),r.Grid=n(597),r.Pairs=n(598),r.Pair=n(250),r.Query=n(1400),r.Resolver=n(599),r.SAT=n(274),r.Constraint=n(128),r.Common=n(32),r.Engine=n(1401),r.Events=n(166),r.Sleeping=n(165),r.Plugin=n(595),r.Bodies=n(86),r.Composites=n(591),r.Axes=n(271),r.Bounds=n(84),r.Svg=n(592),r.Vector=n(83),r.Vertices=n(64),r.World.add=r.Composite.add,r.World.remove=r.Composite.remove,r.World.addComposite=r.Composite.addComposite,r.World.addBody=r.Composite.addBody,r.World.addConstraint=r.Composite.addConstraint,r.World.clear=r.Composite.clear,t.exports=r},function(t,e,n){var r={};t.exports=r;var i=n(32);r._registry={},r.register=function(t){if(r.isPlugin(t)||i.warn("Plugin.register:",r.toString(t),"does not implement all required fields."),t.name in r._registry){var e=r._registry[t.name],n=r.versionParse(t.version).number,o=r.versionParse(e.version).number;n>o?(i.warn("Plugin.register:",r.toString(e),"was upgraded to",r.toString(t)),r._registry[t.name]=t):n<o?i.warn("Plugin.register:",r.toString(e),"can not be downgraded to",r.toString(t)):t!==e&&i.warn("Plugin.register:",r.toString(t),"is already registered to different plugin object")}else r._registry[t.name]=t;return t},r.resolve=function(t){return r._registry[r.dependencyParse(t).name]},r.toString=function(t){return"string"===typeof t?t:(t.name||"anonymous")+"@"+(t.version||t.range||"0.0.0")},r.isPlugin=function(t){return t&&t.name&&t.version&&t.install},r.isUsed=function(t,e){return t.used.indexOf(e)>-1},r.isFor=function(t,e){var n=t.for&&r.dependencyParse(t.for);return!t.for||e.name===n.name&&r.versionSatisfies(e.version,n.range)},r.use=function(t,e){if(t.uses=(t.uses||[]).concat(e||[]),0!==t.uses.length){for(var n=r.dependencies(t),o=i.topologicalSort(n),s=[],a=0;a<o.length;a+=1)if(o[a]!==t.name){var u=r.resolve(o[a]);u?r.isUsed(t,u.name)||(r.isFor(u,t)||(i.warn("Plugin.use:",r.toString(u),"is for",u.for,"but installed on",r.toString(t)+"."),u._warned=!0),u.install?u.install(t):(i.warn("Plugin.use:",r.toString(u),"does not specify an install function."),u._warned=!0),u._warned?(s.push("\ud83d\udd36 "+r.toString(u)),delete u._warned):s.push("\u2705 "+r.toString(u)),t.used.push(u.name)):s.push("\u274c "+o[a])}s.length>0&&!u.silent&&i.info(s.join("  "))}else i.warn("Plugin.use:",r.toString(t),"does not specify any dependencies to install.")},r.dependencies=function(t,e){var n=r.dependencyParse(t),o=n.name;if(!(o in(e=e||{}))){t=r.resolve(t)||t,e[o]=i.map(t.uses||[],(function(e){r.isPlugin(e)&&r.register(e);var o=r.dependencyParse(e),s=r.resolve(e);return s&&!r.versionSatisfies(s.version,o.range)?(i.warn("Plugin.dependencies:",r.toString(s),"does not satisfy",r.toString(o),"used by",r.toString(n)+"."),s._warned=!0,t._warned=!0):s||(i.warn("Plugin.dependencies:",r.toString(e),"used by",r.toString(n),"could not be resolved."),t._warned=!0),o.name}));for(var s=0;s<e[o].length;s+=1)r.dependencies(e[o][s],e);return e}},r.dependencyParse=function(t){return i.isString(t)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(t)||i.warn("Plugin.dependencyParse:",t,"is not a valid dependency string."),{name:t.split("@")[0],range:t.split("@")[1]||"*"}):{name:t.name,range:t.range||t.version}},r.versionParse=function(t){/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/.test(t)||i.warn("Plugin.versionParse:",t,"is not a valid version or range.");var e=t.split("-");t=e[0];var n=isNaN(Number(t[0])),r=n?t.substr(1):t,o=i.map(r.split("."),(function(t){return Number(t)}));return{isRange:n,version:r,range:t,operator:n?t[0]:"",parts:o,prerelease:e[1],number:1e8*o[0]+1e4*o[1]+o[2]}},r.versionSatisfies=function(t,e){e=e||"*";var n=r.versionParse(e),i=n.parts,o=r.versionParse(t),s=o.parts;if(n.isRange){if("*"===n.operator||"*"===t)return!0;if("~"===n.operator)return s[0]===i[0]&&s[1]===i[1]&&s[2]>=i[2];if("^"===n.operator)return i[0]>0?s[0]===i[0]&&o.number>=n.number:i[1]>0?s[1]===i[1]&&s[2]>=i[2]:s[2]===i[2]}return t===e||"*"===t}},function(t,e,n){var r={};t.exports=r;var i=n(118),o=(n(128),n(32));r.create=function(t){var e=i.create(),n={label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}};return o.extend(e,n,t)}},function(t,e,n){var r={};t.exports=r;var i=n(250),o=n(273),s=n(32);r.create=function(t){var e={controller:r,detector:o.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return s.extend(e,t)},r.update=function(t,e,n,i){var o,s,a,u,c,h=n.world,l=t.buckets,f=!1,d=n.metrics;for(d.broadphaseTests=0,o=0;o<e.length;o++){var p=e[o];if((!p.isSleeping||i)&&!(p.bounds.max.x<h.bounds.min.x||p.bounds.min.x>h.bounds.max.x||p.bounds.max.y<h.bounds.min.y||p.bounds.min.y>h.bounds.max.y)){var v=r._getRegion(t,p);if(!p.region||v.id!==p.region.id||i){d.broadphaseTests+=1,p.region&&!i||(p.region=v);var g=r._regionUnion(v,p.region);for(s=g.startCol;s<=g.endCol;s++)for(a=g.startRow;a<=g.endRow;a++){u=l[c=r._getBucketId(s,a)];var m=s>=v.startCol&&s<=v.endCol&&a>=v.startRow&&a<=v.endRow,y=s>=p.region.startCol&&s<=p.region.endCol&&a>=p.region.startRow&&a<=p.region.endRow;!m&&y&&y&&u&&r._bucketRemoveBody(t,u,p),(p.region===v||m&&!y||i)&&(u||(u=r._createBucket(l,c)),r._bucketAddBody(t,u,p))}p.region=v,f=!0}}}f&&(t.pairsList=r._createActivePairsList(t))},r.clear=function(t){t.buckets={},t.pairs={},t.pairsList=[]},r._regionUnion=function(t,e){var n=Math.min(t.startCol,e.startCol),i=Math.max(t.endCol,e.endCol),o=Math.min(t.startRow,e.startRow),s=Math.max(t.endRow,e.endRow);return r._createRegion(n,i,o,s)},r._getRegion=function(t,e){var n=e.bounds,i=Math.floor(n.min.x/t.bucketWidth),o=Math.floor(n.max.x/t.bucketWidth),s=Math.floor(n.min.y/t.bucketHeight),a=Math.floor(n.max.y/t.bucketHeight);return r._createRegion(i,o,s,a)},r._createRegion=function(t,e,n,r){return{id:t+","+e+","+n+","+r,startCol:t,endCol:e,startRow:n,endRow:r}},r._getBucketId=function(t,e){return"C"+t+"R"+e},r._createBucket=function(t,e){return t[e]=[]},r._bucketAddBody=function(t,e,n){for(var r=0;r<e.length;r++){var o=e[r];if(!(n.id===o.id||n.isStatic&&o.isStatic)){var s=i.id(n,o),a=t.pairs[s];a?a[2]+=1:t.pairs[s]=[n,o,1]}}e.push(n)},r._bucketRemoveBody=function(t,e,n){e.splice(e.indexOf(n),1);for(var r=0;r<e.length;r++){var o=e[r],s=i.id(n,o),a=t.pairs[s];a&&(a[2]-=1)}},r._createActivePairsList=function(t){var e,n,r=[];e=s.keys(t.pairs);for(var i=0;i<e.length;i++)(n=t.pairs[e[i]])[2]>0?r.push(n):delete t.pairs[e[i]];return r}},function(t,e,n){var r={};t.exports=r;var i=n(250),o=n(32);r._pairMaxIdleLife=1e3,r.create=function(t){return o.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},t)},r.update=function(t,e,n){var r,o,s,a,u=t.list,c=t.table,h=t.collisionStart,l=t.collisionEnd,f=t.collisionActive;for(h.length=0,l.length=0,f.length=0,a=0;a<u.length;a++)u[a].confirmedActive=!1;for(a=0;a<e.length;a++)(r=e[a]).collided&&((s=c[o=i.id(r.bodyA,r.bodyB)])?(s.isActive?f.push(s):h.push(s),i.update(s,r,n),s.confirmedActive=!0):(s=i.create(r,n),c[o]=s,h.push(s),u.push(s)));for(a=0;a<u.length;a++)(s=u[a]).isActive&&!s.confirmedActive&&(i.setActive(s,!1,n),l.push(s))},r.removeOld=function(t,e){var n,i,o,s,a=t.list,u=t.table,c=[];for(s=0;s<a.length;s++)(i=(n=a[s]).collision).bodyA.isSleeping||i.bodyB.isSleeping?n.timeUpdated=e:e-n.timeUpdated>r._pairMaxIdleLife&&c.push(s);for(s=0;s<c.length;s++)delete u[(n=a[o=c[s]-s]).id],a.splice(o,1)},r.clear=function(t){return t.table={},t.list.length=0,t.collisionStart.length=0,t.collisionActive.length=0,t.collisionEnd.length=0,t}},function(t,e,n){var r={};t.exports=r;var i=n(64),o=n(83),s=n(32),a=n(84);r._restingThresh=4,r._restingThreshTangent=6,r._positionDampen=.9,r._positionWarming=.8,r._frictionNormalMultiplier=5,r.preSolvePosition=function(t){var e,n,r;for(e=0;e<t.length;e++)(n=t[e]).isActive&&(r=n.activeContacts.length,n.collision.parentA.totalContacts+=r,n.collision.parentB.totalContacts+=r)},r.solvePosition=function(t,e,n){var i,o,s,a,u,c,h,l,f,d,p,v,g,m,y,b,w=n*r._positionDampen;for(i=0;i<e.length;i++){var x=e[i];x.previousPositionImpulse.x=x.positionImpulse.x,x.previousPositionImpulse.y=x.positionImpulse.y}for(i=0;i<t.length;i++)(a=t[i]).isActive&&!a.isSensor&&(c=(u=a.collision).parentA,h=u.parentB,l=u.normal,p=c.previousPositionImpulse,v=h.previousPositionImpulse,d=u.penetration,m=v.x-p.x+d.x,y=v.y-p.y+d.y,f=(o=l.x)*m+(s=l.y)*y,a.separation=f,b=(f-a.slop)*w,(c.isStatic||h.isStatic)&&(b*=2),c.isStatic||c.isSleeping||(g=b/c.totalContacts,c.positionImpulse.x+=o*g,c.positionImpulse.y+=s*g),h.isStatic||h.isSleeping||(g=b/h.totalContacts,h.positionImpulse.x-=o*g,h.positionImpulse.y-=s*g))},r.postSolvePosition=function(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.totalContacts=0,0!==n.positionImpulse.x||0!==n.positionImpulse.y){for(var s=0;s<n.parts.length;s++){var u=n.parts[s];i.translate(u.vertices,n.positionImpulse),a.update(u.bounds,u.vertices,n.velocity),u.position.x+=n.positionImpulse.x,u.position.y+=n.positionImpulse.y}n.positionPrev.x+=n.positionImpulse.x,n.positionPrev.y+=n.positionImpulse.y,o.dot(n.positionImpulse,n.velocity)<0?(n.positionImpulse.x=0,n.positionImpulse.y=0):(n.positionImpulse.x*=r._positionWarming,n.positionImpulse.y*=r._positionWarming)}}},r.preSolveVelocity=function(t){var e,n,r,i,s,a,u,c,h,l,f,d,p,v,g=o._temp[0],m=o._temp[1];for(e=0;e<t.length;e++)if((r=t[e]).isActive&&!r.isSensor)for(i=r.activeContacts,a=(s=r.collision).parentA,u=s.parentB,c=s.normal,h=s.tangent,n=0;n<i.length;n++)f=(l=i[n]).vertex,d=l.normalImpulse,p=l.tangentImpulse,0===d&&0===p||(g.x=c.x*d+h.x*p,g.y=c.y*d+h.y*p,a.isStatic||a.isSleeping||(v=o.sub(f,a.position,m),a.positionPrev.x+=g.x*a.inverseMass,a.positionPrev.y+=g.y*a.inverseMass,a.anglePrev+=o.cross(v,g)*a.inverseInertia),u.isStatic||u.isSleeping||(v=o.sub(f,u.position,m),u.positionPrev.x-=g.x*u.inverseMass,u.positionPrev.y-=g.y*u.inverseMass,u.anglePrev-=o.cross(v,g)*u.inverseInertia))},r.solveVelocity=function(t,e){for(var n=e*e,i=o._temp[0],a=o._temp[1],u=o._temp[2],c=o._temp[3],h=o._temp[4],l=o._temp[5],f=0;f<t.length;f++){var d=t[f];if(d.isActive&&!d.isSensor){var p=d.collision,v=p.parentA,g=p.parentB,m=p.normal,y=p.tangent,b=d.activeContacts,w=1/b.length;v.velocity.x=v.position.x-v.positionPrev.x,v.velocity.y=v.position.y-v.positionPrev.y,g.velocity.x=g.position.x-g.positionPrev.x,g.velocity.y=g.position.y-g.positionPrev.y,v.angularVelocity=v.angle-v.anglePrev,g.angularVelocity=g.angle-g.anglePrev;for(var x=0;x<b.length;x++){var _=b[x],T=_.vertex,E=o.sub(T,v.position,a),S=o.sub(T,g.position,u),k=o.add(v.velocity,o.mult(o.perp(E),v.angularVelocity),c),A=o.add(g.velocity,o.mult(o.perp(S),g.angularVelocity),h),O=o.sub(k,A,l),C=o.dot(m,O),P=o.dot(y,O),I=Math.abs(P),R=s.sign(P),M=(1+d.restitution)*C,N=s.clamp(d.separation+C,0,1)*r._frictionNormalMultiplier,L=P,D=1/0;I>d.friction*d.frictionStatic*N*n&&(D=I,L=s.clamp(d.friction*R*n,-D,D));var F=o.cross(E,m),j=o.cross(S,m),B=w/(v.inverseMass+g.inverseMass+v.inverseInertia*F*F+g.inverseInertia*j*j);if(M*=B,L*=B,C<0&&C*C>r._restingThresh*n)_.normalImpulse=0;else{var U=_.normalImpulse;_.normalImpulse=Math.min(_.normalImpulse+M,0),M=_.normalImpulse-U}if(P*P>r._restingThreshTangent*n)_.tangentImpulse=0;else{var V=_.tangentImpulse;_.tangentImpulse=s.clamp(_.tangentImpulse+L,-D,D),L=_.tangentImpulse-V}i.x=m.x*M+y.x*L,i.y=m.y*M+y.y*L,v.isStatic||v.isSleeping||(v.positionPrev.x+=i.x*v.inverseMass,v.positionPrev.y+=i.y*v.inverseMass,v.anglePrev+=o.cross(E,i)*v.inverseInertia),g.isStatic||g.isSleeping||(g.positionPrev.x-=i.x*g.inverseMass,g.positionPrev.y-=i.y*g.inverseMass,g.anglePrev-=o.cross(S,i)*g.inverseInertia)}}}}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(276);t.exports=function(t,e,n,i){for(var o=t[0],s=1;s<t.length;s++){var a=t[s];r(a,o,e,n,i),o=a}return t}},function(t,e,n){var r=n(46);t.exports=function(t,e,n,i,o){return r(t,"angle",e,n,i,o)}},function(t,e){t.exports=function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];e.call(n,i)}return t}},function(t,e){t.exports=function(t,e,n){void 0===n&&(n=0);for(var r=n;r<t.length;r++){var i=t[r],o=!0;for(var s in e)i[s]!==e[s]&&(o=!1);if(o)return i}return null}},function(t,e){t.exports=function(t,e,n){void 0===n&&(n=0);for(var r=n;r<t.length;r++){var i=t[r],o=!0;for(var s in e)i[s]!==e[s]&&(o=!1);if(o)return i}return null}},function(t,e,n){var r=n(289),i=n(123),o=n(2),s=n(1),a=new(n(129))({sys:{queueDepthSort:s,events:{once:s}}},0,0,1,1);t.exports=function(t,e){void 0===e&&(e={});var n=e.hasOwnProperty("width"),s=e.hasOwnProperty("height"),u=o(e,"width",-1),c=o(e,"height",-1),h=o(e,"cellWidth",1),l=o(e,"cellHeight",h),f=o(e,"position",i.TOP_LEFT),d=o(e,"x",0),p=o(e,"y",0),v=0,g=0,m=u*h,y=c*l;a.setPosition(d,p),a.setSize(h,l);for(var b=0;b<t.length;b++)if(r(t[b],a,f),n&&-1===u)a.x+=h;else if(s&&-1===c)a.y+=l;else if(s&&!n){if(g+=l,a.y+=l,g===y&&(g=0,v+=h,a.y=p,a.x+=h,v===m))break}else if(v+=h,a.x+=h,v===m&&(v=0,g+=l,a.x=d,a.y+=l,g===y))break;return t}},function(t,e,n){var r=n(18),i={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(t,e,n,i){return void 0===t&&(t=1),void 0===e?this.alpha=t:(this._alphaTL=r(t,0,1),this._alphaTR=r(e,0,1),this._alphaBL=r(n,0,1),this._alphaBR=r(i,0,1)),this},alpha:{get:function(){return this._alpha},set:function(t){var e=r(t,0,1);this._alpha=e,this._alphaTL=e,this._alphaTR=e,this._alphaBL=e,this._alphaBR=e,0===e?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(t){var e=r(t,0,1);this._alphaTL=e,0!==e&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(t){var e=r(t,0,1);this._alphaTR=e,0!==e&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(t){var e=r(t,0,1);this._alphaBL=e,0!==e&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(t){var e=r(t,0,1);this._alphaBR=e,0!==e&&(this.renderFlags|=2)}}};t.exports=i},function(t,e){t.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}}},function(t,e){var n={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,n,r){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"===typeof t)this.frame.setCropUVs(this._crop,t,e,n,r,this.flipX,this.flipY);else{var i=t;this.frame.setCropUVs(this._crop,i.x,i.y,i.width,i.height,this.flipX,this.flipY)}this.isCropped=!0}return this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=n},function(t,e){t.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,e){return this.flipX=t,this.flipY=e,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},function(t,e,n){var r=n(10),i=n(308),o=n(3),s={prepareBoundsOutput:function(t,e){return void 0===e&&(e=!1),0!==this.rotation&&i(t,this.x,this.y,this.rotation),e&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(t.x,t.y,t),t},getCenter:function(t){return void 0===t&&(t=new o),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,t},getTopLeft:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopCenter:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getTopRight:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(t,e)},getLeftCenter:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getRightCenter:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(t,e)},getBottomLeft:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomCenter:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBottomRight:function(t,e){return t||(t=new o),t.x=this.x-this.displayWidth*this.originX+this.displayWidth,t.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(t,e)},getBounds:function(t){var e,n,i,o,s,a,u,c;if(void 0===t&&(t=new r),this.parentContainer){var h=this.parentContainer.getBoundsTransformMatrix();this.getTopLeft(t),h.transformPoint(t.x,t.y,t),e=t.x,n=t.y,this.getTopRight(t),h.transformPoint(t.x,t.y,t),i=t.x,o=t.y,this.getBottomLeft(t),h.transformPoint(t.x,t.y,t),s=t.x,a=t.y,this.getBottomRight(t),h.transformPoint(t.x,t.y,t),u=t.x,c=t.y}else this.getTopLeft(t),e=t.x,n=t.y,this.getTopRight(t),i=t.x,o=t.y,this.getBottomLeft(t),s=t.x,a=t.y,this.getBottomRight(t),u=t.x,c=t.y;return t.x=Math.min(e,i,s,u),t.y=Math.min(n,o,a,c),t.width=Math.max(e,i,s,u)-t.x,t.height=Math.max(n,o,a,c)-t.y,t}};t.exports=s},function(t,e){t.exports="blur"},function(t,e){t.exports="boot"},function(t,e){t.exports="contextlost"},function(t,e){t.exports="contextrestored"},function(t,e){t.exports="destroy"},function(t,e){t.exports="focus"},function(t,e){t.exports="hidden"},function(t,e){t.exports="pause"},function(t,e){t.exports="postrender"},function(t,e){t.exports="poststep"},function(t,e){t.exports="prerender"},function(t,e){t.exports="prestep"},function(t,e){t.exports="ready"},function(t,e){t.exports="resume"},function(t,e){t.exports="step"},function(t,e){t.exports="visible"},function(t,e){t.exports="postrender"},function(t,e){t.exports="prerender"},function(t,e){t.exports="render"},function(t,e){t.exports="resize"},function(t,e){var n={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(t){this._displayOriginX=t,this.originX=t/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(t){this._displayOriginY=t,this.originY=t/this.height}},setOrigin:function(t,e){return void 0===t&&(t=.5),void 0===e&&(e=t),this.originX=t,this.originY=e,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.displayOriginX=t,this.displayOriginY=e,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}};t.exports=n},function(t,e,n){var r=n(36),i=n(99),o=n(6),s=n(100),a=n(3),u={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:s.PLAYING_FORWARD,setPath:function(t,e){void 0===e&&(e=this.pathConfig);var n=this.pathTween;return n&&n.isPlaying()&&n.stop(),this.path=t,e&&this.startFollow(e),this},setRotateToPath:function(t,e){return void 0===e&&(e=0),this.rotateToPath=t,this.pathRotationOffset=e,this},isFollowing:function(){var t=this.pathTween;return t&&t.isPlaying()},startFollow:function(t,e){void 0===t&&(t={}),void 0===e&&(e=0);var n=this.pathTween;n&&n.isPlaying()&&n.stop(),"number"===typeof t&&(t={duration:t}),t.from=o(t,"from",0),t.to=o(t,"to",1);var u=i(t,"positionOnPath",!1);this.rotateToPath=i(t,"rotateToPath",!1),this.pathRotationOffset=o(t,"rotationOffset",0);var c=o(t,"startAt",e);if(c&&(t.onStart=function(t){var e=t.data[0];e.progress=c,e.elapsed=e.duration*c;var n=e.ease(e.progress);e.current=e.start+(e.end-e.start)*n,e.target[e.key]=e.current}),this.pathOffset||(this.pathOffset=new a(this.x,this.y)),this.pathVector||(this.pathVector=new a),this.pathDelta||(this.pathDelta=new a),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(t),this.path.getStartPoint(this.pathOffset),u&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=s.PLAYING_FORWARD,this.rotateToPath){var h=this.path.getPoint(.1);this.rotation=Math.atan2(h.y-this.y,h.x-this.x)+r(this.pathRotationOffset)}return this.pathConfig=t,this},pauseFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.pause(),this},resumeFollow:function(){var t=this.pathTween;return t&&t.isPaused()&&t.resume(),this},stopFollow:function(){var t=this.pathTween;return t&&t.isPlaying()&&t.stop(),this},pathUpdate:function(){var t=this.pathTween;if(t){var e=t.data[0],n=this.pathDelta,i=this.pathVector;if(n.copy(i).negate(),e.state===s.COMPLETE)return this.path.getPoint(1,i),n.add(i),i.add(this.pathOffset),void this.setPosition(i.x,i.y);if(e.state!==s.PLAYING_FORWARD&&e.state!==s.PLAYING_BACKWARD)return;this.path.getPoint(t.getValue(),i),n.add(i),i.add(this.pathOffset);var o=this.x,a=this.y;this.setPosition(i.x,i.y);var u=this.x-o,c=this.y-a;if(0===u&&0===c)return;if(e.state!==this._prevDirection)return void(this._prevDirection=e.state);this.rotateToPath&&(this.rotation=Math.atan2(c,u)+r(this.pathRotationOffset))}}};t.exports=u},function(t,e){var n={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(t){this.scaleX=t/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(t){this.scaleY=t/this.frame.realHeight}},setSizeToFrame:function(t){return void 0===t&&(t=this.frame),this.width=t.realWidth,this.height=t.realHeight,this},setSize:function(t,e){return this.width=t,this.height=e,this},setDisplaySize:function(t,e){return this.displayWidth=t,this.displayHeight=e,this}};t.exports=n},function(t,e){var n={texture:null,frame:null,isCropped:!1,setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t,e,n){return void 0===e&&(e=!0),void 0===n&&(n=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}};t.exports=n},function(t,e){var n={texture:null,frame:null,isCropped:!1,setCrop:function(t,e,n,r){if(void 0===t)this.isCropped=!1;else if(this.frame){if("number"===typeof t)this.frame.setCropUVs(this._crop,t,e,n,r,this.flipX,this.flipY);else{var i=t;this.frame.setCropUVs(this._crop,i.x,i.y,i.width,i.height,this.flipX,this.flipY)}this.isCropped=!0}return this},setTexture:function(t,e){return this.texture=this.scene.sys.textures.get(t),this.setFrame(e)},setFrame:function(t,e,n){return void 0===e&&(e=!0),void 0===n&&(n=!0),this.frame=this.texture.get(t),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&e&&this.setSizeToFrame(),this._originComponent&&n&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}};t.exports=n},function(t,e){var n={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(t,e,n,r){return void 0===t&&(t=16777215),void 0===e&&(e=t,n=t,r=t),this.tintTopLeft=t,this.tintTopRight=e,this.tintBottomLeft=n,this.tintBottomRight=r,this.tintFill=!1,this},setTintFill:function(t,e,n,r){return this.setTint(t,e,n,r),this.tintFill=!0,this},tint:{set:function(t){this.setTint(t,t,t,t)}},isTinted:{get:function(){var t=16777215;return this.tintFill||this.tintTopLeft!==t||this.tintTopRight!==t||this.tintBottomLeft!==t||this.tintBottomRight!==t}}};t.exports=n},function(t,e){t.exports="changedata"},function(t,e){t.exports="changedata-"},function(t,e){t.exports="destroy"},function(t,e){t.exports="removedata"},function(t,e){t.exports="setdata"},function(t,e){t.exports="addedtoscene"},function(t,e){t.exports="destroy"},function(t,e){t.exports="removedfromscene"},function(t,e){t.exports="complete"},function(t,e){t.exports="created"},function(t,e){t.exports="error"},function(t,e){t.exports="loop"},function(t,e){t.exports="play"},function(t,e){t.exports="seeked"},function(t,e){t.exports="seeking"},function(t,e){t.exports="stop"},function(t,e){t.exports="timeout"},function(t,e){t.exports="unlocked"},function(t,e){t.exports="addedtoscene"},function(t,e){t.exports="boot"},function(t,e){t.exports="create"},function(t,e){t.exports="destroy"},function(t,e){t.exports="pause"},function(t,e){t.exports="postupdate"},function(t,e){t.exports="prerender"},function(t,e){t.exports="preupdate"},function(t,e){t.exports="ready"},function(t,e){t.exports="removedfromscene"},function(t,e){t.exports="render"},function(t,e){t.exports="resume"},function(t,e){t.exports="shutdown"},function(t,e){t.exports="sleep"},function(t,e){t.exports="start"},function(t,e){t.exports="transitioncomplete"},function(t,e){t.exports="transitioninit"},function(t,e){t.exports="transitionout"},function(t,e){t.exports="transitionstart"},function(t,e){t.exports="transitionwake"},function(t,e){t.exports="update"},function(t,e){t.exports="wake"},function(t,e,n){var r=n(46);t.exports=function(t,e,n,i,o){return r(t,"alpha",e,n,i,o)}},function(t,e,n){var r=n(46);t.exports=function(t,e,n,i,o){return r(t,"x",e,n,i,o)}},function(t,e,n){var r=n(46);t.exports=function(t,e,n,i,o,s,a){return void 0!==n&&null!==n||(n=e),r(t,"x",e,i,s,a),r(t,"y",n,o,s,a)}},function(t,e,n){var r=n(46);t.exports=function(t,e,n,i,o){return r(t,"y",e,n,i,o)}},function(t,e){t.exports=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=6.28);for(var i=n,o=(r-n)/t.length,s=0;s<t.length;s++)t[s].x=e.x+e.radius*Math.cos(i),t[s].y=e.y+e.radius*Math.sin(i),i+=o;return t}},function(t,e){t.exports=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=6.28);for(var i=n,o=(r-n)/t.length,s=e.width/2,a=e.height/2,u=0;u<t.length;u++)t[u].x=e.x+s*Math.cos(i),t[u].y=e.y+a*Math.sin(i),i+=o;return t}},function(t,e,n){var r=n(172);t.exports=function(t,e){for(var n=r(e,t.length),i=0;i<t.length;i++){var o=t[i],s=n[i];o.x=s.x,o.y=s.y}return t}},function(t,e,n){var r=n(316),i=n(178),o=n(179);t.exports=function(t,e,n){void 0===n&&(n=0);var s=r(e,!1,t.length);n>0?i(s,n):n<0&&o(s,Math.abs(n));for(var a=0;a<t.length;a++)t[a].x=s[a].x,t[a].y=s[a].y;return t}},function(t,e,n){var r=n(317);t.exports=function(t,e,n){var i=r({x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2},n),o=r({x1:e.x2,y1:e.y2,x2:e.x3,y2:e.y3},n),s=r({x1:e.x3,y1:e.y3,x2:e.x1,y2:e.y1},n);i.pop(),o.pop(),s.pop();for(var a=(i=i.concat(o,s)).length/t.length,u=0,c=0;c<t.length;c++){var h=t[c],l=i[Math.floor(u)];h.x=l.x,h.y=l.y,u+=a}return t}},function(t,e){t.exports=function(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];i.anims&&i.anims.play(e,n)}return t}},function(t,e,n){var r=n(170);t.exports=function(t,e){for(var n=0;n<t.length;n++)r(e,t[n]);return t}},function(t,e,n){var r=n(180);t.exports=function(t,e){for(var n=0;n<t.length;n++)r(e,t[n]);return t}},function(t,e,n){var r=n(173);t.exports=function(t,e){for(var n=0;n<t.length;n++)r(e,t[n]);return t}},function(t,e,n){var r=n(174);t.exports=function(t,e){for(var n=0;n<t.length;n++)r(e,t[n]);return t}},function(t,e,n){var r=n(181);t.exports=function(t,e){for(var n=0;n<t.length;n++)r(e,t[n]);return t}},function(t,e,n){var r=n(46);t.exports=function(t,e,n,i,o){return r(t,"rotation",e,n,i,o)}},function(t,e,n){var r=n(182),i=n(50);t.exports=function(t,e,n){for(var o=e.x,s=e.y,a=0;a<t.length;a++){var u=t[a];r(u,o,s,n,Math.max(1,i(u.x,u.y,o,s)))}return t}},function(t,e,n){var r=n(182);t.exports=function(t,e,n,i){var o=e.x,s=e.y;if(0===i)return t;for(var a=0;a<t.length;a++)r(t[a],o,s,n,i);return t}},function(t,e,n){var r=n(46);t.exports=function(t,e,n,i,o){return r(t,"scaleX",e,n,i,o)}},function(t,e,n){var r=n(46);t.exports=function(t,e,n,i,o,s,a){return void 0!==n&&null!==n||(n=e),r(t,"scaleX",e,i,s,a),r(t,"scaleY",n,o,s,a)}},function(t,e,n){var r=n(46);t.exports=function(t,e,n,i,o){return r(t,"scaleY",e,n,i,o)}},function(t,e,n){var r=n(27);t.exports=function(t,e,n,i,o){return r(t,"alpha",e,n,i,o)}},function(t,e,n){var r=n(27);t.exports=function(t,e,n,i){return r(t,"blendMode",e,0,n,i)}},function(t,e,n){var r=n(27);t.exports=function(t,e,n,i,o){return r(t,"depth",e,n,i,o)}},function(t,e){t.exports=function(t,e,n){for(var r=0;r<t.length;r++)t[r].setInteractive(e,n);return t}},function(t,e,n){var r=n(27);t.exports=function(t,e,n,i,o,s,a){return void 0!==n&&null!==n||(n=e),r(t,"originX",e,i,s,a),r(t,"originY",n,o,s,a),t.forEach((function(t){t.updateDisplayOrigin()})),t}},function(t,e,n){var r=n(27);t.exports=function(t,e,n,i,o){return r(t,"rotation",e,n,i,o)}},function(t,e,n){var r=n(27);t.exports=function(t,e,n,i,o,s,a){return void 0!==n&&null!==n||(n=e),r(t,"scaleX",e,i,s,a),r(t,"scaleY",n,o,s,a)}},function(t,e,n){var r=n(27);t.exports=function(t,e,n,i,o){return r(t,"scaleX",e,n,i,o)}},function(t,e,n){var r=n(27);t.exports=function(t,e,n,i,o){return r(t,"scaleY",e,n,i,o)}},function(t,e,n){var r=n(27);t.exports=function(t,e,n,i,o,s,a){return void 0!==n&&null!==n||(n=e),r(t,"scrollFactorX",e,i,s,a),r(t,"scrollFactorY",n,o,s,a)}},function(t,e,n){var r=n(27);t.exports=function(t,e,n,i,o){return r(t,"scrollFactorX",e,n,i,o)}},function(t,e,n){var r=n(27);t.exports=function(t,e,n,i,o){return r(t,"scrollFactorY",e,n,i,o)}},function(t,e){t.exports=function(t,e,n,r,i){for(var o=0;o<t.length;o++)t[o].setTint(e,n,r,i);return t}},function(t,e,n){var r=n(27);t.exports=function(t,e,n,i){return r(t,"visible",e,0,n,i)}},function(t,e,n){var r=n(27);t.exports=function(t,e,n,i,o){return r(t,"x",e,n,i,o)}},function(t,e,n){var r=n(27);t.exports=function(t,e,n,i,o,s,a){return void 0!==n&&null!==n||(n=e),r(t,"x",e,i,s,a),r(t,"y",n,o,s,a)}},function(t,e,n){var r=n(27);t.exports=function(t,e,n,i,o){return r(t,"y",e,n,i,o)}},function(t,e,n){var r=n(3);t.exports=function(t,e,n,i,o){var s,a,u,c,h,l;if(void 0===i&&(i=0),void 0===o&&(o=new r),t.length>1)if(0===i){var f=t.length-1;for(s=t[f].x,a=t[f].y,u=f-1;u>=0;u--)c=(l=t[u]).x,h=l.y,l.x=s,l.y=a,s=c,a=h;t[f].x=e,t[f].y=n}else{for(s=t[0].x,a=t[0].y,u=1;u<t.length;u++)c=(l=t[u]).x,h=l.y,l.x=s,l.y=a,s=c,a=h;t[0].x=e,t[0].y=n}else s=t[0].x,a=t[0].y,t[0].x=e,t[0].y=n;return o.x=s,o.y=a,o}},function(t,e,n){var r=n(131);t.exports=function(t){return r(t)}},function(t,e,n){var r=n(183);t.exports=function(t,e,n,i,o){void 0===o&&(o=!1);var s,a=Math.abs(i-n)/t.length;if(o)for(s=0;s<t.length;s++)t[s][e]+=r(s*a,n,i);else for(s=0;s<t.length;s++)t[s][e]=r(s*a,n,i);return t}},function(t,e,n){var r=n(184);t.exports=function(t,e,n,i,o){void 0===o&&(o=!1);var s,a=Math.abs(i-n)/t.length;if(o)for(s=0;s<t.length;s++)t[s][e]+=r(s*a,n,i);else for(s=0;s<t.length;s++)t[s][e]=r(s*a,n,i);return t}},function(t,e){t.exports=function(t,e,n,r,i){void 0===i&&(i=!1);var o,s=Math.abs(r-n)/t.length;if(i)for(o=0;o<t.length;o++)t[o][e]+=o*s+n;else for(o=0;o<t.length;o++)t[o][e]=o*s+n;return t}},function(t,e){t.exports=function(t){for(var e=0;e<t.length;e++)t[e].visible=!t[e].visible;return t}},function(t,e,n){var r=n(68);t.exports=function(t,e,n){void 0===n&&(n=0);for(var i=0;i<t.length;i++){var o=t[i];o.x=r(o.x,e.left-n,e.right+n),o.y=r(o.y,e.top-n,e.bottom+n)}return t}},function(t,e,n){t.exports={Animation:n(185),AnimationFrame:n(319),AnimationManager:n(321),AnimationState:n(164),Events:n(132)}},function(t,e){t.exports="add"},function(t,e){t.exports="animationcomplete"},function(t,e){t.exports="animationcomplete-"},function(t,e){t.exports="animationrepeat"},function(t,e){t.exports="animationrestart"},function(t,e){t.exports="animationstart"},function(t,e){t.exports="animationstop"},function(t,e){t.exports="animationupdate"},function(t,e){t.exports="pauseall"},function(t,e){t.exports="remove"},function(t,e){t.exports="resumeall"},function(t,e,n){t.exports={BaseCache:n(323),CacheManager:n(325),Events:n(324)}},function(t,e){t.exports="add"},function(t,e){t.exports="remove"},function(t,e,n){t.exports={Controls:n(739),Scene2D:n(742)}},function(t,e,n){t.exports={FixedKeyControl:n(740),SmoothedKeyControl:n(741)}},function(t,e,n){var r=n(0),i=n(6),o=new r({initialize:function(t){this.camera=i(t,"camera",null),this.left=i(t,"left",null),this.right=i(t,"right",null),this.up=i(t,"up",null),this.down=i(t,"down",null),this.zoomIn=i(t,"zoomIn",null),this.zoomOut=i(t,"zoomOut",null),this.zoomSpeed=i(t,"zoomSpeed",.01),this.minZoom=i(t,"minZoom",.001),this.maxZoom=i(t,"maxZoom",1e3),this.speedX=0,this.speedY=0;var e=i(t,"speed",null);"number"===typeof e?(this.speedX=e,this.speedY=e):(this.speedX=i(t,"speed.x",0),this.speedY=i(t,"speed.y",0)),this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(t){return this.camera=t,this},update:function(t){if(this.active){void 0===t&&(t=1);var e=this.camera;this.up&&this.up.isDown?e.scrollY-=this.speedY*t|0:this.down&&this.down.isDown&&(e.scrollY+=this.speedY*t|0),this.left&&this.left.isDown?e.scrollX-=this.speedX*t|0:this.right&&this.right.isDown&&(e.scrollX+=this.speedX*t|0),this.zoomIn&&this.zoomIn.isDown?(e.zoom-=this.zoomSpeed,e.zoom<this.minZoom&&(e.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(e.zoom+=this.zoomSpeed,e.zoom>this.maxZoom&&(e.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=o},function(t,e,n){var r=n(0),i=n(6),o=new r({initialize:function(t){this.camera=i(t,"camera",null),this.left=i(t,"left",null),this.right=i(t,"right",null),this.up=i(t,"up",null),this.down=i(t,"down",null),this.zoomIn=i(t,"zoomIn",null),this.zoomOut=i(t,"zoomOut",null),this.zoomSpeed=i(t,"zoomSpeed",.01),this.minZoom=i(t,"minZoom",.001),this.maxZoom=i(t,"maxZoom",1e3),this.accelX=0,this.accelY=0;var e=i(t,"acceleration",null);"number"===typeof e?(this.accelX=e,this.accelY=e):(this.accelX=i(t,"acceleration.x",0),this.accelY=i(t,"acceleration.y",0)),this.dragX=0,this.dragY=0;var n=i(t,"drag",null);"number"===typeof n?(this.dragX=n,this.dragY=n):(this.dragX=i(t,"drag.x",0),this.dragY=i(t,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var r=i(t,"maxSpeed",null);"number"===typeof r?(this.maxSpeedX=r,this.maxSpeedY=r):(this.maxSpeedX=i(t,"maxSpeed.x",0),this.maxSpeedY=i(t,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(t){return this.camera=t,this},update:function(t){if(this.active){void 0===t&&(t=1);var e=this.camera;this._speedX>0?(this._speedX-=this.dragX*t,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*t,this._speedX>0&&(this._speedX=0)),this._speedY>0?(this._speedY-=this.dragY*t,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*t,this._speedY>0&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this.zoomIn&&this.zoomIn.isDown?this._zoom=-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this._zoom=this.zoomSpeed:this._zoom=0,0!==this._speedX&&(e.scrollX-=this._speedX*t|0),0!==this._speedY&&(e.scrollY-=this._speedY*t|0),0!==this._zoom&&(e.zoom+=this._zoom,e.zoom<this.minZoom?e.zoom=this.minZoom:e.zoom>this.maxZoom&&(e.zoom=this.maxZoom))}},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});t.exports=o},function(t,e,n){t.exports={Camera:n(326),BaseCamera:n(133),CameraManager:n(799),Effects:n(333),Events:n(37)}},function(t,e){t.exports="cameradestroy"},function(t,e){t.exports="camerafadeincomplete"},function(t,e){t.exports="camerafadeinstart"},function(t,e){t.exports="camerafadeoutcomplete"},function(t,e){t.exports="camerafadeoutstart"},function(t,e){t.exports="cameraflashcomplete"},function(t,e){t.exports="cameraflashstart"},function(t,e){t.exports="followupdate"},function(t,e){t.exports="camerapancomplete"},function(t,e){t.exports="camerapanstart"},function(t,e){t.exports="postrender"},function(t,e){t.exports="prerender"},function(t,e){t.exports="camerarotatecomplete"},function(t,e){t.exports="camerarotatestart"},function(t,e){t.exports="camerashakecomplete"},function(t,e){t.exports="camerashakestart"},function(t,e){t.exports="camerazoomcomplete"},function(t,e){t.exports="camerazoomstart"},function(t,e,n){var r=n(18),i=n(0),o=n(37),s=new i({initialize:function(t){this.camera=t,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,n,r,i,s,a,u){if(void 0===t&&(t=!0),void 0===e&&(e=1e3),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=0),void 0===s&&(s=!1),void 0===a&&(a=null),void 0===u&&(u=this.camera.scene),!s&&this.isRunning)return this.camera;this.isRunning=!0,this.isComplete=!1,this.duration=e,this.direction=t,this.progress=0,this.red=n,this.green=r,this.blue=i,this.alpha=t?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=a,this._onUpdateScope=u;var c=t?o.FADE_OUT_START:o.FADE_IN_START;return this.camera.emit(c,this.camera,this,e,n,r,i),this.camera},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=r(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(t){if(!this.isRunning&&!this.isComplete)return!1;var e=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(e.x,e.y,e.width,e.height),!0},postRenderWebGL:function(t,e){if(!this.isRunning&&!this.isComplete)return!1;var n=this.camera,r=this.red/255,i=this.green/255,o=this.blue/255;return t.drawFillRect(n.x,n.y,n.width,n.height,e(o,i,r,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0;var t=this.direction?o.FADE_OUT_COMPLETE:o.FADE_IN_COMPLETE;this.camera.emit(t,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=s},function(t,e,n){var r=n(18),i=n(0),o=n(37),s=new i({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,n,r,i,s,a){return void 0===t&&(t=250),void 0===e&&(e=255),void 0===n&&(n=255),void 0===r&&(r=255),void 0===i&&(i=!1),void 0===s&&(s=null),void 0===a&&(a=this.camera.scene),!i&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,this.red=e,this.green=n,this.blue=r,this.alpha=1,this._elapsed=0,this._onUpdate=s,this._onUpdateScope=a,this.camera.emit(o.FLASH_START,this.camera,this,t,e,n,r)),this.camera},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=r(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(t){if(!this.isRunning)return!1;var e=this.camera;return t.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",t.fillRect(e.x,e.y,e.width,e.height),!0},postRenderWebGL:function(t,e){if(!this.isRunning)return!1;var n=this.camera,r=this.red/255,i=this.green/255,o=this.blue/255;return t.drawFillRect(n.x,n.y,n.width,n.height,e(o,i,r,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=s},function(t,e,n){var r=n(18),i=n(0),o=n(134),s=n(37),a=n(3),u=new i({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=new a,this.current=new a,this.destination=new a,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,n,r,i,a,u){void 0===n&&(n=1e3),void 0===r&&(r=o.Linear),void 0===i&&(i=!1),void 0===a&&(a=null),void 0===u&&(u=this.camera.scene);var c=this.camera;return!i&&this.isRunning||(this.isRunning=!0,this.duration=n,this.progress=0,this.source.set(c.scrollX,c.scrollY),this.destination.set(t,e),c.getScroll(t,e,this.current),"string"===typeof r&&o.hasOwnProperty(r)?this.ease=o[r]:"function"===typeof r&&(this.ease=r),this._elapsed=0,this._onUpdate=a,this._onUpdateScope=u,this.camera.emit(s.PAN_START,this.camera,this,n,t,e)),c},update:function(t,e){if(this.isRunning){this._elapsed+=e;var n=r(this._elapsed/this.duration,0,1);this.progress=n;var i=this.camera;if(this._elapsed<this.duration){var o=this.ease(n);i.getScroll(this.destination.x,this.destination.y,this.current);var s=this.source.x+(this.current.x-this.source.x)*o,a=this.source.y+(this.current.y-this.source.y)*o;i.setScroll(s,a),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,i,n,s,a)}else i.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,i,n,i.scrollX,i.scrollY),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=u},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1.70158),t*t*((e+1)*t-e)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1.70158),--t*t*((e+1)*t+e)+1}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1.70158);var n=1.525*e;return(t*=2)<1?t*t*((n+1)*t-n)*.5:.5*((t-=2)*t*((n+1)*t+n)+2)}},function(t,e){t.exports=function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}},function(t,e){t.exports=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},function(t,e){t.exports=function(t){var e=!1;return t<.5?(t=1-2*t,e=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5}},function(t,e){t.exports=function(t){return 1-Math.sqrt(1-t*t)}},function(t,e){t.exports=function(t){return Math.sqrt(1- --t*t)}},function(t,e){t.exports=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},function(t,e){t.exports=function(t){return t*t*t}},function(t,e){t.exports=function(t){return--t*t*t+1}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},function(t,e){t.exports=function(t,e,n){if(void 0===e&&(e=.1),void 0===n&&(n=.1),0===t)return 0;if(1===t)return 1;var r=n/4;return e<1?e=1:r=n*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(t-=1))*Math.sin((t-r)*(2*Math.PI)/n)}},function(t,e){t.exports=function(t,e,n){if(void 0===e&&(e=.1),void 0===n&&(n=.1),0===t)return 0;if(1===t)return 1;var r=n/4;return e<1?e=1:r=n*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*t)*Math.sin((t-r)*(2*Math.PI)/n)+1}},function(t,e){t.exports=function(t,e,n){if(void 0===e&&(e=.1),void 0===n&&(n=.1),0===t)return 0;if(1===t)return 1;var r=n/4;return e<1?e=1:r=n*Math.asin(1/e)/(2*Math.PI),(t*=2)<1?e*Math.pow(2,10*(t-=1))*Math.sin((t-r)*(2*Math.PI)/n)*-.5:e*Math.pow(2,-10*(t-=1))*Math.sin((t-r)*(2*Math.PI)/n)*.5+1}},function(t,e){t.exports=function(t){return Math.pow(2,10*(t-1))-.001}},function(t,e){t.exports=function(t){return 1-Math.pow(2,-10*t)}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}},function(t,e){t.exports=function(t){return t}},function(t,e){t.exports=function(t){return t*t}},function(t,e){t.exports=function(t){return t*(2-t)}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},function(t,e){t.exports=function(t){return t*t*t*t}},function(t,e){t.exports=function(t){return 1- --t*t*t*t}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},function(t,e){t.exports=function(t){return t*t*t*t*t}},function(t,e){t.exports=function(t){return--t*t*t*t*t+1}},function(t,e){t.exports=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},function(t,e){t.exports=function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}},function(t,e){t.exports=function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}},function(t,e){t.exports=function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1),t<=0?0:t>=1?1:1/e*(1+(e*t|0))}},function(t,e,n){var r=n(18),i=n(0),o=n(37),s=n(3),a=new i({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.intensity=new s,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate,this._onUpdateScope},start:function(t,e,n,r,i){return void 0===t&&(t=100),void 0===e&&(e=.05),void 0===n&&(n=!1),void 0===r&&(r=null),void 0===i&&(i=this.camera.scene),!n&&this.isRunning||(this.isRunning=!0,this.duration=t,this.progress=0,"number"===typeof e?this.intensity.set(e):this.intensity.set(e.x,e.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=r,this._onUpdateScope=i,this.camera.emit(o.SHAKE_START,this.camera,this,t,e)),this.camera},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(t,e){if(this.isRunning)if(this._elapsed+=e,this.progress=r(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration){var n=this.intensity,i=this.camera.width,o=this.camera.height,s=this.camera.zoom;this._offsetX=(Math.random()*n.x*i*2-n.x*i)*s,this._offsetY=(Math.random()*n.y*o*2-n.y*o)*s,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))}else this.effectComplete()},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});t.exports=a},function(t,e,n){var r=n(18),i=n(0),o=n(37),s=n(134),a=new i({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope,this.clockwise=!0,this.shortestPath=!1},start:function(t,e,n,r,i,a,u){void 0===n&&(n=1e3),void 0===r&&(r=s.Linear),void 0===i&&(i=!1),void 0===a&&(a=null),void 0===u&&(u=this.camera.scene),void 0===e&&(e=!1),this.shortestPath=e;var c=t;t<0?(c=-1*t,this.clockwise=!1):this.clockwise=!0;var h=360*Math.PI/180;c-=Math.floor(c/h)*h;var l=this.camera;if(!i&&this.isRunning)return l;if(this.isRunning=!0,this.duration=n,this.progress=0,this.source=l.rotation,this.destination=c,"string"===typeof r&&s.hasOwnProperty(r)?this.ease=s[r]:"function"===typeof r&&(this.ease=r),this._elapsed=0,this._onUpdate=a,this._onUpdateScope=u,this.shortestPath){var f=0,d=0;(f=this.destination>this.source?Math.abs(this.destination-this.source):Math.abs(this.destination+h)-this.source)<(d=this.source>this.destination?Math.abs(this.source-this.destination):Math.abs(this.source+h)-this.destination)?this.clockwise=!0:f>d&&(this.clockwise=!1)}return this.camera.emit(o.ROTATE_START,this.camera,this,n,c),l},update:function(t,e){if(this.isRunning){this._elapsed+=e;var n=r(this._elapsed/this.duration,0,1);this.progress=n;var i=this.camera;if(this._elapsed<this.duration){var o=this.ease(n);this.current=i.rotation;var s=0,a=360*Math.PI/180,u=this.destination,c=this.current;!1===this.clockwise&&(u=this.current,c=this.destination),s=u>=c?Math.abs(u-c):Math.abs(u+a)-c;var h=0;h=this.clockwise?i.rotation+s*o:i.rotation-s*o,i.rotation=h,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,i,n,h)}else i.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,i,n,this.destination),this.effectComplete()}},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(o.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});t.exports=a},function(t,e,n){var r=n(18),i=n(0),o=n(134),s=n(37),a=new i({initialize:function(t){this.camera=t,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.ease,this.progress=0,this._elapsed=0,this._onUpdate,this._onUpdateScope},start:function(t,e,n,r,i,a){void 0===e&&(e=1e3),void 0===n&&(n=o.Linear),void 0===r&&(r=!1),void 0===i&&(i=null),void 0===a&&(a=this.camera.scene);var u=this.camera;return!r&&this.isRunning||(this.isRunning=!0,this.duration=e,this.progress=0,this.source=u.zoom,this.destination=t,"string"===typeof n&&o.hasOwnProperty(n)?this.ease=o[n]:"function"===typeof n&&(this.ease=n),this._elapsed=0,this._onUpdate=i,this._onUpdateScope=a,this.camera.emit(s.ZOOM_START,this.camera,this,e,t)),u},update:function(t,e){this.isRunning&&(this._elapsed+=e,this.progress=r(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});t.exports=a},function(t,e,n){var r=n(326),i=n(0),o=n(2),s=n(24),a=n(57),u=n(104),c=n(20),h=new i({initialize:function(t){this.scene=t,this.systems=t.sys,this.roundPixels=t.sys.game.config.roundPixels,this.cameras=[],this.main,this.default,t.sys.events.once(c.BOOT,this.boot,this),t.sys.events.on(c.START,this.start,this)},boot:function(){var t=this.systems;t.settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new r(0,0,t.scale.width,t.scale.height).setScene(this.scene),t.game.scale.on(u.RESIZE,this.onResize,this),this.systems.events.once(c.DESTROY,this.destroy,this)},start:function(){if(!this.main){var t=this.systems;t.settings.cameras?this.fromJSON(t.settings.cameras):this.add(),this.main=this.cameras[0]}var e=this.systems.events;e.on(c.UPDATE,this.update,this),e.once(c.SHUTDOWN,this.shutdown,this)},add:function(t,e,n,i,o,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=this.scene.sys.scale.width),void 0===i&&(i=this.scene.sys.scale.height),void 0===o&&(o=!1),void 0===s&&(s="");var a=new r(t,e,n,i);return a.setName(s),a.setScene(this.scene),a.setRoundPixels(this.roundPixels),a.id=this.getNextID(),this.cameras.push(a),o&&(this.main=a),a},addExisting:function(t,e){return void 0===e&&(e=!1),-1===this.cameras.indexOf(t)?(t.id=this.getNextID(),t.setRoundPixels(this.roundPixels),this.cameras.push(t),e&&(this.main=t),t):null},getNextID:function(){for(var t=this.cameras,e=1,n=0;n<32;n++){for(var r=!1,i=0;i<t.length;i++){var o=t[i];o&&o.id===e&&(r=!0)}if(!r)return e;e<<=1}return 0},getTotal:function(t){void 0===t&&(t=!1);for(var e=0,n=this.cameras,r=0;r<n.length;r++){var i=n[r];(!t||t&&i.visible)&&e++}return e},fromJSON:function(t){Array.isArray(t)||(t=[t]);for(var e=this.scene.sys.scale.width,n=this.scene.sys.scale.height,r=0;r<t.length;r++){var i=t[r],s=o(i,"x",0),a=o(i,"y",0),u=o(i,"width",e),c=o(i,"height",n),h=this.add(s,a,u,c);h.name=o(i,"name",""),h.zoom=o(i,"zoom",1),h.rotation=o(i,"rotation",0),h.scrollX=o(i,"scrollX",0),h.scrollY=o(i,"scrollY",0),h.roundPixels=o(i,"roundPixels",!1),h.visible=o(i,"visible",!0);var l=o(i,"backgroundColor",!1);l&&h.setBackgroundColor(l);var f=o(i,"bounds",null);if(f){var d=o(f,"x",0),p=o(f,"y",0),v=o(f,"width",e),g=o(f,"height",n);h.setBounds(d,p,v,g)}}return this},getCamera:function(t){for(var e=this.cameras,n=0;n<e.length;n++)if(e[n].name===t)return e[n];return null},getCamerasBelowPointer:function(t){for(var e=this.cameras,n=t.x,r=t.y,i=[],o=0;o<e.length;o++){var s=e[o];s.visible&&s.inputEnabled&&a(s,n,r)&&i.unshift(s)}return i},remove:function(t,e){void 0===e&&(e=!0),Array.isArray(t)||(t=[t]);for(var n=0,r=this.cameras,i=0;i<t.length;i++){var o=r.indexOf(t[i]);-1!==o&&(e?r[o].destroy():r[o].renderList=[],r.splice(o,1),n++)}return!this.main&&r[0]&&(this.main=r[0]),n},render:function(t,e){for(var n=this.scene,r=this.cameras,i=0;i<this.cameras.length;i++){var o=r[i];if(o.visible&&o.alpha>0){o.preRender();var s=this.getVisibleChildren(e.getChildren(),o);t.render(n,s,o)}}},getVisibleChildren:function(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r];i.willRender(e)&&n.push(i)}return n},resetAll:function(){for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(t,e){for(var n=0;n<this.cameras.length;n++)this.cameras[n].update(t,e)},onResize:function(t,e,n,r,i){for(var o=0;o<this.cameras.length;o++){var s=this.cameras[o];0===s._x&&0===s._y&&s._width===r&&s._height===i&&s.setSize(e.width,e.height)}},resize:function(t,e){for(var n=0;n<this.cameras.length;n++)this.cameras[n].setSize(t,e)},shutdown:function(){this.main=void 0;for(var t=0;t<this.cameras.length;t++)this.cameras[t].destroy();this.cameras=[];var e=this.systems.events;e.off(c.UPDATE,this.update,this),e.off(c.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(c.START,this.start,this),this.scene=null,this.systems=null}});s.register("CameraManager",h,"cameras"),t.exports=h},function(t,e){t.exports="enterfullscreen"},function(t,e){t.exports="fullscreenfailed"},function(t,e){t.exports="fullscreenunsupported"},function(t,e){t.exports="leavefullscreen"},function(t,e){t.exports="orientationchange"},function(t,e){t.exports="resize"},function(t,e,n){t.exports={Config:n(346),CreateRenderer:n(366),DebugHeader:n(384),Events:n(22),TimeStep:n(385),VisibilityHandler:n(387)}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"===typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],h=!1,l=-1;function f(){h&&u&&(h=!1,u.length?c=u.concat(c):l=-1,c.length&&d())}function d(){if(!h){var t=a(f);h=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,h=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||h||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){var r=n(136),i={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};t.exports=("function"===typeof importScripts||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&navigator.maxTouchPoints>=1)&&(i.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(i.mspointer=!0),navigator.getGamepads&&(i.gamepads=!0),"onwheel"in window||r.ie&&"WheelEvent"in window?i.wheelEvent="wheel":"onmousewheel"in window?i.wheelEvent="mousewheel":r.firefox&&"MouseScrollEvent"in window&&(i.wheelEvent="DOMMouseScroll")),i)},function(t,e,n){var r=n(136),i={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};t.exports=function(){if("function"===typeof importScripts)return i;i.audioData=!!window.Audio,i.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var t=document.createElement("audio"),e=!!t.canPlayType;try{if(e&&(t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(i.ogg=!0),(t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||t.canPlayType("audio/opus;").replace(/^no$/,""))&&(i.opus=!0),t.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(i.mp3=!0),t.canPlayType("audio/wav").replace(/^no$/,"")&&(i.wav=!0),(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;").replace(/^no$/,""))&&(i.m4a=!0),t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(i.webm=!0),""!==t.canPlayType('audio/mp4;codecs="ec-3"')))if(r.edge)i.dolby=!0;else if(r.safari&&r.safariVersion>=9&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)){var n=parseInt(RegExp.$1,10),o=parseInt(RegExp.$2,10);(10===n&&o>=11||n>10)&&(i.dolby=!0)}}catch(s){}return i}()},function(t,e){var n={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};t.exports=function(){if("function"===typeof importScripts)return n;var t=document.createElement("video"),e=!!t.canPlayType;try{e&&(t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(n.ogg=!0),t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(n.h264=!0,n.mp4=!0),t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(n.webm=!0),t.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(n.vp9=!0),t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(n.hls=!0))}catch(r){}return n}()},function(t,e){var n={available:!1,cancel:"",keyboard:!1,request:""};t.exports=function(){if("function"===typeof importScripts)return n;var t,e="Fullscreen",r="FullScreen",i=["request"+e,"request"+r,"webkitRequest"+e,"webkitRequest"+r,"msRequest"+e,"msRequest"+r,"mozRequest"+r,"mozRequest"+e];for(t=0;t<i.length;t++)if(document.documentElement[i[t]]){n.available=!0,n.request=i[t];break}var o=["cancel"+r,"exit"+e,"webkitCancel"+r,"webkitExit"+e,"msCancel"+r,"msExit"+e,"mozCancel"+r,"mozExit"+e];if(n.available)for(t=0;t<o.length;t++)if(document[o[t]]){n.cancel=o[t];break}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(n.keyboard=!0),Object.defineProperty(n,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),n}()},function(t,e,n){t.exports={Between:n(349),BetweenPoints:n(350),BetweenPointsY:n(813),BetweenY:n(814),CounterClockwise:n(815),Normalize:n(351),Random:n(816),RandomDegrees:n(817),Reverse:n(818),RotateTo:n(819),ShortestBetween:n(820),Wrap:n(269),WrapDegrees:n(270)}},function(t,e){t.exports=function(t,e){return Math.atan2(e.x-t.x,e.y-t.y)}},function(t,e){t.exports=function(t,e,n,r){return Math.atan2(n-t,r-e)}},function(t,e,n){var r=n(14);t.exports=function(t){return t>Math.PI&&(t-=r.PI2),Math.abs(((t+r.TAU)%r.PI2-r.PI2)%r.PI2)}},function(t,e,n){var r=n(137);t.exports=function(){return r(-Math.PI,Math.PI)}},function(t,e,n){var r=n(137);t.exports=function(){return r(-180,180)}},function(t,e,n){var r=n(351);t.exports=function(t){return r(t+Math.PI)}},function(t,e,n){var r=n(14);t.exports=function(t,e,n){return void 0===n&&(n=.05),t===e||(Math.abs(e-t)<=n||Math.abs(e-t)>=r.PI2-n?t=e:(Math.abs(e-t)>Math.PI&&(e<t?e+=r.PI2:e-=r.PI2),e>t?t+=n:e<t&&(t-=n))),t}},function(t,e){t.exports=function(t,e){var n=e-t;return 0===n?0:n-360*Math.floor((n- -180)/360)}},function(t,e,n){t.exports={Between:n(50),BetweenPoints:n(352),BetweenPointsSquared:n(822),Chebyshev:n(823),Power:n(824),Snake:n(825),Squared:n(353)}},function(t,e){t.exports=function(t,e){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}},function(t,e){t.exports=function(t,e,n,r){return Math.max(Math.abs(t-n),Math.abs(e-r))}},function(t,e){t.exports=function(t,e,n,r,i){return void 0===i&&(i=2),Math.sqrt(Math.pow(n-t,i)+Math.pow(r-e,i))}},function(t,e){t.exports=function(t,e,n,r){return Math.abs(t-n)+Math.abs(e-r)}},function(t,e,n){t.exports={Back:n(334),Bounce:n(335),Circular:n(336),Cubic:n(337),Elastic:n(338),Expo:n(339),Linear:n(340),Quadratic:n(341),Quartic:n(342),Quintic:n(343),Sine:n(344),Stepped:n(345)}},function(t,e,n){t.exports={Ceil:n(828),Equal:n(124),Floor:n(829),GreaterThan:n(354),LessThan:n(355)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.ceil(t-e)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1e-4),Math.floor(t+e)}},function(t,e,n){t.exports={Bezier:n(831),CatmullRom:n(832),CubicBezier:n(358),Linear:n(833),QuadraticBezier:n(359),SmoothStep:n(360),SmootherStep:n(834)}},function(t,e,n){var r=n(356);t.exports=function(t,e){for(var n=0,i=t.length-1,o=0;o<=i;o++)n+=Math.pow(1-e,i-o)*Math.pow(e,o)*t[o]*r(i,o);return n}},function(t,e,n){var r=n(194);t.exports=function(t,e){var n=t.length-1,i=n*e,o=Math.floor(i);return t[0]===t[n]?(e<0&&(o=Math.floor(i=n*(1+e))),r(i-o,t[(o-1+n)%n],t[o],t[(o+1)%n],t[(o+2)%n])):e<0?t[0]-(r(-i,t[0],t[0],t[1],t[1])-t[0]):e>1?t[n]-(r(i-n,t[n],t[n],t[n-1],t[n-1])-t[n]):r(i-o,t[o?o-1:0],t[o],t[n<o+1?n:o+1],t[n<o+2?n:o+2])}},function(t,e,n){var r=n(135);t.exports=function(t,e){var n=t.length-1,i=n*e,o=Math.floor(i);return e<0?r(t[0],t[1],i):e>1?r(t[n],t[n-1],n-i):r(t[o],t[o+1>n?n:o+1],i-o)}},function(t,e,n){var r=n(183);t.exports=function(t,e,n){return e+(n-e)*r(t,0,1)}},function(t,e,n){t.exports={GetNext:n(361),IsSize:n(138),IsValue:n(836)}},function(t,e){t.exports=function(t){return t>0&&0===(t&t-1)}},function(t,e,n){t.exports={Ceil:n(139),Floor:n(76),To:n(838)}},function(t,e){t.exports=function(t,e,n,r){return void 0===n&&(n=0),0===e?t:(t-=n,t=e*Math.round(t/e),r?(n+t)/e:n+t)}},function(t,e,n){var r=new(n(0))({initialize:function(t){void 0===t&&(t=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],t&&this.init(t)},rnd:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},hash:function(t){var e,n=this.n;t=t.toString();for(var r=0;r<t.length;r++)e=.02519603282416938*(n+=t.charCodeAt(r)),e-=n=e>>>0,n=(e*=n)>>>0,n+=4294967296*(e-=n);return this.n=n,2.3283064365386963e-10*(n>>>0)},init:function(t){"string"===typeof t?this.state(t):this.sow(t)},sow:function(t){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,t)for(var e=0;e<t.length&&null!=t[e];e++){var n=t[e];this.s0-=this.hash(n),this.s0+=~~(this.s0<0),this.s1-=this.hash(n),this.s1+=~~(this.s1<0),this.s2-=this.hash(n),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},between:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},realInRange:function(t,e){return this.frac()*(e-t)+t},normal:function(){return 1-2*this.frac()},uuid:function(){var t="",e="";for(e=t="";t++<36;e+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return e},pick:function(t){return t[this.integerInRange(0,t.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1)+.5)]},timestamp:function(t,e){return this.realInRange(t||9466848e5,e||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(t){return"string"===typeof t&&t.match(/^!rnd/)&&(t=t.split(","),this.c=parseFloat(t[1]),this.s0=parseFloat(t[2]),this.s1=parseFloat(t[3]),this.s2=parseFloat(t[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(this.frac()*(e+1)),r=t[n];t[n]=t[e],t[e]=r}return t}});t.exports=r},function(t,e){t.exports=function(t){for(var e=0,n=0;n<t.length;n++)e+=+t[n];return e/t.length}},function(t,e){t.exports=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=10);var r=Math.pow(n,-e);return Math.ceil(t*r)/r}},function(t,e){t.exports=function(t,e){return Math.abs(t-e)}},function(t,e,n){var r=n(18),i=n(0),o=n(69),s=n(1),a=new o,u=new i({initialize:function t(e,n,r,i){void 0===e&&(e=0),void 0===n&&(n=0),void 0===r&&(r=0),void 0===i&&(i=t.DefaultOrder),this._x=e,this._y=n,this._z=r,this._order=i,this.onChangeCallback=s},x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback(this)}},set:function(t,e,n,r){return void 0===r&&(r=this._order),this._x=t,this._y=e,this._z=n,this._order=r,this.onChangeCallback(this),this},copy:function(t){return this.set(t.x,t.y,t.z,t.order)},setFromQuaternion:function(t,e,n){return void 0===e&&(e=this._order),void 0===n&&(n=!1),a.fromQuat(t),this.setFromRotationMatrix(a,e,n)},setFromRotationMatrix:function(t,e,n){void 0===e&&(e=this._order),void 0===n&&(n=!1);var i=t.val,o=i[0],s=i[4],a=i[8],u=i[1],c=i[5],h=i[9],l=i[2],f=i[6],d=i[10],p=0,v=0,g=0,m=.99999;switch(e){case"XYZ":v=Math.asin(r(a,-1,1)),Math.abs(a)<m?(p=Math.atan2(-h,d),g=Math.atan2(-s,o)):p=Math.atan2(f,c);break;case"YXZ":p=Math.asin(-r(h,-1,1)),Math.abs(h)<m?(v=Math.atan2(a,d),g=Math.atan2(u,c)):v=Math.atan2(-l,o);break;case"ZXY":p=Math.asin(r(f,-1,1)),Math.abs(f)<m?(v=Math.atan2(-l,d),g=Math.atan2(-s,c)):g=Math.atan2(u,o);break;case"ZYX":v=Math.asin(-r(l,-1,1)),Math.abs(l)<m?(p=Math.atan2(f,d),g=Math.atan2(u,o)):g=Math.atan2(-s,c);break;case"YZX":g=Math.asin(r(u,-1,1)),Math.abs(u)<m?(p=Math.atan2(-h,c),v=Math.atan2(-l,o)):v=Math.atan2(a,d);break;case"XZY":g=Math.asin(-r(s,-1,1)),Math.abs(s)<m?(p=Math.atan2(f,c),v=Math.atan2(a,o)):p=Math.atan2(-h,d)}return this._x=p,this._y=v,this._z=g,this._order=e,n&&this.onChangeCallback(this),this}});u.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],u.DefaultOrder="XYZ",t.exports=u},function(t,e){t.exports=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=10);var r=Math.pow(n,-e);return Math.floor(t*r)/r}},function(t,e){t.exports=function(t,e){return t/e/1e3}},function(t,e){t.exports=function(t){return t==parseFloat(t)?!(t%2):void 0}},function(t,e){t.exports=function(t){return t===parseFloat(t)?!(t%2):void 0}},function(t,e){t.exports=function(t,e,n){return Math.min(t+e,n)}},function(t,e){t.exports=function(t){var e=t.length;if(0===e)return 0;t.sort((function(t,e){return t-e}));var n=Math.floor(e/2);return e%2===0?(t[n]+t[n-1])/2:t[n]}},function(t,e){t.exports=function(t,e,n){return Math.max(t-e,n)}},function(t,e){t.exports=function(t,e,n,r){void 0===n&&(n=e+1);var i=(t-e)/(n-e);return i>1?void 0!==r?(i=(r-t)/(r-n))<0&&(i=0):i=1:i<0&&(i=0),i}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);var n=2*Math.random()*Math.PI;return t.x=Math.cos(n)*e,t.y=Math.sin(n)*e,t}},function(t,e){t.exports=function(t,e){void 0===e&&(e=1);var n=2*Math.random()*Math.PI,r=2*Math.random()-1,i=Math.sqrt(1-r*r)*e;return t.x=Math.cos(n)*i,t.y=Math.sin(n)*i,t.z=r*e,t}},function(t,e){t.exports=function(t,e){return void 0===e&&(e=1),t.x=(2*Math.random()-1)*e,t.y=(2*Math.random()-1)*e,t.z=(2*Math.random()-1)*e,t.w=(2*Math.random()-1)*e,t}},function(t,e){t.exports=function(t,e,n,r,i){return t.x=e+i*Math.cos(r),t.y=n+i*Math.sin(r),t}},function(t,e){t.exports=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=10);var r=Math.pow(n,-e);return Math.round(t*r)/r}},function(t,e){t.exports=function(t,e,n,r){void 0===e&&(e=1),void 0===n&&(n=1),void 0===r&&(r=1),r*=Math.PI/t;for(var i=[],o=[],s=0;s<t;s++)e+=(n-=e*r)*r,i[s]=n,o[s]=e;return{sin:o,cos:i,length:t}}},function(t,e,n){var r=n(3);t.exports=function(t,e,n,i){void 0===i&&(i=new r);var o=0,s=0;return t>0&&t<=e*n&&(o=t>e-1?t-(s=Math.floor(t/e))*e:t),i.set(o,s)}},function(t,e){t.exports=function(t,e,n){return Math.abs(t-e)<=n}},function(t,e,n){var r=n(39),i=n(69),o=n(365),s=new i,a=new o,u=new r;t.exports=function(t,e,n){return a.setAxisAngle(e,n),s.fromRotationTranslation(a,u.set(0,0,0)),t.transformMat4(s)}},function(t,e){t.exports="addtexture"},function(t,e){t.exports="onerror"},function(t,e){t.exports="onload"},function(t,e){t.exports="ready"},function(t,e){t.exports="removetexture"},function(t,e){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join("\n")},function(t,e){t.exports="pipelineafterflush"},function(t,e){t.exports="pipelinebeforeflush"},function(t,e){t.exports="pipelinebind"},function(t,e){t.exports="pipelineboot"},function(t,e){t.exports="pipelinedestroy"},function(t,e){t.exports="pipelinerebind"},function(t,e){t.exports="pipelineresize"},function(t,e){t.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join("\n")},function(t,e){t.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join("\n")},function(t,e,n){t.exports={GenerateTexture:n(388),Palettes:n(889)}},function(t,e,n){t.exports={ARNE16:n(389),C64:n(890),CGA:n(891),JMP:n(892),MSX:n(893)}},function(t,e){t.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(t,e){t.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(t,e){t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(t,e){t.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(t,e,n){t.exports={Path:n(895),MoveTo:n(393),CubicBezier:n(390),Curve:n(94),Ellipse:n(391),Line:n(392),QuadraticBezier:n(394),Spline:n(395)}},function(t,e,n){var r=n(0),i=n(390),o=n(391),s=n(5),a=n(392),u=n(393),c=n(394),h=n(10),l=n(395),f=n(3),d=n(14),p=new r({initialize:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new f,this._tmpVec2A=new f,this._tmpVec2B=new f,"object"===typeof t?this.fromJSON(t):this.startPoint.set(t,e)},add:function(t){return this.curves.push(t),this},circleTo:function(t,e,n){return void 0===e&&(e=!1),this.ellipseTo(t,t,0,360,e,n)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);return t.equals(e)||this.curves.push(new a(e,t)),this},cubicBezierTo:function(t,e,n,r,o,s){var a,u,c,h=this.getEndPoint();return t instanceof f?(a=t,u=e,c=n):(a=new f(n,r),u=new f(o,s),c=new f(t,e)),this.add(new i(h,a,u,c))},quadraticBezierTo:function(t,e,n,r){var i,o,s=this.getEndPoint();return t instanceof f?(i=t,o=e):(i=new f(n,r),o=new f(t,e)),this.add(new c(s,i,o))},draw:function(t,e){for(var n=0;n<this.curves.length;n++){var r=this.curves[n];r.active&&r.draw(t,e)}return t},ellipseTo:function(t,e,n,r,i,s){var a=new o(0,0,t,e,n,r,i,s),u=this.getEndPoint(this._tmpVec2A),c=a.getStartPoint(this._tmpVec2B);return u.subtract(c),a.x=u.x,a.y=u.y,this.add(a)},fromJSON:function(t){this.curves=[],this.cacheLengths=[],this.startPoint.set(t.x,t.y),this.autoClose=t.autoClose;for(var e=0;e<t.curves.length;e++){var n=t.curves[e];switch(n.type){case"LineCurve":this.add(a.fromJSON(n));break;case"EllipseCurve":this.add(o.fromJSON(n));break;case"SplineCurve":this.add(l.fromJSON(n));break;case"CubicBezierCurve":this.add(i.fromJSON(n));break;case"QuadraticBezierCurve":this.add(c.fromJSON(n))}}return this},getBounds:function(t,e){void 0===t&&(t=new h),void 0===e&&(e=16),t.x=Number.MAX_VALUE,t.y=Number.MAX_VALUE;for(var n=new h,r=d.MIN_SAFE_INTEGER,i=d.MIN_SAFE_INTEGER,o=0;o<this.curves.length;o++){var s=this.curves[o];s.active&&(s.getBounds(n,e),t.x=Math.min(t.x,n.x),t.y=Math.min(t.y,n.y),r=Math.max(r,n.right),i=Math.max(i,n.bottom))}return t.right=r,t.bottom=i,t},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0;n<this.curves.length;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getEndPoint:function(t){return void 0===t&&(t=new f),this.curves.length>0?this.curves[this.curves.length-1].getPoint(1,t):t.copy(this.startPoint),t},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},getPoint:function(t,e){void 0===e&&(e=new f);for(var n=t*this.getLength(),r=this.getCurveLengths(),i=0;i<r.length;){if(r[i]>=n){var o=r[i]-n,s=this.curves[i],a=s.getLength(),u=0===a?0:1-o/a;return s.getPointAt(u,e)}i++}return null},getPoints:function(t){void 0===t&&(t=12);for(var e,n=[],r=0;r<this.curves.length;r++){var i=this.curves[r];if(i.active)for(var o=i.getResolution(t),s=i.getPoints(o),a=0;a<s.length;a++){var u=s[a];e&&e.equals(u)||(n.push(u),e=u)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},getRandomPoint:function(t){return void 0===t&&(t=new f),this.getPoint(Math.random(),t)},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getStartPoint:function(t){return void 0===t&&(t=new f),t.copy(this.startPoint)},getTangent:function(t,e){void 0===e&&(e=new f);for(var n=t*this.getLength(),r=this.getCurveLengths(),i=0;i<r.length;){if(r[i]>=n){var o=r[i]-n,s=this.curves[i],a=s.getLength(),u=0===a?0:1-o/a;return s.getTangentAt(u,e)}i++}return null},lineTo:function(t,e){t instanceof f?this._tmpVec2B.copy(t):this._tmpVec2B.set(t,e);var n=this.getEndPoint(this._tmpVec2A);return this.add(new a([n.x,n.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(t){return t.unshift(this.getEndPoint()),this.add(new l(t))},moveTo:function(t,e){return t instanceof f?this.add(new u(t.x,t.y)):this.add(new u(t,e))},toJSON:function(){for(var t=[],e=0;e<this.curves.length;e++)t.push(this.curves[e].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:t}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});s.register("path",(function(t,e){return new p(t,e)})),t.exports=p},function(t,e,n){t.exports={DataManager:n(101),DataManagerPlugin:n(897),Events:n(315)}},function(t,e,n){var r=n(0),i=n(101),o=n(24),s=n(20),a=new r({Extends:i,initialize:function(t){i.call(this,t,t.sys.events),this.scene=t,this.systems=t.sys,t.sys.events.once(s.BOOT,this.boot,this),t.sys.events.on(s.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(s.DESTROY,this.destroy,this)},start:function(){this.events.once(s.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){i.prototype.destroy.call(this),this.events.off(s.START,this.start,this),this.scene=null,this.systems=null}});o.register("DataManagerPlugin",a,"data"),t.exports=a},function(t,e,n){t.exports={Align:n(899),BaseShader:n(396),Bounds:n(902),Canvas:n(906),Color:n(397),ColorMatrix:n(198),Masks:n(916),RGB:n(200)}},function(t,e,n){var r=n(123),i=n(17),o={In:n(900),To:n(901)};o=i(!1,o,r),t.exports=o},function(t,e,n){t.exports={BottomCenter:n(290),BottomLeft:n(291),BottomRight:n(292),Center:n(293),LeftCenter:n(295),QuickSet:n(289),RightCenter:n(296),TopCenter:n(297),TopLeft:n(298),TopRight:n(299)}},function(t,e,n){t.exports={BottomCenter:n(277),BottomLeft:n(278),BottomRight:n(279),LeftBottom:n(280),LeftCenter:n(281),LeftTop:n(282),QuickSet:n(276),RightBottom:n(283),RightCenter:n(284),RightTop:n(285),TopCenter:n(286),TopLeft:n(287),TopRight:n(288)}},function(t,e,n){t.exports={CenterOn:n(294),GetBottom:n(42),GetBounds:n(903),GetCenterX:n(87),GetCenterY:n(89),GetLeft:n(43),GetOffsetX:n(904),GetOffsetY:n(905),GetRight:n(44),GetTop:n(45),SetBottom:n(55),SetCenterX:n(88),SetCenterY:n(90),SetLeft:n(53),SetRight:n(54),SetTop:n(52)}},function(t,e,n){var r=n(42),i=n(43),o=n(44),s=n(45);t.exports=function(t,e){void 0===e&&(e={});var n=i(t),a=s(t);return e.x=n,e.y=a,e.width=o(t)-n,e.height=r(t)-a,e}},function(t,e){t.exports=function(t){return t.width*t.originX}},function(t,e){t.exports=function(t){return t.height*t.originY}},function(t,e,n){t.exports={CanvasInterpolation:n(367),CanvasPool:n(31),Smoothing:n(192),TouchAction:n(907),UserSelect:n(908)}},function(t,e){t.exports=function(t,e){return void 0===e&&(e="none"),t.style.msTouchAction=e,t.style["ms-touch-action"]=e,t.style["touch-action"]=e,t}},function(t,e){t.exports=function(t,e){return void 0===e&&(e="none"),["-webkit-","-khtml-","-moz-","-ms-",""].forEach((function(n){t.style[n+"user-select"]=e})),t.style["-webkit-touch-callout"]=e,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t}},function(t,e,n){var r=n(103);t.exports=function(t){void 0===t&&(t=1024);var e,n=[],i=255,o=255,s=0,a=0;for(e=0;e<=i;e++)n.push({r:o,g:e,b:a,color:r(o,e,a)});for(s=255,e=i;e>=0;e--)n.push({r:e,g:s,b:a,color:r(e,s,a)});for(o=0,e=0;e<=i;e++,s--)n.push({r:o,g:s,b:e,color:r(o,s,e)});for(s=0,a=255,e=0;e<=i;e++,a--,o++)n.push({r:o,g:s,b:a,color:r(o,s,a)});if(1024===t)return n;var u=[],c=0,h=1024/t;for(e=0;e<t;e++)u.push(n[Math.floor(c)]),c+=h;return u}},function(t,e){t.exports=function(t){var e={r:t>>16&255,g:t>>8&255,b:255&t,a:255};return t>16777215&&(e.a=t>>>24),e}},function(t,e,n){var r=n(38),i=n(399);t.exports=function(t,e,n){var o=n,s=n,a=n;if(0!==e){var u=n<.5?n*(1+e):n+e-n*e,c=2*n-u;o=i(c,u,t+1/3),s=i(c,u,t),a=i(c,u,t-1/3)}return(new r).setGLTo(o,s,a,1)}},function(t,e,n){var r=n(188);t.exports=function(t,e){void 0===t&&(t=1),void 0===e&&(e=1);for(var n=[],i=0;i<=359;i++)n.push(r(i/359,t,e));return n}},function(t,e,n){var r=n(135),i=function(t,e,n,i,o,s,a,u){void 0===a&&(a=100),void 0===u&&(u=0);var c=u/a;return{r:r(t,i,c),g:r(e,o,c),b:r(n,s,c)}};t.exports={RGBWithRGB:i,ColorWithRGB:function(t,e,n,r,o,s){return void 0===o&&(o=100),void 0===s&&(s=0),i(t.r,t.g,t.b,e,n,r,o,s)},ColorWithColor:function(t,e,n,r){return void 0===n&&(n=100),void 0===r&&(r=0),i(t.r,t.g,t.b,e.r,e.g,e.b,n,r)}}},function(t,e,n){var r=n(195),i=n(38);t.exports=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=255),new i(r(t,e),r(t,e),r(t,e))}},function(t,e,n){var r=n(398);t.exports=function(t,e,n,i,o){return void 0===i&&(i=255),void 0===o&&(o="#"),"#"===o?"#"+((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1,7):"0x"+r(i)+r(t)+r(e)+r(n)}},function(t,e,n){t.exports={BitmapMask:n(310),GeometryMask:n(311)}},function(t,e,n){var r={AddToDOM:n(142),DOMContentLoaded:n(400),GetInnerHeight:n(401),GetScreenOrientation:n(402),GetTarget:n(407),ParseXML:n(408),RemoveFromDOM:n(202),RequestAnimationFrame:n(386)};t.exports=r},function(t,e,n){t.exports={EventEmitter:n(919)}},function(t,e,n){var r=n(0),i=n(9),o=n(24),s=new r({Extends:i,initialize:function(){i.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});o.register("EventEmitter",s,"events"),t.exports=s},function(t,e,n){var r=n(142),i=n(321),o=n(325),s=n(31),a=n(0),u=n(346),c=n(921),h=n(366),l=n(101),f=n(384),d=n(347),p=n(400),v=n(9),g=n(22),m=n(409),y=n(24),b=n(414),w=n(415),x=n(417),_=n(106),T=n(422),E=n(385),S=n(387),k=n(426),A=new a({initialize:function(t){this.config=new u(t),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new v,this.anims=new i(this),this.textures=new T(this),this.cache=new o(this),this.registry=new l(this),this.input=new m(this,this.config),this.scene=new x(this,this.config.sceneConfig),this.device=d,this.scale=new w(this,this.config),this.sound=null,this.sound=k.create(this),this.loop=new E(this,this.config.fps),this.plugins=new b(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,p(this.boot.bind(this))},boot:function(){y.hasCore("EventEmitter")?(this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),h(this),c(this),f(this),r(this.canvas,this.config.parent),this.textures.once(_.READY,this.texturesReady,this),this.events.emit(g.BOOT)):console.warn("Aborting. Core Plugins missing.")},texturesReady:function(){this.events.emit(g.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.renderer?this.loop.start(this.step.bind(this)):this.loop.start(this.headlessStep.bind(this)),S(this);var t=this.events;t.on(g.HIDDEN,this.onHidden,this),t.on(g.VISIBLE,this.onVisible,this),t.on(g.BLUR,this.onBlur,this),t.on(g.FOCUS,this.onFocus,this)},step:function(t,e){if(this.pendingDestroy)return this.runDestroy();var n=this.events;n.emit(g.PRE_STEP,t,e),n.emit(g.STEP,t,e),this.scene.update(t,e),n.emit(g.POST_STEP,t,e);var r=this.renderer;r.preRender(),n.emit(g.PRE_RENDER,r,t,e),this.scene.render(r),r.postRender(),n.emit(g.POST_RENDER,r,t,e)},headlessStep:function(t,e){if(this.pendingDestroy)return this.runDestroy();var n=this.events;n.emit(g.PRE_STEP,t,e),n.emit(g.STEP,t,e),this.scene.update(t,e),n.emit(g.POST_STEP,t,e),n.emit(g.PRE_RENDER),n.emit(g.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(g.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(g.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(t,e){void 0===e&&(e=!1),this.pendingDestroy=!0,this.removeCanvas=t,this.noReturn=e},runDestroy:function(){this.scene.destroy(),this.events.emit(g.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(s.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});t.exports=A},function(t,e,n){var r=n(142);t.exports=function(t){var e=t.config;if(e.parent&&e.domCreateContainer){var n=document.createElement("div");n.style.cssText=["display: block;","width: "+t.scale.width+"px;","height: "+t.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+e.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),t.domContainer=n,r(n,e.parent)}}},function(t,e){t.exports="boot"},function(t,e){t.exports="destroy"},function(t,e){t.exports="dragend"},function(t,e){t.exports="dragenter"},function(t,e){t.exports="drag"},function(t,e){t.exports="dragleave"},function(t,e){t.exports="dragover"},function(t,e){t.exports="dragstart"},function(t,e){t.exports="drop"},function(t,e){t.exports="gameout"},function(t,e){t.exports="gameover"},function(t,e){t.exports="gameobjectdown"},function(t,e){t.exports="dragend"},function(t,e){t.exports="dragenter"},function(t,e){t.exports="drag"},function(t,e){t.exports="dragleave"},function(t,e){t.exports="dragover"},function(t,e){t.exports="dragstart"},function(t,e){t.exports="drop"},function(t,e){t.exports="gameobjectmove"},function(t,e){t.exports="gameobjectout"},function(t,e){t.exports="gameobjectover"},function(t,e){t.exports="pointerdown"},function(t,e){t.exports="pointermove"},function(t,e){t.exports="pointerout"},function(t,e){t.exports="pointerover"},function(t,e){t.exports="pointerup"},function(t,e){t.exports="wheel"},function(t,e){t.exports="gameobjectup"},function(t,e){t.exports="gameobjectwheel"},function(t,e){t.exports="boot"},function(t,e){t.exports="process"},function(t,e){t.exports="update"},function(t,e){t.exports="pointerdown"},function(t,e){t.exports="pointerdownoutside"},function(t,e){t.exports="pointermove"},function(t,e){t.exports="pointerout"},function(t,e){t.exports="pointerover"},function(t,e){t.exports="pointerup"},function(t,e){t.exports="pointerupoutside"},function(t,e){t.exports="wheel"},function(t,e){t.exports="pointerlockchange"},function(t,e){t.exports="preupdate"},function(t,e){t.exports="shutdown"},function(t,e){t.exports="start"},function(t,e){t.exports="update"},function(t,e){t.exports="addfile"},function(t,e){t.exports="complete"},function(t,e){t.exports="filecomplete"},function(t,e){t.exports="filecomplete-"},function(t,e){t.exports="loaderror"},function(t,e){t.exports="load"},function(t,e){t.exports="fileprogress"},function(t,e){t.exports="postprocess"},function(t,e){t.exports="progress"},function(t,e){t.exports="start"},function(t,e,n){t.exports={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"}},function(t,e){t.exports=function(t,e,n){if(n.getElementsByTagName("TextureAtlas")){var r=t.source[e];t.add("__BASE",e,0,0,r.width,r.height);for(var i,o=n.getElementsByTagName("SubTexture"),s=0;s<o.length;s++){var a=o[s].attributes,u=a.name.value,c=parseInt(a.x.value,10),h=parseInt(a.y.value,10),l=parseInt(a.width.value,10),f=parseInt(a.height.value,10);if(i=t.add(u,e,c,h,l,f),a.frameX){var d=Math.abs(parseInt(a.frameX.value,10)),p=Math.abs(parseInt(a.frameY.value,10)),v=parseInt(a.frameWidth.value,10),g=parseInt(a.frameHeight.value,10);i.setTrim(l,f,d,p,v,g)}}return t}console.warn("Invalid Texture Atlas XML given")}},function(t,e){t.exports=function(t,e){var n=t.source[e];return t.add("__BASE",e,0,0,n.width,n.height),t}},function(t,e){t.exports=function(t,e){var n=t.source[e];return t.add("__BASE",e,0,0,n.width,n.height),t}},function(t,e,n){var r=n(77);t.exports=function(t,e,n){if(n.frames||n.textures){var i=t.source[e];t.add("__BASE",e,0,0,i.width,i.height);for(var o,s=Array.isArray(n.textures)?n.textures[e].frames:n.frames,a=0;a<s.length;a++){var u=s[a];o=t.add(u.filename,e,u.frame.x,u.frame.y,u.frame.w,u.frame.h),u.trimmed&&o.setTrim(u.sourceSize.w,u.sourceSize.h,u.spriteSourceSize.x,u.spriteSourceSize.y,u.spriteSourceSize.w,u.spriteSourceSize.h),u.rotated&&(o.rotated=!0,o.updateUVsInverted());var c=u.anchor||u.pivot;c&&(o.customPivot=!0,o.pivotX=c.x,o.pivotY=c.y),o.customData=r(u)}for(var h in n)"frames"!==h&&(Array.isArray(n[h])?t.customData[h]=n[h].slice(0):t.customData[h]=n[h]);return t}console.warn("Invalid Texture Atlas JSON Array")}},function(t,e,n){var r=n(77);t.exports=function(t,e,n){if(n.frames){var i=t.source[e];t.add("__BASE",e,0,0,i.width,i.height);var o,s=n.frames;for(var a in s)if(s.hasOwnProperty(a)){var u=s[a];o=t.add(a,e,u.frame.x,u.frame.y,u.frame.w,u.frame.h),u.trimmed&&o.setTrim(u.sourceSize.w,u.sourceSize.h,u.spriteSourceSize.x,u.spriteSourceSize.y,u.spriteSourceSize.w,u.spriteSourceSize.h),u.rotated&&(o.rotated=!0,o.updateUVsInverted());var c=u.anchor||u.pivot;c&&(o.customPivot=!0,o.pivotX=c.x,o.pivotY=c.y),o.customData=r(u)}for(var h in n)"frames"!==h&&(Array.isArray(n[h])?t.customData[h]=n[h].slice(0):t.customData[h]=n[h]);return t}console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object")}},function(t,e,n){var r=n(2);t.exports=function(t,e,n,i,o,s,a){var u=r(a,"frameWidth",null),c=r(a,"frameHeight",u);if(null===u)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var h=t.source[e];t.add("__BASE",e,0,0,h.width,h.height);var l=r(a,"startFrame",0),f=r(a,"endFrame",-1),d=r(a,"margin",0),p=r(a,"spacing",0),v=Math.floor((o-d+p)/(u+p))*Math.floor((s-d+p)/(c+p));0===v&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",t.key),(l>v||l<-v)&&(l=0),l<0&&(l=v+l),-1!==f&&(v=l+(f+1));for(var g=d,m=d,y=0,b=0,w=0;w<v;w++){y=0,b=0;var x=g+u,_=m+c;x>o&&(y=x-o),_>s&&(b=_-s),t.add(w,e,n+g,i+m,u-y,c-b),(g+=u+p)+u>o&&(g=d,m+=c+p)}return t}},function(t,e,n){var r=n(2);t.exports=function(t,e,n){var i=r(n,"frameWidth",null),o=r(n,"frameHeight",i);if(!i)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var s=t.source[0];t.add("__BASE",0,0,0,s.width,s.height);var a,u=r(n,"startFrame",0),c=r(n,"endFrame",-1),h=r(n,"margin",0),l=r(n,"spacing",0),f=e.cutX,d=e.cutY,p=e.cutWidth,v=e.cutHeight,g=e.realWidth,m=e.realHeight,y=Math.floor((g-h+l)/(i+l)),b=Math.floor((m-h+l)/(o+l)),w=y*b,x=e.x,_=i-x,T=i-(g-p-x),E=e.y,S=o-E,k=o-(m-v-E);(u>w||u<-w)&&(u=0),u<0&&(u=w+u),-1!==c&&(w=u+(c+1));for(var A=h,O=h,C=0,P=e.sourceIndex,I=0;I<b;I++){for(var R=0===I,M=I===b-1,N=0;N<y;N++){var L=0===N,D=N===y-1;if(a=t.add(C,P,f+A,d+O,i,o),L||R||D||M){var F=L?x:0,j=R?E:0,B=0,U=0;L&&(B+=i-_),D&&(B+=i-T),R&&(U+=o-S),M&&(U+=o-k);var V=i-B,z=o-U;a.cutWidth=V,a.cutHeight=z,a.setTrim(i,o,F,j,V,z)}A+=l,A+=L?_:D?T:i,C++}A=h,O+=l,O+=R?S:M?k:o}return t}},function(t,e){var n=0,r=function(t,e,r,i){var o=n-i.y-i.height;t.add(r,e,i.x,o,i.width,i.height)};t.exports=function(t,e,i){var o=t.source[e];t.add("__BASE",e,0,0,o.width,o.height),n=o.height;for(var s=i.split("\n"),a=/^[ ]*(- )*(\w+)+[: ]+(.*)/,u="",c="",h={x:0,y:0,width:0,height:0},l=0;l<s.length;l++){var f=s[l].match(a);if(f){var d="- "===f[1],p=f[2],v=f[3];if(d&&(c!==u&&(r(t,e,c,h),u=c),h={x:0,y:0,width:0,height:0}),"name"!==p)switch(p){case"x":case"y":case"width":case"height":h[p]=parseInt(v,10)}else c=v}}return c!==u&&r(t,e,c,h),t}},function(t,e){t.exports="complete"},function(t,e){t.exports="decoded"},function(t,e){t.exports="decodedall"},function(t,e){t.exports="destroy"},function(t,e){t.exports="detune"},function(t,e){t.exports="detune"},function(t,e){t.exports="mute"},function(t,e){t.exports="rate"},function(t,e){t.exports="volume"},function(t,e){t.exports="loop"},function(t,e){t.exports="looped"},function(t,e){t.exports="mute"},function(t,e){t.exports="pan"},function(t,e){t.exports="pauseall"},function(t,e){t.exports="pause"},function(t,e){t.exports="play"},function(t,e){t.exports="rate"},function(t,e){t.exports="resumeall"},function(t,e){t.exports="resume"},function(t,e){t.exports="seek"},function(t,e){t.exports="stopall"},function(t,e){t.exports="stop"},function(t,e){t.exports="unlocked"},function(t,e){t.exports="volume"},function(t,e,n){var r={Events:n(75),DisplayList:n(1012),GameObjectCreator:n(16),GameObjectFactory:n(5),UpdateList:n(1040),Components:n(11),GetCalcMatrix:n(19),BuildGameObject:n(28),BuildGameObjectAnimation:n(439),GameObject:n(15),BitmapText:n(148),Blitter:n(213),Bob:n(440),Container:n(214),DOMElement:n(442),DynamicBitmapText:n(215),Extern:n(444),Graphics:n(216),Group:n(113),Image:n(125),Layer:n(219),Particles:n(1074),PathFollower:n(457),RenderTexture:n(221),RetroFont:n(1082),Rope:n(223),Sprite:n(73),Text:n(224),GetTextSize:n(458),MeasureText:n(460),TextStyle:n(459),TileSprite:n(225),Zone:n(129),Video:n(226),Shape:n(34),Arc:n(461),Curve:n(462),Ellipse:n(463),Grid:n(464),IsoBox:n(465),IsoTriangle:n(466),Line:n(467),Polygon:n(468),Rectangle:n(473),Star:n(474),Triangle:n(475),Factories:{Blitter:n(1130),Container:n(1131),DOMElement:n(1132),DynamicBitmapText:n(1133),Extern:n(1134),Graphics:n(1135),Group:n(1136),Image:n(1137),Layer:n(1138),Particles:n(1139),PathFollower:n(1140),RenderTexture:n(1141),Rope:n(1142),Sprite:n(1143),StaticBitmapText:n(1144),Text:n(1145),TileSprite:n(1146),Zone:n(1147),Video:n(1148),Arc:n(1149),Curve:n(1150),Ellipse:n(1151),Grid:n(1152),IsoBox:n(1153),IsoTriangle:n(1154),Line:n(1155),Polygon:n(1156),Rectangle:n(1157),Star:n(1158),Triangle:n(1159)},Creators:{Blitter:n(1160),Container:n(1161),DynamicBitmapText:n(1162),Graphics:n(1163),Group:n(1164),Image:n(1165),Layer:n(1166),Particles:n(1167),RenderTexture:n(1168),Rope:n(1169),Sprite:n(1170),StaticBitmapText:n(1171),Text:n(1172),TileSprite:n(1173),Zone:n(1174),Video:n(1175)}};r.Shader=n(229),r.Mesh=n(230),r.PointLight=n(150),r.Factories.Shader=n(1184),r.Factories.Mesh=n(1185),r.Factories.PointLight=n(1186),r.Creators.Shader=n(1187),r.Creators.Mesh=n(1188),r.Creators.PointLight=n(1189),r.Light=n(481),r.LightsManager=n(482),r.LightsPlugin=n(1190),t.exports=r},function(t,e,n){var r=n(0),i=n(110),o=n(24),s=n(75),a=n(20),u=n(79),c=new r({Extends:i,initialize:function(t){i.call(this,t),this.sortChildrenFlag=!1,this.scene=t,this.systems=t.sys,this.events=t.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(a.BOOT,this.boot,this),this.events.on(a.START,this.start,this)},boot:function(){this.events.once(a.DESTROY,this.destroy,this)},addChildCallback:function(t){t.displayList&&t.displayList!==this&&t.removeFromDisplayList(),t.displayList||(this.queueDepthSort(),t.displayList=this,t.emit(s.ADDED_TO_SCENE,t,this.scene),this.events.emit(a.ADDED_TO_SCENE,t,this.scene))},removeChildCallback:function(t){this.queueDepthSort(),t.displayList=null,t.emit(s.REMOVED_FROM_SCENE,t,this.scene),this.events.emit(a.REMOVED_FROM_SCENE,t,this.scene)},start:function(){this.events.once(a.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(u(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(t,e){return t._depth-e._depth},getChildren:function(){return this.list},shutdown:function(){for(var t=this.list,e=t.length;e--;)t[e].destroy(!0);t.length=0,this.events.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(a.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});o.register("DisplayList",c,"displayList"),t.exports=c},function(t,e,n){t.exports={CheckMatrix:n(209),MatrixToString:n(1014),ReverseColumns:n(1015),ReverseRows:n(1016),Rotate180:n(1017),RotateLeft:n(1018),RotateMatrix:n(147),RotateRight:n(1019),Translate:n(1020),TransposeMatrix:n(435)}},function(t,e,n){var r=n(186),i=n(209);t.exports=function(t){var e="";if(!i(t))return e;for(var n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++){var s=t[n][o].toString();e+="undefined"!==s?r(s,2):"?",o<t[n].length-1&&(e+=" |")}if(n<t.length-1){e+="\n";for(var a=0;a<t[n].length;a++)e+="---",a<t[n].length-1&&(e+="+");e+="\n"}}return e}},function(t,e){t.exports=function(t){return t.reverse()}},function(t,e){t.exports=function(t){for(var e=0;e<t.length;e++)t[e].reverse();return t}},function(t,e,n){var r=n(147);t.exports=function(t){return r(t,180)}},function(t,e,n){var r=n(147);t.exports=function(t){return r(t,90)}},function(t,e,n){var r=n(147);t.exports=function(t){return r(t,-90)}},function(t,e,n){var r=n(178),i=n(179);t.exports=function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=0),0!==n&&(n<0?r(t,Math.abs(n)):i(t,n)),0!==e)for(var o=0;o<t.length;o++){var s=t[o];e<0?r(s,Math.abs(e)):i(s,e)}return t}},function(t,e){t.exports=function(t,e,n,r,i){if(void 0===i&&(i=t),n>0){var o=n-t.length;if(o<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.push(e),r&&r.call(i,e),e):null;for(var s=e.length-1;s>=0;)-1!==t.indexOf(e[s])&&e.splice(s,1),s--;if(0===(s=e.length))return null;n>0&&s>o&&(e.splice(o),s=o);for(var a=0;a<s;a++){var u=e[a];t.push(u),r&&r.call(i,u)}return e}},function(t,e){t.exports=function(t,e,n,r,i,o){if(void 0===n&&(n=0),void 0===o&&(o=t),r>0){var s=r-t.length;if(s<=0)return null}if(!Array.isArray(e))return-1===t.indexOf(e)?(t.splice(n,0,e),i&&i.call(o,e),e):null;for(var a=e.length-1;a>=0;)-1!==t.indexOf(e[a])&&e.pop(),a--;if(0===(a=e.length))return null;r>0&&a>s&&(e.splice(s),a=s);for(var u=a-1;u>=0;u--){var c=e[u];t.splice(n,0,c),i&&i.call(o,c)}return e}},function(t,e){t.exports=function(t,e){var n=t.indexOf(e);return-1!==n&&n<t.length&&(t.splice(n,1),t.push(e)),e}},function(t,e,n){var r=n(78);t.exports=function(t,e,n,i,o){void 0===i&&(i=0),void 0===o&&(o=t.length);var s=0;if(r(t,i,o))for(var a=i;a<o;a++)t[a][e]===n&&s++;return s}},function(t,e){t.exports=function(t,e,n){var r,i=[null];for(r=3;r<arguments.length;r++)i.push(arguments[r]);for(r=0;r<t.length;r++)i[0]=t[r],e.apply(n,i);return t}},function(t,e,n){var r=n(78);t.exports=function(t,e,n,i,o){if(void 0===i&&(i=0),void 0===o&&(o=t.length),r(t,i,o)){var s,a=[null];for(s=5;s<arguments.length;s++)a.push(arguments[s]);for(s=i;s<o;s++)a[0]=t[s],e.apply(n,a)}return t}},function(t,e){t.exports=function(t,e){var n=t.indexOf(e);if(n>0){var r=t[n-1],i=t.indexOf(r);t[n]=r,t[i]=e}return t}},function(t,e){t.exports=function(t,e,n){var r=t.indexOf(e);if(-1===r||n<0||n>=t.length)throw new Error("Supplied index out of bounds");return r!==n&&(t.splice(r,1),t.splice(n,0,e)),e}},function(t,e){t.exports=function(t,e){var n=t.indexOf(e);if(-1!==n&&n<t.length-1){var r=t[n+1],i=t.indexOf(r);t[n]=r,t[i]=e}return t}},function(t,e){t.exports=function(t,e,n){if(e===n)return t;var r=t.indexOf(e),i=t.indexOf(n);if(r<0||i<0)throw new Error("Supplied items must be elements of the same array");return r>i||(t.splice(r,1),i===t.length-1?t.push(e):t.splice(i,0,e)),t}},function(t,e){t.exports=function(t,e,n){if(e===n)return t;var r=t.indexOf(e),i=t.indexOf(n);if(r<0||i<0)throw new Error("Supplied items must be elements of the same array");return r<i||(t.splice(r,1),0===i?t.unshift(e):t.splice(i,0,e)),t}},function(t,e,n){var r=n(363);t.exports=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=null),void 0===n&&(n=1),null===e&&(e=t,t=0);for(var i=[],o=Math.max(r((e-t)/(n||1)),0),s=0;s<o;s++)i.push(t),t+=n;return i}},function(t,e,n){var r=n(74);t.exports=function(t,e,n,i){if(void 0===i&&(i=t),e<0||e>t.length-1)throw new Error("Index out of bounds");var o=r(t,e);return n&&n.call(i,o),o}},function(t,e,n){var r=n(78);t.exports=function(t,e,n,i,o){if(void 0===e&&(e=0),void 0===n&&(n=t.length),void 0===o&&(o=t),r(t,e,n)){var s=n-e,a=t.splice(e,s);if(i)for(var u=0;u<a.length;u++){var c=a[u];i.call(o,c)}return a}return[]}},function(t,e,n){var r=n(74);t.exports=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.length);var i=e+Math.floor(Math.random()*n);return r(t,i)}},function(t,e){t.exports=function(t,e,n){var r=t.indexOf(e),i=t.indexOf(n);return-1!==r&&-1===i&&(t[r]=n,!0)}},function(t,e){t.exports=function(t,e){var n=t.indexOf(e);return-1!==n&&n>0&&(t.splice(n,1),t.unshift(e)),e}},function(t,e,n){var r=n(78);t.exports=function(t,e,n,i,o){if(void 0===i&&(i=0),void 0===o&&(o=t.length),r(t,i,o))for(var s=i;s<o;s++){var a=t[s];a.hasOwnProperty(e)&&(a[e]=n)}return t}},function(t,e){t.exports=function(t,e,n){if(e===n)return t;var r=t.indexOf(e),i=t.indexOf(n);if(r<0||i<0)throw new Error("Supplied items must be elements of the same array");return t[r]=n,t[i]=e,t}},function(t,e,n){var r=n(0),i=n(211),o=n(24),s=n(20),a=new r({Extends:i,initialize:function(t){i.call(this),this.checkQueue=!0,this.scene=t,this.systems=t.sys,t.sys.events.once(s.BOOT,this.boot,this),t.sys.events.on(s.START,this.start,this)},boot:function(){this.systems.events.once(s.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(s.PRE_UPDATE,this.update,this),t.on(s.UPDATE,this.sceneUpdate,this),t.once(s.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(t,e){for(var n=this._active,r=n.length,i=0;i<r;i++){var o=n[i];o.active&&o.preUpdate.call(o,t,e)}},shutdown:function(){for(var t=this._active.length;t--;)this._active[t].destroy(!0);for(t=this._pending.length;t--;)this._pending[t].destroy(!0);for(t=this._destroy.length;t--;)this._destroy[t].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var e=this.systems.events;e.off(s.PRE_UPDATE,this.update,this),e.off(s.UPDATE,this.sceneUpdate,this),e.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(s.START,this.start,this),this.scene=null,this.systems=null}});o.register("UpdateList",a,"updateList"),t.exports=a},function(t,e){t.exports="add"},function(t,e){t.exports="remove"},function(t,e){t.exports=function(t,e,n,r){if(void 0===n&&(n=!1),void 0===r)return r={local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0};var i,o,s,a,u=t.text,c=u.length,h=t.maxWidth,l=t.wordWrapCharCode,f=Number.MAX_VALUE,d=Number.MAX_VALUE,p=0,v=0,g=t.fontData.chars,m=t.fontData.lineHeight,y=t.letterSpacing,b=0,w=0,x=0,_=null,T=t._align,E=0,S=0,k=t.fontSize/t.fontData.size,A=k*t.scaleX,O=k*t.scaleY,C=null,P=0,I=[],R=Number.MAX_VALUE,M=0,N=0,L=0,D=[],F=[],j=null;if(h>0){for(i=0;i<c;i++)if(10!==(x=u.charCodeAt(i))){if(_=g[x]){if(null!==C)var B=_.kerning[P];x===l?null!==j&&(D.push({word:j.word,i:j.i,x:j.x*A,y:j.y*O,w:j.w*A,h:j.h*O,cr:!1}),j=null):(null===j&&(j={word:"",i:i,x:b,y:w,w:0,h:m,cr:!1}),j.word=j.word.concat(u[i]),j.w+=_.xOffset+_.xAdvance+(void 0!==B?B:0)),b+=_.xAdvance+y,C=_,P=x}}else null!==j&&(D.push({word:j.word,i:j.i,x:j.x*A,y:j.y*O,w:j.w*A,h:j.h*O,cr:!0}),j=null),b=0,w+=m,C=null;var U;null!==j&&D.push({word:j.word,i:j.i,x:j.x*A,y:j.y*O,w:j.w*A,h:j.h*O,cr:!1}),b=0,w=0,C=null,P=0;var V=0,z=[];for(i=0;i<D.length;i++){var G=D[i],Y=G.x,W=G.x+G.w;U&&(V=Y-(Y-(U.x+U.w)+U.w),U=null),Y-V>h||W-V>h?(z.push(G.i-1),G.cr?(z.push(G.i+G.word.length),V=0,U=null):U=G):G.cr&&(z.push(G.i+G.word.length),V=0,U=null)}for(i=z.length-1;i>=0;i--)o=u,s=z[i],a="\n",u=o.substr(0,s)+a+o.substr(s+1);r.wrappedText=u,c=u.length,D=[],j=null}var X=0;for(i=0;i<c;i++)if(10!==(x=u.charCodeAt(i))){if(_=g[x]){if(E=b,S=w,null!==C){var H=_.kerning[P];E+=void 0!==H?H:0}f>E&&(f=E),d>S&&(d=S);var q=E+_.xAdvance,K=S+m;p<q&&(p=q),v<K&&(v=K);var $=_.xOffset+_.xAdvance+(void 0!==H?H:0);x===l?null!==j&&(D.push({word:j.word,i:j.i,x:j.x*A,y:j.y*O,w:j.w*A,h:j.h*O}),j=null):(null===j&&(j={word:"",i:X,x:b,y:w,w:0,h:m}),j.word=j.word.concat(u[i]),j.w+=$),F.push({i:X,char:u[i],code:x,x:(_.xOffset+b)*k,y:(_.yOffset+w)*k,w:_.width*k,h:_.height*k,t:w*k,r:q*k,b:m*k,line:N,glyph:_}),b+=_.xAdvance+y,C=_,P=x,L=q*k,X++}}else null!==j&&(D.push({word:j.word,i:j.i,x:j.x*A,y:j.y*O,w:j.w*A,h:j.h*O}),j=null),b=0,w+=m,C=null,I[N]=L,L>M&&(M=L),L<R&&(R=L),N++,L=0;if(null!==j&&D.push({word:j.word,i:j.i,x:j.x*A,y:j.y*O,w:j.w*A,h:j.h*O}),I[N]=L,L>M&&(M=L),L<R&&(R=L),T>0)for(var J=0;J<F.length;J++){var Q=F[J];if(1===T){var Z=(M-I[Q.line])/2;Q.x+=Z,Q.r+=Z}else if(2===T){var tt=M-I[Q.line];Q.x+=tt,Q.r+=tt}}var et=r.local,nt=r.global,rt=r.lines;return et.x=f*k,et.y=d*k,et.width=p*k,et.height=v*k,nt.x=t.x-t._displayOriginX+f*A,nt.y=t.y-t._displayOriginY+d*O,nt.width=p*A,nt.height=v*O,rt.shortest=R,rt.longest=M,rt.lengths=I,e&&(et.x=Math.ceil(et.x),et.y=Math.ceil(et.y),et.width=Math.ceil(et.width),et.height=Math.ceil(et.height),nt.x=Math.ceil(nt.x),nt.y=Math.ceil(nt.y),nt.width=Math.ceil(nt.width),nt.height=Math.ceil(nt.height),rt.shortest=Math.ceil(R),rt.longest=Math.ceil(M)),n&&(t._displayOriginX=t.originX*et.width,t._displayOriginY=t.originY*et.height,nt.x=t.x-t._displayOriginX*t.scaleX,nt.y=t.y-t._displayOriginY*t.scaleY,e&&(nt.x=Math.ceil(nt.x),nt.y=Math.ceil(nt.y))),r.words=D,r.characters=F,r.lines.height=m,r.scale=k,r.scaleX=t.scaleX,r.scaleY=t.scaleY,r}},function(t,e,n){var r=n(212);t.exports=function(t,e,n,i,o,s,a){var u=t.sys.textures.get(n),c=u.get(i),h=t.sys.cache.xml.get(o);if(c&&h){var l=r(h,c,s,a,u);return t.sys.cache.bitmapFont.add(e,{data:l,texture:n,frame:i,fromAtlas:!0}),!0}return!1}},function(t,e,n){var r=n(1),i=n(1);r=n(1046),i=n(1048),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(1047),i=n(19),o=n(12);t.exports=function(t,e,n,s){if(0!==e._text.length){n.addToRenderList(e);var a,u,c,h=t.pipelines.set(e.pipeline,e),l=i(e,n,s).calc,f=n.roundPixels,d=n.alpha,p=e.charColors,v=e.tintFill,g=o.getTintAppendFloatAlpha,m=g(e.tintTopLeft,d*e._alphaTL),y=g(e.tintTopRight,d*e._alphaTR),b=g(e.tintBottomLeft,d*e._alphaBL),w=g(e.tintBottomRight,d*e._alphaBR),x=e.frame.glTexture,_=h.setGameObject(e),T=e.getTextBounds(!1).characters,E=e.dropShadowX,S=e.dropShadowY,k=0!==E||0!==S;if(t.pipelines.preBatch(e),k){var A=e.dropShadowColor,O=e.dropShadowAlpha,C=g(A,d*O*e._alphaTL),P=g(A,d*O*e._alphaTR),I=g(A,d*O*e._alphaBL),R=g(A,d*O*e._alphaBR);for(a=0;a<T.length;a++)c=(u=T[a]).glyph,32!==u.code&&0!==c.width&&0!==c.height&&r(h,e,u,c,E,S,l,f,C,P,I,R,1,x,_)}for(a=0;a<T.length;a++)if(c=(u=T[a]).glyph,32!==u.code&&0!==c.width&&0!==c.height)if(p[u.i]){var M=p[u.i],N=M.tintEffect,L=g(M.tintTL,d*e._alphaTL),D=g(M.tintTR,d*e._alphaTR),F=g(M.tintBL,d*e._alphaBL),j=g(M.tintBR,d*e._alphaBR);r(h,e,u,c,0,0,l,f,L,D,F,j,N,x,_)}else r(h,e,u,c,0,0,l,f,m,y,b,w,v,x,_);t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(t,e,n,r,i,o,s,a,u,c,h,l,f,d,p){var v=n.x-e.displayOriginX+i,g=n.y-e.displayOriginY+o,m=v+n.w,y=g+n.h,b=s.getXRound(v,g,a),w=s.getYRound(v,g,a),x=s.getXRound(v,y,a),_=s.getYRound(v,y,a),T=s.getXRound(m,y,a),E=s.getYRound(m,y,a),S=s.getXRound(m,g,a),k=s.getYRound(m,g,a);t.batchQuad(e,b,w,x,_,T,E,S,k,r.u0,r.v0,r.u1,r.v1,u,c,h,l,f,d,p)}},function(t,e,n){var r=n(30);t.exports=function(t,e,n,i){var o=e._text,s=o.length,a=t.currentContext;if(0!==s&&r(t,a,e,n,i)){n.addToRenderList(e);var u=e.fromAtlas?e.frame:e.texture.frames.__BASE,c=e.fontData.chars,h=e.fontData.lineHeight,l=e._letterSpacing,f=0,d=0,p=0,v=null,g=0,m=0,y=0,b=0,w=0,x=0,_=null,T=0,E=u.source.image,S=u.cutX,k=u.cutY,A=e._fontSize/e.fontData.size,O=e._align,C=0,P=0,I=e.getTextBounds(!1);e.maxWidth>0&&(s=(o=I.wrappedText).length);var R=e._bounds.lines;1===O?P=(R.longest-R.lengths[0])/2:2===O&&(P=R.longest-R.lengths[0]),a.translate(-e.displayOriginX,-e.displayOriginY);for(var M=n.roundPixels,N=0;N<s;N++)if(10!==(p=o.charCodeAt(N))){if(v=c[p]){if(g=S+v.x,m=k+v.y,y=v.width,b=v.height,w=v.xOffset+f,x=v.yOffset+d,null!==_){var L=v.kerning[T];w+=void 0!==L?L:0}w*=A,x*=A,w+=P,f+=v.xAdvance+l,_=v,T=p,0!==y&&0!==b&&32!==p&&(M&&(w=Math.round(w),x=Math.round(x)),a.save(),a.translate(w,x),a.scale(A,A),a.drawImage(E,g,m,y,b,0,0,y,b),a.restore())}}else C++,1===O?P=(R.longest-R.lengths[C])/2:2===O&&(P=R.longest-R.lengths[C]),f=0,d+=h,_=null;a.restore()}}},function(t,e,n){var r=n(1),i=n(1);r=n(1050),i=n(1051),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(25),i=n(12),o=new r;t.exports=function(t,e,n,r){var s=e.getRenderList();if(0!==s.length){var a=n.alpha*e.alpha;if(0!==a){n.addToRenderList(e);var u=t.pipelines.set(this.pipeline,e),c=n.scrollX*e.scrollFactorX,h=n.scrollY*e.scrollFactorY,l=o.copyFrom(n.matrix);r&&(l.multiplyWithOffset(r,-c,-h),c=0,h=0);var f=e.x-c,d=e.y-h,p=-1,v=n.roundPixels;t.pipelines.preBatch(e);for(var g=0;g<s.length;g++){var m=s[g],y=m.frame,b=m.alpha*a;if(0!==b){var w=y.width,x=y.height,_=f+m.x+y.x,T=d+m.y+y.y;m.flipX&&(w*=-1,_+=y.width),m.flipY&&(x*=-1,T+=y.height);var E=_+w,S=T+x,k=l.getX(_,T),A=l.getY(_,T),O=l.getX(E,S),C=l.getY(E,S),P=i.getTintAppendFloatAlpha(m.tint,b);if(y.sourceIndex!==p){var I=u.setGameObject(e,y);p=y.sourceIndex}v&&(k=Math.round(k),A=Math.round(A),O=Math.round(O),C=Math.round(C)),u.batchQuad(e,k,A,k,C,O,C,O,A,y.u0,y.v0,y.u1,y.v1,P,P,P,P,!1,y.glTexture,I)&&(p=-1)}}t.pipelines.postBatch(e)}}}},function(t,e){t.exports=function(t,e,n,r){var i=e.getRenderList();if(0!==i.length){var o=t.currentContext,s=n.alpha*e.alpha;if(0!==s){n.addToRenderList(e),o.globalCompositeOperation=t.blendModes[e.blendMode],o.imageSmoothingEnabled=!(!t.antialias||e.frame.source.scaleMode);var a=e.x-n.scrollX*e.scrollFactorX,u=e.y-n.scrollY*e.scrollFactorY;o.save(),r&&r.copyToContext(o);for(var c=n.roundPixels,h=0;h<i.length;h++){var l=i[h],f=l.flipX||l.flipY,d=l.frame,p=d.canvasData,v=d.x,g=d.y,m=1,y=1,b=l.alpha*s;0!==b&&(o.globalAlpha=b,f?(l.flipX&&(m=-1,v-=p.width),l.flipY&&(y=-1,g-=p.height),o.save(),o.translate(l.x+a,l.y+u),o.scale(m,y),o.drawImage(d.source.image,p.x,p.y,p.width,p.height,v,g,p.width,p.height),o.restore()):(c&&(v=Math.round(v),g=Math.round(g)),o.drawImage(d.source.image,p.x,p.y,p.width,p.height,v+l.x+a,g+l.y+u,p.width,p.height)))}o.restore()}}}},function(t,e,n){var r=n(1),i=n(1);r=n(1053),i=n(1054),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e){t.exports=function(t,e,n,r){n.addToRenderList(e);var i=e.list,o=i.length;if(0!==o){var s=e.localTransform;r?(s.loadIdentity(),s.multiply(r),s.translate(e.x,e.y),s.rotate(e.rotation),s.scale(e.scaleX,e.scaleY)):s.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),t.pipelines.preBatch(e);var a=-1!==e.blendMode;a||t.setBlendMode(0);for(var u=e.alpha,c=e.scrollFactorX,h=e.scrollFactorY,l=0;l<o;l++){var f=i[l];if(f.willRender(n)){var d,p,v,g;if(void 0!==f.alphaTopLeft)d=f.alphaTopLeft,p=f.alphaTopRight,v=f.alphaBottomLeft,g=f.alphaBottomRight;else{var m=f.alpha;d=m,p=m,v=m,g=m}var y=f.scrollFactorX,b=f.scrollFactorY;a||f.blendMode===t.currentBlendMode||t.setBlendMode(f.blendMode);var w=f.mask;w&&w.preRenderWebGL(t,f,n);var x=f.type;x!==t.currentType&&(t.newType=!0,t.currentType=x),t.nextTypeMatch=l<o-1&&i[l+1].type===t.currentType,f.setScrollFactor(y*c,b*h),f.setAlpha(d*u,p*u,v*u,g*u),f.renderWebGL(t,f,n,s),f.setAlpha(d,p,v,g),f.setScrollFactor(y,b),w&&w.postRenderWebGL(t,n),t.newType=!1}}t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(t,e,n,r){n.addToRenderList(e);var i=e.list;if(0!==i.length){var o=e.localTransform;r?(o.loadIdentity(),o.multiply(r),o.translate(e.x,e.y),o.rotate(e.rotation),o.scale(e.scaleX,e.scaleY)):o.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);var s=-1!==e.blendMode;s||t.setBlendMode(0);var a=e._alpha,u=e.scrollFactorX,c=e.scrollFactorY;e.mask&&e.mask.preRenderCanvas(t,null,n);for(var h=0;h<i.length;h++){var l=i[h];if(l.willRender(n)){var f=l.alpha,d=l.scrollFactorX,p=l.scrollFactorY;s||l.blendMode===t.currentBlendMode||t.setBlendMode(l.blendMode),l.setScrollFactor(d*u,p*c),l.setAlpha(f*a),l.renderCanvas(t,l,n,o),l.setAlpha(f),l.setScrollFactor(d,p)}}e.mask&&e.mask.postRenderCanvas(t)}}},function(t,e,n){var r=n(1),i=n(1);r=n(443),i=n(443),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e){t.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(t,e,n){var r=n(1),i=n(1);r=n(1058),i=n(1059),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(19),i=n(25),o=n(12),s=new i;t.exports=function(t,e,n,i){var a=e.text,u=a.length;if(0!==u){n.addToRenderList(e);var c=t.pipelines.set(e.pipeline,e),h=r(e,n,i),l=h.sprite,f=h.calc,d=s,p=e.cropWidth>0||e.cropHeight>0;p&&(c.flush(),t.pushScissor(f.tx,f.ty,e.cropWidth*f.scaleX,e.cropHeight*f.scaleY));var v,g,m=e.frame.glTexture,y=e.tintFill,b=o.getTintAppendFloatAlpha(e.tintTopLeft,n.alpha*e._alphaTL),w=o.getTintAppendFloatAlpha(e.tintTopRight,n.alpha*e._alphaTR),x=o.getTintAppendFloatAlpha(e.tintBottomLeft,n.alpha*e._alphaBL),_=o.getTintAppendFloatAlpha(e.tintBottomRight,n.alpha*e._alphaBR),T=c.setGameObject(e),E=0,S=0,k=0,A=0,O=e.letterSpacing,C=0,P=0,I=e.scrollX,R=e.scrollY,M=e.fontData,N=M.chars,L=M.lineHeight,D=e.fontSize/M.size,F=0,j=e._align,B=0,U=0,V=e.getTextBounds(!1);e.maxWidth>0&&(u=(a=V.wrappedText).length);var z=e._bounds.lines;1===j?U=(z.longest-z.lengths[0])/2:2===j&&(U=z.longest-z.lengths[0]);var G=n.roundPixels,Y=e.displayCallback,W=e.callbackData;t.pipelines.preBatch(e);for(var X=0;X<u;X++)if(10!==(k=a.charCodeAt(X))){if(v=N[k]){C=v.width,P=v.height;var H=v.xOffset+E-I,q=v.yOffset+S-R;if(null!==g){var K=v.kerning[A];H+=void 0!==K?K:0}if(E+=v.xAdvance+O,g=v,A=k,0!==C&&0!==P&&32!==k){if(D=e.fontSize/e.fontData.size,F=0,Y){W.color=0,W.tint.topLeft=b,W.tint.topRight=w,W.tint.bottomLeft=x,W.tint.bottomRight=_,W.index=X,W.charCode=k,W.x=H,W.y=q,W.scale=D,W.rotation=F,W.data=v.data;var $=Y(W);H=$.x,q=$.y,D=$.scale,F=$.rotation,$.color?(b=$.color,w=$.color,x=$.color,_=$.color):(b=$.tint.topLeft,w=$.tint.topRight,x=$.tint.bottomLeft,_=$.tint.bottomRight),b=o.getTintAppendFloatAlpha(b,n.alpha*e._alphaTL),w=o.getTintAppendFloatAlpha(w,n.alpha*e._alphaTR),x=o.getTintAppendFloatAlpha(x,n.alpha*e._alphaBL),_=o.getTintAppendFloatAlpha(_,n.alpha*e._alphaBR)}H*=D,q*=D,H-=e.displayOriginX,q-=e.displayOriginY,H+=U,d.applyITRS(H,q,F,D,D),f.multiply(d,l);var J=v.u0,Q=v.v0,Z=v.u1,tt=v.v1,et=C,nt=P,rt=l.e,it=l.f,ot=nt*l.c+l.e,st=nt*l.d+l.f,at=et*l.a+nt*l.c+l.e,ut=et*l.b+nt*l.d+l.f,ct=et*l.a+l.e,ht=et*l.b+l.f;G&&(rt=Math.round(rt),it=Math.round(it),ot=Math.round(ot),st=Math.round(st),at=Math.round(at),ut=Math.round(ut),ct=Math.round(ct),ht=Math.round(ht)),c.batchQuad(e,rt,it,ot,st,at,ut,ct,ht,J,Q,Z,tt,b,w,x,_,y,m,T)}}}else B++,1===j?U=(z.longest-z.lengths[B])/2:2===j&&(U=z.longest-z.lengths[B]),E=0,S+=L,g=null;p&&(c.flush(),t.popScissor()),t.pipelines.postBatch(e)}}},function(t,e,n){var r=n(30);t.exports=function(t,e,n,i){var o=e._text,s=o.length,a=t.currentContext;if(0!==s&&r(t,a,e,n,i)){n.addToRenderList(e);var u=e.fromAtlas?e.frame:e.texture.frames.__BASE,c=e.displayCallback,h=e.callbackData,l=e.fontData.chars,f=e.fontData.lineHeight,d=e._letterSpacing,p=0,v=0,g=0,m=null,y=0,b=0,w=0,x=0,_=0,T=0,E=null,S=0,k=e.frame.source.image,A=u.cutX,O=u.cutY,C=0,P=0,I=e._fontSize/e.fontData.size,R=e._align,M=0,N=0;e.getTextBounds(!1);var L=e._bounds.lines;1===R?N=(L.longest-L.lengths[0])/2:2===R&&(N=L.longest-L.lengths[0]),a.translate(-e.displayOriginX,-e.displayOriginY);var D=n.roundPixels;e.cropWidth>0&&e.cropHeight>0&&(a.beginPath(),a.rect(0,0,e.cropWidth,e.cropHeight),a.clip());for(var F=0;F<s;F++)if(P=I,C=0,10!==(g=o.charCodeAt(F))){if(m=l[g]){if(y=A+m.x,b=O+m.y,w=m.width,x=m.height,_=m.xOffset+p-e.scrollX,T=m.yOffset+v-e.scrollY,null!==E){var j=m.kerning[S];_+=void 0!==j?j:0}if(c){h.index=F,h.charCode=g,h.x=_,h.y=T,h.scale=P,h.rotation=C,h.data=m.data;var B=c(h);_=B.x,T=B.y,P=B.scale,C=B.rotation}_*=P,T*=P,_+=N,p+=m.xAdvance+d,E=m,S=g,0!==w&&0!==x&&32!==g&&(D&&(_=Math.round(_),T=Math.round(T)),a.save(),a.translate(_,T),a.rotate(C),a.scale(P,P),a.drawImage(k,y,b,w,x,0,0,w,x),a.restore())}}else M++,1===R?N=(L.longest-L.lengths[M])/2:2===R&&(N=L.longest-L.lengths[M]),p=0,v+=f,E=null;a.restore()}}},function(t,e,n){var r=n(1),i=n(1);r=n(1061),i=n(1062),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(19);t.exports=function(t,e,n,i){t.pipelines.clear();var o=r(e,n,i).calc;e.render.call(e,t,n,o),t.pipelines.rebind()}},function(t,e){},function(t,e,n){var r=n(1),i=n(1);r=n(1064),i=n(448),i=n(448),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(217),i=n(19),o=n(25),s=n(12),a=function(t,e,n){this.x=t,this.y=e,this.width=n},u=function(t,e,n){this.points=[],this.pointsLength=1,this.points[0]=new a(t,e,n)},c=[],h=new o;t.exports=function(t,e,n,o){if(0!==e.commandBuffer.length){n.addToRenderList(e);var l=t.pipelines.set(e.pipeline,e);t.pipelines.preBatch(e);for(var f=i(e,n,o).calc,d=h.loadIdentity(),p=e.commandBuffer,v=n.alpha*e.alpha,g=1,m=l.fillTint,y=l.strokeTint,b=0,w=0,x=0,_=2*Math.PI,T=[],E=0,S=!0,k=null,A=s.getTintAppendFloatAlpha,O=0;O<p.length;O++)switch(p[O]){case r.BEGIN_PATH:T.length=0,k=null,S=!0;break;case r.CLOSE_PATH:S=!1,k&&k.points.length&&k.points.push(k.points[0]);break;case r.FILL_PATH:for(E=0;E<T.length;E++)l.batchFillPath(T[E].points,d,f);break;case r.STROKE_PATH:for(E=0;E<T.length;E++)l.batchStrokePath(T[E].points,g,S,d,f);break;case r.LINE_STYLE:g=p[++O];var C=A(p[++O],p[++O]*v);y.TL=C,y.TR=C,y.BL=C,y.BR=C;break;case r.FILL_STYLE:var P=A(p[++O],p[++O]*v);m.TL=P,m.TR=P,m.BL=P,m.BR=P;break;case r.GRADIENT_FILL_STYLE:var I=p[++O]*v,R=p[++O]*v,M=p[++O]*v,N=p[++O]*v;m.TL=A(p[++O],I),m.TR=A(p[++O],R),m.BL=A(p[++O],M),m.BR=A(p[++O],N);break;case r.GRADIENT_LINE_STYLE:g=p[++O];var L=p[++O]*v;y.TL=A(p[++O],L),y.TR=A(p[++O],L),y.BL=A(p[++O],L),y.BR=A(p[++O],L);break;case r.ARC:var D=0,F=p[++O],j=p[++O],B=p[++O],U=p[++O],V=p[++O],z=p[++O],G=p[++O];for(V-=U,z?V<-_?V=-_:V>0&&(V=V%_-_):V>_?V=_:V<0&&(V=_+V%_),null===k&&(k=new u(F+Math.cos(U)*B,j+Math.sin(U)*B,g),T.push(k),D+=.01);D<1+G;)x=V*D+U,b=F+Math.cos(x)*B,w=j+Math.sin(x)*B,k.points.push(new a(b,w,g)),D+=.01;x=V+U,b=F+Math.cos(x)*B,w=j+Math.sin(x)*B,k.points.push(new a(b,w,g));break;case r.FILL_RECT:l.batchFillRect(p[++O],p[++O],p[++O],p[++O],d,f);break;case r.FILL_TRIANGLE:l.batchFillTriangle(p[++O],p[++O],p[++O],p[++O],p[++O],p[++O],d,f);break;case r.STROKE_TRIANGLE:l.batchStrokeTriangle(p[++O],p[++O],p[++O],p[++O],p[++O],p[++O],g,d,f);break;case r.LINE_TO:null!==k?k.points.push(new a(p[++O],p[++O],g)):(k=new u(p[++O],p[++O],g),T.push(k));break;case r.MOVE_TO:k=new u(p[++O],p[++O],g),T.push(k);break;case r.SAVE:c.push(d.copyToArray());break;case r.RESTORE:d.copyFromArray(c.pop());break;case r.TRANSLATE:F=p[++O],j=p[++O],d.translate(F,j);break;case r.SCALE:F=p[++O],j=p[++O],d.scale(F,j);break;case r.ROTATE:d.rotate(p[++O])}t.pipelines.postBatch(e)}}},function(t,e,n){var r=n(1),i=n(1);r=n(1066),i=n(1067),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e){t.exports=function(t,e,n,r){n.addToRenderList(e),e.pipeline.batchSprite(e,n,r)}},function(t,e){t.exports=function(t,e,n,r){n.addToRenderList(e),t.batchSprite(e,e.frame,n,r)}},function(t,e,n){var r=n(1),i=n(1);r=n(1069),i=n(1070),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e){t.exports=function(t,e,n,r){n.addToRenderList(e),this.pipeline.batchSprite(e,n,r)}},function(t,e){t.exports=function(t,e,n,r){n.addToRenderList(e),t.batchSprite(e,e.frame,n,r)}},function(t,e,n){var r=n(1),i=n(1);r=n(1072),i=n(1073),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e){t.exports=function(t,e,n){var r=e.list,i=r.length;if(0!==i){e.depthSort(),t.pipelines.preBatch(e);var o=-1!==e.blendMode;o||t.setBlendMode(0);for(var s=e.alpha,a=0;a<i;a++){var u=r[a];if(u.willRender(n)){var c,h,l,f;if(void 0!==u.alphaTopLeft)c=u.alphaTopLeft,h=u.alphaTopRight,l=u.alphaBottomLeft,f=u.alphaBottomRight;else{var d=u.alpha;c=d,h=d,l=d,f=d}o||u.blendMode===t.currentBlendMode||t.setBlendMode(u.blendMode);var p=u.mask;p&&p.preRenderWebGL(t,u,n);var v=u.type;v!==t.currentType&&(t.newType=!0,t.currentType=v),t.nextTypeMatch=a<i-1&&r[a+1].type===t.currentType,u.setAlpha(c*s,h*s,l*s,f*s),u.renderWebGL(t,u,n),u.setAlpha(c,h,l,f),p&&p.postRenderWebGL(t,n),t.newType=!1}}t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(t,e,n){var r=e.list;if(0!==r.length){e.depthSort();var i=-1!==e.blendMode;i||t.setBlendMode(0);var o=e._alpha;e.mask&&e.mask.preRenderCanvas(t,null,n);for(var s=0;s<r.length;s++){var a=r[s];if(a.willRender(n)){var u=a.alpha;i||a.blendMode===t.currentBlendMode||t.setBlendMode(a.blendMode),a.setAlpha(u*o),a.renderCanvas(t,a,n),a.setAlpha(u)}}e.mask&&e.mask.postRenderCanvas(t)}}},function(t,e,n){t.exports={EmitterOp:n(449),GravityWell:n(450),Particle:n(451),ParticleEmitter:n(452),ParticleEmitterManager:n(220),Zones:n(1078)}},function(t,e,n){var r=n(1),i=n(1);r=n(1076),i=n(1077),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(25),i=n(12),o=new r,s=new r,a=new r,u=new r;t.exports=function(t,e,n,r){var c=e.emitters.list,h=c.length;if(0!==h){var l=t.pipelines.set(e.pipeline),f=o,d=s,p=a,v=u;r?(v.loadIdentity(),v.multiply(r),v.translate(e.x,e.y),v.rotate(e.rotation),v.scale(e.scaleX,e.scaleY)):v.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);var g=n.roundPixels,m=e.defaultFrame.glTexture,y=i.getTintAppendFloatAlpha,b=l.setGameObject(e,e.defaultFrame);t.pipelines.preBatch(e);for(var w=0;w<h;w++){var x=c[w],_=x.alive,T=_.length;if(x.visible&&0!==T){n.addToRenderList(x);var E=x.scrollFactorX,S=x.scrollFactorY;t.setBlendMode(x.blendMode),x.mask&&(x.mask.preRenderWebGL(t,x,n),t.pipelines.set(e.pipeline));for(var k=0;k<T;k++){var A=_[k],O=A.alpha*n.alpha;if(!(O<=0)){p.applyITRS(A.x,A.y,A.rotation,A.scaleX,A.scaleY),f.copyFrom(n.matrix),f.multiplyWithOffset(v,-n.scrollX*E,-n.scrollY*S),p.e=A.x,p.f=A.y,f.multiply(p,d);var C=A.frame,P=-C.halfWidth,I=-C.halfHeight,R=P+C.width,M=I+C.height,N=d.getXRound(P,I,g),L=d.getYRound(P,I,g),D=d.getXRound(P,M,g),F=d.getYRound(P,M,g),j=d.getXRound(R,M,g),B=d.getYRound(R,M,g),U=d.getXRound(R,I,g),V=d.getYRound(R,I,g),z=y(A.tint,O);l.batchQuad(x,N,L,D,F,j,B,U,V,C.u0,C.v0,C.u1,C.v1,z,z,z,z,0,m,b)}}x.mask&&x.mask.postRenderWebGL(t,n)}}t.pipelines.postBatch(e)}}},function(t,e,n){var r=n(25),i=new r,o=new r,s=new r,a=new r;t.exports=function(t,e,n,r){var u=e.emitters.list,c=u.length;if(0!==c){var h=i.copyFrom(n.matrix),l=o,f=s,d=a;r?(d.loadIdentity(),d.multiply(r),d.translate(e.x,e.y),d.rotate(e.rotation),d.scale(e.scaleX,e.scaleY)):d.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY);for(var p=t.currentContext,v=n.roundPixels,g=0;g<c;g++){var m=u[g],y=m.alive,b=y.length;if(m.visible&&0!==b){n.addToRenderList(m);var w=m.scrollFactorX,x=m.scrollFactorY;p.save(),p.globalCompositeOperation=t.blendModes[m.blendMode];for(var _=0;_<b;_++){var T=y[_],E=T.alpha*n.alpha;if(!(E<=0)){f.applyITRS(T.x,T.y,T.rotation,T.scaleX,T.scaleY),h.copyFrom(n.matrix),h.multiplyWithOffset(d,-n.scrollX*w,-n.scrollY*x),f.e=T.x,f.f=T.y,h.multiply(f,l);var S=T.frame,k=S.canvasData,A=-S.halfWidth,O=-S.halfHeight;p.globalAlpha=E,p.save(),l.setToContext(p),v&&(A=Math.round(A),O=Math.round(O)),p.imageSmoothingEnabled=!(!t.antialias||S.source.scaleMode),p.drawImage(S.source.image,k.x,k.y,k.width,k.height,A,O,k.width,k.height),p.restore()}}p.restore()}}}}},function(t,e,n){t.exports={DeathZone:n(453),EdgeZone:n(454),RandomZone:n(456)}},function(t,e,n){var r=n(1),i=n(1);r=n(1080),i=n(1081),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(12);t.exports=function(t,e,n,i){n.addToRenderList(e);var o=n.alpha,s=e.renderTarget,a=s.width,u=s.height,c=r.getTintAppendFloatAlpha,h=t.pipelines.set(e.pipeline),l=h.setTexture2D(s.texture);t.pipelines.preBatch(e),h.batchTexture(e,s.texture,a,u,e.x,e.y,a,u,e.scaleX,e.scaleY,e.rotation,e.flipX,!e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,a,u,c(e.tintTopLeft,o*e._alphaTL),c(e.tintTopRight,o*e._alphaTR),c(e.tintBottomLeft,o*e._alphaBL),c(e.tintBottomRight,o*e._alphaBR),e.tintFill,0,0,n,i,!0,l),t.resetTextures(),t.pipelines.postBatch(e)}},function(t,e){t.exports=function(t,e,n,r){n.addToRenderList(e),t.batchSprite(e,e.frame,n,r)}},function(t,e,n){var r=n(1083),i=n(17),o={Parse:n(1084)};o=i(!1,o,r),t.exports=o},function(t,e){t.exports={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:"ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",TEXT_SET7:"AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:"ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789"}},function(t,e,n){var r=n(6);t.exports=function(t,e){var n=e.width,i=e.height,o=Math.floor(n/2),s=Math.floor(i/2),a=r(e,"chars","");if(""!==a){var u=r(e,"image",""),c=t.sys.textures.getFrame(u),h=c.cutX,l=c.cutY,f=c.source.width,d=c.source.height,p=r(e,"offset.x",0),v=r(e,"offset.y",0),g=r(e,"spacing.x",0),m=r(e,"spacing.y",0),y=r(e,"lineSpacing",0),b=r(e,"charsPerRow",null);null===b&&(b=f/n)>a.length&&(b=a.length);for(var w=p,x=v,_={retroFont:!0,font:u,size:n,lineHeight:i+y,chars:{}},T=0,E=0;E<a.length;E++){var S=a.charCodeAt(E),k=(h+w)/f,A=(l+x)/d,O=(h+w+n)/f,C=(l+x+i)/d;_.chars[S]={x:w,y:x,width:n,height:i,centerX:o,centerY:s,xOffset:0,yOffset:0,xAdvance:n,data:{},kerning:{},u0:k,v0:A,u1:O,v1:C},++T===b?(T=0,w=p,x+=i+m):w+=n+g}return{data:_,frame:null,texture:u}}}},function(t,e,n){var r=n(1),i=n(1);r=n(1086),i=n(1087),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(19),i=n(12);t.exports=function(t,e,n,o){n.addToRenderList(e);var s=t.pipelines.set(e.pipeline,e),a=r(e,n,o).calc,u=e.vertices,c=e.uv,h=e.colors,l=e.alphas,f=e.alpha,d=i.getTintAppendFloatAlpha,p=n.roundPixels,v=u.length,g=Math.floor(.5*v);s.flush(),t.pipelines.preBatch(e);var m=s.setGameObject(e),y=s.vertexViewF32,b=s.vertexViewU32,w=s.vertexCount*s.currentShader.vertexComponentCount-1,x=0,_=e.tintFill;e.dirty&&e.updateVertices();for(var T=e.debugCallback,E=[],S=0;S<v;S+=2){var k=u[S+0],A=u[S+1],O=k*a.a+A*a.c+a.e,C=k*a.b+A*a.d+a.f;p&&(O=Math.round(O),C=Math.round(C)),y[++w]=O,y[++w]=C,y[++w]=c[S+0],y[++w]=c[S+1],y[++w]=m,y[++w]=_,b[++w]=d(h[x],n.alpha*(l[x]*f)),x++,T&&(E[S+0]=O,E[S+1]=C)}T&&T.call(e,e,v,E),s.vertexCount+=g,t.pipelines.postBatch(e)}},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(1),i=n(1);r=n(1089),i=n(1090),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(12);t.exports=function(t,e,n,i){if(0!==e.width&&0!==e.height){n.addToRenderList(e);var o=e.frame,s=o.width,a=o.height,u=r.getTintAppendFloatAlpha,c=t.pipelines.set(e.pipeline,e),h=c.setTexture2D(o.glTexture,e);t.pipelines.preBatch(e),c.batchTexture(e,o.glTexture,s,a,e.x,e.y,s/e.style.resolution,a/e.style.resolution,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.displayOriginX,e.displayOriginY,0,0,s,a,u(e.tintTopLeft,n.alpha*e._alphaTL),u(e.tintTopRight,n.alpha*e._alphaTR),u(e.tintBottomLeft,n.alpha*e._alphaBL),u(e.tintBottomRight,n.alpha*e._alphaBR),e.tintFill,0,0,n,i,!1,h),t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(t,e,n,r){0!==e.width&&0!==e.height&&(n.addToRenderList(e),t.batchSprite(e,e.frame,n,r))}},function(t,e,n){var r=n(1),i=n(1);r=n(1092),i=n(1093),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(12);t.exports=function(t,e,n,i){e.updateCanvas();var o=e.width,s=e.height;if(0!==o&&0!==s){n.addToRenderList(e),t.pipelines.preBatch(e);var a=r.getTintAppendFloatAlpha,u=t.pipelines.set(e.pipeline,e),c=u.setTexture2D(e.fillPattern,e);u.batchTexture(e,e.fillPattern,e.displayFrame.width*e.tileScaleX,e.displayFrame.height*e.tileScaleY,e.x,e.y,o,s,e.scaleX,e.scaleY,e.rotation,e.flipX,e.flipY,e.scrollFactorX,e.scrollFactorY,e.originX*o,e.originY*s,0,0,o,s,a(e.tintTopLeft,n.alpha*e._alphaTL),a(e.tintTopRight,n.alpha*e._alphaTR),a(e.tintBottomLeft,n.alpha*e._alphaBL),a(e.tintBottomRight,n.alpha*e._alphaBR),e.tintFill,e.tilePositionX%e.displayFrame.width/e.displayFrame.width,e.tilePositionY%e.displayFrame.height/e.displayFrame.height,n,i,!1,c),t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(t,e,n,r){e.updateCanvas(),n.addToRenderList(e),t.batchSprite(e,e.frame,n,r)}},function(t,e,n){var r=n(1),i=n(1);r=n(1095),i=n(1096),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e){t.exports=function(t,e,n,r){e.videoTexture&&(n.addToRenderList(e),e.pipeline.batchSprite(e,n,r))}},function(t,e){t.exports=function(t,e,n,r){e.videoTexture&&(n.addToRenderList(e),t.batchSprite(e,e.frame,n,r))}},function(t,e,n){var r=n(1),i=n(1);r=n(1098),i=n(1099),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(19),i=n(114),o=n(81);t.exports=function(t,e,n,s){n.addToRenderList(e);var a=t.pipelines.set(e.pipeline),u=r(e,n,s),c=a.calcMatrix.copyFrom(u.calc),h=e._displayOriginX,l=e._displayOriginY,f=n.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&i(a,c,e,f,h,l),e.isStroked&&o(a,e,f,h,l),t.pipelines.postBatch(e)}},function(t,e,n){var r=n(36),i=n(48),o=n(60),s=n(30);t.exports=function(t,e,n,a){n.addToRenderList(e);var u=t.currentContext;if(s(t,u,e,n,a)){var c=e.radius;u.beginPath(),u.arc(c-e.originX*(2*c),c-e.originY*(2*c),c,r(e._startAngle),r(e._endAngle),e.anticlockwise),e.closePath&&u.closePath(),e.isFilled&&(i(u,e),u.fill()),e.isStroked&&(o(u,e),u.stroke()),u.restore()}}},function(t,e,n){var r=n(1),i=n(1);r=n(1101),i=n(1102),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(114),i=n(19),o=n(81);t.exports=function(t,e,n,s){n.addToRenderList(e);var a=t.pipelines.set(e.pipeline),u=i(e,n,s),c=a.calcMatrix.copyFrom(u.calc),h=e._displayOriginX+e._curveBounds.x,l=e._displayOriginY+e._curveBounds.y,f=n.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&r(a,c,e,f,h,l),e.isStroked&&o(a,e,f,h,l),t.pipelines.postBatch(e)}},function(t,e,n){var r=n(48),i=n(60),o=n(30);t.exports=function(t,e,n,s){n.addToRenderList(e);var a=t.currentContext;if(o(t,a,e,n,s)){var u=e._displayOriginX+e._curveBounds.x,c=e._displayOriginY+e._curveBounds.y,h=e.pathData,l=h.length-1,f=h[0]-u,d=h[1]-c;a.beginPath(),a.moveTo(f,d),e.closePath||(l-=2);for(var p=2;p<l;p+=2){var v=h[p]-u,g=h[p+1]-c;a.lineTo(v,g)}e.closePath&&a.closePath(),e.isFilled&&(r(a,e),a.fill()),e.isStroked&&(i(a,e),a.stroke()),a.restore()}}},function(t,e,n){var r=n(1),i=n(1);r=n(1104),i=n(1105),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(114),i=n(19),o=n(81);t.exports=function(t,e,n,s){n.addToRenderList(e);var a=t.pipelines.set(e.pipeline),u=i(e,n,s),c=a.calcMatrix.copyFrom(u.calc),h=e._displayOriginX,l=e._displayOriginY,f=n.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&r(a,c,e,f,h,l),e.isStroked&&o(a,e,f,h,l),t.pipelines.postBatch(e)}},function(t,e,n){var r=n(48),i=n(60),o=n(30);t.exports=function(t,e,n,s){n.addToRenderList(e);var a=t.currentContext;if(o(t,a,e,n,s)){var u=e._displayOriginX,c=e._displayOriginY,h=e.pathData,l=h.length-1,f=h[0]-u,d=h[1]-c;a.beginPath(),a.moveTo(f,d),e.closePath||(l-=2);for(var p=2;p<l;p+=2){var v=h[p]-u,g=h[p+1]-c;a.lineTo(v,g)}a.closePath(),e.isFilled&&(r(a,e),a.fill()),e.isStroked&&(i(a,e),a.stroke()),a.restore()}}},function(t,e,n){var r=n(1),i=n(1);r=n(1107),i=n(1108),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(19),i=n(12);t.exports=function(t,e,n,o){n.addToRenderList(e);var s=t.pipelines.set(e.pipeline),a=r(e,n,o);s.calcMatrix.copyFrom(a.calc).translate(-e._displayOriginX,-e._displayOriginY);var u,c,h=n.alpha*e.alpha,l=e.width,f=e.height,d=e.cellWidth,p=e.cellHeight,v=Math.ceil(l/d),g=Math.ceil(f/p),m=d,y=p,b=d-(v*d-l),w=p-(g*p-f),x=e.showCells,_=e.showAltCells,T=e.showOutline,E=0,S=0,k=0,A=0,O=0;if(T&&(m--,y--,b===d&&b--,w===p&&w--),t.pipelines.preBatch(e),x&&e.fillAlpha>0)for(u=s.fillTint,c=i.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*h),u.TL=c,u.TR=c,u.BL=c,u.BR=c,S=0;S<g;S++)for(_&&(k=S%2),E=0;E<v;E++)_&&k?k=0:(k++,A=E<v-1?m:b,O=S<g-1?y:w,s.batchFillRect(E*d,S*p,A,O));if(_&&e.altFillAlpha>0)for(u=s.fillTint,c=i.getTintAppendFloatAlpha(e.altFillColor,e.altFillAlpha*h),u.TL=c,u.TR=c,u.BL=c,u.BR=c,S=0;S<g;S++)for(_&&(k=S%2),E=0;E<v;E++)!_||k?(k=0,A=E<v-1?m:b,O=S<g-1?y:w,s.batchFillRect(E*d,S*p,A,O)):k=1;if(T&&e.outlineFillAlpha>0){var C=s.strokeTint,P=i.getTintAppendFloatAlpha(e.outlineFillColor,e.outlineFillAlpha*h);for(C.TL=P,C.TR=P,C.BL=P,C.BR=P,E=1;E<v;E++){var I=E*d;s.batchLine(I,0,I,f,1,1,1,0,!1)}for(S=1;S<g;S++){var R=S*p;s.batchLine(0,R,l,R,1,1,1,0,!1)}}t.pipelines.postBatch(e)}},function(t,e,n){var r=n(48),i=n(60),o=n(30);t.exports=function(t,e,n,s){n.addToRenderList(e);var a=t.currentContext;if(o(t,a,e,n,s)){var u=-e._displayOriginX,c=-e._displayOriginY,h=n.alpha*e.alpha,l=e.width,f=e.height,d=e.cellWidth,p=e.cellHeight,v=Math.ceil(l/d),g=Math.ceil(f/p),m=d,y=p,b=d-(v*d-l),w=p-(g*p-f),x=e.showCells,_=e.showAltCells,T=e.showOutline,E=0,S=0,k=0,A=0,O=0;if(T&&(m--,y--,b===d&&b--,w===p&&w--),x&&e.fillAlpha>0)for(r(a,e),S=0;S<g;S++)for(_&&(k=S%2),E=0;E<v;E++)_&&k?k=0:(k++,A=E<v-1?m:b,O=S<g-1?y:w,a.fillRect(u+E*d,c+S*p,A,O));if(_&&e.altFillAlpha>0)for(r(a,e,e.altFillColor,e.altFillAlpha*h),S=0;S<g;S++)for(_&&(k=S%2),E=0;E<v;E++)!_||k?(k=0,A=E<v-1?m:b,O=S<g-1?y:w,a.fillRect(u+E*d,c+S*p,A,O)):k=1;if(T&&e.outlineFillAlpha>0){for(i(a,e,e.outlineFillColor,e.outlineFillAlpha*h),E=1;E<v;E++){var C=E*d;a.beginPath(),a.moveTo(C+u,c),a.lineTo(C+u,f+c),a.stroke()}for(S=1;S<g;S++){var P=S*p;a.beginPath(),a.moveTo(u,P+c),a.lineTo(u+l,P+c),a.stroke()}}a.restore()}}},function(t,e,n){var r=n(1),i=n(1);r=n(1110),i=n(1111),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(19),i=n(12);t.exports=function(t,e,n,o){n.addToRenderList(e);var s,a,u,c,h,l,f,d,p,v=t.pipelines.set(e.pipeline),g=r(e,n,o),m=v.calcMatrix.copyFrom(g.calc),y=e.width,b=e.height,w=y/2,x=y/e.projection,_=n.alpha*e.alpha;e.isFilled&&(t.pipelines.preBatch(e),e.showTop&&(s=i.getTintAppendFloatAlpha(e.fillTop,_),a=m.getX(-w,-b),u=m.getY(-w,-b),c=m.getX(0,-x-b),h=m.getY(0,-x-b),l=m.getX(w,-b),f=m.getY(w,-b),d=m.getX(0,x-b),p=m.getY(0,x-b),v.batchQuad(e,a,u,c,h,l,f,d,p,0,0,1,1,s,s,s,s,2)),e.showLeft&&(s=i.getTintAppendFloatAlpha(e.fillLeft,_),a=m.getX(-w,0),u=m.getY(-w,0),c=m.getX(0,x),h=m.getY(0,x),l=m.getX(0,x-b),f=m.getY(0,x-b),d=m.getX(-w,-b),p=m.getY(-w,-b),v.batchQuad(e,a,u,c,h,l,f,d,p,0,0,1,1,s,s,s,s,2)),e.showRight&&(s=i.getTintAppendFloatAlpha(e.fillRight,_),a=m.getX(w,0),u=m.getY(w,0),c=m.getX(0,x),h=m.getY(0,x),l=m.getX(0,x-b),f=m.getY(0,x-b),d=m.getX(w,-b),p=m.getY(w,-b),v.batchQuad(e,a,u,c,h,l,f,d,p,0,0,1,1,s,s,s,s,2)),t.pipelines.postBatch(e))}},function(t,e,n){var r=n(48),i=n(30);t.exports=function(t,e,n,o){n.addToRenderList(e);var s=t.currentContext;if(i(t,s,e,n,o)&&e.isFilled){var a=e.width,u=e.height,c=a/2,h=a/e.projection;e.showTop&&(r(s,e,e.fillTop),s.beginPath(),s.moveTo(-c,-u),s.lineTo(0,-h-u),s.lineTo(c,-u),s.lineTo(c,-1),s.lineTo(0,h-1),s.lineTo(-c,-1),s.lineTo(-c,-u),s.fill()),e.showLeft&&(r(s,e,e.fillLeft),s.beginPath(),s.moveTo(-c,0),s.lineTo(0,h),s.lineTo(0,h-u),s.lineTo(-c,-u),s.lineTo(-c,0),s.fill()),e.showRight&&(r(s,e,e.fillRight),s.beginPath(),s.moveTo(c,0),s.lineTo(0,h),s.lineTo(0,h-u),s.lineTo(c,-u),s.lineTo(c,0),s.fill()),s.restore()}}},function(t,e,n){var r=n(1),i=n(1);r=n(1113),i=n(1114),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(19),i=n(12);t.exports=function(t,e,n,o){n.addToRenderList(e);var s=t.pipelines.set(e.pipeline),a=r(e,n,o),u=s.calcMatrix.copyFrom(a.calc),c=e.width,h=e.height,l=c/2,f=c/e.projection,d=e.isReversed,p=n.alpha*e.alpha;if(e.isFilled){var v,g,m,y,b,w,x;if(t.pipelines.preBatch(e),e.showTop&&d){v=i.getTintAppendFloatAlpha(e.fillTop,p),g=u.getX(-l,-h),m=u.getY(-l,-h),y=u.getX(0,-f-h),b=u.getY(0,-f-h),w=u.getX(l,-h),x=u.getY(l,-h);var _=u.getX(0,f-h),T=u.getY(0,f-h);s.batchQuad(e,g,m,y,b,w,x,_,T,0,0,1,1,v,v,v,v,2)}e.showLeft&&(v=i.getTintAppendFloatAlpha(e.fillLeft,p),d?(g=u.getX(-l,-h),m=u.getY(-l,-h),y=u.getX(0,f),b=u.getY(0,f),w=u.getX(0,f-h),x=u.getY(0,f-h)):(g=u.getX(-l,0),m=u.getY(-l,0),y=u.getX(0,f),b=u.getY(0,f),w=u.getX(0,f-h),x=u.getY(0,f-h)),s.batchTri(e,g,m,y,b,w,x,0,0,1,1,v,v,v,2)),e.showRight&&(v=i.getTintAppendFloatAlpha(e.fillRight,p),d?(g=u.getX(l,-h),m=u.getY(l,-h),y=u.getX(0,f),b=u.getY(0,f),w=u.getX(0,f-h),x=u.getY(0,f-h)):(g=u.getX(l,0),m=u.getY(l,0),y=u.getX(0,f),b=u.getY(0,f),w=u.getX(0,f-h),x=u.getY(0,f-h)),s.batchTri(e,g,m,y,b,w,x,0,0,1,1,v,v,v,2)),t.pipelines.postBatch(e)}}},function(t,e,n){var r=n(48),i=n(30);t.exports=function(t,e,n,o){n.addToRenderList(e);var s=t.currentContext;if(i(t,s,e,n,o)&&e.isFilled){var a=e.width,u=e.height,c=a/2,h=a/e.projection,l=e.isReversed;e.showTop&&l&&(r(s,e,e.fillTop),s.beginPath(),s.moveTo(-c,-u),s.lineTo(0,-h-u),s.lineTo(c,-u),s.lineTo(0,h-u),s.fill()),e.showLeft&&(r(s,e,e.fillLeft),s.beginPath(),l?(s.moveTo(-c,-u),s.lineTo(0,h),s.lineTo(0,h-u)):(s.moveTo(-c,0),s.lineTo(0,h),s.lineTo(0,h-u)),s.fill()),e.showRight&&(r(s,e,e.fillRight),s.beginPath(),l?(s.moveTo(c,-u),s.lineTo(0,h),s.lineTo(0,h-u)):(s.moveTo(c,0),s.lineTo(0,h),s.lineTo(0,h-u)),s.fill()),s.restore()}}},function(t,e,n){var r=n(1),i=n(1);r=n(1116),i=n(1117),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(19),i=n(12);t.exports=function(t,e,n,o){n.addToRenderList(e);var s=t.pipelines.set(e.pipeline),a=r(e,n,o);s.calcMatrix.copyFrom(a.calc);var u=e._displayOriginX,c=e._displayOriginY,h=n.alpha*e.alpha;if(t.pipelines.preBatch(e),e.isStroked){var l=s.strokeTint,f=i.getTintAppendFloatAlpha(e.strokeColor,e.strokeAlpha*h);l.TL=f,l.TR=f,l.BL=f,l.BR=f;var d=e._startWidth,p=e._endWidth;s.batchLine(e.geom.x1-u,e.geom.y1-c,e.geom.x2-u,e.geom.y2-c,d,p,1,0,!1,a.sprite,a.camera)}t.pipelines.postBatch(e)}},function(t,e,n){var r=n(60),i=n(30);t.exports=function(t,e,n,o){n.addToRenderList(e);var s=t.currentContext;if(i(t,s,e,n,o)){var a=e._displayOriginX,u=e._displayOriginY;e.isStroked&&(r(s,e),s.beginPath(),s.moveTo(e.geom.x1-a,e.geom.y1-u),s.lineTo(e.geom.x2-a,e.geom.y2-u),s.stroke()),s.restore()}}},function(t,e,n){var r=n(1),i=n(1);r=n(1119),i=n(1120),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(114),i=n(19),o=n(81);t.exports=function(t,e,n,s){n.addToRenderList(e);var a=t.pipelines.set(e.pipeline),u=i(e,n,s),c=a.calcMatrix.copyFrom(u.calc),h=e._displayOriginX,l=e._displayOriginY,f=n.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&r(a,c,e,f,h,l),e.isStroked&&o(a,e,f,h,l),t.pipelines.postBatch(e)}},function(t,e,n){var r=n(48),i=n(60),o=n(30);t.exports=function(t,e,n,s){n.addToRenderList(e);var a=t.currentContext;if(o(t,a,e,n,s)){var u=e._displayOriginX,c=e._displayOriginY,h=e.pathData,l=h.length-1,f=h[0]-u,d=h[1]-c;a.beginPath(),a.moveTo(f,d),e.closePath||(l-=2);for(var p=2;p<l;p+=2){var v=h[p]-u,g=h[p+1]-c;a.lineTo(v,g)}a.closePath(),e.isFilled&&(r(a,e),a.fill()),e.isStroked&&(i(a,e),a.stroke()),a.restore()}}},function(t,e,n){var r=n(1),i=n(1);r=n(1122),i=n(1123),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(19),i=n(81),o=n(12);t.exports=function(t,e,n,s){n.addToRenderList(e);var a=t.pipelines.set(e.pipeline),u=r(e,n,s);a.calcMatrix.copyFrom(u.calc);var c=e._displayOriginX,h=e._displayOriginY,l=n.alpha*e.alpha;if(t.pipelines.preBatch(e),e.isFilled){var f=a.fillTint,d=o.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*l);f.TL=d,f.TR=d,f.BL=d,f.BR=d,a.batchFillRect(-c,-h,e.width,e.height)}e.isStroked&&i(a,e,l,c,h),t.pipelines.postBatch(e)}},function(t,e,n){var r=n(48),i=n(60),o=n(30);t.exports=function(t,e,n,s){n.addToRenderList(e);var a=t.currentContext;if(o(t,a,e,n,s)){var u=e._displayOriginX,c=e._displayOriginY;e.isFilled&&(r(a,e),a.fillRect(-u,-c,e.width,e.height)),e.isStroked&&(i(a,e),a.beginPath(),a.rect(-u,-c,e.width,e.height),a.stroke()),a.restore()}}},function(t,e,n){var r=n(1),i=n(1);r=n(1125),i=n(1126),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(114),i=n(19),o=n(81);t.exports=function(t,e,n,s){n.addToRenderList(e);var a=t.pipelines.set(e.pipeline),u=i(e,n,s),c=a.calcMatrix.copyFrom(u.calc),h=e._displayOriginX,l=e._displayOriginY,f=n.alpha*e.alpha;t.pipelines.preBatch(e),e.isFilled&&r(a,c,e,f,h,l),e.isStroked&&o(a,e,f,h,l),t.pipelines.postBatch(e)}},function(t,e,n){var r=n(48),i=n(60),o=n(30);t.exports=function(t,e,n,s){n.addToRenderList(e);var a=t.currentContext;if(o(t,a,e,n,s)){var u=e._displayOriginX,c=e._displayOriginY,h=e.pathData,l=h.length-1,f=h[0]-u,d=h[1]-c;a.beginPath(),a.moveTo(f,d),e.closePath||(l-=2);for(var p=2;p<l;p+=2){var v=h[p]-u,g=h[p+1]-c;a.lineTo(v,g)}a.closePath(),e.isFilled&&(r(a,e),a.fill()),e.isStroked&&(i(a,e),a.stroke()),a.restore()}}},function(t,e,n){var r=n(1),i=n(1);r=n(1128),i=n(1129),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(19),i=n(81),o=n(12);t.exports=function(t,e,n,s){n.addToRenderList(e);var a=t.pipelines.set(e.pipeline),u=r(e,n,s);a.calcMatrix.copyFrom(u.calc);var c=e._displayOriginX,h=e._displayOriginY,l=n.alpha*e.alpha;if(t.pipelines.preBatch(e),e.isFilled){var f=a.fillTint,d=o.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*l);f.TL=d,f.TR=d,f.BL=d,f.BR=d;var p=e.geom.x1-c,v=e.geom.y1-h,g=e.geom.x2-c,m=e.geom.y2-h,y=e.geom.x3-c,b=e.geom.y3-h;a.batchFillTriangle(p,v,g,m,y,b,u.sprite,u.camera)}e.isStroked&&i(a,e,l,c,h),t.pipelines.postBatch(e)}},function(t,e,n){var r=n(48),i=n(60),o=n(30);t.exports=function(t,e,n,s){n.addToRenderList(e);var a=t.currentContext;if(o(t,a,e,n,s)){var u=e._displayOriginX,c=e._displayOriginY,h=e.geom.x1-u,l=e.geom.y1-c,f=e.geom.x2-u,d=e.geom.y2-c,p=e.geom.x3-u,v=e.geom.y3-c;a.beginPath(),a.moveTo(h,l),a.lineTo(f,d),a.lineTo(p,v),a.closePath(),e.isFilled&&(r(a,e),a.fill()),e.isStroked&&(i(a,e),a.stroke()),a.restore()}}},function(t,e,n){var r=n(213);n(5).register("blitter",(function(t,e,n,i){return this.displayList.add(new r(this.scene,t,e,n,i))}))},function(t,e,n){var r=n(214);n(5).register("container",(function(t,e,n){return this.displayList.add(new r(this.scene,t,e,n))}))},function(t,e,n){var r=n(442);n(5).register("dom",(function(t,e,n,i,o){var s=new r(this.scene,t,e,n,i,o);return this.displayList.add(s),s}))},function(t,e,n){var r=n(215);n(5).register("dynamicBitmapText",(function(t,e,n,i,o){return this.displayList.add(new r(this.scene,t,e,n,i,o))}))},function(t,e,n){var r=n(444);n(5).register("extern",(function(){var t=new r(this.scene);return this.displayList.add(t),t}))},function(t,e,n){var r=n(216);n(5).register("graphics",(function(t){return this.displayList.add(new r(this.scene,t))}))},function(t,e,n){var r=n(113);n(5).register("group",(function(t,e){return this.updateList.add(new r(this.scene,t,e))}))},function(t,e,n){var r=n(125);n(5).register("image",(function(t,e,n,i){return this.displayList.add(new r(this.scene,t,e,n,i))}))},function(t,e,n){var r=n(219);n(5).register("layer",(function(t){return this.displayList.add(new r(this.scene,t))}))},function(t,e,n){var r=n(5),i=n(220);r.register("particles",(function(t,e,n){return this.displayList.add(new i(this.scene,t,e,n))}))},function(t,e,n){var r=n(5),i=n(457);r.register("follower",(function(t,e,n,r,o){var s=new i(this.scene,t,e,n,r,o);return this.displayList.add(s),this.updateList.add(s),s}))},function(t,e,n){var r=n(5),i=n(221);r.register("renderTexture",(function(t,e,n,r,o,s){return this.displayList.add(new i(this.scene,t,e,n,r,o,s))}))},function(t,e,n){var r=n(223);n(5).register("rope",(function(t,e,n,i,o,s,a,u){return this.displayList.add(new r(this.scene,t,e,n,i,o,s,a,u))}))},function(t,e,n){var r=n(5),i=n(73);r.register("sprite",(function(t,e,n,r){var o=new i(this.scene,t,e,n,r);return this.displayList.add(o),o}))},function(t,e,n){var r=n(148);n(5).register("bitmapText",(function(t,e,n,i,o,s){return this.displayList.add(new r(this.scene,t,e,n,i,o,s))}))},function(t,e,n){var r=n(224);n(5).register("text",(function(t,e,n,i){return this.displayList.add(new r(this.scene,t,e,n,i))}))},function(t,e,n){var r=n(225);n(5).register("tileSprite",(function(t,e,n,i,o,s){return this.displayList.add(new r(this.scene,t,e,n,i,o,s))}))},function(t,e,n){var r=n(129);n(5).register("zone",(function(t,e,n,i){return this.displayList.add(new r(this.scene,t,e,n,i))}))},function(t,e,n){var r=n(226);n(5).register("video",(function(t,e,n){return this.displayList.add(new r(this.scene,t,e,n))}))},function(t,e,n){var r=n(461),i=n(5);i.register("arc",(function(t,e,n,i,o,s,a,u){return this.displayList.add(new r(this.scene,t,e,n,i,o,s,a,u))})),i.register("circle",(function(t,e,n,i,o){return this.displayList.add(new r(this.scene,t,e,n,0,360,!1,i,o))}))},function(t,e,n){var r=n(5),i=n(462);r.register("curve",(function(t,e,n,r,o){return this.displayList.add(new i(this.scene,t,e,n,r,o))}))},function(t,e,n){var r=n(463);n(5).register("ellipse",(function(t,e,n,i,o,s){return this.displayList.add(new r(this.scene,t,e,n,i,o,s))}))},function(t,e,n){var r=n(5),i=n(464);r.register("grid",(function(t,e,n,r,o,s,a,u,c,h){return this.displayList.add(new i(this.scene,t,e,n,r,o,s,a,u,c,h))}))},function(t,e,n){var r=n(5),i=n(465);r.register("isobox",(function(t,e,n,r,o,s,a){return this.displayList.add(new i(this.scene,t,e,n,r,o,s,a))}))},function(t,e,n){var r=n(5),i=n(466);r.register("isotriangle",(function(t,e,n,r,o,s,a,u){return this.displayList.add(new i(this.scene,t,e,n,r,o,s,a,u))}))},function(t,e,n){var r=n(5),i=n(467);r.register("line",(function(t,e,n,r,o,s,a,u){return this.displayList.add(new i(this.scene,t,e,n,r,o,s,a,u))}))},function(t,e,n){var r=n(5),i=n(468);r.register("polygon",(function(t,e,n,r,o){return this.displayList.add(new i(this.scene,t,e,n,r,o))}))},function(t,e,n){var r=n(5),i=n(473);r.register("rectangle",(function(t,e,n,r,o,s){return this.displayList.add(new i(this.scene,t,e,n,r,o,s))}))},function(t,e,n){var r=n(474);n(5).register("star",(function(t,e,n,i,o,s,a){return this.displayList.add(new r(this.scene,t,e,n,i,o,s,a))}))},function(t,e,n){var r=n(5),i=n(475);r.register("triangle",(function(t,e,n,r,o,s,a,u,c,h){return this.displayList.add(new i(this.scene,t,e,n,r,o,s,a,u,c,h))}))},function(t,e,n){var r=n(213),i=n(28),o=n(16),s=n(13);o.register("blitter",(function(t,e){void 0===t&&(t={});var n=s(t,"key",null),o=s(t,"frame",null),a=new r(this.scene,0,0,n,o);return void 0!==e&&(t.add=e),i(this.scene,a,t),a}))},function(t,e,n){var r=n(28),i=n(214),o=n(16),s=n(13);o.register("container",(function(t,e){void 0===t&&(t={});var n=s(t,"x",0),o=s(t,"y",0),a=s(t,"children",null),u=new i(this.scene,n,o,a);return void 0!==e&&(t.add=e),r(this.scene,u,t),u}))},function(t,e,n){var r=n(215),i=n(28),o=n(16),s=n(13);o.register("dynamicBitmapText",(function(t,e){void 0===t&&(t={});var n=s(t,"font",""),o=s(t,"text",""),a=s(t,"size",!1),u=new r(this.scene,0,0,n,o,a);return void 0!==e&&(t.add=e),i(this.scene,u,t),u}))},function(t,e,n){var r=n(16),i=n(216);r.register("graphics",(function(t,e){void 0===t&&(t={}),void 0!==e&&(t.add=e);var n=new i(this.scene,t);return t.add&&this.scene.sys.displayList.add(n),n}))},function(t,e,n){var r=n(16),i=n(113);r.register("group",(function(t){return new i(this.scene,null,t)}))},function(t,e,n){var r=n(28),i=n(16),o=n(13),s=n(125);i.register("image",(function(t,e){void 0===t&&(t={});var n=o(t,"key",null),i=o(t,"frame",null),a=new s(this.scene,0,0,n,i);return void 0!==e&&(t.add=e),r(this.scene,a,t),a}))},function(t,e,n){var r=n(28),i=n(219),o=n(16),s=n(13);o.register("layer",(function(t,e){void 0===t&&(t={});var n=s(t,"children",null),o=new i(this.scene,n);return void 0!==e&&(t.add=e),r(this.scene,o,t),o}))},function(t,e,n){var r=n(16),i=n(13),o=n(2),s=n(220);r.register("particles",(function(t,e){void 0===t&&(t={});var n=i(t,"key",null),r=i(t,"frame",null),a=o(t,"emitters",null),u=new s(this.scene,n,r,a);return void 0!==e&&(t.add=e),o(t,"add",!1)?this.displayList.add(u):this.updateList.add(u),u}))},function(t,e,n){var r=n(28),i=n(16),o=n(13),s=n(221);i.register("renderTexture",(function(t,e){void 0===t&&(t={});var n=o(t,"x",0),i=o(t,"y",0),a=o(t,"width",32),u=o(t,"height",32),c=o(t,"key",void 0),h=o(t,"frame",void 0),l=new s(this.scene,n,i,a,u,c,h);return void 0!==e&&(t.add=e),r(this.scene,l,t),l}))},function(t,e,n){var r=n(28),i=n(16),o=n(13),s=n(6),a=n(223);i.register("rope",(function(t,e){void 0===t&&(t={});var n=o(t,"key",null),i=o(t,"frame",null),u=o(t,"horizontal",!0),c=s(t,"points",void 0),h=s(t,"colors",void 0),l=s(t,"alphas",void 0),f=new a(this.scene,0,0,n,i,c,u,h,l);return void 0!==e&&(t.add=e),r(this.scene,f,t),t.add||this.updateList.add(f),f}))},function(t,e,n){var r=n(28),i=n(439),o=n(16),s=n(13),a=n(73);o.register("sprite",(function(t,e){void 0===t&&(t={});var n=s(t,"key",null),o=s(t,"frame",null),u=new a(this.scene,0,0,n,o);return void 0!==e&&(t.add=e),r(this.scene,u,t),i(u,t),u}))},function(t,e,n){var r=n(148),i=n(28),o=n(16),s=n(13),a=n(6);o.register("bitmapText",(function(t,e){void 0===t&&(t={});var n=a(t,"font",""),o=s(t,"text",""),u=s(t,"size",!1),c=a(t,"align",0),h=new r(this.scene,0,0,n,o,u,c);return void 0!==e&&(t.add=e),i(this.scene,h,t),h}))},function(t,e,n){var r=n(28),i=n(16),o=n(13),s=n(224);i.register("text",(function(t,e){void 0===t&&(t={});var n=o(t,"text",""),i=o(t,"style",null),a=o(t,"padding",null);null!==a&&(i.padding=a);var u=new s(this.scene,0,0,n,i);return void 0!==e&&(t.add=e),r(this.scene,u,t),u.autoRound=o(t,"autoRound",!0),u.resolution=o(t,"resolution",1),u}))},function(t,e,n){var r=n(28),i=n(16),o=n(13),s=n(225);i.register("tileSprite",(function(t,e){void 0===t&&(t={});var n=o(t,"x",0),i=o(t,"y",0),a=o(t,"width",512),u=o(t,"height",512),c=o(t,"key",""),h=o(t,"frame",""),l=new s(this.scene,n,i,a,u,c,h);return void 0!==e&&(t.add=e),r(this.scene,l,t),l}))},function(t,e,n){var r=n(16),i=n(13),o=n(129);r.register("zone",(function(t){var e=i(t,"x",0),n=i(t,"y",0),r=i(t,"width",1),s=i(t,"height",r);return new o(this.scene,e,n,r,s)}))},function(t,e,n){var r=n(28),i=n(16),o=n(13),s=n(226);i.register("video",(function(t,e){void 0===t&&(t={});var n=o(t,"key",null),i=new s(this.scene,0,0,n);return void 0!==e&&(t.add=e),r(this.scene,i,t),t.add||this.updateList.add(i),i}))},function(t,e,n){var r=n(1),i=n(1);r=n(1177),i=n(1178),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(19);t.exports=function(t,e,n,i){if(e.shader){if(n.addToRenderList(e),t.pipelines.clear(),e.renderToTexture)e.load(),e.flush();else{var o=r(e,n,i).calc;t.width===e._rendererWidth&&t.height===e._rendererHeight||e.projOrtho(0,t.width,t.height,0),e.load(o.matrix),e.flush()}t.pipelines.rebind()}}},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(1),i=n(1);r=n(1180),i=n(1181),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(19);t.exports=function(t,e,n,i){var o=e.faces,s=o.length;if(0!==s){n.addToRenderList(e);var a=t.pipelines.set(e.pipeline,e),u=r(e,n,i).calc,c=a.setGameObject(e),h=a.vertexViewF32,l=a.vertexViewU32,f=a.vertexCount*a.currentShader.vertexComponentCount-1,d=e.tintFill,p=[],v=e.debugCallback,g=u.a,m=u.b,y=u.c,b=u.d,w=u.e,x=u.f,_=e.viewPosition.z,T=e.hideCCW,E=n.roundPixels,S=n.alpha*e.alpha,k=0;t.pipelines.preBatch(e);for(var A=0;A<s;A++){var O=o[A];O.isInView(n,T,_,S,g,m,y,b,w,x,E)&&(a.shouldFlush(3)&&(a.flush(),f=0),f=O.load(h,l,f,c,d),k++,a.vertexCount+=3,v&&p.push(O))}e.totalFrame+=k,v&&v.call(e,e,p),t.pipelines.postBatch(e)}}},function(t,e){t.exports=function(){}},function(t,e,n){var r=n(1),i=n(1);r=n(1183),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(19);t.exports=function(t,e,n,i){n.addToRenderList(e);var o=t.pipelines.set(e.pipeline),s=r(e,n,i).calc,a=e.width,u=e.height,c=-e._radius,h=-e._radius,l=c+a,f=h+u,d=s.getX(0,0),p=s.getY(0,0),v=s.getX(c,h),g=s.getY(c,h),m=s.getX(c,f),y=s.getY(c,f),b=s.getX(l,f),w=s.getY(l,f),x=s.getX(l,h),_=s.getY(l,h);t.pipelines.preBatch(e),o.batchPointLight(e,n,v,g,m,y,b,w,x,_,d,p),t.pipelines.postBatch(e)}},function(t,e,n){var r=n(229);n(5).register("shader",(function(t,e,n,i,o,s,a){return this.displayList.add(new r(this.scene,t,e,n,i,o,s,a))}))},function(t,e,n){var r=n(230);n(5).register("mesh",(function(t,e,n,i,o,s,a,u,c,h,l){return this.displayList.add(new r(this.scene,t,e,n,i,o,s,a,u,c,h,l))}))},function(t,e,n){var r=n(5),i=n(150);r.register("pointlight",(function(t,e,n,r,o,s){return this.displayList.add(new i(this.scene,t,e,n,r,o,s))}))},function(t,e,n){var r=n(28),i=n(16),o=n(13),s=n(229);i.register("shader",(function(t,e){void 0===t&&(t={});var n=o(t,"key",null),i=o(t,"x",0),a=o(t,"y",0),u=o(t,"width",128),c=o(t,"height",128),h=new s(this.scene,n,i,a,u,c);return void 0!==e&&(t.add=e),r(this.scene,h,t),h}))},function(t,e,n){var r=n(28),i=n(16),o=n(13),s=n(6),a=n(230);i.register("mesh",(function(t,e){void 0===t&&(t={});var n=o(t,"key",null),i=o(t,"frame",null),u=s(t,"vertices",[]),c=s(t,"uvs",[]),h=s(t,"indicies",[]),l=s(t,"containsZ",!1),f=s(t,"normals",[]),d=s(t,"colors",16777215),p=s(t,"alphas",1),v=new a(this.scene,0,0,n,i,u,c,h,l,f,d,p);return void 0!==e&&(t.add=e),r(this.scene,v,t),v}))},function(t,e,n){var r=n(28),i=n(16),o=n(13),s=n(150);i.register("pointlight",(function(t,e){void 0===t&&(t={});var n=o(t,"color",16777215),i=o(t,"radius",128),a=o(t,"intensity",1),u=o(t,"attenuation",.1),c=new s(this.scene,0,0,n,i,a,u);return void 0!==e&&(t.add=e),r(this.scene,c,t),c}))},function(t,e,n){var r=n(0),i=n(482),o=n(24),s=n(20),a=new r({Extends:i,initialize:function(t){this.scene=t,this.systems=t.sys,t.sys.settings.isBooted||t.sys.events.once(s.BOOT,this.boot,this),i.call(this)},boot:function(){var t=this.systems.events;t.on(s.SHUTDOWN,this.shutdown,this),t.on(s.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});o.register("LightsPlugin",a,"lights"),t.exports=a},function(t,e,n){var r=n(65);r.Area=n(1192),r.Circumference=n(302),r.CircumferencePoint=n(169),r.Clone=n(1193),r.Contains=n(66),r.ContainsPoint=n(1194),r.ContainsRect=n(1195),r.CopyFrom=n(1196),r.Equals=n(1197),r.GetBounds=n(1198),r.GetPoint=n(300),r.GetPoints=n(301),r.Offset=n(1199),r.OffsetPoint=n(1200),r.Random=n(170),t.exports=r},function(t,e){t.exports=function(t){return t.radius>0?Math.PI*t.radius*t.radius:0}},function(t,e,n){var r=n(65);t.exports=function(t){return new r(t.x,t.y,t.radius)}},function(t,e,n){var r=n(66);t.exports=function(t,e){return r(t,e.x,e.y)}},function(t,e,n){var r=n(66);t.exports=function(t,e){return r(t,e.x,e.y)&&r(t,e.right,e.y)&&r(t,e.x,e.bottom)&&r(t,e.right,e.bottom)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y,t.radius)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.radius===e.radius}},function(t,e,n){var r=n(10);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=t.left,e.y=t.top,e.width=t.diameter,e.height=t.diameter,e}},function(t,e){t.exports=function(t,e,n){return t.x+=e,t.y+=n,t}},function(t,e){t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},function(t,e,n){var r=n(111);r.Area=n(1202),r.Circumference=n(447),r.CircumferencePoint=n(218),r.Clone=n(1203),r.Contains=n(112),r.ContainsPoint=n(1204),r.ContainsRect=n(1205),r.CopyFrom=n(1206),r.Equals=n(1207),r.GetBounds=n(1208),r.GetPoint=n(445),r.GetPoints=n(446),r.Offset=n(1209),r.OffsetPoint=n(1210),r.Random=n(180),t.exports=r},function(t,e){t.exports=function(t){return t.isEmpty()?0:t.getMajorRadius()*t.getMinorRadius()*Math.PI}},function(t,e,n){var r=n(111);t.exports=function(t){return new r(t.x,t.y,t.width,t.height)}},function(t,e,n){var r=n(112);t.exports=function(t,e){return r(t,e.x,e.y)}},function(t,e,n){var r=n(112);t.exports=function(t,e){return r(t,e.x,e.y)&&r(t,e.right,e.y)&&r(t,e.x,e.bottom)&&r(t,e.right,e.bottom)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y,t.width,t.height)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}},function(t,e,n){var r=n(10);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=t.left,e.y=t.top,e.width=t.width,e.height=t.height,e}},function(t,e){t.exports=function(t,e,n){return t.x+=e,t.y+=n,t}},function(t,e){t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},function(t,e,n){var r=n(4),i=n(231);t.exports=function(t,e,n){if(void 0===n&&(n=[]),i(t,e)){var o,s,a,u,c=t.x,h=t.y,l=t.radius,f=e.x,d=e.y,p=e.radius;if(h===d)0===(a=(s=-2*d)*s-4*(o=1)*(f*f+(u=(p*p-l*l-f*f+c*c)/(2*(c-f)))*u-2*f*u+d*d-p*p))?n.push(new r(u,-s/(2*o))):a>0&&(n.push(new r(u,(-s+Math.sqrt(a))/(2*o))),n.push(new r(u,(-s-Math.sqrt(a))/(2*o))));else{var v=(c-f)/(h-d),g=(p*p-l*l-f*f+c*c-d*d+h*h)/(2*(h-d));0===(a=(s=2*h*v-2*g*v-2*c)*s-4*(o=v*v+1)*(c*c+h*h+g*g-l*l-2*h*g))?(u=-s/(2*o),n.push(new r(u,g-u*v))):a>0&&(u=(-s+Math.sqrt(a))/(2*o),n.push(new r(u,g-u*v)),u=(-s-Math.sqrt(a))/(2*o),n.push(new r(u,g-u*v)))}}return n}},function(t,e,n){var r=n(232),i=n(151);t.exports=function(t,e,n){if(void 0===n&&(n=[]),i(t,e)){var o=e.getLineA(),s=e.getLineB(),a=e.getLineC(),u=e.getLineD();r(o,t,n),r(s,t,n),r(a,t,n),r(u,t,n)}return n}},function(t,e,n){var r=n(140),i=n(487),o=new(n(47));function s(t,e,n,s,a){var u=Math.cos(t),c=Math.sin(t);o.setTo(e,n,e+u,n+c);var h=i(o,s);h&&a.push(new r(h.x,h.y,t,h.w))}function a(t,e){return t.z-e.z}t.exports=function(t,e,n){Array.isArray(n)||(n=[n]);for(var r=[],i=[],o=0;o<n.length;o++)for(var u=n[o].points,c=0;c<u.length;c++){var h=Math.atan2(u[c].y-e,u[c].x-t);-1===i.indexOf(h)&&(s(h,t,e,n,r),s(h-1e-5,t,e,n,r),s(h+1e-5,t,e,n,r),i.push(h))}return r.sort(a)}},function(t,e,n){var r=n(10),i=n(152);t.exports=function(t,e,n){return void 0===n&&(n=new r),i(t,e)&&(n.x=Math.max(t.x,e.x),n.y=Math.max(t.y,e.y),n.width=Math.min(t.right,e.right)-n.x,n.height=Math.min(t.bottom,e.bottom)-n.y),n}},function(t,e,n){var r=n(234),i=n(152);t.exports=function(t,e,n){if(void 0===n&&(n=[]),i(t,e)){var o=t.getLineA(),s=t.getLineB(),a=t.getLineC(),u=t.getLineD();r(o,e,n),r(s,e,n),r(a,e,n),r(u,e,n)}return n}},function(t,e,n){var r=n(489),i=n(234);t.exports=function(t,e,n){if(void 0===n&&(n=[]),r(t,e)){var o=e.getLineA(),s=e.getLineB(),a=e.getLineC();i(o,t,n),i(s,t,n),i(a,t,n)}return n}},function(t,e,n){var r=n(232),i=n(491);t.exports=function(t,e,n){if(void 0===n&&(n=[]),i(t,e)){var o=t.getLineA(),s=t.getLineB(),a=t.getLineC();r(o,e,n),r(s,e,n),r(a,e,n)}return n}},function(t,e,n){var r=n(494),i=n(492);t.exports=function(t,e,n){if(void 0===n&&(n=[]),r(t,e)){var o=e.getLineA(),s=e.getLineB(),a=e.getLineC();i(t,o,n),i(t,s,n),i(t,a,n)}return n}},function(t,e,n){var r=n(496);t.exports=function(t,e){if(!r(t,e))return!1;var n=Math.min(e.x1,e.x2),i=Math.max(e.x1,e.x2),o=Math.min(e.y1,e.y2),s=Math.max(e.y1,e.y2);return t.x>=n&&t.x<=i&&t.y>=o&&t.y<=s}},function(t,e){t.exports=function(t,e,n,r,i,o){return void 0===o&&(o=0),!(e>t.right+o||n<t.left-o||r>t.bottom+o||i<t.top-o)}},function(t,e,n){var r=n(47);r.Angle=n(97),r.BresenhamPoints=n(317),r.CenterOn=n(1222),r.Clone=n(1223),r.CopyFrom=n(1224),r.Equals=n(1225),r.Extend=n(1226),r.GetEasedPoints=n(1227),r.GetMidPoint=n(1228),r.GetNearestPoint=n(1229),r.GetNormal=n(1230),r.GetPoint=n(307),r.GetPoints=n(172),r.GetShortestDistance=n(1231),r.Height=n(1232),r.Length=n(67),r.NormalAngle=n(497),r.NormalX=n(1233),r.NormalY=n(1234),r.Offset=n(1235),r.PerpSlope=n(1236),r.Random=n(173),r.ReflectAngle=n(1237),r.Rotate=n(1238),r.RotateAroundPoint=n(1239),r.RotateAroundXY=n(236),r.SetToAngle=n(1240),r.Slope=n(1241),r.Width=n(1242),t.exports=r},function(t,e){t.exports=function(t,e,n){var r=e-(t.x1+t.x2)/2,i=n-(t.y1+t.y2)/2;return t.x1+=r,t.y1+=i,t.x2+=r,t.y2+=i,t}},function(t,e,n){var r=n(47);t.exports=function(t){return new r(t.x1,t.y1,t.x2,t.y2)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x1,t.y1,t.x2,t.y2)}},function(t,e){t.exports=function(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2}},function(t,e,n){var r=n(67);t.exports=function(t,e,n){void 0===n&&(n=e);var i=r(t),o=t.x2-t.x1,s=t.y2-t.y1;return e&&(t.x1=t.x1-o/i*e,t.y1=t.y1-s/i*e),n&&(t.x2=t.x2+o/i*n,t.y2=t.y2+s/i*n),t}},function(t,e,n){var r=n(352),i=n(80),o=n(4);t.exports=function(t,e,n,s,a){void 0===s&&(s=0),void 0===a&&(a=[]);var u,c,h=[],l=t.x1,f=t.y1,d=t.x2-l,p=t.y2-f,v=i(e,a),g=n-1;for(u=0;u<g;u++)c=v(u/g),h.push(new o(l+d*c,f+p*c));if(c=v(1),h.push(new o(l+d*c,f+p*c)),s>0){var m=h[0],y=[m];for(u=1;u<h.length-1;u++){var b=h[u];r(m,b)>=s&&(y.push(b),m=b)}var w=h[h.length-1];return r(m,w)<s&&y.pop(),y.push(w),y}return h}},function(t,e,n){var r=n(4);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=(t.x1+t.x2)/2,e.y=(t.y1+t.y2)/2,e}},function(t,e,n){var r=n(4);t.exports=function(t,e,n){void 0===n&&(n=new r);var i=t.x1,o=t.y1,s=t.x2,a=t.y2,u=(s-i)*(s-i)+(a-o)*(a-o);if(0===u)return n;var c=((e.x-i)*(s-i)+(e.y-o)*(a-o))/u;return n.x=i+c*(s-i),n.y=o+c*(a-o),n}},function(t,e,n){var r=n(14),i=n(97),o=n(4);t.exports=function(t,e){void 0===e&&(e=new o);var n=i(t)-r.TAU;return e.x=Math.cos(n),e.y=Math.sin(n),e}},function(t,e){t.exports=function(t,e){var n=t.x1,r=t.y1,i=t.x2,o=t.y2,s=(i-n)*(i-n)+(o-r)*(o-r);if(0===s)return!1;var a=((r-e.y)*(i-n)-(n-e.x)*(o-r))/s;return Math.abs(a)*Math.sqrt(s)}},function(t,e){t.exports=function(t){return Math.abs(t.y1-t.y2)}},function(t,e,n){var r=n(14),i=n(97);t.exports=function(t){return Math.cos(i(t)-r.TAU)}},function(t,e,n){var r=n(14),i=n(97);t.exports=function(t){return Math.sin(i(t)-r.TAU)}},function(t,e){t.exports=function(t,e,n){return t.x1+=e,t.y1+=n,t.x2+=e,t.y2+=n,t}},function(t,e){t.exports=function(t){return-(t.x2-t.x1)/(t.y2-t.y1)}},function(t,e,n){var r=n(97),i=n(497);t.exports=function(t,e){return 2*i(e)-Math.PI-r(t)}},function(t,e,n){var r=n(236);t.exports=function(t,e){var n=(t.x1+t.x2)/2,i=(t.y1+t.y2)/2;return r(t,n,i,e)}},function(t,e,n){var r=n(236);t.exports=function(t,e,n){return r(t,e.x,e.y,n)}},function(t,e){t.exports=function(t,e,n,r,i){return t.x1=e,t.y1=n,t.x2=e+Math.cos(r)*i,t.y2=n+Math.sin(r)*i,t}},function(t,e){t.exports=function(t){return(t.y2-t.y1)/(t.x2-t.x1)}},function(t,e){t.exports=function(t){return Math.abs(t.x1-t.x2)}},function(t,e,n){var r={Face:n(116),GenerateGridVerts:n(1244),GenerateObjVerts:n(480),GenerateVerts:n(479),ParseObj:n(498),ParseObjMaterial:n(499),RotateFace:n(1245),Vertex:n(117)};t.exports=r},function(t,e,n){var r=n(116),i=n(2),o=n(69),s=n(39),a=n(117),u=new s,c=new s,h=new o;t.exports=function(t){var e=i(t,"mesh"),n=i(t,"texture",null),o=i(t,"frame"),s=i(t,"width",1),l=i(t,"height",s),f=i(t,"widthSegments",1),d=i(t,"heightSegments",f),p=i(t,"x",0),v=i(t,"y",0),g=i(t,"z",0),m=i(t,"rotateX",0),y=i(t,"rotateY",0),b=i(t,"rotateZ",0),w=i(t,"zIsUp",!0),x=i(t,"isOrtho",!!e&&e.dirtyCache[11]),_=i(t,"colors",[16777215]),T=i(t,"alphas",[1]),E=i(t,"tile",!1),S=i(t,"flipY",!1),k=i(t,"width",null),A={faces:[],verts:[]};if(u.set(p,v,g),c.set(m,y,b),h.fromRotationXYTranslation(c,u,w),!n&&e)n=e.texture;else{if(!e||"string"!==typeof n)return A;n=e.scene.sys.textures.get(n)}var O=n.get(o);!k&&x&&n&&e&&(s=O.width/e.height,l=O.height/e.height);var C,P,I=s/2,R=l/2,M=Math.floor(f),N=Math.floor(d),L=M+1,D=N+1,F=s/M,j=l/N,B=[],U=[],V=0,z=1,G=0,Y=1;O&&(V=O.u0,z=O.u1,S?(G=O.v1,Y=O.v0):(G=O.v0,Y=O.v1));var W=z-V,X=Y-G;for(P=0;P<D;P++){var H=P*j-R;for(C=0;C<L;C++){var q=C*F-I;U.push(q,-H);var K=V+W*(C/M),$=G+X*(P/N);B.push(K,$)}}Array.isArray(_)||(_=[_]),Array.isArray(T)||(T=[T]);var J=0,Q=0;for(P=0;P<N;P++)for(C=0;C<M;C++){var Z=2*(C+L*P),tt=2*(C+L*(P+1)),et=2*(C+1+L*(P+1)),nt=2*(C+1+L*P),rt=_[Q],it=T[J],ot=new a(U[Z],U[Z+1],0,B[Z],B[Z+1],rt,it).transformMat4(h),st=new a(U[tt],U[tt+1],0,B[tt],B[tt+1],rt,it).transformMat4(h),at=new a(U[nt],U[nt+1],0,B[nt],B[nt+1],rt,it).transformMat4(h),ut=new a(U[tt],U[tt+1],0,B[tt],B[tt+1],rt,it).transformMat4(h),ct=new a(U[et],U[et+1],0,B[et],B[et+1],rt,it).transformMat4(h),ht=new a(U[nt],U[nt+1],0,B[nt],B[nt+1],rt,it).transformMat4(h);E&&(ot.setUVs(V,Y),st.setUVs(V,G),at.setUVs(z,Y),ut.setUVs(V,G),ct.setUVs(z,G),ht.setUVs(z,Y)),++Q===_.length&&(Q=0),++J===T.length&&(J=0),A.verts.push(ot,st,at,ut,ct,ht),A.faces.push(new r(ot,st,at),new r(ut,ct,ht))}return e&&(e.faces=e.faces.concat(A.faces),e.vertices=e.vertices.concat(A.verts)),A}},function(t,e){t.exports=function(t,e,n,r){var i,o;if(void 0===n&&void 0===r){var s=t.getInCenter();i=s.x,o=s.y}var a=Math.cos(e),u=Math.sin(e),c=t.vertex1,h=t.vertex2,l=t.vertex3,f=c.x-i,d=c.y-o;c.set(f*a-d*u+i,f*u+d*a+o),f=h.x-i,d=h.y-o,h.set(f*a-d*u+i,f*u+d*a+o),f=l.x-i,d=l.y-o,l.set(f*a-d*u+i,f*u+d*a+o)}},function(t,e,n){var r=n(4);r.Ceil=n(1247),r.Clone=n(1248),r.CopyFrom=n(1249),r.Equals=n(1250),r.Floor=n(1251),r.GetCentroid=n(1252),r.GetMagnitude=n(500),r.GetMagnitudeSq=n(501),r.GetRectangleFromPoints=n(1253),r.Interpolate=n(1254),r.Invert=n(1255),r.Negative=n(1256),r.Project=n(1257),r.ProjectUnit=n(1258),r.SetMagnitude=n(1259),t.exports=r},function(t,e){t.exports=function(t){return t.setTo(Math.ceil(t.x),Math.ceil(t.y))}},function(t,e,n){var r=n(4);t.exports=function(t){return new r(t.x,t.y)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y}},function(t,e){t.exports=function(t){return t.setTo(Math.floor(t.x),Math.floor(t.y))}},function(t,e,n){var r=n(4);t.exports=function(t,e){if(void 0===e&&(e=new r),!Array.isArray(t))throw new Error("GetCentroid points argument must be an array");var n=t.length;if(n<1)throw new Error("GetCentroid points array must not be empty");if(1===n)e.x=t[0].x,e.y=t[0].y;else{for(var i=0;i<n;i++)e.x+=t[i].x,e.y+=t[i].y;e.x/=n,e.y/=n}return e}},function(t,e,n){var r=n(10);t.exports=function(t,e){void 0===e&&(e=new r);for(var n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY,a=0;a<t.length;a++){var u=t[a];u.x>n&&(n=u.x),u.x<i&&(i=u.x),u.y>o&&(o=u.y),u.y<s&&(s=u.y)}return e.x=i,e.y=s,e.width=n-i,e.height=o-s,e}},function(t,e,n){var r=n(4);t.exports=function(t,e,n,i){return void 0===n&&(n=0),void 0===i&&(i=new r),i.x=t.x+(e.x-t.x)*n,i.y=t.y+(e.y-t.y)*n,i}},function(t,e){t.exports=function(t){return t.setTo(t.y,t.x)}},function(t,e,n){var r=n(4);t.exports=function(t,e){return void 0===e&&(e=new r),e.setTo(-t.x,-t.y)}},function(t,e,n){var r=n(4),i=n(501);t.exports=function(t,e,n){void 0===n&&(n=new r);var o=(t.x*e.x+t.y*e.y)/i(e);return 0!==o&&(n.x=o*e.x,n.y=o*e.y),n}},function(t,e,n){var r=n(4);t.exports=function(t,e,n){void 0===n&&(n=new r);var i=t.x*e.x+t.y*e.y;return 0!==i&&(n.x=i*e.x,n.y=i*e.y),n}},function(t,e,n){var r=n(500);t.exports=function(t,e){if(0!==t.x||0!==t.y){var n=r(t);t.x/=n,t.y/=n}return t.x*=e,t.y*=e,t}},function(t,e,n){var r=n(227);r.Clone=n(1261),r.Contains=n(228),r.ContainsPoint=n(1262),r.Earcut=n(59),r.GetAABB=n(469),r.GetNumberArray=n(1263),r.GetPoints=n(470),r.Perimeter=n(471),r.Reverse=n(1264),r.Simplify=n(1265),r.Smooth=n(472),r.Translate=n(1266),t.exports=r},function(t,e,n){var r=n(227);t.exports=function(t){return new r(t.points)}},function(t,e,n){var r=n(228);t.exports=function(t,e){return r(t,e.x,e.y)}},function(t,e){t.exports=function(t,e){void 0===e&&(e=[]);for(var n=0;n<t.points.length;n++)e.push(t.points[n].x),e.push(t.points[n].y);return e}},function(t,e){t.exports=function(t){return t.points.reverse(),t}},function(t,e){function n(t,e){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function r(t,e,n){var r=e.x,i=e.y,o=n.x-r,s=n.y-i;if(0!==o||0!==s){var a=((t.x-r)*o+(t.y-i)*s)/(o*o+s*s);a>1?(r=n.x,i=n.y):a>0&&(r+=o*a,i+=s*a)}return(o=t.x-r)*o+(s=t.y-i)*s}function i(t,e,n,o,s){for(var a,u=o,c=e+1;c<n;c++){var h=r(t[c],t[e],t[n]);h>u&&(a=c,u=h)}u>o&&(a-e>1&&i(t,e,a,o,s),s.push(t[a]),n-a>1&&i(t,a,n,o,s))}function o(t,e){var n=t.length-1,r=[t[0]];return i(t,0,n,e,r),r.push(t[n]),r}t.exports=function(t,e,r){void 0===e&&(e=1),void 0===r&&(r=!1);var i=t.points;if(i.length>2){var s=e*e;r||(i=function(t,e){for(var r,i=t[0],o=[i],s=1,a=t.length;s<a;s++)n(r=t[s],i)>e&&(o.push(r),i=r);return i!==r&&o.push(r),o}(i,s)),t.setTo(o(i,s))}return t}},function(t,e){t.exports=function(t,e,n){for(var r=t.points,i=0;i<r.length;i++)r[i].x+=e,r[i].y+=n;return t}},function(t,e){t.exports=function(t){return t.width*t.height}},function(t,e){t.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t}},function(t,e){t.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t}},function(t,e,n){var r=n(10);t.exports=function(t){return new r(t.x,t.y,t.width,t.height)}},function(t,e,n){var r=n(57);t.exports=function(t,e){return r(t,e.x,e.y)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x,t.y,t.width,t.height)}},function(t,e){t.exports=function(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}},function(t,e,n){var r=n(237);t.exports=function(t,e){var n=r(t);return n<r(e)?t.setSize(e.height*n,e.height):t.setSize(e.width,e.width/n),t.setPosition(e.centerX-t.width/2,e.centerY-t.height/2)}},function(t,e,n){var r=n(237);t.exports=function(t,e){var n=r(t);return n>r(e)?t.setSize(e.height*n,e.height):t.setSize(e.width,e.width/n),t.setPosition(e.centerX-t.width/2,e.centerY-t.height/2)}},function(t,e){t.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t}},function(t,e){t.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height),t}},function(t,e,n){var r=n(10);t.exports=function(t,e,n,i,o){return void 0===o&&(o=new r),o.setTo(Math.min(t,n),Math.min(e,i),Math.abs(t-n),Math.abs(e-i))}},function(t,e,n){var r=n(4);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=t.centerX,e.y=t.centerY,e}},function(t,e,n){var r=n(4);t.exports=function(t,e){return void 0===e&&(e=new r),e.x=t.width,e.y=t.height,e}},function(t,e,n){var r=n(190);t.exports=function(t,e,n){var i=t.centerX,o=t.centerY;return t.setSize(t.width+2*e,t.height+2*n),r(t,i,o)}},function(t,e,n){var r=n(10),i=n(152);t.exports=function(t,e,n){return void 0===n&&(n=new r),i(t,e)?(n.x=Math.max(t.x,e.x),n.y=Math.max(t.y,e.y),n.width=Math.min(t.right,e.right)-n.x,n.height=Math.min(t.bottom,e.bottom)-n.y):n.setEmpty(),n}},function(t,e){t.exports=function(t,e){for(var n=t.x,r=t.right,i=t.y,o=t.bottom,s=0;s<e.length;s++)n=Math.min(n,e[s].x),r=Math.max(r,e[s].x),i=Math.min(i,e[s].y),o=Math.max(o,e[s].y);return t.x=n,t.y=i,t.width=r-n,t.height=o-i,t}},function(t,e){t.exports=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.right,e.right);t.x=n,t.width=r-n;var i=Math.min(t.y,e.y),o=Math.max(t.bottom,e.bottom);return t.y=i,t.height=o-i,t}},function(t,e){t.exports=function(t,e,n){var r=Math.min(t.x,e),i=Math.max(t.right,e);t.x=r,t.width=i-r;var o=Math.min(t.y,n),s=Math.max(t.bottom,n);return t.y=o,t.height=s-o,t}},function(t,e){t.exports=function(t,e,n){return t.x+=e,t.y+=n,t}},function(t,e){t.exports=function(t,e){return t.x+=e.x,t.y+=e.y,t}},function(t,e){t.exports=function(t,e){return t.x<e.right&&t.right>e.x&&t.y<e.bottom&&t.bottom>e.y}},function(t,e,n){var r=n(4),i=n(36);t.exports=function(t,e,n){void 0===n&&(n=new r),e=i(e);var o=Math.sin(e),s=Math.cos(e),a=s>0?t.width/2:t.width/-2,u=o>0?t.height/2:t.height/-2;return Math.abs(a*o)<Math.abs(u*s)?u=a*o/s:a=u*s/o,n.x=a+t.centerX,n.y=u+t.centerY,n}},function(t,e,n){var r=n(195),i=n(503),o=n(4);t.exports=function(t,e,n){if(void 0===n&&(n=new o),i(t,e))switch(r(0,3)){case 0:n.x=t.x+Math.random()*(e.right-t.x),n.y=t.y+Math.random()*(e.top-t.y);break;case 1:n.x=e.x+Math.random()*(t.right-e.x),n.y=e.bottom+Math.random()*(t.bottom-e.bottom);break;case 2:n.x=t.x+Math.random()*(e.x-t.x),n.y=e.y+Math.random()*(t.bottom-e.y);break;case 3:n.x=e.right+Math.random()*(t.right-e.right),n.y=t.y+Math.random()*(e.bottom-t.y)}return n}},function(t,e){t.exports=function(t,e){return t.width===e.width&&t.height===e.height}},function(t,e){t.exports=function(t,e,n){return void 0===n&&(n=e),t.width*=e,t.height*=n,t}},function(t,e,n){var r=n(82);r.Area=n(1294),r.BuildEquilateral=n(1295),r.BuildFromPolygon=n(1296),r.BuildRight=n(1297),r.CenterOn=n(1298),r.Centroid=n(504),r.CircumCenter=n(1299),r.CircumCircle=n(1300),r.Clone=n(1301),r.Contains=n(115),r.ContainsArray=n(235),r.ContainsPoint=n(1302),r.CopyFrom=n(1303),r.Decompose=n(495),r.Equals=n(1304),r.GetPoint=n(476),r.GetPoints=n(477),r.InCenter=n(506),r.Perimeter=n(1305),r.Offset=n(505),r.Random=n(181),r.Rotate=n(1306),r.RotateAroundPoint=n(1307),r.RotateAroundXY=n(238),t.exports=r},function(t,e){t.exports=function(t){var e=t.x1,n=t.y1,r=t.x2,i=t.y2,o=t.x3,s=t.y3;return Math.abs(((o-e)*(i-n)-(r-e)*(s-n))/2)}},function(t,e,n){var r=n(82);t.exports=function(t,e,n){var i=n*(Math.sqrt(3)/2);return new r(t,e,t+n/2,e+i,t-n/2,e+i)}},function(t,e,n){var r=n(59),i=n(82);t.exports=function(t,e,n,o,s){void 0===e&&(e=null),void 0===n&&(n=1),void 0===o&&(o=1),void 0===s&&(s=[]);for(var a,u,c,h,l,f,d,p,v,g=r(t,e),m=0;m<g.length;m+=3)a=g[m],u=g[m+1],c=g[m+2],h=t[2*a]*n,l=t[2*a+1]*o,f=t[2*u]*n,d=t[2*u+1]*o,p=t[2*c]*n,v=t[2*c+1]*o,s.push(new i(h,l,f,d,p,v));return s}},function(t,e,n){var r=n(82);t.exports=function(t,e,n,i){return void 0===i&&(i=n),new r(t,e,t,e-i,t+n,e)}},function(t,e,n){var r=n(504),i=n(505);t.exports=function(t,e,n,o){void 0===o&&(o=r);var s=o(t),a=e-s.x,u=n-s.y;return i(t,a,u)}},function(t,e,n){var r=n(3);function i(t,e,n,r){return t*r-e*n}t.exports=function(t,e){void 0===e&&(e=new r);var n=t.x3,o=t.y3,s=t.x1-n,a=t.y1-o,u=t.x2-n,c=t.y2-o,h=2*i(s,a,u,c),l=i(a,s*s+a*a,c,u*u+c*c),f=i(s,s*s+a*a,u,u*u+c*c);return e.x=n-l/h,e.y=o+f/h,e}},function(t,e,n){var r=n(65);t.exports=function(t,e){void 0===e&&(e=new r);var n,i,o=t.x1,s=t.y1,a=t.x2,u=t.y2,c=t.x3,h=t.y3,l=a-o,f=u-s,d=c-o,p=h-s,v=l*(o+a)+f*(s+u),g=d*(o+c)+p*(s+h),m=2*(l*(h-u)-f*(c-a));if(Math.abs(m)<1e-6){var y=Math.min(o,a,c),b=Math.min(s,u,h);n=.5*(Math.max(o,a,c)-y),i=.5*(Math.max(s,u,h)-b),e.x=y+n,e.y=b+i,e.radius=Math.sqrt(n*n+i*i)}else e.x=(p*v-f*g)/m,e.y=(l*g-d*v)/m,n=e.x-o,i=e.y-s,e.radius=Math.sqrt(n*n+i*i);return e}},function(t,e,n){var r=n(82);t.exports=function(t){return new r(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(t,e,n){var r=n(115);t.exports=function(t,e){return r(t,e.x,e.y)}},function(t,e){t.exports=function(t,e){return e.setTo(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(t,e){t.exports=function(t,e){return t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2&&t.x3===e.x3&&t.y3===e.y3}},function(t,e,n){var r=n(67);t.exports=function(t){var e=t.getLineA(),n=t.getLineB(),i=t.getLineC();return r(e)+r(n)+r(i)}},function(t,e,n){var r=n(238),i=n(506);t.exports=function(t,e){var n=i(t);return r(t,n.x,n.y,e)}},function(t,e,n){var r=n(238);t.exports=function(t,e,n){return r(t,e.x,e.y,n)}},function(t,e,n){var r=n(203),i=n(17),o={CreatePixelPerfectHandler:n(507),CreateInteractiveObject:n(508),Events:n(51),Gamepad:n(1309),InputManager:n(409),InputPlugin:n(1321),InputPluginCache:n(153),Keyboard:n(1322),Mouse:n(1336),Pointer:n(412),Touch:n(1337)};o=i(!1,o,r),t.exports=o},function(t,e,n){t.exports={Axis:n(509),Button:n(510),Events:n(239),Gamepad:n(511),GamepadPlugin:n(1316),Configs:n(1317)}},function(t,e){t.exports="down"},function(t,e){t.exports="up"},function(t,e){t.exports="connected"},function(t,e){t.exports="disconnected"},function(t,e){t.exports="down"},function(t,e){t.exports="up"},function(t,e,n){var r=n(0),i=n(9),o=n(239),s=n(511),a=n(6),u=n(153),c=n(51),h=new r({Extends:i,initialize:function(t){i.call(this),this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.enabled=!0,this.target,this.gamepads=[],this.queue=[],this.onGamepadHandler,this._pad1,this._pad2,this._pad3,this._pad4,t.pluginEvents.once(c.BOOT,this.boot,this),t.pluginEvents.on(c.START,this.start,this)},boot:function(){var t=this.scene.sys.game,e=this.settings.input,n=t.config;this.enabled=a(e,"gamepad",n.inputGamepad)&&t.device.input.gamepads,this.target=a(e,"gamepad.target",n.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(c.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(c.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){var t=this,e=this.target,n=function(e){!e.defaultPrevented&&t.isActive()&&(t.refreshPads(),t.queue.push(e))};this.onGamepadHandler=n,e.addEventListener("gamepadconnected",n,!1),e.addEventListener("gamepaddisconnected",n,!1),this.sceneInputPlugin.pluginEvents.on(c.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(c.UPDATE,this.update);for(var t=0;t<this.gamepads.length;t++)this.gamepads[t].removeAllListeners()},disconnectAll:function(){for(var t=0;t<this.gamepads.length;t++)this.gamepads[t].pad.connected=!1},refreshPads:function(){var t=navigator.getGamepads();if(t)for(var e=this.gamepads,n=0;n<t.length;n++){var r=t[n];if(r){var i=r.id,o=r.index,a=e[o];if(a)a.id!==i?(a.destroy(),e[o]=new s(this,r)):a.update(r);else{var u=new s(this,r);e[o]=u,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=u):this._pad3=u:this._pad2=u:this._pad1=u}}}else this.disconnectAll()},getAll:function(){for(var t=[],e=this.gamepads,n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},getPad:function(t){for(var e=this.gamepads,n=0;n<e.length;n++)if(e[n]&&e[n].index===t)return e[n]},update:function(){if(this.enabled){this.refreshPads();var t=this.queue.length;if(0!==t)for(var e=this.queue.splice(0,t),n=0;n<t;n++){var r=e[n],i=this.getPad(r.gamepad.index);"gamepadconnected"===r.type?this.emit(o.CONNECTED,i,r):"gamepaddisconnected"===r.type&&this.emit(o.DISCONNECTED,i,r)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var t=0;t<this.gamepads.length;t++)this.gamepads[t]&&this.gamepads[t].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});u.register("GamepadPlugin",h,"gamepad","gamepad","inputGamepad"),t.exports=h},function(t,e,n){t.exports={DUALSHOCK_4:n(1318),SNES_USB:n(1319),XBOX_360:n(1320)}},function(t,e){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,e){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(t,e){t.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(t,e,n){var r=n(65),i=n(66),o=n(0),s=n(203),a=n(508),u=n(507),c=n(50),h=n(111),l=n(112),f=n(51),d=n(9),p=n(2),v=n(56),g=n(153),m=n(7),y=n(24),b=n(10),w=n(57),x=n(20),_=n(82),T=n(115),E=new o({Extends:d,initialize:function(t){d.call(this),this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.manager=t.sys.game.input,this.pluginEvents=new d,this.enabled=!0,this.displayList,this.cameras,g.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var e={cancelled:!1};this._eventContainer={stopPropagation:function(){e.cancelled=!0}},this._eventData=e,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,t.sys.events.once(x.BOOT,this.boot,this),t.sys.events.on(x.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(x.DESTROY,this.destroy,this),this.pluginEvents.emit(f.BOOT)},start:function(){var t=this.systems.events;t.on(x.TRANSITION_START,this.transitionIn,this),t.on(x.TRANSITION_OUT,this.transitionOut,this),t.on(x.TRANSITION_COMPLETE,this.transitionComplete,this),t.on(x.PRE_UPDATE,this.preUpdate,this),t.once(x.SHUTDOWN,this.shutdown,this),this.manager.events.on(f.GAME_OUT,this.onGameOut,this),this.manager.events.on(f.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(f.START)},onGameOver:function(t){this.isActive()&&this.emit(f.GAME_OVER,t.timeStamp,t)},onGameOut:function(t){this.isActive()&&this.emit(f.GAME_OUT,t.timeStamp,t)},preUpdate:function(){this.pluginEvents.emit(f.PRE_UPDATE);var t=this._pendingRemoval,e=this._pendingInsertion,n=t.length,r=e.length;if(0!==n||0!==r){for(var i=this._list,o=0;o<n;o++){var s=t[o],a=i.indexOf(s);a>-1&&(i.splice(a,1),this.clear(s,!0))}t.length=0,this._pendingRemoval.length=0,this._list=i.concat(e.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(t,e){if(!this.isActive())return!1;if(this.pluginEvents.emit(f.UPDATE,t,e),this._updatedThisFrame)return this._updatedThisFrame=!1,!1;var n,r=this.manager,i=r.pointers,o=r.pointersTotal;for(n=0;n<o;n++)i[n].updateMotion();if(0===this._list.length)return!1;var s=this.pollRate;if(-1===s)return!1;if(s>0){if(this._pollTimer-=e,!(this._pollTimer<0))return!1;this._pollTimer=this.pollRate}var a=!1;for(n=0;n<o;n++){var u=0,c=i[n];this._tempZones=[],this._temp=this.hitTestPointer(c),this.sortGameObjects(this._temp,c),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),u+=this.processOverOutEvents(c),2===this.getDragState(c)&&this.processDragThresholdEvent(c,t),u>0&&(a=!0)}return a},update:function(t,e){if(!this.isActive())return!1;for(var n=e.length,r=!1,i=0;i<n;i++){var o=0,a=e[i];switch(this._tempZones=[],this._temp=this.hitTestPointer(a),this.sortGameObjects(this._temp,a),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),t){case s.MOUSE_DOWN:o+=this.processDragDownEvent(a),o+=this.processDownEvents(a),o+=this.processOverOutEvents(a);break;case s.MOUSE_UP:o+=this.processDragUpEvent(a),o+=this.processUpEvents(a),o+=this.processOverOutEvents(a);break;case s.TOUCH_START:o+=this.processDragDownEvent(a),o+=this.processDownEvents(a),o+=this.processOverEvents(a);break;case s.TOUCH_END:case s.TOUCH_CANCEL:o+=this.processDragUpEvent(a),o+=this.processUpEvents(a),o+=this.processOutEvents(a);break;case s.MOUSE_MOVE:case s.TOUCH_MOVE:o+=this.processDragMoveEvent(a),o+=this.processMoveEvents(a),o+=this.processOverOutEvents(a);break;case s.MOUSE_WHEEL:o+=this.processWheelEvent(a)}o>0&&(r=!0)}return this._updatedThisFrame=!0,r},clear:function(t,e){void 0===e&&(e=!1);var n=t.input;if(n){e||this.queueForRemoval(t),n.gameObject=void 0,n.target=void 0,n.hitArea=void 0,n.hitAreaCallback=void 0,n.callbackContext=void 0,t.input=null;var r=this._draggable.indexOf(t);return r>-1&&this._draggable.splice(r,1),(r=this._drag[0].indexOf(t))>-1&&this._drag[0].splice(r,1),(r=this._over[0].indexOf(t))>-1&&(this._over[0].splice(r,1),this.manager.resetCursor(n)),t}},disable:function(t){t.input.enabled=!1},enable:function(t,e,n,r){return void 0===r&&(r=!1),t.input?t.input.enabled=!0:this.setHitArea(t,e,n),t.input&&r&&!t.input.dropZone&&(t.input.dropZone=r),this},hitTestPointer:function(t){for(var e=this.cameras.getCamerasBelowPointer(t),n=0;n<e.length;n++){for(var r=e[n],i=this.manager.hitTest(t,this._list,r),o=0;o<i.length;o++){var s=i[o];s.input.dropZone&&this._tempZones.push(s)}if(i.length>0)return t.camera=r,i}return t.camera=e[0],[]},processDownEvents:function(t){var e=0,n=this._temp,r=this._eventData,i=this._eventContainer;r.cancelled=!1;for(var o=!1,s=0;s<n.length;s++){var a=n[s];if(a.input){if(e++,a.emit(f.GAMEOBJECT_POINTER_DOWN,t,a.input.localX,a.input.localY,i),r.cancelled||!a.input){o=!0;break}if(this.emit(f.GAMEOBJECT_DOWN,t,a,i),r.cancelled||!a.input){o=!0;break}}}return!o&&this.manager&&(t.downElement===this.manager.game.canvas?this.emit(f.POINTER_DOWN,t,n):this.emit(f.POINTER_DOWN_OUTSIDE,t)),e},getDragState:function(t){return this._dragState[t.id]},setDragState:function(t,e){this._dragState[t.id]=e},processDragThresholdEvent:function(t,e){var n=!1,r=this.dragTimeThreshold,i=this.dragDistanceThreshold;if((i>0&&c(t.x,t.y,t.downX,t.downY)>=i||r>0&&e>=t.downTime+r)&&(n=!0),n)return this.setDragState(t,3),this.processDragStartList(t)},processDragStartList:function(t){if(3!==this.getDragState(t))return 0;for(var e=this._drag[t.id],n=0;n<e.length;n++){var r=e[n],i=r.input;i.dragState=2,i.dragStartX=r.x,i.dragStartY=r.y,i.dragStartXGlobal=t.worldX,i.dragStartYGlobal=t.worldY,i.dragX=i.dragStartXGlobal-i.dragStartX,i.dragY=i.dragStartYGlobal-i.dragStartY,r.emit(f.GAMEOBJECT_DRAG_START,t,i.dragX,i.dragY),this.emit(f.DRAG_START,t,r)}return this.setDragState(t,4),e.length},processDragDownEvent:function(t){var e=this._temp;if(0===this._draggable.length||0===e.length||!t.primaryDown||0!==this.getDragState(t))return 0;this.setDragState(t,1);for(var n=[],r=0;r<e.length;r++){var i=e[r];i.input.draggable&&0===i.input.dragState&&n.push(i)}return 0===n.length?(this.setDragState(t,0),0):(n.length>1&&(this.sortGameObjects(n,t),this.topOnly&&n.splice(1)),this._drag[t.id]=n,0===this.dragDistanceThreshold&&0===this.dragTimeThreshold?(this.setDragState(t,3),this.processDragStartList(t)):(this.setDragState(t,2),0))},processDragMoveEvent:function(t){if(2===this.getDragState(t)&&this.processDragThresholdEvent(t,this.manager.game.loop.now),4!==this.getDragState(t))return 0;for(var e=this._tempZones,n=this._drag[t.id],r=0;r<n.length;r++){var i,o,s=n[r],a=s.input,u=a.target;if(u){var c=e.indexOf(u);0===c?(s.emit(f.GAMEOBJECT_DRAG_OVER,t,u),this.emit(f.DRAG_OVER,t,s,u)):c>0?(s.emit(f.GAMEOBJECT_DRAG_LEAVE,t,u),this.emit(f.DRAG_LEAVE,t,s,u),a.target=e[0],u=a.target,s.emit(f.GAMEOBJECT_DRAG_ENTER,t,u),this.emit(f.DRAG_ENTER,t,s,u)):(s.emit(f.GAMEOBJECT_DRAG_LEAVE,t,u),this.emit(f.DRAG_LEAVE,t,s,u),e[0]?(a.target=e[0],u=a.target,s.emit(f.GAMEOBJECT_DRAG_ENTER,t,u),this.emit(f.DRAG_ENTER,t,s,u)):a.target=null)}else!u&&e[0]&&(a.target=e[0],u=a.target,s.emit(f.GAMEOBJECT_DRAG_ENTER,t,u),this.emit(f.DRAG_ENTER,t,s,u));if(s.parentContainer){var h=t.worldX-a.dragStartXGlobal,l=t.worldY-a.dragStartYGlobal,d=s.getParentRotation(),p=h*Math.cos(d)+l*Math.sin(d),v=l*Math.cos(d)-h*Math.sin(d);p*=1/s.parentContainer.scaleX,v*=1/s.parentContainer.scaleY,i=p+a.dragStartX,o=v+a.dragStartY}else i=t.worldX-a.dragX,o=t.worldY-a.dragY;s.emit(f.GAMEOBJECT_DRAG,t,i,o),this.emit(f.DRAG,t,s,i,o)}return n.length},processDragUpEvent:function(t){for(var e=this._drag[t.id],n=0;n<e.length;n++){var r=e[n],i=r.input;if(i&&2===i.dragState){i.dragState=0,i.dragX=i.localX-r.displayOriginX,i.dragY=i.localY-r.displayOriginY;var o=!1,s=i.target;s&&(r.emit(f.GAMEOBJECT_DROP,t,s),this.emit(f.DROP,t,r,s),i.target=null,o=!0),r.input&&(r.emit(f.GAMEOBJECT_DRAG_END,t,i.dragX,i.dragY,o),this.emit(f.DRAG_END,t,r,o))}}return this.setDragState(t,0),e.splice(0),0},processMoveEvents:function(t){var e=0,n=this._temp,r=this._eventData,i=this._eventContainer;r.cancelled=!1;for(var o=!1,s=0;s<n.length;s++){var a=n[s];if(a.input){if(e++,a.emit(f.GAMEOBJECT_POINTER_MOVE,t,a.input.localX,a.input.localY,i),r.cancelled||!a.input){o=!0;break}if(this.emit(f.GAMEOBJECT_MOVE,t,a,i),r.cancelled||!a.input){o=!0;break}if(this.topOnly)break}}return o||this.emit(f.POINTER_MOVE,t,n),e},processWheelEvent:function(t){var e=0,n=this._temp,r=this._eventData,i=this._eventContainer;r.cancelled=!1;for(var o=!1,s=t.deltaX,a=t.deltaY,u=t.deltaZ,c=0;c<n.length;c++){var h=n[c];if(h.input){if(e++,h.emit(f.GAMEOBJECT_POINTER_WHEEL,t,s,a,u,i),r.cancelled||!h.input){o=!0;break}if(this.emit(f.GAMEOBJECT_WHEEL,t,h,s,a,u,i),r.cancelled||!h.input){o=!0;break}}}return o||this.emit(f.POINTER_WHEEL,t,n,s,a,u),e},processOverEvents:function(t){var e=this._temp,n=0,r=e.length,i=[];if(r>0){var o=this.manager,s=this._eventData,a=this._eventContainer;s.cancelled=!1;for(var u=!1,c=0;c<r;c++){var h=e[c];if(h.input){if(i.push(h),o.setCursor(h.input),h.emit(f.GAMEOBJECT_POINTER_OVER,t,h.input.localX,h.input.localY,a),n++,s.cancelled||!h.input){u=!0;break}if(this.emit(f.GAMEOBJECT_OVER,t,h,a),s.cancelled||!h.input){u=!0;break}}}u||this.emit(f.POINTER_OVER,t,i)}return this._over[t.id]=i,n},processOutEvents:function(t){var e=this._over[t.id],n=0,r=e.length;if(r>0){var i=this.manager,o=this._eventData,s=this._eventContainer;o.cancelled=!1;var a=!1;this.sortGameObjects(e,t);for(var u=0;u<r;u++){var c=e[u];if((c=e[u]).input){if(i.resetCursor(c.input),c.emit(f.GAMEOBJECT_POINTER_OUT,t,s),n++,o.cancelled||!c.input){a=!0;break}if(this.emit(f.GAMEOBJECT_OUT,t,c,s),o.cancelled||!c.input){a=!0;break}a||this.emit(f.POINTER_OUT,t,e)}}this._over[t.id]=[]}return n},processOverOutEvents:function(t){var e,n,r=this._temp,i=[],o=[],s=[],a=this._over[t.id],u=this._drag[t.id],c=this.manager;for(e=0;e<a.length;e++)n=a[e],-1===r.indexOf(n)&&-1===u.indexOf(n)?i.push(n):s.push(n);for(e=0;e<r.length;e++)n=r[e],-1===a.indexOf(n)&&o.push(n);var h=i.length,l=0,d=this._eventData,p=this._eventContainer;d.cancelled=!1;var v=!1;if(h>0){for(this.sortGameObjects(i,t),e=0;e<h;e++)if((n=i[e]).input){if(c.resetCursor(n.input),n.emit(f.GAMEOBJECT_POINTER_OUT,t,p),l++,d.cancelled||!n.input){v=!0;break}if(this.emit(f.GAMEOBJECT_OUT,t,n,p),d.cancelled||!n.input){v=!0;break}}v||this.emit(f.POINTER_OUT,t,i)}if(h=o.length,d.cancelled=!1,v=!1,h>0){for(this.sortGameObjects(o,t),e=0;e<h;e++)if((n=o[e]).input){if(c.setCursor(n.input),n.emit(f.GAMEOBJECT_POINTER_OVER,t,n.input.localX,n.input.localY,p),l++,d.cancelled||!n.input){v=!0;break}if(this.emit(f.GAMEOBJECT_OVER,t,n,p),d.cancelled||!n.input){v=!0;break}}v||this.emit(f.POINTER_OVER,t,o)}return a=s.concat(o),this._over[t.id]=this.sortGameObjects(a,t),l},processUpEvents:function(t){var e=this._temp,n=this._eventData,r=this._eventContainer;n.cancelled=!1;for(var i=!1,o=0;o<e.length;o++){var s=e[o];if(s.input){if(s.emit(f.GAMEOBJECT_POINTER_UP,t,s.input.localX,s.input.localY,r),n.cancelled||!s.input){i=!0;break}if(this.emit(f.GAMEOBJECT_UP,t,s,r),n.cancelled||!s.input){i=!0;break}}}return!i&&this.manager&&(t.upElement===this.manager.game.canvas?this.emit(f.POINTER_UP,t,e):this.emit(f.POINTER_UP_OUTSIDE,t)),e.length},queueForInsertion:function(t){return-1===this._pendingInsertion.indexOf(t)&&-1===this._list.indexOf(t)&&this._pendingInsertion.push(t),this},queueForRemoval:function(t){return this._pendingRemoval.push(t),this},setDraggable:function(t,e){void 0===e&&(e=!0),Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n];r.input.draggable=e;var i=this._draggable.indexOf(r);e&&-1===i?this._draggable.push(r):!e&&i>-1&&this._draggable.splice(i,1)}return this},makePixelPerfect:function(t){void 0===t&&(t=1);var e=this.systems.textures;return u(e,t)},setHitArea:function(t,e,n){if(void 0===e)return this.setHitAreaFromTexture(t);Array.isArray(t)||(t=[t]);var r=!1,i=!1,o=!1,s=!1,u=!1,c=!0;if(m(e)){var h=e;e=p(h,"hitArea",null),n=p(h,"hitAreaCallback",null),r=p(h,"draggable",!1),i=p(h,"dropZone",!1),o=p(h,"cursor",!1),s=p(h,"useHandCursor",!1),u=p(h,"pixelPerfect",!1);var l=p(h,"alphaTolerance",1);u&&(e={},n=this.makePixelPerfect(l)),e&&n||(this.setHitAreaFromTexture(t),c=!1)}else"function"!==typeof e||n||(n=e,e={});for(var f=0;f<t.length;f++){var d=t[f];if(u&&"Container"===d.type)console.warn("Cannot pixelPerfect test a Container. Use a custom callback.");else{var v=d.input?d.input:a(d,e,n);v.customHitArea=c,v.dropZone=i,v.cursor=s?"pointer":o,d.input=v,r&&this.setDraggable(d),this.queueForInsertion(d)}}return this},setHitAreaCircle:function(t,e,n,o,s){void 0===s&&(s=i);var a=new r(e,n,o);return this.setHitArea(t,a,s)},setHitAreaEllipse:function(t,e,n,r,i,o){void 0===o&&(o=l);var s=new h(e,n,r,i);return this.setHitArea(t,s,o)},setHitAreaFromTexture:function(t,e){void 0===e&&(e=w),Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n],i=r.frame,o=0,s=0;r.width?(o=r.width,s=r.height):i&&(o=i.realWidth,s=i.realHeight),"Container"!==r.type||0!==o&&0!==s?0!==o&&0!==s&&(r.input=a(r,new b(0,0,o,s),e),this.queueForInsertion(r)):console.warn("Container.setInteractive must specify a Shape or call setSize() first")}return this},setHitAreaRectangle:function(t,e,n,r,i,o){void 0===o&&(o=w);var s=new b(e,n,r,i);return this.setHitArea(t,s,o)},setHitAreaTriangle:function(t,e,n,r,i,o,s,a){void 0===a&&(a=T);var u=new _(e,n,r,i,o,s);return this.setHitArea(t,u,a)},enableDebug:function(t,e){void 0===e&&(e=65280);var n=t.input;if(!n||!n.hitArea)return this;var r=n.hitArea,i=r.type,o=n.hitAreaDebug,s=this.systems.add,a=this.systems.updateList;o&&(a.remove(o),o.destroy(),o=null);var u=0,c=0;switch(i){case v.CIRCLE:o=s.arc(0,0,r.radius),u=r.x-r.radius,c=r.y-r.radius;break;case v.ELLIPSE:o=s.ellipse(0,0,r.width,r.height),u=r.x-r.width/2,c=r.y-r.height/2;break;case v.LINE:o=s.line(0,0,r.x1,r.y1,r.x2,r.y2);break;case v.POLYGON:o=s.polygon(0,0,r.points);break;case v.RECTANGLE:o=s.rectangle(0,0,r.width,r.height),u=r.x,c=r.y;break;case v.TRIANGLE:o=s.triangle(0,0,r.x1,r.y1,r.x2,r.y2,r.x3,r.y3)}return o&&(o.isFilled=!1,o.preUpdate=function(){o.setStrokeStyle(1/t.scale,e),o.setDisplayOrigin(t.displayOriginX,t.displayOriginY);var n=t.x,r=t.y,i=t.rotation,s=t.scaleX,a=t.scaleY;if(t.parentContainer){var h=t.getWorldTransformMatrix();n=h.tx,r=h.ty,i=h.rotation,s=h.scaleX,a=h.scaleY}o.setRotation(i),o.setScale(s,a),o.setPosition(n+u,r+c),o.setScrollFactor(t.scrollFactorX,t.scrollFactorY),o.setDepth(t.depth)},a.add(o),n.hitAreaDebug=o),this},removeDebug:function(t){var e=t.input;if(e&&e.hitAreaDebug){var n=e.hitAreaDebug;this.systems.updateList.remove(n),n.destroy(),e.hitAreaDebug=null}return this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(t){return this.pollRate=t,this._pollTimer=0,this},setGlobalTopOnly:function(t){return this.manager.globalTopOnly=t,this},setTopOnly:function(t){return this.topOnly=t,this},sortGameObjects:function(t,e){if(t.length<2)return t;var n=e.camera.renderList;return t.sort((function(t,e){return n.indexOf(e)-n.indexOf(t)}))},sortDropZones:function(t){return t.length<2?t:(this.scene.sys.depthSort(),t.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(t,e){if(t.parentContainer||e.parentContainer){if(t.parentContainer===e.parentContainer)return e.parentContainer.getIndex(e)-t.parentContainer.getIndex(t);if(t.parentContainer===e)return-1;if(e.parentContainer===t)return 1;for(var n=t.getIndexList(),r=e.getIndexList(),i=Math.min(n.length,r.length),o=0;o<i;o++){var s=n[o],a=r[o];if(s!==a)return a-s}return r.length-n.length}return this.displayList.getIndex(e)-this.displayList.getIndex(t)},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(t){return this.manager.addPointer(t)},setDefaultCursor:function(t){return this.manager.setDefaultCursor(t),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(f.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0,this._dragState.length=0;for(var t=0;t<10;t++)this._drag[t]=[],this._over[t]=[];this.removeAllListeners();var e=this.manager;e.canvas.style.cursor=e.defaultCursor;var n=this.systems.events;n.off(x.TRANSITION_START,this.transitionIn,this),n.off(x.TRANSITION_OUT,this.transitionOut,this),n.off(x.TRANSITION_COMPLETE,this.transitionComplete,this),n.off(x.PRE_UPDATE,this.preUpdate,this),e.events.off(f.GAME_OUT,this.onGameOut,this),e.events.off(f.GAME_OVER,this.onGameOver,this),n.off(x.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(f.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(x.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});y.register("InputPlugin",E,"input"),t.exports=E},function(t,e,n){t.exports={Events:n(154),KeyboardManager:n(410),KeyboardPlugin:n(1330),Key:n(512),KeyCodes:n(143),KeyCombo:n(513),AdvanceKeyCombo:n(515),ProcessKeyCombo:n(514),ResetKeyCombo:n(516),JustDown:n(1332),JustUp:n(1333),DownDuration:n(1334),UpDuration:n(1335)}},function(t,e){t.exports="keydown"},function(t,e){t.exports="keyup"},function(t,e){t.exports="keycombomatch"},function(t,e){t.exports="down"},function(t,e){t.exports="keydown-"},function(t,e){t.exports="keyup-"},function(t,e){t.exports="up"},function(t,e,n){var r=n(0),i=n(9),o=n(154),s=n(22),a=n(6),u=n(51),c=n(153),h=n(512),l=n(143),f=n(513),d=n(1331),p=n(20),v=n(76),g=new r({Extends:i,initialize:function(t){i.call(this),this.game=t.systems.game,this.scene=t.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=t,this.manager=t.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,t.pluginEvents.once(u.BOOT,this.boot,this),t.pluginEvents.on(u.START,this.start,this)},boot:function(){var t=this.settings.input;this.enabled=a(t,"keyboard",!0);var e=a(t,"keyboard.capture",null);e&&this.addCaptures(e),this.sceneInputPlugin.pluginEvents.once(u.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(u.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(u.SHUTDOWN,this.shutdown,this),this.game.events.on(s.BLUR,this.resetKeys,this),this.scene.sys.events.on(p.PAUSE,this.resetKeys,this),this.scene.sys.events.on(p.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(t){return this.manager.addCapture(t),this},removeCapture:function(t){return this.manager.removeCapture(t),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:l.UP,down:l.DOWN,left:l.LEFT,right:l.RIGHT,space:l.SPACE,shift:l.SHIFT})},addKeys:function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1);var r={};if("string"===typeof t){t=t.split(",");for(var i=0;i<t.length;i++){var o=t[i].trim();o&&(r[o]=this.addKey(o,e,n))}}else for(var s in t)r[s]=this.addKey(t[s],e,n);return r},addKey:function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n=!1);var r=this.keys;if(t instanceof h){var i=r.indexOf(t);return i>-1?r[i]=t:r[t.keyCode]=t,e&&this.addCapture(t.keyCode),t.setEmitOnRepeat(n),t}return"string"===typeof t&&(t=l[t.toUpperCase()]),r[t]||(r[t]=new h(this,t),e&&this.addCapture(t),r[t].setEmitOnRepeat(n)),r[t]},removeKey:function(t,e){void 0===e&&(e=!1);var n,r=this.keys;if(t instanceof h){var i=r.indexOf(t);i>-1&&(n=this.keys[i],this.keys[i]=void 0)}else"string"===typeof t&&(t=l[t.toUpperCase()]);return r[t]&&(n=r[t],r[t]=void 0),n&&(n.plugin=null,e&&n.destroy()),this},removeAllKeys:function(t){for(var e=this.keys,n=0;n<e.length;n++){var r=e[n];r&&(e[n]=void 0,t&&r.destroy())}return this},createCombo:function(t,e){return new f(this,t,e)},checkDown:function(t,e){if(void 0===e&&(e=0),this.enabled&&t.isDown){var n=v(this.time-t.timeDown,e);if(n>t._tick)return t._tick=n,!0}return!1},update:function(){var t=this.manager.queue,e=t.length;if(this.isActive()&&0!==e)for(var n=this.keys,r=0;r<e;r++){var i=t[r],s=i.keyCode,a=n[s],u=!1;void 0===i.cancelled&&(i.cancelled=0,i.stopImmediatePropagation=function(){i.cancelled=1},i.stopPropagation=function(){i.cancelled=-1}),-1!==i.cancelled&&(s===this.prevCode&&i.timeStamp===this.prevTime&&i.type===this.prevType||(this.prevCode=s,this.prevTime=i.timeStamp,this.prevType=i.type,"keydown"===i.type?(a&&(u=a.isDown,a.onDown(i)),i.cancelled||a&&u||(d[s]&&this.emit(o.KEY_DOWN+d[s],i),i.cancelled||this.emit(o.ANY_KEY_DOWN,i))):(a&&a.onUp(i),i.cancelled||(d[s]&&this.emit(o.KEY_UP+d[s],i),i.cancelled||this.emit(o.ANY_KEY_UP,i))),1===i.cancelled&&(i.cancelled=0)))}},resetKeys:function(){for(var t=this.keys,e=0;e<t.length;e++)t[e]&&t[e].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(u.MANAGER_PROCESS,this.update,this),this.game.events.off(s.BLUR,this.resetKeys),this.scene.sys.events.off(p.PAUSE,this.resetKeys,this),this.scene.sys.events.off(p.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var t=this.keys,e=0;e<t.length;e++)t[e]&&t[e].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});c.register("KeyboardPlugin",g,"keyboard","keyboard","inputKeyboard"),t.exports=g},function(t,e,n){var r=n(143),i={};for(var o in r)i[r[o]]=o;t.exports=i},function(t,e){t.exports=function(t){return!!t._justDown&&(t._justDown=!1,!0)}},function(t,e){t.exports=function(t){return!!t._justUp&&(t._justUp=!1,!0)}},function(t,e){t.exports=function(t,e){void 0===e&&(e=50);var n=t.plugin.game.loop.time-t.timeDown;return t.isDown&&n<e}},function(t,e){t.exports=function(t,e){void 0===e&&(e=50);var n=t.plugin.game.loop.time-t.timeUp;return t.isUp&&n<e}},function(t,e,n){t.exports={MouseManager:n(411)}},function(t,e,n){t.exports={TouchManager:n(413)}},function(t,e,n){var r=n(21),i=n(17),o={Events:n(95),FileTypes:n(1339),File:n(23),FileTypesManager:n(8),GetURL:n(155),LoaderPlugin:n(1365),MergeXHRSettings:n(240),MultiFile:n(49),XHRLoader:n(517),XHRSettings:n(156)};o=i(!1,o,r),t.exports=o},function(t,e,n){t.exports={AnimationJSONFile:n(1340),AsepriteFile:n(1341),AtlasJSONFile:n(1342),AtlasXMLFile:n(1343),AudioFile:n(518),AudioSpriteFile:n(1344),BinaryFile:n(1345),BitmapFontFile:n(1346),CSSFile:n(1347),GLSLFile:n(1348),HTML5AudioFile:n(519),HTMLFile:n(1349),HTMLTextureFile:n(1350),ImageFile:n(71),JSONFile:n(61),MultiAtlasFile:n(1351),MultiScriptFile:n(1352),OBJFile:n(1353),PackFile:n(1354),PluginFile:n(1355),SceneFile:n(1356),ScenePluginFile:n(1357),ScriptFile:n(520),SpriteSheetFile:n(1358),SVGFile:n(1359),TextFile:n(242),TilemapCSVFile:n(1360),TilemapImpactFile:n(1361),TilemapJSONFile:n(1362),UnityAtlasFile:n(1363),VideoFile:n(1364),XMLFile:n(241)}},function(t,e,n){var r=n(0),i=n(8),o=n(61),s=n(95),a=new r({Extends:o,initialize:function(t,e,n,r,i){o.call(this,t,e,n,r,i),this.type="animationJSON"},onProcess:function(){this.loader.once(s.POST_PROCESS,this.onLoadComplete,this),o.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});i.register("animation",(function(t,e,n,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new a(this,t[i]));else this.addFile(new a(this,t,e,r,n));return this})),t.exports=a},function(t,e,n){var r=n(0),i=n(8),o=n(2),s=n(71),a=n(7),u=n(61),c=n(49),h=new r({Extends:c,initialize:function(t,e,n,r,i,h){var l,f;if(a(e)){var d=e;e=o(d,"key"),l=new s(t,{key:e,url:o(d,"textureURL"),extension:o(d,"textureExtension","png"),normalMap:o(d,"normalMap"),xhrSettings:o(d,"textureXhrSettings")}),f=new u(t,{key:e,url:o(d,"atlasURL"),extension:o(d,"atlasExtension","json"),xhrSettings:o(d,"atlasXhrSettings")})}else l=new s(t,e,n,i),f=new u(t,e,r,h);l.linkFile?c.call(this,t,"atlasjson",e,[l,f,l.linkFile]):c.call(this,t,"atlasjson",e,[l,f])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],n=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(t.key,t.data,e.data,n),e.addToCache(),this.complete=!0}}});i.register("aseprite",(function(t,e,n,r,i){var o;if(Array.isArray(t))for(var s=0;s<t.length;s++)o=new h(this,t[s]),this.addFile(o.files);else o=new h(this,t,e,n,r,i),this.addFile(o.files);return this})),t.exports=h},function(t,e,n){var r=n(0),i=n(8),o=n(2),s=n(71),a=n(7),u=n(61),c=n(49),h=new r({Extends:c,initialize:function(t,e,n,r,i,h){var l,f;if(a(e)){var d=e;e=o(d,"key"),l=new s(t,{key:e,url:o(d,"textureURL"),extension:o(d,"textureExtension","png"),normalMap:o(d,"normalMap"),xhrSettings:o(d,"textureXhrSettings")}),f=new u(t,{key:e,url:o(d,"atlasURL"),extension:o(d,"atlasExtension","json"),xhrSettings:o(d,"atlasXhrSettings")})}else l=new s(t,e,n,i),f=new u(t,e,r,h);l.linkFile?c.call(this,t,"atlasjson",e,[l,f,l.linkFile]):c.call(this,t,"atlasjson",e,[l,f])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],n=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlas(t.key,t.data,e.data,n),e.pendingDestroy(),this.complete=!0}}});i.register("atlas",(function(t,e,n,r,i){var o;if(Array.isArray(t))for(var s=0;s<t.length;s++)o=new h(this,t[s]),this.addFile(o.files);else o=new h(this,t,e,n,r,i),this.addFile(o.files);return this})),t.exports=h},function(t,e,n){var r=n(0),i=n(8),o=n(2),s=n(71),a=n(7),u=n(49),c=n(241),h=new r({Extends:u,initialize:function(t,e,n,r,i,h){var l,f;if(a(e)){var d=e;e=o(d,"key"),l=new s(t,{key:e,url:o(d,"textureURL"),extension:o(d,"textureExtension","png"),normalMap:o(d,"normalMap"),xhrSettings:o(d,"textureXhrSettings")}),f=new c(t,{key:e,url:o(d,"atlasURL"),extension:o(d,"atlasExtension","xml"),xhrSettings:o(d,"atlasXhrSettings")})}else l=new s(t,e,n,i),f=new c(t,e,r,h);l.linkFile?u.call(this,t,"atlasxml",e,[l,f,l.linkFile]):u.call(this,t,"atlasxml",e,[l,f])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],n=this.files[2]?this.files[2].data:null;this.loader.textureManager.addAtlasXML(t.key,t.data,e.data,n),e.pendingDestroy(),this.complete=!0}}});i.register("atlasXML",(function(t,e,n,r,i){var o;if(Array.isArray(t))for(var s=0;s<t.length;s++)o=new h(this,t[s]),this.addFile(o.files);else o=new h(this,t,e,n,r,i),this.addFile(o.files);return this})),t.exports=h},function(t,e,n){var r=n(518),i=n(0),o=n(8),s=n(2),a=n(7),u=n(61),c=n(49),h=new i({Extends:c,initialize:function(t,e,n,i,o,h,l){if(a(e)){var f=e;e=s(f,"key"),n=s(f,"jsonURL"),i=s(f,"audioURL"),o=s(f,"audioConfig"),h=s(f,"audioXhrSettings"),l=s(f,"jsonXhrSettings")}var d;if(i){var p=r.create(t,e,i,o,h);p&&(d=new u(t,e,n,l),c.call(this,t,"audiosprite",e,[p,d]),this.config.resourceLoad=!1)}else d=new u(t,e,n,l),c.call(this,t,"audiosprite",e,[d]),this.config.resourceLoad=!0,this.config.audioConfig=o,this.config.audioXhrSettings=h},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,this.config.resourceLoad&&"json"===t.type&&t.data.hasOwnProperty("resources"))){var e=t.data.resources,n=s(this.config,"audioConfig"),i=s(this.config,"audioXhrSettings"),o=r.create(this.loader,t.key,e,n,i);o&&(this.addToMultiFile(o),this.loader.addFile(o))}},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1];t.addToCache(),e.addToCache(),this.complete=!0}}});o.register("audioSprite",(function(t,e,n,r,i,o){var s,a=this.systems.game,u=a.config.audio,c=a.device.audio;if(u&&u.noAudio||!c.webAudio&&!c.audioData)return this;if(Array.isArray(t))for(var l=0;l<t.length;l++)(s=new h(this,t[l])).files&&this.addFile(s.files);else(s=new h(this,t,e,n,r,i,o)).files&&this.addFile(s.files);return this}))},function(t,e,n){var r=n(0),i=n(21),o=n(23),s=n(8),a=n(2),u=n(7),c=new r({Extends:o,initialize:function(t,e,n,r,i){var s="bin";if(u(e)){var c=e;e=a(c,"key"),n=a(c,"url"),r=a(c,"xhrSettings"),s=a(c,"extension",s),i=a(c,"dataType",i)}var h={type:"binary",cache:t.cacheManager.binary,extension:s,responseType:"arraybuffer",key:e,url:n,xhrSettings:r,config:{dataType:i}};o.call(this,t,h)},onProcess:function(){this.state=i.FILE_PROCESSING;var t=this.config.dataType;this.data=t?new t(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});s.register("binary",(function(t,e,n,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new c(this,t[i]));else this.addFile(new c(this,t,e,r,n));return this})),t.exports=c},function(t,e,n){var r=n(0),i=n(8),o=n(2),s=n(71),a=n(7),u=n(49),c=n(212),h=n(241),l=new r({Extends:u,initialize:function(t,e,n,r,i,c){var l,f;if(a(e)){var d=e;e=o(d,"key"),l=new s(t,{key:e,url:o(d,"textureURL"),extension:o(d,"textureExtension","png"),normalMap:o(d,"normalMap"),xhrSettings:o(d,"textureXhrSettings")}),f=new h(t,{key:e,url:o(d,"fontDataURL"),extension:o(d,"fontDataExtension","xml"),xhrSettings:o(d,"fontDataXhrSettings")})}else l=new s(t,e,n,i),f=new h(t,e,r,c);l.linkFile?u.call(this,t,"bitmapfont",e,[l,f,l.linkFile]):u.call(this,t,"bitmapfont",e,[l,f])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1];t.addToCache(),e.pendingDestroy();var n=t.cache.get(t.key),r=c(e.data,t.cache.getFrame(t.key),0,0,n);this.loader.cacheManager.bitmapFont.add(t.key,{data:r,texture:t.key,frame:null}),this.complete=!0}}});i.register("bitmapFont",(function(t,e,n,r,i){var o;if(Array.isArray(t))for(var s=0;s<t.length;s++)o=new l(this,t[s]),this.addFile(o.files);else o=new l(this,t,e,n,r,i),this.addFile(o.files);return this})),t.exports=l},function(t,e,n){var r=n(0),i=n(21),o=n(23),s=n(8),a=n(2),u=n(7),c=new r({Extends:o,initialize:function(t,e,n,r){var i="css";if(u(e)){var s=e;e=a(s,"key"),n=a(s,"url"),r=a(s,"xhrSettings"),i=a(s,"extension",i)}var c={type:"script",cache:!1,extension:i,responseType:"text",key:e,url:n,xhrSettings:r};o.call(this,t,c)},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});s.register("css",(function(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new c(this,t[r]));else this.addFile(new c(this,t,e,n));return this})),t.exports=c},function(t,e,n){var r=n(0),i=n(21),o=n(23),s=n(8),a=n(2),u=n(7),c=n(396),h=new r({Extends:o,initialize:function(t,e,n,r,i){var s="glsl";if(u(e)){var c=e;e=a(c,"key"),n=a(c,"url"),r=a(c,"shaderType","fragment"),i=a(c,"xhrSettings"),s=a(c,"extension",s)}else void 0===r&&(r="fragment");var h={type:"glsl",cache:t.cacheManager.shader,extension:s,responseType:"text",key:e,url:n,config:{shaderType:r},xhrSettings:i};o.call(this,t,h)},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t=this.data.split("\n"),e=this.extractBlock(t,0);if(e)for(;e;){var n=this.getShaderName(e.header),r=this.getShaderType(e.header),i=this.getShaderUniforms(e.header),o=e.shader;if(this.cache.has(n)){var s=this.cache.get(n);"fragment"===r?s.fragmentSrc=o:s.vertexSrc=o,s.uniforms||(s.uniforms=i)}else"fragment"===r?this.cache.add(n,new c(n,o,"",i)):this.cache.add(n,new c(n,"",o,i));e=this.extractBlock(t,e.offset)}else"fragment"===this.config.shaderType?this.cache.add(this.key,new c(this.key,this.data)):this.cache.add(this.key,new c(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(t){for(var e=0;e<t.length;e++){var n=t[e].trim();if("name:"===n.substring(0,5))return n.substring(5).trim()}return this.key},getShaderType:function(t){for(var e=0;e<t.length;e++){var n=t[e].trim();if("type:"===n.substring(0,5))return n.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(t){for(var e={},n=0;n<t.length;n++){var r=t[n].trim();if("uniform."===r.substring(0,8)){var i=r.indexOf(":");if(i){var o=r.substring(8,i);try{e[o]=JSON.parse(r.substring(i+1))}catch(s){console.warn("Invalid uniform JSON: "+o)}}}}return e},extractBlock:function(t,e){for(var n=-1,r=-1,i=-1,o=!1,s=!1,a=[],u=[],c=e;c<t.length;c++){var h=t[c].trim();if("---"===h)if(-1===n)n=c,o=!0;else{if(!o){s=!1;break}r=c,o=!1,s=!0}else o?a.push(h):s&&(u.push(h),i=c)}return o||-1===r?null:{header:a,shader:u.join("\n"),offset:i}}});s.register("glsl",(function(t,e,n,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new h(this,t[i]));else this.addFile(new h(this,t,e,n,r));return this})),t.exports=h},function(t,e,n){var r=n(0),i=n(21),o=n(23),s=n(8),a=n(2),u=n(7),c=new r({Extends:o,initialize:function(t,e,n,r){var i="html";if(u(e)){var s=e;e=a(s,"key"),n=a(s,"url"),r=a(s,"xhrSettings"),i=a(s,"extension",i)}var c={type:"text",cache:t.cacheManager.html,extension:i,responseType:"text",key:e,url:n,xhrSettings:r};o.call(this,t,c)},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});s.register("html",(function(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new c(this,t[r]));else this.addFile(new c(this,t,e,n));return this})),t.exports=c},function(t,e,n){var r=n(0),i=n(21),o=n(23),s=n(8),a=n(2),u=n(7),c=new r({Extends:o,initialize:function(t,e,n,r,i,s){void 0===r&&(r=512),void 0===i&&(i=512);var c="html";if(u(e)){var h=e;e=a(h,"key"),n=a(h,"url"),s=a(h,"xhrSettings"),c=a(h,"extension",c),r=a(h,"width",r),i=a(h,"height",i)}var l={type:"html",cache:t.textureManager,extension:c,responseType:"text",key:e,url:n,xhrSettings:s,config:{width:r,height:i}};o.call(this,t,l)},onProcess:function(){this.state=i.FILE_PROCESSING;var t=this.config.width,e=this.config.height,n=[];n.push('<svg width="'+t+'px" height="'+e+'px" viewBox="0 0 '+t+" "+e+'" xmlns="http://www.w3.org/2000/svg">'),n.push('<foreignObject width="100%" height="100%">'),n.push('<body xmlns="http://www.w3.org/1999/xhtml">'),n.push(this.xhrLoader.responseText),n.push("</body>"),n.push("</foreignObject>"),n.push("</svg>");var r=[n.join("\n")],s=this;try{var a=new window.Blob(r,{type:"image/svg+xml;charset=utf-8"})}catch(u){return s.state=i.FILE_ERRORED,void s.onProcessComplete()}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){o.revokeObjectURL(s.data),s.onProcessComplete()},this.data.onerror=function(){o.revokeObjectURL(s.data),s.onProcessError()},o.createObjectURL(this.data,a,"image/svg+xml")},addToCache:function(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});s.register("htmlTexture",(function(t,e,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new c(this,t[o]));else this.addFile(new c(this,t,e,n,r,i));return this})),t.exports=c},function(t,e,n){var r=n(0),i=n(8),o=n(2),s=n(71),a=n(7),u=n(61),c=n(49),h=new r({Extends:c,initialize:function(t,e,n,r,i,s,h){if(a(e)){var l=e;e=o(l,"key"),n=o(l,"url",!1)?o(l,"url"):o(l,"atlasURL"),s=o(l,"xhrSettings"),r=o(l,"path"),i=o(l,"baseURL"),h=o(l,"textureXhrSettings")}var f=new u(t,e,n,s);c.call(this,t,"multiatlas",e,[f]),this.config.path=r,this.config.baseURL=i,this.config.textureXhrSettings=h},onFileComplete:function(t){if(-1!==this.files.indexOf(t)&&(this.pending--,"json"===t.type&&t.data.hasOwnProperty("textures"))){var e=t.data.textures,n=this.config,r=this.loader,i=r.baseURL,a=r.path,u=r.prefix,c=o(n,"baseURL",this.baseURL),h=o(n,"path",this.path),l=o(n,"prefix",this.prefix),f=o(n,"textureXhrSettings");r.setBaseURL(c),r.setPath(h),r.setPrefix(l);for(var d=0;d<e.length;d++){var p=e[d].image,v="MA"+this.multiKeyIndex+"_"+p,g=new s(r,v,p,f);if(this.addToMultiFile(g),r.addFile(g),e[d].normalMap){var m=new s(r,v,e[d].normalMap,f);m.type="normalMap",g.setLink(m),this.addToMultiFile(m),r.addFile(m)}}r.setBaseURL(i),r.setPath(a),r.setPrefix(u)}},addToCache:function(){if(this.isReadyToProcess()){for(var t=this.files[0],e=[],n=[],r=[],i=1;i<this.files.length;i++){var o=this.files[i];if("normalMap"!==o.type)for(var s=o.key.indexOf("_"),a=o.key.substr(s+1),u=o.data,c=0;c<t.data.textures.length;c++){var h=t.data.textures[c];if(h.image===a){n.push(u),e.push(h),o.linkFile&&r.push(o.linkFile.data);break}}}for(0===r.length&&(r=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,n,e,r),this.complete=!0,i=0;i<this.files.length;i++)this.files[i].pendingDestroy()}}});i.register("multiatlas",(function(t,e,n,r,i){var o;if(Array.isArray(t))for(var s=0;s<t.length;s++)o=new h(this,t[s]),this.addFile(o.files);else o=new h(this,t,e,n,r,i),this.addFile(o.files);return this})),t.exports=h},function(t,e,n){var r=n(0),i=n(8),o=n(2),s=n(7),a=n(49),u=n(520),c=new r({Extends:a,initialize:function(t,e,n,r){var i="js",c=[];if(s(e)){var h=e;e=o(h,"key"),n=o(h,"url"),r=o(h,"xhrSettings"),i=o(h,"extension",i)}Array.isArray(n)||(n=[n]);for(var l=0;l<n.length;l++){var f=new u(t,{key:e+"_"+l.toString(),url:n[l],extension:i,xhrSettings:r});f.onProcess=function(){this.onProcessComplete()},c.push(f)}a.call(this,t,"scripts",e,c)},addToCache:function(){if(this.isReadyToProcess()){for(var t=0;t<this.files.length;t++){var e=this.files[t];e.data=document.createElement("script"),e.data.language="javascript",e.data.type="text/javascript",e.data.defer=!1,e.data.text=e.xhrLoader.responseText,document.head.appendChild(e.data)}this.complete=!0}}});i.register("scripts",(function(t,e,n){var r;if(Array.isArray(t))for(var i=0;i<t.length;i++)r=new c(this,t[i]),this.addFile(r.files);else r=new c(this,t,e,n),this.addFile(r.files);return this})),t.exports=c},function(t,e,n){var r=n(0),i=n(8),o=n(2),s=n(7),a=n(49),u=n(498),c=n(499),h=n(242),l=new r({Extends:a,initialize:function(t,e,n,r,i,u){var c,l,f=t.cacheManager.obj;if(s(e)){var d=e;e=o(d,"key"),c=new h(t,{key:e,type:"obj",cache:f,url:o(d,"url"),extension:o(d,"extension","obj"),xhrSettings:o(d,"xhrSettings"),config:{flipUV:o(d,"flipUV",i)}}),(r=o(d,"matURL"))&&(l=new h(t,{key:e,type:"mat",cache:f,url:r,extension:o(d,"matExtension","mat"),xhrSettings:o(d,"xhrSettings")}))}else c=new h(t,{key:e,url:n,type:"obj",cache:f,extension:"obj",xhrSettings:u,config:{flipUV:i}}),r&&(l=new h(t,{key:e,url:r,type:"mat",cache:f,extension:"mat",xhrSettings:u}));a.call(this,t,"obj",e,[c,l])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],n=u(t.data,t.config.flipUV);e&&(n.materials=c(e.data)),t.cache.add(t.key,n),this.complete=!0}}});i.register("obj",(function(t,e,n,r,i){var o;if(Array.isArray(t))for(var s=0;s<t.length;s++)o=new l(this,t[s]),this.addFile(o.files);else o=new l(this,t,e,n,r,i),this.addFile(o.files);return this})),t.exports=l},function(t,e,n){var r=n(0),i=n(21),o=n(8),s=n(61),a=new r({Extends:s,initialize:function(t,e,n,r,i){s.call(this,t,e,n,r,i),this.type="packfile"},onProcess:function(){this.state!==i.FILE_POPULATED&&(this.state=i.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});o.register("pack",(function(t,e,n,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new a(this,t[i]));else this.addFile(new a(this,t,e,r,n));return this})),t.exports=a},function(t,e,n){var r=n(0),i=n(21),o=n(23),s=n(8),a=n(2),u=n(7),c=new r({Extends:o,initialize:function(t,e,n,r,s,c){var h="js";if(u(e)){var l=e;e=a(l,"key"),n=a(l,"url"),c=a(l,"xhrSettings"),h=a(l,"extension",h),r=a(l,"start"),s=a(l,"mapping")}var f={type:"plugin",cache:!1,extension:h,responseType:"text",key:e,url:n,xhrSettings:c,config:{start:r,mapping:s}};o.call(this,t,f),"function"===typeof n&&(this.data=n,this.state=i.FILE_POPULATED)},onProcess:function(){var t=this.loader.systems.plugins,e=this.config,n=a(e,"start",!1),r=a(e,"mapping",null);if(this.state===i.FILE_POPULATED)t.install(this.key,this.data,n,r);else{this.state=i.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data);var o=t.install(this.key,window[this.key],n,r);(n||r)&&(this.loader.systems[r]=o,this.loader.scene[r]=o)}this.onProcessComplete()}});s.register("plugin",(function(t,e,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new c(this,t[o]));else this.addFile(new c(this,t,e,n,r,i));return this})),t.exports=c},function(t,e,n){var r=n(0),i=n(21),o=n(23),s=n(8),a=n(2),u=n(7),c=new r({Extends:o,initialize:function(t,e,n,r){var i="js";if(u(e)){var s=e;e=a(s,"key"),n=a(s,"url"),r=a(s,"xhrSettings"),i=a(s,"extension",i)}var c={type:"text",extension:i,responseType:"text",key:e,url:n,xhrSettings:r};o.call(this,t,c)},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t=this.data.concat("(function(){\nreturn new "+this.key+"();\n}).call(this);"),e=eval;this.loader.sceneManager.add(this.key,e(t)),this.complete=!0}});s.register("sceneFile",(function(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new c(this,t[r]));else this.addFile(new c(this,t,e,n));return this})),t.exports=c},function(t,e,n){var r=n(0),i=n(21),o=n(23),s=n(8),a=n(2),u=n(7),c=new r({Extends:o,initialize:function(t,e,n,r,s,c){var h="js";if(u(e)){var l=e;e=a(l,"key"),n=a(l,"url"),c=a(l,"xhrSettings"),h=a(l,"extension",h),r=a(l,"systemKey"),s=a(l,"sceneKey")}var f={type:"scenePlugin",cache:!1,extension:h,responseType:"text",key:e,url:n,xhrSettings:c,config:{systemKey:r,sceneKey:s}};o.call(this,t,f),"function"===typeof n&&(this.data=n,this.state=i.FILE_POPULATED)},onProcess:function(){var t=this.loader.systems.plugins,e=this.config,n=this.key,r=a(e,"systemKey",n),o=a(e,"sceneKey",n);this.state===i.FILE_POPULATED?t.installScenePlugin(r,this.data,o,this.loader.scene,!0):(this.state=i.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),t.installScenePlugin(r,window[this.key],o,this.loader.scene,!0)),this.onProcessComplete()}});s.register("scenePlugin",(function(t,e,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)this.addFile(new c(this,t[o]));else this.addFile(new c(this,t,e,n,r,i));return this})),t.exports=c},function(t,e,n){var r=n(0),i=n(8),o=n(71),s=new r({Extends:o,initialize:function(t,e,n,r,i){o.call(this,t,e,n,i,r),this.type="spritesheet"},addToCache:function(){var t=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(t)}});i.register("spritesheet",(function(t,e,n,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new s(this,t[i]));else this.addFile(new s(this,t,e,n,r));return this})),t.exports=s},function(t,e,n){var r=n(0),i=n(21),o=n(23),s=n(8),a=n(2),u=n(7),c=new r({Extends:o,initialize:function(t,e,n,r,i){var s="svg";if(u(e)){var c=e;e=a(c,"key"),n=a(c,"url"),r=a(c,"svgConfig",{}),i=a(c,"xhrSettings"),s=a(c,"extension",s)}var h={type:"svg",cache:t.textureManager,extension:s,responseType:"text",key:e,url:n,xhrSettings:i,config:{width:a(r,"width"),height:a(r,"height"),scale:a(r,"scale")}};o.call(this,t,h)},onProcess:function(){this.state=i.FILE_PROCESSING;var t=this.xhrLoader.responseText,e=[t],n=this.config.width,r=this.config.height,s=this.config.scale;t:if(n&&r||s){var a=(new DOMParser).parseFromString(t,"text/xml").getElementsByTagName("svg")[0],u=a.hasAttribute("viewBox"),c=parseFloat(a.getAttribute("width")),h=parseFloat(a.getAttribute("height"));if(!u&&c&&h)a.setAttribute("viewBox","0  0 "+c+" "+h);else if(u&&!c&&!h){var l=a.getAttribute("viewBox").split(/\s+|,/);c=l[2],h=l[3]}if(s){if(!c||!h)break t;n=c*s,r=h*s}a.setAttribute("width",n.toString()+"px"),a.setAttribute("height",r.toString()+"px"),e=[(new XMLSerializer).serializeToString(a)]}try{var f=new window.Blob(e,{type:"image/svg+xml;charset=utf-8"})}catch(v){return void this.onProcessError()}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var d=this,p=!1;this.data.onload=function(){p||o.revokeObjectURL(d.data),d.onProcessComplete()},this.data.onerror=function(){p?d.onProcessError():(p=!0,o.revokeObjectURL(d.data),d.data.src="data:image/svg+xml,"+encodeURIComponent(e.join("")))},o.createObjectURL(this.data,f,"image/svg+xml")},addToCache:function(){var t=this.cache.addImage(this.key,this.data);this.pendingDestroy(t)}});s.register("svg",(function(t,e,n,r){if(Array.isArray(t))for(var i=0;i<t.length;i++)this.addFile(new c(this,t[i]));else this.addFile(new c(this,t,e,n,r));return this})),t.exports=c},function(t,e,n){var r=n(0),i=n(21),o=n(23),s=n(8),a=n(2),u=n(7),c=n(40),h=new r({Extends:o,initialize:function(t,e,n,r){var i="csv";if(u(e)){var s=e;e=a(s,"key"),n=a(s,"url"),r=a(s,"xhrSettings"),i=a(s,"extension",i)}var h={type:"tilemapCSV",cache:t.cacheManager.tilemap,extension:i,responseType:"text",key:e,url:n,xhrSettings:r};o.call(this,t,h),this.tilemapFormat=c.CSV},onProcess:function(){this.state=i.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var t={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});s.register("tilemapCSV",(function(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new h(this,t[r]));else this.addFile(new h(this,t,e,n));return this})),t.exports=h},function(t,e,n){var r=n(0),i=n(8),o=n(61),s=n(40),a=new r({Extends:o,initialize:function(t,e,n,r){o.call(this,t,e,n,r),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var t={format:s.WELTMEISTER,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});i.register("tilemapImpact",(function(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new a(this,t[r]));else this.addFile(new a(this,t,e,n));return this})),t.exports=a},function(t,e,n){var r=n(0),i=n(8),o=n(61),s=n(40),a=new r({Extends:o,initialize:function(t,e,n,r){o.call(this,t,e,n,r),this.type="tilemapJSON",this.cache=t.cacheManager.tilemap},addToCache:function(){var t={format:s.TILED_JSON,data:this.data};this.cache.add(this.key,t),this.pendingDestroy(t)}});i.register("tilemapTiledJSON",(function(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)this.addFile(new a(this,t[r]));else this.addFile(new a(this,t,e,n));return this})),t.exports=a},function(t,e,n){var r=n(0),i=n(8),o=n(2),s=n(71),a=n(7),u=n(49),c=n(242),h=new r({Extends:u,initialize:function(t,e,n,r,i,h){var l,f;if(a(e)){var d=e;e=o(d,"key"),l=new s(t,{key:e,url:o(d,"textureURL"),extension:o(d,"textureExtension","png"),normalMap:o(d,"normalMap"),xhrSettings:o(d,"textureXhrSettings")}),f=new c(t,{key:e,url:o(d,"atlasURL"),extension:o(d,"atlasExtension","txt"),xhrSettings:o(d,"atlasXhrSettings")})}else l=new s(t,e,n,i),f=new c(t,e,r,h);l.linkFile?u.call(this,t,"unityatlas",e,[l,f,l.linkFile]):u.call(this,t,"unityatlas",e,[l,f])},addToCache:function(){if(this.isReadyToProcess()){var t=this.files[0],e=this.files[1],n=this.files[2]?this.files[2].data:null;this.loader.textureManager.addUnityAtlas(t.key,t.data,e.data,n),e.pendingDestroy(),this.complete=!0}}});i.register("unityAtlas",(function(t,e,n,r,i){var o;if(Array.isArray(t))for(var s=0;s<t.length;s++)o=new h(this,t[s]),this.addFile(o.files);else o=new h(this,t,e,n,r,i),this.addFile(o.files);return this})),t.exports=h},function(t,e,n){var r=n(0),i=n(21),o=n(23),s=n(8),a=n(155),u=n(2),c=n(7),h=new r({Extends:o,initialize:function(t,e,n,r,i,s,a){void 0===r&&(r="loadeddata"),void 0===i&&(i=!1),void 0===s&&(s=!1),"loadeddata"!==r&&"canplay"!==r&&"canplaythrough"!==r&&(r="loadeddata");var u={type:"video",cache:t.cacheManager.video,extension:n.type,responseType:"blob",key:e,url:n.url,xhrSettings:a,config:{loadEvent:r,asBlob:i,noAudio:s}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),o.call(this,t,u)},onProcess:function(){if(this.state=i.FILE_PROCESSING,this.config.asBlob){var t=this.createVideoElement();this.data=t;var e=this;this.data.onloadeddata=function(){e.onProcessComplete()},this.data.onerror=function(){o.revokeObjectURL(e.data),e.onProcessError()},o.createObjectURL(t,this.xhrLoader.response,""),t.load()}else this.onProcessComplete()},createVideoElement:function(){var t=document.createElement("video");return t.controls=!1,t.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(t.muted=!0,t.defaultMuted=!0,t.setAttribute("autoplay","autoplay")),t.setAttribute("playsinline","playsinline"),t.setAttribute("preload","auto"),t},onVideoLoadHandler:function(t){var e=t.target;e.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),e.removeEventListener("error",this.onErrorCallback,!0),this.data=e,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(t){var e=t.target;e&&(e.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),e.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var t=this.config.loadEvent;if(this.config.asBlob)o.prototype.load.call(this);else{this.percentComplete=0;var e=this.createVideoElement();e.addEventListener(t,this.onLoadCallback,!0),e.addEventListener("error",this.onErrorCallback,!0),e.src=a(this,this.loader.baseURL),e.load()}}});h.create=function(t,e,n,r,i,o,s){var a=t.systems.game;c(e)&&(n=u(e,"url",[]),r=u(e,"loadEvent","loadeddata"),i=u(e,"asBlob",!1),o=u(e,"noAudio",!1),s=u(e,"xhrSettings"),e=u(e,"key"));var l=h.getVideoURL(a,n);if(l)return new h(t,e,l,r,i,o,s)},h.getVideoURL=function(t,e){Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++){var r,i=u(e[n],"url",e[n]);if(0===i.indexOf("blob:"))return{url:i,type:""};if(r=0===i.indexOf("data:")?i.split(",")[0].match(/\/(.*?);/):i.match(/\.([a-zA-Z0-9]+)($|\?)/),r=u(e[n],"type",r?r[1]:"").toLowerCase(),t.device.video[r])return{url:i,type:r}}return null},s.register("video",(function(t,e,n,r,i,o){var s;if(Array.isArray(t))for(var a=0;a<t.length;a++)(s=h.create(this,t[a]))&&this.addFile(s);else(s=h.create(this,t,e,n,r,i,o))&&this.addFile(s);return this})),t.exports=h},function(t,e,n){var r=n(0),i=n(21),o=n(149),s=n(9),a=n(95),u=n(8),c=n(2),h=n(24),l=n(20),f=n(156),d=new r({Extends:s,initialize:function(t){s.call(this);var e=t.sys.game.config,n=t.sys.settings.loader;this.scene=t,this.systems=t.sys,this.cacheManager=t.sys.cache,this.textureManager=t.sys.textures,this.sceneManager=t.sys.game.scene,u.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(c(n,"baseURL",e.loaderBaseURL)),this.setPath(c(n,"path",e.loaderPath)),this.setPrefix(c(n,"prefix",e.loaderPrefix)),this.maxParallelDownloads=c(n,"maxParallelDownloads",e.loaderMaxParallelDownloads),this.xhr=f(c(n,"responseType",e.loaderResponseType),c(n,"async",e.loaderAsync),c(n,"user",e.loaderUser),c(n,"password",e.loaderPassword),c(n,"timeout",e.loaderTimeout),c(n,"withCredentials",e.loaderWithCredentials)),this.crossOrigin=c(n,"crossOrigin",e.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new o,this.inflight=new o,this.queue=new o,this._deleteQueue=new o,this.totalFailed=0,this.totalComplete=0,this.state=i.LOADER_IDLE,this.multiKeyIndex=0,t.sys.events.once(l.BOOT,this.boot,this),t.sys.events.on(l.START,this.pluginStart,this)},boot:function(){this.systems.events.once(l.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(l.SHUTDOWN,this.shutdown,this)},setBaseURL:function(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.baseURL=t,this},setPath:function(t){return void 0===t&&(t=""),""!==t&&"/"!==t.substr(-1)&&(t=t.concat("/")),this.path=t,this},setPrefix:function(t){return void 0===t&&(t=""),this.prefix=t,this},setCORS:function(t){return this.crossOrigin=t,this},addFile:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var n=t[e];this.keyExists(n)||(this.list.set(n),this.emit(a.ADD,n.key,n.type,this,n),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(t){var e=t.hasCacheConflict();return e||this.list.iterate((function(n){if(n.type===t.type&&n.key===t.key)return e=!0,!1})),!e&&this.isLoading()&&(this.inflight.iterate((function(n){if(n.type===t.type&&n.key===t.key)return e=!0,!1})),this.queue.iterate((function(n){if(n.type===t.type&&n.key===t.key)return e=!0,!1}))),e},addPack:function(t,e){e&&t.hasOwnProperty(e)&&(t={packKey:t[e]});var n=0,r=this.baseURL,i=this.path,o=this.prefix;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var a=t[s],u=c(a,"baseURL",r),h=c(a,"path",i),l=c(a,"prefix",o),f=c(a,"files",null),d=c(a,"defaultType","void");if(Array.isArray(f)){this.setBaseURL(u),this.setPath(h),this.setPrefix(l);for(var p=0;p<f.length;p++){var v=f[p],g=v.hasOwnProperty("type")?v.type:d;this[g]&&(this[g](v),n++)}}}return this.setBaseURL(r),this.setPath(i),this.setPrefix(o),n>0},isLoading:function(){return this.state===i.LOADER_LOADING||this.state===i.LOADER_PROCESSING},isReady:function(){return this.state===i.LOADER_IDLE||this.state===i.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(a.START,this),0===this.list.size?this.loadComplete():(this.state=i.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(l.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(a.PROGRESS,this.progress)},update:function(){this.state===i.LOADER_LOADING&&this.list.size>0&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each((function(t){if((t.state===i.FILE_POPULATED||t.state===i.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(t),this.list.delete(t),t.crossOrigin||(t.crossOrigin=this.crossOrigin),t.load()),this.inflight.size===this.maxParallelDownloads)return!1}),this)},nextFile:function(t,e){this.inflight&&(this.inflight.delete(t),this.updateProgress(),e?(this.totalComplete++,this.queue.set(t),this.emit(a.FILE_LOAD,t),t.onProcess()):(this.totalFailed++,this._deleteQueue.set(t),this.emit(a.FILE_LOAD_ERROR,t),this.fileProcessComplete(t)))},fileProcessComplete:function(t){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(t.state===i.FILE_ERRORED?t.multiFile&&t.multiFile.onFileFailed(t):t.state===i.FILE_COMPLETE&&(t.multiFile?t.multiFile.isReadyToProcess()&&t.multiFile.addToCache():t.addToCache()),this.queue.delete(t),0===this.list.size&&0===this.inflight.size&&0===this.queue.size&&this.loadComplete())},loadComplete:function(){this.emit(a.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=i.LOADER_COMPLETE,this.systems.events.off(l.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(a.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(t){this._deleteQueue.set(t)},saveJSON:function(t,e){return this.save(JSON.stringify(t),e)},save:function(t,e,n){void 0===e&&(e="file.json"),void 0===n&&(n="application/json");var r=new Blob([t],{type:n}),i=URL.createObjectURL(r),o=document.createElement("a");return o.download=e,o.textContent="Download "+e,o.href=i,o.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var t=this.systems.game.config,e=this.systems.settings.loader;this.setBaseURL(c(e,"baseURL",t.loaderBaseURL)),this.setPath(c(e,"path",t.loaderPath)),this.setPrefix(c(e,"prefix",t.loaderPrefix)),this.state=i.LOADER_IDLE},shutdown:function(){this.reset(),this.state=i.LOADER_SHUTDOWN,this.systems.events.off(l.UPDATE,this.update,this),this.systems.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=i.LOADER_DESTROYED,this.systems.events.off(l.UPDATE,this.update,this),this.systems.events.off(l.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});h.register("Loader",d,"load"),t.exports=d},function(t,e,n){var r=n(62),i=n(17),o={ArcadePhysics:n(1367),Body:n(527),Collider:n(528),Components:n(243),Events:n(245),Factory:n(521),GetOverlapX:n(246),GetOverlapY:n(247),SeparateX:n(537),SeparateY:n(538),Group:n(524),Image:n(522),Sprite:n(157),StaticBody:n(539),StaticGroup:n(525),Tilemap:n(1391),World:n(526)};o=i(!1,o,r),t.exports=o},function(t,e,n){var r=n(0),i=n(36),o=n(50),s=n(353),a=n(521),u=n(2),c=n(127),h=n(523),l=n(244),f=n(24),d=n(20),p=n(3),v=n(526),g=new r({initialize:function(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,t.sys.events.once(d.BOOT,this.boot,this),t.sys.events.on(d.START,this.start,this)},boot:function(){this.world=new v(this.scene,this.config),this.add=new a(this.world),this.systems.events.once(d.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new v(this.scene,this.config),this.add=new a(this.world));var t=this.systems.events;u(this.config,"customUpdate",!1)||t.on(d.UPDATE,this.world.update,this.world),t.on(d.POST_UPDATE,this.world.postUpdate,this.world),t.once(d.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(d.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(d.UPDATE,this.world.update,this.world)},getConfig:function(){var t=this.systems.game.config.physics,e=this.systems.settings.physics;return c(u(e,"arcade",{}),u(t,"arcade",{}))},overlap:function(t,e,n,r,i){return void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=n),this.world.collideObjects(t,e,n,r,i,!0)},collide:function(t,e,n,r,i){return void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=n),this.world.collideObjects(t,e,n,r,i,!1)},collideTiles:function(t,e,n,r,i){return this.world.collideTiles(t,e,n,r,i)},overlapTiles:function(t,e,n,r,i){return this.world.overlapTiles(t,e,n,r,i)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(t,e,n,r,i,o){void 0===r&&(r=60);var s=Math.atan2(n-t.y,e-t.x);return t.body.acceleration.setToPolar(s,r),void 0!==i&&void 0!==o&&t.body.maxVelocity.set(i,o),s},accelerateToObject:function(t,e,n,r,i){return this.accelerateTo(t,e.x,e.y,n,r,i)},closest:function(t,e){e||(e=this.world.bodies.entries);for(var n=Number.MAX_VALUE,r=null,i=t.x,o=t.y,a=e.length,u=0;u<a;u++){var c=e[u],h=c.body||c;if(t!==c&&t!==h&&t!==h.gameObject&&t!==h.center){var l=s(i,o,h.center.x,h.center.y);l<n&&(r=c,n=l)}}return r},furthest:function(t,e){e||(e=this.world.bodies.entries);for(var n=-1,r=null,i=t.x,o=t.y,a=e.length,u=0;u<a;u++){var c=e[u],h=c.body||c;if(t!==c&&t!==h&&t!==h.gameObject&&t!==h.center){var l=s(i,o,h.center.x,h.center.y);l>n&&(r=c,n=l)}}return r},moveTo:function(t,e,n,r,i){void 0===r&&(r=60),void 0===i&&(i=0);var s=Math.atan2(n-t.y,e-t.x);return i>0&&(r=o(t.x,t.y,e,n)/(i/1e3)),t.body.velocity.setToPolar(s,r),s},moveToObject:function(t,e,n,r){return this.moveTo(t,e.x,e.y,n,r)},velocityFromAngle:function(t,e,n){return void 0===e&&(e=60),void 0===n&&(n=new p),n.setToPolar(i(t),e)},velocityFromRotation:function(t,e,n){return void 0===e&&(e=60),void 0===n&&(n=new p),n.setToPolar(t,e)},overlapRect:function(t,e,n,r,i,o){return l(this.world,t,e,n,r,i,o)},overlapCirc:function(t,e,n,r,i){return h(this.world,t,e,n,r,i)},shutdown:function(){if(this.world){var t=this.systems.events;t.off(d.UPDATE,this.world.update,this.world),t.off(d.POST_UPDATE,this.world.postUpdate,this.world),t.off(d.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null}},destroy:function(){this.shutdown(),this.scene.sys.events.off(d.START,this.start,this),this.scene=null,this.systems=null}});f.register("ArcadePhysics",g,"arcadePhysics"),t.exports=g},function(t,e){t.exports={setAcceleration:function(t,e){return this.body.acceleration.set(t,e),this},setAccelerationX:function(t){return this.body.acceleration.x=t,this},setAccelerationY:function(t){return this.body.acceleration.y=t,this}}},function(t,e){t.exports={setAngularVelocity:function(t){return this.body.angularVelocity=t,this},setAngularAcceleration:function(t){return this.body.angularAcceleration=t,this},setAngularDrag:function(t){return this.body.angularDrag=t,this}}},function(t,e){t.exports={setBounce:function(t,e){return this.body.bounce.set(t,e),this},setBounceX:function(t){return this.body.bounce.x=t,this},setBounceY:function(t){return this.body.bounce.y=t,this},setCollideWorldBounds:function(t,e,n){return this.body.setCollideWorldBounds(t,e,n),this}}},function(t,e){t.exports={setDebug:function(t,e,n){return this.debugShowBody=t,this.debugShowVelocity=e,this.debugBodyColor=n,this},setDebugBodyColor:function(t){return this.body.debugBodyColor=t,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(t){this.body.debugShowBody=t}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(t){this.body.debugShowVelocity=t}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(t){this.body.debugBodyColor=t}}}},function(t,e){t.exports={setDrag:function(t,e){return this.body.drag.set(t,e),this},setDragX:function(t){return this.body.drag.x=t,this},setDragY:function(t){return this.body.drag.y=t,this},setDamping:function(t){return this.body.useDamping=t,this}}},function(t,e){var n={enableBody:function(t,e,n,r,i){return t&&this.body.reset(e,n),r&&(this.body.gameObject.active=!0),i&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=!1),this.body.stop(),this.body.enable=!1,t&&(this.body.gameObject.active=!1),e&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}};t.exports=n},function(t,e){t.exports={setFriction:function(t,e){return this.body.friction.set(t,e),this},setFrictionX:function(t){return this.body.friction.x=t,this},setFrictionY:function(t){return this.body.friction.y=t,this}}},function(t,e){t.exports={setGravity:function(t,e){return this.body.gravity.set(t,e),this},setGravityX:function(t){return this.body.gravity.x=t,this},setGravityY:function(t){return this.body.gravity.y=t,this}}},function(t,e){var n={setImmovable:function(t){return void 0===t&&(t=!0),this.body.immovable=t,this}};t.exports=n},function(t,e){t.exports={setMass:function(t){return this.body.mass=t,this}}},function(t,e){var n={setPushable:function(t){return void 0===t&&(t=!0),this.body.pushable=t,this}};t.exports=n},function(t,e){t.exports={setOffset:function(t,e){return this.body.setOffset(t,e),this},setSize:function(t,e,n){return this.body.setSize(t,e,n),this},setBodySize:function(t,e,n){return this.body.setSize(t,e,n),this},setCircle:function(t,e,n){return this.body.setCircle(t,e,n),this}}},function(t,e){t.exports={setVelocity:function(t,e){return this.body.setVelocity(t,e),this},setVelocityX:function(t){return this.body.setVelocityX(t),this},setVelocityY:function(t){return this.body.setVelocityY(t),this},setMaxVelocity:function(t,e){return this.body.maxVelocity.set(t,e),this}}},function(t,e){t.exports="collide"},function(t,e){t.exports="overlap"},function(t,e){t.exports="pause"},function(t,e){t.exports="resume"},function(t,e){t.exports="tilecollide"},function(t,e){t.exports="tileoverlap"},function(t,e){t.exports="worldbounds"},function(t,e){t.exports="worldstep"},function(t,e){var n,r,i,o,s,a,u,c,h,l,f,d,p,v,g,m,y,b=function(){return l&&g&&r.blocked.right?(n.processX(-y,u,!1,!0),1):h&&m&&r.blocked.left?(n.processX(y,u,!0),1):p&&m&&n.blocked.right?(r.processX(-y,c,!1,!0),2):d&&g&&n.blocked.left?(r.processX(y,c,!0),2):0},w=function(t){if(i&&o)y*=.5,0===t||3===t?(n.processX(y,s),r.processX(-y,a)):(n.processX(-y,s),r.processX(y,a));else if(i&&!o)0===t||3===t?n.processX(y,u,!0):n.processX(-y,u,!1,!0);else if(!i&&o)0===t||3===t?r.processX(-y,c,!1,!0):r.processX(y,c,!0);else{var e=.5*y;0===t?v?(n.processX(y,0,!0),r.processX(0,null,!1,!0)):p?(n.processX(e,0,!0),r.processX(-e,0,!1,!0)):(n.processX(e,r.velocity.x,!0),r.processX(-e,null,!1,!0)):1===t?f?(n.processX(0,null,!1,!0),r.processX(y,0,!0)):l?(n.processX(-e,0,!1,!0),r.processX(e,0,!0)):(n.processX(-e,null,!1,!0),r.processX(e,n.velocity.x,!0)):2===t?v?(n.processX(-y,0,!1,!0),r.processX(0,null,!0)):d?(n.processX(-e,0,!1,!0),r.processX(e,0,!0)):(n.processX(-e,r.velocity.x,!1,!0),r.processX(e,null,!0)):3===t&&(f?(n.processX(0,null,!0),r.processX(-y,0,!1,!0)):h?(n.processX(e,0,!0),r.processX(-e,0,!1,!0)):(n.processX(e,r.velocity.y,!0),r.processX(-e,null,!1,!0)))}return!0};t.exports={BlockCheck:b,Check:function(){var t=n.velocity.x,e=r.velocity.x,i=Math.sqrt(e*e*r.mass/n.mass)*(e>0?1:-1),o=Math.sqrt(t*t*n.mass/r.mass)*(t>0?1:-1),u=.5*(i+o);return o-=u,s=u+(i-=u)*n.bounce.x,a=u+o*r.bounce.x,h&&m?w(0):d&&g?w(1):l&&g?w(2):!(!p||!m)&&w(3)},Set:function(t,e,s){r=e;var a=(n=t).velocity.x,w=r.velocity.x;return i=n.pushable,h=n._dx<0,l=n._dx>0,f=0===n._dx,g=Math.abs(n.right-r.x)<=Math.abs(r.right-n.x),u=w-a*n.bounce.x,o=r.pushable,d=r._dx<0,p=r._dx>0,v=0===r._dx,m=!g,c=a-w*r.bounce.x,y=Math.abs(s),b()},Run:w,RunImmovableBody1:function(t){1===t?r.velocity.x=0:g?r.processX(y,c,!0):r.processX(-y,c,!1,!0),n.moves&&(r.y+=(n.y-n.prev.y)*n.friction.y,r._dy=r.y-r.prev.y)},RunImmovableBody2:function(t){2===t?n.velocity.x=0:m?n.processX(y,u,!0):n.processX(-y,u,!1,!0),r.moves&&(n.y+=(r.y-r.prev.y)*r.friction.y,n._dy=n.y-n.prev.y)}}},function(t,e){var n,r,i,o,s,a,u,c,h,l,f,d,p,v,g,m,y,b=function(){return l&&g&&r.blocked.down?(n.processY(-y,u,!1,!0),1):h&&m&&r.blocked.up?(n.processY(y,u,!0),1):p&&m&&n.blocked.down?(r.processY(-y,c,!1,!0),2):d&&g&&n.blocked.up?(r.processY(y,c,!0),2):0},w=function(t){if(i&&o)y*=.5,0===t||3===t?(n.processY(y,s),r.processY(-y,a)):(n.processY(-y,s),r.processY(y,a));else if(i&&!o)0===t||3===t?n.processY(y,u,!0):n.processY(-y,u,!1,!0);else if(!i&&o)0===t||3===t?r.processY(-y,c,!1,!0):r.processY(y,c,!0);else{var e=.5*y;0===t?v?(n.processY(y,0,!0),r.processY(0,null,!1,!0)):p?(n.processY(e,0,!0),r.processY(-e,0,!1,!0)):(n.processY(e,r.velocity.y,!0),r.processY(-e,null,!1,!0)):1===t?f?(n.processY(0,null,!1,!0),r.processY(y,0,!0)):l?(n.processY(-e,0,!1,!0),r.processY(e,0,!0)):(n.processY(-e,null,!1,!0),r.processY(e,n.velocity.y,!0)):2===t?v?(n.processY(-y,0,!1,!0),r.processY(0,null,!0)):d?(n.processY(-e,0,!1,!0),r.processY(e,0,!0)):(n.processY(-e,r.velocity.y,!1,!0),r.processY(e,null,!0)):3===t&&(f?(n.processY(0,null,!0),r.processY(-y,0,!1,!0)):h?(n.processY(e,0,!0),r.processY(-e,0,!1,!0)):(n.processY(e,r.velocity.y,!0),r.processY(-e,null,!1,!0)))}return!0};t.exports={BlockCheck:b,Check:function(){var t=n.velocity.y,e=r.velocity.y,i=Math.sqrt(e*e*r.mass/n.mass)*(e>0?1:-1),o=Math.sqrt(t*t*n.mass/r.mass)*(t>0?1:-1),u=.5*(i+o);return o-=u,s=u+(i-=u)*n.bounce.y,a=u+o*r.bounce.y,h&&m?w(0):d&&g?w(1):l&&g?w(2):!(!p||!m)&&w(3)},Set:function(t,e,s){r=e;var a=(n=t).velocity.y,w=r.velocity.y;return i=n.pushable,h=n._dy<0,l=n._dy>0,f=0===n._dy,g=Math.abs(n.bottom-r.y)<=Math.abs(r.bottom-n.y),u=w-a*n.bounce.y,o=r.pushable,d=r._dy<0,p=r._dy>0,v=0===r._dy,m=!g,c=a-w*r.bounce.y,y=Math.abs(s),b()},Run:w,RunImmovableBody1:function(t){1===t?r.velocity.y=0:g?r.processY(y,c,!0):r.processY(-y,c,!1,!0),n.moves&&(r.x+=(n.x-n.prev.x)*n.friction.x,r._dx=r.x-r.prev.x)},RunImmovableBody2:function(t){2===t?n.velocity.y=0:m?n.processY(y,u,!0):n.processY(-y,u,!1,!0),r.moves&&(n.x+=(r.x-r.prev.x)*r.friction.x,n._dx=n.x-n.prev.x)}}},function(t,e,n){var r={ProcessTileCallbacks:n(530),ProcessTileSeparationX:n(534),ProcessTileSeparationY:n(536),SeparateTile:n(532),TileCheckX:n(533),TileCheckY:n(535),TileIntersectsBody:n(248)};t.exports=r},function(t,e,n){var r=n(0),i=n(3),o=new r({initialize:function(){this.boundsCenter=new i,this.centerDiff=new i},parseBody:function(t){if(!(t=t.hasOwnProperty("body")?t.body:t).hasOwnProperty("bounds")||!t.hasOwnProperty("centerOfMass"))return!1;var e=this.boundsCenter,n=this.centerDiff,r=t.bounds.max.x-t.bounds.min.x,i=t.bounds.max.y-t.bounds.min.y,o=r*t.centerOfMass.x,s=i*t.centerOfMass.y;return e.set(r/2,i/2),n.set(o-e.x,s-e.y),!0},getTopLeft:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=0),this.parseBody(t)){var r=this.boundsCenter,o=this.centerDiff;return new i(e+r.x+o.x,n+r.y+o.y)}return!1},getTopCenter:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=0),this.parseBody(t)){var r=this.boundsCenter,o=this.centerDiff;return new i(e+o.x,n+r.y+o.y)}return!1},getTopRight:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=0),this.parseBody(t)){var r=this.boundsCenter,o=this.centerDiff;return new i(e-(r.x-o.x),n+r.y+o.y)}return!1},getLeftCenter:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=0),this.parseBody(t)){var r=this.boundsCenter,o=this.centerDiff;return new i(e+r.x+o.x,n+o.y)}return!1},getCenter:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=0),this.parseBody(t)){var r=this.centerDiff;return new i(e+r.x,n+r.y)}return!1},getRightCenter:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=0),this.parseBody(t)){var r=this.boundsCenter,o=this.centerDiff;return new i(e-(r.x-o.x),n+o.y)}return!1},getBottomLeft:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=0),this.parseBody(t)){var r=this.boundsCenter,o=this.centerDiff;return new i(e+r.x+o.x,n-(r.y-o.y))}return!1},getBottomCenter:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=0),this.parseBody(t)){var r=this.boundsCenter,o=this.centerDiff;return new i(e+o.x,n-(r.y-o.y))}return!1},getBottomRight:function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=0),this.parseBody(t)){var r=this.boundsCenter,o=this.centerDiff;return new i(e-(r.x-o.x),n-(r.y-o.y))}return!1}});t.exports=o},function(t,e){function n(t,e,n){n=n||0;var r,i,o,s,a,u,c,h=[0,0];return r=t[1][1]-t[0][1],i=t[0][0]-t[1][0],o=r*t[0][0]+i*t[0][1],s=e[1][1]-e[0][1],a=e[0][0]-e[1][0],u=s*e[0][0]+a*e[0][1],E(c=r*a-s*i,0,n)||(h[0]=(a*o-i*u)/c,h[1]=(r*u-s*o)/c),h}function r(t,e,n,r){var i=e[0]-t[0],o=e[1]-t[1],s=r[0]-n[0],a=r[1]-n[1];if(s*o-a*i===0)return!1;var u=(i*(n[1]-t[1])+o*(t[0]-n[0]))/(s*o-a*i),c=(s*(t[1]-n[1])+a*(n[0]-t[0]))/(a*i-s*o);return u>=0&&u<=1&&c>=0&&c<=1}function i(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(n[0]-t[0])*(e[1]-t[1])}function o(t,e,n){return i(t,e,n)>0}function s(t,e,n){return i(t,e,n)>=0}function a(t,e,n){return i(t,e,n)<0}function u(t,e,n){return i(t,e,n)<=0}t.exports={decomp:function(t){var e=x(t);return e.length>0?_(t,e):[t]},quickDecomp:function t(e,n,r,i,c,h,l){h=h||100,l=l||0,c=c||25,n="undefined"!==typeof n?n:[],r=r||[],i=i||[];var g=[0,0],m=[0,0],y=[0,0],w=0,x=0,_=0,E=0,S=0,k=0,A=0,O=[],C=[],P=e,I=e;if(I.length<3)return n;if(++l>h)return console.warn("quickDecomp: max level ("+h+") reached."),n;for(var R=0;R<e.length;++R)if(v(P,R)){r.push(P[R]),w=x=Number.MAX_VALUE;for(var M=0;M<e.length;++M)o(d(P,R-1),d(P,R),d(P,M))&&u(d(P,R-1),d(P,R),d(P,M-1))&&(y=T(d(P,R-1),d(P,R),d(P,M),d(P,M-1)),a(d(P,R+1),d(P,R),y)&&(_=f(P[R],y))<x&&(x=_,m=y,k=M)),o(d(P,R+1),d(P,R),d(P,M+1))&&u(d(P,R+1),d(P,R),d(P,M))&&(y=T(d(P,R+1),d(P,R),d(P,M),d(P,M+1)),o(d(P,R-1),d(P,R),y)&&(_=f(P[R],y))<w&&(w=_,g=y,S=M));if(k===(S+1)%e.length)y[0]=(m[0]+g[0])/2,y[1]=(m[1]+g[1])/2,i.push(y),R<S?(p(O,P,R,S+1),O.push(y),C.push(y),0!==k&&p(C,P,k,P.length),p(C,P,0,R+1)):(0!==R&&p(O,P,R,P.length),p(O,P,0,S+1),O.push(y),C.push(y),p(C,P,k,R+1));else{if(k>S&&(S+=e.length),E=Number.MAX_VALUE,S<k)return n;for(M=k;M<=S;++M)s(d(P,R-1),d(P,R),d(P,M))&&u(d(P,R+1),d(P,R),d(P,M))&&(_=f(d(P,R),d(P,M)))<E&&b(P,R,M)&&(E=_,A=M%e.length);R<A?(p(O,P,R,A+1),0!==A&&p(C,P,A,I.length),p(C,P,0,R+1)):(0!==R&&p(O,P,R,I.length),p(O,P,0,A+1),p(C,P,A,R+1))}return O.length<C.length?(t(O,n,r,i,c,h,l),t(C,n,r,i,c,h,l)):(t(C,n,r,i,c,h,l),t(O,n,r,i,c,h,l)),n}return n.push(e),n},isSimple:function(t){var e,n=t;for(e=0;e<n.length-1;e++)for(var i=0;i<e-1;i++)if(r(n[e],n[e+1],n[i],n[i+1]))return!1;for(e=1;e<n.length-2;e++)if(r(n[0],n[n.length-1],n[e],n[e+1]))return!1;return!0},removeCollinearPoints:function(t,e){for(var n=0,r=t.length-1;t.length>3&&r>=0;--r)l(d(t,r-1),d(t,r),d(t,r+1),e)&&(t.splice(r%t.length,1),n++);return n},removeDuplicatePoints:function(t,e){for(var n=t.length-1;n>=1;--n)for(var r=t[n],i=n-1;i>=0;--i)S(r,t[i],e)&&t.splice(n,1)},makeCCW:function(t){for(var e=0,n=t,r=1;r<t.length;++r)(n[r][1]<n[e][1]||n[r][1]===n[e][1]&&n[r][0]>n[e][0])&&(e=r);return!o(d(t,e-1),d(t,e),d(t,e+1))&&(function(t){for(var e=[],n=t.length,r=0;r!==n;r++)e.push(t.pop());for(r=0;r!==n;r++)t[r]=e[r]}(t),!0)}};var c=[],h=[];function l(t,e,n,r){if(r){var o=c,s=h;o[0]=e[0]-t[0],o[1]=e[1]-t[1],s[0]=n[0]-e[0],s[1]=n[1]-e[1];var a=o[0]*s[0]+o[1]*s[1],u=Math.sqrt(o[0]*o[0]+o[1]*o[1]),l=Math.sqrt(s[0]*s[0]+s[1]*s[1]);return Math.acos(a/(u*l))<r}return 0===i(t,e,n)}function f(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function d(t,e){var n=t.length;return t[e<0?e%n+n:e%n]}function p(t,e,n,r){for(var i=n;i<r;i++)t.push(e[i])}function v(t,e){return a(d(t,e-1),d(t,e),d(t,e+1))}var g=[],m=[];function y(t,e,r){var i,o,a=g,c=m;if(s(d(t,e+1),d(t,e),d(t,r))&&u(d(t,e-1),d(t,e),d(t,r)))return!1;o=f(d(t,e),d(t,r));for(var h=0;h!==t.length;++h)if((h+1)%t.length!==e&&h!==e&&s(d(t,e),d(t,r),d(t,h+1))&&u(d(t,e),d(t,r),d(t,h))&&(a[0]=d(t,e),a[1]=d(t,r),c[0]=d(t,h),c[1]=d(t,h+1),i=n(a,c),f(d(t,e),i)<o))return!1;return!0}function b(t,e,n){for(var i=0;i!==t.length;++i)if(i!==e&&i!==n&&(i+1)%t.length!==e&&(i+1)%t.length!==n&&r(d(t,e),d(t,n),d(t,i),d(t,i+1)))return!1;return!0}function w(t,e,n,r){var i=r||[];if(function(t){t.length=0}(i),e<n)for(var o=e;o<=n;o++)i.push(t[o]);else{for(o=0;o<=n;o++)i.push(t[o]);for(o=e;o<t.length;o++)i.push(t[o])}return i}function x(t){for(var e=[],n=[],r=[],i=[],o=Number.MAX_VALUE,s=0;s<t.length;++s)if(v(t,s))for(var a=0;a<t.length;++a)if(y(t,s,a)){n=x(w(t,s,a,i)),r=x(w(t,a,s,i));for(var u=0;u<r.length;u++)n.push(r[u]);n.length<o&&(e=n,o=n.length,e.push([d(t,s),d(t,a)]))}return e}function _(t,e){if(0===e.length)return[t];if(e instanceof Array&&e.length&&e[0]instanceof Array&&2===e[0].length&&e[0][0]instanceof Array){for(var n=[t],r=0;r<e.length;r++)for(var i=e[r],o=0;o<n.length;o++){var s=_(n[o],i);if(s){n.splice(o,1),n.push(s[0],s[1]);break}}return n}return i=e,r=t.indexOf(i[0]),o=t.indexOf(i[1]),-1!==r&&-1!==o&&[w(t,r,o),w(t,o,r)]}function T(t,e,n,r,i){i=i||0;var o=e[1]-t[1],s=t[0]-e[0],a=o*t[0]+s*t[1],u=r[1]-n[1],c=n[0]-r[0],h=u*n[0]+c*n[1],l=o*c-u*s;return E(l,0,i)?[0,0]:[(c*a-s*h)/l,(o*h-u*a)/l]}function E(t,e,n){return n=n||0,Math.abs(t-e)<=n}function S(t,e,n){return E(t[0],e[0],n)&&E(t[1],e[1],n)}},function(t,e,n){var r=n(86),i=n(0),o=n(591),s=n(128),a=n(592),u=n(1395),c=n(1396),h=n(1397),l=n(593),f=n(589),d=n(590),p=n(1398),v=n(64),g=new i({initialize:function(t){this.world=t,this.scene=t.scene,this.sys=t.scene.sys},rectangle:function(t,e,n,i,o){var s=r.rectangle(t,e,n,i,o);return this.world.add(s),s},trapezoid:function(t,e,n,i,o,s){var a=r.trapezoid(t,e,n,i,o,s);return this.world.add(a),a},circle:function(t,e,n,i,o){var s=r.circle(t,e,n,i,o);return this.world.add(s),s},polygon:function(t,e,n,i,o){var s=r.polygon(t,e,n,i,o);return this.world.add(s),s},fromVertices:function(t,e,n,i,o,s,a){"string"===typeof n&&(n=v.fromPath(n));var u=r.fromVertices(t,e,n,i,o,s,a);return this.world.add(u),u},fromPhysicsEditor:function(t,e,n,r,i){void 0===i&&(i=!0);var o=f.parseBody(t,e,n,r);return i&&!this.world.has(o)&&this.world.add(o),o},fromSVG:function(t,e,n,i,o,s){void 0===i&&(i=1),void 0===o&&(o={}),void 0===s&&(s=!0);for(var u=n.getElementsByTagName("path"),c=[],h=0;h<u.length;h++){var l=a.pathToVertices(u[h],30);1!==i&&v.scale(l,i,i),c.push(l)}var f=r.fromVertices(t,e,c,o);return s&&this.world.add(f),f},fromJSON:function(t,e,n,r,i){void 0===r&&(r={}),void 0===i&&(i=!0);var o=d.parseBody(t,e,n,r);return o&&i&&this.world.add(o),o},imageStack:function(t,e,n,r,i,s,a,u,h){void 0===a&&(a=0),void 0===u&&(u=0),void 0===h&&(h={});var l=this.world,f=this.sys.displayList;h.addToWorld=!1;var d=o.stack(n,r,i,s,a,u,(function(n,r){var i=new c(l,n,r,t,e,h);return f.add(i),i.body}));return l.add(d),d},stack:function(t,e,n,r,i,s,a){var u=o.stack(t,e,n,r,i,s,a);return this.world.add(u),u},pyramid:function(t,e,n,r,i,s,a){var u=o.pyramid(t,e,n,r,i,s,a);return this.world.add(u),u},chain:function(t,e,n,r,i,s){return o.chain(t,e,n,r,i,s)},mesh:function(t,e,n,r,i){return o.mesh(t,e,n,r,i)},newtonsCradle:function(t,e,n,r,i){var s=o.newtonsCradle(t,e,n,r,i);return this.world.add(s),s},car:function(t,e,n,r,i){var s=o.car(t,e,n,r,i);return this.world.add(s),s},softBody:function(t,e,n,r,i,s,a,u,c,h){var l=o.softBody(t,e,n,r,i,s,a,u,c,h);return this.world.add(l),l},joint:function(t,e,n,r,i){return this.constraint(t,e,n,r,i)},spring:function(t,e,n,r,i){return this.constraint(t,e,n,r,i)},constraint:function(t,e,n,r,i){void 0===r&&(r=1),void 0===i&&(i={}),i.bodyA="body"===t.type?t:t.body,i.bodyB="body"===e.type?e:e.body,isNaN(n)||(i.length=n),i.stiffness=r;var o=s.create(i);return this.world.add(o),o},worldConstraint:function(t,e,n,r){void 0===n&&(n=1),void 0===r&&(r={}),r.bodyB="body"===t.type?t:t.body,isNaN(e)||(r.length=e),r.stiffness=n;var i=s.create(r);return this.world.add(i),i},mouseSpring:function(t){return this.pointerConstraint(t)},pointerConstraint:function(t){void 0===t&&(t={}),t.hasOwnProperty("render")||(t.render={visible:!1});var e=new p(this.scene,this.world,t);return this.world.add(e.constraint),e},image:function(t,e,n,r,i){var o=new c(this.world,t,e,n,r,i);return this.sys.displayList.add(o),o},tileBody:function(t,e){return new l(this.world,t,e)},sprite:function(t,e,n,r,i){var o=new h(this.world,t,e,n,r,i);return this.sys.displayList.add(o),this.sys.updateList.add(o),o},gameObject:function(t,e,n){return u(this.world,t,e,n)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});t.exports=g},function(t,e,n){var r=n(249),i=n(2),o=n(3);t.exports=function(t,e,n,s){void 0===n&&(n={}),void 0===s&&(s=!0);var a=e.x,u=e.y;if(e.body={temp:!0,position:{x:a,y:u}},[r.Bounce,r.Collision,r.Force,r.Friction,r.Gravity,r.Mass,r.Sensor,r.SetBody,r.Sleep,r.Static,r.Transform,r.Velocity].forEach((function(t){for(var n in t)(r=t[n]).get&&"function"===typeof r.get||r.set&&"function"===typeof r.set?Object.defineProperty(e,n,{get:t[n].get,set:t[n].set}):Object.defineProperty(e,n,{value:t[n]});var r})),e.world=t,e._tempVec2=new o(a,u),n.hasOwnProperty("type")&&"body"===n.type)e.setExistingBody(n,s);else{var c=i(n,"shape",null);c||(c="rectangle"),n.addToWorld=s,e.setBody(c,n)}return e}},function(t,e,n){var r=n(0),i=n(249),o=n(15),s=n(2),a=n(125),u=n(167),c=n(3),h=new r({Extends:a,Mixins:[i.Bounce,i.Collision,i.Force,i.Friction,i.Gravity,i.Mass,i.Sensor,i.SetBody,i.Sleep,i.Static,i.Transform,i.Velocity,u],initialize:function(t,e,n,r,i,a){o.call(this,t.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(r,i),this.setSizeToFrame(),this.setOrigin(),this.world=t,this._tempVec2=new c(e,n);var u=s(a,"shape",null);u?this.setBody(u,a):this.setRectangle(this.width,this.height,a),this.setPosition(e,n),this.initPipeline()}});t.exports=h},function(t,e,n){var r=n(164),i=n(0),o=n(249),s=n(15),a=n(2),u=n(167),c=n(73),h=n(3),l=new i({Extends:c,Mixins:[o.Bounce,o.Collision,o.Force,o.Friction,o.Gravity,o.Mass,o.Sensor,o.SetBody,o.Sleep,o.Static,o.Transform,o.Velocity,u],initialize:function(t,e,n,i,o,u){s.call(this,t.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new r(this),this.setTexture(i,o),this.setSizeToFrame(),this.setOrigin(),this.world=t,this._tempVec2=new h(e,n);var c=a(u,"shape",null);c?this.setBody(c,u):this.setRectangle(this.width,this.height,u),this.setPosition(e,n),this.initPipeline()}});t.exports=l},function(t,e,n){var r=n(84),i=n(0),o=n(118),s=n(128),a=n(273),u=n(272),c=n(51),h=n(127),l=n(165),f=n(3),d=n(64),p=new i({initialize:function(t,e,n){void 0===n&&(n={}),this.scene=t,this.world=e,this.camera=null,this.pointer=null,this.active=!0,this.position=new f,this.body=null,this.part=null,this.constraint=s.create(h(n,{label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}})),this.world.on(u.BEFORE_UPDATE,this.update,this),t.sys.input.on(c.POINTER_DOWN,this.onDown,this),t.sys.input.on(c.POINTER_UP,this.onUp,this)},onDown:function(t){this.pointer||(this.pointer=t,this.camera=t.camera)},onUp:function(t){t===this.pointer&&(this.pointer=null)},getBody:function(t){var e=this.position,n=this.constraint;this.camera.getWorldPoint(t.x,t.y,e);for(var i=o.allBodies(this.world.localWorld),s=0;s<i.length;s++){var c=i[s];if(!c.ignorePointer&&r.contains(c.bounds,e)&&a.canCollide(c.collisionFilter,n.collisionFilter)&&this.hitTestBody(c,e))return this.world.emit(u.DRAG_START,c,this.part,this),!0}return!1},hitTestBody:function(t,e){for(var n=this.constraint,r=t.parts.length,i=r>1?1:0;i<r;i++){var o=t.parts[i];if(d.contains(o.vertices,e))return n.pointA=e,n.pointB={x:e.x-t.position.x,y:e.y-t.position.y},n.bodyB=t,n.angleB=t.angle,l.set(t,!1),this.part=o,this.body=t,!0}return!1},update:function(){var t=this.pointer,e=this.body;if(this.active&&t)if(t.isDown||!e){if(t.isDown){if(!e&&!this.getBody(t))return;e=this.body;var n=this.position,r=this.constraint;this.camera.getWorldPoint(t.x,t.y,n),r.pointA.x=n.x,r.pointA.y=n.y,l.set(e,!1),this.world.emit(u.DRAG,e,this)}}else this.stopDrag();else e&&this.stopDrag()},stopDrag:function(){var t=this.body,e=this.constraint;e.bodyB=null,e.pointB=null,this.pointer=null,this.body=null,this.part=null,t&&this.world.emit(u.DRAG_END,t,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(u.BEFORE_UPDATE,this.update),this.scene.sys.input.off(c.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(c.POINTER_UP,this.onUp,this)}});t.exports=p},function(t,e,n){var r={};t.exports=r;var i=n(595),o=n(32);r.name="matter-js",r.version="0.14.2",r.uses=[],r.used=[],r.use=function(){i.use(r,Array.prototype.slice.call(arguments))},r.before=function(t,e){return t=t.replace(/^Matter./,""),o.chainPathBefore(r,t,e)},r.after=function(t,e){return t=t.replace(/^Matter./,""),o.chainPathAfter(r,t,e)}},function(t,e,n){var r={};t.exports=r;var i=n(83),o=n(274),s=n(84),a=n(86),u=n(64);r.collides=function(t,e){for(var n=[],r=0;r<e.length;r++){var i=e[r];if(t!==i&&s.overlaps(i.bounds,t.bounds))for(var a=1===i.parts.length?0:1;a<i.parts.length;a++){var u=i.parts[a];if(s.overlaps(u.bounds,t.bounds)){var c=o.collides(u,t);if(c.collided){n.push(c);break}}}}return n},r.ray=function(t,e,n,o){o=o||1e-100;for(var s=i.angle(e,n),u=i.magnitude(i.sub(e,n)),c=.5*(n.x+e.x),h=.5*(n.y+e.y),l=a.rectangle(c,h,u,o,{angle:s}),f=r.collides(l,t),d=0;d<f.length;d+=1){var p=f[d];p.body=p.bodyB=p.bodyA}return f},r.region=function(t,e,n){for(var r=[],i=0;i<t.length;i++){var o=t[i],a=s.overlaps(o.bounds,e);(a&&!n||!a&&n)&&r.push(o)}return r},r.point=function(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r];if(s.contains(i.bounds,e))for(var o=1===i.parts.length?0:1;o<i.parts.length;o++){var a=i.parts[o];if(s.contains(a.bounds,e)&&u.contains(a.vertices,e)){n.push(i);break}}}return n}},function(t,e,n){var r={};t.exports=r;var i=n(596),o=n(165),s=n(599),a=n(598),u=n(1523),c=n(597),h=n(166),l=n(118),f=n(128),d=n(32),p=n(41);r.create=function(t,e){e=(e=d.isElement(t)?e:t)||{},((t=d.isElement(t)?t:null)||e.render)&&d.warn("Engine.create: engine.render is deprecated (see docs)");var n={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:c}},r=d.extend(n,e);return r.world=e.world||i.create(r.world),r.pairs=a.create(),r.broadphase=r.broadphase.controller.create(r.broadphase),r.metrics=r.metrics||{extended:!1},r.metrics=u.create(r.metrics),r},r.update=function(t,e,n){e=e||1e3/60,n=n||1;var i,c=t.world,d=t.timing,p=t.broadphase,v=[];d.timestamp+=e*d.timeScale;var g={timestamp:d.timestamp};h.trigger(t,"beforeUpdate",g);var m=l.allBodies(c),y=l.allConstraints(c);for(u.reset(t.metrics),t.enableSleeping&&o.update(m,d.timeScale),r._bodiesApplyGravity(m,c.gravity),r._bodiesUpdate(m,e,d.timeScale,n,c.bounds),f.preSolveAll(m),i=0;i<t.constraintIterations;i++)f.solveAll(y,d.timeScale);f.postSolveAll(m),p.controller?(c.isModified&&p.controller.clear(p),p.controller.update(p,m,t,c.isModified),v=p.pairsList):v=m,c.isModified&&l.setModified(c,!1,!1,!0);var b=p.detector(v,t),w=t.pairs,x=d.timestamp;for(a.update(w,b,x),a.removeOld(w,x),t.enableSleeping&&o.afterCollisions(w.list,d.timeScale),w.collisionStart.length>0&&h.trigger(t,"collisionStart",{pairs:w.collisionStart}),s.preSolvePosition(w.list),i=0;i<t.positionIterations;i++)s.solvePosition(w.list,m,d.timeScale);for(s.postSolvePosition(m),f.preSolveAll(m),i=0;i<t.constraintIterations;i++)f.solveAll(y,d.timeScale);for(f.postSolveAll(m),s.preSolveVelocity(w.list),i=0;i<t.velocityIterations;i++)s.solveVelocity(w.list,d.timeScale);return w.collisionActive.length>0&&h.trigger(t,"collisionActive",{pairs:w.collisionActive}),w.collisionEnd.length>0&&h.trigger(t,"collisionEnd",{pairs:w.collisionEnd}),u.update(t.metrics,t),r._bodiesClearForces(m),h.trigger(t,"afterUpdate",g),t},r.merge=function(t,e){if(d.extend(t,e),e.world){t.world=e.world,r.clear(t);for(var n=l.allBodies(t.world),i=0;i<n.length;i++){var s=n[i];o.set(s,!1),s.id=d.nextId()}}},r.clear=function(t){var e=t.world;a.clear(t.pairs);var n=t.broadphase;if(n.controller){var r=l.allBodies(e);n.controller.clear(n),n.controller.update(n,r,t,!0)}},r._bodiesClearForces=function(t){for(var e=0;e<t.length;e++){var n=t[e];n.force.x=0,n.force.y=0,n.torque=0}},r._bodiesApplyGravity=function(t,e){var n="undefined"!==typeof e.scale?e.scale:.001;if((0!==e.x||0!==e.y)&&0!==n)for(var r=0;r<t.length;r++){var i=t[r];i.ignoreGravity||i.isStatic||i.isSleeping||(i.force.x+=i.mass*e.x*n*i.gravityScale.x,i.force.y+=i.mass*e.y*n*i.gravityScale.y)}},r._bodiesUpdate=function(t,e,n,r,i){for(var o=0;o<t.length;o++){var s=t[o];s.isStatic||s.isSleeping||p.update(s,e,n,r)}}},function(t,e,n){var r=n(86),i=n(41),o=n(0),s=n(32),a=n(118),u=n(1401),c=n(9),h=n(272),l=n(2),f=n(6),d=n(41),p=n(166),v=n(593),g=n(596),m=n(83),y=new o({Extends:c,initialize:function(t,e){c.call(this),this.scene=t,this.engine=u.create(e),this.localWorld=this.engine.world;var n=f(e,"gravity",null);n?this.setGravity(n.x,n.y,n.scale):!1===n&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=f(e,"enabled",!0),this.correction=f(e,"correction",1),this.getDelta=f(e,"getDelta",this.update60Hz);var r=l(e,"runner",{}),i=l(r,"fps",!1),o=l(r,"fps",60),s=l(r,"delta",1e3/o),a=l(r,"deltaMin",1e3/o),h=l(r,"deltaMax",1e3/(.5*o));i||(o=1e3/s),this.runner={fps:o,correction:l(r,"correction",1),deltaSampleSize:l(r,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:l(r,"isFixed",!1),delta:s,deltaMin:a,deltaMax:h},this.autoUpdate=f(e,"autoUpdate",!0);var d=f(e,"debug",!1);if(this.drawDebug="object"===typeof d||d,this.debugGraphic,this.debugConfig={showAxes:l(d,"showAxes",!1),showAngleIndicator:l(d,"showAngleIndicator",!1),angleColor:l(d,"angleColor",15208787),showBroadphase:l(d,"showBroadphase",!1),broadphaseColor:l(d,"broadphaseColor",16757760),showBounds:l(d,"showBounds",!1),boundsColor:l(d,"boundsColor",16777215),showVelocity:l(d,"showVelocity",!1),velocityColor:l(d,"velocityColor",44783),showCollisions:l(d,"showCollisions",!1),collisionColor:l(d,"collisionColor",16094476),showSeparations:l(d,"showSeparations",!1),separationColor:l(d,"separationColor",16753920),showBody:l(d,"showBody",!0),showStaticBody:l(d,"showStaticBody",!0),showInternalEdges:l(d,"showInternalEdges",!1),renderFill:l(d,"renderFill",!1),renderLine:l(d,"renderLine",!0),fillColor:l(d,"fillColor",1075465),fillOpacity:l(d,"fillOpacity",1),lineColor:l(d,"lineColor",2678297),lineOpacity:l(d,"lineOpacity",1),lineThickness:l(d,"lineThickness",1),staticFillColor:l(d,"staticFillColor",857979),staticLineColor:l(d,"staticLineColor",1255396),showSleeping:l(d,"showSleeping",!1),staticBodySleepOpacity:l(d,"staticBodySleepOpacity",.7),sleepFillColor:l(d,"sleepFillColor",4605510),sleepLineColor:l(d,"sleepLineColor",10066585),showSensors:l(d,"showSensors",!0),sensorFillColor:l(d,"sensorFillColor",857979),sensorLineColor:l(d,"sensorLineColor",1255396),showPositions:l(d,"showPositions",!0),positionSize:l(d,"positionSize",4),positionColor:l(d,"positionColor",14697178),showJoint:l(d,"showJoint",!0),jointColor:l(d,"jointColor",14737474),jointLineOpacity:l(d,"jointLineOpacity",1),jointLineThickness:l(d,"jointLineThickness",2),pinSize:l(d,"pinSize",4),pinColor:l(d,"pinColor",4382944),springColor:l(d,"springColor",14697184),anchorColor:l(d,"anchorColor",15724527),anchorSize:l(d,"anchorSize",4),showConvexHulls:l(d,"showConvexHulls",!1),hullColor:l(d,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),l(e,"setBounds",!1)){var p=e.setBounds;if("boolean"===typeof p)this.setBounds();else{var v=l(p,"x",0),g=l(p,"y",0),m=l(p,"width",t.sys.scale.width),y=l(p,"height",t.sys.scale.height),b=l(p,"thickness",64),w=l(p,"left",!0),x=l(p,"right",!0),_=l(p,"top",!0),T=l(p,"bottom",!0);this.setBounds(v,g,m,y,b,w,x,_,T)}}},setCompositeRenderStyle:function(t){var e,n,r,i=t.bodies,o=t.constraints,s=t.composites;for(e=0;e<i.length;e++)r=(n=i[e]).render,this.setBodyRenderStyle(n,r.lineColor,r.lineOpacity,r.lineThickness,r.fillColor,r.fillOpacity);for(e=0;e<o.length;e++)r=(n=o[e]).render,this.setConstraintRenderStyle(n,r.lineColor,r.lineOpacity,r.lineThickness,r.pinSize,r.anchorColor,r.anchorSize);for(e=0;e<s.length;e++)n=s[e],this.setCompositeRenderStyle(n);return this},setBodyRenderStyle:function(t,e,n,r,i,o){var s=t.render,a=this.debugConfig;return s?(void 0!==e&&null!==e||(e=t.isStatic?a.staticLineColor:a.lineColor),void 0!==n&&null!==n||(n=a.lineOpacity),void 0!==r&&null!==r||(r=a.lineThickness),void 0!==i&&null!==i||(i=t.isStatic?a.staticFillColor:a.fillColor),void 0!==o&&null!==o||(o=a.fillOpacity),!1!==e&&(s.lineColor=e),!1!==n&&(s.lineOpacity=n),!1!==r&&(s.lineThickness=r),!1!==i&&(s.fillColor=i),!1!==o&&(s.fillOpacity=o),this):this},setConstraintRenderStyle:function(t,e,n,r,i,o,s){var a=t.render,u=this.debugConfig;if(!a)return this;if(void 0===e||null===e){var c=a.type;"line"===c?e=u.jointColor:"pin"===c?e=u.pinColor:"spring"===c&&(e=u.springColor)}return void 0!==n&&null!==n||(n=u.jointLineOpacity),void 0!==r&&null!==r||(r=u.jointLineThickness),void 0!==i&&null!==i||(i=u.pinSize),void 0!==o&&null!==o||(o=u.anchorColor),void 0!==s&&null!==s||(s=u.anchorSize),!1!==e&&(a.lineColor=e),!1!==n&&(a.lineOpacity=n),!1!==r&&(a.lineThickness=r),!1!==i&&(a.pinSize=i),!1!==o&&(a.anchorColor=o),!1!==s&&(a.anchorSize=s),this},setEventsProxy:function(){var t=this,e=this.engine,n=this.localWorld;this.drawDebug&&(p.on(n,"compositeModified",(function(e){t.setCompositeRenderStyle(e)})),p.on(n,"beforeAdd",(function(e){for(var n=[].concat(e.object),r=0;r<n.length;r++){var i=n[r],o=i.render;"body"===i.type?t.setBodyRenderStyle(i,o.lineColor,o.lineOpacity,o.lineThickness,o.fillColor,o.fillOpacity):"composite"===i.type?t.setCompositeRenderStyle(i):"constraint"===i.type&&t.setConstraintRenderStyle(i,o.lineColor,o.lineOpacity,o.lineThickness,o.pinSize,o.anchorColor,o.anchorSize)}}))),p.on(n,"beforeAdd",(function(e){t.emit(h.BEFORE_ADD,e)})),p.on(n,"afterAdd",(function(e){t.emit(h.AFTER_ADD,e)})),p.on(n,"beforeRemove",(function(e){t.emit(h.BEFORE_REMOVE,e)})),p.on(n,"afterRemove",(function(e){t.emit(h.AFTER_REMOVE,e)})),p.on(e,"beforeUpdate",(function(e){t.emit(h.BEFORE_UPDATE,e)})),p.on(e,"afterUpdate",(function(e){t.emit(h.AFTER_UPDATE,e)})),p.on(e,"collisionStart",(function(e){var n,r,i=e.pairs;i.length>0&&(n=i[0].bodyA,r=i[0].bodyB),t.emit(h.COLLISION_START,e,n,r)})),p.on(e,"collisionActive",(function(e){var n,r,i=e.pairs;i.length>0&&(n=i[0].bodyA,r=i[0].bodyB),t.emit(h.COLLISION_ACTIVE,e,n,r)})),p.on(e,"collisionEnd",(function(e){var n,r,i=e.pairs;i.length>0&&(n=i[0].bodyA,r=i[0].bodyB),t.emit(h.COLLISION_END,e,n,r)}))},setBounds:function(t,e,n,r,i,o,s,a,u){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=this.scene.sys.scale.width),void 0===r&&(r=this.scene.sys.scale.height),void 0===i&&(i=64),void 0===o&&(o=!0),void 0===s&&(s=!0),void 0===a&&(a=!0),void 0===u&&(u=!0),this.updateWall(o,"left",t-i,e-i,i,r+2*i),this.updateWall(s,"right",t+n,e-i,i,r+2*i),this.updateWall(a,"top",t,e-i,n,i),this.updateWall(u,"bottom",t,e+r,n,i),this},updateWall:function(t,e,n,r,i,o){var s=this.walls[e];t?(s&&g.remove(this.localWorld,s),n+=i/2,r+=o/2,this.walls[e]=this.create(n,r,i,o,{isStatic:!0,friction:0,frictionStatic:0})):(s&&g.remove(this.localWorld,s),this.walls[e]=null)},createDebugGraphic:function(){var t=this.scene.sys.add.graphics({x:0,y:0});return t.setDepth(Number.MAX_VALUE),this.debugGraphic=t,this.drawDebug=!0,t},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=1),this.localWorld.gravity.x=t,this.localWorld.gravity.y=e,void 0!==n&&(this.localWorld.gravity.scale=n),this},create:function(t,e,n,i,o){var s=r.rectangle(t,e,n,i,o);return g.add(this.localWorld,s),s},add:function(t){return g.add(this.localWorld,t),this},remove:function(t,e){Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n],i=r.body?r.body:r;a.remove(this.localWorld,i,e)}return this},removeConstraint:function(t,e){return a.remove(this.localWorld,t,e),this},convertTilemapLayer:function(t,e){var n=t.layer,r=t.getTilesWithin(0,0,n.width,n.height,{isColliding:!0});return this.convertTiles(r,e),this},convertTiles:function(t,e){if(0===t.length)return this;for(var n=0;n<t.length;n++)new v(this,t[n],e);return this},nextGroup:function(t){return d.nextGroup(t)},nextCategory:function(){return d.nextCategory()},pause:function(){return this.enabled=!1,this.emit(h.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(h.RESUME),this},update:function(t,e){if(this.enabled&&this.autoUpdate){var n=this.engine,r=this.runner,i=n.timing,o=this.correction;r.isFixed?e=this.getDelta(t,e):(e=t-r.timePrev||r.delta,r.timePrev=t,r.deltaHistory.push(e),r.deltaHistory=r.deltaHistory.slice(-r.deltaSampleSize),o=(e=(e=(e=Math.min.apply(null,r.deltaHistory))<r.deltaMin?r.deltaMin:e)>r.deltaMax?r.deltaMax:e)/r.delta,r.delta=e),0!==r.timeScalePrev&&(o*=i.timeScale/r.timeScalePrev),0===i.timeScale&&(o=0),r.timeScalePrev=i.timeScale,r.correction=o,r.frameCounter+=1,t-r.counterTimestamp>=1e3&&(r.fps=r.frameCounter*((t-r.counterTimestamp)/1e3),r.counterTimestamp=t,r.frameCounter=0),u.update(n,e,o)}},step:function(t,e){u.update(this.engine,t,e)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(t){var e=t.hasOwnProperty("body")?t.body:t;return null!==a.get(this.localWorld,e.id,e.type)},getAllBodies:function(){return a.allBodies(this.localWorld)},getAllConstraints:function(){return a.allConstraints(this.localWorld)},getAllComposites:function(){return a.allComposites(this.localWorld)},postUpdate:function(){if(this.drawDebug){var t=this.debugConfig,e=this.engine,n=this.debugGraphic,r=a.allBodies(this.localWorld);this.debugGraphic.clear(),t.showBroadphase&&e.broadphase.controller&&this.renderGrid(e.broadphase,n,t.broadphaseColor,.5),t.showBounds&&this.renderBodyBounds(r,n,t.boundsColor,.5),(t.showBody||t.showStaticBody)&&this.renderBodies(r),t.showJoint&&this.renderJoints(),(t.showAxes||t.showAngleIndicator)&&this.renderBodyAxes(r,n,t.showAxes,t.angleColor,.5),t.showVelocity&&this.renderBodyVelocity(r,n,t.velocityColor,1,2),t.showSeparations&&this.renderSeparations(e.pairs.list,n,t.separationColor),t.showCollisions&&this.renderCollisions(e.pairs.list,n,t.collisionColor)}},renderGrid:function(t,e,n,r){e.lineStyle(1,n,r);for(var i=s.keys(t.buckets),o=0;o<i.length;o++){var a=i[o];if(!(t.buckets[a].length<2)){var u=a.split(/C|R/);e.strokeRect(parseInt(u[1],10)*t.bucketWidth,parseInt(u[2],10)*t.bucketHeight,t.bucketWidth,t.bucketHeight)}}return this},renderSeparations:function(t,e,n){e.lineStyle(1,n,1);for(var r=0;r<t.length;r++){var i=t[r];if(i.isActive){var o=i.collision,s=o.bodyA,a=o.bodyB,u=s.position,c=a.position,h=o.penetration,l=s.isStatic||a.isStatic?1:4;a.isStatic&&(l=0),e.lineBetween(c.x,c.y,c.x-h.x*l,c.y-h.y*l),l=s.isStatic||a.isStatic?1:4,s.isStatic&&(l=0),e.lineBetween(u.x,u.y,u.x-h.x*l,u.y-h.y*l)}}return this},renderCollisions:function(t,e,n){var r,i;for(e.lineStyle(1,n,.5),e.fillStyle(n,1),r=0;r<t.length;r++)if((i=t[r]).isActive)for(var o=0;o<i.activeContacts.length;o++){var s=i.activeContacts[o].vertex;e.fillRect(s.x-2,s.y-2,5,5)}for(r=0;r<t.length;r++)if((i=t[r]).isActive){var a=i.collision,u=i.activeContacts;if(u.length>0){var c=u[0].vertex.x,h=u[0].vertex.y;2===u.length&&(c=(u[0].vertex.x+u[1].vertex.x)/2,h=(u[0].vertex.y+u[1].vertex.y)/2),a.bodyB===a.supports[0].body||a.bodyA.isStatic?e.lineBetween(c-8*a.normal.x,h-8*a.normal.y,c,h):e.lineBetween(c+8*a.normal.x,h+8*a.normal.y,c,h)}}return this},renderBodyBounds:function(t,e,n,r){e.lineStyle(1,n,r);for(var i=0;i<t.length;i++){var o=t[i];if(o.render.visible){var s=o.bounds;if(s)e.strokeRect(s.min.x,s.min.y,s.max.x-s.min.x,s.max.y-s.min.y);else for(var a=o.parts,u=a.length>1?1:0;u<a.length;u++){var c=a[u];e.strokeRect(c.bounds.min.x,c.bounds.min.y,c.bounds.max.x-c.bounds.min.x,c.bounds.max.y-c.bounds.min.y)}}}return this},renderBodyAxes:function(t,e,n,r,i){e.lineStyle(1,r,i);for(var o=0;o<t.length;o++){var s,a,u,c=t[o],h=c.parts;if(c.render.visible)if(n)for(a=h.length>1?1:0;a<h.length;a++)for(s=h[a],u=0;u<s.axes.length;u++){var l=s.axes[u];e.lineBetween(s.position.x,s.position.y,s.position.x+20*l.x,s.position.y+20*l.y)}else for(a=h.length>1?1:0;a<h.length;a++)for(s=h[a],u=0;u<s.axes.length;u++)e.lineBetween(s.position.x,s.position.y,(s.vertices[0].x+s.vertices[s.vertices.length-1].x)/2,(s.vertices[0].y+s.vertices[s.vertices.length-1].y)/2)}return this},renderBodyVelocity:function(t,e,n,r,i){e.lineStyle(i,n,r);for(var o=0;o<t.length;o++){var s=t[o];s.render.visible&&e.lineBetween(s.position.x,s.position.y,s.position.x+2*(s.position.x-s.positionPrev.x),s.position.y+2*(s.position.y-s.positionPrev.y))}return this},renderBodies:function(t){for(var e=this.debugGraphic,n=this.debugConfig,r=n.showBody,i=n.showStaticBody,o=n.showSleeping,s=n.showInternalEdges,a=n.showConvexHulls,u=n.renderFill,c=n.renderLine,h=n.staticBodySleepOpacity,l=n.sleepFillColor,f=n.sleepLineColor,d=n.hullColor,p=0;p<t.length;p++){var v=t[p];if(v.render.visible&&(i||!v.isStatic)&&(r||v.isStatic)){var g=v.render.lineColor,m=v.render.lineOpacity,y=v.render.lineThickness,b=v.render.fillColor,w=v.render.fillOpacity;o&&v.isSleeping&&(v.isStatic?(m*=h,w*=h):(g=f,b=l)),u||(b=null),c||(g=null),this.renderBody(v,e,s,g,m,y,b,w);var x=v.parts.length;a&&x>1&&this.renderConvexHull(v,e,d,y)}}},renderBody:function(t,e,n,r,i,o,s,a){void 0===r&&(r=null),void 0===i&&(i=null),void 0===o&&(o=1),void 0===s&&(s=null),void 0===a&&(a=null);for(var u=this.debugConfig,c=u.sensorFillColor,h=u.sensorLineColor,l=t.parts,f=l.length,d=f>1?1:0;d<f;d++){var p=l[d],v=p.render,g=v.opacity;if(v.visible&&0!==g&&(!p.isSensor||u.showSensors)){var m=p.circleRadius;if(e.beginPath(),p.isSensor?(null!==s&&e.fillStyle(c,a*g),null!==r&&e.lineStyle(o,h,i*g)):(null!==s&&e.fillStyle(s,a*g),null!==r&&e.lineStyle(o,r,i*g)),m)e.arc(p.position.x,p.position.y,m,0,2*Math.PI);else{var y=p.vertices,b=y.length;e.moveTo(y[0].x,y[0].y);for(var w=1;w<b;w++){var x=y[w];if(!y[w-1].isInternal||n?e.lineTo(x.x,x.y):e.moveTo(x.x,x.y),w<b&&x.isInternal&&!n){var _=(w+1)%b;e.moveTo(y[_].x,y[_].y)}}e.closePath()}null!==s&&e.fillPath(),null!==r&&e.strokePath()}}if(u.showPositions&&!t.isStatic){var T=t.position.x,E=t.position.y,S=Math.ceil(u.positionSize/2);e.fillStyle(u.positionColor,1),e.fillRect(T-S,E-S,u.positionSize,u.positionSize)}return this},renderConvexHull:function(t,e,n,r){if(void 0===r&&(r=1),t.parts.length>1){var i=t.vertices;e.lineStyle(r,n),e.beginPath(),e.moveTo(i[0].x,i[0].y);for(var o=1;o<i.length;o++)e.lineTo(i[o].x,i[o].y);e.lineTo(i[0].x,i[0].y),e.strokePath()}return this},renderJoints:function(){for(var t=this.debugGraphic,e=a.allConstraints(this.localWorld),n=0;n<e.length;n++){var r=e[n].render,i=r.lineColor,o=r.lineOpacity,s=r.lineThickness,u=r.pinSize,c=r.anchorColor,h=r.anchorSize;this.renderConstraint(e[n],t,i,o,s,u,c,h)}},renderConstraint:function(t,e,n,r,i,o,a,u){var c=t.render;if(!c.visible||!t.pointA||!t.pointB)return this;e.lineStyle(i,n,r);var h,l,f=t.bodyA,d=t.bodyB;if(h=f?m.add(f.position,t.pointA):t.pointA,"pin"===c.type)e.strokeCircle(h.x,h.y,o);else{if(l=d?m.add(d.position,t.pointB):t.pointB,e.beginPath(),e.moveTo(h.x,h.y),"spring"===c.type)for(var p,v=m.sub(l,h),g=m.perp(m.normalise(v)),y=Math.ceil(s.clamp(t.length/5,12,20)),b=1;b<y;b+=1)p=b%2===0?1:-1,e.lineTo(h.x+v.x*(b/y)+g.x*p*4,h.y+v.y*(b/y)+g.y*p*4);e.lineTo(l.x,l.y)}return e.strokePath(),c.anchors&&u>0&&(e.fillStyle(a),e.fillCircle(h.x,h.y,u),e.fillCircle(l.x,l.y,u)),this},resetCollisionIDs:function(){return i._nextCollidingGroupId=1,i._nextNonCollidingGroupId=-1,i._nextCategory=1,this},shutdown:function(){p.off(this.engine),this.removeAllListeners(),g.clear(this.localWorld,!1),u.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});t.exports=y},function(t,e,n){t.exports={BasePlugin:n(540),DefaultPlugins:n(197),PluginCache:n(24),PluginManager:n(414),ScenePlugin:n(1404)}},function(t,e,n){var r=n(540),i=n(0),o=n(20),s=new i({Extends:r,initialize:function(t,e,n){r.call(this,e),this.scene=t,this.systems=t.sys,this.pluginKey=n,t.sys.events.once(o.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});t.exports=s},function(t,e,n){t.exports={Canvas:n(1406),Events:n(91),Snapshot:n(1407),WebGL:n(1408)}},function(t,e,n){t.exports={CanvasRenderer:n(368),GetBlendModes:n(370),SetTransform:n(30)}},function(t,e,n){t.exports={Canvas:n(369),WebGL:n(383)}},function(t,e,n){var r=n(107),i=n(17),o={PipelineManager:n(372),Pipelines:n(1409),RenderTarget:n(141),Utils:n(12),WebGLPipeline:n(58),WebGLRenderer:n(371),WebGLShader:n(375)};o=i(!1,o,r),t.exports=o},function(t,e,n){var r=n(92),i=n(17),o={BitmapMaskPipeline:n(373),Events:n(374),GraphicsPipeline:n(376),LightPipeline:n(377),MultiPipeline:n(108),PointLightPipeline:n(378),PostFXPipeline:n(1410),RopePipeline:n(379),SinglePipeline:n(380),UtilityPipeline:n(381)};o=i(!1,o,r),t.exports=o},function(t,e,n){var r=n(0),i=n(198),o=n(2),s=n(1411),a=n(382),u=n(58),c=new r({Extends:u,initialize:function(t){t.renderTarget=o(t,"renderTarget",1),t.fragShader=o(t,"fragShader",s),t.vertShader=o(t,"vertShader",a),t.attributes=o(t,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),t.batchSize=1,t.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],u.call(this,t),this.isPostFX=!0,this.gameObject,this.colorMatrix=new i,this.fullFrame1,this.fullFrame2,this.halfFrame1,this.halfFrame2,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){u.prototype.boot.call(this);var t=this.manager.UTILITY_PIPELINE;this.fullFrame1=t.fullFrame1,this.fullFrame2=t.fullFrame2,this.halfFrame1=t.halfFrame1,this.halfFrame2=t.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(t){this.bindAndDraw(t)},copyFrame:function(t,e,n,r,i){this.manager.copyFrame(t,e,n,r,i)},copyToGame:function(t){this.manager.copyToGame(t)},drawFrame:function(t,e,n){this.manager.drawFrame(t,e,n,this.colorMatrix)},blendFrames:function(t,e,n,r,i){this.manager.blendFrames(t,e,n,r,i)},blendFramesAdditive:function(t,e,n,r,i){this.manager.blendFramesAdditive(t,e,n,r,i)},clearFrame:function(t,e){this.manager.clearFrame(t,e)},blitFrame:function(t,e,n,r,i,o){this.manager.blitFrame(t,e,n,r,i,o)},copyFrameRect:function(t,e,n,r,i,o,s,a){this.manager.copyFrameRect(t,e,n,r,i,o,s,a)},bindAndDraw:function(t,e,n,r,i){void 0===n&&(n=!0),void 0===r&&(r=!0);var o=this.gl,s=this.renderer;this.bind(i),this.set1i("uMainSampler",0),e?(o.viewport(0,0,e.width,e.height),o.bindFramebuffer(o.FRAMEBUFFER,e.framebuffer),o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,e.texture,0),n&&(r?o.clearColor(0,0,0,0):o.clearColor(0,0,0,1),o.clear(o.COLOR_BUFFER_BIT))):(s.popFramebuffer(!1,!1,!1),s.currentFramebuffer||o.viewport(0,0,s.width,s.height)),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,t.texture),o.bufferData(o.ARRAY_BUFFER,this.vertexData,o.STATIC_DRAW),o.drawArrays(o.TRIANGLES,0,6),e?(o.bindTexture(o.TEXTURE_2D,null),o.bindFramebuffer(o.FRAMEBUFFER,null)):s.resetTextures()}});t.exports=c},function(t,e){t.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join("\n")},function(t,e,n){var r=n(17),i=n(201),o={Center:n(403),Events:n(104),Orientation:n(404),ScaleManager:n(415),ScaleModes:n(405),Zoom:n(406)};o=r(!1,o,i.CENTER),o=r(!1,o,i.ORIENTATION),o=r(!1,o,i.SCALE_MODE),o=r(!1,o,i.ZOOM),t.exports=o},function(t,e,n){var r=n(144),i=n(17),o={Events:n(20),GetPhysicsPlugins:n(419),GetScenePlugins:n(420),SceneManager:n(417),ScenePlugin:n(1414),Settings:n(421),Systems:n(204)};o=i(!1,o,r),t.exports=o},function(t,e,n){var r=n(18),i=n(0),o=n(20),s=n(2),a=n(24),u=new i({initialize:function(t){this.scene=t,this.systems=t.sys,this.settings=t.sys.settings,this.key=t.sys.settings.key,this.manager=t.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._onUpdate,this._onUpdateScope,this._willSleep=!1,this._willRemove=!1,t.sys.events.once(o.BOOT,this.boot,this),t.sys.events.on(o.START,this.pluginStart,this)},boot:function(){this.systems.events.once(o.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(o.SHUTDOWN,this.shutdown,this)},start:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",t,e),this},restart:function(t){var e=this.key;return this.manager.queueOp("stop",e),this.manager.queueOp("start",e,t),this},transition:function(t){void 0===t&&(t={});var e=s(t,"target",!1),n=this.manager.getScene(e);if(!e||!this.checkValidTransition(n))return!1;var r=s(t,"duration",1e3);this._elapsed=0,this._target=n,this._duration=r,this._willSleep=s(t,"sleep",!1),this._willRemove=s(t,"remove",!1);var i=s(t,"onUpdate",null);i&&(this._onUpdate=i,this._onUpdateScope=s(t,"onUpdateScope",this.scene));var a=s(t,"allowInput",!1);this.settings.transitionAllowInput=a;var u=n.sys.settings;return u.isTransition=!0,u.transitionFrom=this.scene,u.transitionDuration=r,u.transitionAllowInput=a,s(t,"moveAbove",!1)?this.manager.moveAbove(this.key,e):s(t,"moveBelow",!1)&&this.manager.moveBelow(this.key,e),n.sys.isSleeping()?n.sys.wake(s(t,"data")):this.manager.start(e,s(t,"data")),this.systems.events.emit(o.TRANSITION_OUT,n,r),this.systems.events.on(o.UPDATE,this.step,this),!0},checkValidTransition:function(t){return!(!t||t.sys.isActive()||t.sys.isTransitioning()||t===this.scene||this.systems.isTransitioning())},step:function(t,e){this._elapsed+=e,this.transitionProgress=r(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var t=this._target.sys,e=this._target.sys.settings;this.systems.events.off(o.UPDATE,this.step,this),t.events.emit(o.TRANSITION_COMPLETE,this.scene),e.isTransition=!1,e.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(t,e,n,r){return this.manager.add(t,e,n,r)},launch:function(t,e){return t&&t!==this.key&&this.manager.queueOp("start",t,e),this},run:function(t,e){return t&&t!==this.key&&this.manager.queueOp("run",t,e),this},pause:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("pause",t,e),this},resume:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("resume",t,e),this},sleep:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("sleep",t,e),this},wake:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("wake",t,e),this},switch:function(t){return t!==this.key&&this.manager.queueOp("switch",this.key,t),this},stop:function(t,e){return void 0===t&&(t=this.key),this.manager.queueOp("stop",t,e),this},setActive:function(t,e,n){void 0===e&&(e=this.key);var r=this.manager.getScene(e);return r&&r.sys.setActive(t,n),this},setVisible:function(t,e){void 0===e&&(e=this.key);var n=this.manager.getScene(e);return n&&n.sys.setVisible(t),this},isSleeping:function(t){return void 0===t&&(t=this.key),this.manager.isSleeping(t)},isActive:function(t){return void 0===t&&(t=this.key),this.manager.isActive(t)},isPaused:function(t){return void 0===t&&(t=this.key),this.manager.isPaused(t)},isVisible:function(t){return void 0===t&&(t=this.key),this.manager.isVisible(t)},swapPosition:function(t,e){return void 0===e&&(e=this.key),t!==e&&this.manager.swapPosition(t,e),this},moveAbove:function(t,e){return void 0===e&&(e=this.key),t!==e&&this.manager.moveAbove(t,e),this},moveBelow:function(t,e){return void 0===e&&(e=this.key),t!==e&&this.manager.moveBelow(t,e),this},remove:function(t){return void 0===t&&(t=this.key),this.manager.remove(t),this},moveUp:function(t){return void 0===t&&(t=this.key),this.manager.moveUp(t),this},moveDown:function(t){return void 0===t&&(t=this.key),this.manager.moveDown(t),this},bringToTop:function(t){return void 0===t&&(t=this.key),this.manager.bringToTop(t),this},sendToBack:function(t){return void 0===t&&(t=this.key),this.manager.sendToBack(t),this},get:function(t){return this.manager.getScene(t)},getIndex:function(t){return void 0===t&&(t=this.key),this.manager.getIndex(t)},shutdown:function(){var t=this.systems.events;t.off(o.SHUTDOWN,this.shutdown,this),t.off(o.POST_UPDATE,this.step,this),t.off(o.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(o.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});a.register("ScenePlugin",u,"scenePlugin"),t.exports=u},function(t,e,n){t.exports={Events:n(438),List:n(110),Map:n(102),ProcessQueue:n(211),RTree:n(531),Set:n(149),Size:n(416)}},function(t,e,n){var r=n(17),i=n(1417),o={CanvasTexture:n(423),Events:n(106),FilterMode:i,Frame:n(109),Parsers:n(425),Texture:n(206),TextureManager:n(422),TextureSource:n(424)};o=r(!1,o,i),t.exports=o},function(t,e){t.exports={LINEAR:0,NEAREST:1}},function(t,e,n){var r=n(17),i=n(1419),o={Components:n(251),Parsers:n(1452),Formats:n(40),ImageCollection:n(576),ParseToTilemap:n(262),Tile:n(85),Tilemap:n(580),TilemapCreator:n(1459),TilemapFactory:n(1460),Tileset:n(122),TilemapLayer:n(581),Orientation:n(29),LayerData:n(120),MapData:n(121),ObjectLayer:n(572)};o=r(!1,o,i.ORIENTATION),t.exports=o},function(t,e,n){var r={ORIENTATION:n(29)};t.exports=r},function(t,e,n){var r=n(26),i=n(63);t.exports=function(t,e,n,o,s,a,u,c){void 0===u&&(u=!0),t<0&&(t=0),e<0&&(e=0);for(var h=r(t,e,n,o,null,c),l=s-t,f=a-e,d=0;d<h.length;d++){var p=h[d].x+l,v=h[d].y+f;p>=0&&p<c.width&&v>=0&&v<c.height&&c.data[v][p]&&c.data[v][p].copy(h[d])}u&&i(s-1,a-1,n+2,o+2,c)}},function(t,e,n){var r=n(26),i=n(542);t.exports=function(t,e,n,o,s,a){n||(n={}),Array.isArray(t)||(t=[t]);var u=a.tilemapLayer;o||(o=u.scene),s||(s=o.cameras.main);var c,h=r(0,0,a.width,a.height,null,a),l=[];for(c=0;c<h.length;c++){var f=h[c];if(-1!==t.indexOf(f.index)){var d=u.tileToWorldXY(f.x,f.y,void 0,s,a);n.x=d.x,n.y=d.y,l.push(o.make.sprite(n))}}if("number"===typeof e)for(c=0;c<t.length;c++)i(t[c],e,0,0,a.width,a.height,a);else if(Array.isArray(e))for(c=0;c<t.length;c++)i(t[c],e[c],0,0,a.width,a.height,a);return l}},function(t,e,n){var r=n(26),i=n(63),o=n(72);t.exports=function(t,e,n,s,a,u,c){for(var h=-1!==c.collideIndexes.indexOf(t),l=r(e,n,s,a,null,c),f=0;f<l.length;f++)l[f].index=t,o(l[f],h);u&&i(e-1,n-1,s+2,a+2,c)}},function(t,e,n){var r=n(26);t.exports=function(t,e,n,i,o,s,a,u){return r(n,i,o,s,a,u).filter(t,e)}},function(t,e){t.exports=function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=!1);var i,o,s,a=0;if(n){for(o=r.height-1;o>=0;o--)for(i=r.width-1;i>=0;i--)if((s=r.data[o][i])&&s.index===t){if(a===e)return s;a+=1}}else for(o=0;o<r.height;o++)for(i=0;i<r.width;i++)if((s=r.data[o][i])&&s.index===t){if(a===e)return s;a+=1}return null}},function(t,e,n){var r=n(26);t.exports=function(t,e,n,i,o,s,a,u){return r(n,i,o,s,a,u).find(t,e)||null}},function(t,e,n){var r=n(26);t.exports=function(t,e,n,i,o,s,a,u){r(n,i,o,s,a,u).forEach(t,e)}},function(t,e,n){var r=n(29),i=n(544),o=n(545),s=n(547),a=n(1),u=n(548);t.exports=function(t){return t===r.ORTHOGONAL?i:t===r.HEXAGONAL?o:t===r.STAGGERED?u:t===r.ISOMETRIC?s:a}},function(t,e,n){var r=n(158),i=new(n(3));t.exports=function(t,e,n,o,s){return s.tilemapLayer.worldToTileXY(t,e,!0,i,o),r(i.x,i.y,n,s)}},function(t,e,n){var r=n(483),i=n(26),o=n(484),s=n(1),a=n(3),u=function(t,e){return o.RectangleToTriangle(e,t)},c=new a,h=new a,l=new a;t.exports=function(t,e,n,a){if(void 0===t)return[];var f=s;t instanceof r.Circle?f=o.CircleToRectangle:t instanceof r.Rectangle?f=o.RectangleToRectangle:t instanceof r.Triangle?f=u:t instanceof r.Line&&(f=o.LineToRectangle),a.tilemapLayer.worldToTileXY(t.left,t.top,!0,h,n);var d=h.x,p=h.y;a.tilemapLayer.worldToTileXY(t.right,t.bottom,!0,l,n);var v=Math.ceil(l.x),g=Math.ceil(l.y),m=Math.max(v-d,1),y=Math.max(g-p,1),b=i(d,p,m,y,e,a),w=a.tileWidth,x=a.tileHeight;a.tilemapLayer&&(w*=a.tilemapLayer.scaleX,x*=a.tilemapLayer.scaleY);for(var _=[],T=new r.Rectangle(0,0,w,x),E=0;E<b.length;E++){var S=b[E];a.tilemapLayer.tileToWorldXY(S.x,S.y,c,n),T.x=c.x,T.y=c.y,f(t,T)&&_.push(S)}return _}},function(t,e,n){var r=n(29),i=n(1),o=n(253);t.exports=function(t){return t===r.ORTHOGONAL?o:i}},function(t,e,n){var r=n(29),i=n(550),o=n(551),s=n(1),a=n(552),u=n(553);t.exports=function(t){return t===r.ORTHOGONAL?u:t===r.ISOMETRIC?o:t===r.HEXAGONAL?i:t===r.STAGGERED?a:s}},function(t,e,n){var r=n(29),i=n(554),o=n(1),s=n(555),a=n(254);t.exports=function(t){return t===r.ORTHOGONAL?a:t===r.HEXAGONAL?i:t===r.STAGGERED?s:o}},function(t,e,n){var r=n(29),i=n(1),o=n(255);t.exports=function(t){return t===r.ORTHOGONAL?o:i}},function(t,e,n){var r=n(29),i=n(556),o=n(557),s=n(1),a=n(558),u=n(559);t.exports=function(t){return t===r.ORTHOGONAL?u:t===r.ISOMETRIC?o:t===r.HEXAGONAL?i:t===r.STAGGERED?a:s}},function(t,e,n){var r=n(29),i=n(560),o=n(1),s=n(561),a=n(256);t.exports=function(t){return t===r.ORTHOGONAL?a:t===r.HEXAGONAL?i:t===r.STAGGERED?s:o}},function(t,e,n){var r=n(562),i=new(n(3));t.exports=function(t,e,n,o){o.tilemapLayer.worldToTileXY(t,e,!0,i,n);var s=i.x,a=i.y;return r(s,a,o)}},function(t,e,n){var r=n(257),i=new(n(3));t.exports=function(t,e,n,o,s,a){return a.tilemapLayer.worldToTileXY(e,n,!0,i,s,a),r(t,i.x,i.y,o,a)}},function(t,e,n){var r=n(63),i=n(257);t.exports=function(t,e,n,o,s){if(void 0===o&&(o=!0),!Array.isArray(t))return null;Array.isArray(t[0])||(t=[t]);for(var a=t.length,u=t[0].length,c=0;c<a;c++)for(var h=0;h<u;h++){var l=t[c][h];i(l,e+h,n+c,!1,s)}o&&r(e-1,n-1,u+2,a+2,s)}},function(t,e,n){var r=n(26),i=n(210);t.exports=function(t,e,n,o,s,a){var u,c=r(t,e,n,o,{},a);if(!s)for(s=[],u=0;u<c.length;u++)-1===s.indexOf(c[u].index)&&s.push(c[u].index);for(u=0;u<c.length;u++)c[u].index=i(s)}},function(t,e,n){var r=n(563),i=new(n(3));t.exports=function(t,e,n,o,s,a){return a.tilemapLayer.worldToTileXY(t,e,!0,i,s,a),r(i.x,i.y,n,o,a)}},function(t,e,n){var r=n(26),i=n(397),o=new i(105,210,231,150),s=new i(243,134,48,200),a=new i(40,39,37,150);t.exports=function(t,e,n){void 0===e&&(e={});var i=void 0!==e.tileColor?e.tileColor:o,u=void 0!==e.collidingTileColor?e.collidingTileColor:s,c=void 0!==e.faceColor?e.faceColor:a,h=r(0,0,n.width,n.height,null,n);t.translateCanvas(n.tilemapLayer.x,n.tilemapLayer.y),t.scaleCanvas(n.tilemapLayer.scaleX,n.tilemapLayer.scaleY);for(var l=0;l<h.length;l++){var f=h[l],d=f.width,p=f.height,v=f.pixelX,g=f.pixelY,m=f.collides?u:i;null!==m&&(t.fillStyle(m.color,m.alpha/255),t.fillRect(v,g,d,p)),v+=1,g+=1,d-=2,p-=2,null!==c&&(t.lineStyle(1,c.color,c.alpha/255),f.faceTop&&t.lineBetween(v,g,v+d,g),f.faceRight&&t.lineBetween(v+d,g,v+d,g+p),f.faceBottom&&t.lineBetween(v,g+p,v+d,g+p),f.faceLeft&&t.lineBetween(v,g,v,g+p))}}},function(t,e,n){var r=n(72),i=n(63),o=n(160);t.exports=function(t,e,n,s,a){void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===a&&(a=!0),Array.isArray(t)||(t=[t]);for(var u=0;u<t.length;u++)o(t[u],e,s);if(a)for(var c=0;c<s.height;c++)for(var h=0;h<s.width;h++){var l=s.data[c][h];l&&-1!==t.indexOf(l.index)&&r(l,e)}n&&i(0,0,s.width,s.height,s)}},function(t,e,n){var r=n(72),i=n(63),o=n(160);t.exports=function(t,e,n,s,a,u){if(void 0===n&&(n=!0),void 0===s&&(s=!0),void 0===u&&(u=!0),!(t>e)){for(var c=t;c<=e;c++)o(c,n,a);if(u)for(var h=0;h<a.height;h++)for(var l=0;l<a.width;l++){var f=a.data[h][l];f&&f.index>=t&&f.index<=e&&r(f,n)}s&&i(0,0,a.width,a.height,a)}}},function(t,e,n){var r=n(72),i=n(63),o=n(160);t.exports=function(t,e,n,s){void 0===e&&(e=!0),void 0===n&&(n=!0),Array.isArray(t)||(t=[t]);for(var a=0;a<s.height;a++)for(var u=0;u<s.width;u++){var c=s.data[a][u];c&&-1===t.indexOf(c.index)&&(r(c,e),o(c.index,e,s))}n&&i(0,0,s.width,s.height,s)}},function(t,e,n){var r=n(72),i=n(63),o=n(126);t.exports=function(t,e,n,s){void 0===e&&(e=!0),void 0===n&&(n=!0);for(var a=0;a<s.height;a++)for(var u=0;u<s.width;u++){var c=s.data[a][u];if(c)for(var h in t)if(o(c.properties,h)){var l=t[h];Array.isArray(l)||(l=[l]);for(var f=0;f<l.length;f++)c.properties[h]===l[f]&&r(c,e)}}n&&i(0,0,s.width,s.height,s)}},function(t,e,n){var r=n(72),i=n(63);t.exports=function(t,e,n){void 0===t&&(t=!0),void 0===e&&(e=!0);for(var o=0;o<n.height;o++)for(var s=0;s<n.width;s++){var a=n.data[o][s];if(a){var u=a.getCollisionGroup();u&&u.objects&&u.objects.length>0&&r(a,t)}}e&&i(0,0,n.width,n.height,n)}},function(t,e){t.exports=function(t,e,n,r){if("number"===typeof t)r.callbacks[t]=null!==e?{callback:e,callbackContext:n}:void 0;else for(var i=0,o=t.length;i<o;i++)r.callbacks[t[i]]=null!==e?{callback:e,callbackContext:n}:void 0}},function(t,e,n){var r=n(26);t.exports=function(t,e,n,i,o,s,a){for(var u=r(t,e,n,i,null,a),c=0;c<u.length;c++)u[c].setCollisionCallback(o,s)}},function(t,e,n){var r=n(26),i=n(131);t.exports=function(t,e,n,o,s){var a=r(t,e,n,o,null,s),u=a.map((function(t){return t.index}));i(u);for(var c=0;c<a.length;c++)a[c].index=u[c]}},function(t,e,n){var r=n(26);t.exports=function(t,e,n,i,o,s,a){for(var u=r(n,i,o,s,null,a),c=0;c<u.length;c++)u[c]&&(u[c].index===t?u[c].index=e:u[c].index===e&&(u[c].index=t))}},function(t,e,n){var r=n(26);t.exports=function(t,e,n,i,o,s){if(o){var a,u=r(t,e,n,i,null,s),c=0;for(a=0;a<o.length;a++)c+=o[a].weight;if(!(c<=0))for(a=0;a<u.length;a++){for(var h=Math.random()*c,l=0,f=-1,d=0;d<o.length;d++)if(h<=(l+=o[d].weight)){var p=o[d].index;f=Array.isArray(p)?p[Math.floor(Math.random()*p.length)]:p;break}u[a].index=f}}}},function(t,e,n){t.exports={FromOrientationString:n(258),Parse:n(564),Parse2DArray:n(259),ParseCSV:n(565),Impact:n(1454),Tiled:n(1455)}},function(t,e){t.exports=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=n;if(r.name&&""!==r.name&&(i=r.name),Array.isArray(r.wangtiles)&&r.wangtiles.length>0){var o,s,a,u={},c={};if(Array.isArray(r.edgecolors))for(o=0;o<r.edgecolors.length;o++)a=1+o,""!==(s=r.edgecolors[o]).name&&(u[a]=s.name);if(Array.isArray(r.cornercolors))for(o=0;o<r.cornercolors.length;o++)a=1+o,""!==(s=r.cornercolors[o]).name&&(c[a]=s.name);if(Array.isArray(r.colors))for(o=0;o<r.colors.length;o++)a=1+o,""!==(s=r.colors[o]).name&&(u[a]=c[a]=s.name);for(var h=[u,c,u,c,u,c,u,c],l=0;l<r.wangtiles.length;l++){var f=r.wangtiles[l],d=e[f.tileid]||(e[f.tileid]={});d=d.wangid||(d.wangid={});for(var p=[],v=0;v<Math.min(h.length,f.wangid.length);v++)if(0!==(s=f.wangid[v])){var g=h[v][s];void 0===g?p.push(s):p.push(g)}else p.push(void 0);d[i]=p}}}}},function(t,e,n){t.exports={ParseTileLayers:n(578),ParseTilesets:n(579),ParseWeltmeister:n(577)}},function(t,e,n){t.exports={AssignTileProperties:n(567),Base64Decode:n(574),BuildTilesetIndex:n(568),CreateGroupLayer:n(161),ParseGID:n(261),ParseImageLayers:n(569),ParseJSONTiled:n(566),ParseObject:n(260),ParseObjectLayers:n(570),ParseTileLayers:n(573),ParseTilesets:n(575)}},function(t,e,n){var r=n(1),i=n(1);r=n(1457),i=n(1458),t.exports={renderWebGL:r,renderCanvas:i}},function(t,e,n){var r=n(12);t.exports=function(t,e,n){var i=e.cull(n),o=i.length,s=n.alpha*e.alpha;if(!(0===o||s<=0)){var a=e.gidMap,u=t.pipelines.set(e.pipeline,e),c=r.getTintAppendFloatAlpha,h=e.scrollFactorX,l=e.scrollFactorY,f=e.x,d=e.y,p=e.scaleX,v=e.scaleY;t.pipelines.preBatch(e);for(var g=0;g<o;g++){var m=i[g],y=a[m.index];if(y){var b=y.getTileTextureCoordinates(m.index);if(null!==b){var w=y.glTexture,x=u.setTexture2D(w,e),_=y.tileWidth,T=y.tileHeight,E=b.x,S=b.y,k=.5*y.tileWidth,A=.5*y.tileHeight,O=c(m.tint,s*m.alpha);u.batchTexture(e,w,w.width,w.height,f+(k+m.pixelX)*p,d+(A+m.pixelY)*v,m.width,m.height,p,v,m.rotation,m.flipX,m.flipY,h,l,k,A,E,S,_,T,O,O,O,O,!1,0,0,n,null,!0,x)}}}t.pipelines.postBatch(e)}}},function(t,e,n){var r=n(25),i=new r,o=new r,s=new r;t.exports=function(t,e,n,r){var a=e.cull(n),u=a.length,c=n.alpha*e.alpha;if(!(0===u||c<=0)){var h=i,l=o,f=s;l.applyITRS(e.x,e.y,e.rotation,e.scaleX,e.scaleY),h.copyFrom(n.matrix);var d=t.currentContext,p=e.gidMap;d.save(),r?(h.multiplyWithOffset(r,-n.scrollX*e.scrollFactorX,-n.scrollY*e.scrollFactorY),l.e=e.x,l.f=e.y,h.multiply(l,f),f.copyToContext(d)):(l.e-=n.scrollX*e.scrollFactorX,l.f-=n.scrollY*e.scrollFactorY,l.copyToContext(d)),(!t.antialias||e.scaleX>1||e.scaleY>1)&&(d.imageSmoothingEnabled=!1);for(var v=0;v<u;v++){var g=a[v],m=p[g.index];if(m){var y=m.image.getSourceImage(),b=m.getTileTextureCoordinates(g.index);if(null!==b){var w=m.tileWidth,x=m.tileHeight,_=.5*w,T=.5*x;d.save(),d.translate(g.pixelX+_,g.pixelY+T),0!==g.rotation&&d.rotate(g.rotation),(g.flipX||g.flipY)&&d.scale(g.flipX?-1:1,g.flipY?-1:1),d.globalAlpha=c*g.alpha,d.drawImage(y,b.x,b.y,w,x,-_,-T,w,x),d.restore()}}}d.restore()}}},function(t,e,n){var r=n(16),i=n(262);r.register("tilemap",(function(t){var e=void 0!==t?t:{};return i(this.scene,e.key,e.tileWidth,e.tileHeight,e.width,e.height,e.data,e.insertNull)}))},function(t,e,n){var r=n(5),i=n(262);r.register("tilemap",(function(t,e,n,r,o,s,a){return null===t&&(t=void 0),null===e&&(e=void 0),null===n&&(n=void 0),null===r&&(r=void 0),null===o&&(o=void 0),i(this.scene,t,e,n,r,o,s,a)}))},function(t,e,n){t.exports={Clock:n(1462),TimerEvent:n(582)}},function(t,e,n){var r=n(0),i=n(24),o=n(20),s=n(582),a=n(93),u=new r({initialize:function(t){this.scene=t,this.systems=t.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],t.sys.events.once(o.BOOT,this.boot,this),t.sys.events.on(o.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(o.PRE_UPDATE,this.preUpdate,this),t.on(o.UPDATE,this.update,this),t.once(o.SHUTDOWN,this.shutdown,this)},addEvent:function(t){var e;return t instanceof s?(e=t,this.removeEvent(e),e.elapsed=e.startAt,e.hasDispatched=!1,e.repeatCount=-1===e.repeat||e.loop?999999999999:e.repeat):e=new s(t),this._pendingInsertion.push(e),e},delayedCall:function(t,e,n,r){return this.addEvent({delay:t,callback:e,args:n,callbackScope:r})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(t){Array.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var n=t[e];a(this._pendingRemoval,n),a(this._pendingInsertion,n),a(this._active,n)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var t=this._pendingRemoval.length,e=this._pendingInsertion.length;if(0!==t||0!==e){var n,r;for(n=0;n<t;n++){r=this._pendingRemoval[n];var i=this._active.indexOf(r);i>-1&&this._active.splice(i,1),r.destroy()}for(n=0;n<e;n++)r=this._pendingInsertion[n],this._active.push(r);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(t,e){if(this.now=t,!this.paused){e*=this.timeScale;for(var n=0;n<this._active.length;n++){var r=this._active[n];if(!r.paused&&(r.elapsed+=e*r.timeScale,r.elapsed>=r.delay)){var i=r.elapsed-r.delay;r.elapsed=r.delay,!r.hasDispatched&&r.callback&&(r.hasDispatched=!0,r.callback.apply(r.callbackScope,r.args)),r.repeatCount>0?(r.repeatCount--,r.elapsed=i,r.hasDispatched=!1):this._pendingRemoval.push(r)}}}},shutdown:function(){var t;for(t=0;t<this._pendingInsertion.length;t++)this._pendingInsertion[t].destroy();for(t=0;t<this._active.length;t++)this._active[t].destroy();for(t=0;t<this._pendingRemoval.length;t++)this._pendingRemoval[t].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var e=this.systems.events;e.off(o.PRE_UPDATE,this.preUpdate,this),e.off(o.UPDATE,this.update,this),e.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});i.register("Clock",u,"time"),t.exports=u},function(t,e,n){var r=n(100),i=n(17),o={Builders:n(1464),Events:n(267),TweenManager:n(1480),Tween:n(266),TweenData:n(268),Timeline:n(588)};o=i(!1,o,r),t.exports=o},function(t,e,n){t.exports={GetBoolean:n(99),GetEaseFunction:n(80),GetNewValue:n(162),GetProps:n(583),GetTargets:n(263),GetTweens:n(584),GetValueOp:n(264),NumberTweenBuilder:n(585),StaggerBuilder:n(586),TimelineBuilder:n(587),TweenBuilder:n(163)}},function(t,e){t.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(t,e){t.exports="complete"},function(t,e){t.exports="loop"},function(t,e){t.exports="pause"},function(t,e){t.exports="resume"},function(t,e){t.exports="start"},function(t,e){t.exports="update"},function(t,e){t.exports="active"},function(t,e){t.exports="complete"},function(t,e){t.exports="loop"},function(t,e){t.exports="repeat"},function(t,e){t.exports="start"},function(t,e){t.exports="stop"},function(t,e){t.exports="update"},function(t,e){t.exports="yoyo"},function(t,e,n){var r=n(93),i=n(0),o=n(585),s=n(24),a=n(20),u=n(586),c=n(587),h=n(100),l=n(163),f=new i({initialize:function(t){this.scene=t,this.systems=t.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,t.sys.events.once(a.BOOT,this.boot,this),t.sys.events.on(a.START,this.start,this)},boot:function(){this.systems.events.once(a.DESTROY,this.destroy,this)},start:function(){var t=this.systems.events;t.on(a.PRE_UPDATE,this.preUpdate,this),t.on(a.UPDATE,this.update,this),t.once(a.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(t){return c(this,t)},timeline:function(t){var e=c(this,t);return e.paused||(this._add.push(e),this._toProcess++),e},create:function(t){return l(this,t)},add:function(t){var e=l(this,t);return this._add.push(e),this._toProcess++,e},existing:function(t){return this._add.push(t),this._toProcess++,this},addCounter:function(t){var e=o(this,t);return this._add.push(e),this._toProcess++,e},stagger:function(t,e){return u(t,e)},preUpdate:function(){if(0!==this._toProcess){var t,e,n=this._destroy,r=this._active,i=this._pending;for(t=0;t<n.length;t++){e=n[t];var o=r.indexOf(e);-1===o?(o=i.indexOf(e))>-1&&(e.state=h.REMOVED,i.splice(o,1)):(e.state=h.REMOVED,r.splice(o,1))}for(n.length=0,n=this._add,t=0;t<n.length;t++)(e=n[t]).state===h.PENDING_ADD&&(e.init()?(e.play(),this._active.push(e)):this._pending.push(e));n.length=0,this._toProcess=0}},update:function(t,e){var n,r=this._active;e*=this.timeScale;for(var i=0;i<r.length;i++)(n=r[i]).update(t,e)&&(this._destroy.push(n),this._toProcess++)},remove:function(t){return r(this._add,t),r(this._pending,t),r(this._active,t),r(this._destroy,t),t.state=h.REMOVED,this},makeActive:function(t){if(-1!==this._add.indexOf(t)||-1!==this._active.indexOf(t))return this;var e=this._pending.indexOf(t);return-1!==e&&this._pending.splice(e,1),this._add.push(t),t.state=h.PENDING_ADD,this._toProcess++,this},each:function(t,e){for(var n=[null],r=1;r<arguments.length;r++)n.push(arguments[r]);for(var i in this.list)n[0]=this.list[i],t.apply(e,n)},getAllTweens:function(){for(var t=this._active,e=[],n=0;n<t.length;n++)e.push(t[n]);return e},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(t,e){void 0===e&&(e=!1);var n,r,i,o=this._active,s=[];for(Array.isArray(t)||(t=[t]),r=0;r<o.length;r++)for(n=o[r],i=0;i<t.length;i++)n.hasTarget(t[i])&&s.push(n);if(e)for(o=this._pending,r=0;r<o.length;r++)for(n=o[r],i=0;i<t.length;i++)n.hasTarget(t[i])&&s.push(n);return s},isTweening:function(t){for(var e,n=this._active,r=0;r<n.length;r++)if((e=n[r]).hasTarget(t)&&e.isPlaying())return!0;return!1},killAll:function(){for(var t=this.getAllTweens(),e=0;e<t.length;e++)t[e].stop();return this},killTweensOf:function(t){for(var e=this.getTweensOf(t),n=0;n<e.length;n++)e[n].stop();return this},pauseAll:function(){for(var t=this._active,e=0;e<t.length;e++)t[e].pause();return this},resumeAll:function(){for(var t=this._active,e=0;e<t.length;e++)t[e].resume();return this},setGlobalTimeScale:function(t){return this.timeScale=t,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var t=this.systems.events;t.off(a.PRE_UPDATE,this.preUpdate,this),t.off(a.UPDATE,this.update,this),t.off(a.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(a.START,this.start,this),this.scene=null,this.systems=null}});s.register("TweenManager",f,"tweens"),t.exports=f},function(t,e,n){t.exports={Array:n(208),Base64:n(1482),Objects:n(1484),String:n(1488),NOOP:n(1)}},function(t,e,n){t.exports={ArrayBufferToBase64:n(1483),Base64ToArrayBuffer:n(433)}},function(t,e){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";t.exports=function(t,e){for(var r=new Uint8Array(t),i=r.length,o=e?"data:"+e+";base64,":"",s=0;s<i;s+=3)o+=n[r[s]>>2],o+=n[(3&r[s])<<4|r[s+1]>>4],o+=n[(15&r[s+1])<<2|r[s+2]>>6],o+=n[63&r[s+2]];return i%3===2?o=o.substring(0,o.length-1)+"=":i%3===1&&(o=o.substring(0,o.length-2)+"=="),o}},function(t,e,n){t.exports={Clone:n(77),DeepCopy:n(175),Extend:n(17),GetAdvancedValue:n(13),GetFastValue:n(2),GetMinMaxValue:n(1485),GetValue:n(6),HasAll:n(1486),HasAny:n(455),HasValue:n(126),IsPlainObject:n(7),Merge:n(127),MergeRight:n(1487),Pick:n(571),SetValue:n(478)}},function(t,e,n){var r=n(6),i=n(18);t.exports=function(t,e,n,o,s){void 0===s&&(s=n);var a=r(t,e,s);return i(a,n,o)}},function(t,e){t.exports=function(t,e){for(var n=0;n<e.length;n++)if(!t.hasOwnProperty(e[n]))return!1;return!0}},function(t,e,n){var r=n(77);t.exports=function(t,e){var n=r(t);for(var i in e)n.hasOwnProperty(i)&&(n[i]=e[i]);return n}},function(t,e,n){t.exports={Format:n(1489),Pad:n(186),RemoveAt:n(1490),Reverse:n(1491),UppercaseFirst:n(205),UUID:n(222)}},function(t,e){t.exports=function(t,e){return t.replace(/%([0-9]+)/g,(function(t,n){return e[Number(n)-1]}))}},function(t,e){t.exports=function(t,e){return 0===e?t.slice(1):t.slice(0,e-1)+t.slice(e)}},function(t,e){t.exports=function(t){return t.split("").reverse().join("")}},function(t,e,n){t.exports={SoundManagerCreator:n(426),Events:n(70),BaseSound:n(146),BaseSoundManager:n(145),WebAudioSound:n(434),WebAudioSoundManager:n(432),HTML5AudioSound:n(429),HTML5AudioSoundManager:n(427),NoAudioSound:n(431),NoAudioSoundManager:n(430)}},function(t,e,n){t.exports={Arcade:n(1366),Matter:n(1494)}},function(t,e,n){t.exports={BodyBounds:n(1392),Components:n(249),Events:n(272),Factory:n(1394),MatterGameObject:n(1395),Image:n(1396),Matter:n(594),MatterPhysics:n(1524),PolyDecomp:n(1393),Sprite:n(1397),TileBody:n(593),PhysicsEditorParser:n(589),PhysicsJSONParser:n(590),PointerConstraint:n(1398),World:n(1402)}},function(t,e){t.exports={setBounce:function(t){return this.body.restitution=t,this}}},function(t,e){var n={setCollisionCategory:function(t){return this.body.collisionFilter.category=t,this},setCollisionGroup:function(t){return this.body.collisionFilter.group=t,this},setCollidesWith:function(t){var e=0;if(Array.isArray(t))for(var n=0;n<t.length;n++)e|=t[n];else e=t;return this.body.collisionFilter.mask=e,this},setOnCollide:function(t){return this.body.onCollideCallback=t,this},setOnCollideEnd:function(t){return this.body.onCollideEndCallback=t,this},setOnCollideActive:function(t){return this.body.onCollideActiveCallback=t,this},setOnCollideWith:function(t,e){Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var r=t[n].hasOwnProperty("body")?t[n].body:t[n];this.body.setOnCollideWith(r,e)}return this}};t.exports=n},function(t,e,n){var r=n(41),i={applyForce:function(t){return this._tempVec2.set(this.body.position.x,this.body.position.y),r.applyForce(this.body,this._tempVec2,t),this},applyForceFrom:function(t,e){return r.applyForce(this.body,t,e),this},thrust:function(t){var e=this.body.angle;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(t){var e=this.body.angle-Math.PI/2;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(t){var e=this.body.angle+Math.PI/2;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(t){var e=this.body.angle-Math.PI;return this._tempVec2.set(t*Math.cos(e),t*Math.sin(e)),r.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}};t.exports=i},function(t,e){var n={setFriction:function(t,e,n){return this.body.friction=t,void 0!==e&&(this.body.frictionAir=e),void 0!==n&&(this.body.frictionStatic=n),this},setFrictionAir:function(t){return this.body.frictionAir=t,this},setFrictionStatic:function(t){return this.body.frictionStatic=t,this}};t.exports=n},function(t,e){t.exports={setIgnoreGravity:function(t){return this.body.ignoreGravity=t,this}}},function(t,e,n){var r=n(41),i=n(3),o={setMass:function(t){return r.setMass(this.body,t),this},setDensity:function(t){return r.setDensity(this.body,t),this},centerOfMass:{get:function(){return new i(this.body.centerOfMass.x,this.body.centerOfMass.y)}}};t.exports=o},function(t,e){t.exports={setSensor:function(t){return this.body.isSensor=t,this},isSensor:function(){return this.body.isSensor}}},function(t,e,n){var r=n(86),i=n(41),o=n(124),s=n(2),a=n(589),u=n(590),c=n(64),h={setRectangle:function(t,e,n){return this.setBody({type:"rectangle",width:t,height:e},n)},setCircle:function(t,e){return this.setBody({type:"circle",radius:t},e)},setPolygon:function(t,e,n){return this.setBody({type:"polygon",sides:e,radius:t},n)},setTrapezoid:function(t,e,n,r){return this.setBody({type:"trapezoid",width:t,height:e,slope:n},r)},setExistingBody:function(t,e){void 0===e&&(e=!0),this.body&&this.world.remove(this.body,!0),this.body=t;for(var n=0;n<t.parts.length;n++)t.parts[n].gameObject=this;var r=this;if(t.destroy=function(){r.world.remove(r.body,!0),r.body.gameObject=null},e&&(this.world.has(t)&&this.world.remove(t,!0),this.world.add(t)),this._originComponent){var i=t.render.sprite.xOffset,s=t.render.sprite.yOffset,a=t.centerOfMass.x,u=t.centerOfMass.y;if(o(a,.5)&&o(u,.5))this.setOrigin(i+.5,s+.5);else{var c=t.centerOffset.x,h=t.centerOffset.y;this.setOrigin(i+c/this.displayWidth,s+h/this.displayHeight)}}return this},setBody:function(t,e){if(!t)return this;var n;"string"===typeof t&&(t={type:t});var o=s(t,"type","rectangle"),h=s(t,"x",this._tempVec2.x),l=s(t,"y",this._tempVec2.y),f=s(t,"width",this.width),d=s(t,"height",this.height);switch(o){case"rectangle":n=r.rectangle(h,l,f,d,e);break;case"circle":var p=s(t,"radius",Math.max(f,d)/2),v=s(t,"maxSides",25);n=r.circle(h,l,p,e,v);break;case"trapezoid":var g=s(t,"slope",.5);n=r.trapezoid(h,l,f,d,g,e);break;case"polygon":var m=s(t,"sides",5),y=s(t,"radius",Math.max(f,d)/2);n=r.polygon(h,l,m,y,e);break;case"fromVertices":case"fromVerts":var b=s(t,"verts",null);if(b)if("string"===typeof b&&(b=c.fromPath(b)),this.body&&!this.body.hasOwnProperty("temp"))i.setVertices(this.body,b),n=this.body;else{var w=s(t,"flagInternal",!1),x=s(t,"removeCollinear",.01),_=s(t,"minimumArea",10);n=r.fromVertices(h,l,b,e,w,x,_)}break;case"fromPhysicsEditor":n=a.parseBody(h,l,t,e);break;case"fromPhysicsTracer":n=u.parseBody(h,l,t,e)}return n&&this.setExistingBody(n,t.addToWorld),this}};t.exports=h},function(t,e,n){var r=n(272),i=n(165),o=n(166),s={setToSleep:function(){return i.set(this.body,!0),this},setAwake:function(){return i.set(this.body,!1),this},setSleepThreshold:function(t){return void 0===t&&(t=60),this.body.sleepThreshold=t,this},setSleepEvents:function(t,e){return this.setSleepStartEvent(t),this.setSleepEndEvent(e),this},setSleepStartEvent:function(t){if(t){var e=this.world;o.on(this.body,"sleepStart",(function(t){e.emit(r.SLEEP_START,t,this)}))}else o.off(this.body,"sleepStart");return this},setSleepEndEvent:function(t){if(t){var e=this.world;o.on(this.body,"sleepEnd",(function(t){e.emit(r.SLEEP_END,t,this)}))}else o.off(this.body,"sleepEnd");return this}};t.exports=s},function(t,e){t.exports="afteradd"},function(t,e){t.exports="afterremove"},function(t,e){t.exports="afterupdate"},function(t,e){t.exports="beforeadd"},function(t,e){t.exports="beforeremove"},function(t,e){t.exports="beforeupdate"},function(t,e){t.exports="collisionactive"},function(t,e){t.exports="collisionend"},function(t,e){t.exports="collisionstart"},function(t,e){t.exports="dragend"},function(t,e){t.exports="drag"},function(t,e){t.exports="dragstart"},function(t,e){t.exports="pause"},function(t,e){t.exports="resume"},function(t,e){t.exports="sleepend"},function(t,e){t.exports="sleepstart"},function(t,e,n){var r=n(41),i={setStatic:function(t){return r.setStatic(this.body,t),this},isStatic:function(){return this.body.isStatic}};t.exports=i},function(t,e,n){var r=n(41),i=n(14),o=n(269),s=n(270),a={x:{get:function(){return this.body.position.x},set:function(t){this._tempVec2.set(t,this.y),r.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(t){this._tempVec2.set(this.x,t),r.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(t){var e=1/this._scaleX,n=1/this._scaleY;this._scaleX=t,0===this._scaleX?this.renderFlags&=-5:this.renderFlags|=4,r.scale(this.body,e,n),r.scale(this.body,t,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(t){var e=1/this._scaleX,n=1/this._scaleY;this._scaleY=t,0===this._scaleY?this.renderFlags&=-5:this.renderFlags|=4,r.scale(this.body,e,n),r.scale(this.body,this._scaleX,t)}},angle:{get:function(){return s(this.body.angle*i.RAD_TO_DEG)},set:function(t){this.rotation=s(t)*i.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(t){this._rotation=o(t),r.setAngle(this.body,this._rotation)}},setPosition:function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._tempVec2.set(t,e),r.setPosition(this.body,this._tempVec2),this},setRotation:function(t){return void 0===t&&(t=0),this._rotation=o(t),r.setAngle(this.body,t),this},setFixedRotation:function(){return r.setInertia(this.body,1/0),this},setAngle:function(t){return void 0===t&&(t=0),this.angle=t,r.setAngle(this.body,this.rotation),this},setScale:function(t,e,n){void 0===t&&(t=1),void 0===e&&(e=t);var i=1/this._scaleX,o=1/this._scaleY;return this._scaleX=t,this._scaleY=e,r.scale(this.body,i,o,n),r.scale(this.body,t,e,n),this}};t.exports=a},function(t,e,n){var r=n(41),i={setAngularVelocity:function(t){return r.setAngularVelocity(this.body,t),this},setVelocityX:function(t){return this._tempVec2.set(t,this.body.velocity.y),r.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(t){return this._tempVec2.set(this.body.velocity.x,t),r.setVelocity(this.body,this._tempVec2),this},setVelocity:function(t,e){return this._tempVec2.set(t,e),r.setVelocity(this.body,this._tempVec2),this}};t.exports=i},function(t,e,n){var r={};t.exports=r;var i=n(118),o=n(32);r.create=function(t){return o.extend({extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0},!1,t)},r.reset=function(t){t.extended&&(t.narrowDetections=0,t.narrowphaseTests=0,t.narrowReuse=0,t.narrowReuseCount=0,t.midphaseTests=0,t.broadphaseTests=0,t.narrowEff=0,t.midEff=0,t.broadEff=0,t.collisions=0,t.buckets=0,t.pairs=0,t.bodies=0)},r.update=function(t,e){if(t.extended){var n=e.world,r=i.allBodies(n);t.collisions=t.narrowDetections,t.pairs=e.pairs.list.length,t.bodies=r.length,t.midEff=(t.narrowDetections/(t.midphaseTests||1)).toFixed(2),t.narrowEff=(t.narrowDetections/(t.narrowphaseTests||1)).toFixed(2),t.broadEff=(1-t.broadphaseTests/(r.length||1)).toFixed(2),t.narrowReuse=(t.narrowReuseCount/(t.narrowphaseTests||1)).toFixed(2)}}},function(t,e,n){var r=n(123),i=n(271),o=n(86),s=n(41),a=n(1392),u=n(84),c=n(0),h=n(118),l=n(591),f=n(128),d=n(273),p=n(50),v=n(1394),g=n(2),m=n(6),y=n(597),b=n(1525),w=n(1526),x=n(1399),_=n(1527),T=n(127),E=n(250),S=n(598),k=n(595),A=n(24),O=n(1400),C=n(599),P=n(274),I=n(20),R=n(592),M=n(83),N=n(64),L=n(1402),D=new c({initialize:function(t){this.scene=t,this.systems=t.sys,this.config=this.getConfig(),this.world,this.add,this.bodyBounds,this.body=s,this.composite=h,this.detector=d,this.grid=y,this.pair=E,this.pairs=S,this.query=O,this.resolver=C,this.sat=P,this.constraint=f,this.bodies=o,this.composites=l,this.axes=i,this.bounds=u,this.svg=R,this.vector=M,this.vertices=N,this.verts=N,this._tempVec2=M.create(),m(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),m(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),m(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),C._restingThresh=m(this.config,"restingThresh",4),C._restingThreshTangent=m(this.config,"restingThreshTangent",6),C._positionDampen=m(this.config,"positionDampen",.9),C._positionWarming=m(this.config,"positionWarming",.8),C._frictionNormalMultiplier=m(this.config,"frictionNormalMultiplier",5),t.sys.events.once(I.BOOT,this.boot,this),t.sys.events.on(I.START,this.start,this)},boot:function(){this.world=new L(this.scene,this.config),this.add=new v(this.world),this.bodyBounds=new a,this.systems.events.once(I.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new L(this.scene,this.config),this.add=new v(this.world));var t=this.systems.events;t.on(I.UPDATE,this.world.update,this.world),t.on(I.POST_UPDATE,this.world.postUpdate,this.world),t.once(I.SHUTDOWN,this.shutdown,this)},getConfig:function(){var t=this.systems.game.config.physics,e=this.systems.settings.physics;return T(g(e,"matter",{}),g(t,"matter",{}))},enableAttractorPlugin:function(){return k.register(b),k.use(x,b),this},enableWrapPlugin:function(){return k.register(_),k.use(x,_),this},enableCollisionEventsPlugin:function(){return k.register(w),k.use(x,w),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(t,e){this.world.step(t,e)},containsPoint:function(t,e,n){t=this.getMatterBodies(t);var r=M.create(e,n);return O.point(t,r).length>0},intersectPoint:function(t,e,n){n=this.getMatterBodies(n);var r=M.create(t,e),i=[];return O.point(n,r).forEach((function(t){-1===i.indexOf(t)&&i.push(t)})),i},intersectRect:function(t,e,n,r,i,o){void 0===i&&(i=!1),o=this.getMatterBodies(o);var s={min:{x:t,y:e},max:{x:t+n,y:e+r}},a=[];return O.region(o,s,i).forEach((function(t){-1===a.indexOf(t)&&a.push(t)})),a},intersectRay:function(t,e,n,r,i,o){void 0===i&&(i=1),o=this.getMatterBodies(o);for(var s=[],a=O.ray(o,M.create(t,e),M.create(n,r),i),u=0;u<a.length;u++)s.push(a[u].body);return s},intersectBody:function(t,e){e=this.getMatterBodies(e);for(var n=[],r=O.collides(t,e),i=0;i<r.length;i++){var o=r[i];o.bodyA===t?n.push(o.bodyB):n.push(o.bodyA)}return n},overlap:function(t,e,n,r,i){void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=n),Array.isArray(t)||(t=[t]),t=this.getMatterBodies(t),e=this.getMatterBodies(e);for(var o=!1,s=0;s<t.length;s++)for(var a=t[s],u=O.collides(a,e),c=0;c<u.length;c++){var h=u[c],l=h.bodyA.id===a.id?h.bodyB:h.bodyA;if(!r||r.call(i,a,l,h))if(o=!0,n)n.call(i,a,l,h);else if(!r)return!0}return o},setCollisionCategory:function(t,e){return(t=this.getMatterBodies(t)).forEach((function(t){t.collisionFilter.category=e})),this},setCollisionGroup:function(t,e){return(t=this.getMatterBodies(t)).forEach((function(t){t.collisionFilter.group=e})),this},setCollidesWith:function(t,e){t=this.getMatterBodies(t);var n=0;if(Array.isArray(e))for(var r=0;r<e.length;r++)n|=e[r];else n=e;return t.forEach((function(t){t.collisionFilter.mask=n})),this},getMatterBodies:function(t){if(!t)return this.world.getAllBodies();Array.isArray(t)||(t=[t]);for(var e=[],n=0;n<t.length;n++){var r=t[n].hasOwnProperty("body")?t[n].body:t[n];e.push(r)}return e},setVelocity:function(t,e,n){t=this.getMatterBodies(t);var r=this._tempVec2;return r.x=e,r.y=n,t.forEach((function(t){s.setVelocity(t,r)})),this},setVelocityX:function(t,e){t=this.getMatterBodies(t);var n=this._tempVec2;return n.x=e,t.forEach((function(t){n.y=t.velocity.y,s.setVelocity(t,n)})),this},setVelocityY:function(t,e){t=this.getMatterBodies(t);var n=this._tempVec2;return n.y=e,t.forEach((function(t){n.x=t.velocity.x,s.setVelocity(t,n)})),this},setAngularVelocity:function(t,e){return(t=this.getMatterBodies(t)).forEach((function(t){s.setAngularVelocity(t,e)})),this},applyForce:function(t,e){t=this.getMatterBodies(t);var n=this._tempVec2;return t.forEach((function(t){n.x=t.position.x,n.y=t.position.y,s.applyForce(t,n,e)})),this},applyForceFromPosition:function(t,e,n,r){t=this.getMatterBodies(t);var i=this._tempVec2;return t.forEach((function(t){void 0===r&&(r=t.angle),i.x=n*Math.cos(r),i.y=n*Math.sin(r),s.applyForce(t,e,i)})),this},applyForceFromAngle:function(t,e,n){t=this.getMatterBodies(t);var r=this._tempVec2;return t.forEach((function(t){void 0===n&&(n=t.angle),r.x=e*Math.cos(n),r.y=e*Math.sin(n),s.applyForce(t,{x:t.position.x,y:t.position.y},r)})),this},getConstraintLength:function(t){var e=t.pointA.x,n=t.pointA.y,r=t.pointB.x,i=t.pointB.y;return t.bodyA&&(e+=t.bodyA.position.x,n+=t.bodyA.position.y),t.bodyB&&(r+=t.bodyB.position.x,i+=t.bodyB.position.y),p(e,n,r,i)},alignBody:function(t,e,n,i){var o;switch(t=t.hasOwnProperty("body")?t.body:t,i){case r.TOP_LEFT:case r.LEFT_TOP:o=this.bodyBounds.getTopLeft(t,e,n);break;case r.TOP_CENTER:o=this.bodyBounds.getTopCenter(t,e,n);break;case r.TOP_RIGHT:case r.RIGHT_TOP:o=this.bodyBounds.getTopRight(t,e,n);break;case r.LEFT_CENTER:o=this.bodyBounds.getLeftCenter(t,e,n);break;case r.CENTER:o=this.bodyBounds.getCenter(t,e,n);break;case r.RIGHT_CENTER:o=this.bodyBounds.getRightCenter(t,e,n);break;case r.LEFT_BOTTOM:case r.BOTTOM_LEFT:o=this.bodyBounds.getBottomLeft(t,e,n);break;case r.BOTTOM_CENTER:o=this.bodyBounds.getBottomCenter(t,e,n);break;case r.BOTTOM_RIGHT:case r.RIGHT_BOTTOM:o=this.bodyBounds.getBottomRight(t,e,n)}return o&&s.setPosition(t,o),this},shutdown:function(){var t=this.systems.events;this.world&&(t.off(I.UPDATE,this.world.update,this.world),t.off(I.POST_UPDATE,this.world.postUpdate,this.world)),t.off(I.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(I.START,this.start,this),this.scene=null,this.systems=null}});A.register("MatterPhysics",D,"matterPhysics"),t.exports=D},function(t,e,n){var r=n(594),i={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function(t){t.after("Body.create",(function(){i.Body.init(this)})),t.before("Engine.update",(function(t){i.Engine.update(t)}))},Body:{init:function(t){t.plugin.attractors=t.plugin.attractors||[]}},Engine:{update:function(t){for(var e=r.Composite.allBodies(t.world),n=0;n<e.length;n++){var i=e[n],o=i.plugin.attractors;if(o&&o.length>0)for(var s=0;s<e.length;s++){var a=e[s];if(n!==s)for(var u=0;u<o.length;u++){var c=o[u],h=c;r.Common.isFunction(c)&&(h=c(i,a)),h&&r.Body.applyForce(a,a.position,h)}}}}},Attractors:{gravityConstant:.001,gravity:function(t,e){var n=r.Vector.sub(e.position,t.position),o=r.Vector.magnitudeSquared(n)||1e-4,s=r.Vector.normalise(n),a=-i.Attractors.gravityConstant*(t.mass*e.mass/o),u=r.Vector.mult(s,a);r.Body.applyForce(t,t.position,r.Vector.neg(u)),r.Body.applyForce(e,e.position,u)}}};t.exports=i},function(t,e){t.exports={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(t){t.after("Engine.create",(function(){t.Events.on(this,"collisionStart",(function(e){e.pairs.map((function(e){var n=e.bodyA,r=e.bodyB;n.gameObject&&n.gameObject.emit("collide",n,r,e),r.gameObject&&r.gameObject.emit("collide",r,n,e),t.Events.trigger(n,"onCollide",{pair:e}),t.Events.trigger(r,"onCollide",{pair:e}),n.onCollideCallback&&n.onCollideCallback(e),r.onCollideCallback&&r.onCollideCallback(e),n.onCollideWith[r.id]&&n.onCollideWith[r.id](r,e),r.onCollideWith[n.id]&&r.onCollideWith[n.id](n,e)}))})),t.Events.on(this,"collisionActive",(function(e){e.pairs.map((function(e){var n=e.bodyA,r=e.bodyB;n.gameObject&&n.gameObject.emit("collideActive",n,r,e),r.gameObject&&r.gameObject.emit("collideActive",r,n,e),t.Events.trigger(n,"onCollideActive",{pair:e}),t.Events.trigger(r,"onCollideActive",{pair:e}),n.onCollideActiveCallback&&n.onCollideActiveCallback(e),r.onCollideActiveCallback&&r.onCollideActiveCallback(e)}))})),t.Events.on(this,"collisionEnd",(function(e){e.pairs.map((function(e){var n=e.bodyA,r=e.bodyB;n.gameObject&&n.gameObject.emit("collideEnd",n,r,e),r.gameObject&&r.gameObject.emit("collideEnd",r,n,e),t.Events.trigger(n,"onCollideEnd",{pair:e}),t.Events.trigger(r,"onCollideEnd",{pair:e}),n.onCollideEndCallback&&n.onCollideEndCallback(e),r.onCollideEndCallback&&r.onCollideEndCallback(e)}))}))}))}}},function(t,e,n){var r=n(594),i={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(t){t.after("Engine.update",(function(){i.Engine.update(this)}))},Engine:{update:function(t){for(var e=t.world,n=r.Composite.allBodies(e),o=r.Composite.allComposites(e),s=0;s<n.length;s+=1){var a=n[s];a.plugin.wrap&&i.Body.wrap(a,a.plugin.wrap)}for(s=0;s<o.length;s+=1){var u=o[s];u.plugin.wrap&&i.Composite.wrap(u,u.plugin.wrap)}}},Bounds:{wrap:function(t,e){var n=null,r=null;if("undefined"!==typeof e.min.x&&"undefined"!==typeof e.max.x&&(t.min.x>e.max.x?n=e.min.x-t.max.x:t.max.x<e.min.x&&(n=e.max.x-t.min.x)),"undefined"!==typeof e.min.y&&"undefined"!==typeof e.max.y&&(t.min.y>e.max.y?r=e.min.y-t.max.y:t.max.y<e.min.y&&(r=e.max.y-t.min.y)),null!==n||null!==r)return{x:n||0,y:r||0}}},Body:{wrap:function(t,e){var n=i.Bounds.wrap(t.bounds,e);return n&&r.Body.translate(t,n),n}},Composite:{bounds:function(t){for(var e=r.Composite.allBodies(t),n=[],i=0;i<e.length;i+=1){var o=e[i];n.push(o.bounds.min,o.bounds.max)}return r.Bounds.create(n)},wrap:function(t,e){var n=i.Bounds.wrap(i.Composite.bounds(t),e);return n&&r.Composite.translate(t,n),n}}};t.exports=i},function(t,e,n){(function(e){var r=n(33),i=n(17),o={Actions:n(275),Animations:n(723),BlendModes:n(35),Cache:n(735),Cameras:n(738),Core:n(806),Class:n(0),Create:n(888),Curves:n(894),Data:n(896),Display:n(898),DOM:n(917),Events:n(918),Game:n(920),GameObjects:n(1011),Geom:n(483),Input:n(1308),Loader:n(1338),Math:n(193),Physics:n(1493),Plugins:n(1403),Renderer:n(1405),Scale:n(1412),ScaleModes:n(168),Scene:n(418),Scenes:n(1413),Structs:n(1415),Textures:n(1416),Tilemaps:n(1418),Time:n(1461),Tweens:n(1463),Utils:n(1481)};o.Sound=n(1492),o=i(!1,o,r),t.exports=o,e.Phaser=o}).call(this,n(600))}])},t.exports=r()},function(t,e){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,i=t.indexOf("["),o=t.indexOf("]");-1!=i&&-1!=o&&(t=t.substring(0,i)+t.substring(i,o).replace(/:/g,";")+t.substring(o,t.length));for(var s=n.exec(t||""),a={},u=14;u--;)a[r[u]]=s[u]||"";return-1!=i&&-1!=o&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=function(t,e){var n=/\/{2,9}/g,r=e.replace(n,"/").split("/");"/"!=e.substr(0,1)&&0!==e.length||r.splice(0,1);"/"==e.substr(e.length-1,1)&&r.splice(r.length-1,1);return r}(0,a.path),a.queryKey=function(t,e){var n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,r){e&&(n[e]=r)})),n}(0,a.query),a}},function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r={};n.r(r),n.d(r,"encode",(function(){return ot})),n.d(r,"decode",(function(){return ut}));var i={};n.r(i),n.d(i,"AddressZero",(function(){return Si})),n.d(i,"NegativeOne",(function(){return Xt})),n.d(i,"Zero",(function(){return Ht})),n.d(i,"One",(function(){return qt})),n.d(i,"Two",(function(){return Kt})),n.d(i,"WeiPerEther",(function(){return $t})),n.d(i,"MaxUint256",(function(){return Jt})),n.d(i,"MinInt256",(function(){return Qt})),n.d(i,"MaxInt256",(function(){return Zt})),n.d(i,"HashZero",(function(){return ki})),n.d(i,"EtherSymbol",(function(){return Ai}));var o={};n.r(o),n.d(o,"Provider",(function(){return ze})),n.d(o,"BaseProvider",(function(){return Fo})),n.d(o,"Resolver",(function(){return No})),n.d(o,"UrlJsonRpcProvider",(function(){return os})),n.d(o,"FallbackProvider",(function(){return Fs})),n.d(o,"AlchemyProvider",(function(){return cs})),n.d(o,"AlchemyWebSocketProvider",(function(){return us})),n.d(o,"CloudflareProvider",(function(){return fs})),n.d(o,"EtherscanProvider",(function(){return xs})),n.d(o,"InfuraProvider",(function(){return zs})),n.d(o,"InfuraWebSocketProvider",(function(){return Vs})),n.d(o,"JsonRpcProvider",(function(){return Ko})),n.d(o,"JsonRpcBatchProvider",(function(){return Gs})),n.d(o,"NodesmithProvider",(function(){return Ws})),n.d(o,"PocketProvider",(function(){return qs})),n.d(o,"StaticJsonRpcProvider",(function(){return is})),n.d(o,"Web3Provider",(function(){return Qs})),n.d(o,"WebSocketProvider",(function(){return es})),n.d(o,"IpcProvider",(function(){return js})),n.d(o,"JsonRpcSigner",(function(){return Xo})),n.d(o,"getDefaultProvider",(function(){return ta})),n.d(o,"getNetwork",(function(){return Li})),n.d(o,"isCommunityResource",(function(){return go})),n.d(o,"isCommunityResourcable",(function(){return vo})),n.d(o,"showThrottleMessage",(function(){return yo})),n.d(o,"Formatter",(function(){return po}));var s={};n.r(s),n.d(s,"decode",(function(){return Qi})),n.d(s,"encode",(function(){return Zi}));var a={};n.r(a),n.d(a,"AbiCoder",(function(){return Ce})),n.d(a,"defaultAbiCoder",(function(){return Pe})),n.d(a,"Fragment",(function(){return de})),n.d(a,"ConstructorFragment",(function(){return ye})),n.d(a,"ErrorFragment",(function(){return xe})),n.d(a,"EventFragment",(function(){return pe})),n.d(a,"FunctionFragment",(function(){return be})),n.d(a,"ParamType",(function(){return le})),n.d(a,"FormatTypes",(function(){return ce})),n.d(a,"checkResultErrors",(function(){return q})),n.d(a,"Logger",(function(){return _.b})),n.d(a,"RLP",(function(){return r})),n.d(a,"_fetchData",(function(){return so})),n.d(a,"fetchJson",(function(){return ao})),n.d(a,"poll",(function(){return uo})),n.d(a,"checkProperties",(function(){return B})),n.d(a,"deepCopy",(function(){return Y})),n.d(a,"defineReadOnly",(function(){return D})),n.d(a,"getStatic",(function(){return F})),n.d(a,"resolveProperties",(function(){return j})),n.d(a,"shallowCopy",(function(){return U})),n.d(a,"arrayify",(function(){return b.a})),n.d(a,"concat",(function(){return b.b})),n.d(a,"stripZeros",(function(){return b.o})),n.d(a,"zeroPad",(function(){return b.p})),n.d(a,"isBytes",(function(){return b.j})),n.d(a,"isBytesLike",(function(){return b.k})),n.d(a,"defaultPath",(function(){return Ur})),n.d(a,"HDNode",(function(){return Vr})),n.d(a,"SigningKey",(function(){return Ze})),n.d(a,"Interface",(function(){return je})),n.d(a,"LogDescription",(function(){return Re})),n.d(a,"TransactionDescription",(function(){return Me})),n.d(a,"base58",(function(){return gr})),n.d(a,"base64",(function(){return s})),n.d(a,"hexlify",(function(){return b.i})),n.d(a,"isHexString",(function(){return b.l})),n.d(a,"hexConcat",(function(){return b.c})),n.d(a,"hexStripZeros",(function(){return b.f})),n.d(a,"hexValue",(function(){return b.g})),n.d(a,"hexZeroPad",(function(){return b.h})),n.d(a,"hexDataLength",(function(){return b.d})),n.d(a,"hexDataSlice",(function(){return b.e})),n.d(a,"nameprep",(function(){return Xi})),n.d(a,"_toEscapedUtf8String",(function(){return Pt})),n.d(a,"toUtf8Bytes",(function(){return Ot})),n.d(a,"toUtf8CodePoints",(function(){return Mt})),n.d(a,"toUtf8String",(function(){return Rt})),n.d(a,"Utf8ErrorFuncs",(function(){return kt})),n.d(a,"formatBytes32String",(function(){return ca})),n.d(a,"parseBytes32String",(function(){return ha})),n.d(a,"hashMessage",(function(){return $n})),n.d(a,"namehash",(function(){return Ji})),n.d(a,"isValidName",(function(){return $i})),n.d(a,"id",(function(){return Nt})),n.d(a,"_TypedDataEncoder",(function(){return pr})),n.d(a,"getAddress",(function(){return mt})),n.d(a,"getIcapAddress",(function(){return bt})),n.d(a,"getContractAddress",(function(){return wt})),n.d(a,"getCreate2Address",(function(){return xt})),n.d(a,"isAddress",(function(){return yt})),n.d(a,"formatEther",(function(){return ga})),n.d(a,"parseEther",(function(){return ma})),n.d(a,"formatUnits",(function(){return pa})),n.d(a,"parseUnits",(function(){return va})),n.d(a,"commify",(function(){return da})),n.d(a,"computeHmac",(function(){return Tr})),n.d(a,"keccak256",(function(){return tt})),n.d(a,"ripemd160",(function(){return wr})),n.d(a,"sha256",(function(){return xr})),n.d(a,"sha512",(function(){return _r})),n.d(a,"randomBytes",(function(){return Hr.a})),n.d(a,"shuffled",(function(){return _s})),n.d(a,"solidityPack",(function(){return sa})),n.d(a,"solidityKeccak256",(function(){return aa})),n.d(a,"soliditySha256",(function(){return ua})),n.d(a,"splitSignature",(function(){return b.n})),n.d(a,"joinSignature",(function(){return b.m})),n.d(a,"accessListify",(function(){return dn})),n.d(a,"parseTransaction",(function(){return bn})),n.d(a,"serializeTransaction",(function(){return mn})),n.d(a,"TransactionTypes",(function(){return nn})),n.d(a,"getJsonWalletAddress",(function(){return mi})),n.d(a,"computeAddress",(function(){return cn})),n.d(a,"recoverAddress",(function(){return hn})),n.d(a,"computePublicKey",(function(){return en})),n.d(a,"recoverPublicKey",(function(){return tn})),n.d(a,"verifyMessage",(function(){return Ti})),n.d(a,"verifyTypedData",(function(){return Ei})),n.d(a,"getAccountPath",(function(){return Xr})),n.d(a,"mnemonicToEntropy",(function(){return Gr})),n.d(a,"entropyToMnemonic",(function(){return Yr})),n.d(a,"isValidMnemonic",(function(){return Wr})),n.d(a,"mnemonicToSeed",(function(){return zr})),n.d(a,"SupportedAlgorithm",(function(){return dr})),n.d(a,"UnicodeNormalizationForm",(function(){return _t})),n.d(a,"Utf8ErrorReason",(function(){return Tt})),n.d(a,"Indexed",(function(){return Le}));var u={};n.r(u),n.d(u,"Signer",(function(){return He})),n.d(u,"Wallet",(function(){return _i})),n.d(u,"VoidSigner",(function(){return qe})),n.d(u,"getDefaultProvider",(function(){return ta})),n.d(u,"providers",(function(){return o})),n.d(u,"BaseContract",(function(){return Nn})),n.d(u,"Contract",(function(){return Ln})),n.d(u,"ContractFactory",(function(){return Dn})),n.d(u,"BigNumber",(function(){return C})),n.d(u,"FixedNumber",(function(){return Hn})),n.d(u,"constants",(function(){return i})),n.d(u,"errors",(function(){return _.a})),n.d(u,"logger",(function(){return ba})),n.d(u,"utils",(function(){return a})),n.d(u,"wordlists",(function(){return Pr})),n.d(u,"version",(function(){return ya})),n.d(u,"Wordlist",(function(){return kr}));var c=n(24),h=n(11),l=n(18),f=n(16),d=n(9),p=n(10),v=n(7),g=n(8),m=n(3),y=n.n(m),b=n(1),w=n(15),x=n.n(w),_=n(5),T="bignumber/5.5.0",E=x.a.BN,S=new _.b(T),k={},A=9007199254740991;var O=!1,C=function(){function t(e,n){Object(v.a)(this,t),S.checkNew(this instanceof t?this.constructor:void 0,t),e!==k&&S.throwError("cannot call constructor directly; use BigNumber.from",_.b.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=n,this._isBigNumber=!0,Object.freeze(this)}return Object(g.a)(t,[{key:"fromTwos",value:function(t){return I(R(this).fromTwos(t))}},{key:"toTwos",value:function(t){return I(R(this).toTwos(t))}},{key:"abs",value:function(){return"-"===this._hex[0]?t.from(this._hex.substring(1)):this}},{key:"add",value:function(t){return I(R(this).add(R(t)))}},{key:"sub",value:function(t){return I(R(this).sub(R(t)))}},{key:"div",value:function(e){return t.from(e).isZero()&&M("division by zero","div"),I(R(this).div(R(e)))}},{key:"mul",value:function(t){return I(R(this).mul(R(t)))}},{key:"mod",value:function(t){var e=R(t);return e.isNeg()&&M("cannot modulo negative values","mod"),I(R(this).umod(e))}},{key:"pow",value:function(t){var e=R(t);return e.isNeg()&&M("cannot raise to negative values","pow"),I(R(this).pow(e))}},{key:"and",value:function(t){var e=R(t);return(this.isNegative()||e.isNeg())&&M("cannot 'and' negative values","and"),I(R(this).and(e))}},{key:"or",value:function(t){var e=R(t);return(this.isNegative()||e.isNeg())&&M("cannot 'or' negative values","or"),I(R(this).or(e))}},{key:"xor",value:function(t){var e=R(t);return(this.isNegative()||e.isNeg())&&M("cannot 'xor' negative values","xor"),I(R(this).xor(e))}},{key:"mask",value:function(t){return(this.isNegative()||t<0)&&M("cannot mask negative values","mask"),I(R(this).maskn(t))}},{key:"shl",value:function(t){return(this.isNegative()||t<0)&&M("cannot shift negative values","shl"),I(R(this).shln(t))}},{key:"shr",value:function(t){return(this.isNegative()||t<0)&&M("cannot shift negative values","shr"),I(R(this).shrn(t))}},{key:"eq",value:function(t){return R(this).eq(R(t))}},{key:"lt",value:function(t){return R(this).lt(R(t))}},{key:"lte",value:function(t){return R(this).lte(R(t))}},{key:"gt",value:function(t){return R(this).gt(R(t))}},{key:"gte",value:function(t){return R(this).gte(R(t))}},{key:"isNegative",value:function(){return"-"===this._hex[0]}},{key:"isZero",value:function(){return R(this).isZero()}},{key:"toNumber",value:function(){try{return R(this).toNumber()}catch(t){M("overflow","toNumber",this.toString())}return null}},{key:"toBigInt",value:function(){try{return BigInt(this.toString())}catch(t){}return S.throwError("this platform does not support BigInt",_.b.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}},{key:"toString",value:function(){return arguments.length>0&&(10===arguments[0]?O||(O=!0,S.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?S.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",_.b.errors.UNEXPECTED_ARGUMENT,{}):S.throwError("BigNumber.toString does not accept parameters",_.b.errors.UNEXPECTED_ARGUMENT,{})),R(this).toString(10)}},{key:"toHexString",value:function(){return this._hex}},{key:"toJSON",value:function(t){return{type:"BigNumber",hex:this.toHexString()}}}],[{key:"from",value:function(e){if(e instanceof t)return e;if("string"===typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new t(k,P(e)):e.match(/^-?[0-9]+$/)?new t(k,P(new E(e))):S.throwArgumentError("invalid BigNumber string","value",e);if("number"===typeof e)return e%1&&M("underflow","BigNumber.from",e),(e>=A||e<=-A)&&M("overflow","BigNumber.from",e),t.from(String(e));var n=e;if("bigint"===typeof n)return t.from(n.toString());if(Object(b.j)(n))return t.from(Object(b.i)(n));if(n)if(n.toHexString){var r=n.toHexString();if("string"===typeof r)return t.from(r)}else{var i=n._hex;if(null==i&&"BigNumber"===n.type&&(i=n.hex),"string"===typeof i&&(Object(b.l)(i)||"-"===i[0]&&Object(b.l)(i.substring(1))))return t.from(i)}return S.throwArgumentError("invalid BigNumber value","value",e)}},{key:"isBigNumber",value:function(t){return!(!t||!t._isBigNumber)}}]),t}();function P(t){if("string"!==typeof t)return P(t.toString(16));if("-"===t[0])return"-"===(t=t.substring(1))[0]&&S.throwArgumentError("invalid hex","value",t),"0x00"===(t=P(t))?t:"-"+t;if("0x"!==t.substring(0,2)&&(t="0x"+t),"0x"===t)return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&"0x00"===t.substring(0,4);)t="0x"+t.substring(4);return t}function I(t){return C.from(P(t))}function R(t){var e=C.from(t).toHexString();return"-"===e[0]?new E("-"+e.substring(3),16):new E(e.substring(2),16)}function M(t,e,n){var r={fault:t,operation:e};return null!=n&&(r.value=n),S.throwError(t,_.b.errors.NUMERIC_FAULT,r)}var N=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},L=new _.b("properties/5.5.0");function D(t,e,n){Object.defineProperty(t,e,{enumerable:!0,value:n,writable:!1})}function F(t,e){for(var n=0;n<32;n++){if(t[e])return t[e];if(!t.prototype||"object"!==typeof t.prototype)break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function j(t){return N(this,void 0,void 0,y.a.mark((function e(){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object.keys(t).map((function(e){var n=t[e];return Promise.resolve(n).then((function(t){return{key:e,value:t}}))})),e.next=3,Promise.all(n);case 3:return r=e.sent,e.abrupt("return",r.reduce((function(t,e){return t[e.key]=e.value,t}),{}));case 5:case"end":return e.stop()}}),e)})))}function B(t,e){t&&"object"===typeof t||L.throwArgumentError("invalid object","object",t),Object.keys(t).forEach((function(n){e[n]||L.throwArgumentError("invalid object key - "+n,"transaction:"+n,t)}))}function U(t){var e={};for(var n in t)e[n]=t[n];return e}var V={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function z(t){if(void 0===t||null===t||V[typeof t])return!0;if(Array.isArray(t)||"object"===typeof t){if(!Object.isFrozen(t))return!1;for(var e=Object.keys(t),n=0;n<e.length;n++){var r=null;try{r=t[e[n]]}catch(i){continue}if(!z(r))return!1}return!0}return L.throwArgumentError("Cannot deepCopy ".concat(typeof t),"object",t)}function G(t){if(z(t))return t;if(Array.isArray(t))return Object.freeze(t.map((function(t){return Y(t)})));if("object"===typeof t){var e={};for(var n in t){var r=t[n];void 0!==r&&D(e,n,Y(r))}return e}return L.throwArgumentError("Cannot deepCopy ".concat(typeof t),"object",t)}function Y(t){return G(t)}var W=function t(e){for(var n in Object(v.a)(this,t),e)this[n]=Y(e[n])},X="abi/5.5.0",H=new _.b(X);function q(t){var e=[];return function t(n,r){if(Array.isArray(r))for(var i in r){var o=n.slice();o.push(i);try{t(o,r[i])}catch(s){e.push({path:o,error:s})}}}([],t),e}var K=function(){function t(e,n,r,i){Object(v.a)(this,t),this.name=e,this.type=n,this.localName=r,this.dynamic=i}return Object(g.a)(t,[{key:"_throwError",value:function(t,e){H.throwArgumentError(t,this.localName,e)}}]),t}(),$=function(){function t(e){Object(v.a)(this,t),D(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}return Object(g.a)(t,[{key:"data",get:function(){return Object(b.c)(this._data)}},{key:"length",get:function(){return this._dataLength}},{key:"_writeData",value:function(t){return this._data.push(t),this._dataLength+=t.length,t.length}},{key:"appendWriter",value:function(t){return this._writeData(Object(b.b)(t._data))}},{key:"writeBytes",value:function(t){var e=Object(b.a)(t),n=e.length%this.wordSize;return n&&(e=Object(b.b)([e,this._padding.slice(n)])),this._writeData(e)}},{key:"_getValue",value:function(t){var e=Object(b.a)(C.from(t));return e.length>this.wordSize&&H.throwError("value out-of-bounds",_.b.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:e.length}),e.length%this.wordSize&&(e=Object(b.b)([this._padding.slice(e.length%this.wordSize),e])),e}},{key:"writeValue",value:function(t){return this._writeData(this._getValue(t))}},{key:"writeUpdatableValue",value:function(){var t=this,e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,function(n){t._data[e]=t._getValue(n)}}}]),t}(),J=function(){function t(e,n,r,i){Object(v.a)(this,t),D(this,"_data",Object(b.a)(e)),D(this,"wordSize",n||32),D(this,"_coerceFunc",r),D(this,"allowLoose",i),this._offset=0}return Object(g.a)(t,[{key:"data",get:function(){return Object(b.i)(this._data)}},{key:"consumed",get:function(){return this._offset}},{key:"coerce",value:function(e,n){return this._coerceFunc?this._coerceFunc(e,n):t.coerce(e,n)}},{key:"_peekBytes",value:function(t,e,n){var r=Math.ceil(e/this.wordSize)*this.wordSize;return this._offset+r>this._data.length&&(this.allowLoose&&n&&this._offset+e<=this._data.length?r=e:H.throwError("data out-of-bounds",_.b.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+r})),this._data.slice(this._offset,this._offset+r)}},{key:"subReader",value:function(e){return new t(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}},{key:"readBytes",value:function(t,e){var n=this._peekBytes(0,t,!!e);return this._offset+=n.length,n.slice(0,t)}},{key:"readValue",value:function(){return C.from(this.readBytes(this.wordSize))}}],[{key:"coerce",value:function(t,e){var n=t.match("^u?int([0-9]+)$");return n&&parseInt(n[1])<=48&&(e=e.toNumber()),e}}]),t}(),Q=n(104),Z=n.n(Q);function tt(t){return"0x"+Z.a.keccak_256(Object(b.a)(t))}var et=new _.b("rlp/5.5.0");function nt(t){for(var e=[];t;)e.unshift(255&t),t>>=8;return e}function rt(t,e,n){for(var r=0,i=0;i<n;i++)r=256*r+t[e+i];return r}function it(t){if(Array.isArray(t)){var e=[];if(t.forEach((function(t){e=e.concat(it(t))})),e.length<=55)return e.unshift(192+e.length),e;var n=nt(e.length);return n.unshift(247+n.length),n.concat(e)}Object(b.k)(t)||et.throwArgumentError("RLP object must be BytesLike","object",t);var r=Array.prototype.slice.call(Object(b.a)(t));if(1===r.length&&r[0]<=127)return r;if(r.length<=55)return r.unshift(128+r.length),r;var i=nt(r.length);return i.unshift(183+i.length),i.concat(r)}function ot(t){return Object(b.i)(it(t))}function st(t,e,n,r){for(var i=[];n<e+1+r;){var o=at(t,n);i.push(o.result),(n+=o.consumed)>e+1+r&&et.throwError("child data too short",_.b.errors.BUFFER_OVERRUN,{})}return{consumed:1+r,result:i}}function at(t,e){if(0===t.length&&et.throwError("data too short",_.b.errors.BUFFER_OVERRUN,{}),t[e]>=248){var n=t[e]-247;e+1+n>t.length&&et.throwError("data short segment too short",_.b.errors.BUFFER_OVERRUN,{});var r=rt(t,e+1,n);return e+1+n+r>t.length&&et.throwError("data long segment too short",_.b.errors.BUFFER_OVERRUN,{}),st(t,e,e+1+n,n+r)}if(t[e]>=192){var i=t[e]-192;return e+1+i>t.length&&et.throwError("data array too short",_.b.errors.BUFFER_OVERRUN,{}),st(t,e,e+1,i)}if(t[e]>=184){var o=t[e]-183;e+1+o>t.length&&et.throwError("data array too short",_.b.errors.BUFFER_OVERRUN,{});var s=rt(t,e+1,o);return e+1+o+s>t.length&&et.throwError("data array too short",_.b.errors.BUFFER_OVERRUN,{}),{consumed:1+o+s,result:Object(b.i)(t.slice(e+1+o,e+1+o+s))}}if(t[e]>=128){var a=t[e]-128;return e+1+a>t.length&&et.throwError("data too short",_.b.errors.BUFFER_OVERRUN,{}),{consumed:1+a,result:Object(b.i)(t.slice(e+1,e+1+a))}}return{consumed:1,result:Object(b.i)(t[e])}}function ut(t){var e=Object(b.a)(t),n=at(e,0);return n.consumed!==e.length&&et.throwArgumentError("invalid rlp data","data",t),n.result}var ct=new _.b("address/5.5.0");function ht(t){Object(b.l)(t,20)||ct.throwArgumentError("invalid address","address",t);for(var e=(t=t.toLowerCase()).substring(2).split(""),n=new Uint8Array(40),r=0;r<40;r++)n[r]=e[r].charCodeAt(0);for(var i=Object(b.a)(tt(n)),o=0;o<40;o+=2)i[o>>1]>>4>=8&&(e[o]=e[o].toUpperCase()),(15&i[o>>1])>=8&&(e[o+1]=e[o+1].toUpperCase());return"0x"+e.join("")}for(var lt={},ft=0;ft<10;ft++)lt[String(ft)]=String(ft);for(var dt=0;dt<26;dt++)lt[String.fromCharCode(65+dt)]=String(10+dt);var pt,vt=Math.floor((pt=9007199254740991,Math.log10?Math.log10(pt):Math.log(pt)/Math.LN10));function gt(t){for(var e=(t=(t=t.toUpperCase()).substring(4)+t.substring(0,2)+"00").split("").map((function(t){return lt[t]})).join("");e.length>=vt;){var n=e.substring(0,vt);e=parseInt(n,10)%97+e.substring(n.length)}for(var r=String(98-parseInt(e,10)%97);r.length<2;)r="0"+r;return r}function mt(t){var e,n=null;if("string"!==typeof t&&ct.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==t.substring(0,2)&&(t="0x"+t),n=ht(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&n!==t&&ct.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==gt(t)&&ct.throwArgumentError("bad icap checksum","address",t),e=t.substring(4),n=new E(e,36).toString(16);n.length<40;)n="0"+n;n=ht("0x"+n)}else ct.throwArgumentError("invalid address","address",t);return n}function yt(t){try{return mt(t),!0}catch(e){}return!1}function bt(t){for(var e,n=(e=mt(t).substring(2),new E(e,16).toString(36)).toUpperCase();n.length<30;)n="0"+n;return"XE"+gt("XE00"+n)+n}function wt(t){var e=null;try{e=mt(t.from)}catch(r){ct.throwArgumentError("missing from address","transaction",t)}var n=Object(b.o)(Object(b.a)(C.from(t.nonce).toHexString()));return mt(Object(b.e)(tt(ot([e,n])),12))}function xt(t,e,n){return 32!==Object(b.d)(e)&&ct.throwArgumentError("salt must be 32 bytes","salt",e),32!==Object(b.d)(n)&&ct.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",n),mt(Object(b.e)(tt(Object(b.b)(["0xff",mt(t),e,n])),12))}var _t,Tt,Et=new _.b("strings/5.5.0");function St(t,e,n,r,i){if(t===Tt.BAD_PREFIX||t===Tt.UNEXPECTED_CONTINUE){for(var o=0,s=e+1;s<n.length&&n[s]>>6===2;s++)o++;return o}return t===Tt.OVERRUN?n.length-e-1:0}!function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"}(_t||(_t={})),function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"}(Tt||(Tt={}));var kt=Object.freeze({error:function(t,e,n,r,i){return Et.throwArgumentError("invalid codepoint at offset ".concat(e,"; ").concat(t),"bytes",n)},ignore:St,replace:function(t,e,n,r,i){return t===Tt.OVERLONG?(r.push(i),0):(r.push(65533),St(t,e,n))}});function At(t,e){null==e&&(e=kt.error),t=Object(b.a)(t);for(var n=[],r=0;r<t.length;){var i=t[r++];if(i>>7!==0){var o=null,s=null;if(192===(224&i))o=1,s=127;else if(224===(240&i))o=2,s=2047;else{if(240!==(248&i)){r+=e(128===(192&i)?Tt.UNEXPECTED_CONTINUE:Tt.BAD_PREFIX,r-1,t,n);continue}o=3,s=65535}if(r-1+o>=t.length)r+=e(Tt.OVERRUN,r-1,t,n);else{for(var a=i&(1<<8-o-1)-1,u=0;u<o;u++){var c=t[r];if(128!=(192&c)){r+=e(Tt.MISSING_CONTINUE,r,t,n),a=null;break}a=a<<6|63&c,r++}null!==a&&(a>1114111?r+=e(Tt.OUT_OF_RANGE,r-1-o,t,n,a):a>=55296&&a<=57343?r+=e(Tt.UTF16_SURROGATE,r-1-o,t,n,a):a<=s?r+=e(Tt.OVERLONG,r-1-o,t,n,a):n.push(a))}}else n.push(i)}return n}function Ot(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_t.current;e!=_t.current&&(Et.checkNormalize(),t=t.normalize(e));for(var n=[],r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i<128)n.push(i);else if(i<2048)n.push(i>>6|192),n.push(63&i|128);else if(55296==(64512&i)){r++;var o=t.charCodeAt(r);if(r>=t.length||56320!==(64512&o))throw new Error("invalid utf-8 string");var s=65536+((1023&i)<<10)+(1023&o);n.push(s>>18|240),n.push(s>>12&63|128),n.push(s>>6&63|128),n.push(63&s|128)}else n.push(i>>12|224),n.push(i>>6&63|128),n.push(63&i|128)}return Object(b.a)(n)}function Ct(t){var e="0000"+t.toString(16);return"\\u"+e.substring(e.length-4)}function Pt(t,e){return'"'+At(t,e).map((function(t){if(t<256){switch(t){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(t>=32&&t<127)return String.fromCharCode(t)}return t<=65535?Ct(t):Ct(55296+((t-=65536)>>10&1023))+Ct(56320+(1023&t))})).join("")+'"'}function It(t){return t.map((function(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10&1023),56320+(1023&t)))})).join("")}function Rt(t,e){return It(At(t,e))}function Mt(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_t.current;return At(Ot(t,e))}function Nt(t){return tt(Ot(t))}var Lt=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t){return Object(v.a)(this,n),e.call(this,"address","address",t,!1)}return Object(g.a)(n,[{key:"defaultValue",value:function(){return"0x0000000000000000000000000000000000000000"}},{key:"encode",value:function(t,e){try{e=mt(e)}catch(n){this._throwError(n.message,e)}return t.writeValue(e)}},{key:"decode",value:function(t){return mt(Object(b.h)(t.readValue().toHexString(),20))}}]),n}(K),Dt=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this,t.name,t.type,void 0,t.dynamic)).coder=t,r}return Object(g.a)(n,[{key:"defaultValue",value:function(){return this.coder.defaultValue()}},{key:"encode",value:function(t,e){return this.coder.encode(t,e)}},{key:"decode",value:function(t){return this.coder.decode(t)}}]),n}(K),Ft=new _.b(X);function jt(t,e,n){var r=null;if(Array.isArray(n))r=n;else if(n&&"object"===typeof n){var i={};r=e.map((function(t){var e=t.localName;return e||Ft.throwError("cannot encode object for signature with missing names",_.b.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:n}),i[e]&&Ft.throwError("cannot encode object for signature with duplicate names",_.b.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:n}),i[e]=!0,n[e]}))}else Ft.throwArgumentError("invalid tuple value","tuple",n);e.length!==r.length&&Ft.throwArgumentError("types/value length mismatch","tuple",n);var o=new $(t.wordSize),s=new $(t.wordSize),a=[];e.forEach((function(t,e){var n=r[e];if(t.dynamic){var i=s.length;t.encode(s,n);var u=o.writeUpdatableValue();a.push((function(t){u(t+i)}))}else t.encode(o,n)})),a.forEach((function(t){t(o.length)}));var u=t.appendWriter(o);return u+=t.appendWriter(s)}function Bt(t,e){var n=[],r=t.subReader(0);e.forEach((function(e){var i=null;if(e.dynamic){var o=t.readValue(),s=r.subReader(o.toNumber());try{i=e.decode(s)}catch(a){if(a.code===_.b.errors.BUFFER_OVERRUN)throw a;(i=a).baseType=e.name,i.name=e.localName,i.type=e.type}}else try{i=e.decode(t)}catch(a){if(a.code===_.b.errors.BUFFER_OVERRUN)throw a;(i=a).baseType=e.name,i.name=e.localName,i.type=e.type}void 0!=i&&n.push(i)}));var i=e.reduce((function(t,e){var n=e.localName;return n&&(t[n]||(t[n]=0),t[n]++),t}),{});e.forEach((function(t,e){var r=t.localName;if(r&&1===i[r]&&("length"===r&&(r="_length"),null==n[r])){var o=n[e];o instanceof Error?Object.defineProperty(n,r,{enumerable:!0,get:function(){throw o}}):n[r]=o}}));for(var o=function(t){var e=n[t];e instanceof Error&&Object.defineProperty(n,t,{enumerable:!0,get:function(){throw e}})},s=0;s<n.length;s++)o(s);return Object.freeze(n)}var Ut=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t,r,i){var o;Object(v.a)(this,n);var s=t.type+"["+(r>=0?r:"")+"]",a=-1===r||t.dynamic;return(o=e.call(this,"array",s,i,a)).coder=t,o.length=r,o}return Object(g.a)(n,[{key:"defaultValue",value:function(){for(var t=this.coder.defaultValue(),e=[],n=0;n<this.length;n++)e.push(t);return e}},{key:"encode",value:function(t,e){Array.isArray(e)||this._throwError("expected array value",e);var n=this.length;-1===n&&(n=e.length,t.writeValue(e.length)),Ft.checkArgumentCount(e.length,n,"coder array"+(this.localName?" "+this.localName:""));for(var r=[],i=0;i<e.length;i++)r.push(this.coder);return jt(t,r,e)}},{key:"decode",value:function(t){var e=this.length;-1===e&&32*(e=t.readValue().toNumber())>t._data.length&&Ft.throwError("insufficient data length",_.b.errors.BUFFER_OVERRUN,{length:t._data.length,count:e});for(var n=[],r=0;r<e;r++)n.push(new Dt(this.coder));return t.coerce(this.name,Bt(t,n))}}]),n}(K),Vt=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t){return Object(v.a)(this,n),e.call(this,"bool","bool",t,!1)}return Object(g.a)(n,[{key:"defaultValue",value:function(){return!1}},{key:"encode",value:function(t,e){return t.writeValue(e?1:0)}},{key:"decode",value:function(t){return t.coerce(this.type,!t.readValue().isZero())}}]),n}(K),zt=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t,r){return Object(v.a)(this,n),e.call(this,t,t,r,!0)}return Object(g.a)(n,[{key:"defaultValue",value:function(){return"0x"}},{key:"encode",value:function(t,e){e=Object(b.a)(e);var n=t.writeValue(e.length);return n+=t.writeBytes(e)}},{key:"decode",value:function(t){return t.readBytes(t.readValue().toNumber(),!0)}}]),n}(K),Gt=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t){return Object(v.a)(this,n),e.call(this,"bytes",t)}return Object(g.a)(n,[{key:"decode",value:function(t){return t.coerce(this.name,Object(b.i)(Object(l.a)(Object(f.a)(n.prototype),"decode",this).call(this,t)))}}]),n}(zt),Yt=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t,r){var i;Object(v.a)(this,n);var o="bytes"+String(t);return(i=e.call(this,o,o,r,!1)).size=t,i}return Object(g.a)(n,[{key:"defaultValue",value:function(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}},{key:"encode",value:function(t,e){var n=Object(b.a)(e);return n.length!==this.size&&this._throwError("incorrect data length",e),t.writeBytes(n)}},{key:"decode",value:function(t){return t.coerce(this.name,Object(b.i)(t.readBytes(this.size)))}}]),n}(K),Wt=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t){return Object(v.a)(this,n),e.call(this,"null","",t,!1)}return Object(g.a)(n,[{key:"defaultValue",value:function(){return null}},{key:"encode",value:function(t,e){return null!=e&&this._throwError("not null",e),t.writeBytes([])}},{key:"decode",value:function(t){return t.readBytes(0),t.coerce(this.name,null)}}]),n}(K),Xt=C.from(-1),Ht=C.from(0),qt=C.from(1),Kt=C.from(2),$t=C.from("1000000000000000000"),Jt=C.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Qt=C.from("-0x8000000000000000000000000000000000000000000000000000000000000000"),Zt=C.from("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),te=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t,r,i){var o;Object(v.a)(this,n);var s=(r?"int":"uint")+8*t;return(o=e.call(this,s,s,i,!1)).size=t,o.signed=r,o}return Object(g.a)(n,[{key:"defaultValue",value:function(){return 0}},{key:"encode",value:function(t,e){var n=C.from(e),r=Jt.mask(8*t.wordSize);if(this.signed){var i=r.mask(8*this.size-1);(n.gt(i)||n.lt(i.add(qt).mul(Xt)))&&this._throwError("value out-of-bounds",e)}else(n.lt(Ht)||n.gt(r.mask(8*this.size)))&&this._throwError("value out-of-bounds",e);return n=n.toTwos(8*this.size).mask(8*this.size),this.signed&&(n=n.fromTwos(8*this.size).toTwos(8*t.wordSize)),t.writeValue(n)}},{key:"decode",value:function(t){var e=t.readValue().mask(8*this.size);return this.signed&&(e=e.fromTwos(8*this.size)),t.coerce(this.name,e)}}]),n}(K),ee=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t){return Object(v.a)(this,n),e.call(this,"string",t)}return Object(g.a)(n,[{key:"defaultValue",value:function(){return""}},{key:"encode",value:function(t,e){return Object(l.a)(Object(f.a)(n.prototype),"encode",this).call(this,t,Ot(e))}},{key:"decode",value:function(t){return Rt(Object(l.a)(Object(f.a)(n.prototype),"decode",this).call(this,t))}}]),n}(zt),ne=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t,r){var i;Object(v.a)(this,n);var o=!1,s=[];t.forEach((function(t){t.dynamic&&(o=!0),s.push(t.type)}));var a="tuple("+s.join(",")+")";return(i=e.call(this,"tuple",a,r,o)).coders=t,i}return Object(g.a)(n,[{key:"defaultValue",value:function(){var t=[];this.coders.forEach((function(e){t.push(e.defaultValue())}));var e=this.coders.reduce((function(t,e){var n=e.localName;return n&&(t[n]||(t[n]=0),t[n]++),t}),{});return this.coders.forEach((function(n,r){var i=n.localName;i&&1===e[i]&&("length"===i&&(i="_length"),null==t[i]&&(t[i]=t[r]))})),Object.freeze(t)}},{key:"encode",value:function(t,e){return jt(t,this.coders,e)}},{key:"decode",value:function(t){return t.coerce(this.name,Bt(t,this.coders))}}]),n}(K),re=new _.b(X),ie={},oe={calldata:!0,memory:!0,storage:!0},se={calldata:!0,memory:!0};function ae(t,e){if("bytes"===t||"string"===t){if(oe[e])return!0}else if("address"===t){if("payable"===e)return!0}else if((t.indexOf("[")>=0||"tuple"===t)&&se[e])return!0;return(oe[e]||"payable"===e)&&re.throwArgumentError("invalid modifier","name",e),!1}function ue(t,e){for(var n in e)D(t,n,e[n])}var ce=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),he=new RegExp(/^(.*)\[([0-9]*)\]$/),le=function(){function t(e,n){Object(v.a)(this,t),e!==ie&&re.throwError("use fromString",_.b.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),ue(this,n);var r=this.type.match(he);ue(this,r?{arrayLength:parseInt(r[2]||"-1"),arrayChildren:t.fromObject({type:r[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}return Object(g.a)(t,[{key:"format",value:function(t){if(t||(t=ce.sighash),ce[t]||re.throwArgumentError("invalid format type","format",t),t===ce.json){var e={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"===typeof this.indexed&&(e.indexed=this.indexed),this.components&&(e.components=this.components.map((function(e){return JSON.parse(e.format(t))}))),JSON.stringify(e)}var n="";return"array"===this.baseType?(n+=this.arrayChildren.format(t),n+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(t!==ce.sighash&&(n+=this.type),n+="("+this.components.map((function(e){return e.format(t)})).join(t===ce.full?", ":",")+")"):n+=this.type,t!==ce.sighash&&(!0===this.indexed&&(n+=" indexed"),t===ce.full&&this.name&&(n+=" "+this.name)),n}}],[{key:"from",value:function(e,n){return"string"===typeof e?t.fromString(e,n):t.fromObject(e)}},{key:"fromObject",value:function(e){return t.isParamType(e)?e:new t(ie,{name:e.name||null,type:_e(e.type),indexed:null==e.indexed?null:!!e.indexed,components:e.components?e.components.map(t.fromObject):null})}},{key:"fromString",value:function(e,n){return r=function(t,e){var n=t;function r(e){re.throwArgumentError("unexpected character at position ".concat(e),"param",t)}function i(t){var n={type:"",name:"",parent:t,state:{allowType:!0}};return e&&(n.indexed=!1),n}t=t.replace(/\s/g," ");for(var o={type:"",name:"",state:{allowType:!0}},s=o,a=0;a<t.length;a++){var u=t[a];switch(u){case"(":s.state.allowType&&""===s.type?s.type="tuple":s.state.allowParams||r(a),s.state.allowType=!1,s.type=_e(s.type),s.components=[i(s)],s=s.components[0];break;case")":delete s.state,"indexed"===s.name&&(e||r(a),s.indexed=!0,s.name=""),ae(s.type,s.name)&&(s.name=""),s.type=_e(s.type);var c=s;(s=s.parent)||r(a),delete c.parent,s.state.allowParams=!1,s.state.allowName=!0,s.state.allowArray=!0;break;case",":delete s.state,"indexed"===s.name&&(e||r(a),s.indexed=!0,s.name=""),ae(s.type,s.name)&&(s.name=""),s.type=_e(s.type);var h=i(s.parent);s.parent.components.push(h),delete s.parent,s=h;break;case" ":s.state.allowType&&""!==s.type&&(s.type=_e(s.type),delete s.state.allowType,s.state.allowName=!0,s.state.allowParams=!0),s.state.allowName&&""!==s.name&&("indexed"===s.name?(e||r(a),s.indexed&&r(a),s.indexed=!0,s.name=""):ae(s.type,s.name)?s.name="":s.state.allowName=!1);break;case"[":s.state.allowArray||r(a),s.type+=u,s.state.allowArray=!1,s.state.allowName=!1,s.state.readArray=!0;break;case"]":s.state.readArray||r(a),s.type+=u,s.state.readArray=!1,s.state.allowArray=!0,s.state.allowName=!0;break;default:s.state.allowType?(s.type+=u,s.state.allowParams=!0,s.state.allowArray=!0):s.state.allowName?(s.name+=u,delete s.state.allowArray):s.state.readArray?s.type+=u:r(a)}}return s.parent&&re.throwArgumentError("unexpected eof","param",t),delete o.state,"indexed"===s.name?(e||r(n.length-7),s.indexed&&r(n.length-7),s.indexed=!0,s.name=""):ae(s.type,s.name)&&(s.name=""),o.type=_e(o.type),o}(e,!!n),t.fromObject({name:r.name,type:r.type,indexed:r.indexed,components:r.components});var r}},{key:"isParamType",value:function(t){return!(null==t||!t._isParamType)}}]),t}();function fe(t,e){return function(t){t=t.trim();for(var e=[],n="",r=0,i=0;i<t.length;i++){var o=t[i];","===o&&0===r?(e.push(n),n=""):(n+=o,"("===o?r++:")"===o&&-1===--r&&re.throwArgumentError("unbalanced parenthesis","value",t))}n&&e.push(n);return e}(t).map((function(t){return le.fromString(t,e)}))}var de=function(){function t(e,n){Object(v.a)(this,t),e!==ie&&re.throwError("use a static from method",_.b.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),ue(this,n),this._isFragment=!0,Object.freeze(this)}return Object(g.a)(t,null,[{key:"from",value:function(e){return t.isFragment(e)?e:"string"===typeof e?t.fromString(e):t.fromObject(e)}},{key:"fromObject",value:function(e){if(t.isFragment(e))return e;switch(e.type){case"function":return be.fromObject(e);case"event":return pe.fromObject(e);case"constructor":return ye.fromObject(e);case"error":return xe.fromObject(e);case"fallback":case"receive":return null}return re.throwArgumentError("invalid fragment object","value",e)}},{key:"fromString",value:function(t){return"event"===(t=(t=(t=t.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]?pe.fromString(t.substring(5).trim()):"function"===t.split(" ")[0]?be.fromString(t.substring(8).trim()):"constructor"===t.split("(")[0].trim()?ye.fromString(t.trim()):"error"===t.split(" ")[0]?xe.fromString(t.substring(5).trim()):re.throwArgumentError("unsupported fragment","value",t)}},{key:"isFragment",value:function(t){return!(!t||!t._isFragment)}}]),t}(),pe=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(g.a)(n,[{key:"format",value:function(t){if(t||(t=ce.sighash),ce[t]||re.throwArgumentError("invalid format type","format",t),t===ce.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map((function(e){return JSON.parse(e.format(t))}))});var e="";return t!==ce.sighash&&(e+="event "),e+=this.name+"("+this.inputs.map((function(e){return e.format(t)})).join(t===ce.full?", ":",")+") ",t!==ce.sighash&&this.anonymous&&(e+="anonymous "),e.trim()}}],[{key:"from",value:function(t){return"string"===typeof t?n.fromString(t):n.fromObject(t)}},{key:"fromObject",value:function(t){if(n.isEventFragment(t))return t;"event"!==t.type&&re.throwArgumentError("invalid event object","value",t);var e={name:Ee(t.name),anonymous:t.anonymous,inputs:t.inputs?t.inputs.map(le.fromObject):[],type:"event"};return new n(ie,e)}},{key:"fromString",value:function(t){var e=t.match(Se);e||re.throwArgumentError("invalid event string","value",t);var r=!1;return e[3].split(" ").forEach((function(t){switch(t.trim()){case"anonymous":r=!0;break;case"":break;default:re.warn("unknown modifier: "+t)}})),n.fromObject({name:e[1].trim(),anonymous:r,inputs:fe(e[2],!0),type:"event"})}},{key:"isEventFragment",value:function(t){return t&&t._isFragment&&"event"===t.type}}]),n}(de);function ve(t,e){e.gas=null;var n=t.split("@");return 1!==n.length?(n.length>2&&re.throwArgumentError("invalid human-readable ABI signature","value",t),n[1].match(/^[0-9]+$/)||re.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=C.from(n[1]),n[0]):t}function ge(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach((function(t){switch(t.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+t)}}))}function me(t){var e={constant:!1,payable:!0,stateMutability:"payable"};return null!=t.stateMutability?(e.stateMutability=t.stateMutability,e.constant="view"===e.stateMutability||"pure"===e.stateMutability,null!=t.constant&&!!t.constant!==e.constant&&re.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable="payable"===e.stateMutability,null!=t.payable&&!!t.payable!==e.payable&&re.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):null!=t.payable?(e.payable=!!t.payable,null!=t.constant||e.payable||"constructor"===t.type||re.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&re.throwArgumentError("cannot have constant payable function","value",t)):null!=t.constant?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):"constructor"!==t.type&&re.throwArgumentError("unable to determine stateMutability","value",t),e}var ye=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(g.a)(n,[{key:"format",value:function(t){if(t||(t=ce.sighash),ce[t]||re.throwArgumentError("invalid format type","format",t),t===ce.json)return JSON.stringify({type:"constructor",stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((function(e){return JSON.parse(e.format(t))}))});t===ce.sighash&&re.throwError("cannot format a constructor for sighash",_.b.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});var e="constructor("+this.inputs.map((function(e){return e.format(t)})).join(t===ce.full?", ":",")+") ";return this.stateMutability&&"nonpayable"!==this.stateMutability&&(e+=this.stateMutability+" "),e.trim()}}],[{key:"from",value:function(t){return"string"===typeof t?n.fromString(t):n.fromObject(t)}},{key:"fromObject",value:function(t){if(n.isConstructorFragment(t))return t;"constructor"!==t.type&&re.throwArgumentError("invalid constructor object","value",t);var e=me(t);e.constant&&re.throwArgumentError("constructor cannot be constant","value",t);var r={name:null,type:t.type,inputs:t.inputs?t.inputs.map(le.fromObject):[],payable:e.payable,stateMutability:e.stateMutability,gas:t.gas?C.from(t.gas):null};return new n(ie,r)}},{key:"fromString",value:function(t){var e={type:"constructor"},r=(t=ve(t,e)).match(Se);return r&&"constructor"===r[1].trim()||re.throwArgumentError("invalid constructor string","value",t),e.inputs=fe(r[2].trim(),!1),ge(r[3].trim(),e),n.fromObject(e)}},{key:"isConstructorFragment",value:function(t){return t&&t._isFragment&&"constructor"===t.type}}]),n}(de),be=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(g.a)(n,[{key:"format",value:function(t){if(t||(t=ce.sighash),ce[t]||re.throwArgumentError("invalid format type","format",t),t===ce.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map((function(e){return JSON.parse(e.format(t))})),outputs:this.outputs.map((function(e){return JSON.parse(e.format(t))}))});var e="";return t!==ce.sighash&&(e+="function "),e+=this.name+"("+this.inputs.map((function(e){return e.format(t)})).join(t===ce.full?", ":",")+") ",t!==ce.sighash&&(this.stateMutability?"nonpayable"!==this.stateMutability&&(e+=this.stateMutability+" "):this.constant&&(e+="view "),this.outputs&&this.outputs.length&&(e+="returns ("+this.outputs.map((function(e){return e.format(t)})).join(", ")+") "),null!=this.gas&&(e+="@"+this.gas.toString()+" ")),e.trim()}}],[{key:"from",value:function(t){return"string"===typeof t?n.fromString(t):n.fromObject(t)}},{key:"fromObject",value:function(t){if(n.isFunctionFragment(t))return t;"function"!==t.type&&re.throwArgumentError("invalid function object","value",t);var e=me(t),r={type:t.type,name:Ee(t.name),constant:e.constant,inputs:t.inputs?t.inputs.map(le.fromObject):[],outputs:t.outputs?t.outputs.map(le.fromObject):[],payable:e.payable,stateMutability:e.stateMutability,gas:t.gas?C.from(t.gas):null};return new n(ie,r)}},{key:"fromString",value:function(t){var e={type:"function"},r=(t=ve(t,e)).split(" returns ");r.length>2&&re.throwArgumentError("invalid function string","value",t);var i=r[0].match(Se);if(i||re.throwArgumentError("invalid function signature","value",t),e.name=i[1].trim(),e.name&&Ee(e.name),e.inputs=fe(i[2],!1),ge(i[3].trim(),e),r.length>1){var o=r[1].match(Se);""==o[1].trim()&&""==o[3].trim()||re.throwArgumentError("unexpected tokens","value",t),e.outputs=fe(o[2],!1)}else e.outputs=[];return n.fromObject(e)}},{key:"isFunctionFragment",value:function(t){return t&&t._isFragment&&"function"===t.type}}]),n}(ye);function we(t){var e=t.format();return"Error(string)"!==e&&"Panic(uint256)"!==e||re.throwArgumentError("cannot specify user defined ".concat(e," error"),"fragment",t),t}var xe=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(g.a)(n,[{key:"format",value:function(t){if(t||(t=ce.sighash),ce[t]||re.throwArgumentError("invalid format type","format",t),t===ce.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map((function(e){return JSON.parse(e.format(t))}))});var e="";return t!==ce.sighash&&(e+="error "),(e+=this.name+"("+this.inputs.map((function(e){return e.format(t)})).join(t===ce.full?", ":",")+") ").trim()}}],[{key:"from",value:function(t){return"string"===typeof t?n.fromString(t):n.fromObject(t)}},{key:"fromObject",value:function(t){if(n.isErrorFragment(t))return t;"error"!==t.type&&re.throwArgumentError("invalid error object","value",t);var e={type:t.type,name:Ee(t.name),inputs:t.inputs?t.inputs.map(le.fromObject):[]};return we(new n(ie,e))}},{key:"fromString",value:function(t){var e={type:"error"},r=t.match(Se);return r||re.throwArgumentError("invalid error signature","value",t),e.name=r[1].trim(),e.name&&Ee(e.name),e.inputs=fe(r[2],!1),we(n.fromObject(e))}},{key:"isErrorFragment",value:function(t){return t&&t._isFragment&&"error"===t.type}}]),n}(de);function _e(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}var Te=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function Ee(t){return t&&t.match(Te)||re.throwArgumentError('invalid identifier "'.concat(t,'"'),"value",t),t}var Se=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");var ke=new _.b(X),Ae=new RegExp(/^bytes([0-9]*)$/),Oe=new RegExp(/^(u?int)([0-9]*)$/),Ce=function(){function t(e){Object(v.a)(this,t),ke.checkNew(this instanceof t?this.constructor:void 0,t),D(this,"coerceFunc",e||null)}return Object(g.a)(t,[{key:"_getCoder",value:function(t){var e=this;switch(t.baseType){case"address":return new Lt(t.name);case"bool":return new Vt(t.name);case"string":return new ee(t.name);case"bytes":return new Gt(t.name);case"array":return new Ut(this._getCoder(t.arrayChildren),t.arrayLength,t.name);case"tuple":return new ne((t.components||[]).map((function(t){return e._getCoder(t)})),t.name);case"":return new Wt(t.name)}var n=t.type.match(Oe);if(n){var r=parseInt(n[2]||"256");return(0===r||r>256||r%8!==0)&&ke.throwArgumentError("invalid "+n[1]+" bit length","param",t),new te(r/8,"int"===n[1],t.name)}if(n=t.type.match(Ae)){var i=parseInt(n[1]);return(0===i||i>32)&&ke.throwArgumentError("invalid bytes length","param",t),new Yt(i,t.name)}return ke.throwArgumentError("invalid type","type",t.type)}},{key:"_getWordSize",value:function(){return 32}},{key:"_getReader",value:function(t,e){return new J(t,this._getWordSize(),this.coerceFunc,e)}},{key:"_getWriter",value:function(){return new $(this._getWordSize())}},{key:"getDefaultValue",value:function(t){var e=this,n=t.map((function(t){return e._getCoder(le.from(t))}));return new ne(n,"_").defaultValue()}},{key:"encode",value:function(t,e){var n=this;t.length!==e.length&&ke.throwError("types/values length mismatch",_.b.errors.INVALID_ARGUMENT,{count:{types:t.length,values:e.length},value:{types:t,values:e}});var r=t.map((function(t){return n._getCoder(le.from(t))})),i=new ne(r,"_"),o=this._getWriter();return i.encode(o,e),o.data}},{key:"decode",value:function(t,e,n){var r=this,i=t.map((function(t){return r._getCoder(le.from(t))}));return new ne(i,"_").decode(this._getReader(Object(b.a)(e),n))}}]),t}(),Pe=new Ce,Ie=new _.b(X),Re=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return n}(W),Me=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return n}(W),Ne=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return n}(W),Le=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(g.a)(n,null,[{key:"isIndexed",value:function(t){return!(!t||!t._isIndexed)}}]),n}(W),De={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function Fe(t,e){var n=new Error("deferred error during ABI decoding triggered accessing ".concat(t));return n.error=e,n}var je=function(){function t(e){var n=this;Object(v.a)(this,t),Ie.checkNew(this instanceof t?this.constructor:void 0,t);D(this,"fragments",("string"===typeof e?JSON.parse(e):e).map((function(t){return de.from(t)})).filter((function(t){return null!=t}))),D(this,"_abiCoder",F(this instanceof t?this.constructor:void 0,"getAbiCoder")()),D(this,"functions",{}),D(this,"errors",{}),D(this,"events",{}),D(this,"structs",{}),this.fragments.forEach((function(t){var e=null;switch(t.type){case"constructor":return n.deploy?void Ie.warn("duplicate definition - constructor"):void D(n,"deploy",t);case"function":e=n.functions;break;case"event":e=n.events;break;case"error":e=n.errors;break;default:return}var r=t.format();e[r]?Ie.warn("duplicate definition - "+r):e[r]=t})),this.deploy||D(this,"deploy",ye.from({payable:!1,type:"constructor"})),D(this,"_isInterface",!0)}return Object(g.a)(t,[{key:"format",value:function(t){t||(t=ce.full),t===ce.sighash&&Ie.throwArgumentError("interface does not support formatting sighash","format",t);var e=this.fragments.map((function(e){return e.format(t)}));return t===ce.json?JSON.stringify(e.map((function(t){return JSON.parse(t)}))):e}},{key:"getFunction",value:function(t){if(Object(b.l)(t)){for(var e in this.functions)if(t===this.getSighash(e))return this.functions[e];Ie.throwArgumentError("no matching function","sighash",t)}if(-1===t.indexOf("(")){var n=t.trim(),r=Object.keys(this.functions).filter((function(t){return t.split("(")[0]===n}));return 0===r.length?Ie.throwArgumentError("no matching function","name",n):r.length>1&&Ie.throwArgumentError("multiple matching functions","name",n),this.functions[r[0]]}var i=this.functions[be.fromString(t).format()];return i||Ie.throwArgumentError("no matching function","signature",t),i}},{key:"getEvent",value:function(t){if(Object(b.l)(t)){var e=t.toLowerCase();for(var n in this.events)if(e===this.getEventTopic(n))return this.events[n];Ie.throwArgumentError("no matching event","topichash",e)}if(-1===t.indexOf("(")){var r=t.trim(),i=Object.keys(this.events).filter((function(t){return t.split("(")[0]===r}));return 0===i.length?Ie.throwArgumentError("no matching event","name",r):i.length>1&&Ie.throwArgumentError("multiple matching events","name",r),this.events[i[0]]}var o=this.events[pe.fromString(t).format()];return o||Ie.throwArgumentError("no matching event","signature",t),o}},{key:"getError",value:function(t){if(Object(b.l)(t)){var e=F(this.constructor,"getSighash");for(var n in this.errors){if(t===e(this.errors[n]))return this.errors[n]}Ie.throwArgumentError("no matching error","sighash",t)}if(-1===t.indexOf("(")){var r=t.trim(),i=Object.keys(this.errors).filter((function(t){return t.split("(")[0]===r}));return 0===i.length?Ie.throwArgumentError("no matching error","name",r):i.length>1&&Ie.throwArgumentError("multiple matching errors","name",r),this.errors[i[0]]}var o=this.errors[be.fromString(t).format()];return o||Ie.throwArgumentError("no matching error","signature",t),o}},{key:"getSighash",value:function(t){if("string"===typeof t)try{t=this.getFunction(t)}catch(e){try{t=this.getError(t)}catch(n){throw e}}return F(this.constructor,"getSighash")(t)}},{key:"getEventTopic",value:function(t){return"string"===typeof t&&(t=this.getEvent(t)),F(this.constructor,"getEventTopic")(t)}},{key:"_decodeParams",value:function(t,e){return this._abiCoder.decode(t,e)}},{key:"_encodeParams",value:function(t,e){return this._abiCoder.encode(t,e)}},{key:"encodeDeploy",value:function(t){return this._encodeParams(this.deploy.inputs,t||[])}},{key:"decodeErrorResult",value:function(t,e){"string"===typeof t&&(t=this.getError(t));var n=Object(b.a)(e);return Object(b.i)(n.slice(0,4))!==this.getSighash(t)&&Ie.throwArgumentError("data signature does not match error ".concat(t.name,"."),"data",Object(b.i)(n)),this._decodeParams(t.inputs,n.slice(4))}},{key:"encodeErrorResult",value:function(t,e){return"string"===typeof t&&(t=this.getError(t)),Object(b.i)(Object(b.b)([this.getSighash(t),this._encodeParams(t.inputs,e||[])]))}},{key:"decodeFunctionData",value:function(t,e){"string"===typeof t&&(t=this.getFunction(t));var n=Object(b.a)(e);return Object(b.i)(n.slice(0,4))!==this.getSighash(t)&&Ie.throwArgumentError("data signature does not match function ".concat(t.name,"."),"data",Object(b.i)(n)),this._decodeParams(t.inputs,n.slice(4))}},{key:"encodeFunctionData",value:function(t,e){return"string"===typeof t&&(t=this.getFunction(t)),Object(b.i)(Object(b.b)([this.getSighash(t),this._encodeParams(t.inputs,e||[])]))}},{key:"decodeFunctionResult",value:function(t,e){"string"===typeof t&&(t=this.getFunction(t));var n=Object(b.a)(e),r=null,i=null,o=null,s=null;switch(n.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(t.outputs,n)}catch(c){}break;case 4:var a=Object(b.i)(n.slice(0,4)),u=De[a];if(u)i=this._abiCoder.decode(u.inputs,n.slice(4)),o=u.name,s=u.signature,u.reason&&(r=i[0]);else try{var c=this.getError(a);i=this._abiCoder.decode(c.inputs,n.slice(4)),o=c.name,s=c.format()}catch(c){console.log(c)}}return Ie.throwError("call revert exception",_.b.errors.CALL_EXCEPTION,{method:t.format(),errorArgs:i,errorName:o,errorSignature:s,reason:r})}},{key:"encodeFunctionResult",value:function(t,e){return"string"===typeof t&&(t=this.getFunction(t)),Object(b.i)(this._abiCoder.encode(t.outputs,e||[]))}},{key:"encodeFilterTopics",value:function(t,e){var n=this;"string"===typeof t&&(t=this.getEvent(t)),e.length>t.inputs.length&&Ie.throwError("too many arguments for "+t.format(),_.b.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:e});var r=[];t.anonymous||r.push(this.getEventTopic(t));var i=function(t,e){return"string"===t.type?Nt(e):"bytes"===t.type?tt(Object(b.i)(e)):("address"===t.type&&n._abiCoder.encode(["address"],[e]),Object(b.h)(Object(b.i)(e),32))};for(e.forEach((function(e,n){var o=t.inputs[n];o.indexed?null==e?r.push(null):"array"===o.baseType||"tuple"===o.baseType?Ie.throwArgumentError("filtering with tuples or arrays not supported","contract."+o.name,e):Array.isArray(e)?r.push(e.map((function(t){return i(o,t)}))):r.push(i(o,e)):null!=e&&Ie.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+o.name,e)}));r.length&&null===r[r.length-1];)r.pop();return r}},{key:"encodeEventLog",value:function(t,e){var n=this;"string"===typeof t&&(t=this.getEvent(t));var r=[],i=[],o=[];return t.anonymous||r.push(this.getEventTopic(t)),e.length!==t.inputs.length&&Ie.throwArgumentError("event arguments/values mismatch","values",e),t.inputs.forEach((function(t,s){var a=e[s];if(t.indexed)if("string"===t.type)r.push(Nt(a));else if("bytes"===t.type)r.push(tt(a));else{if("tuple"===t.baseType||"array"===t.baseType)throw new Error("not implemented");r.push(n._abiCoder.encode([t.type],[a]))}else i.push(t),o.push(a)})),{data:this._abiCoder.encode(i,o),topics:r}}},{key:"decodeEventLog",value:function(t,e,n){if("string"===typeof t&&(t=this.getEvent(t)),null!=n&&!t.anonymous){var r=this.getEventTopic(t);Object(b.l)(n[0],32)&&n[0].toLowerCase()===r||Ie.throwError("fragment/topic mismatch",_.b.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:r,value:n[0]}),n=n.slice(1)}var i=[],o=[],s=[];t.inputs.forEach((function(t,e){t.indexed?"string"===t.type||"bytes"===t.type||"tuple"===t.baseType||"array"===t.baseType?(i.push(le.fromObject({type:"bytes32",name:t.name})),s.push(!0)):(i.push(t),s.push(!1)):(o.push(t),s.push(!1))}));var a=null!=n?this._abiCoder.decode(i,Object(b.b)(n)):null,u=this._abiCoder.decode(o,e,!0),c=[],h=0,l=0;t.inputs.forEach((function(t,e){if(t.indexed)if(null==a)c[e]=new Le({_isIndexed:!0,hash:null});else if(s[e])c[e]=new Le({_isIndexed:!0,hash:a[l++]});else try{c[e]=a[l++]}catch(r){c[e]=r}else try{c[e]=u[h++]}catch(r){c[e]=r}if(t.name&&null==c[t.name]){var n=c[e];n instanceof Error?Object.defineProperty(c,t.name,{enumerable:!0,get:function(){throw Fe("property ".concat(JSON.stringify(t.name)),n)}}):c[t.name]=n}}));for(var f=function(t){var e=c[t];e instanceof Error&&Object.defineProperty(c,t,{enumerable:!0,get:function(){throw Fe("index ".concat(t),e)}})},d=0;d<c.length;d++)f(d);return Object.freeze(c)}},{key:"parseTransaction",value:function(t){var e=this.getFunction(t.data.substring(0,10).toLowerCase());return e?new Me({args:this._abiCoder.decode(e.inputs,"0x"+t.data.substring(10)),functionFragment:e,name:e.name,signature:e.format(),sighash:this.getSighash(e),value:C.from(t.value||"0")}):null}},{key:"parseLog",value:function(t){var e=this.getEvent(t.topics[0]);return!e||e.anonymous?null:new Re({eventFragment:e,name:e.name,signature:e.format(),topic:this.getEventTopic(e),args:this.decodeEventLog(e,t.data,t.topics)})}},{key:"parseError",value:function(t){var e=Object(b.i)(t),n=this.getError(e.substring(0,10).toLowerCase());return n?new Ne({args:this._abiCoder.decode(n.inputs,"0x"+e.substring(10)),errorFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n)}):null}}],[{key:"getAbiCoder",value:function(){return Pe}},{key:"getAddress",value:function(t){return mt(t)}},{key:"getSighash",value:function(t){return Object(b.e)(Nt(t.format()),0,4)}},{key:"getEventTopic",value:function(t){return Nt(t.format())}},{key:"isInterface",value:function(t){return!(!t||!t._isInterface)}}]),t}(),Be=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},Ue=new _.b("abstract-provider/5.5.1"),Ve=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(g.a)(n,null,[{key:"isForkEvent",value:function(t){return!(!t||!t._isForkEvent)}}]),n}(W),ze=function(){function t(){Object(v.a)(this,t),Ue.checkAbstract(this instanceof t?this.constructor:void 0,t),D(this,"_isProvider",!0)}return Object(g.a)(t,[{key:"getFeeData",value:function(){return Be(this,void 0,void 0,y.a.mark((function t(){var e,n,r,i,o;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch((function(t){return null}))});case 2:return e=t.sent,n=e.block,r=e.gasPrice,i=null,o=null,n&&n.baseFeePerGas&&(o=C.from("2500000000"),i=n.baseFeePerGas.mul(2).add(o)),t.abrupt("return",{maxFeePerGas:i,maxPriorityFeePerGas:o,gasPrice:r});case 8:case"end":return t.stop()}}),t,this)})))}},{key:"addListener",value:function(t,e){return this.on(t,e)}},{key:"removeListener",value:function(t,e){return this.off(t,e)}}],[{key:"isProvider",value:function(t){return!(!t||!t._isProvider)}}]),t}(),Ge=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},Ye=new _.b("abstract-signer/5.5.0"),We=["accessList","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],Xe=[_.b.errors.INSUFFICIENT_FUNDS,_.b.errors.NONCE_EXPIRED,_.b.errors.REPLACEMENT_UNDERPRICED],He=function(){function t(){Object(v.a)(this,t),Ye.checkAbstract(this instanceof t?this.constructor:void 0,t),D(this,"_isSigner",!0)}return Object(g.a)(t,[{key:"getBalance",value:function(t){return Ge(this,void 0,void 0,y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkProvider("getBalance"),e.next=3,this.provider.getBalance(this.getAddress(),t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"getTransactionCount",value:function(t){return Ge(this,void 0,void 0,y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkProvider("getTransactionCount"),e.next=3,this.provider.getTransactionCount(this.getAddress(),t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"estimateGas",value:function(t){return Ge(this,void 0,void 0,y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkProvider("estimateGas"),e.next=3,j(this.checkTransaction(t));case 3:return n=e.sent,e.next=6,this.provider.estimateGas(n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"call",value:function(t,e){return Ge(this,void 0,void 0,y.a.mark((function n(){var r;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this._checkProvider("call"),n.next=3,j(this.checkTransaction(t));case 3:return r=n.sent,n.next=6,this.provider.call(r,e);case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}}),n,this)})))}},{key:"sendTransaction",value:function(t){return Ge(this,void 0,void 0,y.a.mark((function e(){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkProvider("sendTransaction"),e.next=3,this.populateTransaction(t);case 3:return n=e.sent,e.next=6,this.signTransaction(n);case 6:return r=e.sent,e.next=9,this.provider.sendTransaction(r);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})))}},{key:"getChainId",value:function(){return Ge(this,void 0,void 0,y.a.mark((function t(){var e;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("getChainId"),t.next=3,this.provider.getNetwork();case 3:return e=t.sent,t.abrupt("return",e.chainId);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"getGasPrice",value:function(){return Ge(this,void 0,void 0,y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("getGasPrice"),t.next=3,this.provider.getGasPrice();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"getFeeData",value:function(){return Ge(this,void 0,void 0,y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._checkProvider("getFeeData"),t.next=3,this.provider.getFeeData();case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"resolveName",value:function(t){return Ge(this,void 0,void 0,y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._checkProvider("resolveName"),e.next=3,this.provider.resolveName(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"checkTransaction",value:function(t){for(var e in t)-1===We.indexOf(e)&&Ye.throwArgumentError("invalid transaction key: "+e,"transaction",t);var n=U(t);return null==n.from?n.from=this.getAddress():n.from=Promise.all([Promise.resolve(n.from),this.getAddress()]).then((function(e){return e[0].toLowerCase()!==e[1].toLowerCase()&&Ye.throwArgumentError("from address mismatch","transaction",t),e[0]})),n}},{key:"populateTransaction",value:function(t){return Ge(this,void 0,void 0,y.a.mark((function e(){var n,r,i,o,s=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(this.checkTransaction(t));case 2:if(null!=(n=e.sent).to&&(n.to=Promise.resolve(n.to).then((function(t){return Ge(s,void 0,void 0,y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,this.resolveName(t);case 4:return null==(n=e.sent)&&Ye.throwArgumentError("provided ENS name resolves to null","tx.to",t),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})))})),n.to.catch((function(t){}))),r=null!=n.maxFeePerGas||null!=n.maxPriorityFeePerGas,null==n.gasPrice||2!==n.type&&!r?0!==n.type&&1!==n.type||!r||Ye.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",t):Ye.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",t),2!==n.type&&null!=n.type||null==n.maxFeePerGas||null==n.maxPriorityFeePerGas){e.next=10;break}n.type=2,e.next=18;break;case 10:if(0!==n.type&&1!==n.type){e.next=14;break}null==n.gasPrice&&(n.gasPrice=this.getGasPrice()),e.next=18;break;case 14:return e.next=16,this.getFeeData();case 16:i=e.sent,null==n.type?null!=i.maxFeePerGas&&null!=i.maxPriorityFeePerGas?(n.type=2,null!=n.gasPrice?(o=n.gasPrice,delete n.gasPrice,n.maxFeePerGas=o,n.maxPriorityFeePerGas=o):(null==n.maxFeePerGas&&(n.maxFeePerGas=i.maxFeePerGas),null==n.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=i.maxPriorityFeePerGas))):null!=i.gasPrice?(r&&Ye.throwError("network does not support EIP-1559",_.b.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==n.gasPrice&&(n.gasPrice=i.gasPrice),n.type=0):Ye.throwError("failed to get consistent fee data",_.b.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"}):2===n.type&&(null==n.maxFeePerGas&&(n.maxFeePerGas=i.maxFeePerGas),null==n.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=i.maxPriorityFeePerGas));case 18:return null==n.nonce&&(n.nonce=this.getTransactionCount("pending")),null==n.gasLimit&&(n.gasLimit=this.estimateGas(n).catch((function(t){if(Xe.indexOf(t.code)>=0)throw t;return Ye.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",_.b.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,tx:n})}))),null==n.chainId?n.chainId=this.getChainId():n.chainId=Promise.all([Promise.resolve(n.chainId),this.getChainId()]).then((function(e){return 0!==e[1]&&e[0]!==e[1]&&Ye.throwArgumentError("chainId address mismatch","transaction",t),e[0]})),e.next=23,j(n);case 23:return e.abrupt("return",e.sent);case 24:case"end":return e.stop()}}),e,this)})))}},{key:"_checkProvider",value:function(t){this.provider||Ye.throwError("missing provider",_.b.errors.UNSUPPORTED_OPERATION,{operation:t||"_checkProvider"})}}],[{key:"isSigner",value:function(t){return!(!t||!t._isSigner)}}]),t}(),qe=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t,r){var i;return Object(v.a)(this,n),Ye.checkNew(this instanceof n?this.constructor:void 0,n),i=e.call(this),D(Object(h.a)(i),"address",t),D(Object(h.a)(i),"provider",r||null),i}return Object(g.a)(n,[{key:"getAddress",value:function(){return Promise.resolve(this.address)}},{key:"_fail",value:function(t,e){return Promise.resolve().then((function(){Ye.throwError(t,_.b.errors.UNSUPPORTED_OPERATION,{operation:e})}))}},{key:"signMessage",value:function(t){return this._fail("VoidSigner cannot sign messages","signMessage")}},{key:"signTransaction",value:function(t){return this._fail("VoidSigner cannot sign transactions","signTransaction")}},{key:"_signTypedData",value:function(t,e,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}},{key:"connect",value:function(t){return new n(this.address,t)}}]),n}(He),Ke=n(103),$e=new _.b("signing-key/5.5.0"),Je=null;function Qe(){return Je||(Je=new Ke.a("secp256k1")),Je}var Ze=function(){function t(e){Object(v.a)(this,t),D(this,"curve","secp256k1"),D(this,"privateKey",Object(b.i)(e));var n=Qe().keyFromPrivate(Object(b.a)(this.privateKey));D(this,"publicKey","0x"+n.getPublic(!1,"hex")),D(this,"compressedPublicKey","0x"+n.getPublic(!0,"hex")),D(this,"_isSigningKey",!0)}return Object(g.a)(t,[{key:"_addPoint",value:function(t){var e=Qe().keyFromPublic(Object(b.a)(this.publicKey)),n=Qe().keyFromPublic(Object(b.a)(t));return"0x"+e.pub.add(n.pub).encodeCompressed("hex")}},{key:"signDigest",value:function(t){var e=Qe().keyFromPrivate(Object(b.a)(this.privateKey)),n=Object(b.a)(t);32!==n.length&&$e.throwArgumentError("bad digest length","digest",t);var r=e.sign(n,{canonical:!0});return Object(b.n)({recoveryParam:r.recoveryParam,r:Object(b.h)("0x"+r.r.toString(16),32),s:Object(b.h)("0x"+r.s.toString(16),32)})}},{key:"computeSharedSecret",value:function(t){var e=Qe().keyFromPrivate(Object(b.a)(this.privateKey)),n=Qe().keyFromPublic(Object(b.a)(en(t)));return Object(b.h)("0x"+e.derive(n.getPublic()).toString(16),32)}}],[{key:"isSigningKey",value:function(t){return!(!t||!t._isSigningKey)}}]),t}();function tn(t,e){var n=Object(b.n)(e),r={r:Object(b.a)(n.r),s:Object(b.a)(n.s)};return"0x"+Qe().recoverPubKey(Object(b.a)(t),r,n.recoveryParam).encode("hex",!1)}function en(t,e){var n=Object(b.a)(t);if(32===n.length){var r=new Ze(n);return e?"0x"+Qe().keyFromPrivate(n).getPublic(!0,"hex"):r.publicKey}return 33===n.length?e?Object(b.i)(n):"0x"+Qe().keyFromPublic(n).getPublic(!1,"hex"):65===n.length?e?"0x"+Qe().keyFromPublic(n).getPublic(!0,"hex"):Object(b.i)(n):$e.throwArgumentError("invalid public or private key","key","[REDACTED]")}var nn,rn=new _.b("transactions/5.5.0");function on(t){return"0x"===t?null:mt(t)}function sn(t){return"0x"===t?Ht:C.from(t)}!function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"}(nn||(nn={}));var an=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],un={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function cn(t){var e=en(t);return mt(Object(b.e)(tt(Object(b.e)(e,1)),12))}function hn(t,e){return cn(tn(Object(b.a)(t),e))}function ln(t,e){var n=Object(b.o)(C.from(t).toHexString());return n.length>32&&rn.throwArgumentError("invalid length for "+e,"transaction:"+e,t),n}function fn(t,e){return{address:mt(t),storageKeys:(e||[]).map((function(e,n){return 32!==Object(b.d)(e)&&rn.throwArgumentError("invalid access list storageKey","accessList[".concat(t,":").concat(n,"]"),e),e.toLowerCase()}))}}function dn(t){if(Array.isArray(t))return t.map((function(t,e){return Array.isArray(t)?(t.length>2&&rn.throwArgumentError("access list expected to be [ address, storageKeys[] ]","value[".concat(e,"]"),t),fn(t[0],t[1])):fn(t.address,t.storageKeys)}));var e=Object.keys(t).map((function(e){var n=t[e].reduce((function(t,e){return t[e]=!0,t}),{});return fn(e,Object.keys(n).sort())}));return e.sort((function(t,e){return t.address.localeCompare(e.address)})),e}function pn(t){return dn(t).map((function(t){return[t.address,t.storageKeys]}))}function vn(t,e){if(null!=t.gasPrice){var n=C.from(t.gasPrice),r=C.from(t.maxFeePerGas||0);n.eq(r)||rn.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:r})}var i=[ln(t.chainId||0,"chainId"),ln(t.nonce||0,"nonce"),ln(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),ln(t.maxFeePerGas||0,"maxFeePerGas"),ln(t.gasLimit||0,"gasLimit"),null!=t.to?mt(t.to):"0x",ln(t.value||0,"value"),t.data||"0x",pn(t.accessList||[])];if(e){var o=Object(b.n)(e);i.push(ln(o.recoveryParam,"recoveryParam")),i.push(Object(b.o)(o.r)),i.push(Object(b.o)(o.s))}return Object(b.c)(["0x02",ot(i)])}function gn(t,e){var n=[ln(t.chainId||0,"chainId"),ln(t.nonce||0,"nonce"),ln(t.gasPrice||0,"gasPrice"),ln(t.gasLimit||0,"gasLimit"),null!=t.to?mt(t.to):"0x",ln(t.value||0,"value"),t.data||"0x",pn(t.accessList||[])];if(e){var r=Object(b.n)(e);n.push(ln(r.recoveryParam,"recoveryParam")),n.push(Object(b.o)(r.r)),n.push(Object(b.o)(r.s))}return Object(b.c)(["0x01",ot(n)])}function mn(t,e){if(null==t.type||0===t.type)return null!=t.accessList&&rn.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",t),function(t,e){B(t,un);var n=[];an.forEach((function(e){var r=t[e.name]||[],i={};e.numeric&&(i.hexPad="left"),r=Object(b.a)(Object(b.i)(r,i)),e.length&&r.length!==e.length&&r.length>0&&rn.throwArgumentError("invalid length for "+e.name,"transaction:"+e.name,r),e.maxLength&&(r=Object(b.o)(r)).length>e.maxLength&&rn.throwArgumentError("invalid length for "+e.name,"transaction:"+e.name,r),n.push(Object(b.i)(r))}));var r=0;if(null!=t.chainId?"number"!==typeof(r=t.chainId)&&rn.throwArgumentError("invalid transaction.chainId","transaction",t):e&&!Object(b.k)(e)&&e.v>28&&(r=Math.floor((e.v-35)/2)),0!==r&&(n.push(Object(b.i)(r)),n.push("0x"),n.push("0x")),!e)return ot(n);var i=Object(b.n)(e),o=27+i.recoveryParam;return 0!==r?(n.pop(),n.pop(),n.pop(),o+=2*r+8,i.v>28&&i.v!==o&&rn.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)):i.v!==o&&rn.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e),n.push(Object(b.i)(o)),n.push(Object(b.o)(Object(b.a)(i.r))),n.push(Object(b.o)(Object(b.a)(i.s))),ot(n)}(t,e);switch(t.type){case 1:return gn(t,e);case 2:return vn(t,e)}return rn.throwError("unsupported transaction type: ".concat(t.type),_.b.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:t.type})}function yn(t,e,n){try{var r=sn(e[0]).toNumber();if(0!==r&&1!==r)throw new Error("bad recid");t.v=r}catch(o){rn.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=Object(b.h)(e[1],32),t.s=Object(b.h)(e[2],32);try{var i=tt(n(t));t.from=hn(i,{r:t.r,s:t.s,recoveryParam:t.v})}catch(o){console.log(o)}}function bn(t){var e=Object(b.a)(t);if(e[0]>127)return function(t){var e=ut(t);9!==e.length&&6!==e.length&&rn.throwArgumentError("invalid raw transaction","rawTransaction",t);var n={nonce:sn(e[0]).toNumber(),gasPrice:sn(e[1]),gasLimit:sn(e[2]),to:on(e[3]),value:sn(e[4]),data:e[5],chainId:0};if(6===e.length)return n;try{n.v=C.from(e[6]).toNumber()}catch(s){return console.log(s),n}if(n.r=Object(b.h)(e[7],32),n.s=Object(b.h)(e[8],32),C.from(n.r).isZero()&&C.from(n.s).isZero())n.chainId=n.v,n.v=0;else{n.chainId=Math.floor((n.v-35)/2),n.chainId<0&&(n.chainId=0);var r=n.v-27,i=e.slice(0,6);0!==n.chainId&&(i.push(Object(b.i)(n.chainId)),i.push("0x"),i.push("0x"),r-=2*n.chainId+8);var o=tt(ot(i));try{n.from=hn(o,{r:Object(b.i)(n.r),s:Object(b.i)(n.s),recoveryParam:r})}catch(s){console.log(s)}n.hash=tt(t)}return n.type=null,n}(e);switch(e[0]){case 1:return function(t){var e=ut(t.slice(1));8!==e.length&&11!==e.length&&rn.throwArgumentError("invalid component count for transaction type: 1","payload",Object(b.i)(t));var n={type:1,chainId:sn(e[0]).toNumber(),nonce:sn(e[1]).toNumber(),gasPrice:sn(e[2]),gasLimit:sn(e[3]),to:on(e[4]),value:sn(e[5]),data:e[6],accessList:dn(e[7])};return 8===e.length||(n.hash=tt(t),yn(n,e.slice(8),gn)),n}(e);case 2:return function(t){var e=ut(t.slice(1));9!==e.length&&12!==e.length&&rn.throwArgumentError("invalid component count for transaction type: 2","payload",Object(b.i)(t));var n=sn(e[2]),r=sn(e[3]),i={type:2,chainId:sn(e[0]).toNumber(),nonce:sn(e[1]).toNumber(),maxPriorityFeePerGas:n,maxFeePerGas:r,gasPrice:null,gasLimit:sn(e[4]),to:on(e[5]),value:sn(e[6]),data:e[7],accessList:dn(e[8])};return 9===e.length||(i.hash=tt(t),yn(i,e.slice(9),vn)),i}(e)}return rn.throwError("unsupported transaction type: ".concat(e[0]),_.b.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}var wn=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},xn=new _.b("contracts/5.5.0"),_n={chainId:!0,data:!0,from:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0,customData:!0};function Tn(t,e){return wn(this,void 0,void 0,y.a.mark((function n(){var r,i;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e;case 2:return"string"!==typeof(r=n.sent)&&xn.throwArgumentError("invalid address or ENS name","name",r),n.prev=4,n.abrupt("return",mt(r));case 8:n.prev=8,n.t0=n.catch(4);case 10:return t||xn.throwError("a provider or signer is needed to resolve ENS names",_.b.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"}),n.next=13,t.resolveName(r);case 13:return null==(i=n.sent)&&xn.throwArgumentError("resolver or addr is not configured for ENS name","name",r),n.abrupt("return",i);case 16:case"end":return n.stop()}}),n,null,[[4,8]])})))}function En(t,e,n){return wn(this,void 0,void 0,y.a.mark((function r(){return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!Array.isArray(n)){r.next=4;break}return r.next=3,Promise.all(n.map((function(n,r){return En(t,Array.isArray(e)?e[r]:e[n.name],n)})));case 3:case 7:case 11:case 17:return r.abrupt("return",r.sent);case 4:if("address"!==n.type){r.next=8;break}return r.next=7,Tn(t,e);case 8:if("tuple"!==n.type){r.next=12;break}return r.next=11,En(t,e,n.components);case 12:if("array"!==n.baseType){r.next=18;break}if(Array.isArray(e)){r.next=15;break}return r.abrupt("return",Promise.reject(xn.makeError("invalid value for array",_.b.errors.INVALID_ARGUMENT,{argument:"value",value:e})));case 15:return r.next=17,Promise.all(e.map((function(e){return En(t,e,n.arrayChildren)})));case 18:return r.abrupt("return",e);case 19:case"end":return r.stop()}}),r)})))}function Sn(t,e,n){return wn(this,void 0,void 0,y.a.mark((function r(){var i,o,s,a,u,c,h,l,f,d,p=this;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i={},n.length===e.inputs.length+1&&"object"===typeof n[n.length-1]&&(i=U(n.pop())),xn.checkArgumentCount(n.length,e.inputs.length,"passed to contract"),t.signer?i.from?i.from=j({override:Tn(t.signer,i.from),signer:t.signer.getAddress()}).then((function(t){return wn(p,void 0,void 0,y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return mt(t.signer)!==t.override&&xn.throwError("Contract with a Signer cannot override from",_.b.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),e.abrupt("return",t.override);case 2:case"end":return e.stop()}}),e)})))})):i.from=t.signer.getAddress():i.from&&(i.from=Tn(t.provider,i.from)),r.next=6,j({args:En(t.signer||t.provider,n,e.inputs),address:t.resolvedAddress,overrides:j(i)||{}});case 6:if(o=r.sent,s=t.interface.encodeFunctionData(e,o.args),a={data:s,to:o.address},null!=(u=o.overrides).nonce&&(a.nonce=C.from(u.nonce).toNumber()),null!=u.gasLimit&&(a.gasLimit=C.from(u.gasLimit)),null!=u.gasPrice&&(a.gasPrice=C.from(u.gasPrice)),null!=u.maxFeePerGas&&(a.maxFeePerGas=C.from(u.maxFeePerGas)),null!=u.maxPriorityFeePerGas&&(a.maxPriorityFeePerGas=C.from(u.maxPriorityFeePerGas)),null!=u.from&&(a.from=u.from),null!=u.type&&(a.type=u.type),null!=u.accessList&&(a.accessList=dn(u.accessList)),null==a.gasLimit&&null!=e.gas){for(c=21e3,h=Object(b.a)(s),l=0;l<h.length;l++)c+=4,h[l]&&(c+=64);a.gasLimit=C.from(e.gas).add(c)}return u.value&&((f=C.from(u.value)).isZero()||e.payable||xn.throwError("non-payable method cannot override value",_.b.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:i.value}),a.value=f),u.customData&&(a.customData=U(u.customData)),delete i.nonce,delete i.gasLimit,delete i.gasPrice,delete i.from,delete i.value,delete i.type,delete i.accessList,delete i.maxFeePerGas,delete i.maxPriorityFeePerGas,delete i.customData,(d=Object.keys(i).filter((function(t){return null!=i[t]}))).length&&xn.throwError("cannot override ".concat(d.map((function(t){return JSON.stringify(t)})).join(",")),_.b.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:d}),r.abrupt("return",a);case 34:case"end":return r.stop()}}),r)})))}function kn(t,e){var n=e.wait.bind(e);e.wait=function(e){return n(e).then((function(e){return e.events=e.logs.map((function(n){var r=Y(n),i=null;try{i=t.interface.parseLog(n)}catch(o){}return i&&(r.args=i.args,r.decode=function(e,n){return t.interface.decodeEventLog(i.eventFragment,e,n)},r.event=i.name,r.eventSignature=i.signature),r.removeListener=function(){return t.provider},r.getBlock=function(){return t.provider.getBlock(e.blockHash)},r.getTransaction=function(){return t.provider.getTransaction(e.transactionHash)},r.getTransactionReceipt=function(){return Promise.resolve(e)},r})),e}))}}function An(t,e,n){var r=t.signer||t.provider;return function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return wn(this,void 0,void 0,y.a.mark((function i(){var s,a,u,c,h;return y.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(s=void 0,o.length!==e.inputs.length+1||"object"!==typeof o[o.length-1]){i.next=9;break}if(null==(a=U(o.pop())).blockTag){i.next=7;break}return i.next=6,a.blockTag;case 6:s=i.sent;case 7:delete a.blockTag,o.push(a);case 9:if(null==t.deployTransaction){i.next=12;break}return i.next=12,t._deployed(s);case 12:return i.next=14,Sn(t,e,o);case 14:return u=i.sent,i.next=17,r.call(u,s);case 17:return c=i.sent,i.prev=18,h=t.interface.decodeFunctionResult(e,c),n&&1===e.outputs.length&&(h=h[0]),i.abrupt("return",h);case 24:throw i.prev=24,i.t0=i.catch(18),i.t0.code===_.b.errors.CALL_EXCEPTION&&(i.t0.address=t.address,i.t0.args=o,i.t0.transaction=u),i.t0;case 28:case"end":return i.stop()}}),i,null,[[18,24]])})))}}function On(t,e,n){return e.constant?An(t,e,n):function(t,e){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return wn(this,void 0,void 0,y.a.mark((function n(){var i,o;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.signer||xn.throwError("sending a transaction requires a signer",_.b.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),null==t.deployTransaction){n.next=4;break}return n.next=4,t._deployed();case 4:return n.next=6,Sn(t,e,r);case 6:return i=n.sent,n.next=9,t.signer.sendTransaction(i);case 9:return o=n.sent,kn(t,o),n.abrupt("return",o);case 12:case"end":return n.stop()}}),n)})))}}(t,e)}function Cn(t){return!t.address||null!=t.topics&&0!==t.topics.length?(t.address||"*")+"@"+(t.topics?t.topics.map((function(t){return Array.isArray(t)?t.join("|"):t})).join(":"):""):"*"}var Pn=function(){function t(e,n){Object(v.a)(this,t),D(this,"tag",e),D(this,"filter",n),this._listeners=[]}return Object(g.a)(t,[{key:"addListener",value:function(t,e){this._listeners.push({listener:t,once:e})}},{key:"removeListener",value:function(t){var e=!1;this._listeners=this._listeners.filter((function(n){return!(!e&&n.listener===t)||(e=!0,!1)}))}},{key:"removeAllListeners",value:function(){this._listeners=[]}},{key:"listeners",value:function(){return this._listeners.map((function(t){return t.listener}))}},{key:"listenerCount",value:function(){return this._listeners.length}},{key:"run",value:function(t){var e=this,n=this.listenerCount();return this._listeners=this._listeners.filter((function(n){var r=t.slice();return setTimeout((function(){n.listener.apply(e,r)}),0),!n.once})),n}},{key:"prepareEvent",value:function(t){}},{key:"getEmit",value:function(t){return[t]}}]),t}(),In=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.call(this,"error",null)}return n}(Pn),Rn=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t,r,i,o){var s;Object(v.a)(this,n);var a={address:t},u=r.getEventTopic(i);return o?(u!==o[0]&&xn.throwArgumentError("topic mismatch","topics",o),a.topics=o.slice()):a.topics=[u],s=e.call(this,Cn(a),a),D(Object(h.a)(s),"address",t),D(Object(h.a)(s),"interface",r),D(Object(h.a)(s),"fragment",i),s}return Object(g.a)(n,[{key:"prepareEvent",value:function(t){var e=this;Object(l.a)(Object(f.a)(n.prototype),"prepareEvent",this).call(this,t),t.event=this.fragment.name,t.eventSignature=this.fragment.format(),t.decode=function(t,n){return e.interface.decodeEventLog(e.fragment,t,n)};try{t.args=this.interface.decodeEventLog(this.fragment,t.data,t.topics)}catch(r){t.args=null,t.decodeError=r}}},{key:"getEmit",value:function(t){var e=q(t.args);if(e.length)throw e[0].error;var n=(t.args||[]).slice();return n.push(t),n}}]),n}(Pn),Mn=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t,r){var i;return Object(v.a)(this,n),i=e.call(this,"*",{address:t}),D(Object(h.a)(i),"address",t),D(Object(h.a)(i),"interface",r),i}return Object(g.a)(n,[{key:"prepareEvent",value:function(t){var e=this;Object(l.a)(Object(f.a)(n.prototype),"prepareEvent",this).call(this,t);try{var r=this.interface.parseLog(t);t.event=r.name,t.eventSignature=r.signature,t.decode=function(t,n){return e.interface.decodeEventLog(r.eventFragment,t,n)},t.args=r.args}catch(i){}}}]),n}(Pn),Nn=function(){function t(e,n,r){var i=this;Object(v.a)(this,t),xn.checkNew(this instanceof t?this.constructor:void 0,Ln),D(this,"interface",F(this instanceof t?this.constructor:void 0,"getInterface")(n)),null==r?(D(this,"provider",null),D(this,"signer",null)):He.isSigner(r)?(D(this,"provider",r.provider||null),D(this,"signer",r)):ze.isProvider(r)?(D(this,"provider",r),D(this,"signer",null)):xn.throwArgumentError("invalid signer or provider","signerOrProvider",r),D(this,"callStatic",{}),D(this,"estimateGas",{}),D(this,"functions",{}),D(this,"populateTransaction",{}),D(this,"filters",{});var o={};if(Object.keys(this.interface.events).forEach((function(t){var e=i.interface.events[t];D(i.filters,t,(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return{address:i.address,topics:i.interface.encodeFilterTopics(e,n)}})),o[e.name]||(o[e.name]=[]),o[e.name].push(t)})),Object.keys(o).forEach((function(t){var e=o[t];1===e.length?D(i.filters,t,i.filters[e[0]]):xn.warn("Duplicate definition of ".concat(t," (").concat(e.join(", "),")"))})),D(this,"_runningEvents",{}),D(this,"_wrappedEmits",{}),null==e&&xn.throwArgumentError("invalid contract address or ENS name","addressOrName",e),D(this,"address",e),this.provider)D(this,"resolvedAddress",Tn(this.provider,e));else try{D(this,"resolvedAddress",Promise.resolve(mt(e)))}catch(u){xn.throwError("provider is required to use ENS name as contract address",_.b.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}var s={},a={};Object.keys(this.interface.functions).forEach((function(t){var e=i.interface.functions[t];if(a[t])xn.warn("Duplicate ABI entry for ".concat(JSON.stringify(t)));else{a[t]=!0;var n=e.name;s["%".concat(n)]||(s["%".concat(n)]=[]),s["%".concat(n)].push(t),null==i[t]&&D(i,t,On(i,e,!0)),null==i.functions[t]&&D(i.functions,t,On(i,e,!1)),null==i.callStatic[t]&&D(i.callStatic,t,An(i,e,!0)),null==i.populateTransaction[t]&&D(i.populateTransaction,t,function(t,e){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return Sn(t,e,r)}}(i,e)),null==i.estimateGas[t]&&D(i.estimateGas,t,function(t,e){var n=t.signer||t.provider;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return wn(this,void 0,void 0,y.a.mark((function r(){var o;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n||xn.throwError("estimate require a provider or signer",_.b.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"}),r.next=3,Sn(t,e,i);case 3:return o=r.sent,r.next=6,n.estimateGas(o);case 6:return r.abrupt("return",r.sent);case 7:case"end":return r.stop()}}),r)})))}}(i,e))}})),Object.keys(s).forEach((function(t){var e=s[t];if(!(e.length>1)){t=t.substring(1);var n=e[0];try{null==i[t]&&D(i,t,i[n])}catch(r){}null==i.functions[t]&&D(i.functions,t,i.functions[n]),null==i.callStatic[t]&&D(i.callStatic,t,i.callStatic[n]),null==i.populateTransaction[t]&&D(i.populateTransaction,t,i.populateTransaction[n]),null==i.estimateGas[t]&&D(i.estimateGas,t,i.estimateGas[n])}}))}return Object(g.a)(t,[{key:"deployed",value:function(){return this._deployed()}},{key:"_deployed",value:function(t){var e=this;return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then((function(){return e})):this._deployedPromise=this.provider.getCode(this.address,t).then((function(t){return"0x"===t&&xn.throwError("contract not deployed",_.b.errors.UNSUPPORTED_OPERATION,{contractAddress:e.address,operation:"getDeployed"}),e}))),this._deployedPromise}},{key:"fallback",value:function(t){var e=this;this.signer||xn.throwError("sending a transactions require a signer",_.b.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});var n=U(t||{});return["from","to"].forEach((function(t){null!=n[t]&&xn.throwError("cannot override "+t,_.b.errors.UNSUPPORTED_OPERATION,{operation:t})})),n.to=this.resolvedAddress,this.deployed().then((function(){return e.signer.sendTransaction(n)}))}},{key:"connect",value:function(t){"string"===typeof t&&(t=new qe(t,this.provider));var e=new this.constructor(this.address,this.interface,t);return this.deployTransaction&&D(e,"deployTransaction",this.deployTransaction),e}},{key:"attach",value:function(t){return new this.constructor(t,this.interface,this.signer||this.provider)}},{key:"_normalizeRunningEvent",value:function(t){return this._runningEvents[t.tag]?this._runningEvents[t.tag]:t}},{key:"_getRunningEvent",value:function(t){if("string"===typeof t){if("error"===t)return this._normalizeRunningEvent(new In);if("event"===t)return this._normalizeRunningEvent(new Pn("event",null));if("*"===t)return this._normalizeRunningEvent(new Mn(this.address,this.interface));var e=this.interface.getEvent(t);return this._normalizeRunningEvent(new Rn(this.address,this.interface,e))}if(t.topics&&t.topics.length>0){try{var n=t.topics[0];if("string"!==typeof n)throw new Error("invalid topic");var r=this.interface.getEvent(n);return this._normalizeRunningEvent(new Rn(this.address,this.interface,r,t.topics))}catch(o){}var i={address:this.address,topics:t.topics};return this._normalizeRunningEvent(new Pn(Cn(i),i))}return this._normalizeRunningEvent(new Mn(this.address,this.interface))}},{key:"_checkRunningEvents",value:function(t){if(0===t.listenerCount()){delete this._runningEvents[t.tag];var e=this._wrappedEmits[t.tag];e&&t.filter&&(this.provider.off(t.filter,e),delete this._wrappedEmits[t.tag])}}},{key:"_wrapEvent",value:function(t,e,n){var r=this,i=Y(e);return i.removeListener=function(){n&&(t.removeListener(n),r._checkRunningEvents(t))},i.getBlock=function(){return r.provider.getBlock(e.blockHash)},i.getTransaction=function(){return r.provider.getTransaction(e.transactionHash)},i.getTransactionReceipt=function(){return r.provider.getTransactionReceipt(e.transactionHash)},t.prepareEvent(i),i}},{key:"_addEventListener",value:function(t,e,n){var r=this;if(this.provider||xn.throwError("events require a provider or a signer with a provider",_.b.errors.UNSUPPORTED_OPERATION,{operation:"once"}),t.addListener(e,n),this._runningEvents[t.tag]=t,!this._wrappedEmits[t.tag]){var i=function(n){var i=r._wrapEvent(t,n,e);if(null==i.decodeError)try{var o=t.getEmit(i);r.emit.apply(r,[t.filter].concat(Object(c.a)(o)))}catch(s){i.decodeError=s.error}null!=t.filter&&r.emit("event",i),null!=i.decodeError&&r.emit("error",i.decodeError,i)};this._wrappedEmits[t.tag]=i,null!=t.filter&&this.provider.on(t.filter,i)}}},{key:"queryFilter",value:function(t,e,n){var r=this,i=this._getRunningEvent(t),o=U(i.filter);return"string"===typeof e&&Object(b.l)(e,32)?(null!=n&&xn.throwArgumentError("cannot specify toBlock with blockhash","toBlock",n),o.blockHash=e):(o.fromBlock=null!=e?e:0,o.toBlock=null!=n?n:"latest"),this.provider.getLogs(o).then((function(t){return t.map((function(t){return r._wrapEvent(i,t,null)}))}))}},{key:"on",value:function(t,e){return this._addEventListener(this._getRunningEvent(t),e,!1),this}},{key:"once",value:function(t,e){return this._addEventListener(this._getRunningEvent(t),e,!0),this}},{key:"emit",value:function(t){if(!this.provider)return!1;for(var e=this._getRunningEvent(t),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=e.run(r)>0;return this._checkRunningEvents(e),o}},{key:"listenerCount",value:function(t){var e=this;return this.provider?null==t?Object.keys(this._runningEvents).reduce((function(t,n){return t+e._runningEvents[n].listenerCount()}),0):this._getRunningEvent(t).listenerCount():0}},{key:"listeners",value:function(t){var e=this;if(!this.provider)return[];if(null==t){var n=function(){var t=[];for(var n in e._runningEvents)e._runningEvents[n].listeners().forEach((function(e){t.push(e)}));return{v:t}}();if("object"===typeof n)return n.v}return this._getRunningEvent(t).listeners()}},{key:"removeAllListeners",value:function(t){if(!this.provider)return this;if(null==t){for(var e in this._runningEvents){var n=this._runningEvents[e];n.removeAllListeners(),this._checkRunningEvents(n)}return this}var r=this._getRunningEvent(t);return r.removeAllListeners(),this._checkRunningEvents(r),this}},{key:"off",value:function(t,e){if(!this.provider)return this;var n=this._getRunningEvent(t);return n.removeListener(e),this._checkRunningEvents(n),this}},{key:"removeListener",value:function(t,e){return this.off(t,e)}}],[{key:"getContractAddress",value:function(t){return wt(t)}},{key:"getInterface",value:function(t){return je.isInterface(t)?t:new je(t)}},{key:"isIndexed",value:function(t){return Le.isIndexed(t)}}]),t}(),Ln=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return n}(Nn),Dn=function(){function t(e,n,r){Object(v.a)(this,t);var i=null;"0x"!==(i="string"===typeof n?n:Object(b.j)(n)?Object(b.i)(n):n&&"string"===typeof n.object?n.object:"!").substring(0,2)&&(i="0x"+i),(!Object(b.l)(i)||i.length%2)&&xn.throwArgumentError("invalid bytecode","bytecode",n),r&&!He.isSigner(r)&&xn.throwArgumentError("invalid signer","signer",r),D(this,"bytecode",i),D(this,"interface",F(this instanceof t?this.constructor:void 0,"getInterface")(e)),D(this,"signer",r||null)}return Object(g.a)(t,[{key:"getDeployTransaction",value:function(){for(var t={},e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===this.interface.deploy.inputs.length+1&&"object"===typeof n[n.length-1])for(var i in t=U(n.pop()))if(!_n[i])throw new Error("unknown transaction override "+i);if(["data","from","to"].forEach((function(e){null!=t[e]&&xn.throwError("cannot override "+e,_.b.errors.UNSUPPORTED_OPERATION,{operation:e})})),t.value){var o=C.from(t.value);o.isZero()||this.interface.deploy.payable||xn.throwError("non-payable constructor cannot override value",_.b.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:t.value})}return xn.checkArgumentCount(n.length,this.interface.deploy.inputs.length," in Contract constructor"),t.data=Object(b.i)(Object(b.b)([this.bytecode,this.interface.encodeDeploy(n)])),t}},{key:"deploy",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return wn(this,void 0,void 0,y.a.mark((function t(){var n,r,i,o,s,a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={},e.length===this.interface.deploy.inputs.length+1&&(n=e.pop()),xn.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor"),t.next=5,En(this.signer,e,this.interface.deploy.inputs);case 5:return(r=t.sent).push(n),i=this.getDeployTransaction.apply(this,Object(c.a)(r)),t.next=10,this.signer.sendTransaction(i);case 10:return o=t.sent,s=F(this.constructor,"getContractAddress")(o),kn(a=F(this.constructor,"getContract")(s,this.interface,this.signer),o),D(a,"deployTransaction",o),t.abrupt("return",a);case 16:case"end":return t.stop()}}),t,this)})))}},{key:"attach",value:function(t){return this.constructor.getContract(t,this.interface,this.signer)}},{key:"connect",value:function(t){return new this.constructor(this.interface,this.bytecode,t)}}],[{key:"fromSolidity",value:function(t,e){null==t&&xn.throwError("missing compiler output",_.b.errors.MISSING_ARGUMENT,{argument:"compilerOutput"}),"string"===typeof t&&(t=JSON.parse(t));var n=t.abi,r=null;return t.bytecode?r=t.bytecode:t.evm&&t.evm.bytecode&&(r=t.evm.bytecode),new this(n,r,e)}},{key:"getInterface",value:function(t){return Ln.getInterface(t)}},{key:"getContractAddress",value:function(t){return wt(t)}},{key:"getContract",value:function(t,e,n){return new Ln(t,e,n)}}]),t}(),Fn=new _.b(T),jn={},Bn=C.from(0),Un=C.from(-1);function Vn(t,e,n,r){var i={fault:e,operation:n};return void 0!==r&&(i.value=r),Fn.throwError(t,_.b.errors.NUMERIC_FAULT,i)}for(var zn="0";zn.length<256;)zn+=zn;function Gn(t){if("number"!==typeof t)try{t=C.from(t).toNumber()}catch(e){}return"number"===typeof t&&t>=0&&t<=256&&!(t%1)?"1"+zn.substring(0,t):Fn.throwArgumentError("invalid decimal size","decimals",t)}function Yn(t,e){null==e&&(e=0);var n=Gn(e),r=(t=C.from(t)).lt(Bn);r&&(t=t.mul(Un));for(var i=t.mod(n).toString();i.length<n.length-1;)i="0"+i;i=i.match(/^([0-9]*[1-9]|0)(0*)/)[1];var o=t.div(n).toString();return t=1===n.length?o:o+"."+i,r&&(t="-"+t),t}function Wn(t,e){null==e&&(e=0);var n=Gn(e);"string"===typeof t&&t.match(/^-?[0-9.]+$/)||Fn.throwArgumentError("invalid decimal value","value",t);var r="-"===t.substring(0,1);r&&(t=t.substring(1)),"."===t&&Fn.throwArgumentError("missing value","value",t);var i=t.split(".");i.length>2&&Fn.throwArgumentError("too many decimal points","value",t);var o=i[0],s=i[1];for(o||(o="0"),s||(s="0");"0"===s[s.length-1];)s=s.substring(0,s.length-1);for(s.length>n.length-1&&Vn("fractional component exceeds decimals","underflow","parseFixed"),""===s&&(s="0");s.length<n.length-1;)s+="0";var a=C.from(o),u=C.from(s),c=a.mul(n).add(u);return r&&(c=c.mul(Un)),c}var Xn=function(){function t(e,n,r,i){Object(v.a)(this,t),e!==jn&&Fn.throwError("cannot use FixedFormat constructor; use FixedFormat.from",_.b.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=n,this.width=r,this.decimals=i,this.name=(n?"":"u")+"fixed"+String(r)+"x"+String(i),this._multiplier=Gn(i),Object.freeze(this)}return Object(g.a)(t,null,[{key:"from",value:function(e){if(e instanceof t)return e;"number"===typeof e&&(e="fixed128x".concat(e));var n=!0,r=128,i=18;if("string"===typeof e)if("fixed"===e);else if("ufixed"===e)n=!1;else{var o=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);o||Fn.throwArgumentError("invalid fixed format","format",e),n="u"!==o[1],r=parseInt(o[2]),i=parseInt(o[3])}else if(e){var s=function(t,n,r){return null==e[t]?r:(typeof e[t]!==n&&Fn.throwArgumentError("invalid fixed format ("+t+" not "+n+")","format."+t,e[t]),e[t])};n=s("signed","boolean",n),r=s("width","number",r),i=s("decimals","number",i)}return r%8&&Fn.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",r),i>80&&Fn.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",i),new t(jn,n,r,i)}}]),t}(),Hn=function(){function t(e,n,r,i){Object(v.a)(this,t),Fn.checkNew(this instanceof t?this.constructor:void 0,t),e!==jn&&Fn.throwError("cannot use FixedNumber constructor; use FixedNumber.from",_.b.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=i,this._hex=n,this._value=r,this._isFixedNumber=!0,Object.freeze(this)}return Object(g.a)(t,[{key:"_checkFormat",value:function(t){this.format.name!==t.format.name&&Fn.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",t)}},{key:"addUnsafe",value:function(e){this._checkFormat(e);var n=Wn(this._value,this.format.decimals),r=Wn(e._value,e.format.decimals);return t.fromValue(n.add(r),this.format.decimals,this.format)}},{key:"subUnsafe",value:function(e){this._checkFormat(e);var n=Wn(this._value,this.format.decimals),r=Wn(e._value,e.format.decimals);return t.fromValue(n.sub(r),this.format.decimals,this.format)}},{key:"mulUnsafe",value:function(e){this._checkFormat(e);var n=Wn(this._value,this.format.decimals),r=Wn(e._value,e.format.decimals);return t.fromValue(n.mul(r).div(this.format._multiplier),this.format.decimals,this.format)}},{key:"divUnsafe",value:function(e){this._checkFormat(e);var n=Wn(this._value,this.format.decimals),r=Wn(e._value,e.format.decimals);return t.fromValue(n.mul(this.format._multiplier).div(r),this.format.decimals,this.format)}},{key:"floor",value:function(){var e=this.toString().split(".");1===e.length&&e.push("0");var n=t.from(e[0],this.format),r=!e[1].match(/^(0*)$/);return this.isNegative()&&r&&(n=n.subUnsafe(qn.toFormat(n.format))),n}},{key:"ceiling",value:function(){var e=this.toString().split(".");1===e.length&&e.push("0");var n=t.from(e[0],this.format),r=!e[1].match(/^(0*)$/);return!this.isNegative()&&r&&(n=n.addUnsafe(qn.toFormat(n.format))),n}},{key:"round",value:function(e){null==e&&(e=0);var n=this.toString().split(".");if(1===n.length&&n.push("0"),(e<0||e>80||e%1)&&Fn.throwArgumentError("invalid decimal count","decimals",e),n[1].length<=e)return this;var r=t.from("1"+zn.substring(0,e),this.format),i=Kn.toFormat(this.format);return this.mulUnsafe(r).addUnsafe(i).floor().divUnsafe(r)}},{key:"isZero",value:function(){return"0.0"===this._value||"0"===this._value}},{key:"isNegative",value:function(){return"-"===this._value[0]}},{key:"toString",value:function(){return this._value}},{key:"toHexString",value:function(t){if(null==t)return this._hex;t%8&&Fn.throwArgumentError("invalid byte width","width",t);var e=C.from(this._hex).fromTwos(this.format.width).toTwos(t).toHexString();return Object(b.h)(e,t/8)}},{key:"toUnsafeFloat",value:function(){return parseFloat(this.toString())}},{key:"toFormat",value:function(e){return t.fromString(this._value,e)}}],[{key:"fromValue",value:function(e,n,r){return null!=r||null==n||function(t){return null!=t&&(C.isBigNumber(t)||"number"===typeof t&&t%1===0||"string"===typeof t&&!!t.match(/^-?[0-9]+$/)||Object(b.l)(t)||"bigint"===typeof t||Object(b.j)(t))}(n)||(r=n,n=null),null==n&&(n=0),null==r&&(r="fixed"),t.fromString(Yn(e,n),Xn.from(r))}},{key:"fromString",value:function(e,n){null==n&&(n="fixed");var r=Xn.from(n),i=Wn(e,r.decimals);!r.signed&&i.lt(Bn)&&Vn("unsigned value cannot be negative","overflow","value",e);var o=null;r.signed?o=i.toTwos(r.width).toHexString():(o=i.toHexString(),o=Object(b.h)(o,r.width/8));var s=Yn(i,r.decimals);return new t(jn,o,s,r)}},{key:"fromBytes",value:function(e,n){null==n&&(n="fixed");var r=Xn.from(n);if(Object(b.a)(e).length>r.width/8)throw new Error("overflow");var i=C.from(e);r.signed&&(i=i.fromTwos(r.width));var o=i.toTwos((r.signed?0:1)+r.width).toHexString(),s=Yn(i,r.decimals);return new t(jn,o,s,r)}},{key:"from",value:function(e,n){if("string"===typeof e)return t.fromString(e,n);if(Object(b.j)(e))return t.fromBytes(e,n);try{return t.fromValue(e,0,n)}catch(r){if(r.code!==_.b.errors.INVALID_ARGUMENT)throw r}return Fn.throwArgumentError("invalid FixedNumber value","value",e)}},{key:"isFixedNumber",value:function(t){return!(!t||!t._isFixedNumber)}}]),t}(),qn=Hn.from(1),Kn=Hn.from("0.5");function $n(t){return"string"===typeof t&&(t=Ot(t)),tt(Object(b.b)([Ot("\x19Ethereum Signed Message:\n"),Ot(String(t.length)),t]))}var Jn="hash/5.5.0",Qn=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},Zn=new _.b(Jn),tr=new Uint8Array(32);tr.fill(0);var er=C.from(-1),nr=C.from(0),rr=C.from(1),ir=C.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");var or=Object(b.h)(rr.toHexString(),32),sr=Object(b.h)(nr.toHexString(),32),ar={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},ur=["name","version","chainId","verifyingContract","salt"];function cr(t){return function(e){return"string"!==typeof e&&Zn.throwArgumentError("invalid domain value for ".concat(JSON.stringify(t)),"domain.".concat(t),e),e}}var hr={name:cr("name"),version:cr("version"),chainId:function(t){try{return C.from(t).toString()}catch(e){}return Zn.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return mt(t).toLowerCase()}catch(e){}return Zn.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{var e=Object(b.a)(t);if(32!==e.length)throw new Error("bad length");return Object(b.i)(e)}catch(n){}return Zn.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function lr(t){var e=t.match(/^(u?)int(\d*)$/);if(e){var n=""===e[1],r=parseInt(e[2]||"256");(r%8!==0||r>256||e[2]&&e[2]!==String(r))&&Zn.throwArgumentError("invalid numeric width","type",t);var i=ir.mask(n?r-1:r),o=n?i.add(rr).mul(er):nr;return function(e){var n=C.from(e);return(n.lt(o)||n.gt(i))&&Zn.throwArgumentError("value out-of-bounds for ".concat(t),"value",e),Object(b.h)(n.toTwos(256).toHexString(),32)}}var s=t.match(/^bytes(\d+)$/);if(s){var a=parseInt(s[1]);return(0===a||a>32||s[1]!==String(a))&&Zn.throwArgumentError("invalid bytes width","type",t),function(e){return Object(b.a)(e).length!==a&&Zn.throwArgumentError("invalid length for ".concat(t),"value",e),function(t){var e=Object(b.a)(t),n=e.length%32;return n?Object(b.c)([e,tr.slice(n)]):Object(b.i)(e)}(e)}}switch(t){case"address":return function(t){return Object(b.h)(mt(t),32)};case"bool":return function(t){return t?or:sr};case"bytes":return function(t){return tt(t)};case"string":return function(t){return Nt(t)}}return null}function fr(t,e){return"".concat(t,"(").concat(e.map((function(t){var e=t.name;return t.type+" "+e})).join(","),")")}var dr,pr=function(){function t(e){Object(v.a)(this,t),D(this,"types",Object.freeze(Y(e))),D(this,"_encoderCache",{}),D(this,"_types",{});var n={},r={},i={};Object.keys(e).forEach((function(t){n[t]={},r[t]=[],i[t]={}}));var o=function(t){var i={};e[t].forEach((function(o){i[o.name]&&Zn.throwArgumentError("duplicate variable name ".concat(JSON.stringify(o.name)," in ").concat(JSON.stringify(t)),"types",e),i[o.name]=!0;var s=o.type.match(/^([^\x5b]*)(\x5b|$)/)[1];s===t&&Zn.throwArgumentError("circular type reference to ".concat(JSON.stringify(s)),"types",e),lr(s)||(r[s]||Zn.throwArgumentError("unknown type ".concat(JSON.stringify(s)),"types",e),r[s].push(t),n[t][s]=!0)}))};for(var s in e)o(s);var a=Object.keys(r).filter((function(t){return 0===r[t].length}));for(var u in 0===a.length?Zn.throwArgumentError("missing primary type","types",e):a.length>1&&Zn.throwArgumentError("ambiguous primary types or unused types: ".concat(a.map((function(t){return JSON.stringify(t)})).join(", ")),"types",e),D(this,"primaryType",a[0]),function t(o,s){s[o]&&Zn.throwArgumentError("circular type reference to ".concat(JSON.stringify(o)),"types",e),s[o]=!0,Object.keys(n[o]).forEach((function(e){r[e]&&(t(e,s),Object.keys(s).forEach((function(t){i[t][e]=!0})))})),delete s[o]}(this.primaryType,{}),i){var c=Object.keys(i[u]);c.sort(),this._types[u]=fr(u,e[u])+c.map((function(t){return fr(t,e[t])})).join("")}}return Object(g.a)(t,[{key:"getEncoder",value:function(t){var e=this._encoderCache[t];return e||(e=this._encoderCache[t]=this._getEncoder(t)),e}},{key:"_getEncoder",value:function(t){var e=this,n=lr(t);if(n)return n;var r=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r){var i=r[1],o=this.getEncoder(i),s=parseInt(r[3]);return function(t){s>=0&&t.length!==s&&Zn.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t);var n=t.map(o);return e._types[i]&&(n=n.map(tt)),tt(Object(b.c)(n))}}var a=this.types[t];if(a){var u=Nt(this._types[t]);return function(t){var n=a.map((function(n){var r=n.name,i=n.type,o=e.getEncoder(i)(t[r]);return e._types[i]?tt(o):o}));return n.unshift(u),Object(b.c)(n)}}return Zn.throwArgumentError("unknown type: ".concat(t),"type",t)}},{key:"encodeType",value:function(t){var e=this._types[t];return e||Zn.throwArgumentError("unknown type: ".concat(JSON.stringify(t)),"name",t),e}},{key:"encodeData",value:function(t,e){return this.getEncoder(t)(e)}},{key:"hashStruct",value:function(t,e){return tt(this.encodeData(t,e))}},{key:"encode",value:function(t){return this.encodeData(this.primaryType,t)}},{key:"hash",value:function(t){return this.hashStruct(this.primaryType,t)}},{key:"_visit",value:function(t,e,n){var r=this;if(lr(t))return n(t,e);var i=t.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){var o=i[1],s=parseInt(i[3]);return s>=0&&e.length!==s&&Zn.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",e),e.map((function(t){return r._visit(o,t,n)}))}var a=this.types[t];return a?a.reduce((function(t,i){var o=i.name,s=i.type;return t[o]=r._visit(s,e[o],n),t}),{}):Zn.throwArgumentError("unknown type: ".concat(t),"type",t)}},{key:"visit",value:function(t,e){return this._visit(this.primaryType,t,e)}}],[{key:"from",value:function(e){return new t(e)}},{key:"getPrimaryType",value:function(e){return t.from(e).primaryType}},{key:"hashStruct",value:function(e,n,r){return t.from(n).hashStruct(e,r)}},{key:"hashDomain",value:function(e){var n=[];for(var r in e){var i=ar[r];i||Zn.throwArgumentError("invalid typed-data domain key: ".concat(JSON.stringify(r)),"domain",e),n.push({name:r,type:i})}return n.sort((function(t,e){return ur.indexOf(t.name)-ur.indexOf(e.name)})),t.hashStruct("EIP712Domain",{EIP712Domain:n},e)}},{key:"encode",value:function(e,n,r){return Object(b.c)(["0x1901",t.hashDomain(e),t.from(n).hash(r)])}},{key:"hash",value:function(e,n,r){return tt(t.encode(e,n,r))}},{key:"resolveNames",value:function(e,n,r,i){return Qn(this,void 0,void 0,y.a.mark((function o(){var s,a,u;return y.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:e=U(e),s={},e.verifyingContract&&!Object(b.l)(e.verifyingContract,20)&&(s[e.verifyingContract]="0x"),(a=t.from(n)).visit(r,(function(t,e){return"address"!==t||Object(b.l)(e,20)||(s[e]="0x"),e})),o.t0=y.a.keys(s);case 6:if((o.t1=o.t0()).done){o.next=13;break}return u=o.t1.value,o.next=10,i(u);case 10:s[u]=o.sent,o.next=6;break;case 13:return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),r=a.visit(r,(function(t,e){return"address"===t&&s[e]?s[e]:e})),o.abrupt("return",{domain:e,value:r});case 16:case"end":return o.stop()}}),o)})))}},{key:"getPayload",value:function(e,n,r){t.hashDomain(e);var i={},o=[];ur.forEach((function(t){var n=e[t];null!=n&&(i[t]=hr[t](n),o.push({name:t,type:ar[t]}))}));var s=t.from(n),a=U(n);return a.EIP712Domain?Zn.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",n):a.EIP712Domain=o,s.encode(r),{types:a,domain:i,primaryType:s.primaryType,message:s.visit(r,(function(t,e){if(t.match(/^bytes(\d*)/))return Object(b.i)(Object(b.a)(e));if(t.match(/^u?int/))return C.from(e).toString();switch(t){case"address":return e.toLowerCase();case"bool":return!!e;case"string":return"string"!==typeof e&&Zn.throwArgumentError("invalid string","value",e),e}return Zn.throwArgumentError("unsupported type","type",t)}))}}}]),t}(),vr=function(){function t(e){Object(v.a)(this,t),D(this,"alphabet",e),D(this,"base",e.length),D(this,"_alphabetMap",{}),D(this,"_leader",e.charAt(0));for(var n=0;n<e.length;n++)this._alphabetMap[e.charAt(n)]=n}return Object(g.a)(t,[{key:"encode",value:function(t){var e=Object(b.a)(t);if(0===e.length)return"";for(var n=[0],r=0;r<e.length;++r){for(var i=e[r],o=0;o<n.length;++o)i+=n[o]<<8,n[o]=i%this.base,i=i/this.base|0;for(;i>0;)n.push(i%this.base),i=i/this.base|0}for(var s="",a=0;0===e[a]&&a<e.length-1;++a)s+=this._leader;for(var u=n.length-1;u>=0;--u)s+=this.alphabet[n[u]];return s}},{key:"decode",value:function(t){if("string"!==typeof t)throw new TypeError("Expected String");var e=[];if(0===t.length)return new Uint8Array(e);e.push(0);for(var n=0;n<t.length;n++){var r=this._alphabetMap[t[n]];if(void 0===r)throw new Error("Non-base"+this.base+" character");for(var i=r,o=0;o<e.length;++o)i+=e[o]*this.base,e[o]=255&i,i>>=8;for(;i>0;)e.push(255&i),i>>=8}for(var s=0;t[s]===this._leader&&s<t.length-1;++s)e.push(0);return Object(b.a)(new Uint8Array(e.reverse()))}}]),t}(),gr=(new vr("abcdefghijklmnopqrstuvwxyz234567"),new vr("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")),mr=n(32),yr=n.n(mr);!function(t){t.sha256="sha256",t.sha512="sha512"}(dr||(dr={}));var br=new _.b("sha2/5.5.0");function wr(t){return"0x"+yr.a.ripemd160().update(Object(b.a)(t)).digest("hex")}function xr(t){return"0x"+yr.a.sha256().update(Object(b.a)(t)).digest("hex")}function _r(t){return"0x"+yr.a.sha512().update(Object(b.a)(t)).digest("hex")}function Tr(t,e,n){return dr[t]||br.throwError("unsupported algorithm "+t,_.b.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:t}),"0x"+yr.a.hmac(yr.a[t],Object(b.a)(e)).update(Object(b.a)(n)).digest("hex")}function Er(t,e,n,r,i){var o;t=Object(b.a)(t),e=Object(b.a)(e);var s,a,u=1,c=new Uint8Array(r),h=new Uint8Array(e.length+4);h.set(e);for(var l=1;l<=u;l++){h[e.length]=l>>24&255,h[e.length+1]=l>>16&255,h[e.length+2]=l>>8&255,h[e.length+3]=255&l;var f=Object(b.a)(Tr(i,t,h));o||(o=f.length,a=new Uint8Array(o),s=r-((u=Math.ceil(r/o))-1)*o),a.set(f);for(var d=1;d<n;d++){f=Object(b.a)(Tr(i,t,f));for(var p=0;p<o;p++)a[p]^=f[p]}var v=(l-1)*o,g=l===u?s:o;c.set(Object(b.a)(a).slice(0,g),v)}return Object(b.i)(c)}var Sr=new _.b("wordlists/5.5.0"),kr=function(){function t(e){Object(v.a)(this,t),Sr.checkAbstract(this instanceof t?this.constructor:void 0,t),D(this,"locale",e)}return Object(g.a)(t,[{key:"split",value:function(t){return t.toLowerCase().split(/ +/g)}},{key:"join",value:function(t){return t.join(" ")}}],[{key:"check",value:function(t){for(var e=[],n=0;n<2048;n++){var r=t.getWord(n);if(n!==t.getWordIndex(r))return"0x";e.push(r)}return Nt(e.join("\n")+"\n")}},{key:"register",value:function(t,e){e||(e=t.locale)}}]),t}(),Ar=null;function Or(t){if(null==Ar&&(Ar="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo".replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),"0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"!==kr.check(t)))throw Ar=null,new Error("BIP39 Wordlist for en (English) FAILED")}var Cr=new(function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.call(this,"en")}return Object(g.a)(n,[{key:"getWord",value:function(t){return Or(this),Ar[t]}},{key:"getWordIndex",value:function(t){return Or(this),Ar.indexOf(t)}}]),n}(kr));kr.register(Cr);var Pr={en:Cr},Ir=new _.b("hdnode/5.5.0"),Rr=C.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Mr=Ot("Bitcoin seed"),Nr=2147483648;function Lr(t){return(1<<t)-1<<8-t}function Dr(t){return Object(b.h)(Object(b.i)(t),32)}function Fr(t){return gr.encode(Object(b.b)([t,Object(b.e)(xr(xr(t)),0,4)]))}function jr(t){if(null==t)return Pr.en;if("string"===typeof t){var e=Pr[t];return null==e&&Ir.throwArgumentError("unknown locale","wordlist",t),e}return t}var Br={},Ur="m/44'/60'/0'/0/0",Vr=function(){function t(e,n,r,i,o,s,a,u){if(Object(v.a)(this,t),Ir.checkNew(this instanceof t?this.constructor:void 0,t),e!==Br)throw new Error("HDNode constructor cannot be called directly");if(n){var c=new Ze(n);D(this,"privateKey",c.privateKey),D(this,"publicKey",c.compressedPublicKey)}else D(this,"privateKey",null),D(this,"publicKey",Object(b.i)(r));D(this,"parentFingerprint",i),D(this,"fingerprint",Object(b.e)(wr(xr(this.publicKey)),0,4)),D(this,"address",cn(this.publicKey)),D(this,"chainCode",o),D(this,"index",s),D(this,"depth",a),null==u?(D(this,"mnemonic",null),D(this,"path",null)):"string"===typeof u?(D(this,"mnemonic",null),D(this,"path",u)):(D(this,"mnemonic",u),D(this,"path",u.path))}return Object(g.a)(t,[{key:"extendedKey",get:function(){if(this.depth>=256)throw new Error("Depth too large!");return Fr(Object(b.b)([null!=this.privateKey?"0x0488ADE4":"0x0488B21E",Object(b.i)(this.depth),this.parentFingerprint,Object(b.h)(Object(b.i)(this.index),4),this.chainCode,null!=this.privateKey?Object(b.b)(["0x00",this.privateKey]):this.publicKey]))}},{key:"neuter",value:function(){return new t(Br,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}},{key:"_derive",value:function(e){if(e>4294967295)throw new Error("invalid index - "+String(e));var n=this.path;n&&(n+="/"+(2147483647&e));var r=new Uint8Array(37);if(e&Nr){if(!this.privateKey)throw new Error("cannot derive child of neutered node");r.set(Object(b.a)(this.privateKey),1),n&&(n+="'")}else r.set(Object(b.a)(this.publicKey));for(var i=24;i>=0;i-=8)r[33+(i>>3)]=e>>24-i&255;var o=Object(b.a)(Tr(dr.sha512,this.chainCode,r)),s=o.slice(0,32),a=o.slice(32),u=null,c=null;this.privateKey?u=Dr(C.from(s).add(this.privateKey).mod(Rr)):c=new Ze(Object(b.i)(s))._addPoint(this.publicKey);var h=n,l=this.mnemonic;return l&&(h=Object.freeze({phrase:l.phrase,path:n,locale:l.locale||"en"})),new t(Br,u,c,this.fingerprint,Dr(a),e,this.depth+1,h)}},{key:"derivePath",value:function(t){var e=t.split("/");if(0===e.length||"m"===e[0]&&0!==this.depth)throw new Error("invalid path - "+t);"m"===e[0]&&e.shift();for(var n=this,r=0;r<e.length;r++){var i=e[r];if(i.match(/^[0-9]+'$/)){var o=parseInt(i.substring(0,i.length-1));if(o>=Nr)throw new Error("invalid path index - "+i);n=n._derive(Nr+o)}else{if(!i.match(/^[0-9]+$/))throw new Error("invalid path component - "+i);var s=parseInt(i);if(s>=Nr)throw new Error("invalid path index - "+i);n=n._derive(s)}}return n}}],[{key:"_fromSeed",value:function(e,n){var r=Object(b.a)(e);if(r.length<16||r.length>64)throw new Error("invalid seed");var i=Object(b.a)(Tr(dr.sha512,Mr,r));return new t(Br,Dr(i.slice(0,32)),null,"0x00000000",Dr(i.slice(32)),0,0,n)}},{key:"fromMnemonic",value:function(e,n,r){return e=Yr(Gr(e,r=jr(r)),r),t._fromSeed(zr(e,n),{phrase:e,path:"m",locale:r.locale})}},{key:"fromSeed",value:function(e){return t._fromSeed(e,null)}},{key:"fromExtendedKey",value:function(e){var n=gr.decode(e);82===n.length&&Fr(n.slice(0,78))===e||Ir.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");var r=n[4],i=Object(b.i)(n.slice(5,9)),o=parseInt(Object(b.i)(n.slice(9,13)).substring(2),16),s=Object(b.i)(n.slice(13,45)),a=n.slice(45,78);switch(Object(b.i)(n.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new t(Br,null,Object(b.i)(a),i,s,o,r,null);case"0x0488ade4":case"0x04358394 ":if(0!==a[0])break;return new t(Br,Object(b.i)(a.slice(1)),null,i,s,o,r,null)}return Ir.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}]),t}();function zr(t,e){e||(e="");var n=Ot("mnemonic"+e,_t.NFKD);return Er(Ot(t,_t.NFKD),n,2048,64,"sha512")}function Gr(t,e){e=jr(e),Ir.checkNormalize();var n=e.split(t);if(n.length%3!==0)throw new Error("invalid mnemonic");for(var r=Object(b.a)(new Uint8Array(Math.ceil(11*n.length/8))),i=0,o=0;o<n.length;o++){var s=e.getWordIndex(n[o].normalize("NFKD"));if(-1===s)throw new Error("invalid mnemonic");for(var a=0;a<11;a++)s&1<<10-a&&(r[i>>3]|=1<<7-i%8),i++}var u=32*n.length/3,c=Lr(n.length/3);if((Object(b.a)(xr(r.slice(0,u/8)))[0]&c)!==(r[r.length-1]&c))throw new Error("invalid checksum");return Object(b.i)(r.slice(0,u/8))}function Yr(t,e){if(e=jr(e),(t=Object(b.a)(t)).length%4!==0||t.length<16||t.length>32)throw new Error("invalid entropy");for(var n=[0],r=11,i=0;i<t.length;i++)r>8?(n[n.length-1]<<=8,n[n.length-1]|=t[i],r-=8):(n[n.length-1]<<=r,n[n.length-1]|=t[i]>>8-r,n.push(t[i]&(1<<8-r)-1),r+=3);var o=t.length/4,s=Object(b.a)(xr(t))[0]&Lr(o);return n[n.length-1]<<=o,n[n.length-1]|=s>>8-o,e.join(n.map((function(t){return e.getWord(t)})))}function Wr(t,e){try{return Gr(t,e),!0}catch(n){}return!1}function Xr(t){return("number"!==typeof t||t<0||t>=Nr||t%1)&&Ir.throwArgumentError("invalid account index","index",t),"m/44'/60'/".concat(t,"'/0/0")}var Hr=n(175),qr=n(40),Kr=n.n(qr),$r=n(79),Jr=n.n($r);function Qr(t){return"string"===typeof t&&"0x"!==t.substring(0,2)&&(t="0x"+t),Object(b.a)(t)}function Zr(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function ti(t){return"string"===typeof t?Ot(t,_t.NFKC):Object(b.a)(t)}function ei(t,e){for(var n=t,r=e.toLowerCase().split("/"),i=0;i<r.length;i++){var o=null;for(var s in n)if(s.toLowerCase()===r[i]){o=n[s];break}if(null===o)return null;n=o}return n}function ni(t){var e=Object(b.a)(t);e[6]=15&e[6]|64,e[8]=63&e[8]|128;var n=Object(b.i)(e);return[n.substring(2,10),n.substring(10,14),n.substring(14,18),n.substring(18,22),n.substring(22,34)].join("-")}var ri="json-wallets/5.5.0",ii=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},oi=new _.b(ri);function si(t){return null!=t&&t.mnemonic&&t.mnemonic.phrase}var ai=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(g.a)(n,[{key:"isKeystoreAccount",value:function(t){return!(!t||!t._isKeystoreAccount)}}]),n}(W);function ui(t,e){var n=Qr(ei(t,"crypto/ciphertext"));if(Object(b.i)(tt(Object(b.b)([e.slice(16,32),n]))).substring(2)!==ei(t,"crypto/mac").toLowerCase())throw new Error("invalid password");var r=function(t,e,n){if("aes-128-ctr"===ei(t,"crypto/cipher")){var r=Qr(ei(t,"crypto/cipherparams/iv")),i=new Kr.a.Counter(r),o=new Kr.a.ModeOfOperation.ctr(e,i);return Object(b.a)(o.decrypt(n))}return null}(t,e.slice(0,16),n);r||oi.throwError("unsupported cipher",_.b.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});var i=e.slice(32,64),o=cn(r);if(t.address){var s=t.address.toLowerCase();if("0x"!==s.substring(0,2)&&(s="0x"+s),mt(s)!==o)throw new Error("address mismatch")}var a={_isKeystoreAccount:!0,address:o,privateKey:Object(b.i)(r)};if("0.1"===ei(t,"x-ethers/version")){var u=Qr(ei(t,"x-ethers/mnemonicCiphertext")),c=Qr(ei(t,"x-ethers/mnemonicCounter")),h=new Kr.a.Counter(c),l=new Kr.a.ModeOfOperation.ctr(i,h),f=ei(t,"x-ethers/path")||Ur,d=ei(t,"x-ethers/locale")||"en",p=Object(b.a)(l.decrypt(u));try{var v=Yr(p,d),g=Vr.fromMnemonic(v,null,d).derivePath(f);if(g.privateKey!=a.privateKey)throw new Error("mnemonic mismatch");a.mnemonic=g.mnemonic}catch(m){if(m.code!==_.b.errors.INVALID_ARGUMENT||"wordlist"!==m.argument)throw m}}return new ai(a)}function ci(t,e,n,r,i){return Object(b.a)(Er(t,e,n,r,i))}function hi(t,e,n,r,i){return Promise.resolve(ci(t,e,n,r,i))}function li(t,e,n,r,i){var o=ti(e),s=ei(t,"crypto/kdf");if(s&&"string"===typeof s){var a=function(t,e){return oi.throwArgumentError("invalid key-derivation function parameters",t,e)};if("scrypt"===s.toLowerCase()){var u=Qr(ei(t,"crypto/kdfparams/salt")),c=parseInt(ei(t,"crypto/kdfparams/n")),h=parseInt(ei(t,"crypto/kdfparams/r")),l=parseInt(ei(t,"crypto/kdfparams/p"));c&&h&&l||a("kdf",s),0!==(c&c-1)&&a("N",c);var f=parseInt(ei(t,"crypto/kdfparams/dklen"));return 32!==f&&a("dklen",f),r(o,u,c,h,l,64,i)}if("pbkdf2"===s.toLowerCase()){var d=Qr(ei(t,"crypto/kdfparams/salt")),p=null,v=ei(t,"crypto/kdfparams/prf");"hmac-sha256"===v?p="sha256":"hmac-sha512"===v?p="sha512":a("prf",v);var g=parseInt(ei(t,"crypto/kdfparams/c")),m=parseInt(ei(t,"crypto/kdfparams/dklen"));return 32!==m&&a("dklen",m),n(o,d,g,m,p)}}return oi.throwArgumentError("unsupported key-derivation function","kdf",s)}var fi=new _.b(ri),di=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(g.a)(n,[{key:"isCrowdsaleAccount",value:function(t){return!(!t||!t._isCrowdsaleAccount)}}]),n}(W);function pi(t,e){var n=JSON.parse(t);e=ti(e);var r=mt(ei(n,"ethaddr")),i=Qr(ei(n,"encseed"));i&&i.length%16===0||fi.throwArgumentError("invalid encseed","json",t);for(var o=Object(b.a)(Er(e,e,2e3,32,"sha256")).slice(0,16),s=i.slice(0,16),a=i.slice(16),u=new Kr.a.ModeOfOperation.cbc(o,s),c=Kr.a.padding.pkcs7.strip(Object(b.a)(u.decrypt(a))),h="",l=0;l<c.length;l++)h+=String.fromCharCode(c[l]);var f=tt(Ot(h));return new di({_isCrowdsaleAccount:!0,address:r,privateKey:f})}function vi(t){var e=null;try{e=JSON.parse(t)}catch(n){return!1}return e.encseed&&e.ethaddr}function gi(t){var e=null;try{e=JSON.parse(t)}catch(n){return!1}return!(!e.version||parseInt(e.version)!==e.version||3!==parseInt(e.version))}function mi(t){if(vi(t))try{return mt(JSON.parse(t).ethaddr)}catch(e){return null}if(gi(t))try{return mt(JSON.parse(t).address)}catch(e){return null}return null}function yi(t,e,n){if(vi(t)){n&&n(0);var r=pi(t,e);return n&&n(1),Promise.resolve(r)}return gi(t)?function(t,e,n){return ii(this,void 0,void 0,y.a.mark((function r(){var i,o;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=JSON.parse(t),r.next=3,li(i,e,hi,Jr.a.scrypt,n);case 3:return o=r.sent,r.abrupt("return",ui(i,o));case 5:case"end":return r.stop()}}),r)})))}(t,e,n):Promise.reject(new Error("invalid JSON wallet"))}function bi(t,e){if(vi(t))return pi(t,e);if(gi(t))return function(t,e){var n=JSON.parse(t);return ui(n,li(n,e,ci,Jr.a.syncScrypt))}(t,e);throw new Error("invalid JSON wallet")}var wi=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},xi=new _.b("wallet/5.5.0");var _i=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t,r){var i,o;if(Object(v.a)(this,n),xi.checkNew(this instanceof n?this.constructor:void 0,n),i=e.call(this),null!=(o=t)&&Object(b.l)(o.privateKey,32)&&null!=o.address){var s=new Ze(t.privateKey);if(D(Object(h.a)(i),"_signingKey",(function(){return s})),D(Object(h.a)(i),"address",cn(i.publicKey)),i.address!==mt(t.address)&&xi.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),function(t){var e=t.mnemonic;return e&&e.phrase}(t)){var a=t.mnemonic;D(Object(h.a)(i),"_mnemonic",(function(){return{phrase:a.phrase,path:a.path||Ur,locale:a.locale||"en"}}));var u=i.mnemonic;cn(Vr.fromMnemonic(u.phrase,null,u.locale).derivePath(u.path).privateKey)!==i.address&&xi.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else D(Object(h.a)(i),"_mnemonic",(function(){return null}))}else{if(Ze.isSigningKey(t))"secp256k1"!==t.curve&&xi.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),D(Object(h.a)(i),"_signingKey",(function(){return t}));else{"string"===typeof t&&t.match(/^[0-9a-f]*$/i)&&64===t.length&&(t="0x"+t);var c=new Ze(t);D(Object(h.a)(i),"_signingKey",(function(){return c}))}D(Object(h.a)(i),"_mnemonic",(function(){return null})),D(Object(h.a)(i),"address",cn(i.publicKey))}return r&&!ze.isProvider(r)&&xi.throwArgumentError("invalid provider","provider",r),D(Object(h.a)(i),"provider",r||null),i}return Object(g.a)(n,[{key:"mnemonic",get:function(){return this._mnemonic()}},{key:"privateKey",get:function(){return this._signingKey().privateKey}},{key:"publicKey",get:function(){return this._signingKey().publicKey}},{key:"getAddress",value:function(){return Promise.resolve(this.address)}},{key:"connect",value:function(t){return new n(this,t)}},{key:"signTransaction",value:function(t){var e=this;return j(t).then((function(n){null!=n.from&&(mt(n.from)!==e.address&&xi.throwArgumentError("transaction from address mismatch","transaction.from",t.from),delete n.from);var r=e._signingKey().signDigest(tt(mn(n)));return mn(n,r)}))}},{key:"signMessage",value:function(t){return wi(this,void 0,void 0,y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(b.m)(this._signingKey().signDigest($n(t))));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"_signTypedData",value:function(t,e,n){return wi(this,void 0,void 0,y.a.mark((function r(){var i,o=this;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,pr.resolveNames(t,e,n,(function(t){return null==o.provider&&xi.throwError("cannot resolve ENS names without a provider",_.b.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:t}),o.provider.resolveName(t)}));case 2:return i=r.sent,r.abrupt("return",Object(b.m)(this._signingKey().signDigest(pr.hash(i.domain,e,i.value))));case 4:case"end":return r.stop()}}),r,this)})))}},{key:"encrypt",value:function(t,e,n){if("function"!==typeof e||n||(n=e,e={}),n&&"function"!==typeof n)throw new Error("invalid callback");return e||(e={}),function(t,e,n,r){try{if(mt(t.address)!==cn(t.privateKey))throw new Error("address/privateKey mismatch");if(si(t)){var i=t.mnemonic;if(Vr.fromMnemonic(i.phrase,null,i.locale).derivePath(i.path||Ur).privateKey!=t.privateKey)throw new Error("mnemonic mismatch")}}catch(y){return Promise.reject(y)}"function"!==typeof n||r||(r=n,n={}),n||(n={});var o=Object(b.a)(t.privateKey),s=ti(e),a=null,u=null,c=null;if(si(t)){var h=t.mnemonic;a=Object(b.a)(Gr(h.phrase,h.locale||"en")),u=h.path||Ur,c=h.locale||"en"}var l=n.client;l||(l="ethers.js");var f=null;f=n.salt?Object(b.a)(n.salt):Object(Hr.a)(32);var d=null;if(n.iv){if(16!==(d=Object(b.a)(n.iv)).length)throw new Error("invalid iv")}else d=Object(Hr.a)(16);var p=null;if(n.uuid){if(16!==(p=Object(b.a)(n.uuid)).length)throw new Error("invalid uuid")}else p=Object(Hr.a)(16);var v=1<<17,g=8,m=1;return n.scrypt&&(n.scrypt.N&&(v=n.scrypt.N),n.scrypt.r&&(g=n.scrypt.r),n.scrypt.p&&(m=n.scrypt.p)),Jr.a.scrypt(s,f,v,g,m,64,r).then((function(e){var n=(e=Object(b.a)(e)).slice(0,16),r=e.slice(16,32),i=e.slice(32,64),s=new Kr.a.Counter(d),h=new Kr.a.ModeOfOperation.ctr(n,s),y=Object(b.a)(h.encrypt(o)),w=tt(Object(b.b)([r,y])),x={address:t.address.substring(2).toLowerCase(),id:ni(p),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:Object(b.i)(d).substring(2)},ciphertext:Object(b.i)(y).substring(2),kdf:"scrypt",kdfparams:{salt:Object(b.i)(f).substring(2),n:v,dklen:32,p:m,r:g},mac:w.substring(2)}};if(a){var _=Object(Hr.a)(16),T=new Kr.a.Counter(_),E=new Kr.a.ModeOfOperation.ctr(i,T),S=Object(b.a)(E.encrypt(a)),k=new Date,A=k.getUTCFullYear()+"-"+Zr(k.getUTCMonth()+1,2)+"-"+Zr(k.getUTCDate(),2)+"T"+Zr(k.getUTCHours(),2)+"-"+Zr(k.getUTCMinutes(),2)+"-"+Zr(k.getUTCSeconds(),2)+".0Z";x["x-ethers"]={client:l,gethFilename:"UTC--"+A+"--"+x.address,mnemonicCounter:Object(b.i)(_).substring(2),mnemonicCiphertext:Object(b.i)(S).substring(2),path:u,locale:c,version:"0.1"}}return JSON.stringify(x)}))}(this,t,e,n)}}],[{key:"createRandom",value:function(t){var e=Object(Hr.a)(16);t||(t={}),t.extraEntropy&&(e=Object(b.a)(Object(b.e)(tt(Object(b.b)([e,t.extraEntropy])),0,16)));var r=Yr(e,t.locale);return n.fromMnemonic(r,t.path,t.locale)}},{key:"fromEncryptedJson",value:function(t,e,r){return yi(t,e,r).then((function(t){return new n(t)}))}},{key:"fromEncryptedJsonSync",value:function(t,e){return new n(bi(t,e))}},{key:"fromMnemonic",value:function(t,e,r){return e||(e=Ur),new n(Vr.fromMnemonic(t,null,r).derivePath(e))}}]),n}(He);function Ti(t,e){return hn($n(t),e)}function Ei(t,e,n,r){return hn(pr.hash(t,e,n),r)}var Si="0x0000000000000000000000000000000000000000",ki="0x0000000000000000000000000000000000000000000000000000000000000000",Ai="\u039e",Oi=new _.b("networks/5.5.0");function Ci(t){var e=function(e,n){null==n&&(n={});var r=[];if(e.InfuraProvider)try{r.push(new e.InfuraProvider(t,n.infura))}catch(s){}if(e.EtherscanProvider)try{r.push(new e.EtherscanProvider(t,n.etherscan))}catch(s){}if(e.AlchemyProvider)try{r.push(new e.AlchemyProvider(t,n.alchemy))}catch(s){}if(e.PocketProvider){try{var i=new e.PocketProvider(t);i.network&&-1===["goerli","ropsten","rinkeby"].indexOf(i.network.name)&&r.push(i)}catch(s){}}if(e.CloudflareProvider)try{r.push(new e.CloudflareProvider(t))}catch(s){}if(0===r.length)return null;if(e.FallbackProvider){var o=1;return null!=n.quorum?o=n.quorum:"homestead"===t&&(o=2),new e.FallbackProvider(r,o)}return r[0]};return e.renetwork=function(t){return Ci(t)},e}function Pi(t,e){var n=function(n,r){return n.JsonRpcProvider?new n.JsonRpcProvider(t,e):null};return n.renetwork=function(e){return Pi(t,e)},n}var Ii={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:Ci("homestead")},Ri={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:Ci("ropsten")},Mi={chainId:63,name:"classicMordor",_defaultProvider:Pi("https://www.ethercluster.com/mordor","classicMordor")},Ni={unspecified:{chainId:0,name:"unspecified"},homestead:Ii,mainnet:Ii,morden:{chainId:2,name:"morden"},ropsten:Ri,testnet:Ri,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:Ci("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:Ci("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:Ci("goerli")},classic:{chainId:61,name:"classic",_defaultProvider:Pi("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:Mi,classicTestnet:Mi,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:Pi("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic"},maticmum:{chainId:80001,name:"maticmum"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function Li(t){if(null==t)return null;if("number"===typeof t){for(var e in Ni){var n=Ni[e];if(n.chainId===t)return{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress||null,_defaultProvider:n._defaultProvider||null}}return{chainId:t,name:"unknown"}}if("string"===typeof t){var r=Ni[t];return null==r?null:{name:r.name,chainId:r.chainId,ensAddress:r.ensAddress,_defaultProvider:r._defaultProvider||null}}var i=Ni[t.name];if(!i)return"number"!==typeof t.chainId&&Oi.throwArgumentError("invalid network chainId","network",t),t;0!==t.chainId&&t.chainId!==i.chainId&&Oi.throwArgumentError("network chainId mismatch","network",t);var o,s=t._defaultProvider||null;return null==s&&i._defaultProvider&&(s=(o=i._defaultProvider)&&"function"===typeof o.renetwork?i._defaultProvider.renetwork(t):i._defaultProvider),{name:t.name,chainId:i.chainId,ensAddress:t.ensAddress||i.ensAddress||null,_defaultProvider:s}}function Di(t,e){e||(e=function(t){return[parseInt(t,16)]});var n=0,r={};return t.split(",").forEach((function(t){var i=t.split(":");n+=parseInt(i[0],16),r[n]=e(i[1])})),r}function Fi(t){var e=0;return t.split(",").map((function(t){var n=t.split("-");return 1===n.length?n[1]="0":""===n[1]&&(n[1]="1"),{l:e+parseInt(n[0],16),h:e=parseInt(n[1],16)}}))}function ji(t,e){for(var n=0,r=0;r<e.length;r++){var i=e[r];if(t>=(n+=i.l)&&t<=n+i.h&&(t-n)%(i.d||1)===0){if(i.e&&-1!==i.e.indexOf(t-n))continue;return i}}return null}var Bi=Fi("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),Ui="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map((function(t){return parseInt(t,16)})),Vi=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],zi=Di("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),Gi=Di("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),Yi=Di("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",(function(t){if(t.length%4!==0)throw new Error("bad data");for(var e=[],n=0;n<t.length;n+=4)e.push(parseInt(t.substring(n,n+4),16));return e})),Wi=Fi("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function Xi(t){if(t.match(/^[a-z0-9-]*$/i)&&t.length<=59)return t.toLowerCase();var e,n=Mt(t);e=n.map((function(t){if(Ui.indexOf(t)>=0)return[];if(t>=65024&&t<=65039)return[];var e=function(t){var e=ji(t,Vi);if(e)return[t+e.s];var n=zi[t];if(n)return n;var r=Gi[t];return r?[t+r[0]]:Yi[t]||null}(t);return e||[t]})),n=e.reduce((function(t,e){return e.forEach((function(e){t.push(e)})),t}),[]),(n=Mt(It(n),_t.NFKC)).forEach((function(t){if(ji(t,Wi))throw new Error("STRINGPREP_CONTAINS_PROHIBITED")})),n.forEach((function(t){if(ji(t,Bi))throw new Error("STRINGPREP_CONTAINS_UNASSIGNED")}));var r=It(n);if("-"===r.substring(0,1)||"--"===r.substring(2,4)||"-"===r.substring(r.length-1))throw new Error("invalid hyphen");if(r.length>63)throw new Error("too long");return r}var Hi=new _.b(Jn),qi=new Uint8Array(32);qi.fill(0);var Ki=new RegExp("^((.*)\\.)?([^.]+)$");function $i(t){try{for(var e=t.split("."),n=0;n<e.length;n++)if(0===Xi(e[n]).length)throw new Error("empty");return!0}catch(r){}return!1}function Ji(t){"string"!==typeof t&&Hi.throwArgumentError("invalid ENS name; not a string","name",t);for(var e=t,n=qi;e.length;){var r=e.match(Ki);null!=r&&""!==r[2]||Hi.throwArgumentError("invalid ENS address; missing component","name",t);var i=Ot(Xi(r[3]));n=tt(Object(b.b)([n,tt(i)])),e=r[2]||""}return Object(b.i)(n)}function Qi(t){t=atob(t);for(var e=[],n=0;n<t.length;n++)e.push(t.charCodeAt(n));return Object(b.a)(e)}function Zi(t){t=Object(b.a)(t);for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}var to=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))};function eo(t,e){return to(this,void 0,void 0,y.a.mark((function n(){var r,i,o,s;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return null==e&&(e={}),r={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0},!0!==e.skipFetchSetup&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client"),n.next=6,fetch(t,r);case 6:return i=n.sent,n.next=9,i.arrayBuffer();case 9:return o=n.sent,s={},i.headers.forEach?i.headers.forEach((function(t,e){s[e.toLowerCase()]=t})):i.headers.keys().forEach((function(t){s[t.toLowerCase()]=i.headers.get(t)})),n.abrupt("return",{headers:s,statusCode:i.status,statusMessage:i.statusText,body:Object(b.a)(new Uint8Array(o))});case 13:case"end":return n.stop()}}),n)})))}var no=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},ro=new _.b("web/5.5.0");function io(t){return new Promise((function(e){setTimeout(e,t)}))}function oo(t,e){if(null==t)return null;if("string"===typeof t)return t;if(Object(b.k)(t)){if(e&&("text"===e.split("/")[0]||"application/json"===e.split(";")[0].trim()))try{return Rt(t)}catch(n){}return Object(b.i)(t)}return t}function so(t,e,n){var r="object"===typeof t&&null!=t.throttleLimit?t.throttleLimit:12;ro.assertArgument(r>0&&r%1===0,"invalid connection throttle limit","connection.throttleLimit",r);var i="object"===typeof t?t.throttleCallback:null,o="object"===typeof t&&"number"===typeof t.throttleSlotInterval?t.throttleSlotInterval:100;ro.assertArgument(o>0&&o%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",o);var s={},a=null,u={method:"GET"},c=!1,h=12e4;if("string"===typeof t)a=t;else if("object"===typeof t){if(null!=t&&null!=t.url||ro.throwArgumentError("missing URL","connection.url",t),a=t.url,"number"===typeof t.timeout&&t.timeout>0&&(h=t.timeout),t.headers)for(var l in t.headers)s[l.toLowerCase()]={key:l,value:String(t.headers[l])},["if-none-match","if-modified-since"].indexOf(l.toLowerCase())>=0&&(c=!0);if(u.allowGzip=!!t.allowGzip,null!=t.user&&null!=t.password){"https:"!==a.substring(0,6)&&!0!==t.allowInsecureAuthentication&&ro.throwError("basic authentication requires a secure https url",_.b.errors.INVALID_ARGUMENT,{argument:"url",url:a,user:t.user,password:"[REDACTED]"});var f=t.user+":"+t.password;s.authorization={key:"Authorization",value:"Basic "+Zi(Ot(f))}}}e&&(u.method="POST",u.body=e,null==s["content-type"]&&(s["content-type"]={key:"Content-Type",value:"application/octet-stream"}),null==s["content-length"]&&(s["content-length"]={key:"Content-Length",value:String(e.length)}));var d={};Object.keys(s).forEach((function(t){var e=s[t];d[e.key]=e.value})),u.headers=d;var p=function(){var t=null;return{promise:new Promise((function(e,n){h&&(t=setTimeout((function(){null!=t&&(t=null,n(ro.makeError("timeout",_.b.errors.TIMEOUT,{requestBody:oo(u.body,d["content-type"]),requestMethod:u.method,timeout:h,url:a})))}),h))})),cancel:function(){null!=t&&(clearTimeout(t),t=null)}}}(),v=function(){return no(this,void 0,void 0,y.a.mark((function t(){var e,s,h,l,f,v,g,m,b;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<r)){t.next=57;break}return s=null,t.prev=3,t.next=6,eo(a,u);case 6:if(!(429===(s=t.sent).statusCode&&e<r)){t.next=20;break}if(h=!0,!i){t.next=13;break}return t.next=12,i(e,a);case 12:h=t.sent;case 13:if(!h){t.next=20;break}return l=0,f=s.headers["retry-after"],l="string"===typeof f&&f.match(/^[1-9][0-9]*$/)?1e3*parseInt(f):o*parseInt(String(Math.random()*Math.pow(2,e))),t.next=19,io(l);case 19:return t.abrupt("continue",54);case 20:t.next=26;break;case 22:t.prev=22,t.t0=t.catch(3),null==(s=t.t0.response)&&(p.cancel(),ro.throwError("missing response",_.b.errors.SERVER_ERROR,{requestBody:oo(u.body,d["content-type"]),requestMethod:u.method,serverError:t.t0,url:a}));case 26:if(v=s.body,c&&304===s.statusCode?v=null:(s.statusCode<200||s.statusCode>=300)&&(p.cancel(),ro.throwError("bad response",_.b.errors.SERVER_ERROR,{status:s.statusCode,headers:s.headers,body:oo(v,s.headers?s.headers["content-type"]:null),requestBody:oo(u.body,d["content-type"]),requestMethod:u.method,url:a})),!n){t.next=52;break}return t.prev=29,t.next=32,n(v,s);case 32:return g=t.sent,p.cancel(),t.abrupt("return",g);case 37:if(t.prev=37,t.t1=t.catch(29),!(t.t1.throttleRetry&&e<r)){t.next=50;break}if(m=!0,!i){t.next=45;break}return t.next=44,i(e,a);case 44:m=t.sent;case 45:if(!m){t.next=50;break}return b=o*parseInt(String(Math.random()*Math.pow(2,e))),t.next=49,io(b);case 49:return t.abrupt("continue",54);case 50:p.cancel(),ro.throwError("processing response error",_.b.errors.SERVER_ERROR,{body:oo(v,s.headers?s.headers["content-type"]:null),error:t.t1,requestBody:oo(u.body,d["content-type"]),requestMethod:u.method,url:a});case 52:return p.cancel(),t.abrupt("return",v);case 54:e++,t.next=1;break;case 57:return t.abrupt("return",ro.throwError("failed response",_.b.errors.SERVER_ERROR,{requestBody:oo(u.body,d["content-type"]),requestMethod:u.method,url:a}));case 58:case"end":return t.stop()}}),t,null,[[3,22],[29,37]])})))}();return Promise.race([p.promise,v])}function ao(t,e,n){var r=null;if(null!=e){r=Ot(e);var i="string"===typeof t?{url:t}:U(t);if(i.headers)0!==Object.keys(i.headers).filter((function(t){return"content-type"===t.toLowerCase()})).length||(i.headers=U(i.headers),i.headers["content-type"]="application/json");else i.headers={"content-type":"application/json"};t=i}return so(t,r,(function(t,e){var r=null;if(null!=t)try{r=JSON.parse(Rt(t))}catch(i){ro.throwError("invalid JSON",_.b.errors.SERVER_ERROR,{body:t,error:i})}return n&&(r=n(r,e)),r}))}function uo(t,e){return e||(e={}),null==(e=U(e)).floor&&(e.floor=0),null==e.ceiling&&(e.ceiling=1e4),null==e.interval&&(e.interval=250),new Promise((function(n,r){var i=null,o=!1,s=function(){return!o&&(o=!0,i&&clearTimeout(i),!0)};e.timeout&&(i=setTimeout((function(){s()&&r(new Error("timeout"))}),e.timeout));var a=e.retryLimit,u=0;!function i(){return t().then((function(t){if(void 0!==t)s()&&n(t);else if(e.oncePoll)e.oncePoll.once("poll",i);else if(e.onceBlock)e.onceBlock.once("block",i);else if(!o){if(++u>a)return void(s()&&r(new Error("retry limit reached")));var c=e.interval*parseInt(String(Math.random()*Math.pow(2,u)));c<e.floor&&(c=e.floor),c>e.ceiling&&(c=e.ceiling),setTimeout(i,c)}return null}),(function(t){s()&&r(t)}))}()}))}var co=n(89),ho=n.n(co),lo="providers/5.5.0",fo=new _.b(lo),po=function(){function t(){Object(v.a)(this,t),fo.checkNew(this instanceof t?this.constructor:void 0,t),this.formats=this.getDefaultFormats()}return Object(g.a)(t,[{key:"getDefaultFormats",value:function(){var e=this,n={},r=this.address.bind(this),i=this.bigNumber.bind(this),o=this.blockTag.bind(this),s=this.data.bind(this),a=this.hash.bind(this),u=this.hex.bind(this),c=this.number.bind(this),h=this.type.bind(this);return n.transaction={hash:a,type:h,accessList:t.allowNull(this.accessList.bind(this),null),blockHash:t.allowNull(a,null),blockNumber:t.allowNull(c,null),transactionIndex:t.allowNull(c,null),confirmations:t.allowNull(c,null),from:r,gasPrice:t.allowNull(i),maxPriorityFeePerGas:t.allowNull(i),maxFeePerGas:t.allowNull(i),gasLimit:i,to:t.allowNull(r,null),value:i,nonce:c,data:s,r:t.allowNull(this.uint256),s:t.allowNull(this.uint256),v:t.allowNull(c),creates:t.allowNull(r,null),raw:t.allowNull(s)},n.transactionRequest={from:t.allowNull(r),nonce:t.allowNull(c),gasLimit:t.allowNull(i),gasPrice:t.allowNull(i),maxPriorityFeePerGas:t.allowNull(i),maxFeePerGas:t.allowNull(i),to:t.allowNull(r),value:t.allowNull(i),data:t.allowNull((function(t){return e.data(t,!0)})),type:t.allowNull(c),accessList:t.allowNull(this.accessList.bind(this),null)},n.receiptLog={transactionIndex:c,blockNumber:c,transactionHash:a,address:r,topics:t.arrayOf(a),data:s,logIndex:c,blockHash:a},n.receipt={to:t.allowNull(this.address,null),from:t.allowNull(this.address,null),contractAddress:t.allowNull(r,null),transactionIndex:c,root:t.allowNull(u),gasUsed:i,logsBloom:t.allowNull(s),blockHash:a,transactionHash:a,logs:t.arrayOf(this.receiptLog.bind(this)),blockNumber:c,confirmations:t.allowNull(c,null),cumulativeGasUsed:i,effectiveGasPrice:t.allowNull(i),status:t.allowNull(c),type:h},n.block={hash:a,parentHash:a,number:c,timestamp:c,nonce:t.allowNull(u),difficulty:this.difficulty.bind(this),gasLimit:i,gasUsed:i,miner:r,extraData:s,transactions:t.allowNull(t.arrayOf(a)),baseFeePerGas:t.allowNull(i)},n.blockWithTransactions=U(n.block),n.blockWithTransactions.transactions=t.allowNull(t.arrayOf(this.transactionResponse.bind(this))),n.filter={fromBlock:t.allowNull(o,void 0),toBlock:t.allowNull(o,void 0),blockHash:t.allowNull(a,void 0),address:t.allowNull(r,void 0),topics:t.allowNull(this.topics.bind(this),void 0)},n.filterLog={blockNumber:t.allowNull(c),blockHash:t.allowNull(a),transactionIndex:c,removed:t.allowNull(this.boolean.bind(this)),address:r,data:t.allowFalsish(s,"0x"),topics:t.arrayOf(a),transactionHash:a,logIndex:c},n}},{key:"accessList",value:function(t){return dn(t||[])}},{key:"number",value:function(t){return"0x"===t?0:C.from(t).toNumber()}},{key:"type",value:function(t){return"0x"===t||null==t?0:C.from(t).toNumber()}},{key:"bigNumber",value:function(t){return C.from(t)}},{key:"boolean",value:function(t){if("boolean"===typeof t)return t;if("string"===typeof t){if("true"===(t=t.toLowerCase()))return!0;if("false"===t)return!1}throw new Error("invalid boolean - "+t)}},{key:"hex",value:function(t,e){return"string"===typeof t&&(e||"0x"===t.substring(0,2)||(t="0x"+t),Object(b.l)(t))?t.toLowerCase():fo.throwArgumentError("invalid hash","value",t)}},{key:"data",value:function(t,e){var n=this.hex(t,e);if(n.length%2!==0)throw new Error("invalid data; odd-length - "+t);return n}},{key:"address",value:function(t){return mt(t)}},{key:"callAddress",value:function(t){if(!Object(b.l)(t,32))return null;var e=mt(Object(b.e)(t,12));return e===Si?null:e}},{key:"contractAddress",value:function(t){return wt(t)}},{key:"blockTag",value:function(t){if(null==t)return"latest";if("earliest"===t)return"0x0";if("latest"===t||"pending"===t)return t;if("number"===typeof t||Object(b.l)(t))return Object(b.g)(t);throw new Error("invalid blockTag")}},{key:"hash",value:function(t,e){var n=this.hex(t,e);return 32!==Object(b.d)(n)?fo.throwArgumentError("invalid hash","value",t):n}},{key:"difficulty",value:function(t){if(null==t)return null;var e=C.from(t);try{return e.toNumber()}catch(n){}return null}},{key:"uint256",value:function(t){if(!Object(b.l)(t))throw new Error("invalid uint256");return Object(b.h)(t,32)}},{key:"_block",value:function(e,n){null!=e.author&&null==e.miner&&(e.miner=e.author);var r=null!=e._difficulty?e._difficulty:e.difficulty,i=t.check(n,e);return i._difficulty=null==r?null:C.from(r),i}},{key:"block",value:function(t){return this._block(t,this.formats.block)}},{key:"blockWithTransactions",value:function(t){return this._block(t,this.formats.blockWithTransactions)}},{key:"transactionRequest",value:function(e){return t.check(this.formats.transactionRequest,e)}},{key:"transactionResponse",value:function(e){null!=e.gas&&null==e.gasLimit&&(e.gasLimit=e.gas),e.to&&C.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),null!=e.input&&null==e.data&&(e.data=e.input),null==e.to&&null==e.creates&&(e.creates=this.contractAddress(e)),1!==e.type&&2!==e.type||null!=e.accessList||(e.accessList=[]);var n=t.check(this.formats.transaction,e);if(null!=e.chainId){var r=e.chainId;Object(b.l)(r)&&(r=C.from(r).toNumber()),n.chainId=r}else{var i=e.networkId;null==i&&null==n.v&&(i=e.chainId),Object(b.l)(i)&&(i=C.from(i).toNumber()),"number"!==typeof i&&null!=n.v&&((i=(n.v-35)/2)<0&&(i=0),i=parseInt(i)),"number"!==typeof i&&(i=0),n.chainId=i}return n.blockHash&&"x"===n.blockHash.replace(/0/g,"")&&(n.blockHash=null),n}},{key:"transaction",value:function(t){return bn(t)}},{key:"receiptLog",value:function(e){return t.check(this.formats.receiptLog,e)}},{key:"receipt",value:function(e){var n=t.check(this.formats.receipt,e);if(null!=n.root)if(n.root.length<=4){var r=C.from(n.root).toNumber();0===r||1===r?(null!=n.status&&n.status!==r&&fo.throwArgumentError("alt-root-status/status mismatch","value",{root:n.root,status:n.status}),n.status=r,delete n.root):fo.throwArgumentError("invalid alt-root-status","value.root",n.root)}else 66!==n.root.length&&fo.throwArgumentError("invalid root hash","value.root",n.root);return null!=n.status&&(n.byzantium=!0),n}},{key:"topics",value:function(t){var e=this;return Array.isArray(t)?t.map((function(t){return e.topics(t)})):null!=t?this.hash(t,!0):null}},{key:"filter",value:function(e){return t.check(this.formats.filter,e)}},{key:"filterLog",value:function(e){return t.check(this.formats.filterLog,e)}}],[{key:"check",value:function(t,e){var n={};for(var r in t)try{var i=t[r](e[r]);void 0!==i&&(n[r]=i)}catch(o){throw o.checkKey=r,o.checkValue=e[r],o}return n}},{key:"allowNull",value:function(t,e){return function(n){return null==n?e:t(n)}}},{key:"allowFalsish",value:function(t,e){return function(n){return n?t(n):e}}},{key:"arrayOf",value:function(t){return function(e){if(!Array.isArray(e))throw new Error("not an array");var n=[];return e.forEach((function(e){n.push(t(e))})),n}}}]),t}();function vo(t){return t&&"function"===typeof t.isCommunityResource}function go(t){return vo(t)&&t.isCommunityResource()}var mo=!1;function yo(){mo||(mo=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var bo=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},wo=new _.b(lo);function xo(t){return null==t?"null":(32!==Object(b.d)(t)&&wo.throwArgumentError("invalid topic","topic",t),t.toLowerCase())}function _o(t){for(t=t.slice();t.length>0&&null==t[t.length-1];)t.pop();return t.map((function(t){if(Array.isArray(t)){var e={};t.forEach((function(t){e[xo(t)]=!0}));var n=Object.keys(e);return n.sort(),n.join("|")}return xo(t)})).join("&")}function To(t){if("string"===typeof t){if(t=t.toLowerCase(),32===Object(b.d)(t))return"tx:"+t;if(-1===t.indexOf(":"))return t}else{if(Array.isArray(t))return"filter:*:"+_o(t);if(Ve.isForkEvent(t))throw wo.warn("not implemented"),new Error("not implemented");if(t&&"object"===typeof t)return"filter:"+(t.address||"*")+":"+_o(t.topics||[])}throw new Error("invalid event - "+t)}function Eo(){return(new Date).getTime()}function So(t){return new Promise((function(e){setTimeout(e,t)}))}var ko=["block","network","pending","poll"],Ao=function(){function t(e,n,r){Object(v.a)(this,t),D(this,"tag",e),D(this,"listener",n),D(this,"once",r)}return Object(g.a)(t,[{key:"event",get:function(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}},{key:"type",get:function(){return this.tag.split(":")[0]}},{key:"hash",get:function(){var t=this.tag.split(":");return"tx"!==t[0]?null:t[1]}},{key:"filter",get:function(){var t=this.tag.split(":");if("filter"!==t[0])return null;var e,n=t[1],r=""===(e=t[2])?[]:e.split(/&/g).map((function(t){if(""===t)return[];var e=t.split("|").map((function(t){return"null"===t?null:t}));return 1===e.length?e[0]:e})),i={};return r.length>0&&(i.topics=r),n&&"*"!==n&&(i.address=n),i}},{key:"pollable",value:function(){return this.tag.indexOf(":")>=0||ko.indexOf(this.tag)>=0}}]),t}(),Oo={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function Co(t){return Object(b.h)(C.from(t).toHexString(),32)}function Po(t){return gr.encode(Object(b.b)([t,Object(b.e)(xr(xr(t)),0,4)]))}var Io=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),new RegExp("^(ipfs)://(.*)$","i"),new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function Ro(t){try{return Rt(Mo(t))}catch(e){}return null}function Mo(t){if("0x"===t)return null;var e=C.from(Object(b.e)(t,0,32)).toNumber(),n=C.from(Object(b.e)(t,e,e+32)).toNumber();return Object(b.e)(t,e+32,e+32+n)}var No=function(){function t(e,n,r,i){Object(v.a)(this,t),D(this,"provider",e),D(this,"name",r),D(this,"address",e.formatter.address(n)),D(this,"_resolvedAddress",i)}return Object(g.a)(t,[{key:"_fetchBytes",value:function(t,e){return bo(this,void 0,void 0,y.a.mark((function n(){var r;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={to:this.address,data:Object(b.c)([t,Ji(this.name),e||"0x"])},n.prev=1,n.t0=Mo,n.next=5,this.provider.call(r);case 5:return n.t1=n.sent,n.abrupt("return",(0,n.t0)(n.t1));case 9:if(n.prev=9,n.t2=n.catch(1),n.t2.code!==_.b.errors.CALL_EXCEPTION){n.next=13;break}return n.abrupt("return",null);case 13:return n.abrupt("return",null);case 14:case"end":return n.stop()}}),n,this,[[1,9]])})))}},{key:"_getAddress",value:function(t,e){var n=Oo[String(t)];if(null==n&&wo.throwError("unsupported coin type: ".concat(t),_.b.errors.UNSUPPORTED_OPERATION,{operation:"getAddress(".concat(t,")")}),"eth"===n.ilk)return this.provider.formatter.address(e);var r=Object(b.a)(e);if(null!=n.p2pkh){var i=e.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(i){var o=parseInt(i[1],16);if(i[2].length===2*o&&o>=1&&o<=75)return Po(Object(b.b)([[n.p2pkh],"0x"+i[2]]))}}if(null!=n.p2sh){var s=e.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){var a=parseInt(s[1],16);if(s[2].length===2*a&&a>=1&&a<=75)return Po(Object(b.b)([[n.p2sh],"0x"+s[2]]))}}if(null!=n.prefix){var u=r[1],c=r[0];if(0===c?20!==u&&32!==u&&(c=-1):c=-1,c>=0&&r.length===2+u&&u>=1&&u<=75){var h=ho.a.toWords(r.slice(2));return h.unshift(c),ho.a.encode(n.prefix,h)}}return null}},{key:"getAddress",value:function(t){return bo(this,void 0,void 0,y.a.mark((function e(){var n,r,i,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==t&&(t=60),60!==t){e.next=17;break}return e.prev=2,n={to:this.address,data:"0x3b3b57de"+Ji(this.name).substring(2)},e.next=6,this.provider.call(n);case 6:if("0x"!==(r=e.sent)&&r!==ki){e.next=9;break}return e.abrupt("return",null);case 9:return e.abrupt("return",this.provider.formatter.callAddress(r));case 12:if(e.prev=12,e.t0=e.catch(2),e.t0.code!==_.b.errors.CALL_EXCEPTION){e.next=16;break}return e.abrupt("return",null);case 16:throw e.t0;case 17:return e.next=19,this._fetchBytes("0xf1cb7e06",Co(t));case 19:if(null!=(i=e.sent)&&"0x"!==i){e.next=22;break}return e.abrupt("return",null);case 22:return null==(o=this._getAddress(t,i))&&wo.throwError("invalid or unsupported coin data",_.b.errors.UNSUPPORTED_OPERATION,{operation:"getAddress(".concat(t,")"),coinType:t,data:i}),e.abrupt("return",o);case 25:case"end":return e.stop()}}),e,this,[[2,12]])})))}},{key:"getAvatar",value:function(){return bo(this,void 0,void 0,y.a.mark((function t(){var e,n,r,i,o,s,a,u,c,h,l,f,d,p;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=[],t.prev=1,t.next=4,this.getText("avatar");case 4:if(null!=(n=t.sent)){t.next=7;break}return t.abrupt("return",null);case 7:r=0;case 8:if(!(r<Io.length)){t.next=77;break}if(null!=(i=n.match(Io[r]))){t.next=12;break}return t.abrupt("continue",74);case 12:t.t0=i[1],t.next="https"===t.t0?15:"data"===t.t0?17:"ipfs"===t.t0?19:"erc721"===t.t0||"erc1155"===t.t0?21:74;break;case 15:return e.push({type:"url",content:n}),t.abrupt("return",{linkage:e,url:n});case 17:return e.push({type:"data",content:n}),t.abrupt("return",{linkage:e,url:n});case 19:return e.push({type:"ipfs",content:n}),t.abrupt("return",{linkage:e,url:"https://gateway.ipfs.io/ipfs/".concat(n.substring(7))});case 21:if(o="erc721"===i[1]?"0xc87b56dd":"0x0e89341c",e.push({type:i[1],content:n}),t.t1=this._resolvedAddress,t.t1){t.next=28;break}return t.next=27,this.getAddress();case 27:t.t1=t.sent;case 28:if(s=t.t1,2===(a=(i[2]||"").split("/")).length){t.next=32;break}return t.abrupt("return",null);case 32:return t.next=34,this.provider.formatter.address(a[0]);case 34:if(u=t.sent,c=Object(b.h)(C.from(a[1]).toHexString(),32),"erc721"!==i[1]){t.next=47;break}return t.t2=this.provider.formatter,t.next=40,this.provider.call({to:u,data:Object(b.c)(["0x6352211e",c])});case 40:if(t.t3=t.sent,h=t.t2.callAddress.call(t.t2,t.t3),s===h){t.next=44;break}return t.abrupt("return",null);case 44:e.push({type:"owner",content:h}),t.next=56;break;case 47:if("erc1155"!==i[1]){t.next=56;break}return t.t4=C,t.next=51,this.provider.call({to:u,data:Object(b.c)(["0x00fdd58e",Object(b.h)(s,32),c])});case 51:if(t.t5=t.sent,!(l=t.t4.from.call(t.t4,t.t5)).isZero()){t.next=55;break}return t.abrupt("return",null);case 55:e.push({type:"balance",content:l.toString()});case 56:return f={to:this.provider.formatter.address(a[0]),data:Object(b.c)([o,c])},t.t6=Ro,t.next=60,this.provider.call(f);case 60:if(t.t7=t.sent,null!=(d=(0,t.t6)(t.t7))){t.next=64;break}return t.abrupt("return",null);case 64:return e.push({type:"metadata-url",content:d}),"erc1155"===i[1]&&(d=d.replace("{id}",c.substring(2))),t.next=68,ao(d);case 68:if((p=t.sent)&&"string"===typeof p.image&&p.image.match(/^https:\/\//i)){t.next=71;break}return t.abrupt("return",null);case 71:return e.push({type:"metadata",content:JSON.stringify(p)}),e.push({type:"url",content:p.image}),t.abrupt("return",{linkage:e,url:p.image});case 74:r++,t.next=8;break;case 77:t.next=81;break;case 79:t.prev=79,t.t8=t.catch(1);case 81:return t.abrupt("return",null);case 82:case"end":return t.stop()}}),t,this,[[1,79]])})))}},{key:"getContentHash",value:function(){return bo(this,void 0,void 0,y.a.mark((function t(){var e,n,r,i;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._fetchBytes("0xbc1c58d1");case 2:if(null!=(e=t.sent)&&"0x"!==e){t.next=5;break}return t.abrupt("return",null);case 5:if(!(n=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/))){t.next=10;break}if(r=parseInt(n[3],16),n[4].length!==2*r){t.next=10;break}return t.abrupt("return","ipfs://"+gr.encode("0x"+n[1]));case 10:if(!(i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/))){t.next=14;break}if(64!==i[1].length){t.next=14;break}return t.abrupt("return","bzz://"+i[1]);case 14:return t.abrupt("return",wo.throwError("invalid or unsupported content hash data",_.b.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e}));case 15:case"end":return t.stop()}}),t,this)})))}},{key:"getText",value:function(t){return bo(this,void 0,void 0,y.a.mark((function e(){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ot(t),(n=Object(b.b)([Co(64),Co(n.length),n])).length%32!==0&&(n=Object(b.b)([n,Object(b.h)("0x",32-t.length%32)])),e.next=5,this._fetchBytes("0x59d1d43c",Object(b.i)(n));case 5:if(null!=(r=e.sent)&&"0x"!==r){e.next=8;break}return e.abrupt("return",null);case 8:return e.abrupt("return",Rt(r));case 9:case"end":return e.stop()}}),e,this)})))}}]),t}(),Lo=null,Do=1,Fo=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t){var r;if(Object(v.a)(this,n),wo.checkNew(this instanceof n?this.constructor:void 0,ze),(r=e.call(this))._events=[],r._emitted={block:-2},r.formatter=(this instanceof n?this.constructor:void 0).getFormatter(),D(Object(h.a)(r),"anyNetwork","any"===t),r.anyNetwork&&(t=r.detectNetwork()),t instanceof Promise)r._networkPromise=t,t.catch((function(t){})),r._ready().catch((function(t){}));else{var i=F(this instanceof n?this.constructor:void 0,"getNetwork")(t);i?(D(Object(h.a)(r),"_network",i),r.emit("network",i,null)):wo.throwArgumentError("invalid network","network",t)}return r._maxInternalBlockNumber=-1024,r._lastBlockNumber=-2,r._pollingInterval=4e3,r._fastQueryDate=0,r}return Object(g.a)(n,[{key:"_ready",value:function(){return bo(this,void 0,void 0,y.a.mark((function t(){var e;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=this._network){t.next=17;break}if(e=null,!this._networkPromise){t.next=11;break}return t.prev=3,t.next=6,this._networkPromise;case 6:e=t.sent,t.next=11;break;case 9:t.prev=9,t.t0=t.catch(3);case 11:if(null!=e){t.next=15;break}return t.next=14,this.detectNetwork();case 14:e=t.sent;case 15:e||wo.throwError("no network detected",_.b.errors.UNKNOWN_ERROR,{}),null==this._network&&(this.anyNetwork?this._network=e:D(this,"_network",e),this.emit("network",e,null));case 17:return t.abrupt("return",this._network);case 18:case"end":return t.stop()}}),t,this,[[3,9]])})))}},{key:"ready",get:function(){var t=this;return uo((function(){return t._ready().then((function(t){return t}),(function(t){if(t.code!==_.b.errors.NETWORK_ERROR||"noNetwork"!==t.event)throw t}))}))}},{key:"_getInternalBlockNumber",value:function(t){return bo(this,void 0,void 0,y.a.mark((function e(){var n,r,i,o,s=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._ready();case 2:if(!(t>0)){e.next=20;break}case 3:if(!this._internalBlockNumber){e.next=20;break}return n=this._internalBlockNumber,e.prev=5,e.next=8,n;case 8:if(r=e.sent,!(Eo()-r.respTime<=t)){e.next=11;break}return e.abrupt("return",r.blockNumber);case 11:return e.abrupt("break",20);case 14:if(e.prev=14,e.t0=e.catch(5),this._internalBlockNumber!==n){e.next=18;break}return e.abrupt("break",20);case 18:e.next=3;break;case 20:return i=Eo(),o=j({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then((function(t){return null}),(function(t){return t}))}).then((function(t){var e=t.blockNumber,n=t.networkError;if(n)throw s._internalBlockNumber===o&&(s._internalBlockNumber=null),n;var r=Eo();return(e=C.from(e).toNumber())<s._maxInternalBlockNumber&&(e=s._maxInternalBlockNumber),s._maxInternalBlockNumber=e,s._setFastBlockNumber(e),{blockNumber:e,reqTime:i,respTime:r}})),this._internalBlockNumber=o,o.catch((function(t){s._internalBlockNumber===o&&(s._internalBlockNumber=null)})),e.next=26,o;case 26:return e.abrupt("return",e.sent.blockNumber);case 27:case"end":return e.stop()}}),e,this,[[5,14]])})))}},{key:"poll",value:function(){return bo(this,void 0,void 0,y.a.mark((function t(){var e,n,r,i,o=this;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Do++,n=[],r=null,t.prev=3,t.next=6,this._getInternalBlockNumber(100+this.pollingInterval/2);case 6:r=t.sent,t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(3),this.emit("error",t.t0),t.abrupt("return");case 13:if(this._setFastBlockNumber(r),this.emit("poll",e,r),r!==this._lastBlockNumber){t.next=18;break}return this.emit("didPoll",e),t.abrupt("return");case 18:if(-2===this._emitted.block&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)wo.warn("network block skew detected; skipping block events (emitted=".concat(this._emitted.block," blockNumber").concat(r,")")),this.emit("error",wo.makeError("network block skew detected",_.b.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(i=this._emitted.block+1;i<=r;i++)this.emit("block",i);return this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach((function(t){if("block"!==t){var e=o._emitted[t];"pending"!==e&&r-e>12&&delete o._emitted[t]}}))),-2===this._lastBlockNumber&&(this._lastBlockNumber=r-1),this._events.forEach((function(t){switch(t.type){case"tx":var e=t.hash,i=o.getTransactionReceipt(e).then((function(t){return t&&null!=t.blockNumber?(o._emitted["t:"+e]=t.blockNumber,o.emit(e,t),null):null})).catch((function(t){o.emit("error",t)}));n.push(i);break;case"filter":var s=t.filter;s.fromBlock=o._lastBlockNumber+1,s.toBlock=r;var a=o.getLogs(s).then((function(t){0!==t.length&&t.forEach((function(t){o._emitted["b:"+t.blockHash]=t.blockNumber,o._emitted["t:"+t.transactionHash]=t.blockNumber,o.emit(s,t)}))})).catch((function(t){o.emit("error",t)}));n.push(a)}})),this._lastBlockNumber=r,Promise.all(n).then((function(){o.emit("didPoll",e)})).catch((function(t){o.emit("error",t)})),t.abrupt("return");case 26:case"end":return t.stop()}}),t,this,[[3,9]])})))}},{key:"resetEventsBlock",value:function(t){this._lastBlockNumber=t-1,this.polling&&this.poll()}},{key:"network",get:function(){return this._network}},{key:"detectNetwork",value:function(){return bo(this,void 0,void 0,y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",wo.throwError("provider does not support network detection",_.b.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"}));case 1:case"end":return t.stop()}}),t)})))}},{key:"getNetwork",value:function(){return bo(this,void 0,void 0,y.a.mark((function t(){var e,n,r;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._ready();case 2:return e=t.sent,t.next=5,this.detectNetwork();case 5:if(n=t.sent,e.chainId===n.chainId){t.next=23;break}if(!this.anyNetwork){t.next=20;break}return this._network=n,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",n,e),t.next=19,So(0);case 19:return t.abrupt("return",this._network);case 20:throw r=wo.makeError("underlying network changed",_.b.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:n}),this.emit("error",r),r;case 23:return t.abrupt("return",e);case 24:case"end":return t.stop()}}),t,this)})))}},{key:"blockNumber",get:function(){var t=this;return this._getInternalBlockNumber(100+this.pollingInterval/2).then((function(e){t._setFastBlockNumber(e)}),(function(t){})),null!=this._fastBlockNumber?this._fastBlockNumber:-1}},{key:"polling",get:function(){return null!=this._poller},set:function(t){var e=this;t&&!this._poller?(this._poller=setInterval((function(){e.poll()}),this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout((function(){e.poll(),e._bootstrapPoll=setTimeout((function(){e._poller||e.poll(),e._bootstrapPoll=null}),e.pollingInterval)}),0))):!t&&this._poller&&(clearInterval(this._poller),this._poller=null)}},{key:"pollingInterval",get:function(){return this._pollingInterval},set:function(t){var e=this;if("number"!==typeof t||t<=0||parseInt(String(t))!=t)throw new Error("invalid polling interval");this._pollingInterval=t,this._poller&&(clearInterval(this._poller),this._poller=setInterval((function(){e.poll()}),this._pollingInterval))}},{key:"_getFastBlockNumber",value:function(){var t=this,e=Eo();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then((function(e){return(null==t._fastBlockNumber||e>t._fastBlockNumber)&&(t._fastBlockNumber=e),t._fastBlockNumber}))),this._fastBlockNumberPromise}},{key:"_setFastBlockNumber",value:function(t){null!=this._fastBlockNumber&&t<this._fastBlockNumber||(this._fastQueryDate=Eo(),(null==this._fastBlockNumber||t>this._fastBlockNumber)&&(this._fastBlockNumber=t,this._fastBlockNumberPromise=Promise.resolve(t)))}},{key:"waitForTransaction",value:function(t,e,n){return bo(this,void 0,void 0,y.a.mark((function r(){return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this._waitForTransaction(t,null==e?1:e,n||0,null));case 1:case"end":return r.stop()}}),r,this)})))}},{key:"_waitForTransaction",value:function(t,e,n,r){return bo(this,void 0,void 0,y.a.mark((function i(){var o,s=this;return y.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.getTransactionReceipt(t);case 2:if(!(((o=i.sent)?o.confirmations:0)>=e)){i.next=5;break}return i.abrupt("return",o);case 5:return i.abrupt("return",new Promise((function(i,o){var a=[],u=!1,c=function(){return!!u||(u=!0,a.forEach((function(t){t()})),!1)},h=function(t){t.confirmations<e||c()||i(t)};if(s.on(t,h),a.push((function(){s.removeListener(t,h)})),r){var l=r.startBlock,f=null,d=function n(i){return bo(s,void 0,void 0,y.a.mark((function s(){var a=this;return y.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(!u){s.next=2;break}return s.abrupt("return");case 2:return s.next=4,So(1e3);case 4:this.getTransactionCount(r.from).then((function(s){return bo(a,void 0,void 0,y.a.mark((function a(){var h,d,p,v,g,m;return y.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!u){a.next=2;break}return a.abrupt("return");case 2:if(!(s<=r.nonce)){a.next=6;break}l=i,a.next=41;break;case 6:return a.next=8,this.getTransaction(t);case 8:if(!(h=a.sent)||null==h.blockNumber){a.next=11;break}return a.abrupt("return");case 11:null==f&&(f=l-3)<r.startBlock&&(f=r.startBlock);case 12:if(!(f<=i)){a.next=41;break}if(!u){a.next=15;break}return a.abrupt("return");case 15:return a.next=17,this.getBlockWithTransactions(f);case 17:d=a.sent,p=0;case 19:if(!(p<d.transactions.length)){a.next=38;break}if((v=d.transactions[p]).hash!==t){a.next=23;break}return a.abrupt("return");case 23:if(v.from!==r.from||v.nonce!==r.nonce){a.next=35;break}if(!u){a.next=26;break}return a.abrupt("return");case 26:return a.next=28,this.waitForTransaction(v.hash,e);case 28:if(g=a.sent,!c()){a.next=31;break}return a.abrupt("return");case 31:return m="replaced",v.data===r.data&&v.to===r.to&&v.value.eq(r.value)?m="repriced":"0x"===v.data&&v.from===v.to&&v.value.isZero()&&(m="cancelled"),o(wo.makeError("transaction was replaced",_.b.errors.TRANSACTION_REPLACED,{cancelled:"replaced"===m||"cancelled"===m,reason:m,replacement:this._wrapTransaction(v),hash:t,receipt:g})),a.abrupt("return");case 35:p++,a.next=19;break;case 38:f++,a.next=12;break;case 41:if(!u){a.next=43;break}return a.abrupt("return");case 43:this.once("block",n);case 44:case"end":return a.stop()}}),a,this)})))}),(function(t){u||a.once("block",n)}));case 5:case"end":return s.stop()}}),s,this)})))};if(u)return;s.once("block",d),a.push((function(){s.removeListener("block",d)}))}if("number"===typeof n&&n>0){var p=setTimeout((function(){c()||o(wo.makeError("timeout exceeded",_.b.errors.TIMEOUT,{timeout:n}))}),n);p.unref&&p.unref(),a.push((function(){clearTimeout(p)}))}})));case 6:case"end":return i.stop()}}),i,this)})))}},{key:"getBlockNumber",value:function(){return bo(this,void 0,void 0,y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this._getInternalBlockNumber(0));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"getGasPrice",value:function(){return bo(this,void 0,void 0,y.a.mark((function t(){var e;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getNetwork();case 2:return t.next=4,this.perform("getGasPrice",{});case 4:return e=t.sent,t.prev=5,t.abrupt("return",C.from(e));case 9:return t.prev=9,t.t0=t.catch(5),t.abrupt("return",wo.throwError("bad result from backend",_.b.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t.t0}));case 12:case"end":return t.stop()}}),t,this,[[5,9]])})))}},{key:"getBalance",value:function(t,e){return bo(this,void 0,void 0,y.a.mark((function n(){var r,i;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getNetwork();case 2:return n.next=4,j({address:this._getAddress(t),blockTag:this._getBlockTag(e)});case 4:return r=n.sent,n.next=7,this.perform("getBalance",r);case 7:return i=n.sent,n.prev=8,n.abrupt("return",C.from(i));case 12:return n.prev=12,n.t0=n.catch(8),n.abrupt("return",wo.throwError("bad result from backend",_.b.errors.SERVER_ERROR,{method:"getBalance",params:r,result:i,error:n.t0}));case 15:case"end":return n.stop()}}),n,this,[[8,12]])})))}},{key:"getTransactionCount",value:function(t,e){return bo(this,void 0,void 0,y.a.mark((function n(){var r,i;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getNetwork();case 2:return n.next=4,j({address:this._getAddress(t),blockTag:this._getBlockTag(e)});case 4:return r=n.sent,n.next=7,this.perform("getTransactionCount",r);case 7:return i=n.sent,n.prev=8,n.abrupt("return",C.from(i).toNumber());case 12:return n.prev=12,n.t0=n.catch(8),n.abrupt("return",wo.throwError("bad result from backend",_.b.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:i,error:n.t0}));case 15:case"end":return n.stop()}}),n,this,[[8,12]])})))}},{key:"getCode",value:function(t,e){return bo(this,void 0,void 0,y.a.mark((function n(){var r,i;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getNetwork();case 2:return n.next=4,j({address:this._getAddress(t),blockTag:this._getBlockTag(e)});case 4:return r=n.sent,n.next=7,this.perform("getCode",r);case 7:return i=n.sent,n.prev=8,n.abrupt("return",Object(b.i)(i));case 12:return n.prev=12,n.t0=n.catch(8),n.abrupt("return",wo.throwError("bad result from backend",_.b.errors.SERVER_ERROR,{method:"getCode",params:r,result:i,error:n.t0}));case 15:case"end":return n.stop()}}),n,this,[[8,12]])})))}},{key:"getStorageAt",value:function(t,e,n){return bo(this,void 0,void 0,y.a.mark((function r(){var i,o;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.getNetwork();case 2:return r.next=4,j({address:this._getAddress(t),blockTag:this._getBlockTag(n),position:Promise.resolve(e).then((function(t){return Object(b.g)(t)}))});case 4:return i=r.sent,r.next=7,this.perform("getStorageAt",i);case 7:return o=r.sent,r.prev=8,r.abrupt("return",Object(b.i)(o));case 12:return r.prev=12,r.t0=r.catch(8),r.abrupt("return",wo.throwError("bad result from backend",_.b.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:o,error:r.t0}));case 15:case"end":return r.stop()}}),r,this,[[8,12]])})))}},{key:"_wrapTransaction",value:function(t,e,n){var r=this;if(null!=e&&32!==Object(b.d)(e))throw new Error("invalid response - sendTransaction");var i=t;return null!=e&&t.hash!==e&&wo.throwError("Transaction hash mismatch from Provider.sendTransaction.",_.b.errors.UNKNOWN_ERROR,{expectedHash:t.hash,returnedHash:e}),i.wait=function(e,i){return bo(r,void 0,void 0,y.a.mark((function r(){var o,s;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return null==e&&(e=1),null==i&&(i=0),o=void 0,0!==e&&null!=n&&(o={data:t.data,from:t.from,nonce:t.nonce,to:t.to,value:t.value,startBlock:n}),r.next=6,this._waitForTransaction(t.hash,e,i,o);case 6:if(null!=(s=r.sent)||0!==e){r.next=9;break}return r.abrupt("return",null);case 9:return this._emitted["t:"+t.hash]=s.blockNumber,0===s.status&&wo.throwError("transaction failed",_.b.errors.CALL_EXCEPTION,{transactionHash:t.hash,transaction:t,receipt:s}),r.abrupt("return",s);case 12:case"end":return r.stop()}}),r,this)})))},i}},{key:"sendTransaction",value:function(t){return bo(this,void 0,void 0,y.a.mark((function e(){var n,r,i,o;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNetwork();case 2:return e.next=4,Promise.resolve(t).then((function(t){return Object(b.i)(t)}));case 4:return n=e.sent,null==(r=this.formatter.transaction(t)).confirmations&&(r.confirmations=0),e.next=9,this._getInternalBlockNumber(100+2*this.pollingInterval);case 9:return i=e.sent,e.prev=10,e.next=13,this.perform("sendTransaction",{signedTransaction:n});case 13:return o=e.sent,e.abrupt("return",this._wrapTransaction(r,o,i));case 17:throw e.prev=17,e.t0=e.catch(10),e.t0.transaction=r,e.t0.transactionHash=r.hash,e.t0;case 22:case"end":return e.stop()}}),e,this,[[10,17]])})))}},{key:"_getTransactionRequest",value:function(t){return bo(this,void 0,void 0,y.a.mark((function e(){var n,r,i=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return n=e.sent,r={},["from","to"].forEach((function(t){null!=n[t]&&(r[t]=Promise.resolve(n[t]).then((function(t){return t?i._getAddress(t):null})))})),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach((function(t){null!=n[t]&&(r[t]=Promise.resolve(n[t]).then((function(t){return t?C.from(t):null})))})),["type"].forEach((function(t){null!=n[t]&&(r[t]=Promise.resolve(n[t]).then((function(t){return null!=t?t:null})))})),n.accessList&&(r.accessList=this.formatter.accessList(n.accessList)),["data"].forEach((function(t){null!=n[t]&&(r[t]=Promise.resolve(n[t]).then((function(t){return t?Object(b.i)(t):null})))})),e.t0=this.formatter,e.next=12,j(r);case 12:return e.t1=e.sent,e.abrupt("return",e.t0.transactionRequest.call(e.t0,e.t1));case 14:case"end":return e.stop()}}),e,this)})))}},{key:"_getFilter",value:function(t){return bo(this,void 0,void 0,y.a.mark((function e(){var n,r=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return t=e.sent,n={},null!=t.address&&(n.address=this._getAddress(t.address)),["blockHash","topics"].forEach((function(e){null!=t[e]&&(n[e]=t[e])})),["fromBlock","toBlock"].forEach((function(e){null!=t[e]&&(n[e]=r._getBlockTag(t[e]))})),e.t0=this.formatter,e.next=10,j(n);case 10:return e.t1=e.sent,e.abrupt("return",e.t0.filter.call(e.t0,e.t1));case 12:case"end":return e.stop()}}),e,this)})))}},{key:"call",value:function(t,e){return bo(this,void 0,void 0,y.a.mark((function n(){var r,i;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getNetwork();case 2:return n.next=4,j({transaction:this._getTransactionRequest(t),blockTag:this._getBlockTag(e)});case 4:return r=n.sent,n.next=7,this.perform("call",r);case 7:return i=n.sent,n.prev=8,n.abrupt("return",Object(b.i)(i));case 12:return n.prev=12,n.t0=n.catch(8),n.abrupt("return",wo.throwError("bad result from backend",_.b.errors.SERVER_ERROR,{method:"call",params:r,result:i,error:n.t0}));case 15:case"end":return n.stop()}}),n,this,[[8,12]])})))}},{key:"estimateGas",value:function(t){return bo(this,void 0,void 0,y.a.mark((function e(){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNetwork();case 2:return e.next=4,j({transaction:this._getTransactionRequest(t)});case 4:return n=e.sent,e.next=7,this.perform("estimateGas",n);case 7:return r=e.sent,e.prev=8,e.abrupt("return",C.from(r));case 12:return e.prev=12,e.t0=e.catch(8),e.abrupt("return",wo.throwError("bad result from backend",_.b.errors.SERVER_ERROR,{method:"estimateGas",params:n,result:r,error:e.t0}));case 15:case"end":return e.stop()}}),e,this,[[8,12]])})))}},{key:"_getAddress",value:function(t){return bo(this,void 0,void 0,y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return"string"!==typeof(t=e.sent)&&wo.throwArgumentError("invalid address or ENS name","name",t),e.next=6,this.resolveName(t);case 6:return null==(n=e.sent)&&wo.throwError("ENS name not configured",_.b.errors.UNSUPPORTED_OPERATION,{operation:"resolveName(".concat(JSON.stringify(t),")")}),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})))}},{key:"_getBlock",value:function(t,e){return bo(this,void 0,void 0,y.a.mark((function n(){var r,i,o=this;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getNetwork();case 2:return n.next=4,t;case 4:if(t=n.sent,r=-128,i={includeTransactions:!!e},!Object(b.l)(t,32)){n.next=11;break}i.blockHash=t,n.next=21;break;case 11:return n.prev=11,n.next=14,this._getBlockTag(t);case 14:i.blockTag=n.sent,Object(b.l)(i.blockTag)&&(r=parseInt(i.blockTag.substring(2),16)),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(11),wo.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",t);case 21:return n.abrupt("return",uo((function(){return bo(o,void 0,void 0,y.a.mark((function t(){var n,o,s,a,u,c,h=this;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.perform("getBlock",i);case 2:if(null!=(n=t.sent)){t.next=11;break}if(null==i.blockHash){t.next=7;break}if(null!=this._emitted["b:"+i.blockHash]){t.next=7;break}return t.abrupt("return",null);case 7:if(null==i.blockTag){t.next=10;break}if(!(r>this._emitted.block)){t.next=10;break}return t.abrupt("return",null);case 10:return t.abrupt("return",void 0);case 11:if(!e){t.next=34;break}o=null,s=0;case 14:if(!(s<n.transactions.length)){t.next=31;break}if(null!=(a=n.transactions[s]).blockNumber){t.next=20;break}a.confirmations=0,t.next=28;break;case 20:if(null!=a.confirmations){t.next=28;break}if(null!=o){t.next=25;break}return t.next=24,this._getInternalBlockNumber(100+2*this.pollingInterval);case 24:o=t.sent;case 25:(u=o-a.blockNumber+1)<=0&&(u=1),a.confirmations=u;case 28:s++,t.next=14;break;case 31:return(c=this.formatter.blockWithTransactions(n)).transactions=c.transactions.map((function(t){return h._wrapTransaction(t)})),t.abrupt("return",c);case 34:return t.abrupt("return",this.formatter.block(n));case 35:case"end":return t.stop()}}),t,this)})))}),{oncePoll:this}));case 22:case"end":return n.stop()}}),n,this,[[11,18]])})))}},{key:"getBlock",value:function(t){return this._getBlock(t,!1)}},{key:"getBlockWithTransactions",value:function(t){return this._getBlock(t,!0)}},{key:"getTransaction",value:function(t){return bo(this,void 0,void 0,y.a.mark((function e(){var n,r=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNetwork();case 2:return e.next=4,t;case 4:return t=e.sent,n={transactionHash:this.formatter.hash(t,!0)},e.abrupt("return",uo((function(){return bo(r,void 0,void 0,y.a.mark((function e(){var r,i,o,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.perform("getTransaction",n);case 2:if(null!=(r=e.sent)){e.next=7;break}if(null!=this._emitted["t:"+t]){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",void 0);case 7:if(null!=(i=this.formatter.transactionResponse(r)).blockNumber){e.next=12;break}i.confirmations=0,e.next=19;break;case 12:if(null!=i.confirmations){e.next=19;break}return e.next=15,this._getInternalBlockNumber(100+2*this.pollingInterval);case 15:o=e.sent,(s=o-i.blockNumber+1)<=0&&(s=1),i.confirmations=s;case 19:return e.abrupt("return",this._wrapTransaction(i));case 20:case"end":return e.stop()}}),e,this)})))}),{oncePoll:this}));case 7:case"end":return e.stop()}}),e,this)})))}},{key:"getTransactionReceipt",value:function(t){return bo(this,void 0,void 0,y.a.mark((function e(){var n,r=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNetwork();case 2:return e.next=4,t;case 4:return t=e.sent,n={transactionHash:this.formatter.hash(t,!0)},e.abrupt("return",uo((function(){return bo(r,void 0,void 0,y.a.mark((function e(){var r,i,o,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.perform("getTransactionReceipt",n);case 2:if(null!=(r=e.sent)){e.next=7;break}if(null!=this._emitted["t:"+t]){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",void 0);case 7:if(null!=r.blockHash){e.next=9;break}return e.abrupt("return",void 0);case 9:if(null!=(i=this.formatter.receipt(r)).blockNumber){e.next=14;break}i.confirmations=0,e.next=21;break;case 14:if(null!=i.confirmations){e.next=21;break}return e.next=17,this._getInternalBlockNumber(100+2*this.pollingInterval);case 17:o=e.sent,(s=o-i.blockNumber+1)<=0&&(s=1),i.confirmations=s;case 21:return e.abrupt("return",i);case 22:case"end":return e.stop()}}),e,this)})))}),{oncePoll:this}));case 7:case"end":return e.stop()}}),e,this)})))}},{key:"getLogs",value:function(t){return bo(this,void 0,void 0,y.a.mark((function e(){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNetwork();case 2:return e.next=4,j({filter:this._getFilter(t)});case 4:return n=e.sent,e.next=7,this.perform("getLogs",n);case 7:return(r=e.sent).forEach((function(t){null==t.removed&&(t.removed=!1)})),e.abrupt("return",po.arrayOf(this.formatter.filterLog.bind(this.formatter))(r));case 10:case"end":return e.stop()}}),e,this)})))}},{key:"getEtherPrice",value:function(){return bo(this,void 0,void 0,y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getNetwork();case 2:return t.abrupt("return",this.perform("getEtherPrice",{}));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"_getBlockTag",value:function(t){return bo(this,void 0,void 0,y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(!("number"===typeof(t=e.sent)&&t<0)){e.next=11;break}return t%1&&wo.throwArgumentError("invalid BlockTag","blockTag",t),e.next=7,this._getInternalBlockNumber(100+2*this.pollingInterval);case 7:return n=e.sent,(n+=t)<0&&(n=0),e.abrupt("return",this.formatter.blockTag(n));case 11:return e.abrupt("return",this.formatter.blockTag(t));case 12:case"end":return e.stop()}}),e,this)})))}},{key:"getResolver",value:function(t){return bo(this,void 0,void 0,y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._getResolver(t);case 3:if(null!=(n=e.sent)){e.next=6;break}return e.abrupt("return",null);case 6:return e.abrupt("return",new No(this,n,t));case 9:if(e.prev=9,e.t0=e.catch(0),e.t0.code!==_.b.errors.CALL_EXCEPTION){e.next=13;break}return e.abrupt("return",null);case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,this,[[0,9]])})))}},{key:"_getResolver",value:function(t){return bo(this,void 0,void 0,y.a.mark((function e(){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNetwork();case 2:return(n=e.sent).ensAddress||wo.throwError("network does not support ENS",_.b.errors.UNSUPPORTED_OPERATION,{operation:"ENS",network:n.name}),r={to:n.ensAddress,data:"0x0178b8bf"+Ji(t).substring(2)},e.prev=5,e.t0=this.formatter,e.next=9,this.call(r);case 9:return e.t1=e.sent,e.abrupt("return",e.t0.callAddress.call(e.t0,e.t1));case 13:if(e.prev=13,e.t2=e.catch(5),e.t2.code!==_.b.errors.CALL_EXCEPTION){e.next=17;break}return e.abrupt("return",null);case 17:throw e.t2;case 18:case"end":return e.stop()}}),e,this,[[5,13]])})))}},{key:"resolveName",value:function(t){return bo(this,void 0,void 0,y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return t=e.sent,e.prev=3,e.abrupt("return",Promise.resolve(this.formatter.address(t)));case 7:if(e.prev=7,e.t0=e.catch(3),!Object(b.l)(t)){e.next=11;break}throw e.t0;case 11:return"string"!==typeof t&&wo.throwArgumentError("invalid ENS name","name",t),e.next=14,this.getResolver(t);case 14:if(n=e.sent){e.next=17;break}return e.abrupt("return",null);case 17:return e.next=19,n.getAddress();case 19:return e.abrupt("return",e.sent);case 20:case"end":return e.stop()}}),e,this,[[3,7]])})))}},{key:"lookupAddress",value:function(t){return bo(this,void 0,void 0,y.a.mark((function e(){var n,r,i,o,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return t=e.sent,t=this.formatter.address(t),n=t.substring(2).toLowerCase()+".addr.reverse",e.next=7,this._getResolver(n);case 7:if(r=e.sent){e.next=10;break}return e.abrupt("return",null);case 10:return e.t0=b.a,e.next=13,this.call({to:r,data:"0x691f3431"+Ji(n).substring(2)});case 13:if(e.t1=e.sent,!((i=(0,e.t0)(e.t1)).length<32)&&C.from(i.slice(0,32)).eq(32)){e.next=17;break}return e.abrupt("return",null);case 17:if(!((i=i.slice(32)).length<32)){e.next=20;break}return e.abrupt("return",null);case 20:if(o=C.from(i.slice(0,32)).toNumber(),i=i.slice(32),!(o>i.length)){e.next=24;break}return e.abrupt("return",null);case 24:return s=Rt(i.slice(0,o)),e.next=27,this.resolveName(s);case 27:if(e.sent==t){e.next=30;break}return e.abrupt("return",null);case 30:return e.abrupt("return",s);case 31:case"end":return e.stop()}}),e,this)})))}},{key:"getAvatar",value:function(t){return bo(this,void 0,void 0,y.a.mark((function e(){var n,r,i,o,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,!Object(b.l)(t)){e.next=12;break}return r=this.formatter.address(t),i=r.substring(2).toLowerCase()+".addr.reverse",e.next=6,this._getResolver(i);case 6:if(o=e.sent){e.next=9;break}return e.abrupt("return",null);case 9:n=new No(this,o,"_",r),e.next=15;break;case 12:return e.next=14,this.getResolver(t);case 14:n=e.sent;case 15:return e.next=17,n.getAvatar();case 17:if(null!=(s=e.sent)){e.next=20;break}return e.abrupt("return",null);case 20:return e.abrupt("return",s.url);case 21:case"end":return e.stop()}}),e,this)})))}},{key:"perform",value:function(t,e){return wo.throwError(t+" not implemented",_.b.errors.NOT_IMPLEMENTED,{operation:t})}},{key:"_startEvent",value:function(t){this.polling=this._events.filter((function(t){return t.pollable()})).length>0}},{key:"_stopEvent",value:function(t){this.polling=this._events.filter((function(t){return t.pollable()})).length>0}},{key:"_addEventListener",value:function(t,e,n){var r=new Ao(To(t),e,n);return this._events.push(r),this._startEvent(r),this}},{key:"on",value:function(t,e){return this._addEventListener(t,e,!1)}},{key:"once",value:function(t,e){return this._addEventListener(t,e,!0)}},{key:"emit",value:function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=!1,s=[],a=To(t);return this._events=this._events.filter((function(t){return t.tag!==a||(setTimeout((function(){t.listener.apply(e,r)}),0),o=!0,!t.once||(s.push(t),!1))})),s.forEach((function(t){e._stopEvent(t)})),o}},{key:"listenerCount",value:function(t){if(!t)return this._events.length;var e=To(t);return this._events.filter((function(t){return t.tag===e})).length}},{key:"listeners",value:function(t){if(null==t)return this._events.map((function(t){return t.listener}));var e=To(t);return this._events.filter((function(t){return t.tag===e})).map((function(t){return t.listener}))}},{key:"off",value:function(t,e){var n=this;if(null==e)return this.removeAllListeners(t);var r=[],i=!1,o=To(t);return this._events=this._events.filter((function(t){return t.tag!==o||t.listener!=e||(!!i||(i=!0,r.push(t),!1))})),r.forEach((function(t){n._stopEvent(t)})),this}},{key:"removeAllListeners",value:function(t){var e=this,n=[];if(null==t)n=this._events,this._events=[];else{var r=To(t);this._events=this._events.filter((function(t){return t.tag!==r||(n.push(t),!1)}))}return n.forEach((function(t){e._stopEvent(t)})),this}}],[{key:"getFormatter",value:function(){return null==Lo&&(Lo=new po),Lo}},{key:"getNetwork",value:function(t){return Li(null==t?"homestead":t)}}]),n}(ze),jo=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},Bo=new _.b(lo),Uo=["call","estimateGas"];function Vo(t,e,n){if("call"===t&&e.code===_.b.errors.SERVER_ERROR){var r=e.error;if(r&&r.message.match("reverted")&&Object(b.l)(r.data))return r.data;Bo.throwError("missing revert data in call exception",_.b.errors.CALL_EXCEPTION,{error:e,data:"0x"})}var i=e.message;e.code===_.b.errors.SERVER_ERROR&&e.error&&"string"===typeof e.error.message?i=e.error.message:"string"===typeof e.body?i=e.body:"string"===typeof e.responseText&&(i=e.responseText),i=(i||"").toLowerCase();var o=n.transaction||n.signedTransaction;throw i.match(/insufficient funds|base fee exceeds gas limit/)&&Bo.throwError("insufficient funds for intrinsic transaction cost",_.b.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:o}),i.match(/nonce too low/)&&Bo.throwError("nonce has already been used",_.b.errors.NONCE_EXPIRED,{error:e,method:t,transaction:o}),i.match(/replacement transaction underpriced/)&&Bo.throwError("replacement fee too low",_.b.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:o}),i.match(/only replay-protected/)&&Bo.throwError("legacy pre-eip-155 transactions not supported",_.b.errors.UNSUPPORTED_OPERATION,{error:e,method:t,transaction:o}),Uo.indexOf(t)>=0&&i.match(/gas required exceeds allowance|always failing transaction|execution reverted/)&&Bo.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",_.b.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:o}),e}function zo(t){return new Promise((function(e){setTimeout(e,t)}))}function Go(t){if(t.error){var e=new Error(t.error.message);throw e.code=t.error.code,e.data=t.error.data,e}return t.result}function Yo(t){return t?t.toLowerCase():t}var Wo={},Xo=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t,r,i){var o;if(Object(v.a)(this,n),Bo.checkNew(this instanceof n?this.constructor:void 0,n),o=e.call(this),t!==Wo)throw new Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");return D(Object(h.a)(o),"provider",r),null==i&&(i=0),"string"===typeof i?(D(Object(h.a)(o),"_address",o.provider.formatter.address(i)),D(Object(h.a)(o),"_index",null)):"number"===typeof i?(D(Object(h.a)(o),"_index",i),D(Object(h.a)(o),"_address",null)):Bo.throwArgumentError("invalid address or index","addressOrIndex",i),o}return Object(g.a)(n,[{key:"connect",value:function(t){return Bo.throwError("cannot alter JSON-RPC Signer connection",_.b.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}},{key:"connectUnchecked",value:function(){return new Ho(Wo,this.provider,this._address||this._index)}},{key:"getAddress",value:function(){var t=this;return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then((function(e){return e.length<=t._index&&Bo.throwError("unknown account #"+t._index,_.b.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),t.provider.formatter.address(e[t._index])}))}},{key:"sendUncheckedTransaction",value:function(t){var e=this;t=U(t);var n=this.getAddress().then((function(t){return t&&(t=t.toLowerCase()),t}));if(null==t.gasLimit){var r=U(t);r.from=n,t.gasLimit=this.provider.estimateGas(r)}return null!=t.to&&(t.to=Promise.resolve(t.to).then((function(t){return jo(e,void 0,void 0,y.a.mark((function e(){var n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,this.provider.resolveName(t);case 4:return null==(n=e.sent)&&Bo.throwArgumentError("provided ENS name resolves to null","tx.to",t),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})))}))),j({tx:j(t),sender:n}).then((function(n){var r=n.tx,i=n.sender;null!=r.from?r.from.toLowerCase()!==i&&Bo.throwArgumentError("from address mismatch","transaction",t):r.from=i;var o=e.provider.constructor.hexlifyTransaction(r,{from:!0});return e.provider.send("eth_sendTransaction",[o]).then((function(t){return t}),(function(t){return Vo("sendTransaction",t,o)}))}))}},{key:"signTransaction",value:function(t){return Bo.throwError("signing transactions is unsupported",_.b.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}},{key:"sendTransaction",value:function(t){return jo(this,void 0,void 0,y.a.mark((function e(){var n,r,i=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval);case 2:return n=e.sent,e.next=5,this.sendUncheckedTransaction(t);case 5:return r=e.sent,e.prev=6,e.next=9,uo((function(){return jo(i,void 0,void 0,y.a.mark((function t(){var e;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.provider.getTransaction(r);case 2:if(null!==(e=t.sent)){t.next=5;break}return t.abrupt("return",void 0);case 5:return t.abrupt("return",this.provider._wrapTransaction(e,r,n));case 6:case"end":return t.stop()}}),t,this)})))}),{oncePoll:this.provider});case 9:return e.abrupt("return",e.sent);case 12:throw e.prev=12,e.t0=e.catch(6),e.t0.transactionHash=r,e.t0;case 16:case"end":return e.stop()}}),e,this,[[6,12]])})))}},{key:"signMessage",value:function(t){return jo(this,void 0,void 0,y.a.mark((function e(){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?Ot(t):t,e.next=3,this.getAddress();case 3:return r=e.sent,e.next=6,this.provider.send("personal_sign",[Object(b.i)(n),r.toLowerCase()]);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"_legacySignMessage",value:function(t){return jo(this,void 0,void 0,y.a.mark((function e(){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?Ot(t):t,e.next=3,this.getAddress();case 3:return r=e.sent,e.next=6,this.provider.send("eth_sign",[r.toLowerCase(),Object(b.i)(n)]);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"_signTypedData",value:function(t,e,n){return jo(this,void 0,void 0,y.a.mark((function r(){var i,o,s=this;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,pr.resolveNames(t,e,n,(function(t){return s.provider.resolveName(t)}));case 2:return i=r.sent,r.next=5,this.getAddress();case 5:return o=r.sent,r.next=8,this.provider.send("eth_signTypedData_v4",[o.toLowerCase(),JSON.stringify(pr.getPayload(i.domain,e,i.value))]);case 8:return r.abrupt("return",r.sent);case 9:case"end":return r.stop()}}),r,this)})))}},{key:"unlock",value:function(t){return jo(this,void 0,void 0,y.a.mark((function e(){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.provider,e.next=3,this.getAddress();case 3:return r=e.sent,e.abrupt("return",n.send("personal_unlockAccount",[r.toLowerCase(),t,null]));case 5:case"end":return e.stop()}}),e,this)})))}}]),n}(He),Ho=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(g.a)(n,[{key:"sendTransaction",value:function(t){var e=this;return this.sendUncheckedTransaction(t).then((function(t){return{hash:t,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:function(n){return e.provider.waitForTransaction(t,n)}}}))}}]),n}(Xo),qo={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0},Ko=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t,r){var i;Object(v.a)(this,n),Bo.checkNew(this instanceof n?this.constructor:void 0,n);var o=r;return null==o&&(o=new Promise((function(t,e){setTimeout((function(){i.detectNetwork().then((function(e){t(e)}),(function(t){e(t)}))}),0)}))),i=e.call(this,o),t||(t=F(i.constructor,"defaultUrl")()),D(Object(h.a)(i),"connection","string"===typeof t?Object.freeze({url:t}):Object.freeze(U(t))),i._nextId=42,i}return Object(g.a)(n,[{key:"_cache",get:function(){return null==this._eventLoopCache&&(this._eventLoopCache={}),this._eventLoopCache}},{key:"detectNetwork",value:function(){var t=this;return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout((function(){t._cache.detectNetwork=null}),0)),this._cache.detectNetwork}},{key:"_uncachedDetectNetwork",value:function(){return jo(this,void 0,void 0,y.a.mark((function t(){var e,n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zo(0);case 2:return e=null,t.prev=3,t.next=6,this.send("eth_chainId",[]);case 6:e=t.sent,t.next=19;break;case 9:return t.prev=9,t.t0=t.catch(3),t.prev=11,t.next=14,this.send("net_version",[]);case 14:e=t.sent,t.next=19;break;case 17:t.prev=17,t.t1=t.catch(11);case 19:if(null==e){t.next=28;break}return n=F(this.constructor,"getNetwork"),t.prev=21,t.abrupt("return",n(C.from(e).toNumber()));case 25:return t.prev=25,t.t2=t.catch(21),t.abrupt("return",Bo.throwError("could not detect network",_.b.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:t.t2}));case 28:return t.abrupt("return",Bo.throwError("could not detect network",_.b.errors.NETWORK_ERROR,{event:"noNetwork"}));case 29:case"end":return t.stop()}}),t,this,[[3,9],[11,17],[21,25]])})))}},{key:"getSigner",value:function(t){return new Xo(Wo,this,t)}},{key:"getUncheckedSigner",value:function(t){return this.getSigner(t).connectUnchecked()}},{key:"listAccounts",value:function(){var t=this;return this.send("eth_accounts",[]).then((function(e){return e.map((function(e){return t.formatter.address(e)}))}))}},{key:"send",value:function(t,e){var n=this,r={method:t,params:e,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:Y(r),provider:this});var i=["eth_chainId","eth_blockNumber"].indexOf(t)>=0;if(i&&this._cache[t])return this._cache[t];var o=ao(this.connection,JSON.stringify(r),Go).then((function(t){return n.emit("debug",{action:"response",request:r,response:t,provider:n}),t}),(function(t){throw n.emit("debug",{action:"response",error:t,request:r,provider:n}),t}));return i&&(this._cache[t]=o,setTimeout((function(){n._cache[t]=null}),0)),o}},{key:"prepareRequest",value:function(t,e){switch(t){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[Yo(e.address),e.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[Yo(e.address),e.blockTag]];case"getCode":return["eth_getCode",[Yo(e.address),e.blockTag]];case"getStorageAt":return["eth_getStorageAt",[Yo(e.address),e.position,e.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[e.signedTransaction]];case"getBlock":return e.blockTag?["eth_getBlockByNumber",[e.blockTag,!!e.includeTransactions]]:e.blockHash?["eth_getBlockByHash",[e.blockHash,!!e.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[e.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[e.transactionHash]];case"call":return["eth_call",[F(this.constructor,"hexlifyTransaction")(e.transaction,{from:!0}),e.blockTag]];case"estimateGas":return["eth_estimateGas",[F(this.constructor,"hexlifyTransaction")(e.transaction,{from:!0})]];case"getLogs":return e.filter&&null!=e.filter.address&&(e.filter.address=Yo(e.filter.address)),["eth_getLogs",[e.filter]]}return null}},{key:"perform",value:function(t,e){return jo(this,void 0,void 0,y.a.mark((function n(){var r,i,o;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("call"!==t&&"estimateGas"!==t){n.next=8;break}if(!(r=e.transaction)||null==r.type||!C.from(r.type).isZero()){n.next=8;break}if(null!=r.maxFeePerGas||null!=r.maxPriorityFeePerGas){n.next=8;break}return n.next=6,this.getFeeData();case 6:null==(i=n.sent).maxFeePerGas&&null==i.maxPriorityFeePerGas&&((e=U(e)).transaction=U(r),delete e.transaction.type);case 8:return null==(o=this.prepareRequest(t,e))&&Bo.throwError(t+" not implemented",_.b.errors.NOT_IMPLEMENTED,{operation:t}),n.prev=10,n.next=13,this.send(o[0],o[1]);case 13:return n.abrupt("return",n.sent);case 16:return n.prev=16,n.t0=n.catch(10),n.abrupt("return",Vo(t,n.t0,e));case 19:case"end":return n.stop()}}),n,this,[[10,16]])})))}},{key:"_startEvent",value:function(t){"pending"===t.tag&&this._startPending(),Object(l.a)(Object(f.a)(n.prototype),"_startEvent",this).call(this,t)}},{key:"_startPending",value:function(){if(null==this._pendingFilter){var t=this,e=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=e,e.then((function(n){return function r(){t.send("eth_getFilterChanges",[n]).then((function(n){if(t._pendingFilter!=e)return null;var r=Promise.resolve();return n.forEach((function(e){t._emitted["t:"+e.toLowerCase()]="pending",r=r.then((function(){return t.getTransaction(e).then((function(e){return t.emit("pending",e),null}))}))})),r.then((function(){return zo(1e3)}))})).then((function(){if(t._pendingFilter==e)return setTimeout((function(){r()}),0),null;t.send("eth_uninstallFilter",[n])})).catch((function(t){}))}(),n})).catch((function(t){}))}}},{key:"_stopEvent",value:function(t){"pending"===t.tag&&0===this.listenerCount("pending")&&(this._pendingFilter=null),Object(l.a)(Object(f.a)(n.prototype),"_stopEvent",this).call(this,t)}}],[{key:"defaultUrl",value:function(){return"http://localhost:8545"}},{key:"hexlifyTransaction",value:function(t,e){var n=U(qo);if(e)for(var r in e)e[r]&&(n[r]=!0);B(t,n);var i={};return["gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach((function(e){if(null!=t[e]){var n=Object(b.g)(t[e]);"gasLimit"===e&&(e="gas"),i[e]=n}})),["from","to","data"].forEach((function(e){null!=t[e]&&(i[e]=Object(b.i)(t[e]))})),t.accessList&&(i.accessList=dn(t.accessList)),i}}]),n}(Fo),$o=null;try{if(null==($o=WebSocket))throw new Error("inject please")}catch(xa){var Jo=new _.b(lo);$o=function(){Jo.throwError("WebSockets not supported in this environment",_.b.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var Qo=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},Zo=new _.b(lo),ts=1,es=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t,r){var i,o;Object(v.a)(this,n),"any"===r&&Zo.throwError("WebSocketProvider does not support 'any' network yet",_.b.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),(o=e.call(this,t,r))._pollingInterval=-1,o._wsReady=!1,D(Object(h.a)(o),"_websocket",new $o(o.connection.url)),D(Object(h.a)(o),"_requests",{}),D(Object(h.a)(o),"_subs",{}),D(Object(h.a)(o),"_subIds",{}),D(Object(h.a)(o),"_detectNetwork",Object(l.a)((i=Object(h.a)(o),Object(f.a)(n.prototype)),"detectNetwork",i).call(i)),o._websocket.onopen=function(){o._wsReady=!0,Object.keys(o._requests).forEach((function(t){o._websocket.send(o._requests[t].payload)}))},o._websocket.onmessage=function(t){var e=t.data,n=JSON.parse(e);if(null!=n.id){var r=String(n.id),i=o._requests[r];if(delete o._requests[r],void 0!==n.result)i.callback(null,n.result),o.emit("debug",{action:"response",request:JSON.parse(i.payload),response:n.result,provider:Object(h.a)(o)});else{var s=null;n.error?(D(s=new Error(n.error.message||"unknown error"),"code",n.error.code||null),D(s,"response",e)):s=new Error("unknown error"),i.callback(s,void 0),o.emit("debug",{action:"response",error:s,request:JSON.parse(i.payload),provider:Object(h.a)(o)})}}else if("eth_subscription"===n.method){var a=o._subs[n.params.subscription];a&&a.processFunc(n.params.result)}else console.warn("this should not happen")};var s=setInterval((function(){o.emit("poll")}),1e3);return s.unref&&s.unref(),o}return Object(g.a)(n,[{key:"detectNetwork",value:function(){return this._detectNetwork}},{key:"pollingInterval",get:function(){return 0},set:function(t){Zo.throwError("cannot set polling interval on WebSocketProvider",_.b.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}},{key:"resetEventsBlock",value:function(t){Zo.throwError("cannot reset events block on WebSocketProvider",_.b.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}},{key:"poll",value:function(){return Qo(this,void 0,void 0,y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null);case 1:case"end":return t.stop()}}),t)})))}},{key:"polling",set:function(t){t&&Zo.throwError("cannot set polling on WebSocketProvider",_.b.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}},{key:"send",value:function(t,e){var n=this,r=ts++;return new Promise((function(i,o){var s=JSON.stringify({method:t,params:e,id:r,jsonrpc:"2.0"});n.emit("debug",{action:"request",request:JSON.parse(s),provider:n}),n._requests[String(r)]={callback:function(t,e){return t?o(t):i(e)},payload:s},n._wsReady&&n._websocket.send(s)}))}},{key:"_subscribe",value:function(t,e,n){return Qo(this,void 0,void 0,y.a.mark((function r(){var i,o,s=this;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return null==(i=this._subIds[t])&&(i=Promise.all(e).then((function(t){return s.send("eth_subscribe",t)})),this._subIds[t]=i),r.next=4,i;case 4:o=r.sent,this._subs[o]={tag:t,processFunc:n};case 6:case"end":return r.stop()}}),r,this)})))}},{key:"_startEvent",value:function(t){var e=this;switch(t.type){case"block":this._subscribe("block",["newHeads"],(function(t){var n=C.from(t.number).toNumber();e._emitted.block=n,e.emit("block",n)}));break;case"pending":this._subscribe("pending",["newPendingTransactions"],(function(t){e.emit("pending",t)}));break;case"filter":this._subscribe(t.tag,["logs",this._getFilter(t.filter)],(function(n){null==n.removed&&(n.removed=!1),e.emit(t.filter,e.formatter.filterLog(n))}));break;case"tx":var n=function(t){var n=t.hash;e.getTransactionReceipt(n).then((function(t){t&&e.emit(n,t)}))};n(t),this._subscribe("tx",["newHeads"],(function(t){e._events.filter((function(t){return"tx"===t.type})).forEach(n)}));break;case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",t)}}},{key:"_stopEvent",value:function(t){var e=this,n=t.tag;if("tx"===t.type){if(this._events.filter((function(t){return"tx"===t.type})).length)return;n="tx"}else if(this.listenerCount(t.event))return;var r=this._subIds[n];r&&(delete this._subIds[n],r.then((function(t){e._subs[t]&&(delete e._subs[t],e.send("eth_unsubscribe",[t]))})))}},{key:"destroy",value:function(){return Qo(this,void 0,void 0,y.a.mark((function t(){var e=this;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._websocket.readyState!==$o.CONNECTING){t.next=3;break}return t.next=3,new Promise((function(t){e._websocket.onopen=function(){t(!0)},e._websocket.onerror=function(){t(!1)}}));case 3:this._websocket.close(1e3);case 4:case"end":return t.stop()}}),t,this)})))}}],[{key:"defaultUrl",value:function(){return"ws://localhost:8546"}}]),n}(Ko),ns=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},rs=new _.b(lo),is=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(g.a)(n,[{key:"detectNetwork",value:function(){var t=this,e=Object.create(null,{detectNetwork:{get:function(){return Object(l.a)(Object(f.a)(n.prototype),"detectNetwork",t)}}});return ns(this,void 0,void 0,y.a.mark((function t(){var n;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=(n=this.network)){t.next=7;break}return t.next=4,e.detectNetwork.call(this);case 4:(n=t.sent)||rs.throwError("no network detected",_.b.errors.UNKNOWN_ERROR,{}),null==this._network&&(D(this,"_network",n),this.emit("network",n,null));case 7:return t.abrupt("return",n);case 8:case"end":return t.stop()}}),t,this)})))}}]),n}(Ko),os=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t,r){var i;Object(v.a)(this,n),rs.checkAbstract(this instanceof n?this.constructor:void 0,n),t=F(this instanceof n?this.constructor:void 0,"getNetwork")(t),r=F(this instanceof n?this.constructor:void 0,"getApiKey")(r);var o=F(this instanceof n?this.constructor:void 0,"getUrl")(t,r);return i=e.call(this,o,t),"string"===typeof r?D(Object(h.a)(i),"apiKey",r):null!=r&&Object.keys(r).forEach((function(t){D(Object(h.a)(i),t,r[t])})),i}return Object(g.a)(n,[{key:"_startPending",value:function(){rs.warn("WARNING: API provider does not support pending filters")}},{key:"isCommunityResource",value:function(){return!1}},{key:"getSigner",value:function(t){return rs.throwError("API provider does not support signing",_.b.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}},{key:"listAccounts",value:function(){return Promise.resolve([])}}],[{key:"getApiKey",value:function(t){return t}},{key:"getUrl",value:function(t,e){return rs.throwError("not implemented; sub-classes must override getUrl",_.b.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}]),n}(is),ss=new _.b(lo),as="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC",us=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t,r){var i;Object(v.a)(this,n);var o=new cs(t,r),s=o.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi.");return i=e.call(this,s,o.network),D(Object(h.a)(i),"apiKey",o.apiKey),i}return Object(g.a)(n,[{key:"isCommunityResource",value:function(){return this.apiKey===as}}]),n}(es),cs=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(g.a)(n,[{key:"isCommunityResource",value:function(){return this.apiKey===as}}],[{key:"getWebSocketProvider",value:function(t,e){return new us(t,e)}},{key:"getApiKey",value:function(t){return null==t?as:(t&&"string"!==typeof t&&ss.throwArgumentError("invalid apiKey","apiKey",t),t)}},{key:"getUrl",value:function(t,e){var n=null;switch(t.name){case"homestead":n="eth-mainnet.alchemyapi.io/v2/";break;case"ropsten":n="eth-ropsten.alchemyapi.io/v2/";break;case"rinkeby":n="eth-rinkeby.alchemyapi.io/v2/";break;case"goerli":n="eth-goerli.alchemyapi.io/v2/";break;case"kovan":n="eth-kovan.alchemyapi.io/v2/";break;case"matic":n="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":n="polygon-mumbai.g.alchemy.com/v2/";break;default:ss.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+n+e,throttleCallback:function(t,n){return e===as&&yo(),Promise.resolve(!0)}}}}]),n}(os),hs=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},ls=new _.b(lo),fs=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(g.a)(n,[{key:"perform",value:function(t,e){var r=this,i=Object.create(null,{perform:{get:function(){return Object(l.a)(Object(f.a)(n.prototype),"perform",r)}}});return hs(this,void 0,void 0,y.a.mark((function n(){var r;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("getBlockNumber"!==t){n.next=5;break}return n.next=3,i.perform.call(this,"getBlock",{blockTag:"latest"});case 3:return r=n.sent,n.abrupt("return",r.number);case 5:return n.abrupt("return",i.perform.call(this,t,e));case 6:case"end":return n.stop()}}),n,this)})))}}],[{key:"getApiKey",value:function(t){return null!=t&&ls.throwArgumentError("apiKey not supported for cloudflare","apiKey",t),null}},{key:"getUrl",value:function(t,e){var n=null;if("homestead"===t.name)n="https://cloudflare-eth.com/";else ls.throwArgumentError("unsupported network","network",arguments[0]);return n}}]),n}(os),ds=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},ps=new _.b(lo);function vs(t){var e={};for(var n in t)if(null!=t[n]){var r=t[n];"type"===n&&0===r||(r={type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0}[n]?Object(b.g)(Object(b.i)(r)):"accessList"===n?"["+dn(r).map((function(t){return'{address:"'.concat(t.address,'",storageKeys:["').concat(t.storageKeys.join('","'),'"]}')})).join(",")+"]":Object(b.i)(r),e[n]=r)}return e}function gs(t){if(0==t.status&&("No records found"===t.message||"No transactions found"===t.message))return t.result;if(1!=t.status||"OK"!=t.message){var e=new Error("invalid response");throw e.result=JSON.stringify(t),(t.result||"").toLowerCase().indexOf("rate limit")>=0&&(e.throttleRetry=!0),e}return t.result}function ms(t){if(t&&0==t.status&&"NOTOK"==t.message&&(t.result||"").toLowerCase().indexOf("rate limit")>=0){var e=new Error("throttled response");throw e.result=JSON.stringify(t),e.throttleRetry=!0,e}if("2.0"!=t.jsonrpc){var n=new Error("invalid response");throw n.result=JSON.stringify(t),n}if(t.error){var r=new Error(t.error.message||"unknown error");throw t.error.code&&(r.code=t.error.code),t.error.data&&(r.data=t.error.data),r}return t.result}function ys(t){if("pending"===t)throw new Error("pending not supported");return"latest"===t?t:parseInt(t.substring(2),16)}var bs="9D13ZE7XSBTJ94N9BNJ2MA33VMAY2YPIRB";function ws(t,e,n){if("call"===t&&e.code===_.b.errors.SERVER_ERROR){var r=e.error;if(r&&(r.message.match(/reverted/i)||r.message.match(/VM execution error/i))){var i=r.data;if(i&&(i="0x"+i.replace(/^.*0x/i,"")),Object(b.l)(i))return i;ps.throwError("missing revert data in call exception",_.b.errors.CALL_EXCEPTION,{error:e,data:"0x"})}}var o=e.message;throw e.code===_.b.errors.SERVER_ERROR&&(e.error&&"string"===typeof e.error.message?o=e.error.message:"string"===typeof e.body?o=e.body:"string"===typeof e.responseText&&(o=e.responseText)),(o=(o||"").toLowerCase()).match(/insufficient funds/)&&ps.throwError("insufficient funds for intrinsic transaction cost",_.b.errors.INSUFFICIENT_FUNDS,{error:e,method:t,transaction:n}),o.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&ps.throwError("nonce has already been used",_.b.errors.NONCE_EXPIRED,{error:e,method:t,transaction:n}),o.match(/another transaction with same nonce/)&&ps.throwError("replacement fee too low",_.b.errors.REPLACEMENT_UNDERPRICED,{error:e,method:t,transaction:n}),o.match(/execution failed due to an exception|execution reverted/)&&ps.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",_.b.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,method:t,transaction:n}),e}var xs=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t,r){var i;return Object(v.a)(this,n),ps.checkNew(this instanceof n?this.constructor:void 0,n),i=e.call(this,t),D(Object(h.a)(i),"baseUrl",i.getBaseUrl()),D(Object(h.a)(i),"apiKey",r||bs),i}return Object(g.a)(n,[{key:"getBaseUrl",value:function(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"ropsten":return"https://api-ropsten.etherscan.io";case"rinkeby":return"https://api-rinkeby.etherscan.io";case"kovan":return"https://api-kovan.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io"}return ps.throwArgumentError("unsupported network","network",name)}},{key:"getUrl",value:function(t,e){var n=Object.keys(e).reduce((function(t,n){var r=e[n];return null!=r&&(t+="&".concat(n,"=").concat(r)),t}),""),r=this.apiKey?"&apikey=".concat(this.apiKey):"";return"".concat(this.baseUrl,"/api?module=").concat(t).concat(n).concat(r)}},{key:"getPostUrl",value:function(){return"".concat(this.baseUrl,"/api")}},{key:"getPostData",value:function(t,e){return e.module=t,e.apikey=this.apiKey,e}},{key:"fetch",value:function(t,e,n){return ds(this,void 0,void 0,y.a.mark((function r(){var i,o,s,a,u,c,h=this;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=n?this.getPostUrl():this.getUrl(t,e),o=n?this.getPostData(t,e):null,s="proxy"===t?ms:gs,this.emit("debug",{action:"request",request:i,provider:this}),a={url:i,throttleSlotInterval:1e3,throttleCallback:function(t,e){return h.isCommunityResource()&&yo(),Promise.resolve(!0)}},u=null,o&&(a.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},u=Object.keys(o).map((function(t){return"".concat(t,"=").concat(o[t])})).join("&")),r.next=9,ao(a,u,s||ms);case 9:return c=r.sent,this.emit("debug",{action:"response",request:i,response:Y(c),provider:this}),r.abrupt("return",c);case 12:case"end":return r.stop()}}),r,this)})))}},{key:"detectNetwork",value:function(){return ds(this,void 0,void 0,y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.network);case 1:case"end":return t.stop()}}),t,this)})))}},{key:"perform",value:function(t,e){var r=this,i=Object.create(null,{perform:{get:function(){return Object(l.a)(Object(f.a)(n.prototype),"perform",r)}}});return ds(this,void 0,void 0,y.a.mark((function n(){var r,o,s,a,u,c,h,l,f;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=t,n.next="getBlockNumber"===n.t0?3:"getGasPrice"===n.t0?4:"getBalance"===n.t0?5:"getTransactionCount"===n.t0?6:"getCode"===n.t0?7:"getStorageAt"===n.t0?8:"sendTransaction"===n.t0?9:"getBlock"===n.t0?10:"getTransaction"===n.t0?13:"getTransactionReceipt"===n.t0?14:"call"===n.t0?15:"estimateGas"===n.t0?29:"getLogs"===n.t0?41:"getEtherPrice"===n.t0?65:72;break;case 3:return n.abrupt("return",this.fetch("proxy",{action:"eth_blockNumber"}));case 4:return n.abrupt("return",this.fetch("proxy",{action:"eth_gasPrice"}));case 5:return n.abrupt("return",this.fetch("account",{action:"balance",address:e.address,tag:e.blockTag}));case 6:return n.abrupt("return",this.fetch("proxy",{action:"eth_getTransactionCount",address:e.address,tag:e.blockTag}));case 7:return n.abrupt("return",this.fetch("proxy",{action:"eth_getCode",address:e.address,tag:e.blockTag}));case 8:return n.abrupt("return",this.fetch("proxy",{action:"eth_getStorageAt",address:e.address,position:e.position,tag:e.blockTag}));case 9:return n.abrupt("return",this.fetch("proxy",{action:"eth_sendRawTransaction",hex:e.signedTransaction},!0).catch((function(t){return ws("sendTransaction",t,e.signedTransaction)})));case 10:if(!e.blockTag){n.next=12;break}return n.abrupt("return",this.fetch("proxy",{action:"eth_getBlockByNumber",tag:e.blockTag,boolean:e.includeTransactions?"true":"false"}));case 12:throw new Error("getBlock by blockHash not implemented");case 13:return n.abrupt("return",this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:e.transactionHash}));case 14:return n.abrupt("return",this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:e.transactionHash}));case 15:if("latest"===e.blockTag){n.next=17;break}throw new Error("EtherscanProvider does not support blockTag for call");case 17:return(r=vs(e.transaction)).module="proxy",r.action="eth_call",n.prev=20,n.next=23,this.fetch("proxy",r,!0);case 23:return n.abrupt("return",n.sent);case 26:return n.prev=26,n.t1=n.catch(20),n.abrupt("return",ws("call",n.t1,e.transaction));case 29:return(o=vs(e.transaction)).module="proxy",o.action="eth_estimateGas",n.prev=32,n.next=35,this.fetch("proxy",o,!0);case 35:return n.abrupt("return",n.sent);case 38:return n.prev=38,n.t2=n.catch(32),n.abrupt("return",ws("estimateGas",n.t2,e.transaction));case 41:return s={action:"getLogs"},e.filter.fromBlock&&(s.fromBlock=ys(e.filter.fromBlock)),e.filter.toBlock&&(s.toBlock=ys(e.filter.toBlock)),e.filter.address&&(s.address=e.filter.address),e.filter.topics&&e.filter.topics.length>0&&(e.filter.topics.length>1&&ps.throwError("unsupported topic count",_.b.errors.UNSUPPORTED_OPERATION,{topics:e.filter.topics}),1===e.filter.topics.length&&("string"===typeof(a=e.filter.topics[0])&&66===a.length||ps.throwError("unsupported topic format",_.b.errors.UNSUPPORTED_OPERATION,{topic0:a}),s.topic0=a)),n.next=48,this.fetch("logs",s);case 48:u=n.sent,c={},h=0;case 51:if(!(h<u.length)){n.next=64;break}if(null==(l=u[h]).blockHash){n.next=55;break}return n.abrupt("continue",61);case 55:if(null!=c[l.blockNumber]){n.next=60;break}return n.next=58,this.getBlock(l.blockNumber);case 58:(f=n.sent)&&(c[l.blockNumber]=f.hash);case 60:l.blockHash=c[l.blockNumber];case 61:h++,n.next=51;break;case 64:return n.abrupt("return",u);case 65:if("homestead"===this.network.name){n.next=67;break}return n.abrupt("return",0);case 67:return n.t3=parseFloat,n.next=70,this.fetch("stats",{action:"ethprice"});case 70:return n.t4=n.sent.ethusd,n.abrupt("return",(0,n.t3)(n.t4));case 72:return n.abrupt("break",73);case 73:return n.abrupt("return",i.perform.call(this,t,e));case 74:case"end":return n.stop()}}),n,this,[[20,26],[32,38]])})))}},{key:"getHistory",value:function(t,e,n){return ds(this,void 0,void 0,y.a.mark((function r(){var i,o,s=this;return y.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.resolveName(t);case 2:return r.t0=r.sent,r.t1=null==e?0:e,r.t2=null==n?99999999:n,i={action:"txlist",address:r.t0,startblock:r.t1,endblock:r.t2,sort:"asc"},r.next=8,this.fetch("account",i);case 8:return o=r.sent,r.abrupt("return",o.map((function(t){["contractAddress","to"].forEach((function(e){""==t[e]&&delete t[e]})),null==t.creates&&null!=t.contractAddress&&(t.creates=t.contractAddress);var e=s.formatter.transactionResponse(t);return t.timeStamp&&(e.timestamp=parseInt(t.timeStamp)),e})));case 10:case"end":return r.stop()}}),r,this)})))}},{key:"isCommunityResource",value:function(){return this.apiKey===bs}}]),n}(Fo);function _s(t){for(var e=(t=t.slice()).length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),r=t[e];t[e]=t[n],t[n]=r}return t}var Ts=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},Es=new _.b(lo);function Ss(){return(new Date).getTime()}function ks(t){for(var e=null,n=0;n<t.length;n++){var r=t[n];if(null==r)return null;e?e.name===r.name&&e.chainId===r.chainId&&(e.ensAddress===r.ensAddress||null==e.ensAddress&&null==r.ensAddress)||Es.throwArgumentError("provider mismatch","networks",t):e=r}return e}function As(t,e){t=t.slice().sort();var n=Math.floor(t.length/2);if(t.length%2)return t[n];var r=t[n-1],i=t[n];return null!=e&&Math.abs(r-i)>e?null:(r+i)/2}function Os(t){if(null===t)return"null";if("number"===typeof t||"boolean"===typeof t)return JSON.stringify(t);if("string"===typeof t)return t;if(C.isBigNumber(t))return t.toString();if(Array.isArray(t))return JSON.stringify(t.map((function(t){return Os(t)})));if("object"===typeof t){var e=Object.keys(t);return e.sort(),"{"+e.map((function(e){var n=t[e];return n="function"===typeof n?"[function]":Os(n),JSON.stringify(e)+":"+n})).join(",")+"}"}throw new Error("unknown value type: "+typeof t)}var Cs=1;function Ps(t){var e=null,n=null,r=new Promise((function(r){e=function(){n&&(clearTimeout(n),n=null),r()},n=setTimeout(e,t)}));return{cancel:e,getPromise:function(){return r},wait:function(t){return r=r.then(t)}}}var Is=[_.b.errors.CALL_EXCEPTION,_.b.errors.INSUFFICIENT_FUNDS,_.b.errors.NONCE_EXPIRED,_.b.errors.REPLACEMENT_UNDERPRICED,_.b.errors.UNPREDICTABLE_GAS_LIMIT],Rs=["address","args","errorArgs","errorSignature","method","transaction"];function Ms(t,e){var n={weight:t.weight};return Object.defineProperty(n,"provider",{get:function(){return t.provider}}),t.start&&(n.start=t.start),e&&(n.duration=e-t.start),t.done&&(t.error?n.error=t.error:n.result=t.result||null),n}function Ns(t,e,n){var r=Os;switch(e){case"getBlockNumber":return function(e){var n=e.map((function(t){return t.result})),r=As(e.map((function(t){return t.result})),2);if(null!=r)return r=Math.ceil(r),n.indexOf(r+1)>=0&&r++,r>=t._highestBlockNumber&&(t._highestBlockNumber=r),t._highestBlockNumber};case"getGasPrice":return function(t){var e=t.map((function(t){return t.result}));return e.sort(),e[Math.floor(e.length/2)]};case"getEtherPrice":return function(t){return As(t.map((function(t){return t.result})))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":r=function(t){return null==t?null:((t=U(t)).confirmations=-1,Os(t))};break;case"getBlock":r=n.includeTransactions?function(t){return null==t?null:((t=U(t)).transactions=t.transactions.map((function(t){return(t=U(t)).confirmations=-1,t})),Os(t))}:function(t){return null==t?null:Os(t)};break;default:throw new Error("unknown method: "+e)}return function(t,e){return function(n){var r={};n.forEach((function(e){var n=t(e.result);r[n]||(r[n]={count:0,result:e.result}),r[n].count++}));for(var i=Object.keys(r),o=0;o<i.length;o++){var s=r[i[o]];if(s.count>=e)return s.result}}}(r,t.quorum)}function Ls(t,e){return Ts(this,void 0,void 0,y.a.mark((function n(){var r;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null!=(r=t.provider).blockNumber&&r.blockNumber>=e||-1===e)){n.next=3;break}return n.abrupt("return",r);case 3:return n.abrupt("return",uo((function(){return new Promise((function(n,i){setTimeout((function(){return r.blockNumber>=e?n(r):t.cancelled?n(null):n(void 0)}),0)}))}),{oncePoll:r}));case 4:case"end":return n.stop()}}),n)})))}function Ds(t,e,n,r){return Ts(this,void 0,void 0,y.a.mark((function i(){var o,s;return y.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:o=t.provider,i.t0=n,i.next="getBlockNumber"===i.t0||"getGasPrice"===i.t0?4:"getEtherPrice"===i.t0?5:"getBalance"===i.t0||"getTransactionCount"===i.t0||"getCode"===i.t0?8:"getStorageAt"===i.t0?13:"getBlock"===i.t0?18:"call"===i.t0||"estimateGas"===i.t0?23:"getTransaction"===i.t0||"getTransactionReceipt"===i.t0?28:"getLogs"===i.t0?29:35;break;case 4:return i.abrupt("return",o[n]());case 5:if(!o.getEtherPrice){i.next=7;break}return i.abrupt("return",o.getEtherPrice());case 7:return i.abrupt("break",35);case 8:if(!r.blockTag||!Object(b.l)(r.blockTag)){i.next=12;break}return i.next=11,Ls(t,e);case 11:o=i.sent;case 12:return i.abrupt("return",o[n](r.address,r.blockTag||"latest"));case 13:if(!r.blockTag||!Object(b.l)(r.blockTag)){i.next=17;break}return i.next=16,Ls(t,e);case 16:o=i.sent;case 17:return i.abrupt("return",o.getStorageAt(r.address,r.position,r.blockTag||"latest"));case 18:if(!r.blockTag||!Object(b.l)(r.blockTag)){i.next=22;break}return i.next=21,Ls(t,e);case 21:o=i.sent;case 22:return i.abrupt("return",o[r.includeTransactions?"getBlockWithTransactions":"getBlock"](r.blockTag||r.blockHash));case 23:if(!r.blockTag||!Object(b.l)(r.blockTag)){i.next=27;break}return i.next=26,Ls(t,e);case 26:o=i.sent;case 27:return i.abrupt("return",o[n](r.transaction));case 28:return i.abrupt("return",o[n](r.transactionHash));case 29:if(!((s=r.filter).fromBlock&&Object(b.l)(s.fromBlock)||s.toBlock&&Object(b.l)(s.toBlock))){i.next=34;break}return i.next=33,Ls(t,e);case 33:o=i.sent;case 34:return i.abrupt("return",o.getLogs(s));case 35:return i.abrupt("return",Es.throwError("unknown method error",_.b.errors.UNKNOWN_ERROR,{method:n,params:r}));case 36:case"end":return i.stop()}}),i)})))}var Fs=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t,r){var i;Object(v.a)(this,n),Es.checkNew(this instanceof n?this.constructor:void 0,n),0===t.length&&Es.throwArgumentError("missing providers","providers",t);var o=t.map((function(t,e){if(ze.isProvider(t)){var n=go(t)?2e3:750;return Object.freeze({provider:t,weight:1,stallTimeout:n,priority:1})}var r=U(t);null==r.priority&&(r.priority=1),null==r.stallTimeout&&(r.stallTimeout=go(t)?2e3:750),null==r.weight&&(r.weight=1);var i=r.weight;return(i%1||i>512||i<1)&&Es.throwArgumentError("invalid weight; must be integer in [1, 512]","providers[".concat(e,"].weight"),i),Object.freeze(r)})),s=o.reduce((function(t,e){return t+e.weight}),0);null==r?r=s/2:r>s&&Es.throwArgumentError("quorum will always fail; larger than total weight","quorum",r);var a=ks(o.map((function(t){return t.provider.network})));return null==a&&(a=new Promise((function(t,e){setTimeout((function(){i.detectNetwork().then(t,e)}),0)}))),i=e.call(this,a),D(Object(h.a)(i),"providerConfigs",Object.freeze(o)),D(Object(h.a)(i),"quorum",r),i._highestBlockNumber=-1,i}return Object(g.a)(n,[{key:"detectNetwork",value:function(){return Ts(this,void 0,void 0,y.a.mark((function t(){var e;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(this.providerConfigs.map((function(t){return t.provider.getNetwork()})));case 2:return e=t.sent,t.abrupt("return",ks(e));case 4:case"end":return t.stop()}}),t,this)})))}},{key:"perform",value:function(t,e){return Ts(this,void 0,void 0,y.a.mark((function n(){var r,i,o,s,a,u,c,h,l,f,d=this;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("sendTransaction"!==t){n.next=13;break}return n.next=3,Promise.all(this.providerConfigs.map((function(t){return t.provider.sendTransaction(e.signedTransaction).then((function(t){return t.hash}),(function(t){return t}))})));case 3:r=n.sent,i=0;case 5:if(!(i<r.length)){n.next=12;break}if("string"!==typeof(o=r[i])){n.next=9;break}return n.abrupt("return",o);case 9:i++,n.next=5;break;case 12:throw r[0];case 13:if(-1!==this._highestBlockNumber||"getBlockNumber"===t){n.next=16;break}return n.next=16,this.getBlockNumber();case 16:s=Ns(this,t,e),(a=_s(this.providerConfigs.map(U))).sort((function(t,e){return t.priority-e.priority})),u=this._highestBlockNumber,c=0,h=!0,l=y.a.mark((function n(){var r,i,o,l,f,p,v;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(r=Ss(),i=a.filter((function(t){return t.runner&&r-t.start<t.stallTimeout})).reduce((function(t,e){return t+e.weight}),0),o=function(){var n=a[c++],r=Cs++;n.start=Ss(),n.staller=Ps(n.stallTimeout),n.staller.wait((function(){n.staller=null})),n.runner=Ds(n,u,t,e).then((function(i){n.done=!0,n.result=i,d.listenerCount("debug")&&d.emit("debug",{action:"request",rid:r,backend:Ms(n,Ss()),request:{method:t,params:Y(e)},provider:d})}),(function(i){n.done=!0,n.error=i,d.listenerCount("debug")&&d.emit("debug",{action:"request",rid:r,backend:Ms(n,Ss()),request:{method:t,params:Y(e)},provider:d})})),d.listenerCount("debug")&&d.emit("debug",{action:"request",rid:r,backend:Ms(n,null),request:{method:t,params:Y(e)},provider:d}),i+=n.weight};i<d.quorum&&c<a.length;)o();if(l=[],a.forEach((function(t){!t.done&&t.runner&&(l.push(t.runner),t.staller&&l.push(t.staller.getPromise()))})),!l.length){n.next=9;break}return n.next=9,Promise.race(l);case 9:if(!((f=a.filter((function(t){return t.done&&null==t.error}))).length>=d.quorum)){n.next=19;break}if(void 0===(p=s(f))){n.next=15;break}return a.forEach((function(t){t.staller&&t.staller.cancel(),t.cancelled=!0})),n.abrupt("return",{v:p});case 15:if(h){n.next=18;break}return n.next=18,Ps(100).getPromise();case 18:h=!1;case 19:if(v=a.reduce((function(t,e){if(!e.done||null==e.error)return t;var n=e.error.code;return Is.indexOf(n)>=0&&(t[n]||(t[n]={error:e.error,weight:0}),t[n].weight+=e.weight),t}),{}),Object.keys(v).forEach((function(t){var e=v[t];if(!(e.weight<d.quorum)){a.forEach((function(t){t.staller&&t.staller.cancel(),t.cancelled=!0}));var n=e.error,r={};Rs.forEach((function(t){null!=n[t]&&(r[t]=n[t])})),Es.throwError(n.reason||n.message,t,r)}})),0!==a.filter((function(t){return!t.done})).length){n.next=23;break}return n.abrupt("return","break");case 23:case"end":return n.stop()}}),n)}));case 23:return n.delegateYield(l(),"t0",25);case 25:if("break"!==(f=n.t0)){n.next=28;break}return n.abrupt("break",32);case 28:if("object"!==typeof f){n.next=30;break}return n.abrupt("return",f.v);case 30:n.next=23;break;case 32:return a.forEach((function(t){t.staller&&t.staller.cancel(),t.cancelled=!0})),n.abrupt("return",Es.throwError("failed to meet quorum",_.b.errors.SERVER_ERROR,{method:t,params:e,results:a.map((function(t){return Ms(t)})),provider:this}));case 34:case"end":return n.stop()}}),n,this)})))}}]),n}(Fo),js=null,Bs=new _.b(lo),Us="84842078b09946638c03157f83405213",Vs=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t,r){var i;Object(v.a)(this,n);var o=new zs(t,r),s=o.connection;s.password&&Bs.throwError("INFURA WebSocket project secrets unsupported",_.b.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"});var a=s.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/");return i=e.call(this,a,t),D(Object(h.a)(i),"apiKey",o.projectId),D(Object(h.a)(i),"projectId",o.projectId),D(Object(h.a)(i),"projectSecret",o.projectSecret),i}return Object(g.a)(n,[{key:"isCommunityResource",value:function(){return this.projectId===Us}}]),n}(es),zs=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(g.a)(n,[{key:"isCommunityResource",value:function(){return this.projectId===Us}}],[{key:"getWebSocketProvider",value:function(t,e){return new Vs(t,e)}},{key:"getApiKey",value:function(t){var e={apiKey:Us,projectId:Us,projectSecret:null};return null==t||("string"===typeof t?e.projectId=t:null!=t.projectSecret?(Bs.assertArgument("string"===typeof t.projectId,"projectSecret requires a projectId","projectId",t.projectId),Bs.assertArgument("string"===typeof t.projectSecret,"invalid projectSecret","projectSecret","[REDACTED]"),e.projectId=t.projectId,e.projectSecret=t.projectSecret):t.projectId&&(e.projectId=t.projectId),e.apiKey=e.projectId),e}},{key:"getUrl",value:function(t,e){var n=null;switch(t?t.name:"unknown"){case"homestead":n="mainnet.infura.io";break;case"ropsten":n="ropsten.infura.io";break;case"rinkeby":n="rinkeby.infura.io";break;case"kovan":n="kovan.infura.io";break;case"goerli":n="goerli.infura.io";break;case"matic":n="polygon-mainnet.infura.io";break;case"maticmum":n="polygon-mumbai.infura.io";break;default:Bs.throwError("unsupported network",_.b.errors.INVALID_ARGUMENT,{argument:"network",value:t})}var r={allowGzip:!0,url:"https://"+n+"/v3/"+e.projectId,throttleCallback:function(t,n){return e.projectId===Us&&yo(),Promise.resolve(!0)}};return null!=e.projectSecret&&(r.user="",r.password=e.projectSecret),r}}]),n}(os),Gs=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(g.a)(n,[{key:"send",value:function(t,e){var n=this,r={method:t,params:e,id:this._nextId++,jsonrpc:"2.0"};null==this._pendingBatch&&(this._pendingBatch=[]);var i={request:r,resolve:null,reject:null},o=new Promise((function(t,e){i.resolve=t,i.reject=e}));return this._pendingBatch.push(i),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout((function(){var t=n._pendingBatch;n._pendingBatch=null,n._pendingBatchAggregator=null;var e=t.map((function(t){return t.request}));return n.emit("debug",{action:"requestBatch",request:Y(e),provider:n}),ao(n.connection,JSON.stringify(e)).then((function(r){n.emit("debug",{action:"response",request:e,response:r,provider:n}),t.forEach((function(t,e){var n=r[e];if(n.error){var i=new Error(n.error.message);i.code=n.error.code,i.data=n.error.data,t.reject(i)}else t.resolve(n.result)}))}),(function(r){n.emit("debug",{action:"response",error:r,request:e,provider:n}),t.forEach((function(t){t.reject(r)}))}))}),10)),o}}]),n}(Ko),Ys=new _.b(lo),Ws=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(g.a)(n,null,[{key:"getApiKey",value:function(t){return t&&"string"!==typeof t&&Ys.throwArgumentError("invalid apiKey","apiKey",t),t||"ETHERS_JS_SHARED"}},{key:"getUrl",value:function(t,e){Ys.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");var n=null;switch(t.name){case"homestead":n="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":n="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":n="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":n="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":n="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:Ys.throwArgumentError("unsupported network","network",arguments[0])}return n+"?apiKey="+e}}]),n}(os),Xs=new _.b(lo),Hs={homestead:"6004bcd10040261633ade990",ropsten:"6004bd4d0040261633ade991",rinkeby:"6004bda20040261633ade994",goerli:"6004bd860040261633ade992"},qs=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t,r){if(Object(v.a)(this,n),null==r){var i=F(this instanceof n?this.constructor:void 0,"getNetwork")(t);if(i){var o=Hs[i.name];o&&(r={applicationId:o,loadBalancer:!0})}null==r&&Xs.throwError("unsupported network",_.b.errors.INVALID_ARGUMENT,{argument:"network",value:t})}return e.call(this,t,r)}return Object(g.a)(n,[{key:"isCommunityResource",value:function(){return this.applicationId===Hs[this.network.name]}}],[{key:"getApiKey",value:function(t){null==t&&Xs.throwArgumentError("PocketProvider.getApiKey does not support null apiKey","apiKey",t);var e={applicationId:null,loadBalancer:!1,applicationSecretKey:null};return"string"===typeof t?e.applicationId=t:null!=t.applicationSecretKey?(Xs.assertArgument("string"===typeof t.applicationId,"applicationSecretKey requires an applicationId","applicationId",t.applicationId),Xs.assertArgument("string"===typeof t.applicationSecretKey,"invalid applicationSecretKey","applicationSecretKey","[REDACTED]"),e.applicationId=t.applicationId,e.applicationSecretKey=t.applicationSecretKey,e.loadBalancer=!!t.loadBalancer):t.applicationId?(Xs.assertArgument("string"===typeof t.applicationId,"apiKey.applicationId must be a string","apiKey.applicationId",t.applicationId),e.applicationId=t.applicationId,e.loadBalancer=!!t.loadBalancer):Xs.throwArgumentError("unsupported PocketProvider apiKey","apiKey",t),e}},{key:"getUrl",value:function(t,e){var n=null;switch(t?t.name:"unknown"){case"homestead":n="eth-mainnet.gateway.pokt.network";break;case"ropsten":n="eth-ropsten.gateway.pokt.network";break;case"rinkeby":n="eth-rinkeby.gateway.pokt.network";break;case"goerli":n="eth-goerli.gateway.pokt.network";break;default:Xs.throwError("unsupported network",_.b.errors.INVALID_ARGUMENT,{argument:"network",value:t})}var r={url:e.loadBalancer?"https://".concat(n,"/v1/lb/").concat(e.applicationId):"https://".concat(n,"/v1/").concat(e.applicationId),headers:{}};return null!=e.applicationSecretKey&&(r.user="",r.password=e.applicationSecretKey),r}}]),n}(os),Ks=new _.b(lo),$s=1;function Js(t,e){var n="Web3LegacyFetcher";return function(t,r){var i=this,o={method:t,params:r,id:$s++,jsonrpc:"2.0"};return new Promise((function(t,r){i.emit("debug",{action:"request",fetcher:n,request:Y(o),provider:i}),e(o,(function(e,s){if(e)return i.emit("debug",{action:"response",fetcher:n,error:e,request:o,provider:i}),r(e);if(i.emit("debug",{action:"response",fetcher:n,request:o,response:s,provider:i}),s.error){var a=new Error(s.error.message);return a.code=s.error.code,a.data=s.error.data,r(a)}t(s.result)}))}))}}var Qs=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(t,r){var i;Object(v.a)(this,n),Ks.checkNew(this instanceof n?this.constructor:void 0,n),null==t&&Ks.throwArgumentError("missing provider","provider",t);var o=null,s=null,a=null;return"function"===typeof t?(o="unknown:",s=t):(!(o=t.host||t.path||"")&&t.isMetaMask&&(o="metamask"),a=t,t.request?(""===o&&(o="eip-1193:"),s=function(t){return function(e,n){var r=this;null==n&&(n=[]);var i={method:e,params:n};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:Y(i),provider:this}),t.request(i).then((function(t){return r.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:i,response:t,provider:r}),t}),(function(t){throw r.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:i,error:t,provider:r}),t}))}}(t)):t.sendAsync?s=Js(0,t.sendAsync.bind(t)):t.send?s=Js(0,t.send.bind(t)):Ks.throwArgumentError("unsupported provider","provider",t),o||(o="unknown:")),i=e.call(this,o,r),D(Object(h.a)(i),"jsonRpcFetchFunc",s),D(Object(h.a)(i),"provider",a),i}return Object(g.a)(n,[{key:"send",value:function(t,e){return this.jsonRpcFetchFunc(t,e)}}]),n}(Ko),Zs=new _.b(lo);function ta(t,e){if(null==t&&(t="homestead"),"string"===typeof t){var n=t.match(/^(ws|http)s?:/i);if(n)switch(n[1]){case"http":return new Ko(t);case"ws":return new es(t);default:Zs.throwArgumentError("unsupported URL scheme","network",t)}}var r=Li(t);return r&&r._defaultProvider||Zs.throwError("unsupported getDefaultProvider network",_.b.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:t}),r._defaultProvider({FallbackProvider:Fs,AlchemyProvider:cs,CloudflareProvider:fs,EtherscanProvider:xs,InfuraProvider:zs,JsonRpcProvider:Ko,NodesmithProvider:Ws,PocketProvider:qs,Web3Provider:Qs,IpcProvider:js},e)}var ea=new RegExp("^bytes([0-9]+)$"),na=new RegExp("^(u?int)([0-9]*)$"),ra=new RegExp("^(.*)\\[([0-9]*)\\]$"),ia=new _.b("solidity/5.5.0");function oa(t,e,n){switch(t){case"address":return n?Object(b.p)(e,32):Object(b.a)(e);case"string":return Ot(e);case"bytes":return Object(b.a)(e);case"bool":return e=e?"0x01":"0x00",n?Object(b.p)(e,32):Object(b.a)(e)}var r=t.match(na);if(r){var i=parseInt(r[2]||"256");return(r[2]&&String(i)!==r[2]||i%8!==0||0===i||i>256)&&ia.throwArgumentError("invalid number type","type",t),n&&(i=256),e=C.from(e).toTwos(i),Object(b.p)(e,i/8)}if(r=t.match(ea)){var o=parseInt(r[1]);return(String(o)!==r[1]||0===o||o>32)&&ia.throwArgumentError("invalid bytes type","type",t),Object(b.a)(e).byteLength!==o&&ia.throwArgumentError("invalid value for ".concat(t),"value",e),n?Object(b.a)((e+"0000000000000000000000000000000000000000000000000000000000000000").substring(0,66)):e}if((r=t.match(ra))&&Array.isArray(e)){var s=r[1];parseInt(r[2]||String(e.length))!=e.length&&ia.throwArgumentError("invalid array length for ".concat(t),"value",e);var a=[];return e.forEach((function(t){a.push(oa(s,t,!0))})),Object(b.b)(a)}return ia.throwArgumentError("invalid type","type",t)}function sa(t,e){t.length!=e.length&&ia.throwArgumentError("wrong number of values; expected ${ types.length }","values",e);var n=[];return t.forEach((function(t,r){n.push(oa(t,e[r]))})),Object(b.i)(Object(b.b)(n))}function aa(t,e){return tt(sa(t,e))}function ua(t,e){return xr(sa(t,e))}function ca(t){var e=Ot(t);if(e.length>31)throw new Error("bytes32 string must be less than 32 bytes");return Object(b.i)(Object(b.b)([e,ki]).slice(0,32))}function ha(t){var e=Object(b.a)(t);if(32!==e.length)throw new Error("invalid bytes32 - not 32 bytes long");if(0!==e[31])throw new Error("invalid bytes32 string - no null terminator");for(var n=31;0===e[n-1];)n--;return Rt(e.slice(0,n))}var la=new _.b("units/5.5.0"),fa=["wei","kwei","mwei","gwei","szabo","finney","ether"];function da(t){var e=String(t).split(".");(e.length>2||!e[0].match(/^-?[0-9]*$/)||e[1]&&!e[1].match(/^[0-9]*$/)||"."===t||"-."===t)&&la.throwArgumentError("invalid value","value",t);var n=e[0],r="";for("-"===n.substring(0,1)&&(r="-",n=n.substring(1));"0"===n.substring(0,1);)n=n.substring(1);""===n&&(n="0");var i="";for(2===e.length&&(i="."+(e[1]||"0"));i.length>2&&"0"===i[i.length-1];)i=i.substring(0,i.length-1);for(var o=[];n.length;){if(n.length<=3){o.unshift(n);break}var s=n.length-3;o.unshift(n.substring(s)),n=n.substring(0,s)}return r+o.join(",")+i}function pa(t,e){if("string"===typeof e){var n=fa.indexOf(e);-1!==n&&(e=3*n)}return Yn(t,null!=e?e:18)}function va(t,e){if("string"!==typeof t&&la.throwArgumentError("value must be a string","value",t),"string"===typeof e){var n=fa.indexOf(e);-1!==n&&(e=3*n)}return Wn(t,null!=e?e:18)}function ga(t){return pa(t,18)}function ma(t){return va(t,18)}var ya="ethers/5.5.1",ba=new _.b(ya);try{var wa=window;null==wa._ethers&&(wa._ethers=u)}catch(xa){}},,,,function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"===typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],h=!1,l=-1;function f(){h&&u&&(h=!1,u.length?c=u.concat(c):l=-1,c.length&&d())}function d(){if(!h){var t=a(f);h=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,h=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new p(t,e)),1!==c.length||h||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";function r(t){if(Array.isArray(t))return t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";var r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o={},s=0,a=0;function u(t){var e="";do{e=i[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function c(){var t=u(+new Date);return t!==r?(s=0,r=t):t+"."+u(s++)}for(;a<64;a++)o[i[a]]=a;c.encode=u,c.decode=function(t){var e=0;for(a=0;a<t.length;a++)e=64*e+o[t.charAt(a)];return e},t.exports=c},function(t,e,n){"use strict";(function(e){!function(n){var r=2147483647;function i(t){var e=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),n=1779033703,r=3144134277,i=1013904242,o=2773480762,s=1359893119,a=2600822924,u=528734635,c=1541459225,h=new Uint32Array(64);function l(t){for(var l=0,f=t.length;f>=64;){var d=n,p=r,v=i,g=o,m=s,y=a,b=u,w=c,x=void 0,_=void 0,T=void 0,E=void 0,S=void 0;for(_=0;_<16;_++)T=l+4*_,h[_]=(255&t[T])<<24|(255&t[T+1])<<16|(255&t[T+2])<<8|255&t[T+3];for(_=16;_<64;_++)E=((x=h[_-2])>>>17|x<<15)^(x>>>19|x<<13)^x>>>10,S=((x=h[_-15])>>>7|x<<25)^(x>>>18|x<<14)^x>>>3,h[_]=(E+h[_-7]|0)+(S+h[_-16]|0)|0;for(_=0;_<64;_++)E=(((m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7))+(m&y^~m&b)|0)+(w+(e[_]+h[_]|0)|0)|0,S=((d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10))+(d&p^d&v^p&v)|0,w=b,b=y,y=m,m=g+E|0,g=v,v=p,p=d,d=E+S|0;n=n+d|0,r=r+p|0,i=i+v|0,o=o+g|0,s=s+m|0,a=a+y|0,u=u+b|0,c=c+w|0,l+=64,f-=64}}l(t);var f,d=t.length%64,p=t.length/536870912|0,v=t.length<<3,g=d<56?56:120,m=t.slice(t.length-d,t.length);for(m.push(128),f=d+1;f<g;f++)m.push(0);return m.push(p>>>24&255),m.push(p>>>16&255),m.push(p>>>8&255),m.push(p>>>0&255),m.push(v>>>24&255),m.push(v>>>16&255),m.push(v>>>8&255),m.push(v>>>0&255),l(m),[n>>>24&255,n>>>16&255,n>>>8&255,n>>>0&255,r>>>24&255,r>>>16&255,r>>>8&255,r>>>0&255,i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255,o>>>24&255,o>>>16&255,o>>>8&255,o>>>0&255,s>>>24&255,s>>>16&255,s>>>8&255,s>>>0&255,a>>>24&255,a>>>16&255,a>>>8&255,a>>>0&255,u>>>24&255,u>>>16&255,u>>>8&255,u>>>0&255,c>>>24&255,c>>>16&255,c>>>8&255,c>>>0&255]}function o(t,e,n){t=t.length<=64?t:i(t);var r,o=64+e.length+4,s=new Array(o),a=new Array(64),u=[];for(r=0;r<64;r++)s[r]=54;for(r=0;r<t.length;r++)s[r]^=t[r];for(r=0;r<e.length;r++)s[64+r]=e[r];for(r=o-4;r<o;r++)s[r]=0;for(r=0;r<64;r++)a[r]=92;for(r=0;r<t.length;r++)a[r]^=t[r];function c(){for(var t=o-1;t>=o-4;t--){if(s[t]++,s[t]<=255)return;s[t]=0}}for(;n>=32;)c(),u=u.concat(i(a.concat(i(s)))),n-=32;return n>0&&(c(),u=u.concat(i(a.concat(i(s))).slice(0,n))),u}function s(t,e,n,r,i){var o;for(h(t,16*(2*n-1),i,0,16),o=0;o<2*n;o++)c(t,16*o,i,16),u(i,r),h(i,0,t,e+16*o,16);for(o=0;o<n;o++)h(t,e+2*o*16,t,16*o,16);for(o=0;o<n;o++)h(t,e+16*(2*o+1),t,16*(o+n),16)}function a(t,e){return t<<e|t>>>32-e}function u(t,e){h(t,0,e,0,16);for(var n=8;n>0;n-=2)e[4]^=a(e[0]+e[12],7),e[8]^=a(e[4]+e[0],9),e[12]^=a(e[8]+e[4],13),e[0]^=a(e[12]+e[8],18),e[9]^=a(e[5]+e[1],7),e[13]^=a(e[9]+e[5],9),e[1]^=a(e[13]+e[9],13),e[5]^=a(e[1]+e[13],18),e[14]^=a(e[10]+e[6],7),e[2]^=a(e[14]+e[10],9),e[6]^=a(e[2]+e[14],13),e[10]^=a(e[6]+e[2],18),e[3]^=a(e[15]+e[11],7),e[7]^=a(e[3]+e[15],9),e[11]^=a(e[7]+e[3],13),e[15]^=a(e[11]+e[7],18),e[1]^=a(e[0]+e[3],7),e[2]^=a(e[1]+e[0],9),e[3]^=a(e[2]+e[1],13),e[0]^=a(e[3]+e[2],18),e[6]^=a(e[5]+e[4],7),e[7]^=a(e[6]+e[5],9),e[4]^=a(e[7]+e[6],13),e[5]^=a(e[4]+e[7],18),e[11]^=a(e[10]+e[9],7),e[8]^=a(e[11]+e[10],9),e[9]^=a(e[8]+e[11],13),e[10]^=a(e[9]+e[8],18),e[12]^=a(e[15]+e[14],7),e[13]^=a(e[12]+e[15],9),e[14]^=a(e[13]+e[12],13),e[15]^=a(e[14]+e[13],18);for(var r=0;r<16;++r)t[r]+=e[r]}function c(t,e,n,r){for(var i=0;i<r;i++)n[i]^=t[e+i]}function h(t,e,n,r,i){for(;i--;)n[r++]=t[e++]}function l(t){if(!t||"number"!==typeof t.length)return!1;for(var e=0;e<t.length;e++){var n=t[e];if("number"!==typeof n||n%1||n<0||n>=256)return!1}return!0}function f(t,e){if("number"!==typeof t||t%1)throw new Error("invalid "+e);return t}function d(t,n,i,a,u,d,p){if(i=f(i,"N"),a=f(a,"r"),u=f(u,"p"),d=f(d,"dkLen"),0===i||0!==(i&i-1))throw new Error("N must be power of 2");if(i>r/128/a)throw new Error("N too large");if(a>r/128/u)throw new Error("r too large");if(!l(t))throw new Error("password must be an array or buffer");if(t=Array.prototype.slice.call(t),!l(n))throw new Error("salt must be an array or buffer");n=Array.prototype.slice.call(n);for(var v=o(t,n,128*u*a),g=new Uint32Array(32*u*a),m=0;m<g.length;m++){var y=4*m;g[m]=(255&v[y+3])<<24|(255&v[y+2])<<16|(255&v[y+1])<<8|(255&v[y+0])<<0}var b,w,x=new Uint32Array(64*a),_=new Uint32Array(32*a*i),T=32*a,E=new Uint32Array(16),S=new Uint32Array(16),k=u*i*2,A=0,O=null,C=!1,P=0,I=0,R=p?parseInt(1e3/a):4294967295,M="undefined"!==typeof e?e:setTimeout,N=function e(){if(C)return p(new Error("cancelled"),A/k);var n;switch(P){case 0:h(g,w=32*I*a,x,0,T),P=1,b=0;case 1:(n=i-b)>R&&(n=R);for(var r=0;r<n;r++)h(x,0,_,(b+r)*T,T),s(x,T,a,E,S);if(b+=n,A+=n,p){var l=parseInt(1e3*A/k);if(l!==O){if(C=p(null,A/k))break;O=l}}if(b<i)break;b=0,P=2;case 2:(n=i-b)>R&&(n=R);for(var f=0;f<n;f++){var m=x[16*(2*a-1)]&i-1;c(_,m*T,x,T),s(x,T,a,E,S)}if(b+=n,A+=n,p){var y=parseInt(1e3*A/k);if(y!==O){if(C=p(null,A/k))break;O=y}}if(b<i)break;if(h(x,0,g,w,T),++I<u){P=0;break}v=[];for(var N=0;N<g.length;N++)v.push(g[N]>>0&255),v.push(g[N]>>8&255),v.push(g[N]>>16&255),v.push(g[N]>>24&255);var L=o(t,v,d);return p&&p(null,1,L),L}p&&M(e)};if(!p)for(;;){var L=N();if(void 0!=L)return L}N()}var p={scrypt:function(t,e,n,r,i,o,s){return new Promise((function(a,u){var c=0;s&&s(0),d(t,e,n,r,i,o,(function(t,e,n){if(t)u(t);else if(n)s&&1!==c&&s(1),a(new Uint8Array(n));else if(s&&e!==c)return c=e,s(e)}))}))},syncScrypt:function(t,e,n,r,i,o){return new Uint8Array(d(t,e,n,r,i,o))}};t.exports=p}()}).call(this,n(139).setImmediate)},,,,,function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,e){for(var n,a,u=s(t),c=1;c<arguments.length;c++){for(var h in n=Object(arguments[c]))i.call(n,h)&&(u[h]=n[h]);if(r){a=r(n);for(var l=0;l<a.length;l++)o.call(n,a[l])&&(u[a[l]]=n[a[l]])}}return u}},function(t,e,n){"use strict";t.exports=function(t){var e=t.uri,n=t.name,r=t.type;this.uri=e,this.name=n,this.type=r}},function(t,e,n){"use strict";var r=n(85);t.exports=function(t){return"undefined"!==typeof File&&t instanceof File||"undefined"!==typeof Blob&&t instanceof Blob||t instanceof r}},function(t,e,n){"use strict";n.d(e,"a",(function(){return W})),n.d(e,"b",(function(){return C})),n.d(e,"c",(function(){return _})),n.d(e,"d",(function(){return q}));var r=n(7),i=n(8),o=n(11),s=n(9),a=n(10),u=n(16),c=n(59);var h=n(77);function l(t,e,n){return l=Object(h.a)()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&Object(c.a)(i,n.prototype),i},l.apply(null,arguments)}function f(t){var e="function"===typeof Map?new Map:void 0;return f=function(t){if(null===t||(n=t,-1===Function.toString.call(n).indexOf("[native code]")))return t;var n;if("function"!==typeof t)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return l(t,arguments,Object(u.a)(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Object(c.a)(r,t)},f(t)}var d=n(14),p=n(3),v=n.n(p),g=n(17),m=n(24),y=!1,b="undefined"!==typeof window?window:{},w=b.document||{head:{}},x={$flags$:0,$resourcesUrl$:"",jmp:function(t){return t()},raf:function(t){return requestAnimationFrame(t)},ael:function(t,e,n,r){return t.addEventListener(e,n,r)},rel:function(t,e,n,r){return t.removeEventListener(e,n,r)},ce:function(t,e){return new CustomEvent(t,e)}},_=function(t){return Promise.resolve(t)},T=function(){try{return new CSSStyleSheet,"function"===typeof(new CSSStyleSheet).replace}catch(t){}return!1}(),E="{visibility:hidden}.hydrated{visibility:inherit}",S=new WeakMap,k=function(t,e,n){var r=Z.get(t);T&&n?(r=r||new CSSStyleSheet).replace(e):r=e,Z.set(t,r)},A=function(t){var e=t.$cmpMeta$,n=t.$hostElement$,r=(e.$tagName$,function(){});!function(t,e,n,r){var i=O(e),o=Z.get(i);if(t=11===t.nodeType?t:w,o)if("string"===typeof o){t=t.head||t;var s,a=S.get(t);a||S.set(t,a=new Set),a.has(i)||((s=w.createElement("style")).innerHTML=o,t.insertBefore(s,t.querySelector("link")),a&&a.add(i))}else t.adoptedStyleSheets.includes(o)||(t.adoptedStyleSheets=[].concat(Object(m.a)(t.adoptedStyleSheets),[o]))}(n.getRootNode(),e);r()},O=function(t,e){return"sc-"+t.$tagName$},C=function(t){return H(t).$hostElement$},P=function(t,e){e&&!t.$onRenderResolve$&&e["s-p"]&&e["s-p"].push(new Promise((function(e){return t.$onRenderResolve$=e})))},I=function(t,e){if(t.$flags$|=16,!(4&t.$flags$)){P(t,t.$ancestorComponent$);return st((function(){return R(t,e)}))}t.$flags$|=512},R=function(t,e){var n=(t.$cmpMeta$.$tagName$,function(){}),r=t.$lazyInstance$;return n(),j(undefined,(function(){return M(t,r,e)}))},M=function(){var t=Object(g.a)(v.a.mark((function t(e,n,r){var i,o,s,a,u,c;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=e.$hostElement$,e.$cmpMeta$.$tagName$,o=function(){},s=i["s-rc"],r&&A(e),e.$cmpMeta$.$tagName$,a=function(){},N(e,n),s&&(s.map((function(t){return t()})),i["s-rc"]=void 0),a(),o(),u=i["s-p"],c=function(){return L(e)},0===u.length?c():(Promise.all(u).then(c),e.$flags$|=4,u.length=0);case 12:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),N=function(t,e,n){try{e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2}catch(r){$(r,t.$hostElement$)}return null},L=function(t){t.$cmpMeta$.$tagName$;var e=t.$hostElement$,n=function(){},r=t.$ancestorComponent$;64&t.$flags$?n():(t.$flags$|=64,B(e),n(),t.$onReadyResolve$(e),r||D()),t.$onInstanceResolve$(e),t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),512&t.$flags$&&ot((function(){return I(t,!1)})),t.$flags$&=-517},D=function(t){B(w.documentElement),ot((function(){return function(t,e,n){var r=x.ce(e,n);return t.dispatchEvent(r),r}(b,"appload",{detail:{namespace:"ionphaser"}})}))},F=function(t,e,n){if(t&&t[e])try{return t[e](n)}catch(r){$(r)}},j=function(t,e){return t&&t.then?t.then(e):e()},B=function(t){return t.classList.add("hydrated")},U=function(t,e,n){if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);var r=Object.entries(e.$members$),i=t.prototype;if(r.map((function(t){var r=Object(d.a)(t,2),o=r[0],s=Object(d.a)(r[1],1)[0];31&s||2&n&&32&s?Object.defineProperty(i,o,{get:function(){return t=o,H(this).$instanceValues$.get(t);var t},set:function(t){!function(t,e,n,r){var i=H(t),o=i.$hostElement$,s=i.$instanceValues$.get(e),a=i.$flags$,u=i.$lazyInstance$;if(n=function(t,e){return null!=t&&"object"!==(n=typeof(n=t))&&"function"!==n&&4&e?"false"!==t&&(""===t||!!t):t;var n}(n,r.$members$[e][0]),(!(8&a)||void 0===s)&&n!==s&&(i.$instanceValues$.set(e,n),u)){if(r.$watchers$&&128&a){var c=r.$watchers$[e];c&&c.map((function(t){try{u[t](n,s,e)}catch(r){$(r,o)}}))}2===(18&a)&&I(i,!1)}}(this,o,t,e)},configurable:!0,enumerable:!0}):1&n&&64&s&&Object.defineProperty(i,o,{value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=H(this);return r.$onInstancePromise$.then((function(){var t;return(t=r.$lazyInstance$)[o].apply(t,e)}))}})})),1&n){var o=new Map;i.attributeChangedCallback=function(t,e,n){var r=this;x.jmp((function(){var e=o.get(t);r[e]=(null!==n||"boolean"!==typeof r[e])&&n}))},t.observedAttributes=r.filter((function(t){var e=Object(d.a)(t,2);e[0];return 15&e[1][0]})).map((function(t){var e=Object(d.a)(t,2),n=e[0],r=e[1][1]||n;return o.set(r,n),r}))}}return t},V=function(){var t=Object(g.a)(v.a.mark((function t(e,n,r,i,o){var s,a,u,c,h,l,f;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==(32&n.$flags$)){t.next=18;break}if(n.$flags$|=32,!(o=Q(r)).then){t.next=9;break}return s=function(){},t.next=7,o;case 7:o=t.sent,s();case 9:o.isProxied||(r.$watchers$=o.watchers,U(o,r,2),o.isProxied=!0),r.$tagName$,a=function(){},n.$flags$|=8;try{new o(n)}catch(e){$(e)}n.$flags$&=-9,n.$flags$|=128,a(),z(n.$lazyInstance$),o.style&&(u=o.style,c=O(r),Z.has(c)||(r.$tagName$,h=function(){},k(c,u,!!(1&r.$flags$)),h()));case 18:l=n.$ancestorComponent$,f=function(){return I(n,!0)},l&&l["s-rc"]?l["s-rc"].push(f):f();case 21:case"end":return t.stop()}}),t)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}(),z=function(t){F(t,"connectedCallback")},G=function(t){if(0===(1&x.$flags$)){var e=H(t),n=e.$cmpMeta$,r=(n.$tagName$,function(){});if(1&e.$flags$)z(e.$lazyInstance$);else{e.$flags$|=1;for(var i=t;i=i.parentNode||i.host;)if(i["s-p"]){P(e,e.$ancestorComponent$=i);break}n.$members$&&Object.entries(n.$members$).map((function(e){var n=Object(d.a)(e,2),r=n[0];if(31&Object(d.a)(n[1],1)[0]&&t.hasOwnProperty(r)){var i=t[r];delete t[r],t[r]=i}})),V(t,e,n)}r()}},Y=function(t){if(0===(1&x.$flags$)){var e=H(t).$lazyInstance$;F(e,"disconnectedCallback")}},W=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=function(){},c=[],h=n.exclude||[],l=b.customElements,d=w.head,p=d.querySelector("meta[charset]"),v=w.createElement("style"),g=[],m=!0;Object.assign(x,n),x.$resourcesUrl$=new URL(n.resourcesUrl||"./",w.baseURI).href,t.map((function(t){return t[1].map((function(n){var u={$flags$:n[0],$tagName$:n[1],$members$:n[2],$listeners$:n[3]};u.$members$=n[2],u.$watchers$={};var d=u.$tagName$,p=function(t){Object(s.a)(c,t);var n=Object(a.a)(c);function c(t){var e;return Object(r.a)(this,c),e=n.call(this,t),t=Object(o.a)(e),K(t,u),e}return Object(i.a)(c,[{key:"connectedCallback",value:function(){var t=this;e&&(clearTimeout(e),e=null),m?g.push(this):x.jmp((function(){return G(t)}))}},{key:"disconnectedCallback",value:function(){var t=this;x.jmp((function(){return Y(t)}))}},{key:"componentOnReady",value:function(){return H(this).$onReadyPromise$}}]),c}(f(HTMLElement));u.$lazyBundleId$=t[0],h.includes(d)||l.get(d)||(c.push(d),l.define(d,U(p,u,1)))}))})),v.innerHTML=c+E,v.setAttribute("data-styles",""),d.insertBefore(v,p?p.nextSibling:d.firstChild),m=!1,g.length?g.map((function(t){return t.connectedCallback()})):x.jmp((function(){return e=setTimeout(D,30)})),u()},X=new WeakMap,H=function(t){return X.get(t)},q=function(t,e){return X.set(e.$lazyInstance$=t,e)},K=function(t,e){var n={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return n.$onInstancePromise$=new Promise((function(t){return n.$onInstanceResolve$=t})),n.$onReadyPromise$=new Promise((function(t){return n.$onReadyResolve$=t})),t["s-p"]=[],t["s-rc"]=[],X.set(t,n)},$=function(t,e){return(0,console.error)(t,e)},J=new Map,Q=function(t,e,r){var i=t.$tagName$.replace(/-/g,"_"),o=t.$lazyBundleId$,s=J.get(o);return s?s[i]:n(170)("./".concat(o,".entry.js")).then((function(t){return J.set(o,t),t[i]}),$)},Z=new Map,tt=[],et=[],nt=function(t,e){return function(n){t.push(n),y||(y=!0,e&&4&x.$flags$?ot(it):x.raf(it))}},rt=function(t){for(var e=0;e<t.length;e++)try{t[e](performance.now())}catch(n){$(n)}t.length=0},it=function t(){rt(tt),rt(et),(y=tt.length>0)&&x.raf(t)},ot=function(t){return _().then(t)},st=nt(et,!0)},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},a=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))},u=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},c=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},h=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.gql=e.batchRequests=e.request=e.rawRequest=e.GraphQLClient=e.ClientError=void 0;var l=s(n(125)),f=l,d=n(173),p=h(n(126)),v=n(96),g=n(96);Object.defineProperty(e,"ClientError",{enumerable:!0,get:function(){return g.ClientError}});var m=function(t){var e={};return t&&("undefined"!==typeof Headers&&t instanceof Headers||t instanceof f.Headers?e=function(t){var e={};return t.forEach((function(t,n){e[n]=t})),e}(t):Array.isArray(t)?t.forEach((function(t){var n=t[0],r=t[1];e[n]=r})):e=t),e},y=function(t){return t.replace(/([\s,]|#[^\n\r]+)+/g," ").trim()},b=function(t){var e=t.url,n=t.query,i=t.variables,o=t.operationName,s=t.headers,c=t.fetch,h=t.fetchOptions;return a(void 0,void 0,void 0,(function(){var t;return u(this,(function(a){switch(a.label){case 0:return t=p.default(n,i,o),[4,c(e,r({method:"POST",headers:r(r({},"string"===typeof t?{"Content-Type":"application/json"}:{}),s),body:t},h))];case 1:return[2,a.sent()]}}))}))},w=function(t){var e=t.url,n=t.query,i=t.variables,o=t.operationName,s=t.headers,c=t.fetch,h=t.fetchOptions;return a(void 0,void 0,void 0,(function(){var t;return u(this,(function(a){switch(a.label){case 0:return t=function(t){var e=t.query,n=t.variables,r=t.operationName;if(!Array.isArray(e)){var i=["query="+encodeURIComponent(y(e))];return n&&i.push("variables="+encodeURIComponent(JSON.stringify(n))),r&&i.push("operationName="+encodeURIComponent(r)),i.join("&")}if("undefined"!==typeof n&&!Array.isArray(n))throw new Error("Cannot create query with given variable type, array expected");var o=e.reduce((function(t,e,r){return t.push({query:y(e),variables:n?JSON.stringify(n[r]):void 0}),t}),[]);return"query="+encodeURIComponent(JSON.stringify(o))}({query:n,variables:i,operationName:o}),[4,c(e+"?"+t,r({method:"GET",headers:s},h))];case 1:return[2,a.sent()]}}))}))},x=function(){function t(t,e){this.url=t,this.options=e||{}}return t.prototype.rawRequest=function(t,e,n){var i=this.options,o=i.headers,s=i.fetch,a=void 0===s?l.default:s,u=i.method,h=void 0===u?"POST":u,f=c(i,["headers","fetch","method"]);return _({url:this.url,query:t,variables:e,headers:r(r({},m(o)),m(n)),operationName:void 0,fetch:a,method:h,fetchOptions:f})},t.prototype.request=function(t,e,n){return a(this,void 0,void 0,(function(){var i,o,s,a,h,f,d,p,v,g,y;return u(this,(function(u){switch(u.label){case 0:return i=this.options,o=i.headers,s=i.fetch,a=void 0===s?l.default:s,h=i.method,f=void 0===h?"POST":h,d=c(i,["headers","fetch","method"]),p=this.url,v=S(t),g=v.query,y=v.operationName,[4,_({url:p,query:g,variables:e,headers:r(r({},m(o)),m(n)),operationName:y,fetch:a,method:f,fetchOptions:d})];case 1:return[2,u.sent().data]}}))}))},t.prototype.batchRequests=function(t,e){return a(this,void 0,void 0,(function(){var n,i,o,s,a,h,f,d,p,v;return u(this,(function(u){switch(u.label){case 0:return n=this.options,i=n.headers,o=n.fetch,s=void 0===o?l.default:o,a=n.method,h=void 0===a?"POST":a,f=c(n,["headers","fetch","method"]),d=this.url,p=t.map((function(t){return S(t.document).query})),v=t.map((function(t){return t.variables})),[4,_({url:d,query:p,variables:v,headers:r(r({},m(i)),m(e)),operationName:void 0,fetch:s,method:h,fetchOptions:f})];case 1:return[2,u.sent().data]}}))}))},t.prototype.setHeaders=function(t){return this.options.headers=t,this},t.prototype.setHeader=function(t,e){var n,r=this.options.headers;return r?r[t]=e:this.options.headers=((n={})[t]=e,n),this},t.prototype.setEndpoint=function(t){return this.url=t,this},t}();function _(t){var e=t.url,n=t.query,i=t.variables,o=t.headers,s=t.operationName,c=t.fetch,h=t.method,l=void 0===h?"POST":h,f=t.fetchOptions;return a(this,void 0,void 0,(function(){var t,a,h,d,p,g,m,y;return u(this,(function(u){switch(u.label){case 0:return t="POST"===l.toUpperCase()?b:w,a=Array.isArray(n),[4,t({url:e,query:n,variables:i,operationName:s,headers:o,fetch:c,fetchOptions:f})];case 1:return[4,E(h=u.sent())];case 2:if(d=u.sent(),p=a&&Array.isArray(d)?!d.some((function(t){return!t.data})):!!d.data,h.ok&&!d.errors&&p)return g=h.headers,m=h.status,[2,r(r({},a?{data:d}:d),{headers:g,status:m})];throw y="string"===typeof d?{error:d}:d,new v.ClientError(r(r({},y),{status:h.status,headers:h.headers}),{query:n,variables:i})}}))}))}function T(t,e,n,r){return a(this,void 0,void 0,(function(){return u(this,(function(i){return[2,new x(t).request(e,n,r)]}))}))}function E(t){var e=t.headers.get("Content-Type");return e&&e.startsWith("application/json")?t.json():t.text()}function S(t){var e;if("string"===typeof t)return{query:t};var n=void 0,r=t.definitions.filter((function(t){return"OperationDefinition"===t.kind}));return 1===r.length&&(n=null===(e=r[0].name)||void 0===e?void 0:e.value),{query:d.print(t),operationName:n}}e.GraphQLClient=x,e.rawRequest=function(t,e,n,r){return a(this,void 0,void 0,(function(){return u(this,(function(i){return[2,new x(t).rawRequest(e,n,r)]}))}))},e.request=T,e.batchRequests=function(t,e,n){return a(this,void 0,void 0,(function(){return u(this,(function(r){return[2,new x(t).batchRequests(e,n)]}))}))},e.default=T,e.gql=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t.reduce((function(t,n,r){return""+t+n+(r in e?e[r]:"")}),"")}},function(t,e,n){"use strict";for(var r="qpzry9x8gf2tvdw0s3jn54khce6mua7l",i={},o=0;o<r.length;o++){var s=r.charAt(o);if(void 0!==i[s])throw new TypeError(s+" is ambiguous");i[s]=o}function a(t){var e=t>>25;return(33554431&t)<<5^996825010&-(e>>0&1)^642813549&-(e>>1&1)^513874426&-(e>>2&1)^1027748829&-(e>>3&1)^705979059&-(e>>4&1)}function u(t){for(var e=1,n=0;n<t.length;++n){var r=t.charCodeAt(n);if(r<33||r>126)return"Invalid prefix ("+t+")";e=a(e)^r>>5}for(e=a(e),n=0;n<t.length;++n){var i=t.charCodeAt(n);e=a(e)^31&i}return e}function c(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var n=t.toLowerCase(),r=t.toUpperCase();if(t!==n&&t!==r)return"Mixed-case string "+t;var o=(t=n).lastIndexOf("1");if(-1===o)return"No separator character for "+t;if(0===o)return"Missing prefix for "+t;var s=t.slice(0,o),c=t.slice(o+1);if(c.length<6)return"Data too short";var h=u(s);if("string"===typeof h)return h;for(var l=[],f=0;f<c.length;++f){var d=c.charAt(f),p=i[d];if(void 0===p)return"Unknown character "+d;h=a(h)^p,f+6>=c.length||l.push(p)}return 1!==h?"Invalid checksum for "+t:{prefix:s,words:l}}function h(t,e,n,r){for(var i=0,o=0,s=(1<<n)-1,a=[],u=0;u<t.length;++u)for(i=i<<e|t[u],o+=e;o>=n;)o-=n,a.push(i>>o&s);if(r)o>0&&a.push(i<<n-o&s);else{if(o>=e)return"Excess padding";if(i<<n-o&s)return"Non-zero padding"}return a}t.exports={decodeUnsafe:function(){var t=c.apply(null,arguments);if("object"===typeof t)return t},decode:function(t){var e=c.apply(null,arguments);if("object"===typeof e)return e;throw new Error(e)},encode:function(t,e,n){if(n=n||90,t.length+7+e.length>n)throw new TypeError("Exceeds length limit");var i=u(t=t.toLowerCase());if("string"===typeof i)throw new Error(i);for(var o=t+"1",s=0;s<e.length;++s){var c=e[s];if(c>>5!==0)throw new Error("Non 5-bit word");i=a(i)^c,o+=r.charAt(c)}for(s=0;s<6;++s)i=a(i);for(i^=1,s=0;s<6;++s){o+=r.charAt(i>>5*(5-s)&31)}return o},toWordsUnsafe:function(t){var e=h(t,8,5,!0);if(Array.isArray(e))return e},toWords:function(t){var e=h(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)},fromWordsUnsafe:function(t){var e=h(t,5,8,!1);if(Array.isArray(e))return e},fromWords:function(t){var e=h(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}}},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};Object.create;Object.create},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(147);Object.defineProperty(e,"default",{enumerable:!0,get:function(){return o(r).default}});var i=n(163);function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"jsNumberForAddress",{enumerable:!0,get:function(){return o(i).default}})},function(t,e,n){var r=n(164);t.exports=d,t.exports.parse=o,t.exports.compile=function(t,e){return a(o(t,e),e)},t.exports.tokensToFunction=a,t.exports.tokensToRegExp=f;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(t,e){for(var n,r=[],o=0,s=0,a="",h=e&&e.delimiter||"/";null!=(n=i.exec(t));){var l=n[0],f=n[1],d=n.index;if(a+=t.slice(s,d),s=d+l.length,f)a+=f[1];else{var p=t[s],v=n[2],g=n[3],m=n[4],y=n[5],b=n[6],w=n[7];a&&(r.push(a),a="");var x=null!=v&&null!=p&&p!==v,_="+"===b||"*"===b,T="?"===b||"*"===b,E=n[2]||h,S=m||y;r.push({name:g||o++,prefix:v||"",delimiter:E,optional:T,repeat:_,partial:x,asterisk:!!w,pattern:S?c(S):w?".*":"[^"+u(E)+"]+?"})}}return s<t.length&&(a+=t.substr(s)),a&&r.push(a),r}function s(t){return encodeURI(t).replace(/[\/?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function a(t,e){for(var n=new Array(t.length),i=0;i<t.length;i++)"object"===typeof t[i]&&(n[i]=new RegExp("^(?:"+t[i].pattern+")$",l(e)));return function(e,i){for(var o="",a=e||{},u=(i||{}).pretty?s:encodeURIComponent,c=0;c<t.length;c++){var h=t[c];if("string"!==typeof h){var l,f=a[h.name];if(null==f){if(h.optional){h.partial&&(o+=h.prefix);continue}throw new TypeError('Expected "'+h.name+'" to be defined')}if(r(f)){if(!h.repeat)throw new TypeError('Expected "'+h.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(h.optional)continue;throw new TypeError('Expected "'+h.name+'" to not be empty')}for(var d=0;d<f.length;d++){if(l=u(f[d]),!n[c].test(l))throw new TypeError('Expected all "'+h.name+'" to match "'+h.pattern+'", but received `'+JSON.stringify(l)+"`");o+=(0===d?h.prefix:h.delimiter)+l}}else{if(l=h.asterisk?encodeURI(f).replace(/[?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})):u(f),!n[c].test(l))throw new TypeError('Expected "'+h.name+'" to match "'+h.pattern+'", but received "'+l+'"');o+=h.prefix+l}}else o+=h}return o}}function u(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function c(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function h(t,e){return t.keys=e,t}function l(t){return t&&t.sensitive?"":"i"}function f(t,e,n){r(e)||(n=e||n,e=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,s="",a=0;a<t.length;a++){var c=t[a];if("string"===typeof c)s+=u(c);else{var f=u(c.prefix),d="(?:"+c.pattern+")";e.push(c),c.repeat&&(d+="(?:"+f+d+")*"),s+=d=c.optional?c.partial?f+"("+d+")?":"(?:"+f+"("+d+"))?":f+"("+d+")"}}var p=u(n.delimiter||"/"),v=s.slice(-p.length)===p;return i||(s=(v?s.slice(0,-p.length):s)+"(?:"+p+"(?=$))?"),s+=o?"$":i&&v?"":"(?="+p+"|$)",h(new RegExp("^"+s,l(n)),e)}function d(t,e,n){return r(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?function(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return h(t,e)}(t,e):r(t)?function(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(d(t[i],e,n).source);return h(new RegExp("(?:"+r.join("|")+")",l(n)),e)}(t,e,n):function(t,e,n){return f(o(t,n),e,n)}(t,e,n)}},,,function(t,e,n){"use strict";var r=n(86);t.exports=function t(e,n,i){var o;void 0===n&&(n=""),void 0===i&&(i=r);var s=new Map;function a(t,e){var n=s.get(e);n?n.push.apply(n,t):s.set(e,t)}if(i(e))o=null,a([n],e);else{var u=n?n+".":"";if("undefined"!==typeof FileList&&e instanceof FileList)o=Array.prototype.map.call(e,(function(t,e){return a([""+u+e],t),null}));else if(Array.isArray(e))o=e.map((function(e,n){var r=t(e,""+u+n,i);return r.files.forEach(a),r.clone}));else if(e&&e.constructor===Object)for(var c in o={},e){var h=t(e[c],""+u+c,i);h.files.forEach(a),o[c]=h.clone}else o=e}return{clone:o,files:s}}},function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.ClientError=void 0;var i=function(t){function e(n,r){var i=this,o=e.extractMessage(n)+": "+JSON.stringify({response:n,request:r});return i=t.call(this,o)||this,Object.setPrototypeOf(i,e.prototype),i.response=n,i.request=r,"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(i,e),i}return r(e,t),e.extractMessage=function(t){try{return t.errors[0].message}catch(e){return"GraphQL Error (Code: "+t.status+")"}},e}(Error);e.ClientError=i},function(t,e,n){"use strict";var r=n(46).rotr32;function i(t,e,n){return t&e^~t&n}function o(t,e,n){return t&e^t&n^e&n}function s(t,e,n){return t^e^n}e.ft_1=function(t,e,n,r){return 0===t?i(e,n,r):1===t||3===t?s(e,n,r):2===t?o(e,n,r):void 0},e.ch32=i,e.maj32=o,e.p32=s,e.s0_256=function(t){return r(t,2)^r(t,13)^r(t,22)},e.s1_256=function(t){return r(t,6)^r(t,11)^r(t,25)},e.g0_256=function(t){return r(t,7)^r(t,18)^t>>>3},e.g1_256=function(t){return r(t,17)^r(t,19)^t>>>10}},function(t,e,n){"use strict";var r=n(46),i=n(65),o=n(97),s=n(64),a=r.sum32,u=r.sum32_4,c=r.sum32_5,h=o.ch32,l=o.maj32,f=o.s0_256,d=o.s1_256,p=o.g0_256,v=o.g1_256,g=i.BlockHash,m=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=m,this.W=new Array(64)}r.inherits(y,g),t.exports=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(t,e){for(var n=this.W,r=0;r<16;r++)n[r]=t[e+r];for(;r<n.length;r++)n[r]=u(v(n[r-2]),n[r-7],p(n[r-15]),n[r-16]);var i=this.h[0],o=this.h[1],g=this.h[2],m=this.h[3],y=this.h[4],b=this.h[5],w=this.h[6],x=this.h[7];for(s(this.k.length===n.length),r=0;r<n.length;r++){var _=c(x,d(y),h(y,b,w),this.k[r],n[r]),T=a(f(i),l(i,o,g));x=w,w=b,b=y,y=a(m,_),m=g,g=o,o=i,i=a(_,T)}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],g),this.h[3]=a(this.h[3],m),this.h[4]=a(this.h[4],y),this.h[5]=a(this.h[5],b),this.h[6]=a(this.h[6],w),this.h[7]=a(this.h[7],x)},y.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(t,e,n){"use strict";var r=n(46),i=n(65),o=n(64),s=r.rotr64_hi,a=r.rotr64_lo,u=r.shr64_hi,c=r.shr64_lo,h=r.sum64,l=r.sum64_hi,f=r.sum64_lo,d=r.sum64_4_hi,p=r.sum64_4_lo,v=r.sum64_5_hi,g=r.sum64_5_lo,m=i.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;m.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}function w(t,e,n,r,i){var o=t&n^~t&i;return o<0&&(o+=4294967296),o}function x(t,e,n,r,i,o){var s=e&r^~e&o;return s<0&&(s+=4294967296),s}function _(t,e,n,r,i){var o=t&n^t&i^n&i;return o<0&&(o+=4294967296),o}function T(t,e,n,r,i,o){var s=e&r^e&o^r&o;return s<0&&(s+=4294967296),s}function E(t,e){var n=s(t,e,28)^s(e,t,2)^s(e,t,7);return n<0&&(n+=4294967296),n}function S(t,e){var n=a(t,e,28)^a(e,t,2)^a(e,t,7);return n<0&&(n+=4294967296),n}function k(t,e){var n=s(t,e,14)^s(t,e,18)^s(e,t,9);return n<0&&(n+=4294967296),n}function A(t,e){var n=a(t,e,14)^a(t,e,18)^a(e,t,9);return n<0&&(n+=4294967296),n}function O(t,e){var n=s(t,e,1)^s(t,e,8)^u(t,e,7);return n<0&&(n+=4294967296),n}function C(t,e){var n=a(t,e,1)^a(t,e,8)^c(t,e,7);return n<0&&(n+=4294967296),n}function P(t,e){var n=s(t,e,19)^s(e,t,29)^u(t,e,6);return n<0&&(n+=4294967296),n}function I(t,e){var n=a(t,e,19)^a(e,t,29)^c(t,e,6);return n<0&&(n+=4294967296),n}r.inherits(b,m),t.exports=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(t,e){for(var n=this.W,r=0;r<32;r++)n[r]=t[e+r];for(;r<n.length;r+=2){var i=P(n[r-4],n[r-3]),o=I(n[r-4],n[r-3]),s=n[r-14],a=n[r-13],u=O(n[r-30],n[r-29]),c=C(n[r-30],n[r-29]),h=n[r-32],l=n[r-31];n[r]=d(i,o,s,a,u,c,h,l),n[r+1]=p(i,o,s,a,u,c,h,l)}},b.prototype._update=function(t,e){this._prepareBlock(t,e);var n=this.W,r=this.h[0],i=this.h[1],s=this.h[2],a=this.h[3],u=this.h[4],c=this.h[5],d=this.h[6],p=this.h[7],m=this.h[8],y=this.h[9],b=this.h[10],O=this.h[11],C=this.h[12],P=this.h[13],I=this.h[14],R=this.h[15];o(this.k.length===n.length);for(var M=0;M<n.length;M+=2){var N=I,L=R,D=k(m,y),F=A(m,y),j=w(m,y,b,O,C),B=x(m,y,b,O,C,P),U=this.k[M],V=this.k[M+1],z=n[M],G=n[M+1],Y=v(N,L,D,F,j,B,U,V,z,G),W=g(N,L,D,F,j,B,U,V,z,G);N=E(r,i),L=S(r,i),D=_(r,i,s,a,u),F=T(r,i,s,a,u,c);var X=l(N,L,D,F),H=f(N,L,D,F);I=C,R=P,C=b,P=O,b=m,O=y,m=l(d,p,Y,W),y=f(p,p,Y,W),d=u,p=c,u=s,c=a,s=r,a=i,r=l(Y,W,X,H),i=f(Y,W,X,H)}h(this.h,0,r,i),h(this.h,2,s,a),h(this.h,4,u,c),h(this.h,6,d,p),h(this.h,8,m,y),h(this.h,10,b,O),h(this.h,12,C,P),h(this.h,14,I,R)},b.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(t,e,n){"use strict";(function(t){var r=n(152),i=n(153),o=n(154);function s(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return l(this,t)}return c(this,t,e,n)}function c(t,e,n,r){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=f(t,e);return t}(t,e,n,r):"string"===typeof e?function(t,e,n){"string"===typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=a(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|d(e.length);return 0===(t=a(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||(r=e.length)!==r?a(t,0):f(t,e);if("Buffer"===e.type&&o(e.data))return f(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function h(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function l(t,e){if(h(e),t=a(t,e<0?0:0|d(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function f(t,e){var n=e.length<0?0:0|d(e.length);t=a(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function d(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function p(t,e){if(u.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(t).length;default:if(r)return V(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return P(this,e,n);case"utf8":case"utf-8":return k(this,e,n);case"ascii":return O(this,e,n);case"latin1":case"binary":return C(this,e,n);case"base64":return S(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function m(t,e,n,r,i){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof e&&(e=u.from(e,r)),u.isBuffer(e))return 0===e.length?-1:y(t,e,n,r,i);if("number"===typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):y(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(t,e,n,r,i){var o,s=1,a=t.length,u=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,u/=2,n/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){var h=-1;for(o=n;o<a;o++)if(c(t,o)===c(e,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===u)return h*s}else-1!==h&&(o-=o-h),h=-1}else for(n+u>a&&(n=a-u),o=n;o>=0;o--){for(var l=!0,f=0;f<u;f++)if(c(t,o+f)!==c(e,f)){l=!1;break}if(l)return o}return-1}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[n+s]=a}return s}function w(t,e,n,r){return G(V(e,t.length-n),t,n,r)}function x(t,e,n,r){return G(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function _(t,e,n,r){return x(t,e,n,r)}function T(t,e,n,r){return G(z(e),t,n,r)}function E(t,e,n,r){return G(function(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=(n=t.charCodeAt(s))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function k(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,s,a,u,c=t[i],h=null,l=c>239?4:c>223?3:c>191?2:1;if(i+l<=n)switch(l){case 1:c<128&&(h=c);break;case 2:128===(192&(o=t[i+1]))&&(u=(31&c)<<6|63&o)>127&&(h=u);break;case 3:o=t[i+1],s=t[i+2],128===(192&o)&&128===(192&s)&&(u=(15&c)<<12|(63&o)<<6|63&s)>2047&&(u<55296||u>57343)&&(h=u);break;case 4:o=t[i+1],s=t[i+2],a=t[i+3],128===(192&o)&&128===(192&s)&&128===(192&a)&&(u=(15&c)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&u<1114112&&(h=u)}null===h?(h=65533,l=1):h>65535&&(h-=65536,r.push(h>>>10&1023|55296),h=56320|1023&h),r.push(h),i+=l}return function(t){var e=t.length;if(e<=A)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=A));return n}(r)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=s(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return c(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,r){return h(e),e<=0?a(t,e):void 0!==n?"string"===typeof r?a(t,e).fill(n,r):a(t,e).fill(n):a(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return l(null,t)},u.allocUnsafeSlow=function(t){return l(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=u.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var s=t[n];if(!u.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},u.byteLength=p,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):v.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,r,i){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0),a=Math.min(o,s),c=this.slice(r,i),h=t.slice(e,n),l=0;l<a;++l)if(c[l]!==h[l]){o=c[l],s=h[l];break}return o<s?-1:s<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return m(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return m(this,t,e,n,!1)},u.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return x(this,t,e,n);case"latin1":case"binary":return _(this,t,e,n);case"base64":return T(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var A=4096;function O(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function P(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=U(t[o]);return i}function I(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function R(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function M(t,e,n,r,i,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function N(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function L(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function D(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function F(t,e,n,r,o){return o||D(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function j(t,e,n,r,o){return o||D(t,0,n,8),i.write(t,e,n,r,52,8),n+8}u.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var i=e-t;n=new u(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},u.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||M(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,r){(t=+t,e|=0,n|=0,r)||M(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):L(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);M(this,t,e,n,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);M(this,t,e,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):L(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||M(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):L(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return F(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return F(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return j(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return j(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!u.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(o=e;o<n;++o)this[o]=t;else{var s=u.isBuffer(t)?t:V(new u(t,r).toString()),a=s.length;for(o=0;o<n-e;++o)this[o+e]=s[o%a]}return this};var B=/[^+\/0-9A-Za-z-_]/g;function U(t){return t<16?"0"+t.toString(16):t.toString(16)}function V(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],s=0;s<r;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(B,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function G(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(45))},function(t,e,n){var r=n(156),i={};for(var o in r)r.hasOwnProperty(o)&&(i[r[o]]=o);var s=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var a in s)if(s.hasOwnProperty(a)){if(!("channels"in s[a]))throw new Error("missing channels property: "+a);if(!("labels"in s[a]))throw new Error("missing channel labels property: "+a);if(s[a].labels.length!==s[a].channels)throw new Error("channel and label counts mismatch: "+a);var u=s[a].channels,c=s[a].labels;delete s[a].channels,delete s[a].labels,Object.defineProperty(s[a],"channels",{value:u}),Object.defineProperty(s[a],"labels",{value:c})}s.rgb.hsl=function(t){var e,n,r=t[0]/255,i=t[1]/255,o=t[2]/255,s=Math.min(r,i,o),a=Math.max(r,i,o),u=a-s;return a===s?e=0:r===a?e=(i-o)/u:i===a?e=2+(o-r)/u:o===a&&(e=4+(r-i)/u),(e=Math.min(60*e,360))<0&&(e+=360),n=(s+a)/2,[e,100*(a===s?0:n<=.5?u/(a+s):u/(2-a-s)),100*n]},s.rgb.hsv=function(t){var e,n,r,i,o,s=t[0]/255,a=t[1]/255,u=t[2]/255,c=Math.max(s,a,u),h=c-Math.min(s,a,u),l=function(t){return(c-t)/6/h+.5};return 0===h?i=o=0:(o=h/c,e=l(s),n=l(a),r=l(u),s===c?i=r-n:a===c?i=1/3+e-r:u===c&&(i=2/3+n-e),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*c]},s.rgb.hwb=function(t){var e=t[0],n=t[1],r=t[2];return[s.rgb.hsl(t)[0],100*(1/255*Math.min(e,Math.min(n,r))),100*(r=1-1/255*Math.max(e,Math.max(n,r)))]},s.rgb.cmyk=function(t){var e,n=t[0]/255,r=t[1]/255,i=t[2]/255;return[100*((1-n-(e=Math.min(1-n,1-r,1-i)))/(1-e)||0),100*((1-r-e)/(1-e)||0),100*((1-i-e)/(1-e)||0),100*e]},s.rgb.keyword=function(t){var e=i[t];if(e)return e;var n,o,s,a=1/0;for(var u in r)if(r.hasOwnProperty(u)){var c=r[u],h=(o=t,s=c,Math.pow(o[0]-s[0],2)+Math.pow(o[1]-s[1],2)+Math.pow(o[2]-s[2],2));h<a&&(a=h,n=u)}return n},s.keyword.rgb=function(t){return r[t]},s.rgb.xyz=function(t){var e=t[0]/255,n=t[1]/255,r=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*e+.7152*n+.0722*r),100*(.0193*e+.1192*n+.9505*r)]},s.rgb.lab=function(t){var e=s.rgb.xyz(t),n=e[0],r=e[1],i=e[2];return r/=100,i/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},s.hsl.rgb=function(t){var e,n,r,i,o,s=t[0]/360,a=t[1]/100,u=t[2]/100;if(0===a)return[o=255*u,o,o];e=2*u-(n=u<.5?u*(1+a):u+a-u*a),i=[0,0,0];for(var c=0;c<3;c++)(r=s+1/3*-(c-1))<0&&r++,r>1&&r--,o=6*r<1?e+6*(n-e)*r:2*r<1?n:3*r<2?e+(n-e)*(2/3-r)*6:e,i[c]=255*o;return i},s.hsl.hsv=function(t){var e=t[0],n=t[1]/100,r=t[2]/100,i=n,o=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,i*=o<=1?o:2-o,[e,100*(0===r?2*i/(o+i):2*n/(r+n)),100*((r+n)/2)]},s.hsv.rgb=function(t){var e=t[0]/60,n=t[1]/100,r=t[2]/100,i=Math.floor(e)%6,o=e-Math.floor(e),s=255*r*(1-n),a=255*r*(1-n*o),u=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,u,s];case 1:return[a,r,s];case 2:return[s,r,u];case 3:return[s,a,r];case 4:return[u,s,r];case 5:return[r,s,a]}},s.hsv.hsl=function(t){var e,n,r,i=t[0],o=t[1]/100,s=t[2]/100,a=Math.max(s,.01);return r=(2-o)*s,n=o*a,[i,100*(n=(n/=(e=(2-o)*a)<=1?e:2-e)||0),100*(r/=2)]},s.hwb.rgb=function(t){var e,n,r,i,o,s,a,u=t[0]/360,c=t[1]/100,h=t[2]/100,l=c+h;switch(l>1&&(c/=l,h/=l),r=6*u-(e=Math.floor(6*u)),0!==(1&e)&&(r=1-r),i=c+r*((n=1-h)-c),e){default:o=n,s=i,a=c;break;case 1:o=i,s=n,a=c;break;case 2:o=c,s=n,a=i;break;case 3:o=c,s=i,a=n;break;case 4:o=i,s=c,a=n;break;case 5:o=n,s=c,a=i}return[255*o,255*s,255*a]},s.cmyk.rgb=function(t){var e=t[0]/100,n=t[1]/100,r=t[2]/100,i=t[3]/100;return[255*(1-Math.min(1,e*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]},s.xyz.rgb=function(t){var e,n,r,i=t[0]/100,o=t[1]/100,s=t[2]/100;return n=-.9689*i+1.8758*o+.0415*s,r=.0557*i+-.204*o+1.057*s,e=(e=3.2406*i+-1.5372*o+-.4986*s)>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(e=Math.min(Math.max(0,e),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},s.xyz.lab=function(t){var e=t[0],n=t[1],r=t[2];return n/=100,r/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(e-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},s.lab.xyz=function(t){var e,n,r,i=t[0];e=t[1]/500+(n=(i+16)/116),r=n-t[2]/200;var o=Math.pow(n,3),s=Math.pow(e,3),a=Math.pow(r,3);return n=o>.008856?o:(n-16/116)/7.787,e=s>.008856?s:(e-16/116)/7.787,r=a>.008856?a:(r-16/116)/7.787,[e*=95.047,n*=100,r*=108.883]},s.lab.lch=function(t){var e,n=t[0],r=t[1],i=t[2];return(e=360*Math.atan2(i,r)/2/Math.PI)<0&&(e+=360),[n,Math.sqrt(r*r+i*i),e]},s.lch.lab=function(t){var e,n=t[0],r=t[1];return e=t[2]/360*2*Math.PI,[n,r*Math.cos(e),r*Math.sin(e)]},s.rgb.ansi16=function(t){var e=t[0],n=t[1],r=t[2],i=1 in arguments?arguments[1]:s.rgb.hsv(t)[2];if(0===(i=Math.round(i/50)))return 30;var o=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(e/255));return 2===i&&(o+=60),o},s.hsv.ansi16=function(t){return s.rgb.ansi16(s.hsv.rgb(t),t[2])},s.rgb.ansi256=function(t){var e=t[0],n=t[1],r=t[2];return e===n&&n===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},s.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var n=.5*(1+~~(t>50));return[(1&e)*n*255,(e>>1&1)*n*255,(e>>2&1)*n*255]},s.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var n;return t-=16,[Math.floor(t/36)/5*255,Math.floor((n=t%36)/6)/5*255,n%6/5*255]},s.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},s.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var n=e[0];3===e[0].length&&(n=n.split("").map((function(t){return t+t})).join(""));var r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},s.rgb.hcg=function(t){var e,n=t[0]/255,r=t[1]/255,i=t[2]/255,o=Math.max(Math.max(n,r),i),s=Math.min(Math.min(n,r),i),a=o-s;return e=a<=0?0:o===n?(r-i)/a%6:o===r?2+(i-n)/a:4+(n-r)/a+4,e/=6,[360*(e%=1),100*a,100*(a<1?s/(1-a):0)]},s.hsl.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=1,i=0;return(r=n<.5?2*e*n:2*e*(1-n))<1&&(i=(n-.5*r)/(1-r)),[t[0],100*r,100*i]},s.hsv.hcg=function(t){var e=t[1]/100,n=t[2]/100,r=e*n,i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},s.hcg.rgb=function(t){var e=t[0]/360,n=t[1]/100,r=t[2]/100;if(0===n)return[255*r,255*r,255*r];var i,o=[0,0,0],s=e%1*6,a=s%1,u=1-a;switch(Math.floor(s)){case 0:o[0]=1,o[1]=a,o[2]=0;break;case 1:o[0]=u,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=a;break;case 3:o[0]=0,o[1]=u,o[2]=1;break;case 4:o[0]=a,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=u}return i=(1-n)*r,[255*(n*o[0]+i),255*(n*o[1]+i),255*(n*o[2]+i)]},s.hcg.hsv=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e),r=0;return n>0&&(r=e/n),[t[0],100*r,100*n]},s.hcg.hsl=function(t){var e=t[1]/100,n=t[2]/100*(1-e)+.5*e,r=0;return n>0&&n<.5?r=e/(2*n):n>=.5&&n<1&&(r=e/(2*(1-n))),[t[0],100*r,100*n]},s.hcg.hwb=function(t){var e=t[1]/100,n=e+t[2]/100*(1-e);return[t[0],100*(n-e),100*(1-n)]},s.hwb.hcg=function(t){var e=t[1]/100,n=1-t[2]/100,r=n-e,i=0;return r<1&&(i=(n-r)/(1-r)),[t[0],100*r,100*i]},s.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},s.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},s.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},s.gray.hsl=s.gray.hsv=function(t){return[0,0,t[0]]},s.gray.hwb=function(t){return[0,100,t[0]]},s.gray.cmyk=function(t){return[0,0,0,t[0]]},s.gray.lab=function(t){return[t[0],0,0]},s.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n},s.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}},,function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return z}));var r=n(15),i=n.n(r),o=n(32),s=n.n(o);"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t||"undefined"!==typeof self&&self;function a(t,e,n){return n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}((void 0===e||null===e)&&n.path)}},t(n,n.exports),n.exports}var u=c;function c(t,e){if(!t)throw new Error(e||"Assertion failed")}c.equal=function(t,e,n){if(t!=e)throw new Error(n||"Assertion failed: "+t+" != "+e)};var h=a((function(t,e){var n=e;function r(t){return 1===t.length?"0"+t:t}function i(t){for(var e="",n=0;n<t.length;n++)e+=r(t[n].toString(16));return e}n.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if("string"!==typeof t){for(var r=0;r<t.length;r++)n[r]=0|t[r];return n}if("hex"===e){(t=t.replace(/[^a-z0-9]+/gi,"")).length%2!==0&&(t="0"+t);for(r=0;r<t.length;r+=2)n.push(parseInt(t[r]+t[r+1],16))}else for(r=0;r<t.length;r++){var i=t.charCodeAt(r),o=i>>8,s=255&i;o?n.push(o,s):n.push(s)}return n},n.zero2=r,n.toHex=i,n.encode=function(t,e){return"hex"===e?i(t):t}})),l=a((function(t,e){var n=e;n.assert=u,n.toArray=h.toArray,n.zero2=h.zero2,n.toHex=h.toHex,n.encode=h.encode,n.getNAF=function(t,e,n){var r=new Array(Math.max(t.bitLength(),n)+1);r.fill(0);for(var i=1<<e+1,o=t.clone(),s=0;s<r.length;s++){var a,u=o.andln(i-1);o.isOdd()?(a=u>(i>>1)-1?(i>>1)-u:u,o.isubn(a)):a=0,r[s]=a,o.iushrn(1)}return r},n.getJSF=function(t,e){var n=[[],[]];t=t.clone(),e=e.clone();for(var r,i=0,o=0;t.cmpn(-i)>0||e.cmpn(-o)>0;){var s,a,u=t.andln(3)+i&3,c=e.andln(3)+o&3;3===u&&(u=-1),3===c&&(c=-1),s=0===(1&u)?0:3!==(r=t.andln(7)+i&7)&&5!==r||2!==c?u:-u,n[0].push(s),a=0===(1&c)?0:3!==(r=e.andln(7)+o&7)&&5!==r||2!==u?c:-c,n[1].push(a),2*i===s+1&&(i=1-i),2*o===a+1&&(o=1-o),t.iushrn(1),e.iushrn(1)}return n},n.cachedProperty=function(t,e,n){var r="_"+e;t.prototype[e]=function(){return void 0!==this[r]?this[r]:this[r]=n.call(this)}},n.parseBytes=function(t){return"string"===typeof t?n.toArray(t,"hex"):t},n.intFromLE=function(t){return new i.a(t,"hex","le")}})),f=l.getNAF,d=l.getJSF,p=l.assert;function v(t,e){this.type=t,this.p=new i.a(e.p,16),this.red=e.prime?i.a.red(e.prime):i.a.mont(this.p),this.zero=new i.a(0).toRed(this.red),this.one=new i.a(1).toRed(this.red),this.two=new i.a(2).toRed(this.red),this.n=e.n&&new i.a(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var g=v;function m(t,e){this.curve=t,this.type=e,this.precomputed=null}v.prototype.point=function(){throw new Error("Not implemented")},v.prototype.validate=function(){throw new Error("Not implemented")},v.prototype._fixedNafMul=function(t,e){p(t.precomputed);var n=t._getDoubles(),r=f(e,1,this._bitLength),i=(1<<n.step+1)-(n.step%2===0?2:1);i/=3;var o,s,a=[];for(o=0;o<r.length;o+=n.step){s=0;for(var u=o+n.step-1;u>=o;u--)s=(s<<1)+r[u];a.push(s)}for(var c=this.jpoint(null,null,null),h=this.jpoint(null,null,null),l=i;l>0;l--){for(o=0;o<a.length;o++)(s=a[o])===l?h=h.mixedAdd(n.points[o]):s===-l&&(h=h.mixedAdd(n.points[o].neg()));c=c.add(h)}return c.toP()},v.prototype._wnafMul=function(t,e){var n=4,r=t._getNAFPoints(n);n=r.wnd;for(var i=r.points,o=f(e,n,this._bitLength),s=this.jpoint(null,null,null),a=o.length-1;a>=0;a--){for(var u=0;a>=0&&0===o[a];a--)u++;if(a>=0&&u++,s=s.dblp(u),a<0)break;var c=o[a];p(0!==c),s="affine"===t.type?c>0?s.mixedAdd(i[c-1>>1]):s.mixedAdd(i[-c-1>>1].neg()):c>0?s.add(i[c-1>>1]):s.add(i[-c-1>>1].neg())}return"affine"===t.type?s.toP():s},v.prototype._wnafMulAdd=function(t,e,n,r,i){var o,s,a,u=this._wnafT1,c=this._wnafT2,h=this._wnafT3,l=0;for(o=0;o<r;o++){var p=(a=e[o])._getNAFPoints(t);u[o]=p.wnd,c[o]=p.points}for(o=r-1;o>=1;o-=2){var v=o-1,g=o;if(1===u[v]&&1===u[g]){var m=[e[v],null,null,e[g]];0===e[v].y.cmp(e[g].y)?(m[1]=e[v].add(e[g]),m[2]=e[v].toJ().mixedAdd(e[g].neg())):0===e[v].y.cmp(e[g].y.redNeg())?(m[1]=e[v].toJ().mixedAdd(e[g]),m[2]=e[v].add(e[g].neg())):(m[1]=e[v].toJ().mixedAdd(e[g]),m[2]=e[v].toJ().mixedAdd(e[g].neg()));var y=[-3,-1,-5,-7,0,7,5,1,3],b=d(n[v],n[g]);for(l=Math.max(b[0].length,l),h[v]=new Array(l),h[g]=new Array(l),s=0;s<l;s++){var w=0|b[0][s],x=0|b[1][s];h[v][s]=y[3*(w+1)+(x+1)],h[g][s]=0,c[v]=m}}else h[v]=f(n[v],u[v],this._bitLength),h[g]=f(n[g],u[g],this._bitLength),l=Math.max(h[v].length,l),l=Math.max(h[g].length,l)}var _=this.jpoint(null,null,null),T=this._wnafT4;for(o=l;o>=0;o--){for(var E=0;o>=0;){var S=!0;for(s=0;s<r;s++)T[s]=0|h[s][o],0!==T[s]&&(S=!1);if(!S)break;E++,o--}if(o>=0&&E++,_=_.dblp(E),o<0)break;for(s=0;s<r;s++){var k=T[s];0!==k&&(k>0?a=c[s][k-1>>1]:k<0&&(a=c[s][-k-1>>1].neg()),_="affine"===a.type?_.mixedAdd(a):_.add(a))}}for(o=0;o<r;o++)c[o]=null;return i?_:_.toP()},v.BasePoint=m,m.prototype.eq=function(){throw new Error("Not implemented")},m.prototype.validate=function(){return this.curve.validate(this)},v.prototype.decodePoint=function(t,e){t=l.toArray(t,e);var n=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1===2*n)return 6===t[0]?p(t[t.length-1]%2===0):7===t[0]&&p(t[t.length-1]%2===1),this.point(t.slice(1,1+n),t.slice(1+n,1+2*n));if((2===t[0]||3===t[0])&&t.length-1===n)return this.pointFromX(t.slice(1,1+n),3===t[0]);throw new Error("Unknown point format")},m.prototype.encodeCompressed=function(t){return this.encode(t,!0)},m.prototype._encode=function(t){var e=this.curve.p.byteLength(),n=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",e))},m.prototype.encode=function(t,e){return l.encode(this._encode(e),t)},m.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},m.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},m.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],r=this,i=0;i<e;i+=t){for(var o=0;o<t;o++)r=r.dbl();n.push(r)}return{step:t,points:n}},m.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],n=(1<<t)-1,r=1===n?null:this.dbl(),i=1;i<n;i++)e[i]=e[i-1].add(r);return{wnd:t,points:e}},m.prototype._getBeta=function(){return null},m.prototype.dblp=function(t){for(var e=this,n=0;n<t;n++)e=e.dbl();return e};var y=a((function(t){"function"===typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}})),b=l.assert;function w(t){g.call(this,"short",t),this.a=new i.a(t.a,16).toRed(this.red),this.b=new i.a(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}y(w,g);var x=w;function _(t,e,n,r){g.BasePoint.call(this,t,"affine"),null===e&&null===n?(this.x=null,this.y=null,this.inf=!0):(this.x=new i.a(e,16),this.y=new i.a(n,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function T(t,e,n,r){g.BasePoint.call(this,t,"jacobian"),null===e&&null===n&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new i.a(0)):(this.x=new i.a(e,16),this.y=new i.a(n,16),this.z=new i.a(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}w.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,n;if(t.beta)e=new i.a(t.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);e=(e=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(t.lambda)n=new i.a(t.lambda,16);else{var o=this._getEndoRoots(this.n);0===this.g.mul(o[0]).x.cmp(this.g.x.redMul(e))?n=o[0]:(n=o[1],b(0===this.g.mul(n).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:n,basis:t.basis?t.basis.map((function(t){return{a:new i.a(t.a,16),b:new i.a(t.b,16)}})):this._getEndoBasis(n)}}},w.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:i.a.mont(t),n=new i.a(2).toRed(e).redInvm(),r=n.redNeg(),o=new i.a(3).toRed(e).redNeg().redSqrt().redMul(n);return[r.redAdd(o).fromRed(),r.redSub(o).fromRed()]},w.prototype._getEndoBasis=function(t){for(var e,n,r,o,s,a,u,c,h,l=this.n.ushrn(Math.floor(this.n.bitLength()/2)),f=t,d=this.n.clone(),p=new i.a(1),v=new i.a(0),g=new i.a(0),m=new i.a(1),y=0;0!==f.cmpn(0);){var b=d.div(f);c=d.sub(b.mul(f)),h=g.sub(b.mul(p));var w=m.sub(b.mul(v));if(!r&&c.cmp(l)<0)e=u.neg(),n=p,r=c.neg(),o=h;else if(r&&2===++y)break;u=c,d=f,f=c,g=p,p=h,m=v,v=w}s=c.neg(),a=h;var x=r.sqr().add(o.sqr());return s.sqr().add(a.sqr()).cmp(x)>=0&&(s=e,a=n),r.negative&&(r=r.neg(),o=o.neg()),s.negative&&(s=s.neg(),a=a.neg()),[{a:r,b:o},{a:s,b:a}]},w.prototype._endoSplit=function(t){var e=this.endo.basis,n=e[0],r=e[1],i=r.b.mul(t).divRound(this.n),o=n.b.neg().mul(t).divRound(this.n),s=i.mul(n.a),a=o.mul(r.a),u=i.mul(n.b),c=o.mul(r.b);return{k1:t.sub(s).sub(a),k2:u.add(c).neg()}},w.prototype.pointFromX=function(t,e){(t=new i.a(t,16)).red||(t=t.toRed(this.red));var n=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),r=n.redSqrt();if(0!==r.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var o=r.fromRed().isOdd();return(e&&!o||!e&&o)&&(r=r.redNeg()),this.point(t,r)},w.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,n=t.y,r=this.a.redMul(e),i=e.redSqr().redMul(e).redIAdd(r).redIAdd(this.b);return 0===n.redSqr().redISub(i).cmpn(0)},w.prototype._endoWnafMulAdd=function(t,e,n){for(var r=this._endoWnafT1,i=this._endoWnafT2,o=0;o<t.length;o++){var s=this._endoSplit(e[o]),a=t[o],u=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),u=u.neg(!0)),r[2*o]=a,r[2*o+1]=u,i[2*o]=s.k1,i[2*o+1]=s.k2}for(var c=this._wnafMulAdd(1,r,i,2*o,n),h=0;h<2*o;h++)r[h]=null,i[h]=null;return c},y(_,g.BasePoint),w.prototype.point=function(t,e,n){return new _(this,t,e,n)},w.prototype.pointFromJSON=function(t,e){return _.fromJSON(this,t,e)},_.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var n=this.curve,r=function(t){return n.point(t.x.redMul(n.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(r)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(r)}}}return e}},_.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},_.fromJSON=function(t,e,n){"string"===typeof e&&(e=JSON.parse(e));var r=t.point(e[0],e[1],n);if(!e[2])return r;function i(e){return t.point(e[0],e[1],n)}var o=e[2];return r.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[r].concat(o.doubles.points.map(i))},naf:o.naf&&{wnd:o.naf.wnd,points:[r].concat(o.naf.points.map(i))}},r},_.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},_.prototype.isInfinity=function(){return this.inf},_.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var n=e.redSqr().redISub(this.x).redISub(t.x),r=e.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,r)},_.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,n=this.x.redSqr(),r=t.redInvm(),i=n.redAdd(n).redIAdd(n).redIAdd(e).redMul(r),o=i.redSqr().redISub(this.x.redAdd(this.x)),s=i.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},_.prototype.getX=function(){return this.x.fromRed()},_.prototype.getY=function(){return this.y.fromRed()},_.prototype.mul=function(t){return t=new i.a(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},_.prototype.mulAdd=function(t,e,n){var r=[this,e],i=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i):this.curve._wnafMulAdd(1,r,i,2)},_.prototype.jmulAdd=function(t,e,n){var r=[this,e],i=[t,n];return this.curve.endo?this.curve._endoWnafMulAdd(r,i,!0):this.curve._wnafMulAdd(1,r,i,2,!0)},_.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},_.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var n=this.precomputed,r=function(t){return t.neg()};e.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(r)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(r)}}}return e},_.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},y(T,g.BasePoint),w.prototype.jpoint=function(t,e,n){return new T(this,t,e,n)},T.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),n=this.x.redMul(e),r=this.y.redMul(e).redMul(t);return this.curve.point(n,r)},T.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},T.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),n=this.z.redSqr(),r=this.x.redMul(e),i=t.x.redMul(n),o=this.y.redMul(e.redMul(t.z)),s=t.y.redMul(n.redMul(this.z)),a=r.redSub(i),u=o.redSub(s);if(0===a.cmpn(0))return 0!==u.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=a.redSqr(),h=c.redMul(a),l=r.redMul(c),f=u.redSqr().redIAdd(h).redISub(l).redISub(l),d=u.redMul(l.redISub(f)).redISub(o.redMul(h)),p=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(f,d,p)},T.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),n=this.x,r=t.x.redMul(e),i=this.y,o=t.y.redMul(e).redMul(this.z),s=n.redSub(r),a=i.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=s.redSqr(),c=u.redMul(s),h=n.redMul(u),l=a.redSqr().redIAdd(c).redISub(h).redISub(h),f=a.redMul(h.redISub(l)).redISub(i.redMul(c)),d=this.z.redMul(s);return this.curve.jpoint(l,f,d)},T.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var n=this;for(e=0;e<t;e++)n=n.dbl();return n}var r=this.curve.a,i=this.curve.tinv,o=this.x,s=this.y,a=this.z,u=a.redSqr().redSqr(),c=s.redAdd(s);for(e=0;e<t;e++){var h=o.redSqr(),l=c.redSqr(),f=l.redSqr(),d=h.redAdd(h).redIAdd(h).redIAdd(r.redMul(u)),p=o.redMul(l),v=d.redSqr().redISub(p.redAdd(p)),g=p.redISub(v),m=d.redMul(g);m=m.redIAdd(m).redISub(f);var y=c.redMul(a);e+1<t&&(u=u.redMul(f)),o=v,a=y,c=m}return this.curve.jpoint(o,c.redMul(i),a)},T.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},T.prototype._zeroDbl=function(){var t,e,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(r).redISub(o);s=s.redIAdd(s);var a=r.redAdd(r).redIAdd(r),u=a.redSqr().redISub(s).redISub(s),c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),t=u,e=a.redMul(s.redISub(u)).redISub(c),n=this.y.redAdd(this.y)}else{var h=this.x.redSqr(),l=this.y.redSqr(),f=l.redSqr(),d=this.x.redAdd(l).redSqr().redISub(h).redISub(f);d=d.redIAdd(d);var p=h.redAdd(h).redIAdd(h),v=p.redSqr(),g=f.redIAdd(f);g=(g=g.redIAdd(g)).redIAdd(g),t=v.redISub(d).redISub(d),e=p.redMul(d.redISub(t)).redISub(g),n=(n=this.y.redMul(this.z)).redIAdd(n)}return this.curve.jpoint(t,e,n)},T.prototype._threeDbl=function(){var t,e,n;if(this.zOne){var r=this.x.redSqr(),i=this.y.redSqr(),o=i.redSqr(),s=this.x.redAdd(i).redSqr().redISub(r).redISub(o);s=s.redIAdd(s);var a=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),u=a.redSqr().redISub(s).redISub(s);t=u;var c=o.redIAdd(o);c=(c=c.redIAdd(c)).redIAdd(c),e=a.redMul(s.redISub(u)).redISub(c),n=this.y.redAdd(this.y)}else{var h=this.z.redSqr(),l=this.y.redSqr(),f=this.x.redMul(l),d=this.x.redSub(h).redMul(this.x.redAdd(h));d=d.redAdd(d).redIAdd(d);var p=f.redIAdd(f),v=(p=p.redIAdd(p)).redAdd(p);t=d.redSqr().redISub(v),n=this.y.redAdd(this.z).redSqr().redISub(l).redISub(h);var g=l.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),e=d.redMul(p.redISub(t)).redISub(g)}return this.curve.jpoint(t,e,n)},T.prototype._dbl=function(){var t=this.curve.a,e=this.x,n=this.y,r=this.z,i=r.redSqr().redSqr(),o=e.redSqr(),s=n.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(t.redMul(i)),u=e.redAdd(e),c=(u=u.redIAdd(u)).redMul(s),h=a.redSqr().redISub(c.redAdd(c)),l=c.redISub(h),f=s.redSqr();f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=a.redMul(l).redISub(f),p=n.redAdd(n).redMul(r);return this.curve.jpoint(h,d,p)},T.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),n=this.z.redSqr(),r=e.redSqr(),i=t.redAdd(t).redIAdd(t),o=i.redSqr(),s=this.x.redAdd(e).redSqr().redISub(t).redISub(r),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),u=r.redIAdd(r);u=(u=(u=u.redIAdd(u)).redIAdd(u)).redIAdd(u);var c=i.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(u),h=e.redMul(c);h=(h=h.redIAdd(h)).redIAdd(h);var l=this.x.redMul(a).redISub(h);l=(l=l.redIAdd(l)).redIAdd(l);var f=this.y.redMul(c.redMul(u.redISub(c)).redISub(s.redMul(a)));f=(f=(f=f.redIAdd(f)).redIAdd(f)).redIAdd(f);var d=this.z.redAdd(s).redSqr().redISub(n).redISub(a);return this.curve.jpoint(l,f,d)},T.prototype.mul=function(t,e){return t=new i.a(t,e),this.curve._wnafMul(this,t)},T.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),n=t.z.redSqr();if(0!==this.x.redMul(n).redISub(t.x.redMul(e)).cmpn(0))return!1;var r=e.redMul(this.z),i=n.redMul(t.z);return 0===this.y.redMul(i).redISub(t.y.redMul(r)).cmpn(0)},T.prototype.eqXToP=function(t){var e=this.z.redSqr(),n=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(n))return!0;for(var r=t.clone(),i=this.curve.redN.redMul(e);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(i),0===this.x.cmp(n))return!0}},T.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},T.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var E=a((function(t,e){var n=e;n.base=g,n.short=x,n.mont=null,n.edwards=null})),S=a((function(t,e){var n,r=e,i=l.assert;function o(t){"short"===t.type?this.curve=new E.short(t):"edwards"===t.type?this.curve=new E.edwards(t):this.curve=new E.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function a(t,e){Object.defineProperty(r,t,{configurable:!0,enumerable:!0,get:function(){var n=new o(e);return Object.defineProperty(r,t,{configurable:!0,enumerable:!0,value:n}),n}})}r.PresetCurve=o,a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:s.a.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:s.a.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:s.a.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:s.a.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:s.a.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.a.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.a.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{n=null.crash()}catch(u){n=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:s.a.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",n]})}));function k(t){if(!(this instanceof k))return new k(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=h.toArray(t.entropy,t.entropyEnc||"hex"),n=h.toArray(t.nonce,t.nonceEnc||"hex"),r=h.toArray(t.pers,t.persEnc||"hex");u(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,n,r)}var A=k;k.prototype._init=function(t,e,n){var r=t.concat(e).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var i=0;i<this.V.length;i++)this.K[i]=0,this.V[i]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},k.prototype._hmac=function(){return new s.a.hmac(this.hash,this.K)},k.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},k.prototype.reseed=function(t,e,n,r){"string"!==typeof e&&(r=n,n=e,e=null),t=h.toArray(t,e),n=h.toArray(n,r),u(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(n||[])),this._reseed=1},k.prototype.generate=function(t,e,n,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!==typeof e&&(r=n,n=e,e=null),n&&(n=h.toArray(n,r||"hex"),this._update(n));for(var i=[];i.length<t;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var o=i.slice(0,t);return this._update(n),this._reseed++,h.encode(o,e)};var O=l.assert;function C(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var P=C;C.fromPublic=function(t,e,n){return e instanceof C?e:new C(t,{pub:e,pubEnc:n})},C.fromPrivate=function(t,e,n){return e instanceof C?e:new C(t,{priv:e,privEnc:n})},C.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},C.prototype.getPublic=function(t,e){return"string"===typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},C.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},C.prototype._importPrivate=function(t,e){this.priv=new i.a(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},C.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?O(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||O(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},C.prototype.derive=function(t){return t.validate()||O(t.validate(),"public point not validated"),t.mul(this.priv).getX()},C.prototype.sign=function(t,e,n){return this.ec.sign(t,this,e,n)},C.prototype.verify=function(t,e){return this.ec.verify(t,e,this)},C.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var I=l.assert;function R(t,e){if(t instanceof R)return t;this._importDER(t,e)||(I(t.r&&t.s,"Signature without r or s"),this.r=new i.a(t.r,16),this.s=new i.a(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var M=R;function N(){this.place=0}function L(t,e){var n=t[e.place++];if(!(128&n))return n;var r=15&n;if(0===r||r>4)return!1;for(var i=0,o=0,s=e.place;o<r;o++,s++)i<<=8,i|=t[s],i>>>=0;return!(i<=127)&&(e.place=s,i)}function D(t){for(var e=0,n=t.length-1;!t[e]&&!(128&t[e+1])&&e<n;)e++;return 0===e?t:t.slice(e)}function F(t,e){if(e<128)t.push(e);else{var n=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|n);--n;)t.push(e>>>(n<<3)&255);t.push(e)}}R.prototype._importDER=function(t,e){t=l.toArray(t,e);var n=new N;if(48!==t[n.place++])return!1;var r=L(t,n);if(!1===r)return!1;if(r+n.place!==t.length)return!1;if(2!==t[n.place++])return!1;var o=L(t,n);if(!1===o)return!1;var s=t.slice(n.place,o+n.place);if(n.place+=o,2!==t[n.place++])return!1;var a=L(t,n);if(!1===a)return!1;if(t.length!==a+n.place)return!1;var u=t.slice(n.place,a+n.place);if(0===s[0]){if(!(128&s[1]))return!1;s=s.slice(1)}if(0===u[0]){if(!(128&u[1]))return!1;u=u.slice(1)}return this.r=new i.a(s),this.s=new i.a(u),this.recoveryParam=null,!0},R.prototype.toDER=function(t){var e=this.r.toArray(),n=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&n[0]&&(n=[0].concat(n)),e=D(e),n=D(n);!n[0]&&!(128&n[1]);)n=n.slice(1);var r=[2];F(r,e.length),(r=r.concat(e)).push(2),F(r,n.length);var i=r.concat(n),o=[48];return F(o,i.length),o=o.concat(i),l.encode(o,t)};var j=function(){throw new Error("unsupported")},B=l.assert;function U(t){if(!(this instanceof U))return new U(t);"string"===typeof t&&(B(Object.prototype.hasOwnProperty.call(S,t),"Unknown curve "+t),t=S[t]),t instanceof S.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var V=U;U.prototype.keyPair=function(t){return new P(this,t)},U.prototype.keyFromPrivate=function(t,e){return P.fromPrivate(this,t,e)},U.prototype.keyFromPublic=function(t,e){return P.fromPublic(this,t,e)},U.prototype.genKeyPair=function(t){t||(t={});for(var e=new A({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||j(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),r=this.n.sub(new i.a(2));;){var o=new i.a(e.generate(n));if(!(o.cmp(r)>0))return o.iaddn(1),this.keyFromPrivate(o)}},U.prototype._truncateToN=function(t,e){var n=8*t.byteLength()-this.n.bitLength();return n>0&&(t=t.ushrn(n)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},U.prototype.sign=function(t,e,n,r){"object"===typeof n&&(r=n,n=null),r||(r={}),e=this.keyFromPrivate(e,n),t=this._truncateToN(new i.a(t,16));for(var o=this.n.byteLength(),s=e.getPrivate().toArray("be",o),a=t.toArray("be",o),u=new A({hash:this.hash,entropy:s,nonce:a,pers:r.pers,persEnc:r.persEnc||"utf8"}),c=this.n.sub(new i.a(1)),h=0;;h++){var l=r.k?r.k(h):new i.a(u.generate(this.n.byteLength()));if(!((l=this._truncateToN(l,!0)).cmpn(1)<=0||l.cmp(c)>=0)){var f=this.g.mul(l);if(!f.isInfinity()){var d=f.getX(),p=d.umod(this.n);if(0!==p.cmpn(0)){var v=l.invm(this.n).mul(p.mul(e.getPrivate()).iadd(t));if(0!==(v=v.umod(this.n)).cmpn(0)){var g=(f.getY().isOdd()?1:0)|(0!==d.cmp(p)?2:0);return r.canonical&&v.cmp(this.nh)>0&&(v=this.n.sub(v),g^=1),new M({r:p,s:v,recoveryParam:g})}}}}}},U.prototype.verify=function(t,e,n,r){t=this._truncateToN(new i.a(t,16)),n=this.keyFromPublic(n,r);var o=(e=new M(e,"hex")).r,s=e.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var a,u=s.invm(this.n),c=u.mul(t).umod(this.n),h=u.mul(o).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(c,n.getPublic(),h)).isInfinity()&&a.eqXToP(o):!(a=this.g.mulAdd(c,n.getPublic(),h)).isInfinity()&&0===a.getX().umod(this.n).cmp(o)},U.prototype.recoverPubKey=function(t,e,n,r){B((3&n)===n,"The recovery param is more than two bits"),e=new M(e,r);var o=this.n,s=new i.a(t),a=e.r,u=e.s,c=1&n,h=n>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&h)throw new Error("Unable to find sencond key candinate");a=h?this.curve.pointFromX(a.add(this.curve.n),c):this.curve.pointFromX(a,c);var l=e.r.invm(o),f=o.sub(s).mul(l).umod(o),d=u.mul(l).umod(o);return this.g.mulAdd(f,a,d)},U.prototype.getKeyRecoveryParam=function(t,e,n,r){if(null!==(e=new M(e,r)).recoveryParam)return e.recoveryParam;for(var i=0;i<4;i++){var o;try{o=this.recoverPubKey(t,e,i)}catch(t){continue}if(o.eq(n))return i}throw new Error("Unable to find valid recovery factor")};var z=a((function(t,e){var n=e;n.version="6.5.4",n.utils=l,n.rand=function(){throw new Error("unsupported")},n.curve=E,n.curves=S,n.ec=V,n.eddsa=null})).ec}).call(this,n(45))},function(t,e,n){(function(r,i){var o;!function(){"use strict";var s="input is invalid type",a="object"===typeof window,u=a?window:{};u.JS_SHA3_NO_WINDOW&&(a=!1);var c=!a&&"object"===typeof self;!u.JS_SHA3_NO_NODE_JS&&"object"===typeof r&&r.versions&&r.versions.node?u=i:c&&(u=self);var h=!u.JS_SHA3_NO_COMMON_JS&&"object"===typeof t&&t.exports,l=n(138),f=!u.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!==typeof ArrayBuffer,d="0123456789abcdef".split(""),p=[4,1024,262144,67108864],v=[0,8,16,24],g=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],m=[224,256,384,512],y=[128,256],b=["hex","buffer","arrayBuffer","array","digest"],w={128:168,256:136};!u.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!f||!u.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"===typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});for(var x=function(t,e,n){return function(r){return new D(t,e,t).update(r)[n]()}},_=function(t,e,n){return function(r,i){return new D(t,e,i).update(r)[n]()}},T=function(t,e,n){return function(e,r,i,o){return O["cshake"+t].update(e,r,i,o)[n]()}},E=function(t,e,n){return function(e,r,i,o){return O["kmac"+t].update(e,r,i,o)[n]()}},S=function(t,e,n,r){for(var i=0;i<b.length;++i){var o=b[i];t[o]=e(n,r,o)}return t},k=function(t,e){var n=x(t,e,"hex");return n.create=function(){return new D(t,e,t)},n.update=function(t){return n.create().update(t)},S(n,x,t,e)},A=[{name:"keccak",padding:[1,256,65536,16777216],bits:m,createMethod:k},{name:"sha3",padding:[6,1536,393216,100663296],bits:m,createMethod:k},{name:"shake",padding:[31,7936,2031616,520093696],bits:y,createMethod:function(t,e){var n=_(t,e,"hex");return n.create=function(n){return new D(t,e,n)},n.update=function(t,e){return n.create(e).update(t)},S(n,_,t,e)}},{name:"cshake",padding:p,bits:y,createMethod:function(t,e){var n=w[t],r=T(t,0,"hex");return r.create=function(r,i,o){return i||o?new D(t,e,r).bytepad([i,o],n):O["shake"+t].create(r)},r.update=function(t,e,n,i){return r.create(e,n,i).update(t)},S(r,T,t,e)}},{name:"kmac",padding:p,bits:y,createMethod:function(t,e){var n=w[t],r=E(t,0,"hex");return r.create=function(r,i,o){return new F(t,e,i).bytepad(["KMAC",o],n).bytepad([r],n)},r.update=function(t,e,n,i){return r.create(t,n,i).update(e)},S(r,E,t,e)}}],O={},C=[],P=0;P<A.length;++P)for(var I=A[P],R=I.bits,M=0;M<R.length;++M){var N=I.name+"_"+R[M];if(C.push(N),O[N]=I.createMethod(R[M],I.padding),"sha3"!==I.name){var L=I.name+R[M];C.push(L),O[L]=O[N]}}function D(t,e,n){this.blocks=[],this.s=[],this.padding=e,this.outputBits=n,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(t<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=n>>5,this.extraBytes=(31&n)>>3;for(var r=0;r<50;++r)this.s[r]=0}function F(t,e,n){D.call(this,t,e,n)}D.prototype.update=function(t){if(this.finalized)throw new Error("finalize already called");var e,n=typeof t;if("string"!==n){if("object"!==n)throw new Error(s);if(null===t)throw new Error(s);if(f&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!f||!ArrayBuffer.isView(t)))throw new Error(s);e=!0}for(var r,i,o=this.blocks,a=this.byteCount,u=t.length,c=this.blockCount,h=0,l=this.s;h<u;){if(this.reset)for(this.reset=!1,o[0]=this.block,r=1;r<c+1;++r)o[r]=0;if(e)for(r=this.start;h<u&&r<a;++h)o[r>>2]|=t[h]<<v[3&r++];else for(r=this.start;h<u&&r<a;++h)(i=t.charCodeAt(h))<128?o[r>>2]|=i<<v[3&r++]:i<2048?(o[r>>2]|=(192|i>>6)<<v[3&r++],o[r>>2]|=(128|63&i)<<v[3&r++]):i<55296||i>=57344?(o[r>>2]|=(224|i>>12)<<v[3&r++],o[r>>2]|=(128|i>>6&63)<<v[3&r++],o[r>>2]|=(128|63&i)<<v[3&r++]):(i=65536+((1023&i)<<10|1023&t.charCodeAt(++h)),o[r>>2]|=(240|i>>18)<<v[3&r++],o[r>>2]|=(128|i>>12&63)<<v[3&r++],o[r>>2]|=(128|i>>6&63)<<v[3&r++],o[r>>2]|=(128|63&i)<<v[3&r++]);if(this.lastByteIndex=r,r>=a){for(this.start=r-a,this.block=o[c],r=0;r<c;++r)l[r]^=o[r];j(l),this.reset=!0}else this.start=r}return this},D.prototype.encode=function(t,e){var n=255&t,r=1,i=[n];for(n=255&(t>>=8);n>0;)i.unshift(n),n=255&(t>>=8),++r;return e?i.push(r):i.unshift(r),this.update(i),i.length},D.prototype.encodeString=function(t){var e,n=typeof t;if("string"!==n){if("object"!==n)throw new Error(s);if(null===t)throw new Error(s);if(f&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!f||!ArrayBuffer.isView(t)))throw new Error(s);e=!0}var r=0,i=t.length;if(e)r=i;else for(var o=0;o<t.length;++o){var a=t.charCodeAt(o);a<128?r+=1:a<2048?r+=2:a<55296||a>=57344?r+=3:(a=65536+((1023&a)<<10|1023&t.charCodeAt(++o)),r+=4)}return r+=this.encode(8*r),this.update(t),r},D.prototype.bytepad=function(t,e){for(var n=this.encode(e),r=0;r<t.length;++r)n+=this.encodeString(t[r]);var i=e-n%e,o=[];return o.length=i,this.update(o),this},D.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex,n=this.blockCount,r=this.s;if(t[e>>2]|=this.padding[3&e],this.lastByteIndex===this.byteCount)for(t[0]=t[n],e=1;e<n+1;++e)t[e]=0;for(t[n-1]|=2147483648,e=0;e<n;++e)r[e]^=t[e];j(r)}},D.prototype.toString=D.prototype.hex=function(){this.finalize();for(var t,e=this.blockCount,n=this.s,r=this.outputBlocks,i=this.extraBytes,o=0,s=0,a="";s<r;){for(o=0;o<e&&s<r;++o,++s)t=n[o],a+=d[t>>4&15]+d[15&t]+d[t>>12&15]+d[t>>8&15]+d[t>>20&15]+d[t>>16&15]+d[t>>28&15]+d[t>>24&15];s%e===0&&(j(n),o=0)}return i&&(t=n[o],a+=d[t>>4&15]+d[15&t],i>1&&(a+=d[t>>12&15]+d[t>>8&15]),i>2&&(a+=d[t>>20&15]+d[t>>16&15])),a},D.prototype.arrayBuffer=function(){this.finalize();var t,e=this.blockCount,n=this.s,r=this.outputBlocks,i=this.extraBytes,o=0,s=0,a=this.outputBits>>3;t=i?new ArrayBuffer(r+1<<2):new ArrayBuffer(a);for(var u=new Uint32Array(t);s<r;){for(o=0;o<e&&s<r;++o,++s)u[s]=n[o];s%e===0&&j(n)}return i&&(u[o]=n[o],t=t.slice(0,a)),t},D.prototype.buffer=D.prototype.arrayBuffer,D.prototype.digest=D.prototype.array=function(){this.finalize();for(var t,e,n=this.blockCount,r=this.s,i=this.outputBlocks,o=this.extraBytes,s=0,a=0,u=[];a<i;){for(s=0;s<n&&a<i;++s,++a)t=a<<2,e=r[s],u[t]=255&e,u[t+1]=e>>8&255,u[t+2]=e>>16&255,u[t+3]=e>>24&255;a%n===0&&j(r)}return o&&(t=a<<2,e=r[s],u[t]=255&e,o>1&&(u[t+1]=e>>8&255),o>2&&(u[t+2]=e>>16&255)),u},F.prototype=new D,F.prototype.finalize=function(){return this.encode(this.outputBits,!0),D.prototype.finalize.call(this)};var j=function(t){var e,n,r,i,o,s,a,u,c,h,l,f,d,p,v,m,y,b,w,x,_,T,E,S,k,A,O,C,P,I,R,M,N,L,D,F,j,B,U,V,z,G,Y,W,X,H,q,K,$,J,Q,Z,tt,et,nt,rt,it,ot,st,at,ut,ct,ht;for(r=0;r<48;r+=2)i=t[0]^t[10]^t[20]^t[30]^t[40],o=t[1]^t[11]^t[21]^t[31]^t[41],s=t[2]^t[12]^t[22]^t[32]^t[42],a=t[3]^t[13]^t[23]^t[33]^t[43],u=t[4]^t[14]^t[24]^t[34]^t[44],c=t[5]^t[15]^t[25]^t[35]^t[45],h=t[6]^t[16]^t[26]^t[36]^t[46],l=t[7]^t[17]^t[27]^t[37]^t[47],e=(f=t[8]^t[18]^t[28]^t[38]^t[48])^(s<<1|a>>>31),n=(d=t[9]^t[19]^t[29]^t[39]^t[49])^(a<<1|s>>>31),t[0]^=e,t[1]^=n,t[10]^=e,t[11]^=n,t[20]^=e,t[21]^=n,t[30]^=e,t[31]^=n,t[40]^=e,t[41]^=n,e=i^(u<<1|c>>>31),n=o^(c<<1|u>>>31),t[2]^=e,t[3]^=n,t[12]^=e,t[13]^=n,t[22]^=e,t[23]^=n,t[32]^=e,t[33]^=n,t[42]^=e,t[43]^=n,e=s^(h<<1|l>>>31),n=a^(l<<1|h>>>31),t[4]^=e,t[5]^=n,t[14]^=e,t[15]^=n,t[24]^=e,t[25]^=n,t[34]^=e,t[35]^=n,t[44]^=e,t[45]^=n,e=u^(f<<1|d>>>31),n=c^(d<<1|f>>>31),t[6]^=e,t[7]^=n,t[16]^=e,t[17]^=n,t[26]^=e,t[27]^=n,t[36]^=e,t[37]^=n,t[46]^=e,t[47]^=n,e=h^(i<<1|o>>>31),n=l^(o<<1|i>>>31),t[8]^=e,t[9]^=n,t[18]^=e,t[19]^=n,t[28]^=e,t[29]^=n,t[38]^=e,t[39]^=n,t[48]^=e,t[49]^=n,p=t[0],v=t[1],H=t[11]<<4|t[10]>>>28,q=t[10]<<4|t[11]>>>28,C=t[20]<<3|t[21]>>>29,P=t[21]<<3|t[20]>>>29,at=t[31]<<9|t[30]>>>23,ut=t[30]<<9|t[31]>>>23,G=t[40]<<18|t[41]>>>14,Y=t[41]<<18|t[40]>>>14,L=t[2]<<1|t[3]>>>31,D=t[3]<<1|t[2]>>>31,m=t[13]<<12|t[12]>>>20,y=t[12]<<12|t[13]>>>20,K=t[22]<<10|t[23]>>>22,$=t[23]<<10|t[22]>>>22,I=t[33]<<13|t[32]>>>19,R=t[32]<<13|t[33]>>>19,ct=t[42]<<2|t[43]>>>30,ht=t[43]<<2|t[42]>>>30,et=t[5]<<30|t[4]>>>2,nt=t[4]<<30|t[5]>>>2,F=t[14]<<6|t[15]>>>26,j=t[15]<<6|t[14]>>>26,b=t[25]<<11|t[24]>>>21,w=t[24]<<11|t[25]>>>21,J=t[34]<<15|t[35]>>>17,Q=t[35]<<15|t[34]>>>17,M=t[45]<<29|t[44]>>>3,N=t[44]<<29|t[45]>>>3,S=t[6]<<28|t[7]>>>4,k=t[7]<<28|t[6]>>>4,rt=t[17]<<23|t[16]>>>9,it=t[16]<<23|t[17]>>>9,B=t[26]<<25|t[27]>>>7,U=t[27]<<25|t[26]>>>7,x=t[36]<<21|t[37]>>>11,_=t[37]<<21|t[36]>>>11,Z=t[47]<<24|t[46]>>>8,tt=t[46]<<24|t[47]>>>8,W=t[8]<<27|t[9]>>>5,X=t[9]<<27|t[8]>>>5,A=t[18]<<20|t[19]>>>12,O=t[19]<<20|t[18]>>>12,ot=t[29]<<7|t[28]>>>25,st=t[28]<<7|t[29]>>>25,V=t[38]<<8|t[39]>>>24,z=t[39]<<8|t[38]>>>24,T=t[48]<<14|t[49]>>>18,E=t[49]<<14|t[48]>>>18,t[0]=p^~m&b,t[1]=v^~y&w,t[10]=S^~A&C,t[11]=k^~O&P,t[20]=L^~F&B,t[21]=D^~j&U,t[30]=W^~H&K,t[31]=X^~q&$,t[40]=et^~rt&ot,t[41]=nt^~it&st,t[2]=m^~b&x,t[3]=y^~w&_,t[12]=A^~C&I,t[13]=O^~P&R,t[22]=F^~B&V,t[23]=j^~U&z,t[32]=H^~K&J,t[33]=q^~$&Q,t[42]=rt^~ot&at,t[43]=it^~st&ut,t[4]=b^~x&T,t[5]=w^~_&E,t[14]=C^~I&M,t[15]=P^~R&N,t[24]=B^~V&G,t[25]=U^~z&Y,t[34]=K^~J&Z,t[35]=$^~Q&tt,t[44]=ot^~at&ct,t[45]=st^~ut&ht,t[6]=x^~T&p,t[7]=_^~E&v,t[16]=I^~M&S,t[17]=R^~N&k,t[26]=V^~G&L,t[27]=z^~Y&D,t[36]=J^~Z&W,t[37]=Q^~tt&X,t[46]=at^~ct&et,t[47]=ut^~ht&nt,t[8]=T^~p&m,t[9]=E^~v&y,t[18]=M^~S&A,t[19]=N^~k&O,t[28]=G^~L&F,t[29]=Y^~D&j,t[38]=Z^~W&H,t[39]=tt^~X&q,t[48]=ct^~et&rt,t[49]=ht^~nt&it,t[0]^=g[r],t[1]^=g[r+1]};if(h)t.exports=O;else{for(P=0;P<C.length;++P)u[C[P]]=O[C[P]];l&&(void 0===(o=function(){return O}.call(e,n,e,t))||(t.exports=o))}}()}).call(this,n(73),n(45))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="random/5.5.0"},function(t,e,n){"use strict";(function(t){var r=n(6),i=n.n(r),o=n(35),s=n(53),a=n.n(s),u=1073741823,c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:{};function h(t){var e=[];return{on:function(t){e.push(t)},off:function(t){e=e.filter((function(e){return e!==t}))},get:function(){return t},set:function(n,r){t=n,e.forEach((function(e){return e(t,r)}))}}}var l=i.a.createContext||function(t,e){var n,i,s="__create-react-context-"+function(){var t="__global_unique_id__";return c[t]=(c[t]||0)+1}()+"__",l=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).emitter=h(e.props.value),e}Object(o.a)(n,t);var r=n.prototype;return r.getChildContext=function(){var t;return(t={})[s]=this.emitter,t},r.componentWillReceiveProps=function(t){if(this.props.value!==t.value){var n,r=this.props.value,i=t.value;((o=r)===(s=i)?0!==o||1/o===1/s:o!==o&&s!==s)?n=0:(n="function"===typeof e?e(r,i):u,0!==(n|=0)&&this.emitter.set(t.value,n))}var o,s},r.render=function(){return this.props.children},n}(r.Component);l.childContextTypes=((n={})[s]=a.a.object.isRequired,n);var f=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).state={value:t.getValue()},t.onUpdate=function(e,n){0!==((0|t.observedBits)&n)&&t.setState({value:t.getValue()})},t}Object(o.a)(n,e);var r=n.prototype;return r.componentWillReceiveProps=function(t){var e=t.observedBits;this.observedBits=void 0===e||null===e?u:e},r.componentDidMount=function(){this.context[s]&&this.context[s].on(this.onUpdate);var t=this.props.observedBits;this.observedBits=void 0===t||null===t?u:t},r.componentWillUnmount=function(){this.context[s]&&this.context[s].off(this.onUpdate)},r.getValue=function(){return this.context[s]?this.context[s].get():t},r.render=function(){return(t=this.props.children,Array.isArray(t)?t[0]:t)(this.state.value);var t},n}(r.Component);return f.contextTypes=((i={})[s]=a.a.object,i),{Provider:l,Consumer:f}};e.a=l}).call(this,n(45))},function(t,e,n){"use strict";var r=n(167),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function u(t){return r.isMemo(t)?s:a[t.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=s;var c=Object.defineProperty,h=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,p=Object.prototype;t.exports=function t(e,n,r){if("string"!==typeof n){if(p){var i=d(n);i&&i!==p&&t(e,i,r)}var s=h(n);l&&(s=s.concat(l(n)));for(var a=u(e),v=u(n),g=0;g<s.length;++g){var m=s[g];if(!o[m]&&(!r||!r[m])&&(!v||!v[m])&&(!a||!a[m])){var y=f(n,m);try{c(e,m,y)}catch(b){}}}}return e}},,function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(74),i=n(76),o=n(50),s=n(75);function a(t){return Object(r.a)(t)||Object(i.a)(t)||Object(o.a)(t)||Object(s.a)()}},function(t,e,n){"use strict";var r={format:"image/png",quality:.92,width:void 0,height:void 0,Canvas:void 0,crossOrigin:void 0};e.a=function(t,e){return void 0===t&&(t=[]),void 0===e&&(e={}),new Promise((function(n){var i=(e=Object.assign({},r,e)).Canvas?new e.Canvas:window.document.createElement("canvas"),o=e.Image||window.Image,s=t.map((function(t){return new Promise((function(n,r){"Object"!==t.constructor.name&&(t={src:t});var i=new o;i.crossOrigin=e.crossOrigin,i.onerror=function(){return r(new Error("Couldn't load image"))},i.onload=function(){return n(Object.assign({},t,{img:i}))},i.src=t.src}))})),a=i.getContext("2d");n(Promise.all(s).then((function(t){var n=function(n){return e[n]||Math.max.apply(Math,t.map((function(t){return t.img[n]})))};return i.width=n("width"),i.height=n("height"),t.forEach((function(t){return a.globalAlpha=t.opacity?t.opacity:1,a.drawImage(t.img,t.x||0,t.y||0)})),e.Canvas&&"image/jpeg"===e.format?new Promise((function(t,n){i.toDataURL(e.format,{quality:e.quality,progressive:!1},(function(e,r){e?n(e):t(r)}))})):i.toDataURL(e.format,e.quality)})))}))}},function(t,e){try{t.exports="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(n){t.exports=!1}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return g}));var r=n(7),i=n(8),o=n(9),s=n(10),a=n(57),u=n(60),c=n.n(u),h=n(78),l=n.n(h),f=n(42),d=n(44),p=n(47),v="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),g=function(e){Object(o.a)(a,e);var n=Object(s.a)(a);function a(t){var e;return Object(r.a)(this,a),(e=n.call(this,t)).supportsBinary=!t.forceBase64,e}return Object(i.a)(a,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var t=this.uri(),e=this.opts.protocols,n=v?{}:Object(f.b)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=d.d&&!v?e?new d.a(t,e):new d.a(t):new d.a(t,e,n)}catch(r){return this.emit("error",r)}this.ws.binaryType=this.socket.binaryType||d.b,this.addEventListeners()}}},{key:"addEventListeners",value:function(){var t=this;this.ws.onopen=function(){t.opts.autoUnref&&t.ws._socket.unref(),t.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=function(e){return t.onData(e.data)},this.ws.onerror=function(e){return t.onError("websocket error",e)}}},{key:"write",value:function(e){var n=this;this.writable=!1;for(var r=function(r){var i=e[r],o=r===e.length-1;Object(p.c)(i,n.supportsBinary,(function(e){var r={};d.d||(i.options&&(r.compress=i.options.compress),n.opts.perMessageDeflate&&("string"===typeof e?t.byteLength(e):e.length)<n.opts.perMessageDeflate.threshold&&(r.compress=!1));try{d.d?n.ws.send(e):n.ws.send(e,r)}catch(s){}o&&Object(d.c)((function(){n.writable=!0,n.emit("drain")}),n.setTimeoutFn)}))},i=0;i<e.length;i++)r(i)}},{key:"doClose",value:function(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var t=this.query||{},e=this.opts.secure?"wss":"ws",n="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=l()()),this.supportsBinary||(t.b64=1);var r=c.a.encode(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"check",value:function(){return!!d.a&&!("__initialize"in d.a&&this.name===a.prototype.name)}}]),a}(a.a)}).call(this,n(100).Buffer)},function(t,e){function n(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=n,n.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(t){this.ms=t},n.prototype.setMax=function(t){this.max=t},n.prototype.setJitter=function(t){this.jitter=t}},function(t,e,n){"use strict";n.d(e,"a",(function(){return o.default}));var r,i,o=n(12),s=(n(142),n(143),n(22)),a=n(20),u=n(0),c=n(19),h=(n(28),{Firestore:s.f,GeoPoint:s.a,Timestamp:s.c,Blob:s.j,Transaction:s.l,WriteBatch:s.g,DocumentReference:s.t,DocumentSnapshot:s.h,Query:s.r,QueryDocumentSnapshot:s.i,QuerySnapshot:s.m,CollectionReference:s.q,FieldPath:s.p,FieldValue:s.n,setLogLevel:s.d,CACHE_SIZE_UNLIMITED:s.b});(function(t,e){t.INTERNAL.registerComponent(new a.Component("firestore",(function(t){return function(t,e){return new s.f(t,new s.e(t,e),new s.o)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},h)))})(r=o.default),r.registerVersion("@firebase/firestore","2.3.9"),(i=s.f).prototype.loadBundle=s.k,i.prototype.namedQuery=s.s;var l=function(t,e){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},l(t,e)};function f(t,e,n,i){return new(n||(n=Promise))((function(o,s){function a(t){try{c(i.next(t))}catch(r){s(r)}}function u(t){try{c(i.throw(t))}catch(r){s(r)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((i=i.apply(t,e||[])).next())}))}function d(t,e){var n,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(r){s=[6,r],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}Object.create;Object.create;var p={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},v=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e}(Error);var g=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return f(this,void 0,void 0,(function(){var t;return d(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return f(this,void 0,void 0,(function(){return d(this,(function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getContext=function(){return f(this,void 0,void 0,(function(){var t,e;return d(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();function m(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var y=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"===typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"===typeof t||"object"===typeof t)return m(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"===typeof t||"object"===typeof t?m(t,(function(t){return e.decode(t)})):t},t}();var b=function(){function t(t,e,n,i,o,s){var a=this;void 0===o&&(o="us-central1"),this.app_=t,this.appCheckProvider=i,this.fetchImpl=s,this.serializer=new y,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new g(e,n),this.cancelAllRequests=new Promise((function(t){a.deleteService=function(){return t()}}));try{var u=new URL(o);this.customDomain=u.origin,this.region="us-central1"}catch(r){this.customDomain=null,this.region=o}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return f(this,void 0,void 0,(function(){var r,i,o;return d(this,(function(s){switch(s.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=s.sent())&&(n["X-Firebase-AppCheck"]=r),s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 3:return i=s.sent(),[3,5];case 4:return s.sent(),[2,{status:0,json:null}];case 5:o=null,s.label=6;case 6:return s.trys.push([6,8,,9]),[4,i.json()];case 7:return o=s.sent(),[3,9];case 8:return s.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}}))}))},t.prototype.getAppCheckToken=function(){return f(this,void 0,void 0,(function(){var t;return d(this,(function(e){switch(e.label){case 0:return(t=this.appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype.call=function(t,e,n){return f(this,void 0,void 0,(function(){var i,o,s,a,u,c,h,l,f,g,m;return d(this,(function(d){switch(d.label){case 0:return i=this._url(t),e=this.serializer.encode(e),o={data:e},s={},[4,this.contextProvider.getContext()];case 1:return(a=d.sent()).authToken&&(s.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(s["Firebase-Instance-ID-Token"]=a.instanceIdToken),u=n.timeout||7e4,c=function(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new v("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}(u),h=c.timer,l=c.promise,[4,Promise.race([w(h,this.postJSON(i,o,s)),l,w(h,this.cancelAllRequests)])];case 2:if(!(f=d.sent()))throw new v("cancelled","Firebase Functions instance was deleted.");if(g=function(t,e,n){var i=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),o=i,s=void 0;try{var a=e&&e.error;if(a){var u=a.status;if("string"===typeof u){if(!p[u])return new v("internal","internal");i=p[u],o=u}var c=a.message;"string"===typeof c&&(o=c),void 0!==(s=a.details)&&(s=n.decode(s))}}catch(r){}return"ok"===i?null:new v(i,o,s)}(f.status,f.json,this.serializer),g)throw g;if(!f.json)throw new v("internal","Response is not valid JSON object.");if("undefined"===typeof(m=f.json.data)&&(m=f.json.result),"undefined"===typeof m)throw new v("internal","Response is missing data field.");return[2,{data:this.serializer.decode(m)}]}}))}))},t}();function w(t,e){return f(this,void 0,void 0,(function(){var n;return d(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}!function(t,e){var n={Functions:b};t.INTERNAL.registerComponent(new a.Component("functions",(function(t,n){var r=n.instanceIdentifier,i=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal"),a=t.getProvider("messaging");return new b(i,o,a,s,r,e)}),"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}(o.default,fetch.bind(self)),o.default.registerVersion("@firebase/functions","0.6.13");var x=function(){return x=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},x.apply(this,arguments)};function _(t,e,n,i){return new(n||(n=Promise))((function(o,s){function a(t){try{c(i.next(t))}catch(r){s(r)}}function u(t){try{c(i.throw(t))}catch(r){s(r)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((i=i.apply(t,e||[])).next())}))}function T(t,e){var n,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(r){s=[6,r],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}Object.create;function E(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function S(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}Object.create;var k,A=n(51),O="0.4.30",C=1e4,P="w:0.4.30",I="FIS_v2",R=36e5,M=((k={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',k["not-registered"]="Firebase Installation is not registered.",k["installation-not-found"]="Firebase Installation not found.",k["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',k["app-offline"]="Could not process request. Application offline.",k["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",k),N=new u.ErrorFactory("installations","Installations",M);function L(t){return t instanceof u.FirebaseError&&t.code.includes("request-failed")}function D(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function F(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function j(t,e){return _(this,void 0,void 0,(function(){var n,r;return T(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,N.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function B(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function U(t,e){var n=e.refreshToken,r=B(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}(n)),r}function V(t){return _(this,void 0,void 0,(function(){var e;return T(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function z(t,e){var n=e.fid;return _(this,void 0,void 0,(function(){var e,r,i,o,s,a;return T(this,(function(u){switch(u.label){case 0:return e=D(t),r=B(t),i={fid:n,authVersion:I,appId:t.appId,sdkVersion:P},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,V((function(){return fetch(e,o)}))];case 1:return(s=u.sent()).ok?[4,s.json()]:[3,3];case 2:return a=u.sent(),[2,{fid:a.fid||n,registrationStatus:2,refreshToken:a.refreshToken,authToken:F(a.authToken)}];case 3:return[4,j("Create Installation",s)];case 4:throw u.sent()}}))}))}function G(t){return new Promise((function(e){setTimeout(e,t)}))}function Y(t){var e=btoa(String.fromCharCode.apply(String,function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([],S(t))));return e.replace(/\+/g,"-").replace(/\//g,"_")}var W=/^[cdef][\w-]{21}$/;function X(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return Y(t).substr(0,22)}(t);return W.test(e)?e:""}catch(n){return""}}function H(t){return t.appName+"!"+t.appId}var q=new Map;function K(t,e){var n=H(t);$(n,e),function(t,e){var n=Q();n&&n.postMessage({key:t,fid:e});Z()}(n,e)}function $(t,e){var n,r,i=q.get(t);if(i)try{for(var o=E(i),s=o.next();!s.done;s=o.next()){(0,s.value)(e)}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var J=null;function Q(){return!J&&"BroadcastChannel"in self&&((J=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){$(t.data.key,t.data.fid)}),J}function Z(){0===q.size&&J&&(J.close(),J=null)}var tt,et="firebase-installations-store",nt=null;function rt(){return nt||(nt=Object(A.openDb)("firebase-installations-database",1,(function(t){if(0===t.oldVersion)t.createObjectStore(et)}))),nt}function it(t,e){return _(this,void 0,void 0,(function(){var n,r,i,o,s;return T(this,(function(a){switch(a.label){case 0:return n=H(t),[4,rt()];case 1:return r=a.sent(),i=r.transaction(et,"readwrite"),[4,(o=i.objectStore(et)).get(n)];case 2:return s=a.sent(),[4,o.put(e,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===e.fid||K(t,e.fid),[2,e]}}))}))}function ot(t){return _(this,void 0,void 0,(function(){var e,n,r;return T(this,(function(i){switch(i.label){case 0:return e=H(t),[4,rt()];case 1:return n=i.sent(),[4,(r=n.transaction(et,"readwrite")).objectStore(et).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function st(t,e){return _(this,void 0,void 0,(function(){var n,r,i,o,s,a;return T(this,(function(u){switch(u.label){case 0:return n=H(t),[4,rt()];case 1:return r=u.sent(),i=r.transaction(et,"readwrite"),[4,(o=i.objectStore(et)).get(n)];case 2:return s=u.sent(),void 0!==(a=e(s))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(a,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!a||s&&s.fid===a.fid||K(t,a.fid),[2,a]}}))}))}function at(t){return _(this,void 0,void 0,(function(){var e,n,r;return T(this,(function(i){switch(i.label){case 0:return[4,st(t,(function(n){var r=function(t){return ht(t||{fid:X(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(N.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function(t,e){return _(this,void 0,void 0,(function(){var n,r;return T(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,z(t,e)];case 1:return n=i.sent(),[2,it(t,n)];case 2:return L(r=i.sent())&&409===r.customData.serverCode?[4,ot(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,it(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:ut(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function ut(t){return _(this,void 0,void 0,(function(){var e,n,r,i;return T(this,(function(o){switch(o.label){case 0:return[4,ct(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,G(100)];case 3:return o.sent(),[4,ct(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,at(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}}))}))}function ct(t){return st(t,(function(t){if(!t)throw N.create("installation-not-found");return ht(t)}))}function ht(t){return 1===(e=t).registrationStatus&&e.registrationTime+C<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function lt(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return _(this,void 0,void 0,(function(){var t,i,o,s,a,u,c;return T(this,(function(h){switch(h.label){case 0:return t=function(t,e){var n=e.fid;return D(t)+"/"+n+"/authTokens:generate"}(n,e),i=U(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={installation:{sdkVersion:P}},a={method:"POST",headers:i,body:JSON.stringify(s)},[4,V((function(){return fetch(t,a)}))];case 1:return(u=h.sent()).ok?[4,u.json()]:[3,3];case 2:return c=h.sent(),[2,F(c)];case 3:return[4,j("Generate Auth Token",u)];case 4:throw h.sent()}}))}))}function ft(t,e){return void 0===e&&(e=!1),_(this,void 0,void 0,(function(){var n,r,i;return T(this,(function(o){switch(o.label){case 0:return[4,st(t.appConfig,(function(r){if(!pt(r))throw N.create("not-registered");var i=r.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+R}(t)}(i))return r;if(1===i.requestStatus)return n=function(t,e){return _(this,void 0,void 0,(function(){var n,r;return T(this,(function(i){switch(i.label){case 0:return[4,dt(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,G(100)];case 3:return i.sent(),[4,dt(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,ft(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw N.create("app-offline");var o=function(t){var e={requestStatus:1,requestTime:Date.now()};return x(x({},t),{authToken:e})}(r);return n=function(t,e){return _(this,void 0,void 0,(function(){var n,r,i;return T(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,lt(t,e)];case 1:return n=o.sent(),i=x(x({},e),{authToken:n}),[4,it(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!L(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,ot(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=x(x({},e),{authToken:{requestStatus:0}}),[4,it(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function dt(t){return st(t,(function(t){if(!pt(t))throw N.create("not-registered");var e,n=t.authToken;return 1===(e=n).requestStatus&&e.requestTime+C<Date.now()?x(x({},t),{authToken:{requestStatus:0}}):t}))}function pt(t){return void 0!==t&&2===t.registrationStatus}function vt(t){return _(this,void 0,void 0,(function(){var e;return T(this,(function(n){switch(n.label){case 0:return[4,at(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function gt(t,e){return _(this,void 0,void 0,(function(){var n,r,i,o;return T(this,(function(s){switch(s.label){case 0:return n=function(t,e){var n=e.fid;return D(t)+"/"+n}(t,e),r=U(t,e),i={method:"DELETE",headers:r},[4,V((function(){return fetch(n,i)}))];case 1:return(o=s.sent()).ok?[3,3]:[4,j("Delete Installation",o)];case 2:throw s.sent();case 3:return[2]}}))}))}function mt(t,e){var n=t.appConfig;return function(t,e){Q();var n=H(t),r=q.get(n);r||(r=new Set,q.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=H(t),r=q.get(n);r&&(r.delete(e),0===r.size&&q.delete(n),Z())}(n,e)}}function yt(t){return N.create("missing-app-config-values",{valueName:t})}(tt=o.default).INTERNAL.registerComponent(new a.Component("installations",(function(t){var e=t.getProvider("app").getImmediate(),n=function(t){var e,n;if(!t||!t.options)throw yt("App Configuration");if(!t.name)throw yt("App Name");try{for(var r=E(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw yt(o)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),r={appConfig:n,platformLoggerProvider:t.getProvider("platform-logger")},i={app:e,getId:function(){return function(t){return _(this,void 0,void 0,(function(){var e,n,r;return T(this,(function(i){switch(i.label){case 0:return[4,at(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):ft(t).catch(console.error),[2,n.fid]}}))}))}(r)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),_(this,void 0,void 0,(function(){return T(this,(function(n){switch(n.label){case 0:return[4,vt(t.appConfig)];case 1:return n.sent(),[4,ft(t,e)];case 2:return[2,n.sent().token]}}))}))}(r,t)},delete:function(){return function(t){return _(this,void 0,void 0,(function(){var e,n;return T(this,(function(r){switch(r.label){case 0:return[4,st(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw N.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw N.create("app-offline");case 3:return[4,gt(e,n)];case 4:return r.sent(),[4,ot(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(r)},onIdChange:function(t){return mt(r,t)}};return i}),"PUBLIC")),tt.registerVersion("@firebase/installations",O);var bt=function(){return bt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},bt.apply(this,arguments)};function wt(t,e,n,i){return new(n||(n=Promise))((function(o,s){function a(t){try{c(i.next(t))}catch(r){s(r)}}function u(t){try{c(i.throw(t))}catch(r){s(r)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((i=i.apply(t,e||[])).next())}))}function xt(t,e){var n,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(r){s=[6,r],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}Object.create;function _t(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Tt(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}var Et;Object.create;var St,kt=((Et={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Et["only-available-in-window"]="This method is available in a Window context.",Et["only-available-in-sw"]="This method is available in a service worker context.",Et["permission-default"]="The notification permission was not granted and dismissed instead.",Et["permission-blocked"]="The notification permission was not granted and blocked instead.",Et["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Et["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Et["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",Et["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Et["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",Et["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",Et["token-update-no-token"]="FCM returned no token when updating the user to push.",Et["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Et["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",Et["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",Et["invalid-vapid-key"]="The public VAPID key must be a string.",Et["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",Et),At=new u.ErrorFactory("messaging","Messaging",kt),Ot="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ct="google.c.a.c_id";function Pt(t){var e=new Uint8Array(t),n=btoa(String.fromCharCode.apply(String,function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}([],Tt(e))));return n.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function It(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"}(St||(St={}));var Rt="fcm_token_details_db",Mt="fcm_token_object_Store";function Nt(t){return wt(this,void 0,void 0,(function(){var e,n,r,i=this;return xt(this,(function(o){switch(o.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=o.sent(),n=e.map((function(t){return t.name})),!n.includes(Rt))return[2,null];o.label=2;case 2:return r=null,[4,Object(A.openDb)(Rt,5,(function(e){return wt(i,void 0,void 0,(function(){var n,i,o,s;return xt(this,(function(a){switch(a.label){case 0:return e.oldVersion<2?[2]:e.objectStoreNames.contains(Mt)?[4,(n=e.transaction.objectStore(Mt)).index("fcmSenderId").get(t)]:[2];case 1:return i=a.sent(),[4,n.clear()];case 2:if(a.sent(),!i)return[2];if(2===e.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];r={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"===typeof o.vapidKey?o.vapidKey:Pt(o.vapidKey)}}}else(3===e.oldVersion||4===e.oldVersion)&&(r={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:Pt(o.auth),p256dh:Pt(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:Pt(o.vapidKey)}});return[2]}}))}))}))];case 3:return o.sent().close(),[4,Object(A.deleteDb)(Rt)];case 4:return o.sent(),[4,Object(A.deleteDb)("fcm_vapid_details_db")];case 5:return o.sent(),[4,Object(A.deleteDb)("undefined")];case 6:return o.sent(),[2,Lt(r)?r:null]}}))}))}function Lt(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"===typeof t.createTime&&t.createTime>0&&"string"===typeof t.token&&t.token.length>0&&"string"===typeof e.auth&&e.auth.length>0&&"string"===typeof e.p256dh&&e.p256dh.length>0&&"string"===typeof e.endpoint&&e.endpoint.length>0&&"string"===typeof e.swScope&&e.swScope.length>0&&"string"===typeof e.vapidKey&&e.vapidKey.length>0}var Dt="firebase-messaging-store",Ft=null;function jt(){return Ft||(Ft=Object(A.openDb)("firebase-messaging-database",1,(function(t){if(0===t.oldVersion)t.createObjectStore(Dt)}))),Ft}function Bt(t){return wt(this,void 0,void 0,(function(){var e,n,r;return xt(this,(function(i){switch(i.label){case 0:return e=zt(t),[4,jt()];case 1:return[4,i.sent().transaction(Dt).objectStore(Dt).get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,Nt(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,Ut(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function Ut(t,e){return wt(this,void 0,void 0,(function(){var n,r,i;return xt(this,(function(o){switch(o.label){case 0:return n=zt(t),[4,jt()];case 1:return r=o.sent(),[4,(i=r.transaction(Dt,"readwrite")).objectStore(Dt).put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function Vt(t){return wt(this,void 0,void 0,(function(){var e,n,r;return xt(this,(function(i){switch(i.label){case 0:return e=zt(t),[4,jt()];case 1:return n=i.sent(),[4,(r=n.transaction(Dt,"readwrite")).objectStore(Dt).delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function zt(t){return t.appConfig.appId}function Gt(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o,s,a;return xt(this,(function(u){switch(u.label){case 0:return[4,Ht(t)];case 1:n=u.sent(),r=qt(e),i={method:"POST",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(Xt(t.appConfig),i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw s=u.sent(),At.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw a=o.error.message,At.create("token-subscribe-failed",{errorInfo:a});if(!o.token)throw At.create("token-subscribe-no-token");return[2,o.token]}}))}))}function Yt(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o,s,a;return xt(this,(function(u){switch(u.label){case 0:return[4,Ht(t)];case 1:n=u.sent(),r=qt(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(Xt(t.appConfig)+"/"+e.token,i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw s=u.sent(),At.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw a=o.error.message,At.create("token-update-failed",{errorInfo:a});if(!o.token)throw At.create("token-update-no-token");return[2,o.token]}}))}))}function Wt(t,e){return wt(this,void 0,void 0,(function(){var n,r,i,o,s;return xt(this,(function(a){switch(a.label){case 0:return[4,Ht(t)];case 1:n=a.sent(),r={method:"DELETE",headers:n},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(Xt(t.appConfig)+"/"+e,r)];case 3:return[4,a.sent().json()];case 4:if((i=a.sent()).error)throw o=i.error.message,At.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw s=a.sent(),At.create("token-unsubscribe-failed",{errorInfo:s});case 6:return[2]}}))}))}function Xt(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function Ht(t){var e=t.appConfig,n=t.installations;return wt(this,void 0,void 0,(function(){var t;return xt(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function qt(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==Ot&&(o.web.applicationPubKey=i),o}function Kt(t,e,n){return wt(this,void 0,void 0,(function(){var r,i,o,s;return xt(this,(function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw At.create("permission-blocked");return[4,Zt(e,n)];case 1:return r=a.sent(),[4,Bt(t)];case 2:return i=a.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:Pt(r.getKey("auth")),p256dh:Pt(r.getKey("p256dh"))},i?[3,3]:[2,Qt(t,o)];case 3:if(function(t,e){var n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,o=e.p256dh===t.p256dh;return n&&r&&i&&o}(i.subscriptionOptions,o))return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,Wt(t,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,Qt(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,Jt({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}}))}))}function $t(t,e){return wt(this,void 0,void 0,(function(){var n,r;return xt(this,(function(i){switch(i.label){case 0:return[4,Bt(t)];case 1:return(n=i.sent())?[4,Wt(t,n.token)]:[3,4];case 2:return i.sent(),[4,Vt(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function Jt(t,e,n){return wt(this,void 0,void 0,(function(){var r,i,o;return xt(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,Yt(e,t)];case 1:return r=s.sent(),i=bt(bt({},t),{token:r,createTime:Date.now()}),[4,Ut(e,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,$t(e,n)];case 4:throw s.sent(),o;case 5:return[2]}}))}))}function Qt(t,e){return wt(this,void 0,void 0,(function(){var n,r;return xt(this,(function(i){switch(i.label){case 0:return[4,Gt(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,Ut(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function Zt(t,e){return wt(this,void 0,void 0,(function(){var n;return xt(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:It(e)})]}}))}))}function te(t){return"object"===typeof t&&!!t&&Ct in t}function ee(t){return new Promise((function(e){setTimeout(e,t)}))}var ne=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!==typeof t)throw At.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return wt(this,void 0,void 0,(function(){var n;return xt(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,Bt(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null===n||void 0===n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:Ot,r.label=2;case 2:return[2,Kt(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return $t(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw At.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw At.create("use-vapid-key-after-get-token");if("string"!==typeof t||0===t.length)throw At.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw At.create("only-available-in-window")},t.prototype.onMessage=function(){throw At.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw At.create("only-available-in-window")},t.prototype.onPush=function(t){return wt(this,void 0,void 0,(function(){var e,n,r,i;return xt(this,(function(o){switch(o.label){case 0:return e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(n){return null}}(t),e?[4,se()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,oe(n,e)]:(r=!1,e.notification?[4,ae(re(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"===typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,ee(1e3)]);case 4:return o.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return wt(this,void 0,void 0,(function(){var r;return xt(this,(function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,$t(this.firebaseDependencies,self.registration)];case 1:case 5:return i.sent(),[2];case 2:return[4,Bt(this.firebaseDependencies)];case 3:return r=i.sent(),[4,$t(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,Kt(this.firebaseDependencies,self.registration,null!==(n=null===(e=null===r||void 0===r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:Ot)]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return wt(this,void 0,void 0,(function(){var r,i,o,s,a;return xt(this,(function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),i=function(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;if(i)return i;return te(t.data)?self.location.origin:null}(r),i?(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,ie(o)]):[2]):[2];case 1:return(a=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return a=u.sent(),[4,ee(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=u.sent(),u.label=6;case 6:return a?(r.messageType=St.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,a.postMessage(r)]):[2]}}))}))},t}();function re(t){var e,n=bt({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function ie(t){return wt(this,void 0,void 0,(function(){var e,n,r,i,o,s,a;return xt(this,(function(u){switch(u.label){case 0:return[4,se()];case 1:e=u.sent();try{for(n=_t(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(c){s={error:c}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}}))}))}function oe(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=St.PUSH_RECEIVED;try{for(var i=_t(t),o=i.next();!o.done;o=i.next()){o.value.postMessage(e)}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function se(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function ae(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var ue=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return wt(this,void 0,void 0,(function(){var e,n;return xt(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===St.PUSH_RECEIVED&&("function"===typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),te(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return wt(this,void 0,void 0,(function(){return xt(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw At.create("permission-blocked");return[4,this.updateVapidKey(null===t||void 0===t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null===t||void 0===t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,Kt(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return wt(this,void 0,void 0,(function(){return xt(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=Ot),[2]}))}))},t.prototype.updateSwReg=function(t){return wt(this,void 0,void 0,(function(){return xt(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw At.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return wt(this,void 0,void 0,(function(){var t,e;return xt(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),At.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return wt(this,void 0,void 0,(function(){return xt(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,$t(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return wt(this,void 0,void 0,(function(){var t;return xt(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?At.create("permission-blocked"):At.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw At.create("use-vapid-key-after-get-token");if("string"!==typeof t||0===t.length)throw At.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw At.create("invalid-sw-registration");if(this.swRegistration)throw At.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw At.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw At.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return wt(this,void 0,void 0,(function(){var n;return xt(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case St.NOTIFICATION_CLICKED:return"notification_open";case St.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function ce(t){return At.create("missing-app-config-values",{valueName:t})}var he={isSupported:le};function le(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}o.default.INTERNAL.registerComponent(new a.Component("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n=function(t){var e,n;if(!t||!t.options)throw ce("App Configuration Object");if(!t.name)throw ce("App Name");var r=t.options;try{for(var i=_t(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw ce(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),r={app:e,appConfig:n,installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!le())throw At.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new ne(r):new ue(r)}),"PUBLIC").setServiceProps(he));var fe=function(t,e){return fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},fe(t,e)};var de=function(){return de=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},de.apply(this,arguments)};function pe(t,e,n,i){return new(n||(n=Promise))((function(o,s){function a(t){try{c(i.next(t))}catch(r){s(r)}}function u(t){try{c(i.throw(t))}catch(r){s(r)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((i=i.apply(t,e||[])).next())}))}function ve(t,e){var n,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(r){s=[6,r],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}Object.create;function ge(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;var me="firebasestorage.googleapis.com",ye=function(t){function e(n,r){var i=t.call(this,be(n),"Firebase Storage: "+r+" ("+be(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}fe(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype._codeEquals=function(t){return be(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(u.FirebaseError);function be(t){return"storage/"+t}function we(){return new ye("unknown","An unknown error occurred, please check the error payload for server response.")}function xe(){return new ye("canceled","User canceled the upload/download.")}function _e(){return new ye("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Te(t){return new ye("invalid-argument",t)}function Ee(){return new ye("app-deleted","The Firebase app was deleted.")}function Se(t){return new ye("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ke(t,e){return new ye("invalid-format","String does not match format '"+t+"': "+e)}function Ae(t){throw new ye("internal-error","Internal error: "+t)}var Oe={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Ce=function(t,e){this.data=t,this.contentType=e||null};function Pe(t,e){switch(t){case Oe.RAW:return new Ce(Ie(e));case Oe.BASE64:case Oe.BASE64URL:return new Ce(Re(t,e));case Oe.DATA_URL:return new Ce(function(t){var e=new Me(t);return e.base64?Re(Oe.BASE64,e.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(r){throw ke(Oe.DATA_URL,"Malformed data URL.")}return Ie(e)}(e.rest)}(e),new Me(e).contentType)}throw we()}function Ie(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<t.length-1&&56320===(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320===(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Re(t,e){switch(t){case Oe.BASE64:var n=-1!==e.indexOf("-"),i=-1!==e.indexOf("_");if(n||i)throw ke(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Oe.BASE64URL:var o=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(o||s)throw ke(t,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(r){throw ke(t,"Invalid character found")}for(var u=new Uint8Array(a.length),c=0;c<a.length;c++)u[c]=a.charCodeAt(c);return u}var Me=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw ke(Oe.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i};var Ne,Le={STATE_CHANGED:"state_changed"},De={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Fe(t){switch(t){case"running":case"pausing":case"canceling":return De.RUNNING;case"paused":return De.PAUSED;case"success":return De.SUCCESS;case"canceled":return De.CANCELED;default:return De.ERROR}}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(Ne||(Ne={}));var je=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Ne.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Ne.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Ne.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Ae("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Ae("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Ae("cannot .getStatus() before sending");try{return this.xhr_.status}catch(r){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Ae("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}();var Be=function(){function t(){}return t.prototype.createConnection=function(){return new je},t}(),Ue=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var i;try{i=t.makeFromUrl(e,n)}catch(r){return new t(e,"")}if(""===i.path)return i;throw new ye("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+(n===me?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],c=0;c<u.length;c++){var h=u[c],l=h.regex.exec(e);if(l){var f=l[h.indices.bucket],d=l[h.indices.path];d||(d=""),r=new t(f,d),h.postModify(r);break}}if(null==r)throw function(t){return new ye("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),Ve=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function ze(t){return"string"===typeof t||t instanceof String}function Ge(t){return Ye()&&t instanceof Blob}function Ye(){return"undefined"!==typeof Blob}function We(t,e,n,r){if(r<e)throw Te("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw Te("Invalid value for '"+t+"'. Expected "+n+" or less.")}function Xe(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null===n||void 0===n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function He(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}var qe=function(){function t(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise((function(t,e){l.resolve_=t,l.reject_=e,l.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var i,o=t.resolve_,s=t.reject_,a=n.connection;if(n.wasSuccessCode)try{var u=t.callback_(a,a.getResponseText());void 0!==u?o(u):o()}catch(r){s(r)}else null!==a?((i=we()).serverResponse=a.getResponseText(),t.errorCallback_?s(t.errorCallback_(a,i)):s(i)):n.canceled?s(i=t.appDelete_?Ee():xe()):s(i=new ye("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Ke(!1,null,!0)):this.backoffId_=function(t,e,n){var r=1,i=null,o=!1,s=0;function a(){return 2===s}var u=!1;function c(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||(u=!0,e.apply(null,t))}function h(e){i=setTimeout((function(){i=null,t(l,a())}),e)}function l(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.call.apply(c,ge([null,t],e));else{var i;a()||o?c.call.apply(c,ge([null,t],e)):(r<64&&(r*=2),1===s?(s=2,i=0):i=1e3*(r+Math.random()),h(i))}}var f=!1;function d(t){f||(f=!0,u||(null!==i?(t||(s=2),clearTimeout(i),h(0)):t||(s=1)))}return h(0),setTimeout((function(){o=!0,d(!0)}),n),d}((function(e,n){if(n)e(!1,new Ke(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(){null!==t.progressCallback_&&r.removeUploadProgressListener(i),t.pendingConnection_=null;var n=r.getErrorCode()===Ne.NO_ERROR,o=r.getStatus();if(n&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new Ke(s,r))}else{var a=r.getErrorCode()===Ne.ABORT;e(!1,new Ke(!1,null,a))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Ke=function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n};function $e(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Je(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=$e();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Ye())return new Blob(t);throw new ye("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Qe=function(){function t(t,e){var n=0,r="";Ge(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Ge(this.data_)){var r=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===r?null:new t(r)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Ye()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(Je.apply(null,r))}var i=e.map((function(t){return ze(t)?Pe(Oe.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();function Ze(t){var e,n;try{e=JSON.parse(t)}catch(r){return null}return"object"!==typeof(n=e)||Array.isArray(n)?null:e}function tn(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function en(t,e){return e}var nn=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||en},rn=null;function on(){if(rn)return rn;var t=[];t.push(new nn("bucket")),t.push(new nn("generation")),t.push(new nn("metageneration")),t.push(new nn("name","fullPath",!0));var e=new nn("name");e.xform=function(t,e){return function(t){return!ze(t)||t.length<2?t:tn(t)}(e)},t.push(e);var n=new nn("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new nn("timeCreated")),t.push(new nn("updated")),t.push(new nn("md5Hash",null,!0)),t.push(new nn("cacheControl",null,!0)),t.push(new nn("contentDisposition",null,!0)),t.push(new nn("contentEncoding",null,!0)),t.push(new nn("contentLanguage",null,!0)),t.push(new nn("contentType",null,!0)),t.push(new nn("metadata","customMetadata",!0)),rn=t}function sn(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new Ue(n,r);return e._makeStorageReference(i)}})}(r,t),r}function an(t,e,n){var r=Ze(e);return null===r?null:sn(t,r,n)}function un(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function cn(t,e,n){var r=Ze(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new Ue(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var h=c[u];a=t._makeStorageReference(new Ue(e,h.name)),r.items.push(a)}return r}(t,e,r)}var hn=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function ln(t){if(!t)throw we()}function fn(t,e){return function(n,r){var i=an(t,r,e);return ln(null!==i),i}}function dn(t,e){return function(n,r){var i=an(t,r,e);return ln(null!==i),function(t,e,n){var r=Ze(e);if(null===r)return null;if(!ze(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.bucket,i=t.fullPath;return Xe("/b/"+o(r)+"/o/"+o(i),n)+He({alt:"media",token:e})}))[0]}(i,r,t.host)}}function pn(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=e.getResponseText().includes("Firebase App Check token is invalid")?new ye("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new ye("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new ye("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new ye("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function vn(t){var e=pn(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new ye("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function gn(t,e,n){var r=Xe(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new hn(r,"GET",fn(t,n),i);return o.errorHandler=vn(e),o}function mn(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=Xe(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new hn(s,"GET",function(t,e){return function(n,r){var i=cn(t,e,r);return ln(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=pn(e),u}function yn(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var bn=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function wn(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(r){ln(!1)}return ln(!!n&&-1!==(e||["active"]).indexOf(n)),n}var xn=262144;function _n(t,e,n,r,i,o,s,a){var u=new bn(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new ye("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;i>0&&(h=Math.min(h,i));var l=u.current,f=l+h,d={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},p=r.slice(l,f);if(null===p)throw _e();var v=e.maxUploadRetryTime,g=new hn(n,"POST",(function(t,n){var i,s=wn(t,["active","final"]),a=u.current+h,c=r.size();return i="final"===s?fn(e,o)(t,n):null,new bn(a,c,"final"===s,i)}),v);return g.headers=d,g.body=p.uploadData(),g.progressCallback=a||null,g.errorHandler=pn(t),g}var Tn=function(t,e,n){if("function"===typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};function En(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var Sn=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=on(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var i=function(t,e,n,i,o){var s=e.bucketOnlyServerUrl(),a=yn(e,i,o),u={name:a.fullPath},c=Xe(s,t.host),h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+i.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=un(a,n),f=t.maxUploadRetryTime,d=new hn(c,"POST",(function(t){var e;wn(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(r){ln(!1)}return ln(ze(e)),e}),f);return d.urlParams=u,d.headers=h,d.body=l,d.errorHandler=pn(e),d}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),o=t._ref.storage._makeRequest(i,e,n);t._request=o,o.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,i){var o=function(t,e,n,i){var o=t.maxUploadRetryTime,s=new hn(n,"POST",(function(t){var e=wn(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(r){ln(!1)}n||ln(!1);var o=Number(n);return ln(!isNaN(o)),new bn(o,i.size(),"final"===e)}),o);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=pn(e),s}(t._ref.storage,t._ref._location,e,t._blob),s=t._ref.storage._makeRequest(o,n,i);t._request=s,s.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=xn*this._chunkMultiplier,n=new bn(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((function(o,s){var a;try{a=_n(t._ref._location,t._ref.storage,i,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(r){return t._error=r,void t._transition("error")}var u=t._ref.storage._makeRequest(a,o,s);t._request=u,u.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){xn*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=gn(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=yn(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+un(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+a+"--",l=Qe.getBlob(c,r,h);if(null===l)throw _e();var f={name:u.fullPath},d=Xe(o,t.host),p=t.maxUploadRetryTime,v=new hn(d,"POST",fn(t,n),p);return v.urlParams=f,v.headers=s,v.body=l.uploadData(),v.errorHandler=pn(e),v}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=xe(),this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Fe(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Tn(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Fe(this._state)){case De.SUCCESS:En(this._resolve.bind(null,this.snapshot))();break;case De.CANCELED:case De.ERROR:En(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Fe(this._state)){case De.RUNNING:case De.PAUSED:t.next&&En(t.next.bind(t,this.snapshot))();break;case De.SUCCESS:t.complete&&En(t.complete.bind(t))();break;default:t.error&&En(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),kn=function(){function t(t,e){this._service=t,this._location=e instanceof Ue?e:Ue.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new Ue(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return tn(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new Ue(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw Se(t)},t}();function An(t){var e={prefixes:[],items:[]};return On(t,e).then((function(){return e}))}function On(t,e,n){return pe(this,void 0,void 0,(function(){var r,i,o;return ve(this,(function(s){switch(s.label){case 0:return[4,Cn(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,On(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function Cn(t,e){return pe(this,void 0,void 0,(function(){var n,r;return ve(this,(function(i){switch(i.label){case 0:return null!=e&&"number"===typeof e.maxResults&&We("options.maxResults",1,1e3,e.maxResults),n=e||{},r=mn(t.storage,t._location,"/",n.pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function Pn(t,e){return pe(this,void 0,void 0,(function(){var n;return ve(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=Xe(e.fullServerUrl(),t.host),o=un(n,r),s=t.maxOperationRetryTime,a=new hn(i,"PATCH",fn(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=vn(e),a}(t.storage,t._location,e,on()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function In(t){return pe(this,void 0,void 0,(function(){var e;return ve(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=Xe(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new hn(r,"GET",dn(t,n),i);return o.errorHandler=vn(e),o}(t.storage,t._location,on()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw new ye("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function Rn(t){return pe(this,void 0,void 0,(function(){var e;return ve(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=Xe(e.fullServerUrl(),t.host),r=t.maxOperationRetryTime,i=new hn(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=vn(e),i}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function Mn(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new Ue(t._location.bucket,n);return new kn(t.storage,r)}function Nn(t){return/^[A-Za-z]+:\/\//.test(t)}function Ln(t,e){if(t instanceof jn){var n=t;if(null==n._bucket)throw new ye("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new kn(n,n._bucket);return null!=e?Ln(r,e):r}if(void 0!==e){if(e.includes(".."))throw Te('`path` param cannot contain ".."');return Mn(t,e)}return t}function Dn(t,e){if(e&&Nn(e)){if(t instanceof jn)return new kn(t,e);throw Te("To use ref(service, url), the first argument must be a Storage instance.")}return Ln(t,e)}function Fn(t,e){var n=null===e||void 0===e?void 0:e.storageBucket;return null==n?null:Ue.makeFromBucketSpec(n,t)}var jn=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=me,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ue.makeFromBucketSpec(i,this._host):Fn(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=Ue.makeFromBucketSpec(this._url,t):this._bucket=Fn(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){We("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){We("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return pe(this,void 0,void 0,(function(){var t,e;return ve(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return pe(this,void 0,void 0,(function(){var t;return ve(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new kn(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new Ve(Ee());var i=function(t,e,n,r,i,o){var s=He(t.urlParams),a=t.url+s,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!==e&&void 0!==e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new qe(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return pe(this,void 0,void 0,(function(){var e,n,r;return ve(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=i.sent(),n=e[0],r=e[1],[2,this._makeRequest(t,n,r)]}}))}))},t}();function Bn(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new Sn(t,new Qe(e),n)}(t=Object(u.getModularInstance)(t),e,n)}function Un(t){return function(t){return pe(this,void 0,void 0,(function(){var e;return ve(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=gn(t.storage,t._location,on()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=Object(u.getModularInstance)(t))}function Vn(t,e){return Dn(t=Object(u.getModularInstance)(t),e)}var zn=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),Gn=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new zn(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new zn(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"===typeof e?function(t){return e(new zn(t,i,i._ref))}:{next:e.next?function(t){return e.next(new zn(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),Yn=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new Wn(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new Wn(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),Wn=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){var n=function(t,e){return Mn(t,e)}(this._delegate,e);return new t(n,this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new Gn(Bn(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=Oe.RAW),this._throwIfRoot("putString");var r=Pe(e,t),i=de({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Gn(new Sn(this._delegate,new Qe(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,An(t=Object(u.getModularInstance)(t))).then((function(t){return new Yn(t,e.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return Cn(t=Object(u.getModularInstance)(t),e)}(this._delegate,t||void 0).then((function(t){return new Yn(t,e.storage)}))},t.prototype.getMetadata=function(){return Un(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return Pn(t=Object(u.getModularInstance)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return t=this._delegate,In(t=Object(u.getModularInstance)(t));var t},t.prototype.delete=function(){return this._throwIfRoot("delete"),t=this._delegate,Rn(t=Object(u.getModularInstance)(t));var t},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw Se(t)},t}(),Xn=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Nn(t))throw Te("ref() expected a child path but got a URL, use refFromURL instead.");return new Wn(Vn(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Nn(t))throw Te("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ue.makeFromUrl(t,this._delegate.host)}catch(r){throw Te("refFromUrl() expected a valid full URL but got an invalid one.")}return new Wn(Vn(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();function Hn(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Xn(r,new jn(r,i,s,new Be,n,o.default.SDK_VERSION))}!function(t){var e={TaskState:De,TaskEvent:Le,StringFormat:Oe,Storage:jn,Reference:Wn};t.INTERNAL.registerComponent(new a.Component("storage",Hn,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.6.0")}(o.default);var qn=function(){return qn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},qn.apply(this,arguments)};Object.create;function Kn(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;var $n,Jn,Qn,Zn="0.4.16",tr=Zn,er="FB-PERF-TRACE-MEASURE",nr="_wt_",rr="_fcp",ir="_fid",or="@firebase/performance/config",sr="@firebase/performance/configexpire",ar="Performance",ur=(($n={})["trace started"]="Trace {$traceName} was started before.",$n["trace stopped"]="Trace {$traceName} is not running.",$n["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",$n["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",$n["no window"]="Window is not available.",$n["no app id"]="App id is not available.",$n["no project id"]="Project id is not available.",$n["no api key"]="Api key is not available.",$n["invalid cc log"]="Attempted to queue invalid cc event",$n["FB not default"]="Performance can only start when Firebase app instance is the default one.",$n["RC response not ok"]="RC response is not ok",$n["invalid attribute name"]="Attribute name {$attributeName} is invalid.",$n["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",$n["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",$n["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",$n),cr=new u.ErrorFactory("performance",ar,ur),hr=new c.Logger(ar);hr.logLevel=c.LogLevel.INFO;var lr,fr=function(){function t(t){if(this.window=t,!t)throw cr.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Object(u.isIndexedDBAvailable)()||(hr.info("IndexedDB is not supported by current browswer"),!1):(hr.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){if(this.PerformanceObserver){var n=new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}}));n.observe({entryTypes:[t]})}},t.getInstance=function(){return void 0===Jn&&(Jn=new t(Qn)),Jn},t}();function dr(t,e){var n=t.length-e.length;if(n<0||n>1)throw cr.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var pr,vr,gr=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=dr("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=dr("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw cr.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw cr.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw cr.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===lr&&(lr=new t),lr},t}();function mr(){return pr}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN"}(vr||(vr={}));var yr=["firebase_","google_","ga_"],br=new RegExp("^[a-zA-Z]\\w*$");function wr(){var t=fr.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function xr(){switch(fr.getInstance().document.visibilityState){case"visible":return vr.VISIBLE;case"hidden":return vr.HIDDEN;default:return vr.UNKNOWN}}function _r(){var t=fr.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}var Tr="0.0.1",Er=!0,Sr="FIREBASE_INSTALLATIONS_AUTH";function kr(t){var e=function(){var t=fr.getInstance().localStorage;if(!t)return;var e=t.getItem(sr);if(!e||(n=e,!(Number(n)>Date.now())))return;var n;var r=t.getItem(or);if(!r)return;try{return JSON.parse(r)}catch(i){return}}();return e?(Or(e),Promise.resolve()):function(t){return function(){var t=gr.getInstance().installationsService.getToken();return t.then((function(t){})),t}().then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+gr.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+gr.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:Sr+" "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:gr.getInstance().getAppId(),app_version:tr,sdk_version:Tr})});return fetch(r).then((function(t){if(t.ok)return t.json();throw cr.create("RC response not ok")}))})).catch((function(){hr.info(Ar)}))}(t).then(Or).then((function(t){return function(t){var e=fr.getInstance().localStorage;if(!t||!e)return;e.setItem(or,JSON.stringify(t)),e.setItem(sr,String(Date.now()+60*gr.getInstance().configTimeToLive*60*1e3))}(t)}),(function(){}))}var Ar="Could not fetch config, will use default configs";function Or(t){if(!t)return t;var e=gr.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=Er,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=Cr(e.tracesSamplingRate),e.logNetworkAfterSampling=Cr(e.networkRequestsSamplingRate),t}function Cr(t){return Math.random()<=t}var Pr,Ir=1;function Rr(){return Ir=2,Pr=Pr||function(){var t=fr.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function n(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}().then((function(){return function(){var t=gr.getInstance().installationsService.getId();return t.then((function(t){pr=t})),t}()})).then((function(t){return kr(t)})).then((function(){return Mr()}),(function(){return Mr()}))}function Mr(){Ir=3}var Nr,Lr=1e4,Dr=3,Fr=[],jr=!1;function Br(t){setTimeout((function(){if(0!==Dr)return Fr.length?void function(){var t=Fr.splice(0,1e3),e=t.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}));(function(t,e){return function(t){var e=gr.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then((function(t){return t.ok||hr.info("Call to Firebase backend failed."),t.json()})).then((function(t){var n=Number(t.nextRequestWaitMillis),r=Lr;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(Fr=Kn(Kn([],e),Fr),hr.info("Retry transport request later.")),Dr=3,Br(r)}))})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:gr.getInstance().logSource,log_event:e},t).catch((function(){Fr=Kn(Kn([],t),Fr),Dr--,hr.info("Tries left: "+Dr+"."),Br(Lr)}))}():Br(Lr)}),t)}function Ur(t){if(!t.eventTime||!t.message)throw cr.create("invalid cc log");Fr=Kn(Kn([],Fr),[t])}function Vr(t,e){Nr||(Nr=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Ur({message:t.apply(void 0,e),eventTime:Date.now()})}}(Yr)),Nr(t,e)}function zr(t){var e=gr.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&fr.getInstance().requiredApisAvailable()&&(t.isAuto&&xr()!==vr.VISIBLE||(3===Ir?Gr(t):Rr().then((function(){return Gr(t)}),(function(){return Gr(t)}))))}function Gr(t){if(mr()){var e=gr.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return Vr(t,1)}),0)}}function Yr(t,e){return 0===e?function(t){var e={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},n={application_info:Wr(),network_request_metric:e};return JSON.stringify(n)}(t):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:Wr(),trace_metric:e};return JSON.stringify(r)}(t)}function Wr(){return{google_app_id:gr.getInstance().getAppId(),app_instance_id:mr(),web_app_info:{sdk_version:tr,page_url:fr.getInstance().getUrl(),service_worker_status:wr(),visibility_state:xr(),effective_connection_type:_r()},application_process_state:0}}var Xr=["_fp",rr,ir];var Hr=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=fr.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw cr.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw cr.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),zr(this)},t.prototype.record=function(t,e,n){if(t<=0)throw cr.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw cr.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=qn({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}zr(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(!function(t,e){return!(0===t.length||t.length>100)&&(e&&e.startsWith(nr)&&Xr.indexOf(t)>-1||!t.startsWith("_"))}(t,this.name))throw cr.create("invalid custom metric name",{customMetricName:t});this.counters[t]=function(t){var e=Math.floor(t);return e<t&&hr.info("Metric value should be an Integer, setting the value as : "+e+"."),e}(e)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n=function(t){return!(0===t.length||t.length>40)&&!yr.some((function(e){return t.startsWith(e)}))&&!!t.match(br)}(t),r=function(t){return 0!==t.length&&t.length<=100}(e);if(n&&r)this.customAttributes[t]=e;else{if(!n)throw cr.create("invalid attribute name",{attributeName:t});if(!r)throw cr.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return qn({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=fr.getInstance().getUrl();if(i){var o=new t(nr+i,!0),s=Math.floor(1e3*fr.getInstance().getTimeOrigin());o.setStartTime(s),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));if(n){var a=n.find((function(t){return"first-paint"===t.name}));a&&a.startTime&&o.putMetric("_fp",Math.floor(1e3*a.startTime));var u=n.find((function(t){return"first-contentful-paint"===t.name}));u&&u.startTime&&o.putMetric(rr,Math.floor(1e3*u.startTime)),r&&o.putMetric(ir,Math.floor(1e3*r))}zr(o)}},t.createUserTimingTrace=function(e){zr(new t(e,!1,e))},t}();function qr(t){var e=t;if(e&&void 0!==e.responseStart){var n=fr.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=gr.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return Vr(t,0)}),0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function Kr(){mr()&&(setTimeout((function(){return function(){var t=fr.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){Hr.createOobTrace(e,n),r=void 0}),5e3);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),Hr.createOobTrace(e,n,t))}))}else Hr.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=fr.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){qr(r[n])}t.setupObserver("resource",qr)}()}),0),setTimeout((function(){return function(){for(var t=fr.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){$r(r[n])}t.setupObserver("measure",$r)}()}),0))}function $r(t){var e=t.name;e.substring(0,er.length)!==er&&Hr.createUserTimingTrace(e)}var Jr=function(){function t(t){this.app=t,fr.getInstance().requiredApisAvailable()&&Object(u.validateIndexedDBOpenable)().then((function(t){t&&(jr||(Br(5500),jr=!0),Rr().then(Kr,Kr))})).catch((function(t){hr.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new Hr(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return gr.getInstance().instrumentationEnabled},set:function(t){gr.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return gr.getInstance().dataCollectionEnabled},set:function(t){gr.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();!function(t){var e=function(t,e){if("[DEFAULT]"!==t.name)throw cr.create("FB not default");if("undefined"===typeof window)throw cr.create("no window");return function(t){Qn=t}(window),gr.getInstance().firebaseAppInstance=t,gr.getInstance().installationsService=e,new Jr(t)};t.INTERNAL.registerComponent(new a.Component("performance",(function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();return e(n,r)}),"PUBLIC")),t.registerVersion("@firebase/performance",Zn)}(o.default);var Qr=function(){return Qr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Qr.apply(this,arguments)};function Zr(t,e,n,i){return new(n||(n=Promise))((function(o,s){function a(t){try{c(i.next(t))}catch(r){s(r)}}function u(t){try{c(i.throw(t))}catch(r){s(r)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((i=i.apply(t,e||[])).next())}))}function ti(t,e){var n,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(r){s=[6,r],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}Object.create;Object.create;var ei,ni,ri="https://www.googletagmanager.com/gtag/js";!function(t){t.EVENT="event",t.SET="set",t.CONFIG="config"}(ei||(ei={})),function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"}(ni||(ni={}));var ii,oi=new c.Logger("@firebase/analytics");function si(t,e,n,r,i,o){return Zr(this,void 0,void 0,(function(){var s,a,u,c;return ti(this,(function(h){switch(h.label){case 0:s=r[i],h.label=1;case 1:return h.trys.push([1,7,,8]),s?[4,e[s]]:[3,3];case 2:return h.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return a=h.sent(),(u=a.find((function(t){return t.measurementId===i})))?[4,e[u.appId]]:[3,6];case 5:h.sent(),h.label=6;case 6:return[3,8];case 7:return c=h.sent(),oi.error(c),[3,8];case 8:return t(ei.CONFIG,i,o),[2]}}))}))}function ai(t,e,n,r,i){return Zr(this,void 0,void 0,(function(){var o,s,a,u,c,h,l,f;return ti(this,(function(d){switch(d.label){case 0:return d.trys.push([0,4,,5]),o=[],i&&i.send_to?(s=i.send_to,Array.isArray(s)||(s=[s]),[4,Promise.all(n)]):[3,2];case 1:for(a=d.sent(),u=function(t){var n=a.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,h=s;c<h.length&&(l=h[c],"break"!==u(l));c++);d.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return d.sent(),t(ei.EVENT,r,i||{}),[3,5];case 4:return f=d.sent(),oi.error(f),[3,5];case 5:return[2]}}))}))}function ui(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,s){return Zr(this,void 0,void 0,(function(){var a;return ti(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==ei.EVENT?[3,2]:[4,ai(t,e,n,o,s)];case 1:return u.sent(),[3,5];case 2:return i!==ei.CONFIG?[3,4]:[4,si(t,e,n,r,o,s)];case 3:return u.sent(),[3,5];case 4:t(ei.SET,o),u.label=5;case 5:return[3,7];case 6:return a=u.sent(),oi.error(a),[3,7];case 7:return[2]}}))}))}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}var ci=((ii={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",ii["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",ii["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",ii["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",ii["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",ii["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",ii["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",ii["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',ii["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',ii),hi=new u.ErrorFactory("analytics","Analytics",ci),li=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function fi(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function di(t){var e;return Zr(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return ti(this,(function(c){switch(c.label){case 0:return n=t.appId,r=t.apiKey,i={method:"GET",headers:fi(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(o,i)];case 1:if(200===(s=c.sent()).status||304===s.status)return[3,6];a="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,s.json()];case 3:return u=c.sent(),(null===(e=u.error)||void 0===e?void 0:e.message)&&(a=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw hi.create("config-fetch-failed",{httpStatus:s.status,responseMessage:a});case 6:return[2,s.json()]}}))}))}function pi(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=li),Zr(this,void 0,void 0,(function(){var e,s,a,c,h,l,f;return ti(this,(function(d){switch(d.label){case 0:e=t.appId,s=t.measurementId,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,vi(n,i)];case 2:return d.sent(),[3,4];case 3:if(a=d.sent(),s)return oi.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+a.message+"]"),[2,{appId:e,measurementId:s}];throw a;case 4:return d.trys.push([4,6,,7]),[4,di(t)];case 5:return c=d.sent(),r.deleteThrottleMetadata(e),[2,c];case 6:if(!function(t){if(!(t instanceof u.FirebaseError)||!t.customData)return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(h=d.sent())){if(r.deleteThrottleMetadata(e),s)return oi.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+h.message+"]"),[2,{appId:e,measurementId:s}];throw h}return l=503===Number(h.customData.httpStatus)?Object(u.calculateBackoffMillis)(o,r.intervalMillis,30):Object(u.calculateBackoffMillis)(o,r.intervalMillis),f={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(e,f),oi.debug("Calling attemptFetch again in "+l+" millis"),[2,pi(t,f,n,r)];case 7:return[2]}}))}))}function vi(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(hi.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var gi=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();function mi(t,e,n,r,i,o){return Zr(this,void 0,void 0,(function(){var s,a,c,h,l,f,d;return ti(this,(function(p){switch(p.label){case 0:return s=function(t,e,n){return void 0===e&&(e=li),Zr(this,void 0,void 0,(function(){var r,i,o,s,a,u,c=this;return ti(this,(function(h){if(r=t.options,i=r.appId,o=r.apiKey,s=r.measurementId,!i)throw hi.create("no-app-id");if(!o){if(s)return[2,{measurementId:s,appId:i}];throw hi.create("no-api-key")}return a=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new gi,setTimeout((function(){return Zr(c,void 0,void 0,(function(){return ti(this,(function(t){return u.abort(),[2]}))}))}),void 0!==n?n:6e4),[2,pi({appId:i,apiKey:o,measurementId:s},a,u,e)]}))}))}(t),s.then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&oi.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return oi.error(t)})),e.push(s),a=function(){return Zr(this,void 0,void 0,(function(){var t;return ti(this,(function(e){switch(e.label){case 0:return Object(u.isIndexedDBAvailable)()?[3,1]:(oi.warn(hi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,Object(u.validateIndexedDBOpenable)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),oi.warn(hi.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?r.getId():void 0})),[4,Promise.all([s,a])];case 1:return c=p.sent(),h=c[0],l=c[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(ri))return r}return null}()||function(t,e){var n=document.createElement("script");n.src=ri+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(o,h.measurementId),i("js",new Date),(d={}).origin="firebase",d.update=!0,f=d,null!=l&&(f.firebase_id=l),i(ei.CONFIG,h.measurementId,f),[2,h.measurementId]}}))}))}var yi,bi,wi={},xi=[],_i={},Ti="dataLayer",Ei="gtag",Si=!1;function ki(t){if(Si)throw hi.create("already-initialized");t.dataLayerName&&(Ti=t.dataLayerName),t.gtagName&&(Ei=t.gtagName)}function Ai(t,e){!function(){var t=[];if(Object(u.isBrowserExtension)()&&t.push("This is a browser extension environment."),Object(u.areCookiesEnabled)()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=hi.create("invalid-analytics-context",{errorInfo:e});oi.warn(n.message)}}();var n=t.options.appId;if(!n)throw hi.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw hi.create("no-api-key");oi.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=wi[n])throw hi.create("already-exists",{id:n});if(!Si){!function(t){var e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(Ti);var r=ui(wi,xi,_i,Ti,Ei),i=r.wrappedGtag,o=r.gtagCore;bi=i,yi=o,Si=!0}wi[n]=mi(t,xi,_i,e,yi,Ti);var s={app:t,logEvent:function(t,e,r){(function(t,e,n,r,i){return Zr(this,void 0,void 0,(function(){var o,s;return ti(this,(function(a){switch(a.label){case 0:return i&&i.global?(t(ei.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),s=Qr(Qr({},r),{send_to:o}),t(ei.EVENT,n,s),a.label=3;case 3:return[2]}}))}))})(bi,wi[n],t,e,r).catch((function(t){return oi.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return Zr(this,void 0,void 0,(function(){var i;return ti(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(ei.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(ei.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(bi,wi[n],t,e).catch((function(t){return oi.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return Zr(this,void 0,void 0,(function(){var i;return ti(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(ei.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(ei.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(bi,wi[n],t,e).catch((function(t){return oi.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return Zr(this,void 0,void 0,(function(){var i,o,s,a,u;return ti(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,s=Object.keys(n);o<s.length;o++)a=s[o],i["user_properties."+a]=n[a];return t(ei.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(ei.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(bi,wi[n],t,e).catch((function(t){return oi.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return Zr(this,void 0,void 0,(function(){var n;return ti(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(wi[n],t).catch((function(t){return oi.error(t)}))},INTERNAL:{delete:function(){return delete wi[n],Promise.resolve()}}};return s}var Oi="analytics";function Ci(){return Zr(this,void 0,void 0,(function(){return ti(this,(function(t){switch(t.label){case 0:if(Object(u.isBrowserExtension)())return[2,!1];if(!Object(u.areCookiesEnabled)())return[2,!1];if(!Object(u.isIndexedDBAvailable)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Object(u.validateIndexedDBOpenable)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}!function(t){t.INTERNAL.registerComponent(new a.Component(Oi,(function(t){return Ai(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:ki,EventName:ni,isSupported:Ci})),t.INTERNAL.registerComponent(new a.Component("analytics-internal",(function(t){try{return{logEvent:t.getProvider(Oi).getImmediate().logEvent}}catch(r){throw hi.create("interop-component-reg-failed",{reason:r})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.15")}(o.default);var Pi=function(){return Pi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Pi.apply(this,arguments)};function Ii(t,e,n,i){return new(n||(n=Promise))((function(o,s){function a(t){try{c(i.next(t))}catch(r){s(r)}}function u(t){try{c(i.throw(t))}catch(r){s(r)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((i=i.apply(t,e||[])).next())}))}function Ri(t,e){var n,i,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function u(s){return function(u){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,i&&(o=2&s[0]?i.return:s[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,s[1])).done)return o;switch(i=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(r){s=[6,r],i=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,u])}}}Object.create;Object.create;var Mi,Ni=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return Ii(this,void 0,void 0,(function(){var e,n,r,i,o;return Ri(this,(function(s){switch(s.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=s.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=s.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return s.sent(),[2,i]}}))}))},t}(),Li=((Mi={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",Mi["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",Mi["registration-api-key"]="Undefined API key. Check Firebase app initialization.",Mi["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",Mi["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Mi["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Mi["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Mi["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",Mi["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Mi["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',Mi["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',Mi["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Mi["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Mi),Di=new u.ErrorFactory("remoteconfig","Remote Config",Li);var Fi=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return Ii(this,void 0,void 0,(function(){var e,n,r,i,o,s,a,u,c,h,l,f,d,p,v,g,m,y,b;return Ri(this,(function(w){switch(w.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=w.sent(),n=e[0],r=e[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},a={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===x&&(x=navigator),x.languages&&x.languages[0]||x.language)},u={method:"POST",headers:s,body:JSON.stringify(a)},c=fetch(o,u),h=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),w.label=2;case 2:return w.trys.push([2,5,,6]),[4,Promise.race([c,h])];case 3:return w.sent(),[4,c];case 4:return l=w.sent(),[3,6];case 5:throw f=w.sent(),d="fetch-client-network","AbortError"===f.name&&(d="fetch-timeout"),Di.create(d,{originalErrorMessage:f.message});case 6:if(p=l.status,v=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];y=void 0,w.label=7;case 7:return w.trys.push([7,9,,10]),[4,l.json()];case 8:return y=w.sent(),[3,10];case 9:throw b=w.sent(),Di.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:g=y.entries,m=y.state,w.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===m?p=500:"NO_CHANGE"===m?p=304:"NO_TEMPLATE"!==m&&"EMPTY_CONFIG"!==m||(g={}),304!==p&&200!==p)throw Di.create("fetch-status",{httpStatus:p});return[2,{status:p,eTag:v,config:g}]}var x}))}))},t}(),ji=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),Bi=["1","true","t","yes","y","on"],Ui=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&Bi.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),Vi=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=c.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=c.LogLevel.SILENT;break;default:this._logger.logLevel=c.LogLevel.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return Ii(this,void 0,void 0,(function(){var t,e,n;return Ri(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return Ii(this,void 0,void 0,(function(){var t,e,n,r=this;return Ri(this,(function(i){switch(i.label){case 0:t=new ji,setTimeout((function(){return Ii(r,void 0,void 0,(function(){return Ri(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=function(t,e){return t instanceof u.FirebaseError&&-1!==t.code.indexOf(e)}(e,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}}))}))},t.prototype.fetchAndActivate=function(){return Ii(this,void 0,void 0,(function(){return Ri(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(Pi(Pi({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new Ui("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new Ui("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new Ui("static"))},t}();function zi(t,e){var n=t.target.error||void 0;return Di.create(e,{originalErrorMessage:n&&n.message})}var Gi="app_namespace_store";var Yi=function(){function t(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(zi(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore(Gi,{keyPath:"compositeKey"})}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return Ii(this,void 0,void 0,(function(){var e,n=this;return Ri(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return e=i.sent(),[2,new Promise((function(i,o){var s=e.transaction([Gi],"readonly").objectStore(Gi),a=n.createCompositeKey(t);try{var u=s.get(a);u.onerror=function(t){o(zi(t,"storage-get"))},u.onsuccess=function(t){var e=t.target.result;i(e?e.value:void 0)}}catch(r){o(Di.create("storage-get",{originalErrorMessage:r&&r.message}))}}))]}}))}))},t.prototype.set=function(t,e){return Ii(this,void 0,void 0,(function(){var n,i=this;return Ri(this,(function(o){switch(o.label){case 0:return[4,this.openDbPromise];case 1:return n=o.sent(),[2,new Promise((function(o,s){var a=n.transaction([Gi],"readwrite").objectStore(Gi),u=i.createCompositeKey(t);try{var c=a.put({compositeKey:u,value:e});c.onerror=function(t){s(zi(t,"storage-set"))},c.onsuccess=function(){o()}}catch(r){s(Di.create("storage-set",{originalErrorMessage:r&&r.message}))}}))]}}))}))},t.prototype.delete=function(t){return Ii(this,void 0,void 0,(function(){var e,n=this;return Ri(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return e=i.sent(),[2,new Promise((function(i,o){var s=e.transaction([Gi],"readwrite").objectStore(Gi),a=n.createCompositeKey(t);try{var u=s.delete(a);u.onerror=function(t){o(zi(t,"storage-delete"))},u.onsuccess=function(){i()}}catch(r){o(Di.create("storage-delete",{originalErrorMessage:r&&r.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),Wi=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return Ii(this,void 0,void 0,(function(){var t,e,n,r,i,o;return Ri(this,(function(s){switch(s.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=s.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=s.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=s.sent())&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function Xi(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(Di.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var Hi,qi=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return Ii(this,void 0,void 0,(function(){var e;return Ri(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return Ii(this,void 0,void 0,(function(){var e,i,o;return Ri(this,(function(s){switch(s.label){case 0:return[4,Xi(t.signal,n)];case 1:s.sent(),s.label=2;case 2:return s.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=s.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return s.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof u.FirebaseError)||!t.customData)return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=s.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+Object(u.calculateBackoffMillis)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return s.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}}))}))},t}(),Ki="@firebase/remote-config";(Hi=o.default).INTERNAL.registerComponent(new a.Component("remoteConfig",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"===typeof window)throw Di.create("registration-window");var o=r.options,s=o.projectId,a=o.apiKey,u=o.appId;if(!s)throw Di.create("registration-project-id");if(!a)throw Di.create("registration-api-key");if(!u)throw Di.create("registration-app-id");n=n||"firebase";var h=new Yi(u,r.name,n),l=new Wi(h),f=new c.Logger(Ki);f.logLevel=c.LogLevel.ERROR;var d=new Fi(i,Hi.SDK_VERSION,n,s,a,u),p=new qi(d,h),v=new Ni(p,h,l,f),g=new Vi(r,v,l,h,f);return g.ensureInitialized(),g}),"PUBLIC").setMultipleInstances(!0)),Hi.registerVersion(Ki,"0.1.41");n(145);var $i="8.8.0";o.default.registerVersion("firebase",$i,"app"),o.default.SDK_VERSION=$i;console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),o.default.registerVersion("firebase","8.8.0")},function(t,e,n){"use strict";n.d(e,"a",(function(){return rt}));var r={};n.r(r),n.d(r,"protocol",(function(){return X})),n.d(r,"PacketType",(function(){return W})),n.d(r,"Encoder",(function(){return H})),n.d(r,"Decoder",(function(){return q}));var i=n(68),o=n.n(i);var s=n(7),a=n(8),u=n(11),c=n(9),h=n(10),l=n(111),f=n.n(l),d=n(39),p=function(t){var e=t.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!e||f.a))return new XMLHttpRequest}catch(n){}if(!e)try{return new(d.a[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(n){}},v=n(42),g=n(38),m=n(57),y=n(78),b=n.n(y),w=n(60),x=n.n(w),_=n(47),T=function(t){Object(c.a)(n,t);var e=Object(h.a)(n);function n(){var t;return Object(s.a)(this,n),(t=e.apply(this,arguments)).polling=!1,t}return Object(a.a)(n,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(t){var e=this;this.readyState="pausing";var n=function(){e.readyState="paused",t()};if(this.polling||!this.writable){var r=0;this.polling&&(r++,this.once("pollComplete",(function(){--r||n()}))),this.writable||(r++,this.once("drain",(function(){--r||n()})))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emit("poll")}},{key:"onData",value:function(t){var e=this;Object(_.b)(t,this.socket.binaryType).forEach((function(t){if("opening"===e.readyState&&"open"===t.type&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var t=this,e=function(){t.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}},{key:"write",value:function(t){var e=this;this.writable=!1,Object(_.d)(t,(function(t){e.doWrite(t,(function(){e.writable=!0,e.emit("drain")}))}))}},{key:"uri",value:function(){var t=this.query||{},e=this.opts.secure?"https":"http",n="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=b()()),this.supportsBinary||t.sid||(t.b64=1),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);var r=x.a.encode(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}}]),n}(m.a);function E(){}var S=null!=new p({xdomain:!1}).responseType,k=function(t){Object(c.a)(n,t);var e=Object(h.a)(n);function n(t){var r;if(Object(s.a)(this,n),r=e.call(this,t),"undefined"!==typeof location){var i="https:"===location.protocol,o=location.port;o||(o=i?"443":"80"),r.xd="undefined"!==typeof location&&t.hostname!==location.hostname||o!==t.port,r.xs=t.secure!==i}var a=t&&t.forceBase64;return r.supportsBinary=S&&!a,r}return Object(a.a)(n,[{key:"request",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new A(this.uri(),t)}},{key:"doWrite",value:function(t,e){var n=this,r=this.request({method:"POST",data:t});r.on("success",e),r.on("error",(function(t){n.onError("xhr post error",t)}))}},{key:"doPoll",value:function(){var t=this,e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e}}]),n}(T),A=function(t){Object(c.a)(n,t);var e=Object(h.a)(n);function n(t,r){var i;return Object(s.a)(this,n),i=e.call(this),Object(v.a)(Object(u.a)(i),r),i.opts=r,i.method=r.method||"GET",i.uri=t,i.async=!1!==r.async,i.data=void 0!==r.data?r.data:null,i.create(),i}return Object(a.a)(n,[{key:"create",value:function(){var t=this,e=Object(v.b)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");e.xdomain=!!this.opts.xd,e.xscheme=!!this.opts.xs;var r=this.xhr=new p(e);try{r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var i in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}catch(o){}if("POST"===this.method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(o){}try{r.setRequestHeader("Accept","*/*")}catch(o){}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=function(){4===r.readyState&&(200===r.status||1223===r.status?t.onLoad():t.setTimeoutFn((function(){t.onError("number"===typeof r.status?r.status:0)}),0))},r.send(this.data)}catch(o){return void this.setTimeoutFn((function(){t.onError(o)}),0)}"undefined"!==typeof document&&(this.index=n.requestsCount++,n.requests[this.index]=this)}},{key:"onSuccess",value:function(){this.emit("success"),this.cleanup()}},{key:"onData",value:function(t){this.emit("data",t),this.onSuccess()}},{key:"onError",value:function(t){this.emit("error",t),this.cleanup(!0)}},{key:"cleanup",value:function(t){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=E,t)try{this.xhr.abort()}catch(e){}"undefined"!==typeof document&&delete n.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var t=this.xhr.responseText;null!==t&&this.onData(t)}},{key:"abort",value:function(){this.cleanup()}}]),n}(g.Emitter);if(A.requestsCount=0,A.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",C);else if("function"===typeof addEventListener){var O="onpagehide"in d.a?"pagehide":"unload";addEventListener(O,C,!1)}function C(){for(var t in A.requests)A.requests.hasOwnProperty(t)&&A.requests[t].abort()}var P={websocket:n(112).a,polling:k},I=function(t){Object(c.a)(n,t);var e=Object(h.a)(n);function n(t){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(s.a)(this,n),r=e.call(this),t&&"object"===typeof t&&(i=t,t=null),t?(t=o()(t),i.hostname=t.host,i.secure="https"===t.protocol||"wss"===t.protocol,i.port=t.port,t.query&&(i.query=t.query)):i.host&&(i.hostname=o()(i.host).host),Object(v.a)(Object(u.a)(r),i),r.secure=null!=i.secure?i.secure:"undefined"!==typeof location&&"https:"===location.protocol,i.hostname&&!i.port&&(i.port=r.secure?"443":"80"),r.hostname=i.hostname||("undefined"!==typeof location?location.hostname:"localhost"),r.port=i.port||("undefined"!==typeof location&&location.port?location.port:r.secure?"443":"80"),r.transports=i.transports||["polling","websocket"],r.readyState="",r.writeBuffer=[],r.prevBufferLen=0,r.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},i),r.opts.path=r.opts.path.replace(/\/$/,"")+"/","string"===typeof r.opts.query&&(r.opts.query=x.a.decode(r.opts.query)),r.id=null,r.upgrades=null,r.pingInterval=null,r.pingTimeout=null,r.pingTimeoutTimer=null,"function"===typeof addEventListener&&(r.opts.closeOnBeforeunload&&addEventListener("beforeunload",(function(){r.transport&&(r.transport.removeAllListeners(),r.transport.close())}),!1),"localhost"!==r.hostname&&(r.offlineEventListener=function(){r.onClose("transport close")},addEventListener("offline",r.offlineEventListener,!1))),r.open(),r}return Object(a.a)(n,[{key:"createTransport",value:function(t){var e=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}(this.opts.query);e.EIO=_.e,e.transport=t,this.id&&(e.sid=this.id);var n=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new P[t](n)}},{key:"open",value:function(){var t,e=this;if(this.opts.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((function(){e.emitReserved("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(r){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}},{key:"setTransport",value:function(t){var e=this;this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(){e.onClose("transport close")}))}},{key:"probe",value:function(t){var e=this,r=this.createTransport(t),i=!1;n.priorWebsocketSuccess=!1;var o=function(){i||(r.send([{type:"ping",data:"probe"}]),r.once("packet",(function(t){if(!i)if("pong"===t.type&&"probe"===t.data){if(e.upgrading=!0,e.emitReserved("upgrading",r),!r)return;n.priorWebsocketSuccess="websocket"===r.name,e.transport.pause((function(){i||"closed"!==e.readyState&&(l(),e.setTransport(r),r.send([{type:"upgrade"}]),e.emitReserved("upgrade",r),r=null,e.upgrading=!1,e.flush())}))}else{var o=new Error("probe error");o.transport=r.name,e.emitReserved("upgradeError",o)}})))};function s(){i||(i=!0,l(),r.close(),r=null)}var a=function(t){var n=new Error("probe error: "+t);n.transport=r.name,s(),e.emitReserved("upgradeError",n)};function u(){a("transport closed")}function c(){a("socket closed")}function h(t){r&&t.name!==r.name&&s()}var l=function(){r.removeListener("open",o),r.removeListener("error",a),r.removeListener("close",u),e.off("close",c),e.off("upgrading",h)};r.once("open",o),r.once("error",a),r.once("close",u),this.once("close",c),this.once("upgrading",h),r.open()}},{key:"onOpen",value:function(){if(this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause)for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},{key:"onPacket",value:function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}},{key:"onHandshake",value:function(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var t=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((function(){t.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}},{key:"write",value:function(t,e,n){return this.sendPacket("message",t,e,n),this}},{key:"send",value:function(t,e,n){return this.sendPacket("message",t,e,n),this}},{key:"sendPacket",value:function(t,e,n,r){if("function"===typeof e&&(r=e,e=void 0),"function"===typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:t,data:e,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}}},{key:"close",value:function(){var t=this,e=function(){t.onClose("forced close"),t.transport.close()},n=function n(){t.off("upgrade",n),t.off("upgradeError",n),e()},r=function(){t.once("upgrade",n),t.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){t.upgrading?r():e()})):this.upgrading?r():e()),this}},{key:"onError",value:function(t){n.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}},{key:"onClose",value:function(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++)~this.transports.indexOf(t[n])&&e.push(t[n]);return e}}]),n}(g.Emitter);I.protocol=_.e;I.protocol;var R=n(50);var M=n(18),N=n(16),L="function"===typeof ArrayBuffer,D=Object.prototype.toString,F="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===D.call(Blob),j="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===D.call(File);function B(t){return L&&(t instanceof ArrayBuffer||function(t){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}(t))||F&&t instanceof Blob||j&&t instanceof File}function U(t,e){if(!t||"object"!==typeof t)return!1;if(Array.isArray(t)){for(var n=0,r=t.length;n<r;n++)if(U(t[n]))return!0;return!1}if(B(t))return!0;if(t.toJSON&&"function"===typeof t.toJSON&&1===arguments.length)return U(t.toJSON(),!0);for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&U(t[i]))return!0;return!1}function V(t){var e=[],n=t.data,r=t;return r.data=z(n,e),r.attachments=e.length,{packet:r,buffers:e}}function z(t,e){if(!t)return t;if(B(t)){var n={_placeholder:!0,num:e.length};return e.push(t),n}if(Array.isArray(t)){for(var r=new Array(t.length),i=0;i<t.length;i++)r[i]=z(t[i],e);return r}if("object"===typeof t&&!(t instanceof Date)){var o={};for(var s in t)t.hasOwnProperty(s)&&(o[s]=z(t[s],e));return o}return t}function G(t,e){return t.data=Y(t.data,e),t.attachments=void 0,t}function Y(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]=Y(t[n],e);else if("object"===typeof t)for(var r in t)t.hasOwnProperty(r)&&(t[r]=Y(t[r],e));return t}var W,X=5;!function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(W||(W={}));var H=function(){function t(){Object(s.a)(this,t)}return Object(a.a)(t,[{key:"encode",value:function(t){return t.type!==W.EVENT&&t.type!==W.ACK||!U(t)?[this.encodeAsString(t)]:(t.type=t.type===W.EVENT?W.BINARY_EVENT:W.BINARY_ACK,this.encodeAsBinary(t))}},{key:"encodeAsString",value:function(t){var e=""+t.type;return t.type!==W.BINARY_EVENT&&t.type!==W.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data)),e}},{key:"encodeAsBinary",value:function(t){var e=V(t),n=this.encodeAsString(e.packet),r=e.buffers;return r.unshift(n),r}}]),t}(),q=function(t){Object(c.a)(n,t);var e=Object(h.a)(n);function n(){return Object(s.a)(this,n),e.call(this)}return Object(a.a)(n,[{key:"add",value:function(t){var e;if("string"===typeof t)(e=this.decodeString(t)).type===W.BINARY_EVENT||e.type===W.BINARY_ACK?(this.reconstructor=new K(e),0===e.attachments&&Object(M.a)(Object(N.a)(n.prototype),"emitReserved",this).call(this,"decoded",e)):Object(M.a)(Object(N.a)(n.prototype),"emitReserved",this).call(this,"decoded",e);else{if(!B(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(e=this.reconstructor.takeBinaryData(t))&&(this.reconstructor=null,Object(M.a)(Object(N.a)(n.prototype),"emitReserved",this).call(this,"decoded",e))}}},{key:"decodeString",value:function(t){var e=0,r={type:Number(t.charAt(0))};if(void 0===W[r.type])throw new Error("unknown packet type "+r.type);if(r.type===W.BINARY_EVENT||r.type===W.BINARY_ACK){for(var i=e+1;"-"!==t.charAt(++e)&&e!=t.length;);var o=t.substring(i,e);if(o!=Number(o)||"-"!==t.charAt(e))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"===t.charAt(e+1)){for(var s=e+1;++e;){if(","===t.charAt(e))break;if(e===t.length)break}r.nsp=t.substring(s,e)}else r.nsp="/";var a=t.charAt(e+1);if(""!==a&&Number(a)==a){for(var u=e+1;++e;){var c=t.charAt(e);if(null==c||Number(c)!=c){--e;break}if(e===t.length)break}r.id=Number(t.substring(u,e+1))}if(t.charAt(++e)){var h=function(t){try{return JSON.parse(t)}catch(e){return!1}}(t.substr(e));if(!n.isPayloadValid(r.type,h))throw new Error("invalid payload");r.data=h}return r}},{key:"destroy",value:function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}],[{key:"isPayloadValid",value:function(t,e){switch(t){case W.CONNECT:return"object"===typeof e;case W.DISCONNECT:return void 0===e;case W.CONNECT_ERROR:return"string"===typeof e||"object"===typeof e;case W.EVENT:case W.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case W.ACK:case W.BINARY_ACK:return Array.isArray(e)}}}]),n}(g.Emitter);var K=function(){function t(e){Object(s.a)(this,t),this.packet=e,this.buffers=[],this.reconPack=e}return Object(a.a)(t,[{key:"takeBinaryData",value:function(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){var e=G(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),t}();function $(t,e,n){return t.on(e,n),function(){t.off(e,n)}}var J=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),Q=function(t){Object(c.a)(n,t);var e=Object(h.a)(n);function n(t,r,i){var o;return Object(s.a)(this,n),(o=e.call(this)).connected=!1,o.disconnected=!0,o.receiveBuffer=[],o.sendBuffer=[],o.ids=0,o.acks={},o.flags={},o.io=t,o.nsp=r,i&&i.auth&&(o.auth=i.auth),o.io._autoConnect&&o.open(),o}return Object(a.a)(n,[{key:"subEvents",value:function(){if(!this.subs){var t=this.io;this.subs=[$(t,"open",this.onopen.bind(this)),$(t,"packet",this.onpacket.bind(this)),$(t,"error",this.onerror.bind(this)),$(t,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.unshift("message"),this.emit.apply(this,e),this}},{key:"emit",value:function(t){if(J.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.unshift(t);var i={type:W.EVENT,data:n,options:{}};i.options.compress=!1!==this.flags.compress,"function"===typeof n[n.length-1]&&(this.acks[this.ids]=n.pop(),i.id=this.ids++);var o=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,s=this.flags.volatile&&(!o||!this.connected);return s||(this.connected?this.packet(i):this.sendBuffer.push(i)),this.flags={},this}},{key:"packet",value:function(t){t.nsp=this.nsp,this.io._packet(t)}},{key:"onopen",value:function(){var t=this;"function"==typeof this.auth?this.auth((function(e){t.packet({type:W.CONNECT,data:e})})):this.packet({type:W.CONNECT,data:this.auth})}},{key:"onerror",value:function(t){this.connected||this.emitReserved("connect_error",t)}},{key:"onclose",value:function(t){this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",t)}},{key:"onpacket",value:function(t){if(t.nsp===this.nsp)switch(t.type){case W.CONNECT:if(t.data&&t.data.sid){var e=t.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case W.EVENT:case W.BINARY_EVENT:this.onevent(t);break;case W.ACK:case W.BINARY_ACK:this.onack(t);break;case W.DISCONNECT:this.ondisconnect();break;case W.CONNECT_ERROR:var n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n)}}},{key:"onevent",value:function(t){var e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}},{key:"emitEvent",value:function(t){if(this._anyListeners&&this._anyListeners.length){var e,r=function(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=Object(R.a)(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}(this._anyListeners.slice());try{for(r.s();!(e=r.n()).done;){e.value.apply(this,t)}}catch(i){r.e(i)}finally{r.f()}}Object(M.a)(Object(N.a)(n.prototype),"emit",this).apply(this,t)}},{key:"ack",value:function(t){var e=this,n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];e.packet({type:W.ACK,id:t,data:i})}}}},{key:"onack",value:function(t){var e=this.acks[t.id];"function"===typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}},{key:"onconnect",value:function(t){this.id=t,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}},{key:"emitBuffered",value:function(){var t=this;this.receiveBuffer.forEach((function(e){return t.emitEvent(e)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(e){return t.packet(e)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(t){return t()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:W.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(t){return this.flags.compress=t,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"onAny",value:function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}},{key:"prependAny",value:function(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}},{key:"offAny",value:function(t){if(!this._anyListeners)return this;if(t){for(var e=this._anyListeners,n=0;n<e.length;n++)if(t===e[n])return e.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}}]),n}(g.Emitter),Z=n(113),tt=n.n(Z),et=function(t){Object(c.a)(n,t);var e=Object(h.a)(n);function n(t,i){var o,a;Object(s.a)(this,n),(o=e.call(this)).nsps={},o.subs=[],t&&"object"===typeof t&&(i=t,t=void 0),(i=i||{}).path=i.path||"/socket.io",o.opts=i,Object(v.a)(Object(u.a)(o),i),o.reconnection(!1!==i.reconnection),o.reconnectionAttempts(i.reconnectionAttempts||1/0),o.reconnectionDelay(i.reconnectionDelay||1e3),o.reconnectionDelayMax(i.reconnectionDelayMax||5e3),o.randomizationFactor(null!==(a=i.randomizationFactor)&&void 0!==a?a:.5),o.backoff=new tt.a({min:o.reconnectionDelay(),max:o.reconnectionDelayMax(),jitter:o.randomizationFactor()}),o.timeout(null==i.timeout?2e4:i.timeout),o._readyState="closed",o.uri=t;var c=i.parser||r;return o.encoder=new c.Encoder,o.decoder=new c.Decoder,o._autoConnect=!1!==i.autoConnect,o._autoConnect&&o.open(),o}return Object(a.a)(n,[{key:"reconnection",value:function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}},{key:"reconnectionAttempts",value:function(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}},{key:"reconnectionDelay",value:function(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}},{key:"randomizationFactor",value:function(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}},{key:"reconnectionDelayMax",value:function(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}},{key:"timeout",value:function(t){return arguments.length?(this._timeout=t,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(t){var e=this;if(~this._readyState.indexOf("open"))return this;this.engine=new I(this.uri,this.opts);var n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;var i=$(n,"open",(function(){r.onopen(),t&&t()})),o=$(n,"error",(function(n){r.cleanup(),r._readyState="closed",e.emitReserved("error",n),t?t(n):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){var s=this._timeout;0===s&&i();var a=this.setTimeoutFn((function(){i(),n.close(),n.emit("error",new Error("timeout"))}),s);this.opts.autoUnref&&a.unref(),this.subs.push((function(){clearTimeout(a)}))}return this.subs.push(i),this.subs.push(o),this}},{key:"connect",value:function(t){return this.open(t)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var t=this.engine;this.subs.push($(t,"ping",this.onping.bind(this)),$(t,"data",this.ondata.bind(this)),$(t,"error",this.onerror.bind(this)),$(t,"close",this.onclose.bind(this)),$(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(t){this.decoder.add(t)}},{key:"ondecoded",value:function(t){this.emitReserved("packet",t)}},{key:"onerror",value:function(t){this.emitReserved("error",t)}},{key:"socket",value:function(t,e){var n=this.nsps[t];return n||(n=new Q(this,t,e),this.nsps[t]=n),n}},{key:"_destroy",value:function(t){for(var e=0,n=Object.keys(this.nsps);e<n.length;e++){var r=n[e];if(this.nsps[r].active)return}this._close()}},{key:"_packet",value:function(t){for(var e=this.encoder.encode(t),n=0;n<e.length;n++)this.engine.write(e[n],t.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(t){return t()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,"opening"===this._readyState&&this.cleanup(),this.backoff.reset(),this._readyState="closed",this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var t=this;if(this._reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var r=this.setTimeoutFn((function(){e.skipReconnect||(t.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((function(n){n?(e._reconnecting=!1,e.reconnect(),t.emitReserved("reconnect_error",n)):e.onreconnect()})))}),n);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}},{key:"onreconnect",value:function(){var t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}]),n}(g.Emitter),nt={};function rt(t,e){"object"===typeof t&&(e=t,t=void 0);var n,r=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=t;n=n||"undefined"!==typeof location&&location,null==t&&(t=n.protocol+"//"+n.host),"string"===typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?n.protocol+t:n.host+t),/^(https?|wss?):\/\//.test(t)||(t="undefined"!==typeof n?n.protocol+"//"+t:"https://"+t),r=o()(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+e,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(t,(e=e||{}).path||"/socket.io"),i=r.source,s=r.id,a=r.path,u=nt[s]&&a in nt[s].nsps;return e.forceNew||e["force new connection"]||!1===e.multiplex||u?n=new et(i,e):(nt[s]||(nt[s]=new et(i,e)),n=nt[s]),r.query&&!e.query&&(e.query=r.queryKey),n.socket(r.path,e)}Object.assign(rt,{Manager:et,Socket:Q,io:rt,connect:rt})},function(t,e,n){"use strict";n.d(e,"a",(function(){return w}));var r=n(7),i=n(8),o=n(9),s=n(10),a=n(6),u=n.n(a),c=function(t){return t.replace(/([A-Z])/g,(function(t){return"-".concat(t[0].toLowerCase())}))},h=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t instanceof Element){var r=l(t.classList,e,n);""!==r&&(t.className=r),Object.keys(e).forEach((function(n){if("children"!==n&&"style"!==n&&"ref"!==n&&"class"!==n&&"className"!==n&&"forwardedRef"!==n)if(0===n.indexOf("on")&&n[2]===n[2].toUpperCase()){var r=n.substring(2),i=r[0].toLowerCase()+r.substring(1);"undefined"===typeof document||f(i,document)||d(t,i,e[n])}else{t[n]=e[n],"string"===typeof e[n]?t.setAttribute(c(n),e[n]):t[n]=e[n]}}))}},l=function(t,e,n){var r=e.className||e.class,i=n.className||n.class,o=p(t),s=p(r?r.split(" "):[]),a=p(i?i.split(" "):[]),u=[];return o.forEach((function(t){s.has(t)?(u.push(t),s.delete(t)):a.has(t)||u.push(t)})),s.forEach((function(t){return u.push(t)})),u.join(" ")},f=function(t,e){var n="on"+t,r=n in e;if(!r){var i=e.createElement("div");i.setAttribute(n,"return;"),r="function"===typeof i[n]}return r},d=function(t,e,n){var r=t.__events||(t.__events={}),i=r[e];i&&t.removeEventListener(e,i),t.addEventListener(e,r[e]=function(t){n&&n.call(this,t)})},p=function(t){var e=new Map;return t.forEach((function(t){return e.set(t,t)})),e},v=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.forEach((function(e){"function"===typeof e?e(t):null!=e&&(e.current=t)}))}},g=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n},m=function(t,e,n){var a=t.toLowerCase().split("-").map((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})).join(""),c=function(e){Object(o.a)(l,e);var c=Object(s.a)(l);function l(t){var e;return Object(r.a)(this,l),(e=c.call(this,t)).setComponentElRef=function(t){e.componentEl=t},e}return Object(i.a)(l,[{key:"componentDidMount",value:function(){this.componentDidUpdate(this.props)}},{key:"componentDidUpdate",value:function(t){h(this.componentEl,this.props,t)}},{key:"render",value:function(){var e=this.props,r=e.children,i=e.forwardedRef,o=e.style,s=(e.className,e.ref,g(e,["children","forwardedRef","style","className","ref"])),a=Object.keys(s).reduce((function(t,e){if(0===e.indexOf("on")&&e[2]===e[2].toUpperCase()){var n=e.substring(2).toLowerCase();"undefined"!==typeof document&&f(n,document)&&(t[e]=s[e])}else t[e]=s[e];return t}),{});n&&(a=n(this.props,a));var c=Object.assign(Object.assign({},a),{ref:v(i,this.setComponentElRef),style:o});return u.a.createElement(t,c,r)}}],[{key:"displayName",get:function(){return a}}]),l}(u.a.Component);return e&&(c.contextType=e),function(t,e){var n=function(e,n){return u.a.createElement(t,Object.assign({},e,{forwardedRef:n}))};return n.displayName=e,u.a.forwardRef(n)}(c,a)};n(54),n(3),n(11),n(58);var y=n(87),b=function(t,e){return"undefined"===typeof window?Promise.resolve():Object(y.c)().then((function(){return Object(y.a)([["ion-phaser",[[0,"ion-phaser",{game:[1040],initialize:[4],getInstance:[64],destroy:[64]}]]]],e)}))};!function(){if("undefined"!==typeof window&&void 0!==window.Reflect&&void 0!==window.customElements){var t=HTMLElement;window.HTMLElement=function(){return Reflect.construct(t,[],this.constructor)},HTMLElement.prototype=t.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,t)}}(),function(){var t=[];if("undefined"!==typeof window){var e=window;e.customElements&&(!e.Element||e.Element.prototype.closest&&e.Element.prototype.matches&&e.Element.prototype.remove&&e.Element.prototype.getRootNode)||t.push(n.e(1).then(n.t.bind(null,176,7)));"function"===typeof Object.assign&&Object.entries&&Array.prototype.find&&Array.prototype.includes&&String.prototype.startsWith&&String.prototype.endsWith&&(!e.NodeList||e.NodeList.prototype.forEach)&&e.fetch&&function(){try{var t=new URL("b","http://a");return t.pathname="c%20d","http://a/c%20d"===t.href&&t.searchParams}catch(e){return!1}}()&&"undefined"!=typeof WeakMap||t.push(n.e(5).then(n.t.bind(null,177,7)))}return Promise.all(t)}().then((function(){return b()}));var w=m("ion-phaser")},,,function(t,e,n){"use strict";var r=n(84),i=60103,o=60106;e.Fragment=60107,e.StrictMode=60108,e.Profiler=60114;var s=60109,a=60110,u=60112;e.Suspense=60113;var c=60115,h=60116;if("function"===typeof Symbol&&Symbol.for){var l=Symbol.for;i=l("react.element"),o=l("react.portal"),e.Fragment=l("react.fragment"),e.StrictMode=l("react.strict_mode"),e.Profiler=l("react.profiler"),s=l("react.provider"),a=l("react.context"),u=l("react.forward_ref"),e.Suspense=l("react.suspense"),c=l("react.memo"),h=l("react.lazy")}var f="function"===typeof Symbol&&Symbol.iterator;function d(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function g(t,e,n){this.props=t,this.context=e,this.refs=v,this.updater=n||p}function m(){}function y(t,e,n){this.props=t,this.context=e,this.refs=v,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(d(85));this.updater.enqueueSetState(this,t,e,"setState")},g.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},m.prototype=g.prototype;var b=y.prototype=new m;b.constructor=y,r(b,g.prototype),b.isPureReactComponent=!0;var w={current:null},x=Object.prototype.hasOwnProperty,_={key:!0,ref:!0,__self:!0,__source:!0};function T(t,e,n){var r,o={},s=null,a=null;if(null!=e)for(r in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)x.call(e,r)&&!_.hasOwnProperty(r)&&(o[r]=e[r]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var c=Array(u),h=0;h<u;h++)c[h]=arguments[h+2];o.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===o[r]&&(o[r]=u[r]);return{$$typeof:i,type:t,key:s,ref:a,props:o,_owner:w.current}}function E(t){return"object"===typeof t&&null!==t&&t.$$typeof===i}var S=/\/+/g;function k(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function A(t,e,n,r,s){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var u=!1;if(null===t)u=!0;else switch(a){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case i:case o:u=!0}}if(u)return s=s(u=t),t=""===r?"."+k(u,0):r,Array.isArray(s)?(n="",null!=t&&(n=t.replace(S,"$&/")+"/"),A(s,e,n,"",(function(t){return t}))):null!=s&&(E(s)&&(s=function(t,e){return{$$typeof:i,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(s,n+(!s.key||u&&u.key===s.key?"":(""+s.key).replace(S,"$&/")+"/")+t)),e.push(s)),1;if(u=0,r=""===r?".":r+":",Array.isArray(t))for(var c=0;c<t.length;c++){var h=r+k(a=t[c],c);u+=A(a,e,n,h,s)}else if(h=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"===typeof h)for(t=h.call(t),c=0;!(a=t.next()).done;)u+=A(a=a.value,e,n,h=r+k(a,c++),s);else if("object"===a)throw e=""+t,Error(d(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e));return u}function O(t,e,n){if(null==t)return t;var r=[],i=0;return A(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function C(t){if(-1===t._status){var e=t._result;e=e(),t._status=0,t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}if(1===t._status)return t._result;throw t._result}var P={current:null};function I(){var t=P.current;if(null===t)throw Error(d(321));return t}var R={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:w,IsSomeRendererActing:{current:!1},assign:r};e.Children={map:O,forEach:function(t,e,n){O(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return O(t,(function(){e++})),e},toArray:function(t){return O(t,(function(t){return t}))||[]},only:function(t){if(!E(t))throw Error(d(143));return t}},e.Component=g,e.PureComponent=y,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error(d(267,t));var o=r({},t.props),s=t.key,a=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(a=e.ref,u=w.current),void 0!==e.key&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(h in e)x.call(e,h)&&!_.hasOwnProperty(h)&&(o[h]=void 0===e[h]&&void 0!==c?c[h]:e[h])}var h=arguments.length-2;if(1===h)o.children=n;else if(1<h){c=Array(h);for(var l=0;l<h;l++)c[l]=arguments[l+2];o.children=c}return{$$typeof:i,type:t.type,key:s,ref:a,props:o,_owner:u}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:a,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:t},t.Consumer=t},e.createElement=T,e.createFactory=function(t){var e=T.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=E,e.lazy=function(t){return{$$typeof:h,_payload:{_status:-1,_result:t},_init:C}},e.memo=function(t,e){return{$$typeof:c,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return I().useCallback(t,e)},e.useContext=function(t,e){return I().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return I().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return I().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return I().useLayoutEffect(t,e)},e.useMemo=function(t,e){return I().useMemo(t,e)},e.useReducer=function(t,e,n){return I().useReducer(t,e,n)},e.useRef=function(t){return I().useRef(t)},e.useState=function(t){return I().useState(t)},e.version="17.0.2"},function(t,e,n){"use strict";var r=n(6),i=n(84),o=n(121);function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(s(227));var a=new Set,u={};function c(t,e){h(t,e),h(t+"Capture",e)}function h(t,e){for(u[t]=e,t=0;t<e.length;t++)a.add(e[t])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,p={},v={};function g(t,e,n,r,i,o,s){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){m[t]=new g(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];m[e]=new g(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){m[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){m[t]=new g(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){m[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){m[t]=new g(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){m[t]=new g(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){m[t]=new g(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){m[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(t){return t[1].toUpperCase()}function w(t,e,n,r){var i=m.hasOwnProperty(e)?m[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!d.call(v,t)||!d.call(p,t)&&(f.test(t)?v[t]=!0:(p[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(y,b);m[e]=new g(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(y,b);m[e]=new g(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(y,b);m[e]=new g(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){m[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=60103,T=60106,E=60107,S=60108,k=60114,A=60109,O=60110,C=60112,P=60113,I=60120,R=60115,M=60116,N=60121,L=60128,D=60129,F=60130,j=60131;if("function"===typeof Symbol&&Symbol.for){var B=Symbol.for;_=B("react.element"),T=B("react.portal"),E=B("react.fragment"),S=B("react.strict_mode"),k=B("react.profiler"),A=B("react.provider"),O=B("react.context"),C=B("react.forward_ref"),P=B("react.suspense"),I=B("react.suspense_list"),R=B("react.memo"),M=B("react.lazy"),N=B("react.block"),B("react.scope"),L=B("react.opaque.id"),D=B("react.debug_trace_mode"),F=B("react.offscreen"),j=B("react.legacy_hidden")}var U,V="function"===typeof Symbol&&Symbol.iterator;function z(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=V&&t[V]||t["@@iterator"])?t:null}function G(t){if(void 0===U)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);U=e&&e[1]||""}return"\n"+U+t}var Y=!1;function W(t,e){if(!t||Y)return"";Y=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a])return"\n"+i[s].replace(" at new "," at ")}while(1<=s&&0<=a);break}}}finally{Y=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?G(t):""}function X(t){switch(t.tag){case 5:return G(t.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return t=W(t.type,!1);case 11:return t=W(t.type.render,!1);case 22:return t=W(t.type._render,!1);case 1:return t=W(t.type,!0);default:return""}}function H(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case E:return"Fragment";case T:return"Portal";case k:return"Profiler";case S:return"StrictMode";case P:return"Suspense";case I:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case O:return(t.displayName||"Context")+".Consumer";case A:return(t._context.displayName||"Context")+".Provider";case C:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case R:return H(t.type);case N:return H(t._render);case M:e=t._payload,t=t._init;try{return H(t(e))}catch(n){}}return null}function q(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function K(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function $(t){t._valueTracker||(t._valueTracker=function(t){var e=K(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function J(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=K(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function Q(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Z(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function tt(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=q(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function et(t,e){null!=(e=e.checked)&&w(t,"checked",e,!1)}function nt(t,e){et(t,e);var n=q(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?it(t,e.type,n):e.hasOwnProperty("defaultValue")&&it(t,e.type,q(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function rt(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function it(t,e,n){"number"===e&&Q(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function ot(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function st(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+q(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function at(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(s(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ut(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(s(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(s(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:q(n)}}function ct(t,e){var n=q(e.value),r=q(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function ht(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var lt="http://www.w3.org/1999/xhtml",ft="http://www.w3.org/2000/svg";function dt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?dt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var vt,gt,mt=(gt=function(t,e){if(t.namespaceURI!==ft||"innerHTML"in t)t.innerHTML=e;else{for((vt=vt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=vt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return gt(t,e)}))}:gt);function yt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var bt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wt=["Webkit","ms","Moz","O"];function xt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||bt.hasOwnProperty(t)&&bt[t]?(""+e).trim():e+"px"}function _t(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=xt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(bt).forEach((function(t){wt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),bt[e]=bt[t]}))}));var Tt=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Et(t,e){if(e){if(Tt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(s(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(s(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(s(62))}}function St(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function kt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var At=null,Ot=null,Ct=null;function Pt(t){if(t=ri(t)){if("function"!==typeof At)throw Error(s(280));var e=t.stateNode;e&&(e=oi(e),At(t.stateNode,t.type,e))}}function It(t){Ot?Ct?Ct.push(t):Ct=[t]:Ot=t}function Rt(){if(Ot){var t=Ot,e=Ct;if(Ct=Ot=null,Pt(t),e)for(t=0;t<e.length;t++)Pt(e[t])}}function Mt(t,e){return t(e)}function Nt(t,e,n,r,i){return t(e,n,r,i)}function Lt(){}var Dt=Mt,Ft=!1,jt=!1;function Bt(){null===Ot&&null===Ct||(Lt(),Rt())}function Ut(t,e){var n=t.stateNode;if(null===n)return null;var r=oi(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(s(231,e,typeof n));return n}var Vt=!1;if(l)try{var zt={};Object.defineProperty(zt,"passive",{get:function(){Vt=!0}}),window.addEventListener("test",zt,zt),window.removeEventListener("test",zt,zt)}catch(gt){Vt=!1}function Gt(t,e,n,r,i,o,s,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Yt=!1,Wt=null,Xt=!1,Ht=null,qt={onError:function(t){Yt=!0,Wt=t}};function Kt(t,e,n,r,i,o,s,a,u){Yt=!1,Wt=null,Gt.apply(qt,arguments)}function $t(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(1026&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Jt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Qt(t){if($t(t)!==t)throw Error(s(188))}function Zt(t){if(t=function(t){var e=t.alternate;if(!e){if(null===(e=$t(t)))throw Error(s(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Qt(i),t;if(o===r)return Qt(i),e;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,r=o;break}if(u===r){a=!0,r=i,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,r=i;break}if(u===r){a=!0,r=o,n=i;break}u=u.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?t:e}(t),!t)return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function te(t,e){for(var n=t.alternate;null!==e;){if(e===t||e===n)return!0;e=e.return}return!1}var ee,ne,re,ie,oe=!1,se=[],ae=null,ue=null,ce=null,he=new Map,le=new Map,fe=[],de="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pe(t,e,n,r,i){return{blockedOn:t,domEventName:e,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function ve(t,e){switch(t){case"focusin":case"focusout":ae=null;break;case"dragenter":case"dragleave":ue=null;break;case"mouseover":case"mouseout":ce=null;break;case"pointerover":case"pointerout":he.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":le.delete(e.pointerId)}}function ge(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t=pe(e,n,r,i,o),null!==e&&(null!==(e=ri(e))&&ne(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function me(t){var e=ni(t.target);if(null!==e){var n=$t(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Jt(n)))return t.blockedOn=e,void ie(t.lanePriority,(function(){o.unstable_runWithPriority(t.priority,(function(){re(n)}))}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function ye(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ze(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=ri(n))&&ne(e),t.blockedOn=n,!1;e.shift()}return!0}function be(t,e,n){ye(t)&&n.delete(e)}function we(){for(oe=!1;0<se.length;){var t=se[0];if(null!==t.blockedOn){null!==(t=ri(t.blockedOn))&&ee(t);break}for(var e=t.targetContainers;0<e.length;){var n=Ze(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n){t.blockedOn=n;break}e.shift()}null===t.blockedOn&&se.shift()}null!==ae&&ye(ae)&&(ae=null),null!==ue&&ye(ue)&&(ue=null),null!==ce&&ye(ce)&&(ce=null),he.forEach(be),le.forEach(be)}function xe(t,e){t.blockedOn===e&&(t.blockedOn=null,oe||(oe=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,we)))}function _e(t){function e(e){return xe(e,t)}if(0<se.length){xe(se[0],t);for(var n=1;n<se.length;n++){var r=se[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==ae&&xe(ae,t),null!==ue&&xe(ue,t),null!==ce&&xe(ce,t),he.forEach(e),le.forEach(e),n=0;n<fe.length;n++)(r=fe[n]).blockedOn===t&&(r.blockedOn=null);for(;0<fe.length&&null===(n=fe[0]).blockedOn;)me(n),null===n.blockedOn&&fe.shift()}function Te(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ee={animationend:Te("Animation","AnimationEnd"),animationiteration:Te("Animation","AnimationIteration"),animationstart:Te("Animation","AnimationStart"),transitionend:Te("Transition","TransitionEnd")},Se={},ke={};function Ae(t){if(Se[t])return Se[t];if(!Ee[t])return t;var e,n=Ee[t];for(e in n)if(n.hasOwnProperty(e)&&e in ke)return Se[t]=n[e];return t}l&&(ke=document.createElement("div").style,"AnimationEvent"in window||(delete Ee.animationend.animation,delete Ee.animationiteration.animation,delete Ee.animationstart.animation),"TransitionEvent"in window||delete Ee.transitionend.transition);var Oe=Ae("animationend"),Ce=Ae("animationiteration"),Pe=Ae("animationstart"),Ie=Ae("transitionend"),Re=new Map,Me=new Map,Ne=["abort","abort",Oe,"animationEnd",Ce,"animationIteration",Pe,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ie,"transitionEnd","waiting","waiting"];function Le(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Me.set(r,e),Re.set(r,i),c(i,[r])}}(0,o.unstable_now)();var De=8;function Fe(t){if(0!==(1&t))return De=15,1;if(0!==(2&t))return De=14,2;if(0!==(4&t))return De=13,4;var e=24&t;return 0!==e?(De=12,e):0!==(32&t)?(De=11,32):0!==(e=192&t)?(De=10,e):0!==(256&t)?(De=9,256):0!==(e=3584&t)?(De=8,e):0!==(4096&t)?(De=7,4096):0!==(e=4186112&t)?(De=6,e):0!==(e=62914560&t)?(De=5,e):67108864&t?(De=4,67108864):0!==(134217728&t)?(De=3,134217728):0!==(e=805306368&t)?(De=2,e):0!==(1073741824&t)?(De=1,1073741824):(De=8,t)}function je(t,e){var n=t.pendingLanes;if(0===n)return De=0;var r=0,i=0,o=t.expiredLanes,s=t.suspendedLanes,a=t.pingedLanes;if(0!==o)r=o,i=De=15;else if(0!==(o=134217727&n)){var u=o&~s;0!==u?(r=Fe(u),i=De):0!==(a&=o)&&(r=Fe(a),i=De)}else 0!==(o=n&~s)?(r=Fe(o),i=De):0!==a&&(r=Fe(a),i=De);if(0===r)return 0;if(r=n&((0>(r=31-Ye(r))?0:1<<r)<<1)-1,0!==e&&e!==r&&0===(e&s)){if(Fe(e),i<=De)return e;De=i}if(0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-Ye(e)),r|=t[n],e&=~i;return r}function Be(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function Ue(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return 0===(t=Ve(24&~e))?Ue(10,e):t;case 10:return 0===(t=Ve(192&~e))?Ue(8,e):t;case 8:return 0===(t=Ve(3584&~e))&&(0===(t=Ve(4186112&~e))&&(t=512)),t;case 2:return 0===(e=Ve(805306368&~e))&&(e=268435456),e}throw Error(s(358,t))}function Ve(t){return t&-t}function ze(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ge(t,e,n){t.pendingLanes|=e;var r=e-1;t.suspendedLanes&=r,t.pingedLanes&=r,(t=t.eventTimes)[e=31-Ye(e)]=n}var Ye=Math.clz32?Math.clz32:function(t){return 0===t?32:31-(We(t)/Xe|0)|0},We=Math.log,Xe=Math.LN2;var He=o.unstable_UserBlockingPriority,qe=o.unstable_runWithPriority,Ke=!0;function $e(t,e,n,r){Ft||Lt();var i=Qe,o=Ft;Ft=!0;try{Nt(i,t,e,n,r)}finally{(Ft=o)||Bt()}}function Je(t,e,n,r){qe(He,Qe.bind(null,t,e,n,r))}function Qe(t,e,n,r){var i;if(Ke)if((i=0===(4&e))&&0<se.length&&-1<de.indexOf(t))t=pe(null,t,e,n,r),se.push(t);else{var o=Ze(t,e,n,r);if(null===o)i&&ve(t,r);else{if(i){if(-1<de.indexOf(t))return t=pe(o,t,e,n,r),void se.push(t);if(function(t,e,n,r,i){switch(e){case"focusin":return ae=ge(ae,t,e,n,r,i),!0;case"dragenter":return ue=ge(ue,t,e,n,r,i),!0;case"mouseover":return ce=ge(ce,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return he.set(o,ge(he.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,le.set(o,ge(le.get(o)||null,t,e,n,r,i)),!0}return!1}(o,t,e,n,r))return;ve(t,r)}Lr(t,e,r,null,n)}}}function Ze(t,e,n,r){var i=kt(r);if(null!==(i=ni(i))){var o=$t(i);if(null===o)i=null;else{var s=o.tag;if(13===s){if(null!==(i=Jt(o)))return i;i=null}else if(3===s){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Lr(t,e,r,i,n),null}var tn=null,en=null,nn=null;function rn(){if(nn)return nn;var t,e,n=en,r=n.length,i="value"in tn?tn.value:tn.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var s=r-t;for(e=1;e<=s&&n[r-e]===i[o-e];e++);return nn=i.slice(t,1<e?1-e:void 0)}function on(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function sn(){return!0}function an(){return!1}function un(t){function e(e,n,r,i,o){for(var s in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(s)&&(e=t[s],this[s]=e?e(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?sn:an,this.isPropagationStopped=an,this}return i(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=sn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=sn)},persist:function(){},isPersistent:sn}),e}var cn,hn,ln,fn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=un(fn),pn=i({},fn,{view:0,detail:0}),vn=un(pn),gn=i({},pn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:On,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(cn=t.screenX-ln.screenX,hn=t.screenY-ln.screenY):hn=cn=0,ln=t),cn)},movementY:function(t){return"movementY"in t?t.movementY:hn}}),mn=un(gn),yn=un(i({},gn,{dataTransfer:0})),bn=un(i({},pn,{relatedTarget:0})),wn=un(i({},fn,{animationName:0,elapsedTime:0,pseudoElement:0})),xn=i({},fn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),_n=un(xn),Tn=un(i({},fn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function An(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=kn[t])&&!!e[t]}function On(){return An}var Cn=i({},pn,{key:function(t){if(t.key){var e=En[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=on(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Sn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:On,charCode:function(t){return"keypress"===t.type?on(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?on(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),Pn=un(Cn),In=un(i({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=un(i({},pn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:On})),Mn=un(i({},fn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=i({},gn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=un(Nn),Dn=[9,13,27,32],Fn=l&&"CompositionEvent"in window,jn=null;l&&"documentMode"in document&&(jn=document.documentMode);var Bn=l&&"TextEvent"in window&&!jn,Un=l&&(!Fn||jn&&8<jn&&11>=jn),Vn=String.fromCharCode(32),zn=!1;function Gn(t,e){switch(t){case"keyup":return-1!==Dn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Wn=!1;var Xn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Xn[t.type]:"textarea"===e}function qn(t,e,n,r){It(r),0<(e=Fr(e,"onChange")).length&&(n=new dn("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Kn=null,$n=null;function Jn(t){Cr(t,0)}function Qn(t){if(J(ii(t)))return t}function Zn(t,e){if("change"===t)return e}var tr=!1;if(l){var er;if(l){var nr="oninput"in document;if(!nr){var rr=document.createElement("div");rr.setAttribute("oninput","return;"),nr="function"===typeof rr.oninput}er=nr}else er=!1;tr=er&&(!document.documentMode||9<document.documentMode)}function ir(){Kn&&(Kn.detachEvent("onpropertychange",or),$n=Kn=null)}function or(t){if("value"===t.propertyName&&Qn($n)){var e=[];if(qn(e,$n,t,kt(t)),t=Jn,Ft)t(e);else{Ft=!0;try{Mt(t,e)}finally{Ft=!1,Bt()}}}}function sr(t,e,n){"focusin"===t?(ir(),$n=n,(Kn=e).attachEvent("onpropertychange",or)):"focusout"===t&&ir()}function ar(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Qn($n)}function ur(t,e){if("click"===t)return Qn(e)}function cr(t,e){if("input"===t||"change"===t)return Qn(e)}var hr="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},lr=Object.prototype.hasOwnProperty;function fr(t,e){if(hr(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!lr.call(e,n[r])||!hr(t[n[r]],e[n[r]]))return!1;return!0}function dr(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pr(t,e){var n,r=dr(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=dr(r)}}function vr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?vr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function gr(){for(var t=window,e=Q();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=Q((t=e.contentWindow).document)}return e}function mr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var yr=l&&"documentMode"in document&&11>=document.documentMode,br=null,wr=null,xr=null,_r=!1;function Tr(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==br||br!==Q(r)||("selectionStart"in(r=br)&&mr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},xr&&fr(xr,r)||(xr=r,0<(r=Fr(wr,"onSelect")).length&&(e=new dn("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=br)))}Le("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Le("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Le(Ne,2);for(var Er="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Sr=0;Sr<Er.length;Sr++)Me.set(Er[Sr],0);h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ar=new Set("cancel close invalid load scroll toggle".split(" ").concat(kr));function Or(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,o,a,u,c){if(Kt.apply(this,arguments),Yt){if(!Yt)throw Error(s(198));var h=Wt;Yt=!1,Wt=null,Xt||(Xt=!0,Ht=h)}}(r,e,void 0,t),t.currentTarget=null}function Cr(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==o&&i.isPropagationStopped())break t;Or(i,a,c),o=u}else for(s=0;s<r.length;s++){if(u=(a=r[s]).instance,c=a.currentTarget,a=a.listener,u!==o&&i.isPropagationStopped())break t;Or(i,a,c),o=u}}}if(Xt)throw t=Ht,Xt=!1,Ht=null,t}function Pr(t,e){var n=si(e),r=t+"__bubble";n.has(r)||(Nr(e,t,2,!1),n.add(r))}var Ir="_reactListening"+Math.random().toString(36).slice(2);function Rr(t){t[Ir]||(t[Ir]=!0,a.forEach((function(e){Ar.has(e)||Mr(e,!1,t,null),Mr(e,!0,t,null)})))}function Mr(t,e,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===t&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!e&&Ar.has(t)){if("scroll"!==t)return;i|=2,o=r}var s=si(o),a=t+"__"+(e?"capture":"bubble");s.has(a)||(e&&(i|=4),Nr(o,t,i,e),s.add(a))}function Nr(t,e,n,r){var i=Me.get(e);switch(void 0===i?2:i){case 0:i=$e;break;case 1:i=Je;break;default:i=Qe}n=i.bind(null,e,n,t),i=void 0,!Vt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Lr(t,e,n,r,i){var o=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var u=s.tag;if((3===u||4===u)&&((u=s.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=ni(a)))return;if(5===(u=s.tag)||6===u){r=o=s;continue t}a=a.parentNode}}r=r.return}!function(t,e,n){if(jt)return t(e,n);jt=!0;try{Dt(t,e,n)}finally{jt=!1,Bt()}}((function(){var r=o,i=kt(n),s=[];t:{var a=Re.get(t);if(void 0!==a){var u=dn,c=t;switch(t){case"keypress":if(0===on(n))break t;case"keydown":case"keyup":u=Pn;break;case"focusin":c="focus",u=bn;break;case"focusout":c="blur",u=bn;break;case"beforeblur":case"afterblur":u=bn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Rn;break;case Oe:case Ce:case Pe:u=wn;break;case Ie:u=Mn;break;case"scroll":u=vn;break;case"wheel":u=Ln;break;case"copy":case"cut":case"paste":u=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=In}var h=0!==(4&e),l=!h&&"scroll"===t,f=h?null!==a?a+"Capture":null:a;h=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==f&&(null!=(v=Ut(p,f))&&h.push(Dr(p,v,d)))),l)break;p=p.return}0<h.length&&(a=new u(a,c,null,n,i),s.push({event:a,listeners:h}))}}if(0===(7&e)){if(u="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||0!==(16&e)||!(c=n.relatedTarget||n.fromElement)||!ni(c)&&!c[ti])&&(u||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?ni(c):null)&&(c!==(l=$t(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(h=mn,v="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(h=In,v="onPointerLeave",f="onPointerEnter",p="pointer"),l=null==u?a:ii(u),d=null==c?a:ii(c),(a=new h(v,p+"leave",u,n,i)).target=l,a.relatedTarget=d,v=null,ni(i)===r&&((h=new h(f,p+"enter",c,n,i)).target=d,h.relatedTarget=l,v=h),l=v,u&&c)t:{for(f=c,p=0,d=h=u;d;d=jr(d))p++;for(d=0,v=f;v;v=jr(v))d++;for(;0<p-d;)h=jr(h),p--;for(;0<d-p;)f=jr(f),d--;for(;p--;){if(h===f||null!==f&&h===f.alternate)break t;h=jr(h),f=jr(f)}h=null}else h=null;null!==u&&Br(s,a,u,h,!1),null!==c&&null!==l&&Br(s,l,c,h,!0)}if("select"===(u=(a=r?ii(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===u&&"file"===a.type)var g=Zn;else if(Hn(a))if(tr)g=cr;else{g=ar;var m=sr}else(u=a.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ur);switch(g&&(g=g(t,r))?qn(s,g,n,i):(m&&m(t,a,r),"focusout"===t&&(m=a._wrapperState)&&m.controlled&&"number"===a.type&&it(a,"number",a.value)),m=r?ii(r):window,t){case"focusin":(Hn(m)||"true"===m.contentEditable)&&(br=m,wr=r,xr=null);break;case"focusout":xr=wr=br=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,Tr(s,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":Tr(s,n,i)}var y;if(Fn)t:{switch(t){case"compositionstart":var b="onCompositionStart";break t;case"compositionend":b="onCompositionEnd";break t;case"compositionupdate":b="onCompositionUpdate";break t}b=void 0}else Wn?Gn(t,n)&&(b="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(b="onCompositionStart");b&&(Un&&"ko"!==n.locale&&(Wn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wn&&(y=rn()):(en="value"in(tn=i)?tn.value:tn.textContent,Wn=!0)),0<(m=Fr(r,b)).length&&(b=new Tn(b,t,null,n,i),s.push({event:b,listeners:m}),y?b.data=y:null!==(y=Yn(n))&&(b.data=y))),(y=Bn?function(t,e){switch(t){case"compositionend":return Yn(e);case"keypress":return 32!==e.which?null:(zn=!0,Vn);case"textInput":return(t=e.data)===Vn&&zn?null:t;default:return null}}(t,n):function(t,e){if(Wn)return"compositionend"===t||!Fn&&Gn(t,e)?(t=rn(),nn=en=tn=null,Wn=!1,t):null;switch(t){default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Un&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(r=Fr(r,"onBeforeInput")).length&&(i=new Tn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}Cr(s,e)}))}function Dr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ut(t,n))&&r.unshift(Dr(t,o,i)),null!=(o=Ut(t,e))&&r.push(Dr(t,o,i))),t=t.return}return r}function jr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Br(t,e,n,r,i){for(var o=e._reactName,s=[];null!==n&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(null!==u&&u===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(u=Ut(n,o))&&s.unshift(Dr(n,u,a)):i||null!=(u=Ut(n,o))&&s.push(Dr(n,u,a))),n=n.return}0!==s.length&&t.push({event:e,listeners:s})}function Ur(){}var Vr=null,zr=null;function Gr(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function Yr(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var Wr="function"===typeof setTimeout?setTimeout:void 0,Xr="function"===typeof clearTimeout?clearTimeout:void 0;function Hr(t){1===t.nodeType?t.textContent="":9===t.nodeType&&(null!=(t=t.body)&&(t.textContent=""))}function qr(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function Kr(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var $r=0;var Jr=Math.random().toString(36).slice(2),Qr="__reactFiber$"+Jr,Zr="__reactProps$"+Jr,ti="__reactContainer$"+Jr,ei="__reactEvents$"+Jr;function ni(t){var e=t[Qr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ti]||n[Qr]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=Kr(t);null!==t;){if(n=t[Qr])return n;t=Kr(t)}return e}n=(t=n).parentNode}return null}function ri(t){return!(t=t[Qr]||t[ti])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function ii(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(s(33))}function oi(t){return t[Zr]||null}function si(t){var e=t[ei];return void 0===e&&(e=t[ei]=new Set),e}var ai=[],ui=-1;function ci(t){return{current:t}}function hi(t){0>ui||(t.current=ai[ui],ai[ui]=null,ui--)}function li(t,e){ui++,ai[ui]=t.current,t.current=e}var fi={},di=ci(fi),pi=ci(!1),vi=fi;function gi(t,e){var n=t.type.contextTypes;if(!n)return fi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function mi(t){return null!==(t=t.childContextTypes)&&void 0!==t}function yi(){hi(pi),hi(di)}function bi(t,e,n){if(di.current!==fi)throw Error(s(168));li(di,e),li(pi,n)}function wi(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(s(108,H(e)||"Unknown",o));return i({},n,r)}function xi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||fi,vi=di.current,li(di,t),li(pi,pi.current),!0}function _i(t,e,n){var r=t.stateNode;if(!r)throw Error(s(169));n?(t=wi(t,e,vi),r.__reactInternalMemoizedMergedChildContext=t,hi(pi),hi(di),li(di,t)):hi(pi),li(pi,n)}var Ti=null,Ei=null,Si=o.unstable_runWithPriority,ki=o.unstable_scheduleCallback,Ai=o.unstable_cancelCallback,Oi=o.unstable_shouldYield,Ci=o.unstable_requestPaint,Pi=o.unstable_now,Ii=o.unstable_getCurrentPriorityLevel,Ri=o.unstable_ImmediatePriority,Mi=o.unstable_UserBlockingPriority,Ni=o.unstable_NormalPriority,Li=o.unstable_LowPriority,Di=o.unstable_IdlePriority,Fi={},ji=void 0!==Ci?Ci:function(){},Bi=null,Ui=null,Vi=!1,zi=Pi(),Gi=1e4>zi?Pi:function(){return Pi()-zi};function Yi(){switch(Ii()){case Ri:return 99;case Mi:return 98;case Ni:return 97;case Li:return 96;case Di:return 95;default:throw Error(s(332))}}function Wi(t){switch(t){case 99:return Ri;case 98:return Mi;case 97:return Ni;case 96:return Li;case 95:return Di;default:throw Error(s(332))}}function Xi(t,e){return t=Wi(t),Si(t,e)}function Hi(t,e,n){return t=Wi(t),ki(t,e,n)}function qi(){if(null!==Ui){var t=Ui;Ui=null,Ai(t)}Ki()}function Ki(){if(!Vi&&null!==Bi){Vi=!0;var t=0;try{var e=Bi;Xi(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Bi=null}catch(n){throw null!==Bi&&(Bi=Bi.slice(t+1)),ki(Ri,qi),n}finally{Vi=!1}}}var $i=x.ReactCurrentBatchConfig;function Ji(t,e){if(t&&t.defaultProps){for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var Qi=ci(null),Zi=null,to=null,eo=null;function no(){eo=to=Zi=null}function ro(t){var e=Qi.current;hi(Qi),t.type._context._currentValue=e}function io(t,e){for(;null!==t;){var n=t.alternate;if((t.childLanes&e)===e){if(null===n||(n.childLanes&e)===e)break;n.childLanes|=e}else t.childLanes|=e,null!==n&&(n.childLanes|=e);t=t.return}}function oo(t,e){Zi=t,eo=to=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(Fs=!0),t.firstContext=null)}function so(t,e){if(eo!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(eo=t,e=1073741823),e={context:t,observedBits:e,next:null},null===to){if(null===Zi)throw Error(s(308));to=e,Zi.dependencies={lanes:0,firstContext:e,responders:null}}else to=to.next=e;return t._currentValue}var ao=!1;function uo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function co(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ho(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function lo(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function fo(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function po(t,e,n,r){var o=t.updateQueue;ao=!1;var s=o.firstBaseUpdate,a=o.lastBaseUpdate,u=o.shared.pending;if(null!==u){o.shared.pending=null;var c=u,h=c.next;c.next=null,null===a?s=h:a.next=h,a=c;var l=t.alternate;if(null!==l){var f=(l=l.updateQueue).lastBaseUpdate;f!==a&&(null===f?l.firstBaseUpdate=h:f.next=h,l.lastBaseUpdate=c)}}if(null!==s){for(f=o.baseState,a=0,l=h=c=null;;){u=s.lane;var d=s.eventTime;if((r&u)===u){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});t:{var p=t,v=s;switch(u=e,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,u);break t}f=p;break t;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(u="function"===typeof(p=v.payload)?p.call(d,f,u):p)||void 0===u)break t;f=i({},f,u);break t;case 2:ao=!0}}null!==s.callback&&(t.flags|=32,null===(u=o.effects)?o.effects=[s]:u.push(s))}else d={eventTime:d,lane:u,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(h=l=d,c=f):l=l.next=d,a|=u;if(null===(s=s.next)){if(null===(u=o.shared.pending))break;s=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}null===l&&(c=f),o.baseState=c,o.firstBaseUpdate=h,o.lastBaseUpdate=l,Va|=a,t.lanes=a,t.memoizedState=f}}function vo(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var go=(new r.Component).refs;function mo(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:i({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var yo={isMounted:function(t){return!!(t=t._reactInternals)&&$t(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=fu(),i=du(t),o=ho(r,i);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),lo(t,o),pu(t,i,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=fu(),i=du(t),o=ho(r,i);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),lo(t,o),pu(t,i,r)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=fu(),r=du(t),i=ho(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),lo(t,i),pu(t,r,n)}};function bo(t,e,n,r,i,o,s){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,s):!e.prototype||!e.prototype.isPureReactComponent||(!fr(n,r)||!fr(i,o))}function wo(t,e,n){var r=!1,i=fi,o=e.contextType;return"object"===typeof o&&null!==o?o=so(o):(i=mi(e)?vi:di.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?gi(t,i):fi),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=yo,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function xo(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yo.enqueueReplaceState(e,e.state,null)}function _o(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=go,uo(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=so(o):(o=mi(e)?vi:di.current,i.context=gi(t,o)),po(t,n,i,r),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(mo(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&yo.enqueueReplaceState(i,i.state,null),po(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4)}var To=Array.isArray;function Eo(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===i?e.ref:(e=function(t){var e=r.refs;e===go&&(e=r.refs={}),null===t?delete e[i]:e[i]=t},e._stringRef=i,e)}if("string"!==typeof t)throw Error(s(284));if(!n._owner)throw Error(s(290,t))}return t}function So(t,e){if("textarea"!==t.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function ko(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Xu(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags=2,n):r:(e.flags=2,n):n}function a(e){return t&&null===e.alternate&&(e.flags=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=$u(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function c(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=Eo(t,e,n),r.return=t,r):((r=Hu(n.type,n.key,n.props,null,t.mode,r)).ref=Eo(t,e,n),r.return=t,r)}function h(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Ju(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function l(t,e,n,r,o){return null===e||7!==e.tag?((e=qu(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function f(t,e,n){if("string"===typeof e||"number"===typeof e)return(e=$u(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case _:return(n=Hu(e.type,e.key,e.props,null,t.mode,n)).ref=Eo(t,null,e),n.return=t,n;case T:return(e=Ju(e,t.mode,n)).return=t,e}if(To(e)||z(e))return(e=qu(e,t.mode,n,null)).return=t,e;So(t,e)}return null}function d(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?n.type===E?l(t,e,n.props.children,r,i):c(t,e,n,r):null;case T:return n.key===i?h(t,e,n,r):null}if(To(n)||z(n))return null!==i?null:l(t,e,n,r,null);So(t,n)}return null}function p(t,e,n,r,i){if("string"===typeof r||"number"===typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return t=t.get(null===r.key?n:r.key)||null,r.type===E?l(e,t,r.props.children,i,r.key):c(e,t,r,i);case T:return h(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(To(r)||z(r))return l(e,t=t.get(n)||null,r,i,null);So(e,r)}return null}function v(i,s,a,u){for(var c=null,h=null,l=s,v=s=0,g=null;null!==l&&v<a.length;v++){l.index>v?(g=l,l=null):g=l.sibling;var m=d(i,l,a[v],u);if(null===m){null===l&&(l=g);break}t&&l&&null===m.alternate&&e(i,l),s=o(m,s,v),null===h?c=m:h.sibling=m,h=m,l=g}if(v===a.length)return n(i,l),c;if(null===l){for(;v<a.length;v++)null!==(l=f(i,a[v],u))&&(s=o(l,s,v),null===h?c=l:h.sibling=l,h=l);return c}for(l=r(i,l);v<a.length;v++)null!==(g=p(l,i,v,a[v],u))&&(t&&null!==g.alternate&&l.delete(null===g.key?v:g.key),s=o(g,s,v),null===h?c=g:h.sibling=g,h=g);return t&&l.forEach((function(t){return e(i,t)})),c}function g(i,a,u,c){var h=z(u);if("function"!==typeof h)throw Error(s(150));if(null==(u=h.call(u)))throw Error(s(151));for(var l=h=null,v=a,g=a=0,m=null,y=u.next();null!==v&&!y.done;g++,y=u.next()){v.index>g?(m=v,v=null):m=v.sibling;var b=d(i,v,y.value,c);if(null===b){null===v&&(v=m);break}t&&v&&null===b.alternate&&e(i,v),a=o(b,a,g),null===l?h=b:l.sibling=b,l=b,v=m}if(y.done)return n(i,v),h;if(null===v){for(;!y.done;g++,y=u.next())null!==(y=f(i,y.value,c))&&(a=o(y,a,g),null===l?h=y:l.sibling=y,l=y);return h}for(v=r(i,v);!y.done;g++,y=u.next())null!==(y=p(v,i,g,y.value,c))&&(t&&null!==y.alternate&&v.delete(null===y.key?g:y.key),a=o(y,a,g),null===l?h=y:l.sibling=y,l=y);return t&&v.forEach((function(t){return e(i,t)})),h}return function(t,r,o,u){var c="object"===typeof o&&null!==o&&o.type===E&&null===o.key;c&&(o=o.props.children);var h="object"===typeof o&&null!==o;if(h)switch(o.$$typeof){case _:t:{for(h=o.key,c=r;null!==c;){if(c.key===h){if(7===c.tag){if(o.type===E){n(t,c.sibling),(r=i(c,o.props.children)).return=t,t=r;break t}}else if(c.elementType===o.type){n(t,c.sibling),(r=i(c,o.props)).ref=Eo(t,c,o),r.return=t,t=r;break t}n(t,c);break}e(t,c),c=c.sibling}o.type===E?((r=qu(o.props.children,t.mode,u,o.key)).return=t,t=r):((u=Hu(o.type,o.key,o.props,null,t.mode,u)).ref=Eo(t,r,o),u.return=t,t=u)}return a(t);case T:t:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),(r=i(r,o.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=Ju(o,t.mode,u)).return=t,t=r}return a(t)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,o)).return=t,t=r):(n(t,r),(r=$u(o,t.mode,u)).return=t,t=r),a(t);if(To(o))return v(t,r,o,u);if(z(o))return g(t,r,o,u);if(h&&So(t,o),"undefined"===typeof o&&!c)switch(t.tag){case 1:case 22:case 0:case 11:case 15:throw Error(s(152,H(t.type)||"Component"))}return n(t,r)}}var Ao=ko(!0),Oo=ko(!1),Co={},Po=ci(Co),Io=ci(Co),Ro=ci(Co);function Mo(t){if(t===Co)throw Error(s(174));return t}function No(t,e){switch(li(Ro,e),li(Io,t),li(Po,Co),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pt(null,"");break;default:e=pt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}hi(Po),li(Po,e)}function Lo(){hi(Po),hi(Io),hi(Ro)}function Do(t){Mo(Ro.current);var e=Mo(Po.current),n=pt(e,t.type);e!==n&&(li(Io,t),li(Po,n))}function Fo(t){Io.current===t&&(hi(Po),hi(Io))}var jo=ci(0);function Bo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Uo=null,Vo=null,zo=!1;function Go(t,e){var n=Yu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.flags=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Yo(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);default:return!1}}function Wo(t){if(zo){var e=Vo;if(e){var n=e;if(!Yo(t,e)){if(!(e=qr(n.nextSibling))||!Yo(t,e))return t.flags=-1025&t.flags|2,zo=!1,void(Uo=t);Go(Uo,n)}Uo=t,Vo=qr(e.firstChild)}else t.flags=-1025&t.flags|2,zo=!1,Uo=t}}function Xo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Uo=t}function Ho(t){if(t!==Uo)return!1;if(!zo)return Xo(t),zo=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!Yr(e,t.memoizedProps))for(e=Vo;e;)Go(t,e),e=qr(e.nextSibling);if(Xo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){Vo=qr(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}Vo=null}}else Vo=Uo?qr(t.stateNode.nextSibling):null;return!0}function qo(){Vo=Uo=null,zo=!1}var Ko=[];function $o(){for(var t=0;t<Ko.length;t++)Ko[t]._workInProgressVersionPrimary=null;Ko.length=0}var Jo=x.ReactCurrentDispatcher,Qo=x.ReactCurrentBatchConfig,Zo=0,ts=null,es=null,ns=null,rs=!1,is=!1;function os(){throw Error(s(321))}function ss(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!hr(t[n],e[n]))return!1;return!0}function as(t,e,n,r,i,o){if(Zo=o,ts=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Jo.current=null===t||null===t.memoizedState?Ms:Ns,t=n(r,i),is){o=0;do{if(is=!1,!(25>o))throw Error(s(301));o+=1,ns=es=null,e.updateQueue=null,Jo.current=Ls,t=n(r,i)}while(is)}if(Jo.current=Rs,e=null!==es&&null!==es.next,Zo=0,ns=es=ts=null,rs=!1,e)throw Error(s(300));return t}function us(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ns?ts.memoizedState=ns=t:ns=ns.next=t,ns}function cs(){if(null===es){var t=ts.alternate;t=null!==t?t.memoizedState:null}else t=es.next;var e=null===ns?ts.memoizedState:ns.next;if(null!==e)ns=e,es=t;else{if(null===t)throw Error(s(310));t={memoizedState:(es=t).memoizedState,baseState:es.baseState,baseQueue:es.baseQueue,queue:es.queue,next:null},null===ns?ts.memoizedState=ns=t:ns=ns.next=t}return ns}function hs(t,e){return"function"===typeof e?e(t):e}function ls(t){var e=cs(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var r=es,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=a=o=null,c=i;do{var h=c.lane;if((Zo&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),r=c.eagerReducer===t?c.eagerState:t(r,c.action);else{var l={lane:h,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(a=u=l,o=r):u=u.next=l,ts.lanes|=h,Va|=h}c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=a,hr(r,e.memoizedState)||(Fs=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function fs(t){var e=cs(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=t(o,a.action),a=a.next}while(a!==i);hr(o,e.memoizedState)||(Fs=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function ds(t,e,n){var r=e._getVersion;r=r(e._source);var i=e._workInProgressVersionPrimary;if(null!==i?t=i===r:(t=t.mutableReadLanes,(t=(Zo&t)===t)&&(e._workInProgressVersionPrimary=r,Ko.push(e))),t)return n(e._source);throw Ko.push(e),Error(s(350))}function ps(t,e,n,r){var i=Ma;if(null===i)throw Error(s(349));var o=e._getVersion,a=o(e._source),u=Jo.current,c=u.useState((function(){return ds(i,e,n)})),h=c[1],l=c[0];c=ns;var f=t.memoizedState,d=f.refs,p=d.getSnapshot,v=f.source;f=f.subscribe;var g=ts;return t.memoizedState={refs:d,source:e,subscribe:r},u.useEffect((function(){d.getSnapshot=n,d.setSnapshot=h;var t=o(e._source);if(!hr(a,t)){t=n(e._source),hr(l,t)||(h(t),t=du(g),i.mutableReadLanes|=t&i.pendingLanes),t=i.mutableReadLanes,i.entangledLanes|=t;for(var r=i.entanglements,s=t;0<s;){var u=31-Ye(s),c=1<<u;r[u]|=t,s&=~c}}}),[n,e,r]),u.useEffect((function(){return r(e._source,(function(){var t=d.getSnapshot,n=d.setSnapshot;try{n(t(e._source));var r=du(g);i.mutableReadLanes|=r&i.pendingLanes}catch(o){n((function(){throw o}))}}))}),[e,r]),hr(p,n)&&hr(v,e)&&hr(f,r)||((t={pending:null,dispatch:null,lastRenderedReducer:hs,lastRenderedState:l}).dispatch=h=Is.bind(null,ts,t),c.queue=t,c.baseQueue=null,l=ds(i,e,n),c.memoizedState=c.baseState=l),l}function vs(t,e,n){return ps(cs(),t,e,n)}function gs(t){var e=us();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:hs,lastRenderedState:t}).dispatch=Is.bind(null,ts,t),[e.memoizedState,t]}function ms(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=ts.updateQueue)?(e={lastEffect:null},ts.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function ys(t){return t={current:t},us().memoizedState=t}function bs(){return cs().memoizedState}function ws(t,e,n,r){var i=us();ts.flags|=t,i.memoizedState=ms(1|e,n,void 0,void 0===r?null:r)}function xs(t,e,n,r){var i=cs();r=void 0===r?null:r;var o=void 0;if(null!==es){var s=es.memoizedState;if(o=s.destroy,null!==r&&ss(r,s.deps))return void ms(e,n,o,r)}ts.flags|=t,i.memoizedState=ms(1|e,n,o,r)}function _s(t,e){return ws(516,4,t,e)}function Ts(t,e){return xs(516,4,t,e)}function Es(t,e){return xs(4,2,t,e)}function Ss(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function ks(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,xs(4,2,Ss.bind(null,e,t),n)}function As(){}function Os(t,e){var n=cs();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ss(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Cs(t,e){var n=cs();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ss(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ps(t,e){var n=Yi();Xi(98>n?98:n,(function(){t(!0)})),Xi(97<n?97:n,(function(){var n=Qo.transition;Qo.transition=1;try{t(!1),e()}finally{Qo.transition=n}}))}function Is(t,e,n){var r=fu(),i=du(t),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},s=e.pending;if(null===s?o.next=o:(o.next=s.next,s.next=o),e.pending=o,s=t.alternate,t===ts||null!==s&&s===ts)is=rs=!0;else{if(0===t.lanes&&(null===s||0===s.lanes)&&null!==(s=e.lastRenderedReducer))try{var a=e.lastRenderedState,u=s(a,n);if(o.eagerReducer=s,o.eagerState=u,hr(u,a))return}catch(c){}pu(t,i,r)}}var Rs={readContext:so,useCallback:os,useContext:os,useEffect:os,useImperativeHandle:os,useLayoutEffect:os,useMemo:os,useReducer:os,useRef:os,useState:os,useDebugValue:os,useDeferredValue:os,useTransition:os,useMutableSource:os,useOpaqueIdentifier:os,unstable_isNewReconciler:!1},Ms={readContext:so,useCallback:function(t,e){return us().memoizedState=[t,void 0===e?null:e],t},useContext:so,useEffect:_s,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,ws(4,2,Ss.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ws(4,2,t,e)},useMemo:function(t,e){var n=us();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=us();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Is.bind(null,ts,t),[r.memoizedState,t]},useRef:ys,useState:gs,useDebugValue:As,useDeferredValue:function(t){var e=gs(t),n=e[0],r=e[1];return _s((function(){var e=Qo.transition;Qo.transition=1;try{r(t)}finally{Qo.transition=e}}),[t]),n},useTransition:function(){var t=gs(!1),e=t[0];return ys(t=Ps.bind(null,t[1])),[t,e]},useMutableSource:function(t,e,n){var r=us();return r.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:n},ps(r,t,e,n)},useOpaqueIdentifier:function(){if(zo){var t=!1,e=function(t){return{$$typeof:L,toString:t,valueOf:t}}((function(){throw t||(t=!0,n("r:"+($r++).toString(36))),Error(s(355))})),n=gs(e)[1];return 0===(2&ts.mode)&&(ts.flags|=516,ms(5,(function(){n("r:"+($r++).toString(36))}),void 0,null)),e}return gs(e="r:"+($r++).toString(36)),e},unstable_isNewReconciler:!1},Ns={readContext:so,useCallback:Os,useContext:so,useEffect:Ts,useImperativeHandle:ks,useLayoutEffect:Es,useMemo:Cs,useReducer:ls,useRef:bs,useState:function(){return ls(hs)},useDebugValue:As,useDeferredValue:function(t){var e=ls(hs),n=e[0],r=e[1];return Ts((function(){var e=Qo.transition;Qo.transition=1;try{r(t)}finally{Qo.transition=e}}),[t]),n},useTransition:function(){var t=ls(hs)[0];return[bs().current,t]},useMutableSource:vs,useOpaqueIdentifier:function(){return ls(hs)[0]},unstable_isNewReconciler:!1},Ls={readContext:so,useCallback:Os,useContext:so,useEffect:Ts,useImperativeHandle:ks,useLayoutEffect:Es,useMemo:Cs,useReducer:fs,useRef:bs,useState:function(){return fs(hs)},useDebugValue:As,useDeferredValue:function(t){var e=fs(hs),n=e[0],r=e[1];return Ts((function(){var e=Qo.transition;Qo.transition=1;try{r(t)}finally{Qo.transition=e}}),[t]),n},useTransition:function(){var t=fs(hs)[0];return[bs().current,t]},useMutableSource:vs,useOpaqueIdentifier:function(){return fs(hs)[0]},unstable_isNewReconciler:!1},Ds=x.ReactCurrentOwner,Fs=!1;function js(t,e,n,r){e.child=null===t?Oo(e,null,n,r):Ao(e,t.child,n,r)}function Bs(t,e,n,r,i){n=n.render;var o=e.ref;return oo(e,i),r=as(t,e,n,r,o,i),null===t||Fs?(e.flags|=1,js(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,oa(t,e,i))}function Us(t,e,n,r,i,o){if(null===t){var s=n.type;return"function"!==typeof s||Wu(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Hu(n.type,null,r,e,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=s,Vs(t,e,s,r,i,o))}return s=t.child,0===(i&o)&&(i=s.memoizedProps,(n=null!==(n=n.compare)?n:fr)(i,r)&&t.ref===e.ref)?oa(t,e,o):(e.flags|=1,(t=Xu(s,r)).ref=e.ref,t.return=e,e.child=t)}function Vs(t,e,n,r,i,o){if(null!==t&&fr(t.memoizedProps,r)&&t.ref===e.ref){if(Fs=!1,0===(o&i))return e.lanes=t.lanes,oa(t,e,o);0!==(16384&t.flags)&&(Fs=!0)}return Ys(t,e,n,r,o)}function zs(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0===(4&e.mode))e.memoizedState={baseLanes:0},_u(e,n);else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},_u(e,t),null;e.memoizedState={baseLanes:0},_u(e,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,_u(e,r);return js(t,e,i,n),e.child}function Gs(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=128)}function Ys(t,e,n,r,i){var o=mi(n)?vi:di.current;return o=gi(e,o),oo(e,i),n=as(t,e,n,r,o,i),null===t||Fs?(e.flags|=1,js(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~i,oa(t,e,i))}function Ws(t,e,n,r,i){if(mi(n)){var o=!0;xi(e)}else o=!1;if(oo(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),wo(e,n,r),_o(e,n,r,i),r=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var u=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=so(c):c=gi(e,c=mi(n)?vi:di.current);var h=n.getDerivedStateFromProps,l="function"===typeof h||"function"===typeof s.getSnapshotBeforeUpdate;l||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||u!==c)&&xo(e,s,r,c),ao=!1;var f=e.memoizedState;s.state=f,po(e,r,s,i),u=e.memoizedState,a!==r||f!==u||pi.current||ao?("function"===typeof h&&(mo(e,n,h,r),u=e.memoizedState),(a=ao||bo(e,n,a,r,f,u,c))?(l||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(e.flags|=4)):("function"===typeof s.componentDidMount&&(e.flags|=4),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=c,r=a):("function"===typeof s.componentDidMount&&(e.flags|=4),r=!1)}else{s=e.stateNode,co(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ji(e.type,a),s.props=c,l=e.pendingProps,f=s.context,"object"===typeof(u=n.contextType)&&null!==u?u=so(u):u=gi(e,u=mi(n)?vi:di.current);var d=n.getDerivedStateFromProps;(h="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==l||f!==u)&&xo(e,s,r,u),ao=!1,f=e.memoizedState,s.state=f,po(e,r,s,i);var p=e.memoizedState;a!==l||f!==p||pi.current||ao?("function"===typeof d&&(mo(e,n,d,r),p=e.memoizedState),(c=ao||bo(e,n,c,r,f,p,u))?(h||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,u),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof s.componentDidUpdate&&(e.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(e.flags|=256)):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=u,r=c):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=256),r=!1)}return Xs(t,e,n,r,o,i)}function Xs(t,e,n,r,i,o){Gs(t,e);var s=0!==(64&e.flags);if(!r&&!s)return i&&_i(e,n,!1),oa(t,e,o);r=e.stateNode,Ds.current=e;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&s?(e.child=Ao(e,t.child,null,o),e.child=Ao(e,null,a,o)):js(t,e,a,o),e.memoizedState=r.state,i&&_i(e,n,!0),e.child}function Hs(t){var e=t.stateNode;e.pendingContext?bi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&bi(0,e.context,!1),No(t,e.containerInfo)}var qs,Ks,$s,Js={dehydrated:null,retryLane:0};function Qs(t,e,n){var r,i=e.pendingProps,o=jo.current,s=!1;return(r=0!==(64&e.flags))||(r=(null===t||null!==t.memoizedState)&&0!==(2&o)),r?(s=!0,e.flags&=-65):null!==t&&null===t.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),li(jo,1&o),null===t?(void 0!==i.fallback&&Wo(e),t=i.children,o=i.fallback,s?(t=Zs(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Js,t):"number"===typeof i.unstable_expectedLoadTime?(t=Zs(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Js,e.lanes=33554432,t):((n=Ku({mode:"visible",children:t},e.mode,n,null)).return=e,e.child=n)):(t.memoizedState,s?(i=ea(t,e,i.children,i.fallback,n),s=e.child,o=t.child.memoizedState,s.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},s.childLanes=t.childLanes&~n,e.memoizedState=Js,i):(n=ta(t,e,i.children,n),e.memoizedState=null,n))}function Zs(t,e,n,r){var i=t.mode,o=t.child;return e={mode:"hidden",children:e},0===(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=e):o=Ku(e,i,0,null),n=qu(n,i,r,null),o.return=t,n.return=t,o.sibling=n,t.child=o,n}function ta(t,e,n,r){var i=t.child;return t=i.sibling,n=Xu(i,{mode:"visible",children:n}),0===(2&e.mode)&&(n.lanes=r),n.return=e,n.sibling=null,null!==t&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=n}function ea(t,e,n,r,i){var o=e.mode,s=t.child;t=s.sibling;var a={mode:"hidden",children:n};return 0===(2&o)&&e.child!==s?((n=e.child).childLanes=0,n.pendingProps=a,null!==(s=n.lastEffect)?(e.firstEffect=n.firstEffect,e.lastEffect=s,s.nextEffect=null):e.firstEffect=e.lastEffect=null):n=Xu(s,a),null!==t?r=Xu(t,r):(r=qu(r,o,i,null)).flags|=2,r.return=e,n.return=e,n.sibling=r,e.child=n,r}function na(t,e){t.lanes|=e;var n=t.alternate;null!==n&&(n.lanes|=e),io(t.return,e)}function ra(t,e,n,r,i,o){var s=t.memoizedState;null===s?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i,s.lastEffect=o)}function ia(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(js(t,e,r.children,n),0!==(2&(r=jo.current)))r=1&r|2,e.flags|=64;else{if(null!==t&&0!==(64&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&na(t,n);else if(19===t.tag)na(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(li(jo,r),0===(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===Bo(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ra(e,!1,i,n,o,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===Bo(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ra(e,!0,n,null,o,e.lastEffect);break;case"together":ra(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function oa(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Va|=e.lanes,0!==(n&e.childLanes)){if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(n=Xu(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Xu(t,t.pendingProps)).return=e;n.sibling=null}return e.child}return null}function sa(t,e){if(!zo)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function aa(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return mi(e.type)&&yi(),null;case 3:return Lo(),hi(pi),hi(di),$o(),(r=e.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(Ho(e)?e.flags|=4:r.hydrate||(e.flags|=256)),null;case 5:Fo(e);var o=Mo(Ro.current);if(n=e.type,null!==t&&null!=e.stateNode)Ks(t,e,n,r),t.ref!==e.ref&&(e.flags|=128);else{if(!r){if(null===e.stateNode)throw Error(s(166));return null}if(t=Mo(Po.current),Ho(e)){r=e.stateNode,n=e.type;var a=e.memoizedProps;switch(r[Qr]=e,r[Zr]=a,n){case"dialog":Pr("cancel",r),Pr("close",r);break;case"iframe":case"object":case"embed":Pr("load",r);break;case"video":case"audio":for(t=0;t<kr.length;t++)Pr(kr[t],r);break;case"source":Pr("error",r);break;case"img":case"image":case"link":Pr("error",r),Pr("load",r);break;case"details":Pr("toggle",r);break;case"input":tt(r,a),Pr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Pr("invalid",r);break;case"textarea":ut(r,a),Pr("invalid",r)}for(var c in Et(n,a),t=null,a)a.hasOwnProperty(c)&&(o=a[c],"children"===c?"string"===typeof o?r.textContent!==o&&(t=["children",o]):"number"===typeof o&&r.textContent!==""+o&&(t=["children",""+o]):u.hasOwnProperty(c)&&null!=o&&"onScroll"===c&&Pr("scroll",r));switch(n){case"input":$(r),rt(r,a,!0);break;case"textarea":$(r),ht(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Ur)}r=t,e.updateQueue=r,null!==r&&(e.flags|=4)}else{switch(c=9===o.nodeType?o:o.ownerDocument,t===lt&&(t=dt(n)),t===lt?"script"===n?((t=c.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=c.createElement(n,{is:r.is}):(t=c.createElement(n),"select"===n&&(c=t,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):t=c.createElementNS(t,n),t[Qr]=e,t[Zr]=r,qs(t,e),e.stateNode=t,c=St(n,r),n){case"dialog":Pr("cancel",t),Pr("close",t),o=r;break;case"iframe":case"object":case"embed":Pr("load",t),o=r;break;case"video":case"audio":for(o=0;o<kr.length;o++)Pr(kr[o],t);o=r;break;case"source":Pr("error",t),o=r;break;case"img":case"image":case"link":Pr("error",t),Pr("load",t),o=r;break;case"details":Pr("toggle",t),o=r;break;case"input":tt(t,r),o=Z(t,r),Pr("invalid",t);break;case"option":o=ot(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},o=i({},r,{value:void 0}),Pr("invalid",t);break;case"textarea":ut(t,r),o=at(t,r),Pr("invalid",t);break;default:o=r}Et(n,o);var h=o;for(a in h)if(h.hasOwnProperty(a)){var l=h[a];"style"===a?_t(t,l):"dangerouslySetInnerHTML"===a?null!=(l=l?l.__html:void 0)&&mt(t,l):"children"===a?"string"===typeof l?("textarea"!==n||""!==l)&&yt(t,l):"number"===typeof l&&yt(t,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(u.hasOwnProperty(a)?null!=l&&"onScroll"===a&&Pr("scroll",t):null!=l&&w(t,a,l,c))}switch(n){case"input":$(t),rt(t,r,!1);break;case"textarea":$(t),ht(t);break;case"option":null!=r.value&&t.setAttribute("value",""+q(r.value));break;case"select":t.multiple=!!r.multiple,null!=(a=r.value)?st(t,!!r.multiple,a,!1):null!=r.defaultValue&&st(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(t.onclick=Ur)}Gr(n,r)&&(e.flags|=4)}null!==e.ref&&(e.flags|=128)}return null;case 6:if(t&&null!=e.stateNode)$s(0,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(s(166));n=Mo(Ro.current),Mo(Po.current),Ho(e)?(r=e.stateNode,n=e.memoizedProps,r[Qr]=e,r.nodeValue!==n&&(e.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Qr]=e,e.stateNode=r)}return null;case 13:return hi(jo),r=e.memoizedState,0!==(64&e.flags)?(e.lanes=n,e):(r=null!==r,n=!1,null===t?void 0!==e.memoizedProps.fallback&&Ho(e):n=null!==t.memoizedState,r&&!n&&0!==(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&jo.current)?0===ja&&(ja=3):(0!==ja&&3!==ja||(ja=4),null===Ma||0===(134217727&Va)&&0===(134217727&za)||yu(Ma,La))),(r||n)&&(e.flags|=4),null);case 4:return Lo(),null===t&&Rr(e.stateNode.containerInfo),null;case 10:return ro(e),null;case 19:if(hi(jo),null===(r=e.memoizedState))return null;if(a=0!==(64&e.flags),null===(c=r.rendering))if(a)sa(r,!1);else{if(0!==ja||null!==t&&0!==(64&t.flags))for(t=e.child;null!==t;){if(null!==(c=Bo(t))){for(e.flags|=64,sa(r,!1),null!==(a=c.updateQueue)&&(e.updateQueue=a,e.flags|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=n,n=e.child;null!==n;)t=r,(a=n).flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,null===(c=a.alternate)?(a.childLanes=0,a.lanes=t,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,t=c.dependencies,a.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return li(jo,1&jo.current|2),e.child}t=t.sibling}null!==r.tail&&Gi()>Xa&&(e.flags|=64,a=!0,sa(r,!1),e.lanes=33554432)}else{if(!a)if(null!==(t=Bo(c))){if(e.flags|=64,a=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),sa(r,!0),null===r.tail&&"hidden"===r.tailMode&&!c.alternate&&!zo)return null!==(e=e.lastEffect=r.lastEffect)&&(e.nextEffect=null),null}else 2*Gi()-r.renderingStartTime>Xa&&1073741824!==n&&(e.flags|=64,a=!0,sa(r,!1),e.lanes=33554432);r.isBackwards?(c.sibling=e.child,e.child=c):(null!==(n=r.last)?n.sibling=c:e.child=c,r.last=c)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=Gi(),n.sibling=null,e=jo.current,li(jo,a?1&e|2:1&e),n):null;case 23:case 24:return Tu(),null!==t&&null!==t.memoizedState!==(null!==e.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(e.flags|=4),null}throw Error(s(156,e.tag))}function ua(t){switch(t.tag){case 1:mi(t.type)&&yi();var e=t.flags;return 4096&e?(t.flags=-4097&e|64,t):null;case 3:if(Lo(),hi(pi),hi(di),$o(),0!==(64&(e=t.flags)))throw Error(s(285));return t.flags=-4097&e|64,t;case 5:return Fo(t),null;case 13:return hi(jo),4096&(e=t.flags)?(t.flags=-4097&e|64,t):null;case 19:return hi(jo),null;case 4:return Lo(),null;case 10:return ro(t),null;case 23:case 24:return Tu(),null;default:return null}}function ca(t,e){try{var n="",r=e;do{n+=X(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i}}function ha(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}qs=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ks=function(t,e,n,r){var o=t.memoizedProps;if(o!==r){t=e.stateNode,Mo(Po.current);var s,a=null;switch(n){case"input":o=Z(t,o),r=Z(t,r),a=[];break;case"option":o=ot(t,o),r=ot(t,r),a=[];break;case"select":o=i({},o,{value:void 0}),r=i({},r,{value:void 0}),a=[];break;case"textarea":o=at(t,o),r=at(t,r),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(t.onclick=Ur)}for(l in Et(n,r),n=null,o)if(!r.hasOwnProperty(l)&&o.hasOwnProperty(l)&&null!=o[l])if("style"===l){var c=o[l];for(s in c)c.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var h=r[l];if(c=null!=o?o[l]:void 0,r.hasOwnProperty(l)&&h!==c&&(null!=h||null!=c))if("style"===l)if(c){for(s in c)!c.hasOwnProperty(s)||h&&h.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in h)h.hasOwnProperty(s)&&c[s]!==h[s]&&(n||(n={}),n[s]=h[s])}else n||(a||(a=[]),a.push(l,n)),n=h;else"dangerouslySetInnerHTML"===l?(h=h?h.__html:void 0,c=c?c.__html:void 0,null!=h&&c!==h&&(a=a||[]).push(l,h)):"children"===l?"string"!==typeof h&&"number"!==typeof h||(a=a||[]).push(l,""+h):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=h&&"onScroll"===l&&Pr("scroll",t),a||c===h||(a=[])):"object"===typeof h&&null!==h&&h.$$typeof===L?h.toString():(a=a||[]).push(l,h))}n&&(a=a||[]).push("style",n);var l=a;(e.updateQueue=l)&&(e.flags|=4)}},$s=function(t,e,n,r){n!==r&&(e.flags|=4)};var la="function"===typeof WeakMap?WeakMap:Map;function fa(t,e,n){(n=ho(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$a||($a=!0,Ja=r),ha(0,e)},n}function da(t,e,n){(n=ho(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return ha(0,e),r(i)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Qa?Qa=new Set([this]):Qa.add(this),ha(0,e));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}var pa="function"===typeof WeakSet?WeakSet:Set;function va(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(n){Uu(t,n)}else e.current=null}function ga(t,e){switch(e.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&e.flags&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:Ji(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:return void(256&e.flags&&Hr(e.stateNode.containerInfo))}throw Error(s(163))}function ma(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{if(3===(3&t.tag)){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{var i=t;r=i.next,0!==(4&(i=i.tag))&&0!==(1&i)&&(Fu(n,t),Du(n,t)),t=r}while(t!==e)}return;case 1:return t=n.stateNode,4&n.flags&&(null===e?t.componentDidMount():(r=n.elementType===n.type?e.memoizedProps:Ji(n.type,e.memoizedProps),t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),void(null!==(e=n.updateQueue)&&vo(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:case 1:t=n.child.stateNode}vo(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.flags&&Gr(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&_e(n)))))}throw Error(s(163))}function ya(t,e){for(var n=t;;){if(5===n.tag){var r=n.stateNode;if(e)"function"===typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=void 0!==i&&null!==i&&i.hasOwnProperty("display")?i.display:null,r.style.display=xt("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=e?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===t)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function ba(t,e){if(Ei&&"function"===typeof Ei.onCommitFiberUnmount)try{Ei.onCommitFiberUnmount(Ti,e)}catch(o){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var n=t=t.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!==(4&r))Fu(e,n);else{r=e;try{i()}catch(o){Uu(r,o)}}n=n.next}while(n!==t)}break;case 1:if(va(e),"function"===typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(o){Uu(e,o)}break;case 5:va(e);break;case 4:Sa(t,e)}}function wa(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function xa(t){return 5===t.tag||3===t.tag||4===t.tag}function _a(t){t:{for(var e=t.return;null!==e;){if(xa(e))break t;e=e.return}throw Error(s(160))}var n=e;switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(s(161))}16&n.flags&&(yt(e,""),n.flags&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||xa(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break t}}r?Ta(t,n,e):Ea(t,n,e)}function Ta(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Ur));else if(4!==r&&null!==(t=t.child))for(Ta(t,e,n),t=t.sibling;null!==t;)Ta(t,e,n),t=t.sibling}function Ea(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(Ea(t,e,n),t=t.sibling;null!==t;)Ea(t,e,n),t=t.sibling}function Sa(t,e){for(var n,r,i=e,o=!1;;){if(!o){o=i.return;t:for(;;){if(null===o)throw Error(s(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break t;case 3:case 4:n=n.containerInfo,r=!0;break t}o=o.return}o=!0}if(5===i.tag||6===i.tag){t:for(var a=t,u=i,c=u;;)if(ba(a,c),null!==c.child&&4!==c.tag)c.child.return=c,c=c.child;else{if(c===u)break t;for(;null===c.sibling;){if(null===c.return||c.return===u)break t;c=c.return}c.sibling.return=c.return,c=c.sibling}r?(a=n,u=i.stateNode,8===a.nodeType?a.parentNode.removeChild(u):a.removeChild(u)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(ba(t,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function ka(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var n=e.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3===(3&r.tag)&&(t=r.destroy,r.destroy=void 0,void 0!==t&&t()),r=r.next}while(r!==n)}return;case 1:case 12:case 17:return;case 5:if(null!=(n=e.stateNode)){r=e.memoizedProps;var i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[Zr]=r,"input"===t&&"radio"===r.type&&null!=r.name&&et(n,r),St(t,i),e=St(t,r),i=0;i<o.length;i+=2){var a=o[i],u=o[i+1];"style"===a?_t(n,u):"dangerouslySetInnerHTML"===a?mt(n,u):"children"===a?yt(n,u):w(n,a,u,e)}switch(t){case"input":nt(n,r);break;case"textarea":ct(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?st(n,!!r.multiple,o,!1):t!==!!r.multiple&&(null!=r.defaultValue?st(n,!!r.multiple,r.defaultValue,!0):st(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(s(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((n=e.stateNode).hydrate&&(n.hydrate=!1,_e(n.containerInfo)));case 13:return null!==e.memoizedState&&(Wa=Gi(),ya(e.child,!0)),void Aa(e);case 19:return void Aa(e);case 23:case 24:return void ya(e,null!==e.memoizedState)}throw Error(s(163))}function Aa(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new pa),e.forEach((function(e){var r=zu.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function Oa(t,e){return null!==t&&(null===(t=t.memoizedState)||null!==t.dehydrated)&&(null!==(e=e.memoizedState)&&null===e.dehydrated)}var Ca=Math.ceil,Pa=x.ReactCurrentDispatcher,Ia=x.ReactCurrentOwner,Ra=0,Ma=null,Na=null,La=0,Da=0,Fa=ci(0),ja=0,Ba=null,Ua=0,Va=0,za=0,Ga=0,Ya=null,Wa=0,Xa=1/0;function Ha(){Xa=Gi()+500}var qa,Ka=null,$a=!1,Ja=null,Qa=null,Za=!1,tu=null,eu=90,nu=[],ru=[],iu=null,ou=0,su=null,au=-1,uu=0,cu=0,hu=null,lu=!1;function fu(){return 0!==(48&Ra)?Gi():-1!==au?au:au=Gi()}function du(t){if(0===(2&(t=t.mode)))return 1;if(0===(4&t))return 99===Yi()?1:2;if(0===uu&&(uu=Ua),0!==$i.transition){0!==cu&&(cu=null!==Ya?Ya.pendingLanes:0),t=uu;var e=4186112&~cu;return 0===(e&=-e)&&(0===(e=(t=4186112&~t)&-t)&&(e=8192)),e}return t=Yi(),0!==(4&Ra)&&98===t?t=Ue(12,uu):t=Ue(t=function(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(t),uu),t}function pu(t,e,n){if(50<ou)throw ou=0,su=null,Error(s(185));if(null===(t=vu(t,e)))return null;Ge(t,e,n),t===Ma&&(za|=e,4===ja&&yu(t,La));var r=Yi();1===e?0!==(8&Ra)&&0===(48&Ra)?bu(t):(gu(t,n),0===Ra&&(Ha(),qi())):(0===(4&Ra)||98!==r&&99!==r||(null===iu?iu=new Set([t]):iu.add(t)),gu(t,n)),Ya=t}function vu(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}function gu(t,e){for(var n=t.callbackNode,r=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,a=t.pendingLanes;0<a;){var u=31-Ye(a),c=1<<u,h=o[u];if(-1===h){if(0===(c&r)||0!==(c&i)){h=e,Fe(c);var l=De;o[u]=10<=l?h+250:6<=l?h+5e3:-1}}else h<=e&&(t.expiredLanes|=c);a&=~c}if(r=je(t,t===Ma?La:0),e=De,0===r)null!==n&&(n!==Fi&&Ai(n),t.callbackNode=null,t.callbackPriority=0);else{if(null!==n){if(t.callbackPriority===e)return;n!==Fi&&Ai(n)}15===e?(n=bu.bind(null,t),null===Bi?(Bi=[n],Ui=ki(Ri,Ki)):Bi.push(n),n=Fi):14===e?n=Hi(99,bu.bind(null,t)):(n=function(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(s(358,t))}}(e),n=Hi(n,mu.bind(null,t))),t.callbackPriority=e,t.callbackNode=n}}function mu(t){if(au=-1,cu=uu=0,0!==(48&Ra))throw Error(s(327));var e=t.callbackNode;if(Lu()&&t.callbackNode!==e)return null;var n=je(t,t===Ma?La:0);if(0===n)return null;var r=n,i=Ra;Ra|=16;var o=ku();for(Ma===t&&La===r||(Ha(),Eu(t,r));;)try{Cu();break}catch(u){Su(t,u)}if(no(),Pa.current=o,Ra=i,null!==Na?r=0:(Ma=null,La=0,r=ja),0!==(Ua&za))Eu(t,0);else if(0!==r){if(2===r&&(Ra|=64,t.hydrate&&(t.hydrate=!1,Hr(t.containerInfo)),0!==(n=Be(t))&&(r=Au(t,n))),1===r)throw e=Ba,Eu(t,0),yu(t,n),gu(t,Gi()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,r){case 0:case 1:throw Error(s(345));case 2:case 5:Ru(t);break;case 3:if(yu(t,n),(62914560&n)===n&&10<(r=Wa+500-Gi())){if(0!==je(t,0))break;if(((i=t.suspendedLanes)&n)!==n){fu(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Wr(Ru.bind(null,t),r);break}Ru(t);break;case 4:if(yu(t,n),(4186112&n)===n)break;for(r=t.eventTimes,i=-1;0<n;){var a=31-Ye(n);o=1<<a,(a=r[a])>i&&(i=a),n&=~o}if(n=i,10<(n=(120>(n=Gi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ca(n/1960))-n)){t.timeoutHandle=Wr(Ru.bind(null,t),n);break}Ru(t);break;default:throw Error(s(329))}}return gu(t,Gi()),t.callbackNode===e?mu.bind(null,t):null}function yu(t,e){for(e&=~Ga,e&=~za,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ye(e),r=1<<n;t[n]=-1,e&=~r}}function bu(t){if(0!==(48&Ra))throw Error(s(327));if(Lu(),t===Ma&&0!==(t.expiredLanes&La)){var e=La,n=Au(t,e);0!==(Ua&za)&&(n=Au(t,e=je(t,e)))}else n=Au(t,e=je(t,0));if(0!==t.tag&&2===n&&(Ra|=64,t.hydrate&&(t.hydrate=!1,Hr(t.containerInfo)),0!==(e=Be(t))&&(n=Au(t,e))),1===n)throw n=Ba,Eu(t,0),yu(t,e),gu(t,Gi()),n;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ru(t),gu(t,Gi()),null}function wu(t,e){var n=Ra;Ra|=1;try{return t(e)}finally{0===(Ra=n)&&(Ha(),qi())}}function xu(t,e){var n=Ra;Ra&=-2,Ra|=8;try{return t(e)}finally{0===(Ra=n)&&(Ha(),qi())}}function _u(t,e){li(Fa,Da),Da|=e,Ua|=e}function Tu(){Da=Fa.current,hi(Fa)}function Eu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,Xr(n)),null!==Na)for(n=Na.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&yi();break;case 3:Lo(),hi(pi),hi(di),$o();break;case 5:Fo(r);break;case 4:Lo();break;case 13:case 19:hi(jo);break;case 10:ro(r);break;case 23:case 24:Tu()}n=n.return}Ma=t,Na=Xu(t.current,null),La=Da=Ua=e,ja=0,Ba=null,Ga=za=Va=0}function Su(t,e){for(;;){var n=Na;try{if(no(),Jo.current=Rs,rs){for(var r=ts.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}rs=!1}if(Zo=0,ns=es=ts=null,is=!1,Ia.current=null,null===n||null===n.return){ja=1,Ba=e,Na=null;break}t:{var o=t,s=n.return,a=n,u=e;if(e=La,a.flags|=2048,a.firstEffect=a.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u;if(0===(2&a.mode)){var h=a.alternate;h?(a.updateQueue=h.updateQueue,a.memoizedState=h.memoizedState,a.lanes=h.lanes):(a.updateQueue=null,a.memoizedState=null)}var l=0!==(1&jo.current),f=s;do{var d;if(d=13===f.tag){var p=f.memoizedState;if(null!==p)d=null!==p.dehydrated;else{var v=f.memoizedProps;d=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!l)}}if(d){var g=f.updateQueue;if(null===g){var m=new Set;m.add(c),f.updateQueue=m}else g.add(c);if(0===(2&f.mode)){if(f.flags|=64,a.flags|=16384,a.flags&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var y=ho(-1,1);y.tag=2,lo(a,y)}a.lanes|=1;break t}u=void 0,a=e;var b=o.pingCache;if(null===b?(b=o.pingCache=new la,u=new Set,b.set(c,u)):void 0===(u=b.get(c))&&(u=new Set,b.set(c,u)),!u.has(a)){u.add(a);var w=Vu.bind(null,o,c,a);c.then(w,w)}f.flags|=4096,f.lanes=e;break t}f=f.return}while(null!==f);u=Error((H(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==ja&&(ja=2),u=ca(u,a),f=s;do{switch(f.tag){case 3:o=u,f.flags|=4096,e&=-e,f.lanes|=e,fo(f,fa(0,o,e));break t;case 1:o=u;var x=f.type,_=f.stateNode;if(0===(64&f.flags)&&("function"===typeof x.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Qa||!Qa.has(_)))){f.flags|=4096,e&=-e,f.lanes|=e,fo(f,da(f,o,e));break t}}f=f.return}while(null!==f)}Iu(n)}catch(T){e=T,Na===n&&null!==n&&(Na=n=n.return);continue}break}}function ku(){var t=Pa.current;return Pa.current=Rs,null===t?Rs:t}function Au(t,e){var n=Ra;Ra|=16;var r=ku();for(Ma===t&&La===e||Eu(t,e);;)try{Ou();break}catch(i){Su(t,i)}if(no(),Ra=n,Pa.current=r,null!==Na)throw Error(s(261));return Ma=null,La=0,ja}function Ou(){for(;null!==Na;)Pu(Na)}function Cu(){for(;null!==Na&&!Oi();)Pu(Na)}function Pu(t){var e=qa(t.alternate,t,Da);t.memoizedProps=t.pendingProps,null===e?Iu(t):Na=e,Ia.current=null}function Iu(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(2048&e.flags)){if(null!==(n=aa(n,e,Da)))return void(Na=n);if(24!==(n=e).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Da)||0===(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==t&&0===(2048&t.flags)&&(null===t.firstEffect&&(t.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(null!==t.lastEffect?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(null!==(n=ua(e)))return n.flags&=2047,void(Na=n);null!==t&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(null!==(e=e.sibling))return void(Na=e);Na=e=t}while(null!==e);0===ja&&(ja=5)}function Ru(t){var e=Yi();return Xi(99,Mu.bind(null,t,e)),null}function Mu(t,e){do{Lu()}while(null!==tu);if(0!==(48&Ra))throw Error(s(327));var n=t.finishedWork;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(s(177));t.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;for(var a=t.eventTimes,u=t.expirationTimes;0<o;){var c=31-Ye(o),h=1<<c;i[c]=0,a[c]=-1,u[c]=-1,o&=~h}if(null!==iu&&0===(24&r)&&iu.has(t)&&iu.delete(t),t===Ma&&(Na=Ma=null,La=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=Ra,Ra|=32,Ia.current=null,Vr=Ke,mr(a=gr())){if("selectionStart"in a)u={start:a.selectionStart,end:a.selectionEnd};else t:if(u=(u=a.ownerDocument)&&u.defaultView||window,(h=u.getSelection&&u.getSelection())&&0!==h.rangeCount){u=h.anchorNode,o=h.anchorOffset,c=h.focusNode,h=h.focusOffset;try{u.nodeType,c.nodeType}catch(k){u=null;break t}var l=0,f=-1,d=-1,p=0,v=0,g=a,m=null;e:for(;;){for(var y;g!==u||0!==o&&3!==g.nodeType||(f=l+o),g!==c||0!==h&&3!==g.nodeType||(d=l+h),3===g.nodeType&&(l+=g.nodeValue.length),null!==(y=g.firstChild);)m=g,g=y;for(;;){if(g===a)break e;if(m===u&&++p===o&&(f=l),m===c&&++v===h&&(d=l),null!==(y=g.nextSibling))break;m=(g=m).parentNode}g=y}u=-1===f||-1===d?null:{start:f,end:d}}else u=null;u=u||{start:0,end:0}}else u=null;zr={focusedElem:a,selectionRange:u},Ke=!1,hu=null,lu=!1,Ka=r;do{try{Nu()}catch(k){if(null===Ka)throw Error(s(330));Uu(Ka,k),Ka=Ka.nextEffect}}while(null!==Ka);hu=null,Ka=r;do{try{for(a=t;null!==Ka;){var b=Ka.flags;if(16&b&&yt(Ka.stateNode,""),128&b){var w=Ka.alternate;if(null!==w){var x=w.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(1038&b){case 2:_a(Ka),Ka.flags&=-3;break;case 6:_a(Ka),Ka.flags&=-3,ka(Ka.alternate,Ka);break;case 1024:Ka.flags&=-1025;break;case 1028:Ka.flags&=-1025,ka(Ka.alternate,Ka);break;case 4:ka(Ka.alternate,Ka);break;case 8:Sa(a,u=Ka);var _=u.alternate;wa(u),null!==_&&wa(_)}Ka=Ka.nextEffect}}catch(k){if(null===Ka)throw Error(s(330));Uu(Ka,k),Ka=Ka.nextEffect}}while(null!==Ka);if(x=zr,w=gr(),b=x.focusedElem,a=x.selectionRange,w!==b&&b&&b.ownerDocument&&vr(b.ownerDocument.documentElement,b)){null!==a&&mr(b)&&(w=a.start,void 0===(x=a.end)&&(x=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(x,b.value.length)):(x=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(x=x.getSelection(),u=b.textContent.length,_=Math.min(a.start,u),a=void 0===a.end?_:Math.min(a.end,u),!x.extend&&_>a&&(u=a,a=_,_=u),u=pr(b,_),o=pr(b,a),u&&o&&(1!==x.rangeCount||x.anchorNode!==u.node||x.anchorOffset!==u.offset||x.focusNode!==o.node||x.focusOffset!==o.offset)&&((w=w.createRange()).setStart(u.node,u.offset),x.removeAllRanges(),_>a?(x.addRange(w),x.extend(o.node,o.offset)):(w.setEnd(o.node,o.offset),x.addRange(w))))),w=[];for(x=b;x=x.parentNode;)1===x.nodeType&&w.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<w.length;b++)(x=w[b]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Ke=!!Vr,zr=Vr=null,t.current=n,Ka=r;do{try{for(b=t;null!==Ka;){var T=Ka.flags;if(36&T&&ma(b,Ka.alternate,Ka),128&T){w=void 0;var E=Ka.ref;if(null!==E){var S=Ka.stateNode;Ka.tag,w=S,"function"===typeof E?E(w):E.current=w}}Ka=Ka.nextEffect}}catch(k){if(null===Ka)throw Error(s(330));Uu(Ka,k),Ka=Ka.nextEffect}}while(null!==Ka);Ka=null,ji(),Ra=i}else t.current=n;if(Za)Za=!1,tu=t,eu=e;else for(Ka=r;null!==Ka;)e=Ka.nextEffect,Ka.nextEffect=null,8&Ka.flags&&((T=Ka).sibling=null,T.stateNode=null),Ka=e;if(0===(r=t.pendingLanes)&&(Qa=null),1===r?t===su?ou++:(ou=0,su=t):ou=0,n=n.stateNode,Ei&&"function"===typeof Ei.onCommitFiberRoot)try{Ei.onCommitFiberRoot(Ti,n,void 0,64===(64&n.current.flags))}catch(k){}if(gu(t,Gi()),$a)throw $a=!1,t=Ja,Ja=null,t;return 0!==(8&Ra)||qi(),null}function Nu(){for(;null!==Ka;){var t=Ka.alternate;lu||null===hu||(0!==(8&Ka.flags)?te(Ka,hu)&&(lu=!0):13===Ka.tag&&Oa(t,Ka)&&te(Ka,hu)&&(lu=!0));var e=Ka.flags;0!==(256&e)&&ga(t,Ka),0===(512&e)||Za||(Za=!0,Hi(97,(function(){return Lu(),null}))),Ka=Ka.nextEffect}}function Lu(){if(90!==eu){var t=97<eu?97:eu;return eu=90,Xi(t,ju)}return!1}function Du(t,e){nu.push(e,t),Za||(Za=!0,Hi(97,(function(){return Lu(),null})))}function Fu(t,e){ru.push(e,t),Za||(Za=!0,Hi(97,(function(){return Lu(),null})))}function ju(){if(null===tu)return!1;var t=tu;if(tu=null,0!==(48&Ra))throw Error(s(331));var e=Ra;Ra|=32;var n=ru;ru=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"===typeof a)try{a()}catch(c){if(null===o)throw Error(s(330));Uu(o,c)}}for(n=nu,nu=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var u=i.create;i.destroy=u()}catch(c){if(null===o)throw Error(s(330));Uu(o,c)}}for(u=t.current.firstEffect;null!==u;)t=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=t;return Ra=e,qi(),!0}function Bu(t,e,n){lo(t,e=fa(0,e=ca(n,e),1)),e=fu(),null!==(t=vu(t,1))&&(Ge(t,1,e),gu(t,e))}function Uu(t,e){if(3===t.tag)Bu(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){Bu(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Qa||!Qa.has(r))){var i=da(n,t=ca(e,t),1);if(lo(n,i),i=fu(),null!==(n=vu(n,1)))Ge(n,1,i),gu(n,i);else if("function"===typeof r.componentDidCatch&&(null===Qa||!Qa.has(r)))try{r.componentDidCatch(e,t)}catch(o){}break}}n=n.return}}function Vu(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=fu(),t.pingedLanes|=t.suspendedLanes&n,Ma===t&&(La&n)===n&&(4===ja||3===ja&&(62914560&La)===La&&500>Gi()-Wa?Eu(t,0):Ga|=n),gu(t,e)}function zu(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(0===(2&(e=t.mode))?e=1:0===(4&e)?e=99===Yi()?1:2:(0===uu&&(uu=Ua),0===(e=Ve(62914560&~uu))&&(e=4194304))),n=fu(),null!==(t=vu(t,e))&&(Ge(t,e,n),gu(t,n))}function Gu(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Yu(t,e,n,r){return new Gu(t,e,n,r)}function Wu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Xu(t,e){var n=t.alternate;return null===n?((n=Yu(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Hu(t,e,n,r,i,o){var a=2;if(r=t,"function"===typeof t)Wu(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case E:return qu(n.children,i,o,e);case D:a=8,i|=16;break;case S:a=8,i|=1;break;case k:return(t=Yu(12,n,e,8|i)).elementType=k,t.type=k,t.lanes=o,t;case P:return(t=Yu(13,n,e,i)).type=P,t.elementType=P,t.lanes=o,t;case I:return(t=Yu(19,n,e,i)).elementType=I,t.lanes=o,t;case F:return Ku(n,i,o,e);case j:return(t=Yu(24,n,e,i)).elementType=j,t.lanes=o,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case A:a=10;break t;case O:a=9;break t;case C:a=11;break t;case R:a=14;break t;case M:a=16,r=null;break t;case N:a=22;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=Yu(a,n,e,i)).elementType=t,e.type=r,e.lanes=o,e}function qu(t,e,n,r){return(t=Yu(7,t,r,e)).lanes=n,t}function Ku(t,e,n,r){return(t=Yu(23,t,r,e)).elementType=F,t.lanes=n,t}function $u(t,e,n){return(t=Yu(6,t,null,e)).lanes=n,t}function Ju(t,e,n){return(e=Yu(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Qu(t,e,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=ze(0),this.expirationTimes=ze(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ze(0),this.mutableSourceEagerHydrationData=null}function Zu(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:T,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function tc(t,e,n,r){var i=e.current,o=fu(),a=du(i);t:if(n){e:{if($t(n=n._reactInternals)!==n||1!==n.tag)throw Error(s(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(mi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);throw Error(s(171))}if(1===n.tag){var c=n.type;if(mi(c)){n=wi(n,c,u);break t}}n=u}else n=fi;return null===e.context?e.context=n:e.pendingContext=n,(e=ho(o,a)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),lo(i,e),pu(i,a,o),a}function ec(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function nc(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function rc(t,e){nc(t,e),(t=t.alternate)&&nc(t,e)}function ic(t,e,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Qu(t,e,null!=n&&!0===n.hydrate),e=Yu(3,null,null,2===e?7:1===e?3:0),n.current=e,e.stateNode=n,uo(e),t[ti]=n.current,Rr(8===t.nodeType?t.parentNode:t),r)for(t=0;t<r.length;t++){var i=(e=r[t])._getVersion;i=i(e._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[e,i]:n.mutableSourceEagerHydrationData.push(e,i)}this._internalRoot=n}function oc(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function sc(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o._internalRoot;if("function"===typeof i){var a=i;i=function(){var t=ec(s);a.call(t)}}tc(e,s,t,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new ic(t,0,e?{hydrate:!0}:void 0)}(n,r),s=o._internalRoot,"function"===typeof i){var u=i;i=function(){var t=ec(s);u.call(t)}}xu((function(){tc(e,s,t,i)}))}return ec(s)}function ac(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!oc(e))throw Error(s(200));return Zu(t,e,null,n)}qa=function(t,e,n){var r=e.lanes;if(null!==t)if(t.memoizedProps!==e.pendingProps||pi.current)Fs=!0;else{if(0===(n&r)){switch(Fs=!1,e.tag){case 3:Hs(e),qo();break;case 5:Do(e);break;case 1:mi(e.type)&&xi(e);break;case 4:No(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value;var i=e.type._context;li(Qi,i._currentValue),i._currentValue=r;break;case 13:if(null!==e.memoizedState)return 0!==(n&e.child.childLanes)?Qs(t,e,n):(li(jo,1&jo.current),null!==(e=oa(t,e,n))?e.sibling:null);li(jo,1&jo.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(64&t.flags)){if(r)return ia(t,e,n);e.flags|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),li(jo,jo.current),r)break;return null;case 23:case 24:return e.lanes=0,zs(t,e,n)}return oa(t,e,n)}Fs=0!==(16384&t.flags)}else Fs=!1;switch(e.lanes=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=gi(e,di.current),oo(e,n),i=as(null,e,r,t,i,n),e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,mi(r)){var o=!0;xi(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,uo(e);var a=r.getDerivedStateFromProps;"function"===typeof a&&mo(e,r,a,t),i.updater=yo,e.stateNode=i,i._reactInternals=e,_o(e,r,t,n),e=Xs(null,e,r,!0,o,n)}else e.tag=0,js(null,e,i,n),e=e.child;return e;case 16:i=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,i=(o=i._init)(i._payload),e.type=i,o=e.tag=function(t){if("function"===typeof t)return Wu(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===C)return 11;if(t===R)return 14}return 2}(i),t=Ji(i,t),o){case 0:e=Ys(null,e,i,t,n);break t;case 1:e=Ws(null,e,i,t,n);break t;case 11:e=Bs(null,e,i,t,n);break t;case 14:e=Us(null,e,i,Ji(i.type,t),r,n);break t}throw Error(s(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,Ys(t,e,r,i=e.elementType===r?i:Ji(r,i),n);case 1:return r=e.type,i=e.pendingProps,Ws(t,e,r,i=e.elementType===r?i:Ji(r,i),n);case 3:if(Hs(e),r=e.updateQueue,null===t||null===r)throw Error(s(282));if(r=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,co(t,e),po(e,r,null,n),(r=e.memoizedState.element)===i)qo(),e=oa(t,e,n);else{if((o=(i=e.stateNode).hydrate)&&(Vo=qr(e.stateNode.containerInfo.firstChild),Uo=e,o=zo=!0),o){if(null!=(t=i.mutableSourceEagerHydrationData))for(i=0;i<t.length;i+=2)(o=t[i])._workInProgressVersionPrimary=t[i+1],Ko.push(o);for(n=Oo(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else js(t,e,r,n),qo();e=e.child}return e;case 5:return Do(e),null===t&&Wo(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,a=i.children,Yr(r,i)?a=null:null!==o&&Yr(r,o)&&(e.flags|=16),Gs(t,e),js(t,e,a,n),e.child;case 6:return null===t&&Wo(e),null;case 13:return Qs(t,e,n);case 4:return No(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=Ao(e,null,r,n):js(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Bs(t,e,r,i=e.elementType===r?i:Ji(r,i),n);case 7:return js(t,e,e.pendingProps,n),e.child;case 8:case 12:return js(t,e,e.pendingProps.children,n),e.child;case 10:t:{r=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value;var u=e.type._context;if(li(Qi,u._currentValue),u._currentValue=o,null!==a)if(u=a.value,0===(o=hr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(a.children===i.children&&!pi.current){e=oa(t,e,n);break t}}else for(null!==(u=e.child)&&(u.return=e);null!==u;){var c=u.dependencies;if(null!==c){a=u.child;for(var h=c.firstContext;null!==h;){if(h.context===r&&0!==(h.observedBits&o)){1===u.tag&&((h=ho(-1,n&-n)).tag=2,lo(u,h)),u.lanes|=n,null!==(h=u.alternate)&&(h.lanes|=n),io(u.return,n),c.lanes|=n;break}h=h.next}}else a=10===u.tag&&u.type===e.type?null:u.child;if(null!==a)a.return=u;else for(a=u;null!==a;){if(a===e){a=null;break}if(null!==(u=a.sibling)){u.return=a.return,a=u;break}a=a.return}u=a}js(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,oo(e,n),r=r(i=so(i,o.unstable_observedBits)),e.flags|=1,js(t,e,r,n),e.child;case 14:return o=Ji(i=e.type,e.pendingProps),Us(t,e,i,o=Ji(i.type,o),r,n);case 15:return Vs(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ji(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,mi(r)?(t=!0,xi(e)):t=!1,oo(e,n),wo(e,r,i),_o(e,r,i,n),Xs(null,e,r,!0,t,n);case 19:return ia(t,e,n);case 23:case 24:return zs(t,e,n)}throw Error(s(156,e.tag))},ic.prototype.render=function(t){tc(t,this._internalRoot,null,null)},ic.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;tc(null,t,null,(function(){e[ti]=null}))},ee=function(t){13===t.tag&&(pu(t,4,fu()),rc(t,4))},ne=function(t){13===t.tag&&(pu(t,67108864,fu()),rc(t,67108864))},re=function(t){if(13===t.tag){var e=fu(),n=du(t);pu(t,n,e),rc(t,n)}},ie=function(t,e){return e()},At=function(t,e,n){switch(e){case"input":if(nt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=oi(r);if(!i)throw Error(s(90));J(r),nt(r,i)}}}break;case"textarea":ct(t,n);break;case"select":null!=(e=n.value)&&st(t,!!n.multiple,e,!1)}},Mt=wu,Nt=function(t,e,n,r,i){var o=Ra;Ra|=4;try{return Xi(98,t.bind(null,e,n,r,i))}finally{0===(Ra=o)&&(Ha(),qi())}},Lt=function(){0===(49&Ra)&&(function(){if(null!==iu){var t=iu;iu=null,t.forEach((function(t){t.expiredLanes|=24&t.pendingLanes,gu(t,Gi())}))}qi()}(),Lu())},Dt=function(t,e){var n=Ra;Ra|=2;try{return t(e)}finally{0===(Ra=n)&&(Ha(),qi())}};var uc={Events:[ri,ii,oi,It,Rt,Lu,{current:!1}]},cc={findFiberByHostInstance:ni,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},hc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Zt(t))?null:t.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var lc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!lc.isDisabled&&lc.supportsFiber)try{Ti=lc.inject(hc),Ei=lc}catch(gt){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uc,e.createPortal=ac,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(s(188));throw Error(s(268,Object.keys(t)))}return t=null===(t=Zt(e))?null:t.stateNode},e.flushSync=function(t,e){var n=Ra;if(0!==(48&n))return t(e);Ra|=1;try{if(t)return Xi(99,t.bind(null,e))}finally{Ra=n,qi()}},e.hydrate=function(t,e,n){if(!oc(e))throw Error(s(200));return sc(null,t,e,!0,n)},e.render=function(t,e,n){if(!oc(e))throw Error(s(200));return sc(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!oc(t))throw Error(s(40));return!!t._reactRootContainer&&(xu((function(){sc(null,null,t,!1,(function(){t._reactRootContainer=null,t[ti]=null}))})),!0)},e.unstable_batchedUpdates=wu,e.unstable_createPortal=function(t,e){return ac(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!oc(n))throw Error(s(200));if(null==t||void 0===t._reactInternals)throw Error(s(38));return sc(t,e,n,!1,r)},e.version="17.0.2"},function(t,e,n){"use strict";t.exports=n(122)},function(t,e,n){"use strict";var r,i,o,s;if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var u=Date,c=u.now();e.unstable_now=function(){return u.now()-c}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var h=null,l=null,f=function t(){if(null!==h)try{var n=e.unstable_now();h(!0,n),h=null}catch(r){throw setTimeout(t,0),r}};r=function(t){null!==h?setTimeout(r,0,t):(h=t,setTimeout(f,0))},i=function(t,e){l=setTimeout(t,e)},o=function(){clearTimeout(l)},e.unstable_shouldYield=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var d=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var g=!1,m=null,y=-1,b=5,w=0;e.unstable_shouldYield=function(){return e.unstable_now()>=w},s=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<t?Math.floor(1e3/t):5};var x=new MessageChannel,_=x.port2;x.port1.onmessage=function(){if(null!==m){var t=e.unstable_now();w=t+b;try{m(!0,t)?_.postMessage(null):(g=!1,m=null)}catch(n){throw _.postMessage(null),n}}else g=!1},r=function(t){m=t,g||(g=!0,_.postMessage(null))},i=function(t,n){y=d((function(){t(e.unstable_now())}),n)},o=function(){p(y),y=-1}}function T(t,e){var n=t.length;t.push(e);t:for(;;){var r=n-1>>>1,i=t[r];if(!(void 0!==i&&0<k(i,e)))break t;t[r]=e,t[n]=i,n=r}}function E(t){return void 0===(t=t[0])?null:t}function S(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length;r<i;){var o=2*(r+1)-1,s=t[o],a=o+1,u=t[a];if(void 0!==s&&0>k(s,n))void 0!==u&&0>k(u,s)?(t[r]=u,t[a]=n,r=a):(t[r]=s,t[o]=n,r=o);else{if(!(void 0!==u&&0>k(u,n)))break t;t[r]=u,t[a]=n,r=a}}}return e}return null}function k(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var A=[],O=[],C=1,P=null,I=3,R=!1,M=!1,N=!1;function L(t){for(var e=E(O);null!==e;){if(null===e.callback)S(O);else{if(!(e.startTime<=t))break;S(O),e.sortIndex=e.expirationTime,T(A,e)}e=E(O)}}function D(t){if(N=!1,L(t),!M)if(null!==E(A))M=!0,r(F);else{var e=E(O);null!==e&&i(D,e.startTime-t)}}function F(t,n){M=!1,N&&(N=!1,o()),R=!0;var r=I;try{for(L(n),P=E(A);null!==P&&(!(P.expirationTime>n)||t&&!e.unstable_shouldYield());){var s=P.callback;if("function"===typeof s){P.callback=null,I=P.priorityLevel;var a=s(P.expirationTime<=n);n=e.unstable_now(),"function"===typeof a?P.callback=a:P===E(A)&&S(A),L(n)}else S(A);P=E(A)}if(null!==P)var u=!0;else{var c=E(O);null!==c&&i(D,c.startTime-n),u=!1}return u}finally{P=null,I=r,R=!1}}var j=s;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){M||R||(M=!0,r(F))},e.unstable_getCurrentPriorityLevel=function(){return I},e.unstable_getFirstCallbackNode=function(){return E(A)},e.unstable_next=function(t){switch(I){case 1:case 2:case 3:var e=3;break;default:e=I}var n=I;I=e;try{return t()}finally{I=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=j,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=I;I=t;try{return e()}finally{I=n}},e.unstable_scheduleCallback=function(t,n,s){var a=e.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,t){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return t={id:C++,callback:n,priorityLevel:t,startTime:s,expirationTime:u=s+u,sortIndex:-1},s>a?(t.sortIndex=s,T(O,t),null===E(A)&&t===E(O)&&(N?o():N=!0,i(D,s-a))):(t.sortIndex=u,T(A,t),M||R||(M=!0,r(F))),t},e.unstable_wrapCallback=function(t){var e=I;return function(){var n=I;I=e;try{return t.apply(this,arguments)}finally{I=n}}}},,function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"===typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",a=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(I){u=function(t,e,n){return t[e]=n}}function c(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,o=Object.create(i.prototype),s=new O(r||[]);return o._invoke=function(t,e,n){var r=l;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return P()}for(n.method=i,n.arg=o;;){var s=n.delegate;if(s){var a=S(s,n);if(a){if(a===v)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var u=h(t,e,n);if("normal"===u.type){if(r=n.done?p:f,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=p,n.method="throw",n.arg=u.arg)}}}(t,n,s),o}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(I){return{type:"throw",arg:I}}}t.wrap=c;var l="suspendedStart",f="suspendedYield",d="executing",p="completed",v={};function g(){}function m(){}function y(){}var b={};u(b,o,(function(){return this}));var w=Object.getPrototypeOf,x=w&&w(w(C([])));x&&x!==n&&r.call(x,o)&&(b=x);var _=y.prototype=g.prototype=Object.create(b);function T(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(i,o,s,a){var u=h(t[i],t,o);if("throw"!==u.type){var c=u.arg,l=c.value;return l&&"object"===typeof l&&r.call(l,"__await")?e.resolve(l.__await).then((function(t){n("next",t,s,a)}),(function(t){n("throw",t,s,a)})):e.resolve(l).then((function(t){c.value=t,s(c)}),(function(t){return n("throw",t,s,a)}))}a(u.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function S(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,S(t,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=h(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function C(t){if(t){var n=t[o];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var i=-1,s=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return s.next=s}}return{next:P}}function P(){return{value:e,done:!0}}return m.prototype=y,u(_,"constructor",y),u(y,"constructor",m),m.displayName=u(y,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,a,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},T(E.prototype),u(E.prototype,s,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var s=new E(c(e,n,r,i),o);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},T(_),u(_,a,"Generator"),u(_,o,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=C,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return a.type="throw",a.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var u=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),v}},t}(t.exports);try{regeneratorRuntime=r}catch(i){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},function(t,e){var n="undefined"!==typeof self?self:this,r=function(){function t(){this.fetch=!1,this.DOMException=n.DOMException}return t.prototype=n,new t}();!function(t){!function(e){var n="URLSearchParams"in t,r="Symbol"in t&&"iterator"in Symbol,i="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),o="FormData"in t,s="ArrayBuffer"in t;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};function c(t){if("string"!==typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function h(t){return"string"!==typeof t&&(t=String(t)),t}function l(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r&&(e[Symbol.iterator]=function(){return e}),e}function f(t){this.map={},t instanceof f?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function d(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function p(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function v(t){var e=new FileReader,n=p(e);return e.readAsArrayBuffer(t),n}function g(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"===typeof t?this._bodyText=t:i&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:o&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():s&&i&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=g(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(t)||u(t))?this._bodyArrayBuffer=g(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"===typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var t=d(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(v)}),this.text=function(){var t=d(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,n=p(e);return e.readAsText(t),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}f.prototype.append=function(t,e){t=c(t),e=h(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},f.prototype.delete=function(t){delete this.map[c(t)]},f.prototype.get=function(t){return t=c(t),this.has(t)?this.map[t]:null},f.prototype.has=function(t){return this.map.hasOwnProperty(c(t))},f.prototype.set=function(t,e){this.map[c(t)]=h(e)},f.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},f.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),l(t)},f.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),l(t)},f.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),l(t)},r&&(f.prototype[Symbol.iterator]=f.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function b(t,e){var n=(e=e||{}).body;if(t instanceof b){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new f(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new f(e.headers)),this.method=function(t){var e=t.toUpperCase();return y.indexOf(e)>-1?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function w(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}})),e}function x(t){var e=new f;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}})),e}function _(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new f(e.headers),this.url=e.url||"",this._initBody(t)}b.prototype.clone=function(){return new b(this,{body:this._bodyInit})},m.call(b.prototype),m.call(_.prototype),_.prototype.clone=function(){return new _(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new f(this.headers),url:this.url})},_.error=function(){var t=new _(null,{status:0,statusText:""});return t.type="error",t};var T=[301,302,303,307,308];_.redirect=function(t,e){if(-1===T.indexOf(e))throw new RangeError("Invalid status code");return new _(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(S){e.DOMException=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function E(t,n){return new Promise((function(r,o){var s=new b(t,n);if(s.signal&&s.signal.aborted)return o(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function u(){a.abort()}a.onload=function(){var t={status:a.status,statusText:a.statusText,headers:x(a.getAllResponseHeaders()||"")};t.url="responseURL"in a?a.responseURL:t.headers.get("X-Request-URL");var e="response"in a?a.response:a.responseText;r(new _(e,t))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.onabort=function(){o(new e.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&i&&(a.responseType="blob"),s.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),s.signal&&(s.signal.addEventListener("abort",u),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",u)}),a.send("undefined"===typeof s._bodyInit?null:s._bodyInit)}))}E.polyfill=!0,t.fetch||(t.fetch=E,t.Headers=f,t.Request=b,t.Response=_),e.Headers=f,e.Request=b,e.Response=_,e.fetch=E,Object.defineProperty(e,"__esModule",{value:!0})}({})}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var i=r;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e},function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(127),o=r(n(128)),s=function(t){return i.isExtractableFile(t)||null!==t&&"object"===typeof t&&"function"===typeof t.pipe};e.default=function(t,e,n){var r=i.extractFiles({query:t,variables:e,operationName:n},"",s),a=r.clone,u=r.files;if(0===u.size){if(!Array.isArray(t))return JSON.stringify(a);if("undefined"!==typeof e&&!Array.isArray(e))throw new Error("Cannot create request body with given variable type, array expected");var c=t.reduce((function(t,n,r){return t.push({query:n,variables:e?e[r]:void 0}),t}),[]);return JSON.stringify(c)}var h=new("undefined"===typeof FormData?o.default:FormData);h.append("operations",JSON.stringify(a));var l={},f=0;return u.forEach((function(t){l[++f]=t})),h.append("map",JSON.stringify(l)),f=0,u.forEach((function(t,e){h.append(""+ ++f,e)})),h}},function(t,e,n){"use strict";n.r(e);var r=n(85);n.d(e,"ReactNativeFile",(function(){return r}));var i=n(95);n.d(e,"extractFiles",(function(){return i}));var o=n(86);n.d(e,"isExtractableFile",(function(){return o}))},function(t,e){t.exports="object"==typeof self?self.FormData:window.FormData},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},,function(t,e){"function"===typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},function(t,e,n){"use strict";e.sha1=n(133),e.sha224=n(134),e.sha256=n(98),e.sha384=n(135),e.sha512=n(99)},function(t,e,n){"use strict";var r=n(46),i=n(65),o=n(97),s=r.rotl32,a=r.sum32,u=r.sum32_5,c=o.ft_1,h=i.BlockHash,l=[1518500249,1859775393,2400959708,3395469782];function f(){if(!(this instanceof f))return new f;h.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}r.inherits(f,h),t.exports=f,f.blockSize=512,f.outSize=160,f.hmacStrength=80,f.padLength=64,f.prototype._update=function(t,e){for(var n=this.W,r=0;r<16;r++)n[r]=t[e+r];for(;r<n.length;r++)n[r]=s(n[r-3]^n[r-8]^n[r-14]^n[r-16],1);var i=this.h[0],o=this.h[1],h=this.h[2],f=this.h[3],d=this.h[4];for(r=0;r<n.length;r++){var p=~~(r/20),v=u(s(i,5),c(p,o,h,f),d,n[r],l[p]);d=f,f=h,h=s(o,30),o=i,i=v}this.h[0]=a(this.h[0],i),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],h),this.h[3]=a(this.h[3],f),this.h[4]=a(this.h[4],d)},f.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},function(t,e,n){"use strict";var r=n(46),i=n(98);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}r.inherits(o,i),t.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")}},function(t,e,n){"use strict";var r=n(46),i=n(99);function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r.inherits(o,i),t.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")}},function(t,e,n){"use strict";var r=n(46),i=n(65),o=r.rotl32,s=r.sum32,a=r.sum32_3,u=r.sum32_4,c=i.BlockHash;function h(){if(!(this instanceof h))return new h;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function l(t,e,n,r){return t<=15?e^n^r:t<=31?e&n|~e&r:t<=47?(e|~n)^r:t<=63?e&r|n&~r:e^(n|~r)}function f(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function d(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}r.inherits(h,c),e.ripemd160=h,h.blockSize=512,h.outSize=160,h.hmacStrength=192,h.padLength=64,h.prototype._update=function(t,e){for(var n=this.h[0],r=this.h[1],i=this.h[2],c=this.h[3],h=this.h[4],y=n,b=r,w=i,x=c,_=h,T=0;T<80;T++){var E=s(o(u(n,l(T,r,i,c),t[p[T]+e],f(T)),g[T]),h);n=h,h=c,c=o(i,10),i=r,r=E,E=s(o(u(y,l(79-T,b,w,x),t[v[T]+e],d(T)),m[T]),_),y=_,_=x,x=o(w,10),w=b,b=E}E=a(this.h[1],i,x),this.h[1]=a(this.h[2],c,_),this.h[2]=a(this.h[3],h,y),this.h[3]=a(this.h[4],n,b),this.h[4]=a(this.h[0],r,w),this.h[0]=E},h.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"little"):r.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],v=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],m=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},function(t,e,n){"use strict";var r=n(46),i=n(64);function o(t,e,n){if(!(this instanceof o))return new o(t,e,n);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(e,n))}t.exports=o,o.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),i(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},o.prototype.update=function(t,e){return this.inner.update(t,e),this},o.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e,n){(function(t){var r="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(140),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(45))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i=1,o={},s=!1,a=t.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(t);u=u&&u.setTimeout?u:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){h(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"===typeof n.data&&0===n.data.indexOf(e)&&h(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),r=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){h(t.data)},r=function(e){t.port2.postMessage(e)}}():a&&"onreadystatechange"in a.createElement("script")?function(){var t=a.documentElement;r=function(e){var n=a.createElement("script");n.onreadystatechange=function(){h(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():r=function(t){setTimeout(h,0,t)},u.setImmediate=function(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var s={callback:t,args:e};return o[i]=s,r(i),i++},u.clearImmediate=c}function c(t){delete o[t]}function h(t){if(s)setTimeout(h,0,t);else{var e=o[t];if(e){s=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(void 0,n)}}(e)}finally{c(t),s=!1}}}}}("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,n(45),n(73))},function(t,e,n){"use strict";n(84);var r=n(6),i=60103;if(e.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;i=o("react.element"),e.Fragment=o("react.fragment")}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function c(t,e,n){var r,o={},c=null,h=null;for(r in void 0!==n&&(c=""+n),void 0!==e.key&&(c=""+e.key),void 0!==e.ref&&(h=e.ref),e)a.call(e,r)&&!u.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===o[r]&&(o[r]=e[r]);return{$$typeof:i,type:t,key:c,ref:h,props:o,_owner:s.current}}e.jsx=c,e.jsxs=c},function(t,e,n){"use strict";(function(t){var e=n(12);(function(){var n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var i=function(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t,e];for(var n=0;n<e.length;++n){var r=e[n];if(r&&r.Math==Math)return r}return globalThis}(this);function o(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function s(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:o(t)}}!function(t,e){if(e){var n=i;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in n||(n[s]={}),n=n[s]}(e=e(o=n[t=t[t.length-1]]))!=o&&null!=e&&r(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var o=i.setTimeout;n.prototype.c=function(t){o(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new n;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=s(t),o=i.next();!o.done;o=i.next())r(o.value).Ra(e,n)}))},e.all=function(t){var n=s(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,r(i.value).Ra(o(s.length-1),e),i=n.next()}while(!i.done)}))},e}));var a=a||{},u=this||self,c=/^[\w+/_-]+[=]{0,2}$/,h=null;function l(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&c.test(t)?t:""}function f(){}function d(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function p(t){var e=d(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==d(t)}function g(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function m(t){return Object.prototype.hasOwnProperty.call(t,y)&&t[y]||(t[y]=++b)}var y="closure_uid_"+(1e9*Math.random()>>>0),b=0;function w(t,e,n){return t.call.apply(t.bind,arguments)}function x(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:x).apply(null,arguments)}function T(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var E=Date.now;function S(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function k(t){return t}function A(t,e,n){this.code=P+t,this.message=e||I[t]||"",this.a=n||null}function O(t){var e=t&&t.code;return e?new A(e.substring(P.length),t.message,t.serverResponse):null}S(A,Error),A.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},A.prototype.toJSON=function(){return this.w()};var C,P="auth/",I={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},R={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function M(t){for(var e in R)if(R[e].id===t)return{firebaseEndpoint:(t=R[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function N(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function L(t){if(Error.captureStackTrace)Error.captureStackTrace(this,L);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function D(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");L.call(this,n+t[r])}function F(t,e){throw new D("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function j(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function B(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function U(){this.b=this.a=null}C=M("__EID__")?"__EID__":void 0,S(L,Error),L.prototype.name="CustomError",S(D,L),D.prototype.name="AssertionError",j.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var V=new j((function(){return new G}),(function(t){t.reset()}));function z(){var t=we,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function G(){this.next=this.b=this.a=null}U.prototype.add=function(t,e){var n=V.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},G.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},G.prototype.reset=function(){this.next=this.b=this.a=null};var Y=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},W=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var X=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"===typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},H=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"===typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},q=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function K(t,e){return 0<=Y(t,e)}function $(t,e){var n;return(n=0<=(e=Y(t,e)))&&Array.prototype.splice.call(t,e,1),n}function J(t,e){!function(t,e){for(var n="string"===typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function Q(t){return Array.prototype.concat.apply([],arguments)}function Z(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var tt,et=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},nt=/&/g,rt=/</g,it=/>/g,ot=/"/g,st=/'/g,at=/\x00/g,ut=/[\x00&<>"']/;function ct(t,e){return-1!=t.indexOf(e)}function ht(t,e){return t<e?-1:t>e?1:0}t:{var lt=u.navigator;if(lt){var ft=lt.userAgent;if(ft){tt=ft;break t}}tt=""}function dt(t){return ct(tt,t)}function pt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function vt(t){for(var e in t)return!1;return!0}function gt(t){var e,n={};for(e in t)n[e]=t[e];return n}var mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<mt.length;o++)n=mt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function bt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||u).Element&&r.Location){var i=r;break t}}catch(s){}i=null}if(i&&"undefined"!=typeof i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(g(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(s){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;F("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function wt(t,e){this.a=t===Et&&e||"",this.b=Tt}function xt(t){return t instanceof wt&&t.constructor===wt&&t.b===Tt?t.a:(F("expected object of type Const, got '"+t+"'"),"type_error:Const")}wt.prototype.ta=!0,wt.prototype.sa=function(){return this.a},wt.prototype.toString=function(){return"Const{"+this.a+"}"};var _t,Tt={},Et={};function St(){if(void 0===_t){var t=null,e=u.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:k,createScript:k,createScriptURL:k})}catch(n){u.console&&u.console.error(n.message)}_t=t}else _t=t}return _t}function kt(t,e){this.a=e===It?t:""}function At(t){return t instanceof kt&&t.constructor===kt?t.a:(F("expected object of type TrustedResourceUrl, got '"+t+"' of type "+d(t)),"type_error:TrustedResourceUrl")}function Ot(t,e){var n=xt(t);if(!Pt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=St();return new kt(t=e?e.createScriptURL(t):t,It)}(t=n.replace(Ct,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof wt?xt(t):encodeURIComponent(String(t))})))}kt.prototype.ta=!0,kt.prototype.sa=function(){return this.a.toString()},kt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ct=/%{(\w+)}/g,Pt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,It={};function Rt(t,e){this.a=e===Bt?t:""}function Mt(t){return t instanceof Rt&&t.constructor===Rt?t.a:(F("expected object of type SafeUrl, got '"+t+"' of type "+d(t)),"type_error:SafeUrl")}Rt.prototype.ta=!0,Rt.prototype.sa=function(){return this.a.toString()},Rt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Nt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Lt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Dt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ft(t){if(t instanceof Rt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),Dt.test(t))t=new Rt(t,Bt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Lt);t=e&&Nt.test(e[1])?new Rt(t,Bt):null}return t}function jt(t){return t instanceof Rt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),Dt.test(t)||(t="about:invalid#zClosurez"),new Rt(t,Bt))}var Bt={},Ut=new Rt("about:invalid#zClosurez",Bt);function Vt(t,e,n){this.a=n===zt?t:""}Vt.prototype.ta=!0,Vt.prototype.sa=function(){return this.a.toString()},Vt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var zt={};function Gt(t,e,n,r){return t=t instanceof Rt?t:jt(t),e=e||u,n=n instanceof wt?xt(n):n||"",e.open(Mt(t),n,r,void 0)}function Yt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Wt(t){return ut.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(nt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(rt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(it,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(ot,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(st,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(at,"&#0;"))),t}function Xt(t){return Xt[" "](t),t}Xt[" "]=f;var Ht,qt=dt("Opera"),Kt=dt("Trident")||dt("MSIE"),$t=dt("Edge"),Jt=$t||Kt,Qt=dt("Gecko")&&!(ct(tt.toLowerCase(),"webkit")&&!dt("Edge"))&&!(dt("Trident")||dt("MSIE"))&&!dt("Edge"),Zt=ct(tt.toLowerCase(),"webkit")&&!dt("Edge");function te(){var t=u.document;return t?t.documentMode:void 0}t:{var ee="",ne=function(){var t=tt;return Qt?/rv:([^\);]+)(\)|;)/.exec(t):$t?/Edge\/([\d\.]+)/.exec(t):Kt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Zt?/WebKit\/(\S+)/.exec(t):qt?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(ne&&(ee=ne?ne[1]:""),Kt){var re=te();if(null!=re&&re>parseFloat(ee)){Ht=String(re);break t}}Ht=ee}var ie,oe={};function se(t){return function(t,e){var n=oe;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=et(String(Ht)).split("."),r=et(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ht(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ht(0==s[2].length,0==a[2].length)||ht(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(u.document&&Kt){var ae=te();ie=ae||(parseInt(Ht,10)||void 0)}else ie=void 0;var ue=ie;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(fs){}var ce=!Kt||9<=Number(ue);function he(t){var e=document;return"string"===typeof t?e.getElementById(t):t}function le(t,e){pt(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:pe.hasOwnProperty(n)?t.setAttribute(pe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var fe,de,pe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ve(t,e,n){function r(n){n&&e.appendChild("string"===typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!p(o)||g(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(g(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(v(o)){s="function"==typeof o.item;break t}}s=!1}W(s?Z(o):o,r)}}}function ge(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function me(t){u.setTimeout((function(){throw t}),0)}function ye(t,e){de||function(){if(u.Promise&&u.Promise.resolve){var t=u.Promise.resolve(void 0);de=function(){t.then(xe)}}else de=function(){var t=xe;!v(u.setImmediate)||u.Window&&u.Window.prototype&&!dt("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(fe||(fe=function(){var t=u.MessageChannel;if("undefined"===typeof t&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!dt("Presto")&&(t=function(){var t=ge(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=_((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),"undefined"!==typeof t&&!dt("Trident")&&!dt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){u.setTimeout(t,0)}}()),fe(t)):u.setImmediate(t)}}(),be||(de(),be=!0),we.add(t,e)}var be=!1,we=new U;function xe(){for(var t;t=z();){try{t.a.call(t.b)}catch(e){me(e)}B(V,t)}be=!1}function _e(t,e){if(this.a=Te,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=f)try{var n=this;t.call(e,(function(t){De(n,Ee,t)}),(function(t){if(!(t instanceof Ge))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(e){}De(n,Se,t)}))}catch(r){De(this,Se,r)}}var Te=0,Ee=2,Se=3;function ke(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ke.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ae=new j((function(){return new ke}),(function(t){t.reset()}));function Oe(t,e,n){var r=Ae.get();return r.g=t,r.b=e,r.f=n,r}function Ce(t){if(t instanceof _e)return t;var e=new _e(f);return De(e,Ee,t),e}function Pe(t){return new _e((function(e,n){n(t)}))}function Ie(t,e,n){Fe(t,e,n,null)||ye(T(e,t))}function Re(t){return new _e((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ie(t[o],T(i,o,!0),T(i,o,!1));else e(r)}))}function Me(t,e){if(t.a==Te)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==Te&&1==r?Me(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Be(n),Ue(n,i,Se,e)))}t.c=null}else De(t,Se,e)}function Ne(t,e){t.b||t.a!=Ee&&t.a!=Se||je(t),t.f?t.f.next=e:t.b=e,t.f=e}function Le(t,e,n,r){var i=Oe(null,null,null);return i.a=new _e((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(s){o(s)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ge?o(e):t(i)}catch(s){o(s)}}:o})),i.a.c=t,Ne(t,i),i.a}function De(t,e,n){t.a==Te&&(t===n&&(e=Se,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Fe(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,je(t),e!=Se||n instanceof Ge||function(t,e){t.g=!0,ye((function(){t.g&&ze.call(null,e)}))}(t,n)))}function Fe(t,e,n,r){if(t instanceof _e)return Ne(t,Oe(e||f,n||null,r)),!0;if(N(t))return t.then(e,n,r),!0;if(g(t))try{var i=t.then;if(v(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}function s(t){a||(a=!0,n.call(i,t))}var a=!1;try{e.call(t,s,o)}catch(u){o(u)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function je(t){t.h||(t.h=!0,ye(t.gc,t))}function Be(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ue(t,e,n,r){if(n==Se&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ve(e,n,r);else try{e.c?e.g.call(e.f):Ve(e,n,r)}catch(i){ze.call(null,i)}B(Ae,e)}function Ve(t,e,n){e==Ee?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}_e.prototype.then=function(t,e,n){return Le(this,v(t)?t:null,v(e)?e:null,n)},_e.prototype.$goog_Thenable=!0,(n=_e.prototype).oa=function(t,e){return(t=Oe(t,t,e)).c=!0,Ne(this,t),this},n.o=function(t,e){return Le(this,null,t,e)},n.cancel=function(t){if(this.a==Te){var e=new Ge(t);ye((function(){Me(this,e)}),this)}},n.$c=function(t){this.a=Te,De(this,Ee,t)},n.ad=function(t){this.a=Te,De(this,Se,t)},n.gc=function(){for(var t;t=Be(this);)Ue(this,t,this.a,this.i);this.h=!1};var ze=me;function Ge(t){L.call(this,t)}function Ye(){0!=We&&(Xe[m(this)]=this),this.ya=this.ya,this.pa=this.pa}S(Ge,L),Ge.prototype.name="cancel";var We=0,Xe={};function He(t){if(!t.ya&&(t.ya=!0,t.Da(),0!=We)){var e=m(t);if(0!=We&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Xe[e]}}Ye.prototype.ya=!1,Ye.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var qe=Object.freeze||function(t){return t},Ke=!Kt||9<=Number(ue),$e=Kt&&!se("9"),Je=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",f,e),u.removeEventListener("test",f,e)}catch(n){}return t}();function Qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ze(t,e){if(Qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Qt){t:{try{Xt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:tn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Qe.prototype.preventDefault=function(){this.defaultPrevented=!0},S(Ze,Qe);var tn=qe({2:"touch",3:"pen",4:"mouse"});Ze.prototype.preventDefault=function(){Ze.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,$e)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Ze.prototype.g=function(){return this.a};var en="closure_listenable_"+(1e6*Math.random()|0),nn=0;function rn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++nn,this.wa=this.Qa=!1}function on(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function sn(t){this.src=t,this.a={},this.b=0}function an(t,e){var n=e.type;n in t.a&&$(t.a[n],e)&&(on(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function un(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}sn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=un(t,e,r,i);return-1<s?(e=t[s],n||(e.Qa=!1)):((e=new rn(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var cn="closure_lm_"+(1e6*Math.random()|0),hn={};function ln(t,e,n,r,i){if(r&&r.once)dn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else n=_n(n),t&&t[en]?En(t,e,n,g(r)?!!r.capture:!!r,i):fn(t,e,n,!1,r,i)}function fn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=g(i)?!!i.capture:!!i,a=wn(t);if(a||(t[cn]=a=new sn(t)),!(n=a.add(e,n,r,s,o)).proxy){if(r=function(){var t=bn,e=Ke?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Je||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(gn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else n=_n(n),t&&t[en]?Sn(t,e,n,g(r)?!!r.capture:!!r,i):fn(t,e,n,!0,r,i)}function pn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)pn(t,e[o],n,r,i);else r=g(r)?!!r.capture:!!r,n=_n(n),t&&t[en]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=un(o=t.a[e],n,r,i))&&(on(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=wn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=un(e,n,r,i)),(n=-1<t?e[t]:null)&&vn(n))}function vn(t){if("number"!==typeof t&&t&&!t.wa){var e=t.src;if(e&&e[en])an(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(gn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=wn(e))?(an(n,t),0==n.b&&(n.src=null,e[cn]=null)):on(t)}}}function gn(t){return t in hn?hn[t]:hn[t]="on"+t}function mn(t,e,n,r){var i=!0;if((t=wn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=yn(o,r),i=i&&!1!==o)}return i}function yn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&vn(t),n.call(r,e)}function bn(t,e){if(t.wa)return!0;if(!Ke){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ze(r=e,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(s){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=mn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=mn(r[i],t,!1,e),n=n&&o}return n}return yn(t,new Ze(e,this))}function wn(t){return(t=t[cn])instanceof sn?t:null}var xn="__closure_events_fn_"+(1e9*Math.random()>>>0);function _n(t){return v(t)?t:(t[xn]||(t[xn]=function(e){return t.handleEvent(e)}),t[xn])}function Tn(){Ye.call(this),this.v=new sn(this),this.bc=this,this.hb=null}function En(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Sn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function kn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.wa&&s.capture==n){var a=s.listener,u=s.Wa||s.src;s.Qa&&an(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function An(t,e,n){if(v(t))n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function On(t){var e=null;return new _e((function(n,r){-1==(e=An((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw u.clearTimeout(e),t}))}function Cn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"===typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Pn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(p(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function In(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof In)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Rn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Mn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Mn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Mn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}S(Tn,Ye),Tn.prototype[en]=!0,Tn.prototype.addEventListener=function(t,e,n,r){ln(this,t,e,n,r)},Tn.prototype.removeEventListener=function(t,e,n,r){pn(this,t,e,n,r)},Tn.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"===typeof t)t=new Qe(t,n);else if(t instanceof Qe)t.target=t.target||n;else{var i=t;yt(t=new Qe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=kn(s,r,!0,t)&&i}if(i=kn(s=t.b=n,r,!0,t)&&i,i=kn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=kn(s=t.b=e[o],r,!1,t)&&i;return i},Tn.prototype.Da=function(){if(Tn.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)on(n[r]);delete e.a[t],e.b--}}this.hb=null},(n=In.prototype).X=function(){Rn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},n.Y=function(){return Rn(this),this.a.concat()},n.clear=function(){this.b={},this.c=this.a.length=0},n.get=function(t,e){return Mn(this.b,t)?this.b[t]:e},n.set=function(t,e){Mn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},n.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Nn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ln(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Ln?(this.i=void 0!==e?e:t.i,Dn(this,t.c),this.l=t.l,this.a=t.a,Fn(this,t.g),this.f=t.f,jn(this,rr(t.b)),this.h=t.h):t&&(n=String(t).match(Nn))?(this.i=!!e,Dn(this,n[1]||"",!0),this.l=Gn(n[2]||""),this.a=Gn(n[3]||"",!0),Fn(this,n[4]),this.f=Gn(n[5]||"",!0),jn(this,n[6]||"",!0),this.h=Gn(n[7]||"")):(this.i=!!e,this.b=new Jn(null,this.i))}function Dn(t,e,n){t.c=n?Gn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Fn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function jn(t,e,n){e instanceof Jn?(t.b=e,function(t,e){e&&!t.f&&(Qn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(tr(this,e),nr(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Yn(e,Kn)),t.b=new Jn(e,t.i))}function Bn(t,e,n){t.b.set(e,n)}function Un(t,e){return t.b.get(e)}function Vn(t){return t instanceof Ln?new Ln(t):new Ln(t,void 0)}function zn(t,e,n,r){var i=new Ln(null,void 0);return t&&Dn(i,t),e&&(i.a=e),n&&Fn(i,n),r&&(i.f=r),i}function Gn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Yn(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Wn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Wn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ln.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Yn(e,Xn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Yn(e,Xn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Yn(n,"/"==n.charAt(0)?qn:Hn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Yn(n,$n)),t.join("")},Ln.prototype.resolve=function(t){var e=new Ln(this),n=!!t.c;n?Dn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Fn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ct(i,"./")||ct(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?jn(e,rr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Xn=/[#\/\?@]/g,Hn=/[#\?:]/g,qn=/[#\?]/g,Kn=/[#\?@]/g,$n=/#/g;function Jn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Qn(t){t.a||(t.a=new In,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Zn(t){var e=Pn(t);if("undefined"==typeof e)throw Error("Keys are undefined");var n=new Jn(null,void 0);t=Cn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?nr(n,i,o):n.add(i,o)}return n}function tr(t,e){Qn(t),e=ir(t,e),Mn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Mn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Rn(t)))}function er(t,e){return Qn(t),e=ir(t,e),Mn(t.a.b,e)}function nr(t,e,n){tr(t,e),0<n.length&&(t.c=null,t.a.set(ir(t,e),Z(n)),t.b+=n.length)}function rr(t){var e=new Jn;return e.c=t.c,t.a&&(e.a=new In(t.a),e.b=t.b),e}function ir(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function or(t){var e=[];return ar(new sr,t,e),e.join("")}function sr(){}function ar(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ar(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),hr(r,n),n.push(":"),ar(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":hr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(n=Jn.prototype).add=function(t,e){Qn(this),this.c=null,t=ir(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},n.clear=function(){this.a=this.c=null,this.b=0},n.forEach=function(t,e){Qn(this),this.a.forEach((function(n,r){W(n,(function(n){t.call(e,n,r,this)}),this)}),this)},n.Y=function(){Qn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},n.X=function(t){Qn(this);var e=[];if("string"===typeof t)er(this,t)&&(e=Q(e,this.a.get(ir(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=Q(e,t[n])}return e},n.set=function(t,e){return Qn(this),this.c=null,er(this,t=ir(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},n.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},n.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var ur={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},cr=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function hr(t,e){e.push('"',t.replace(cr,(function(t){var e=ur[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ur[t]=e),e})),'"')}function lr(){var t=Ir();return Kt&&!!ue&&11==ue||/Edge\/\d+/.test(t)}function fr(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function dr(t,e){e=e||u.window;var n="about:blank";t&&(n=Mt(Ft(t)||Ut)),e.location.href=n}function pr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<pr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function vr(t){return!!((t=(t||Ir()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function gr(t){t=t||u.window;try{t.close()}catch(e){}}function mr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Ir().toLowerCase(),r&&(e.target=r,ct(n,"crios/")&&(e.target="_blank")),Or(Ir())==kr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Rt?n:Ft("undefined"!=typeof n.href?n.href:String(n))||Ut,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((dt("iPhone")&&!dt("iPod")&&!dt("iPad")||dt("iPad")||dt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(bt(s=ge(document,"A"),"HTMLAnchorElement"),e=e instanceof Rt?e:jt(e),s.href=Mt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Gt("",r,n,s),t=Mt(e),s&&(Jt&&ct(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Wt(t)+'">',t=new Vt(t=(r=St())?r.createHTML(t):t,null,zt),r=s.document)&&(r.write(function(t){return t instanceof Vt&&t.constructor===Vt?t.a:(F("expected object of type SafeHtml, got '"+t+"' of type "+d(t)),"type_error:SafeHtml")}(t)),r.close())):(s=Gt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var yr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,br=/^[^@]+@[^@]+$/;function wr(){var t=null;return new _e((function(e){"complete"==u.document.readyState?e():(t=function(){e()},dn(window,"load",t))})).o((function(e){throw pn(window,"load",t),e}))}function xr(t){return t=t||Ir(),!("file:"!==Dr()&&"ionic:"!==Dr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function _r(){var t=u.window;try{return!(!t||t==t.top)}catch(e){return!1}}function Tr(){return"undefined"!==typeof u.WorkerGlobalScope&&"function"===typeof u.importScripts}function Er(){return e.default.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":e.default.INTERNAL.hasOwnProperty("node")?"Node":Tr()?"Worker":"Browser"}function Sr(){var t=Er();return"ReactNative"===t||"Node"===t}var kr="Firefox",Ar="Chrome";function Or(t){var e=t.toLowerCase();return ct(e,"opera/")||ct(e,"opr/")||ct(e,"opios/")?"Opera":ct(e,"iemobile")?"IEMobile":ct(e,"msie")||ct(e,"trident/")?"IE":ct(e,"edge/")?"Edge":ct(e,"firefox/")?kr:ct(e,"silk/")?"Silk":ct(e,"blackberry")?"Blackberry":ct(e,"webos")?"Webos":!ct(e,"safari/")||ct(e,"chrome/")||ct(e,"crios/")||ct(e,"android")?!ct(e,"chrome/")&&!ct(e,"crios/")||ct(e,"edge/")?ct(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Ar:"Safari"}var Cr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Pr(t,e){e=e||[];var n,r=[],i={};for(n in Cr)i[Cr[n]]=!0;for(n=0;n<e.length;n++)"undefined"!==typeof i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Er())?r=Or(i=Ir()):"Worker"===r&&(r=Or(i=Ir())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Ir(){return u.navigator&&u.navigator.userAgent||""}function Rr(t,e){t=t.split("."),e=e||u;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Mr(){try{var t=u.localStorage,e=Vr();if(t)return t.setItem(e,"1"),t.removeItem(e),!lr()||!!u.indexedDB}catch(n){return Tr()&&!!u.indexedDB}return!1}function Nr(){return(Lr()||"chrome-extension:"===Dr()||xr())&&!Sr()&&Mr()&&!Tr()}function Lr(){return"http:"===Dr()||"https:"===Dr()}function Dr(){return u.location&&u.location.protocol||null}function Fr(t){return!vr(t=t||Ir())&&Or(t)!=kr}function jr(t){return"undefined"===typeof t?null:or(t)}function Br(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Ur(t){if(null!==t)return JSON.parse(t)}function Vr(t){return t||Math.floor(1e9*Math.random()).toString()}function zr(t){return"Safari"!=Or(t=t||Ir())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Gr(){var t=u.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Yr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Ir(),e=Er(),this.b=vr(t)||"ReactNative"===e}function Wr(){var t=u.document;return!t||"undefined"===typeof t.visibilityState||"visible"==t.visibilityState}function Xr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Hr(){return!(!Rr("fireauth.oauthhelper",u)&&!Rr("fireauth.iframe",u))}Yr.prototype.get=function(){var t=u.navigator;return!t||"boolean"!==typeof t.onLine||!Lr()&&"chrome-extension:"!==Dr()&&"undefined"===typeof t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var qr,Kr={};function $r(t){Kr[t]||(Kr[t]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(t))}try{var Jr={};Object.defineProperty(Jr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Jr,"abcd",{configurable:!0,enumerable:!0,value:2}),qr=2==Jr.abcd}catch(fs){qr=!1}function Qr(t,e,n){qr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Zr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Qr(t,n,e[n])}function ti(t){var e={};return Zr(e,t),e}function ei(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Qr(e,n,ei(t[n]));return e}function ni(t){var e=t&&(t[ai]?"phone":null);if(!(e&&t&&t[si]))throw new A("internal-error","Internal assert: invalid MultiFactorInfo object");Qr(this,"uid",t[si]),Qr(this,"displayName",t[ii]||null);var n=null;t[oi]&&(n=new Date(t[oi]).toUTCString()),Qr(this,"enrollmentTime",n),Qr(this,"factorId",e)}function ri(t){try{var e=new ui(t)}catch(n){e=null}return e}ni.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ii="displayName",oi="enrolledAt",si="mfaEnrollmentId",ai="phoneInfo";function ui(t){ni.call(this,t),Qr(this,"phoneNumber",t[ai])}function ci(t){var e={},n=t[di],r=t[vi],i=t[gi];if(t=ri(t[pi]),!i||i!=li&&i!=fi&&!n||i==fi&&!r||i==hi&&!t)throw Error("Invalid checkActionCode response!");i==fi?(e[yi]=n||null,e[wi]=n||null,e[mi]=r):(e[yi]=r||null,e[wi]=r||null,e[mi]=n||null),e[bi]=t||null,Qr(this,_i,i),Qr(this,xi,ei(e))}S(ui,ni),ui.prototype.w=function(){var t=ui.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var hi="REVERT_SECOND_FACTOR_ADDITION",li="EMAIL_SIGNIN",fi="VERIFY_AND_CHANGE_EMAIL",di="email",pi="mfaInfo",vi="newEmail",gi="requestType",mi="email",yi="fromEmail",bi="multiFactorInfo",wi="previousEmail",xi="data",_i="operation";function Ti(t){var e=Un(t=Vn(t),Ei)||null,n=Un(t,Si)||null,r=Un(t,Oi)||null;if(r=r&&Pi[r]||null,!e||!n||!r)throw new A("argument-error",Ei+", "+Si+"and "+Oi+" are required in a valid action code URL.");Zr(this,{apiKey:e,operation:r,code:n,continueUrl:Un(t,ki)||null,languageCode:Un(t,Ai)||null,tenantId:Un(t,Ci)||null})}var Ei="apiKey",Si="oobCode",ki="continueUrl",Ai="languageCode",Oi="mode",Ci="tenantId",Pi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:hi,signIn:li,verifyAndChangeEmail:fi,verifyEmail:"VERIFY_EMAIL"};function Ii(t){try{return new Ti(t)}catch(e){return null}}function Ri(t){var e=t[Fi];if("undefined"===typeof e)throw new A("missing-continue-uri");if("string"!==typeof e||"string"===typeof e&&!e.length)throw new A("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Mi];if(n&&"object"===typeof n){e=n[Ui];var r=n[ji];if(n=n[Bi],"string"===typeof e&&e.length){if(this.a=e,"undefined"!==typeof r&&"boolean"!==typeof r)throw new A("argument-error",ji+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new A("argument-error",Bi+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof e)throw new A("argument-error",Ui+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new A("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new A("argument-error",Mi+" property must be a non null object when specified.");if(this.f=null,(e=t[Di])&&"object"===typeof e){if("string"===typeof(e=e[Vi])&&e.length)this.f=e;else if("undefined"!==typeof e)throw new A("argument-error",Vi+" property must be a non empty string when specified.")}else if("undefined"!==typeof e)throw new A("argument-error",Di+" property must be a non null object when specified.");if("undefined"!==typeof(e=t[Li])&&"boolean"!==typeof e)throw new A("argument-error",Li+" property must be a boolean when specified.");if(this.c=!!e,"undefined"!==typeof(t=t[Ni])&&("string"!==typeof t||"string"===typeof t&&!t.length))throw new A("argument-error",Ni+" property must be a non empty string when specified.");this.i=t||null}var Mi="android",Ni="dynamicLinkDomain",Li="handleCodeInApp",Di="iOS",Fi="url",ji="installApp",Bi="minimumVersion",Ui="packageName",Vi="bundleId";function zi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Gi=null;function Yi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Gi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Gi){Gi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Gi[o]&&(Gi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e.push(t)})),e}function Wi(t){var e=Hi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Xi(t){try{return new Wi(t)}catch(e){return null}}function Hi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=Yi(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(u){}return null}Wi.prototype.T=function(){return this.f},Wi.prototype.l=function(){return this.c},Wi.prototype.toString=function(){return this.h};var qi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ki=["client_id","response_type","scope","redirect_uri","state"],$i={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Ki},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Ki},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Ki},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:qi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Ji(t){for(var e in $i)if($i[e].fa==t)return $i[e];return null}function Qi(t){var e={};e["facebook.com"]=ro,e["google.com"]=oo,e["github.com"]=io,e["twitter.com"]=so;var n=t&&t[to];try{if(n)return e[n]?new e[n](t):new no(t);if("undefined"!==typeof t[Zi])return new eo(t)}catch(r){}return null}var Zi="idToken",to="providerId";function eo(t){var e=t[to];if(!e&&t[Zi]){var n=Xi(t[Zi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,"undefined"!==typeof t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Qr(this,"providerId",e),Qr(this,"isNewUser",n)}function no(t){eo.call(this,t),Qr(this,"profile",ei((t=Ur(t.rawUserInfo||"{}"))||{}))}function ro(t){if(no.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function io(t){if(no.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",this.profile&&this.profile.login||null)}function oo(t){if(no.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function so(t){if(no.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",t.screenName||null)}function ao(t){var e=Vn(t),n=Un(e,"link"),r=Un(Vn(n),"link");return e=Un(e,"deep_link_id"),Un(Vn(e),"link")||e||r||n||t}function uo(t,e){if(!t&&!e)throw new A("internal-error","Internal assert: no raw session string available");if(t&&e)throw new A("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?co:ho}S(no,eo),S(ro,no),S(io,no),S(oo,no),S(so,no);var co="enroll",ho="signin";function lo(){}function fo(t,e){return t.then((function(t){if(t[na]){var n=Xi(t[na]);if(!n||e!=n.i)throw new A("user-mismatch");return t}throw new A("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==P+"user-not-found"?new A("user-mismatch"):t}))}function po(t,e){if(!e)throw new A("internal-error","failed to construct a credential");this.a=e,Qr(this,"providerId",t),Qr(this,"signInMethod",t)}function vo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function go(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new po(t.providerId,t.pendingToken)}catch(e){}return null}function mo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Qr(this,"idToken",e.idToken),e.accessToken&&Qr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Qr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new A("internal-error","failed to construct a credential");Qr(this,"accessToken",e.oauthToken),Qr(this,"secret",e.oauthTokenSecret)}Qr(this,"providerId",t),Qr(this,"signInMethod",n)}function yo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Zn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function bo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new mo(t.providerId,e,t.signInMethod)}catch(n){}}return null}function wo(t,e){this.Qc=e||[],Zr(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(Ji(t)||{}).Ja||null,this.pb=null}function xo(t){if("string"!==typeof t||0!=t.indexOf("saml."))throw new A("argument-error",'SAML provider IDs must be prefixed with "saml."');wo.call(this,t,[])}function _o(t){wo.call(this,t,Ki),this.a=[]}function To(){_o.call(this,"facebook.com")}function Eo(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new To).credential({accessToken:e})}function So(){_o.call(this,"github.com")}function ko(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return g(t)&&(e=t.accessToken),(new So).credential({accessToken:e})}function Ao(){_o.call(this,"google.com"),this.Ca("profile")}function Oo(t,e){var n=t;return g(t)&&(n=t.idToken,e=t.accessToken),(new Ao).credential({idToken:n,accessToken:e})}function Co(){wo.call(this,"twitter.com",qi)}function Po(t,e){var n=t;if(g(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new A("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new mo("twitter.com",n,"twitter.com")}function Io(t,e,n){this.a=t,this.f=e,Qr(this,"providerId","password"),Qr(this,"signInMethod",n===Mo.EMAIL_LINK_SIGN_IN_METHOD?Mo.EMAIL_LINK_SIGN_IN_METHOD:Mo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ro(t){return t&&t.email&&t.password?new Io(t.email,t.password,t.signInMethod):null}function Mo(){Zr(this,{providerId:"password",isOAuthProvider:!1})}function No(t,e){if(!(e=Lo(e)))throw new A("argument-error","Invalid email link!");return new Io(t,e.code,Mo.EMAIL_LINK_SIGN_IN_METHOD)}function Lo(t){return(t=Ii(t=ao(t)))&&t.operation===li?t:null}function Do(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new A("internal-error");this.a=t,Qr(this,"providerId","phone"),this.fa="phone",Qr(this,"signInMethod","phone")}function Fo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return W(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Do(e)}return null}function jo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function Bo(t){try{this.a=t||e.default.auth()}catch(n){throw new A("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Zr(this,{providerId:"phone",isOAuthProvider:!1})}function Uo(t,e){if(!t)throw new A("missing-verification-id");if(!e)throw new A("missing-verification-code");return new Do({fb:t,eb:e})}function Vo(t){if(t.temporaryProof&&t.phoneNumber)return new Do({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return Oo(o,n);case"facebook.com":return Eo(n);case"github.com":return ko(n);case"twitter.com":return Po(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new po(e,s):new mo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new _o(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function zo(t){if(!t.isOAuthProvider)throw new A("invalid-oauth-provider")}function Go(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new A("invalid-auth-event");if(this.g&&this.a)throw new A("invalid-auth-event");if(this.g&&!this.f)throw new A("invalid-auth-event")}function Yo(t){return(t=t||{}).type?new Go(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&O(t.error),t.postBody,t.tenantId):null}function Wo(){this.b=null,this.a=[]}uo.prototype.Ha=function(){return this.a?Ce(this.a):Ce(this.b)},uo.prototype.w=function(){return this.type==co?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},lo.prototype.ka=function(){},lo.prototype.b=function(){},lo.prototype.c=function(){},lo.prototype.w=function(){},po.prototype.ka=function(t){return Ea(t,vo(this))},po.prototype.b=function(t,e){var n=vo(this);return n.idToken=e,Sa(t,n)},po.prototype.c=function(t,e){return fo(ka(t,vo(this)),e)},po.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},mo.prototype.ka=function(t){return Ea(t,yo(this))},mo.prototype.b=function(t,e){var n=yo(this);return n.idToken=e,Sa(t,n)},mo.prototype.c=function(t,e){return fo(ka(t,yo(this)),e)},mo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},wo.prototype.Ka=function(t){return this.Jb=gt(t),this},S(xo,wo),S(_o,wo),_o.prototype.Ca=function(t){return K(this.a,t)||this.a.push(t),this},_o.prototype.Rb=function(){return Z(this.a)},_o.prototype.credential=function(t,e){var n;if(!(n=g(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new A("argument-error","credential failed: must provide the ID token and/or the access token.");return new mo(this.providerId,n,this.providerId)},S(To,_o),Qr(To,"PROVIDER_ID","facebook.com"),Qr(To,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),S(So,_o),Qr(So,"PROVIDER_ID","github.com"),Qr(So,"GITHUB_SIGN_IN_METHOD","github.com"),S(Ao,_o),Qr(Ao,"PROVIDER_ID","google.com"),Qr(Ao,"GOOGLE_SIGN_IN_METHOD","google.com"),S(Co,wo),Qr(Co,"PROVIDER_ID","twitter.com"),Qr(Co,"TWITTER_SIGN_IN_METHOD","twitter.com"),Io.prototype.ka=function(t){return this.signInMethod==Mo.EMAIL_LINK_SIGN_IN_METHOD?au(t,Na,{email:this.a,oobCode:this.f}):au(t,nu,{email:this.a,password:this.f})},Io.prototype.b=function(t,e){return this.signInMethod==Mo.EMAIL_LINK_SIGN_IN_METHOD?au(t,La,{idToken:e,email:this.a,oobCode:this.f}):au(t,qa,{idToken:e,email:this.a,password:this.f})},Io.prototype.c=function(t,e){return fo(this.ka(t),e)},Io.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Zr(Mo,{PROVIDER_ID:"password"}),Zr(Mo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Zr(Mo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Do.prototype.ka=function(t){return t.gb(jo(this))},Do.prototype.b=function(t,e){var n=jo(this);return n.idToken=e,au(t,iu,n)},Do.prototype.c=function(t,e){var n=jo(this);return n.operation="REAUTH",fo(t=au(t,ou,n),e)},Do.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Bo.prototype.gb=function(t,e){var n=this.a.a;return Ce(e.verify()).then((function(r){if("string"!==typeof r)throw new A("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"===e.type){var i,o=g(t)?t.session:null,s=g(t)?t.phoneNumber:t;return i=o&&o.type==co?o.Ha().then((function(t){return function(t,e){return au(t,$a,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r}})})):o&&o.type==ho?o.Ha().then((function(e){return function(t,e){return au(t,Ja,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return au(t,Xa,e)}(n,{phoneNumber:s,recaptchaToken:r}),i.then((function(t){return"function"===typeof e.reset&&e.reset(),t}),(function(t){throw"function"===typeof e.reset&&e.reset(),t}))}throw new A("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}))},Zr(Bo,{PROVIDER_ID:"phone"}),Zr(Bo,{PHONE_SIGN_IN_METHOD:"phone"}),Go.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Go.prototype.T=function(){return this.h},Go.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Xo,Ho=null;function qo(t){var e="unauthorized-domain",n=void 0,r=Vn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Yt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Yt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",A.call(this,e,n)}function Ko(t,e,n){A.call(this,t,n),(t=e||{}).Kb&&Qr(this,"email",t.Kb),t.ea&&Qr(this,"phoneNumber",t.ea),t.credential&&Qr(this,"credential",t.credential),t.$b&&Qr(this,"tenantId",t.$b)}function $o(t){if(t.code){var e=t.code||"";0==e.indexOf(P)&&(e=e.substring(P.length));var n={credential:Vo(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new A(e,t.message||void 0);return new Ko(e,n,t.message)}return null}function Jo(){}function Qo(t){return t.c||(t.c=t.b())}function Zo(){}function ts(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function es(){}function ns(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=_(this.qc,this),this.a.onerror=_(this.Tb,this),this.a.onprogress=_(this.rc,this),this.a.ontimeout=_(this.vc,this)}function rs(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function is(t,e,n){this.reset(t,e,n,void 0,void 0)}S(qo,A),S(Ko,A),Ko.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&yt(t,e),t},Ko.prototype.toJSON=function(){return this.w()},Jo.prototype.c=null,S(Zo,Jo),Zo.prototype.a=function(){var t=ts(this);return t?new ActiveXObject(t):new XMLHttpRequest},Zo.prototype.b=function(){var t={};return ts(this)&&(t[0]=!0,t[1]=!0),t},Xo=new Zo,S(es,Jo),es.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new ns;throw Error("Unsupported browser")},es.prototype.b=function(){return{}},(n=ns.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},n.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},n.abort=function(){this.a.abort()},n.setRequestHeader=function(){},n.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},n.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,rs(this,4)},n.Tb=function(){this.status=500,this.response=this.responseText="",rs(this,4)},n.vc=function(){this.Tb()},n.rc=function(){this.status=200,rs(this,1)},n.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},is.prototype.a=null;function os(t){this.f=t,this.b=this.c=this.a=null}function ss(t,e){this.name=t,this.value=e}is.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||E(),delete this.a},ss.prototype.toString=function(){return this.name};var as=new ss("SEVERE",1e3),us=new ss("WARNING",900),cs=new ss("CONFIG",700),hs=new ss("FINE",500);function ls(t){return t.c?t.c:t.a?ls(t.a):(F("Root logger has no level set."),null)}os.prototype.log=function(t,e,n){if(t.value>=ls(this).value)for(v(e)&&(e=e()),t=new is(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var fs,ds={},ps=null;function vs(t){var e;if(ps||(ps=new os(""),ds[""]=ps,ps.c=cs),!(e=ds[t])){e=new os(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=vs(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,ds[t]=e}return e}function gs(t,e){t&&t.log(hs,e,void 0)}function ms(t){this.f=t}function ys(t){Tn.call(this),this.u=t,this.h=void 0,this.readyState=bs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=vs("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}S(ms,Jo),ms.prototype.a=function(){return new ys(this.f)},ms.prototype.b=(fs={},function(){return fs}),S(ys,Tn);var bs=0;function ws(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function xs(t){t.readyState=4,t.g=null,t.c=null,t.m=null,_s(t)}function _s(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Ts(t){Tn.call(this),this.headers=new In,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=Es,this.u=this.S=!1}(n=ys.prototype).open=function(t,e){if(this.readyState!=bs)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,_s(this)},n.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},n.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,xs(this)),this.readyState=bs},n.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,_s(this)),this.a&&(this.readyState=3,_s(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):"undefined"!==typeof u.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ws(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},n.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?xs(this):_s(this),3==this.readyState&&ws(this)}},n.tc=function(t){this.a&&(this.response=this.responseText=t,xs(this))},n.sc=function(t){this.a&&(this.response=t,xs(this))},n.Va=function(t){var e=this.i;e&&e.log(us,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&xs(this)},n.setRequestHeader=function(t,e){this.l.append(t,e)},n.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(us,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},n.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(us,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ys.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),S(Ts,Tn);var Es="";Ts.prototype.b=vs("goog.net.XhrIo");var Ss=/^https?$/i,ks=["POST","PUT"];function As(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Xo.a(),t.C=t.D?Qo(t.D):Qo(Xo),t.a.onreadystatechange=_(t.Wb,t);try{gs(t.b,Ds(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(s){return gs(t.b,Ds(t,"Error opening Xhr: "+s.message)),void Cs(t,s)}e=r||"";var o=new In(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"===typeof t)W(t,e,void 0);else for(var n=Pn(t),r=Cn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Os,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}(o.Y()),r=u.FormData&&e instanceof u.FormData,!K(ks,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Ms(t),0<t.g&&(t.u=function(t){return Kt&&se(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(t.a),gs(t.b,Ds(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=_(t.Ma,t)):t.s=An(t.Ma,t.g,t)),gs(t.b,Ds(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(s){gs(t.b,Ds(t,"Send error: "+s.message)),Cs(t,s)}}function Os(t){return"content-type"==t.toLowerCase()}function Cs(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Ps(t),Rs(t)}function Ps(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Is(t){if(t.c&&"undefined"!=typeof a)if(t.C[1]&&4==Ns(t)&&2==Ls(t))gs(t.b,Ds(t,"Local request error detected and ignored"));else if(t.i&&4==Ns(t))An(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ns(t)){gs(t.b,Ds(t,"Request complete")),t.c=!1;try{var e,n=Ls(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(Nn)[1]||null;if(!o&&u.self&&u.self.location){var s=u.self.location.protocol;o=s.substr(0,s.length-1)}i=!Ss.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Ns(t)?t.a.statusText:""}catch(h){gs(t.b,"Can not get status: "+h.message),c=""}t.h=c+" ["+Ls(t)+"]",Ps(t)}}finally{Rs(t)}}}function Rs(t,e){if(t.a){Ms(t);var n=t.a,r=t.C[0]?f:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(t=t.b)&&t.log(as,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function Ms(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(u.clearTimeout(t.s),t.s=null)}function Ns(t){return t.a?t.a.readyState:0}function Ls(t){try{return 2<Ns(t)?t.a.status:-1}catch(e){return-1}}function Ds(t,e){return e+" ["+t.P+" "+t.l+" "+Ls(t)+"]"}function Fs(t){var e=qs;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function js(t,e,n){t.a=!0,t.c=n,t.f=!e,zs(t)}function Bs(t){if(t.a){if(!t.v)throw new Gs(t);t.v=!1}}function Us(t,e,n,r){t.g.push([e,n,r]),t.a&&zs(t)}function Vs(t){return q(t.g,(function(t){return v(t[1])}))}function zs(t){if(t.h&&t.a&&Vs(t)){var e=t.h,n=Xs[e];n&&(u.clearTimeout(n.a),delete Xs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var a=o.call(i||t.s,e);void 0!==a&&(t.f=t.f&&(a==e||a instanceof Error),t.c=e=a),(N(e)||"function"===typeof u.Promise&&e instanceof u.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,Vs(t)||(n=!0)}}t.c=e,r&&(a=_(t.m,t,!0),r=_(t.m,t,!1),e instanceof Fs?(Us(e,a,r),e.C=!0):e.then(a,r)),n&&(e=new Ws(e),Xs[e.a]=e,t.h=e.a)}function Gs(){L.call(this)}function Ys(){L.call(this)}function Ws(t){this.a=u.setTimeout(_(this.c,this),0),this.b=t}(n=Ts.prototype).Ma=function(){"undefined"!=typeof a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",gs(this.b,Ds(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},n.abort=function(){this.a&&this.c&&(gs(this.b,Ds(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Rs(this))},n.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Rs(this,!0)),Ts.bb.Da.call(this)},n.Wb=function(){this.ya||(this.N||this.i||this.f?Is(this):this.Jc())},n.Jc=function(){Is(this)},n.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Es:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(as,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return gs(this.b,"Can not get response: "+e.message),null}},Fs.prototype.cancel=function(t){if(this.a)this.c instanceof Fs&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Ys(this),Bs(this),js(this,!1,t))}},Fs.prototype.m=function(t,e){this.i=!1,js(this,t,e)},Fs.prototype.then=function(t,e,n){var r,i,o=new _e((function(t,e){r=t,i=e}));return Us(this,r,(function(t){t instanceof Ys?o.cancel():i(t)})),o.then(t,e,n)},Fs.prototype.$goog_Thenable=!0,S(Gs,L),Gs.prototype.message="Deferred has already fired",Gs.prototype.name="AlreadyCalledError",S(Ys,L),Ys.prototype.message="Deferred was canceled",Ys.prototype.name="CanceledError",Ws.prototype.c=function(){throw delete Xs[this.a],this.b};var Xs={};function Hs(t){var e={},n=e.document||document,r=At(t).toString(),i=ge(document,"SCRIPT"),o={Xb:i,Ma:void 0},s=new Fs(o),a=null,c=null!=e.timeout?e.timeout:5e3;return 0<c&&(a=window.setTimeout((function(){Ks(i,!0);var t=new Qs(Js,"Timeout reached for loading script "+r);Bs(s),js(s,!1,t)}),c),o.Ma=a),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ks(i,e.xd||!1,a),Bs(s),js(s,!0,null))},i.onerror=function(){Ks(i,!0,a);var t=new Qs($s,"Error while loading script "+r);Bs(s),js(s,!1,t)},yt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),le(i,o),function(t,e){bt(t,"HTMLScriptElement"),t.src=At(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=u?e=l(e.document):(null===h&&(h=l(u.document)),e=h),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function qs(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Ks(t,!0,this.Ma)}}function Ks(t,e,n){null!=n&&u.clearTimeout(n),t.onload=f,t.onerror=f,t.onreadystatechange=f,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var $s=0,Js=1;function Qs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),L.call(this,n),this.code=t}function Zs(t){this.f=t}function ta(t,n,r){if(this.c=t,t=n||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||ra,this.g=gt(t.secureTokenHeaders||ia),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||oa,this.a=gt(t.firebaseHeaders||sa),r&&(this.a["X-Client-Version"]=r,this.g["X-Client-Version"]=r),r="Node"==Er(),!(r=u.XMLHttpRequest||r&&e.default.INTERNAL.node&&e.default.INTERNAL.node.XMLHttpRequest)&&!Tr())throw new A("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Tr()?this.f=new ms(self):Sr()?this.f=new Zs(r):this.f=new es,this.b=null}S(Qs,L),S(Zs,Jo),Zs.prototype.a=function(){return new this.f},Zs.prototype.b=function(){return{}};var ea,na="idToken",ra=new Yr(3e4,6e4),ia={"Content-Type":"application/x-www-form-urlencoded"},oa=new Yr(3e4,6e4),sa={"Content-Type":"application/json"};function aa(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ua(t,e){e&&(t.l=ca("https://securetoken.googleapis.com/v1/token",e),t.h=ca("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=ca("https://identitytoolkit.googleapis.com/v2/",e))}function ca(t,e){return t=Vn(t),e=Vn(e.url),t.f=t.a+t.f,Dn(t,e.c),t.a=e.a,Fn(t,e.g),t.toString()}function ha(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function la(t,e,n,r,i,o,s){(function(){var t=Ir();return!((t=Or(t)!=Ar?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t)&&(!Kt||!ue||9<ue)})()||Tr()?t=_(t.u,t):(ea||(ea=new _e((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{u[da]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Us(t,null,e,void 0)}(Hs(Ot(fa,{onload:da})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=_(t.s,t)),t(e,n,r,i,o,s)}ta.prototype.T=function(){return this.b},ta.prototype.u=function(t,e,n,r,i,o){if(Tr()&&("undefined"===typeof u.fetch||"undefined"===typeof u.Headers||"undefined"===typeof u.Request))throw new A("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new Ts(this.f);if(o){s.g=Math.max(0,o);var a=setTimeout((function(){s.dispatchEvent("timeout")}),o)}En(s,"complete",(function(){a&&clearTimeout(a);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return gs(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)})),Sn(s,"ready",(function(){a&&clearTimeout(a),He(this)})),Sn(s,"timeout",(function(){a&&clearTimeout(a),He(this),e&&e(null)})),As(s,t,n,r,i)};var fa=new wt(Et,"https://apis.google.com/js/client.js?onload=%{onload}"),da="__fcb"+Math.floor(1e6*Math.random()).toString();function pa(t,e,n,r,i,o,s){var a=Vn(e+n);Bn(a,"key",t.c),s&&Bn(a,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Bn(a,c,i[c]);return new _e((function(e,n){la(t,a.toString(),(function(t){t?t.error?n(cu(t,o||{})):e(t):n(new A("network-request-failed"))}),r,u?void 0:or(Br(i)),t.a,t.v.get())}))}function va(t){if("string"!==typeof(t=t.email)||!br.test(t))throw new A("invalid-email")}function ga(t){"email"in t&&va(t)}function ma(t){if(!t[na]){if(t.mfaPendingCredential)throw new A("multi-factor-auth-required",null,gt(t));throw new A("internal-error")}}function ya(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new A("internal-error")}else{if(!t.sessionInfo)throw new A("missing-verification-id");if(!t.code)throw new A("missing-verification-code")}}ta.prototype.s=function(t,e,n,r,i){var o=this;ea.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},ta.prototype.Ab=function(){return au(this,Ka,{})},ta.prototype.Cb=function(t,e){return au(this,Ha,{idToken:t,email:e})},ta.prototype.Db=function(t,e){return au(this,qa,{idToken:t,password:e})};var ba={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function wa(t){if(!t.phoneVerificationInfo)throw new A("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new A("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new A("missing-verification-code")}function xa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new A("internal-error")}function _a(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(er(t=new Jn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function Ta(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=$o(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=$o(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=$o(t)):t.errorMessage&&(e=uu(t.errorMessage)),e)throw e;ma(t)}function Ea(t,e){return e.returnIdpCredential=!0,au(t,Qa,e)}function Sa(t,e){return e.returnIdpCredential=!0,au(t,tu,e)}function ka(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,au(t,Za,e)}function Aa(t){if(!t.oobCode)throw new A("invalid-action-code")}(n=ta.prototype).Eb=function(t,e){var n={idToken:t},r=[];return pt(ba,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),au(this,Ha,n)},n.wb=function(t,e){return yt(t={requestType:"PASSWORD_RESET",email:t},e),au(this,za,t)},n.xb=function(t,e){return yt(t={requestType:"EMAIL_SIGNIN",email:t},e),au(this,Ba,t)},n.vb=function(t,e){return yt(t={requestType:"VERIFY_EMAIL",idToken:t},e),au(this,Ua,t)},n.Fb=function(t,e,n){return yt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),au(this,Va,t)},n.gb=function(t){return au(this,ru,t)},n.ob=function(t,e){return au(this,Wa,{oobCode:t,newPassword:e})},n.Sa=function(t){return au(this,Ca,{oobCode:t})},n.kb=function(t){return au(this,Oa,{oobCode:t})};var Oa={endpoint:"setAccountInfo",A:Aa,Z:"email",B:!0},Ca={endpoint:"resetPassword",A:Aa,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new A("internal-error")},B:!0},Pa={endpoint:"signupNewUser",A:function(t){if(va(t),!t.password)throw new A("weak-password")},G:ma,V:!0,B:!0},Ia={endpoint:"createAuthUri",B:!0},Ra={endpoint:"deleteAccount",O:["idToken"]},Ma={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new A("internal-error")}},Na={endpoint:"emailLinkSignin",O:["email","oobCode"],A:va,G:ma,V:!0,B:!0},La={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:va,G:ma,V:!0},Da={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:wa,G:ma,B:!0,Na:!0},Fa={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:wa,G:ma,B:!0,Na:!0},ja={endpoint:"getAccountInfo"},Ba={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new A("internal-error");va(t)},Z:"email",B:!0},Ua={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",B:!0},Va={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",B:!0},za={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new A("internal-error");va(t)},Z:"email",B:!0},Ga={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Ya={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new A("internal-error")}},Wa={endpoint:"resetPassword",A:Aa,Z:"email",B:!0},Xa={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ha={endpoint:"setAccountInfo",O:["idToken"],A:ga,V:!0},qa={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(ga(t),!t.password)throw new A("weak-password")},G:ma,V:!0},Ka={endpoint:"signupNewUser",G:ma,V:!0,B:!0},$a={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new A("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new A("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},Ja={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},Qa={endpoint:"verifyAssertion",A:xa,Za:_a,G:Ta,V:!0,B:!0},Za={endpoint:"verifyAssertion",A:xa,Za:_a,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new A("user-not-found");if(t.errorMessage)throw uu(t.errorMessage);ma(t)},V:!0,B:!0},tu={endpoint:"verifyAssertion",A:function(t){if(xa(t),!t.idToken)throw new A("internal-error")},Za:_a,G:Ta,V:!0},eu={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new A("invalid-custom-token")},G:ma,V:!0,B:!0},nu={endpoint:"verifyPassword",A:function(t){if(va(t),!t.password)throw new A("wrong-password")},G:ma,V:!0,B:!0},ru={endpoint:"verifyPhoneNumber",A:ya,G:ma,B:!0},iu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new A("internal-error");ya(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",$o(t);ma(t)}},ou={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ya,G:ma,B:!0},su={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[na]^!!t.refreshToken)throw new A("internal-error")},B:!0,Na:!0};function au(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,e.O))return Pe(new A("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return Ce(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&"undefined"===typeof n.tenantId&&(n.tenantId=t.b),pa(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new A("internal-error");return r[e.Z]}))}function uu(t){return cu({error:{errors:[{message:t}],code:400,message:t}})}function cu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new A(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",yt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new A(r[i],e);return!e&&t&&(e=jr(t)),new A("internal-error",e)}function hu(t){this.b=t,this.a=null,this.sb=function(t){return(pu||(pu=new _e((function(t,e){function n(){Gr(),Rr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Gr(),e(Error("Network Error"))},timeout:fu.get()})}if(Rr("gapi.iframes.Iframe"))t();else if(Rr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[r]=function(){Rr("gapi.load")?n():e(Error("Network Error"))},Ce(Hs(r=Ot(lu,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw pu=null,t})))).then((function(){return new _e((function(e,n){Rr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),du.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var lu=new wt(Et,"https://apis.google.com/js/api.js?onload=%{onload}"),fu=new Yr(3e4,6e4),du=new Yr(5e3,15e3),pu=null;function vu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=zn((t=Vn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=zn("https",this.l,null,"/__/auth/iframe"),this.a=t,Bn(this.a,"apiKey",this.h),Bn(this.a,"appName",this.i),this.b=null,this.c=[]}function gu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function mu(t){try{return e.default.app(t).auth().Ga()}catch(n){return[]}}function yu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function bu(t){var e=fr();return function(t){return au(t,Ga,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Vn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Vn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:yr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new qo(fr())}))}function wu(t){return t.m||(t.m=wr().then((function(){if(!t.u){var e=t.c,n=t.i,r=mu(t.b),i=new vu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Z(r||[]),t.u=i.toString()}t.v=new hu(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then((function(){t.a.register("authEvent",e,Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Yo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ce(n)}return n.status="ERROR",Ce(n)}))}(t)}))),t.m}function xu(t){return t.l||(t.C=t.c?Pr(t.c,mu(t.b)):null,t.l=new ta(t.g,M(t.i),t.C),t.f&&ua(t.l,t.f)),t.l}function _u(t,e,n,r,i,o,s,a,u,c,h,l){return(t=new gu(t,e,n,r,i,l)).l=o,t.g=s,t.i=a,t.b=gt(u||null),t.f=c,t.zb(h).toString()}function Tu(t){if(this.a=t||e.default.INTERNAL.reactNative&&e.default.INTERNAL.reactNative.AsyncStorage,!this.a)throw new A("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Eu(t){this.b=t,this.a={},this.f=_(this.c,this)}vu.prototype.toString=function(){return this.f?Bn(this.a,"v",this.f):tr(this.a.b,"v"),this.b?Bn(this.a,"eid",this.b):tr(this.a.b,"eid"),this.c.length?Bn(this.a,"fw",this.c.join(",")):tr(this.a.b,"fw"),this.a.toString()},gu.prototype.zb=function(t){return this.h=t,this},gu.prototype.toString=function(){if(this.v){var t=Vn(this.v.url);t=zn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=zn("https",this.u,null,"/__/auth/handler");if(Bn(t,"apiKey",this.s),Bn(t,"appName",this.c),Bn(t,"authType",this.m),this.a.isOAuthProvider){var n=this.a;try{var r=e.default.app(this.c).auth().la()}catch(u){r=null}for(var i in n.pb=r,Bn(t,"providerId",this.a.providerId),n=Br((r=this.a).Jb))n[i]=n[i].toString();i=r.Qc,n=gt(n);for(var o=0;o<i.length;o++){var s=i[o];s in n&&delete n[s]}r.qb&&r.pb&&!n[r.qb]&&(n[r.qb]=r.pb),vt(n)||Bn(t,"customParameters",jr(n))}if("function"===typeof this.a.Rb&&((r=this.a.Rb()).length&&Bn(t,"scopes",r.join(","))),this.l?Bn(t,"redirectUrl",this.l):tr(t.b,"redirectUrl"),this.g?Bn(t,"eventId",this.g):tr(t.b,"eventId"),this.i?Bn(t,"v",this.i):tr(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Un(t,a)&&Bn(t,a,this.b[a]);return this.h?Bn(t,"tid",this.h):tr(t.b,"tid"),this.f?Bn(t,"eid",this.f):tr(t.b,"eid"),(a=mu(this.c)).length&&Bn(t,"fw",a.join(",")),t.toString()},(n=yu.prototype).Pb=function(t,e,n){var r=new A("popup-closed-by-user"),i=new A("web-storage-unsupported"),o=this,s=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return wu(t).then((function(){return function(t,e){return t.sb.then((function(){return new _e((function(n){t.a.send(e.type,e,n,Rr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&"undefined"!==typeof t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&gr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return function(t){return new _e((function(e){return function n(){On(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return On(n).then((function(){e(r)}))}))},n.Yb=function(){var t=Ir();return!Fr(t)&&!zr(t)},n.Ub=function(){return!1},n.Nb=function(t,e,n,r,i,o,s,a){if(!t)return Pe(new A("popup-blocked"));if(s&&!Fr())return this.ma().o((function(e){gr(t),i(e)})),r(),Ce();this.a||(this.a=bu(xu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw gr(t),i(e),e}));return r(),e})).then((function(){(zo(n),s)||dr(_u(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},n.Ob=function(t,e,n,r){this.a||(this.a=bu(xu(this)));var i=this;return this.a.then((function(){zo(e),dr(_u(i.s,i.g,i.b,t,e,fr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},n.ma=function(){var t=this;return wu(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new A("network-request-failed")}))},n.ac=function(){return!0},n.Ea=function(t){this.h.push(t)},n.Ta=function(t){J(this.h,(function(e){return e==t}))},(n=Tu.prototype).get=function(t){return Ce(this.a.getItem(t)).then((function(t){return t&&Ur(t)}))},n.set=function(t,e){return Ce(this.a.setItem(t,jr(e)))},n.U=function(t){return Ce(this.a.removeItem(t))},n.ca=function(){},n.ia=function(){};var Su,ku=[];function Au(t,e,n){vt(t.a)&&t.b.addEventListener("message",t.f),"undefined"===typeof t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Ou(t){this.a=t}function Cu(t){this.c=t,this.b=!1,this.a=[]}function Pu(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Pe(Error("connection_unavailable"));var h=r?800:50,l="undefined"!==typeof MessageChannel?new MessageChannel:null;return new _e((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),"undefined"!==typeof t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return Iu(t,c),e})).o((function(e){throw Iu(t,c),e}))}function Iu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),J(t.a,(function(t){return t==e}))}}function Ru(){if(!Du())throw new A("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=u.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Tr()&&self?(this.v=function(){var t=Tr()?self:null;if(W(ku,(function(n){n.b==t&&(e=n)})),!e){var e=new Eu(t);ku.push(e)}return e}(),Au(this.v,"keyChanged",(function(e,n){return Vu(t).then((function(e){return 0<e.length&&W(t.a,(function(t){t(e)})),{keyProcessed:K(e,n.key)}}))})),Au(this.v,"ping",(function(){return Ce(["keyChanged"])}))):function(){var t=u.navigator;return t&&t.serviceWorker?Ce().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Ce(null)}().then((function(e){(t.h=e)&&(t.g=new Cu(new Ou(e)),Pu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&K(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Mu(t){return new _e((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new _e((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Mu(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Nu(t){return t.i||(t.i=Mu(t)),t.i}function Lu(t,e){var n=0;return new _e((function r(i,o){Nu(t).then(e).then(i).o((function(e){if(!(3<++n))return Nu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Du(){try{return!!u.indexedDB}catch(fs){return!1}}function Fu(t){return t.objectStore("firebaseLocalStorage")}function ju(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Bu(t){return new _e((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Uu(t,e){return t.g&&t.h&&function(){var t=u.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Pu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Ce()}function Vu(t){return Nu(t).then((function(t){var e=Fu(ju(t,!1));return e.getAll?Bu(e.getAll()):new _e((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=pr(t.c,n),t.c=n}return r}))}function zu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Gu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ce().then((function(){if(Du()){var t=Vr(),r="__sak"+t;return Su||(Su=new Ru),(n=Su).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){W(e.a,(function(e){e(t)}))})),t}))}function Yu(){this.a={},this.type="inMemory"}function Wu(){if(!function(){var t="Node"==Er();if(!(t=Xu()||t&&e.default.INTERNAL.node&&e.default.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(n){return!1}}()){if("Node"==Er())throw new A("internal-error","The LocalStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Xu()||e.default.INTERNAL.node.localStorage,this.type="localStorage"}function Xu(){try{var t=u.localStorage,e=Vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Hu(){this.type="nullStorage"}function qu(){if(!function(){var t="Node"==Er();if(!(t=Ku()||t&&e.default.INTERNAL.node&&e.default.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(n){return!1}}()){if("Node"==Er())throw new A("internal-error","The SessionStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Ku()||e.default.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Ku(){try{var t=u.sessionStorage,e=Vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function $u(){var t={};t.Browser=Zu,t.Node=tc,t.ReactNative=ec,t.Worker=nc,this.a=t[Er()]}Eu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];W(r,(function(e){i.push(Ce().then((function(){return e(t.origin,t.data.data)})))})),Re(i).then((function(r){var i=[];W(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),W(i,(function(t){for(var e in t)"undefined"===typeof t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Ou.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Cu.prototype.close=function(){for(;0<this.a.length;)Iu(this,this.a[0]);this.b=!0},(n=Ru.prototype).set=function(t,e){var n=this,r=!1;return Lu(this,(function(e){return Bu((e=Fu(ju(e,!0))).get(t))})).then((function(i){return Lu(n,(function(o){if(o=Fu(ju(o,!0)),i)return i.value=e,Bu(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Bu(o.add(s))}))})).then((function(){return n.c[t]=e,Uu(n,t)})).oa((function(){r&&n.b--}))},n.get=function(t){return Lu(this,(function(e){return Bu(Fu(ju(e,!1)).get(t))})).then((function(t){return t&&t.value}))},n.U=function(t){var e=this,n=!1;return Lu(this,(function(r){return n=!0,e.b++,Bu(Fu(ju(r,!0)).delete(t))})).then((function(){return delete e.c[t],Uu(e,t)})).oa((function(){n&&e.b--}))},n.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=Vu(t).then((function(e){0<e.length&&W(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}zu(t),e()}(this),this.a.push(t)},n.ia=function(t){J(this.a,(function(e){return e==t})),0==this.a.length&&zu(this)},(n=Gu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},n.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},n.U=function(t){return this.b.then((function(e){return e.U(t)}))},n.ca=function(t){this.a.push(t)},n.ia=function(t){J(this.a,(function(e){return e==t}))},(n=Yu.prototype).get=function(t){return Ce(this.a[t])},n.set=function(t,e){return this.a[t]=e,Ce()},n.U=function(t){return delete this.a[t],Ce()},n.ca=function(){},n.ia=function(){},(n=Wu.prototype).get=function(t){var e=this;return Ce().then((function(){return Ur(e.a.getItem(t))}))},n.set=function(t,e){var n=this;return Ce().then((function(){var r=jr(e);null===r?n.U(t):n.a.setItem(t,r)}))},n.U=function(t){var e=this;return Ce().then((function(){e.a.removeItem(t)}))},n.ca=function(t){u.window&&ln(u.window,"storage",t)},n.ia=function(t){u.window&&pn(u.window,"storage",t)},(n=Hu.prototype).get=function(){return Ce(null)},n.set=function(){return Ce()},n.U=function(){return Ce()},n.ca=function(){},n.ia=function(){},(n=qu.prototype).get=function(t){var e=this;return Ce().then((function(){return Ur(e.a.getItem(t))}))},n.set=function(t,e){var n=this;return Ce().then((function(){var r=jr(e);null===r?n.U(t):n.a.setItem(t,r)}))},n.U=function(t){var e=this;return Ce().then((function(){e.a.removeItem(t)}))},n.ca=function(){},n.ia=function(){};var Ju,Qu,Zu={F:Wu,cb:qu},tc={F:Wu,cb:qu},ec={F:Tu,cb:Hu},nc={F:Wu,cb:Hu},rc={rd:"local",NONE:"none",td:"session"};function ic(){var t=!(zr(Ir())||!_r()),e=Fr(),n=Mr();this.m=t,this.h=e,this.l=n,this.a={},Ju||(Ju=new $u),t=Ju;try{this.g=!lr()&&Hr()||!u.indexedDB?new t.a.F:new Gu(Tr()?new Yu:new t.a.F)}catch(r){this.g=new Yu,this.h=!0}try{this.i=new t.a.cb}catch(r){this.i=new Yu}this.v=new Yu,this.f=_(this.Zb,this),this.b={}}function oc(){return Qu||(Qu=new ic),Qu}function sc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function ac(t,e){return"firebase:"+t.name+(e?":"+e:"")}function uc(t,e,n){return n=ac(e,n),"local"==e.F&&(t.b[n]=null),sc(t,e.F).U(n)}function cc(t){t.c&&(clearInterval(t.c),t.c=null)}function hc(t){this.a=t,this.b=oc()}(n=ic.prototype).get=function(t,e){return sc(this,t.F).get(ac(t,e))},n.set=function(t,e,n){var r=ac(t,n),i=this,o=sc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},n.addListener=function(t,e,n){t=ac(t,e),this.l&&(this.b[t]=u.localStorage.getItem(t)),vt(this.a)&&(sc(this,"local").ca(this.f),this.h||(lr()||!Hr())&&u.indexedDB||!this.l||function(t){cc(t),t.c=setInterval((function(){for(var e in t.a){var n=u.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ze({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},n.removeListener=function(t,e,n){t=ac(t,e),this.a[t]&&(J(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),vt(this.a)&&(sc(this,"local").ia(this.f),cc(this))},n.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=u.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if("undefined"!==typeof t.a.a?sc(this,"local").ia(this.f):cc(this),this.m)if(n=u.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?u.localStorage.setItem(e,r):u.localStorage.removeItem(e);else if(this.b[e]===r&&"undefined"===typeof t.a.a)return;var o=this;n=function(){"undefined"===typeof t.a.a&&o.b[e]===u.localStorage.getItem(e)||(o.b[e]=u.localStorage.getItem(e),o.nb(e))},Kt&&ue&&10==ue&&u.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else W(t,_(this.nb,this))},n.nb=function(t){this.a[t]&&W(this.a[t],(function(t){t()}))};var lc,fc={name:"authEvent",F:"local"};function dc(){this.a=oc()}function pc(t,e){this.b=vc,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0===lc&&(lc=u.Int32Array?new Int32Array(_c):_c),this.reset()}S(pc,(function(){this.b=-1}));for(var vc=64,gc=vc-1,mc=[],yc=0;yc<gc;yc++)mc[yc]=0;var bc=Q(128,mc);function wc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|lc[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function xc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"===typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(wc(t),i=0);else{if(!p(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(wc(t),i=0)}}t.c=i,t.g+=n}pc.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):Z(this.h)};var _c=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Tc(){pc.call(this,8,Ec)}S(Tc,pc);var Ec=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Sc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new dc,this.g=new hc(this.h),this.f=null,this.b=[],this.a=this.c=null}function kc(t){return new A("invalid-cordova-configuration",t)}function Ac(t){var e=new Tc;xc(e,t),t=[];var n=8*e.g;56>e.c?xc(e,bc,56-e.c):xc(e,bc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(wc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return H(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Oc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Cc(t){return t.f||(t.f=t.ma().then((function(){return new _e((function(e){t.Ea((function n(r){return e(r),t.Ta(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Pc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=ao(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"===typeof(o=Ur(Un(o=Vn(i),"firebaseError")||null))?O(o):null)?new Go(r.c,r.b,null,null,o,null,r.T()):new Go(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Oc(t,i)}))}var n=new Go("unknown",null,null,null,new A("no-auth-event")),r=!1,i=On(500).then((function(){return Pc(t).then((function(){r||Oc(t,n)}))})),o=u.handleOpenURL;u.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Rr("BuildInfo.packageName",u).toLowerCase()+"://")&&e({url:t}),"function"===typeof o)try{o(t)}catch(n){console.error(n)}},Ho||(Ho=new Wo),function(t){var e=Ho;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"===typeof(t=Rr("universalLinks.subscribe",u))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Pc(t){var e=null;return function(t){return t.b.get(fc,t.a).then((function(t){return Yo(t)}))}(t.g).then((function(n){return e=n,uc((n=t.g).b,fc,n.a)})).then((function(){return e}))}function Ic(t){this.a=t,this.b=oc()}(n=Sc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(xr(void 0)?wr().then((function(){return new _e((function(t,e){var n=u.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Pe(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!==typeof Rr("universalLinks.subscribe",u))throw kc("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof Rr("BuildInfo.packageName",u))throw kc("cordova-plugin-buildinfo is not installed");if("function"!==typeof Rr("cordova.plugins.browsertab.openUrl",u))throw kc("cordova-plugin-browsertab is not installed");if("function"!==typeof Rr("cordova.InAppBrowser.open",u))throw kc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new A("cordova-not-ready")}))},n.Pb=function(t,e){return e(new A("operation-not-supported-in-this-environment")),Ce()},n.Nb=function(){return Pe(new A("operation-not-supported-in-this-environment"))},n.ac=function(){return!1},n.Yb=function(){return!0},n.Ub=function(){return!0},n.Ob=function(t,e,n,r){if(this.c)return Pe(new A("redirect-operation-pending"));var i=this,o=u.document,s=null,a=null,c=null,h=null;return this.c=Ce().then((function(){return zo(e),Cc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Go(e,r,null,o,new A("no-auth-event"),null,i),a=Rr("BuildInfo.packageName",u);if("string"!==typeof a)throw new A("invalid-cordova-configuration");var c=Rr("BuildInfo.displayName",u),h={};if(Ir().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=a;else{if(!Ir().toLowerCase().match(/android/))return Pe(new A("operation-not-supported-in-this-environment"));h.apn=a}c&&(h.appDisplayName=c),o=Ac(o),h.sessionId=o;var l=_u(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(fc,s.w(),e)})).then((function(){var e=Rr("cordova.plugins.browsertab.isAvailable",u);if("function"!==typeof e)throw new A("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!==typeof(n=Rr("cordova.plugins.browsertab.openUrl",u)))throw new A("invalid-cordova-configuration");n(l)}else{if("function"!==typeof(n=Rr("cordova.InAppBrowser.open",u)))throw new A("invalid-cordova-configuration");e=Ir(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new _e((function(t,e){a=function(){var e=Rr("cordova.plugins.browsertab.close",u);return t(),"function"===typeof e&&e(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(a),c=function(){s||(s=On(2e3).then((function(){e(new A("redirect-cancelled-by-user"))})))},h=function(){Wr()&&c()},o.addEventListener("resume",c,!1),Ir().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Pc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),s&&s.cancel(),a&&i.Ta(a),i.c=null}))},n.Ea=function(t){this.b.push(t),Cc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Go("unknown",null,null,null,new A("no-auth-event")),t(e))}))},n.Ta=function(t){J(this.b,(function(e){return e==t}))};var Rc={name:"pendingRedirect",F:"session"};function Mc(t){return uc(t.b,Rc,t.a)}function Nc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=_(this.s,this),this.b=new Kc,this.C=new th,this.g=new Ic(Hc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Lc(this.D,this.v,this.m,C,this.J)}function Lc(t,n,r,i,o){var s=e.default.SDK_VERSION||null;return xr()?new Sc(t,n,r,s,i,o):new yu(t,n,r,s,i,o)}function Dc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Fc(t){t.a.Yb()&&Dc(t).o((function(e){var n=new Go("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));Gc(e)&&t.s(n)})),t.a.Ub()||$c(t.b)}function jc(t,e){K(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Rc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Mc(t.g).then((function(){Dc(t).o((function(e){var n=new Go("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));Gc(e)&&t.s(n)}))})):Fc(t)})).o((function(){Fc(t)}))}function Bc(t,e){J(t.h,(function(t){return t==e}))}Nc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Lc(this.D,this.v,this.m,null,this.J),this.i={}},Nc.prototype.s=function(t){if(!t)throw new A("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return $c(this.b),e};var Uc=new Yr(2e3,1e4),Vc=new Yr(3e4,6e4);function zc(t,e,n,r,i,o,s){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function Gc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Yc(t,e,n,r,i){var o;return function(t){return t.b.set(Rc,"pending",t.a)}(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(Gc(e))throw new A("operation-not-supported-in-this-environment");return o=e,Mc(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new _e((function(){})):Mc(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function Wc(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Uc.get())}Nc.prototype.ra=function(){return this.b.ra()};var Xc={};function Hc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function qc(t,e,n,r){var i=Hc(e,n,r);return Xc[i]||(Xc[i]=new Nc(t,e,n,r)),Xc[i]}function Kc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function $c(t){t.g||(t.g=!0,Zc(t,!1,null,null))}function Jc(t){t.g&&!t.i&&Zc(t,!1,null,null)}function Qc(t,e){if(t.b=function(){return Ce(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Zc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Pe(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Qc(t,n):Qc(t,{user:null}),t.f=[],t.c=[]}function th(){}function eh(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function nh(t,e){this.a=e,Qr(this,"verificationId",t)}function rh(t,e,n,r){return new Bo(t).gb(e,n).then((function(t){return new nh(t,r)}))}function ih(t){var e=Hi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new A("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Zr(this,{token:t,expirationTime:Xr(1e3*e.exp),authTime:Xr(1e3*e.auth_time),issuedAtTime:Xr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function oh(t,e,n){var r=e&&e[ah];if(!r)throw new A("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=gt(e),this.g=n,this.c=new uo(null,r),this.b=[];var i=this;W(e[sh]||[],(function(t){(t=ri(t))&&i.b.push(t)})),Qr(this,"auth",this.a),Qr(this,"session",this.c),Qr(this,"hints",this.b)}Kc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Kc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Zc(this,!0,null,t.a),Ce()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){Zc(t,a,e,null)})).o((function(e){Zc(t,a,null,e)}))}(this,t,e):Pe(new A("invalid-auth-event")):(Zc(this,!1,null,null),Ce())}else Pe(new A("invalid-auth-event"))},Kc.prototype.ra=function(){var t=this;return new _e((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new A("timeout");t.a&&t.a.cancel(),t.a=On(Vc.get()).then((function(){t.b||(t.g=!0,Zc(t,!0,null,e))}))}(t))}))},th.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Ce()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):Pe(new A("invalid-auth-event"))}else Pe(new A("invalid-auth-event"))},nh.prototype.confirm=function(t){return t=Uo(this.verificationId,t),this.a(t)};var sh="mfaInfo",ah="mfaPendingCredential";function uh(t,e,n,r){A.call(this,"multi-factor-auth-required",r,e),this.b=new oh(t,e,n),Qr(this,"resolver",this.b)}function ch(t,e,n){if(t&&g(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new uh(e,t.serverResponse,n,t.message)}catch(r){}return null}function hh(){}function lh(t){Qr(this,"factorId",t.fa),this.a=t}function fh(t){if(lh.call(this,t),this.a.fa!=Bo.PROVIDER_ID)throw new A("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function dh(t,e){for(var n in Qe.call(this,t),e)this[n]=e[n]}function ph(t,e){this.a=t,this.b=[],this.c=_(this.yc,this),ln(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&W(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[si]=t.uid),t.displayName&&(r[ii]=t.displayName),t.enrollmentTime&&(r[oi]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ai]=t.phoneNumber);try{e=new ui(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),vh(this,n)}function vh(t,e){t.b=e,Qr(t,"enrolledFactors",e)}function gh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function mh(t,e){t.stop(),t.b=On(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=u.document,e=null;return Wr()||!t?Ce():new _e((function(n){e=function(){Wr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){mh(t,!0)})).o((function(e){t.i(e)&&mh(t,!1)}))}function yh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function bh(t,e){"undefined"===typeof e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function wh(t,e){t.b=Xi(e[na]||""),t.a=e.refreshToken,bh(t,"undefined"!==typeof(e=e.expiresIn)?Number(e):void 0)}function xh(t,e){return function(t,e){return new _e((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?la(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(cu(t)):t.access_token&&t.refresh_token?n(t):r(new A("internal-error")):r(new A("network-request-failed"))}),"POST",Zn(e).toString(),t.g,t.m.get()):r(new A("internal-error"))}))}(t.f,e).then((function(e){return t.b=Xi(e.access_token),t.a=e.refresh_token,bh(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function _h(t,e){this.a=t||null,this.b=e||null,Zr(this,{lastSignInTime:Xr(e||null),creationTime:Xr(t||null)})}function Th(t,e,n,r,i,o){Zr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Eh(t,n,r){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var i=e.default.SDK_VERSION?Pr(e.default.SDK_VERSION):null;this.a=new ta(this.l,M(C),i),(this.u=t.emulatorConfig||null)&&ua(this.a,this.u),this.h=new yh(this.a),Mh(this,n[na]),wh(this.h,n),Qr(this,"refreshToken",this.h.a),Dh(this,r||{}),Tn.call(this),this.P=!1,this.s&&Nr()&&(this.b=qc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new gh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.ba=_(this.ib,this);var o=this;this.za=null,this.Pa=function(t){o.xa(t.h)},this.qa=null,this.Ba=function(t){Sh(o,t.c)},this.$=null,this.aa=[],this.Oa=function(t){Oh(o,t.f)},this.ja=null,this.S=new ph(this,r),Qr(this,"multiFactor",this.S)}function Sh(t,e){t.u=e,ua(t.a,e),t.b&&(e=t.b,t.b=qc(t.s,t.l,t.m,t.u),t.P&&(Bc(e,t),jc(t.b,t)))}function kh(t,e){t.qa&&pn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&ln(e,"languageCodeChanged",t.Pa)}function Ah(t,e){t.$&&pn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&ln(e,"emulatorConfigChanged",t.Ba)}function Oh(t,n){t.aa=n,ha(t.a,e.default.SDK_VERSION?Pr(e.default.SDK_VERSION,t.aa):null)}function Ch(t,e){t.ja&&pn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&ln(e,"frameworkChanged",t.Oa)}function Ph(t){try{return e.default.app(t.m).auth()}catch(n){throw new A("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Ih(t){t.J||t.D.b||(t.D.start(),pn(t,"tokenChanged",t.ba),ln(t,"tokenChanged",t.ba))}function Rh(t){pn(t,"tokenChanged",t.ba),t.D.stop()}function Mh(t,e){t.Aa=e,Qr(t,"_lat",e)}function Nh(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return Re(e).then((function(){return t}))}function Lh(t){t.b&&!t.P&&(t.P=!0,jc(t.b,t))}function Dh(t,e){Zr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new _h(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Fh(){}function jh(t){return Ce().then((function(){if(t.J)throw new A("app-deleted")}))}function Bh(t){return H(t.providerData,(function(t){return t.providerId}))}function Uh(t,e){e&&(Vh(t,e.providerId),t.providerData.push(e))}function Vh(t,e){J(t.providerData,(function(t){return t.providerId==e}))}function zh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Qr(t,e,n)}function Gh(t,e){t!=e&&(Zr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Qr(t,"metadata",function(t){return new _h(t.a,t.b)}(e.metadata)):Qr(t,"metadata",new _h),W(e.providerData,(function(e){Uh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),Qr(t,"refreshToken",t.h.a),vh(t.S,e.S.b))}function Yh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return au(t.a,ja,{idToken:e}).then(_(t.Kc,t))}(t,e).then((function(){return n||zh(t,"isAnonymous",!1),e}))}))}function Wh(t,e){e[na]&&t.Aa!=e[na]&&(wh(t.h,e),t.dispatchEvent(new dh("tokenChanged")),Mh(t,e[na]),zh(t,"refreshToken",t.h.a))}function Xh(t,e){return Yh(t).then((function(){if(K(Bh(t),e))return Nh(t).then((function(){throw new A("provider-already-linked")}))}))}function Hh(t,e,n){return ti({user:t,credential:Vo(e),additionalUserInfo:e=Qi(e),operationType:n})}function qh(t,e){return Wh(t,e),t.reload().then((function(){return t}))}function Kh(t,n,r,i,o){if(!Nr())return Pe(new A("operation-not-supported-in-this-environment"));if(t.i&&!o)return Pe(t.i);var s=Ji(r.providerId),a=Vr(t.uid+":::"),u=null;(!Fr()||_r())&&t.s&&r.isOAuthProvider&&(u=_u(t.s,t.l,t.m,n,r,null,a,e.default.SDK_VERSION||null,null,null,t.tenantId,t.u));var c=mr(u,s&&s.va,s&&s.ua);return i=i().then((function(){if(Jh(t),!o)return t.I().then((function(){}))})).then((function(){return zc(t.b,c,n,r,a,!!u,t.tenantId)})).then((function(){return new _e((function(e,r){t.na(n,null,new A("cancelled-popup-request"),t.g||null),t.f=e,t.C=r,t.g=a,t.c=Wc(t.b,t,n,c,a)}))})).then((function(t){return c&&gr(c),t?ti(t):null})).o((function(t){throw c&&gr(c),t})),Qh(t,i,o)}function $h(t,e,n,r,i){if(!Nr())return Pe(new A("operation-not-supported-in-this-environment"));if(t.i&&!i)return Pe(t.i);var o=null,s=Vr(t.uid+":::");return r=r().then((function(){if(Jh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,Nh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(el,t.w(),e.a)),e})).then((function(){return Yc(t.b,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ha)return nl(t.ha);throw o})).then((function(){if(o)throw o})),Qh(t,r,i)}function Jh(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new A("internal-error");throw new A("auth-domain-config-required")}}function Qh(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),Pe(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new dh("userInvalidated")),t.i=e),e}))}(t,e,n);return t.N.push(r),r.oa((function(){$(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ch(e.w(),Ph(t),_(t.jc,t))),n||e}))}function Zh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[na]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new Eh(e,n,t);return t.providerData&&W(t.providerData,(function(t){t&&Uh(i,ti(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function tl(t){this.a=t,this.b=oc()}oh.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=gt(e.f);return delete n[sh],delete n[ah],yt(n,t),e.g(n)}))},S(uh,A),hh.prototype.tb=function(t,e,n){return e.type==co?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),yt(n,{phoneVerificationInfo:jo(t.a)}),au(e,Da,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return yt(n={mfaPendingCredential:n},{phoneVerificationInfo:jo(t.a)}),au(e,Fa,n)}))}(this,t,e)},S(lh,hh),S(fh,lh),S(dh,Qe),(n=ph.prototype).yc=function(t){vh(this,function(t){var e=[];return W(t.mfaInfo||[],(function(t){(t=ri(t))&&e.push(t)})),e}(t.hd))},n.Sb=function(){return this.a.I().then((function(t){return new uo(t,null)}))},n.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return Wh(n.a,t),n.a.reload()}))},n.bd=function(t){var e=this,n="string"===typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return au(r,su,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=X(e.b,(function(t){return t.uid!=n}));return vh(e,r),Wh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},n.w=function(){return{multiFactor:{enrolledFactors:H(this.b,(function(t){return t.w()}))}}},gh.prototype.start=function(){this.a=this.c,mh(this,!0)},gh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},yh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},yh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Pe(new A("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?xh(this,{grant_type:"refresh_token",refresh_token:this.a}):Ce(null):Ce({accessToken:this.b.toString(),refreshToken:this.a})},_h.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},S(Eh,Tn),Eh.prototype.xa=function(t){this.za=t,aa(this.a,t)},Eh.prototype.la=function(){return this.za},Eh.prototype.Ga=function(){return Z(this.aa)},Eh.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Qr(Eh.prototype,"providerId","firebase"),(n=Eh.prototype).reload=function(){var t=this;return Qh(this,jh(this).then((function(){return Yh(t).then((function(){return Nh(t)})).then(Fh)})))},n.oc=function(t){return this.I(t).then((function(t){return new ih(t)}))},n.I=function(t){var e=this;return Qh(this,jh(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new A("internal-error");return t.accessToken!=e.Aa&&(Mh(e,t.accessToken),e.dispatchEvent(new dh("tokenChanged"))),zh(e,"refreshToken",t.refreshToken),t.accessToken})))},n.Kc=function(t){if(!(t=t.users)||!t.length)throw new A("internal-error");Dh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?H(t,(function(t){return new Th(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Uh(this,e[n]);zh(this,"isAnonymous",!(this.email&&t.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new dh("userReloaded",{hd:t}))},n.Lc=function(t){return $r("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},n.ub=function(t){var e=this,n=null;return Qh(this,t.c(this.a,this.uid).then((function(t){return Wh(e,t),n=Hh(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},n.Cc=function(t){return $r("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},n.rb=function(t){var e=this,n=null;return Qh(this,Xh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Hh(e,t,"link"),qh(e,t)})).then((function(){return n})))},n.Dc=function(t,e){var n=this;return Qh(this,Xh(this,"phone").then((function(){return rh(Ph(n),t,e,_(n.rb,n))})))},n.Mc=function(t,e){var n=this;return Qh(this,Ce().then((function(){return rh(Ph(n),t,e,_(n.ub,n))})),!0)},n.Cb=function(t){var e=this;return Qh(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Wh(e,t),e.reload()})))},n.ed=function(t){var e=this;return Qh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Wh(e,t),e.reload()})))},n.Db=function(t){var e=this;return Qh(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return Wh(e,t),e.reload()})))},n.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return jh(this);var e=this;return Qh(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Wh(e,t),zh(e,"displayName",t.displayName||null),zh(e,"photoURL",t.photoUrl||null),W(e.providerData,(function(t){"password"===t.providerId&&(Qr(t,"displayName",e.displayName),Qr(t,"photoURL",e.photoURL))})),Nh(e)})).then(Fh))},n.cd=function(t){var e=this;return Qh(this,Yh(this).then((function(n){return K(Bh(e),t)?function(t,e,n){return au(t,Ma,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return W(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),W(Bh(e),(function(t){n[t]||Vh(e,t)})),n[Bo.PROVIDER_ID]||Qr(e,"phoneNumber",null),Nh(e)})):Nh(e).then((function(){throw new A("no-such-provider")}))})))},n.delete=function(){var t=this;return Qh(this,this.I().then((function(e){return au(t.a,Ra,{idToken:e})})).then((function(){t.dispatchEvent(new dh("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");kh(t,null),Ah(t,null),Ch(t,null),t.N=[],t.J=!0,Rh(t),Qr(t,"refreshToken",null),t.b&&Bc(t.b,t)}))},n.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},n.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},n.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?_(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?_(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?_(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?_(this.Mb,this):null},n.Ec=function(t){var e=this;return Kh(this,"linkViaPopup",t,(function(){return Xh(e,t.providerId).then((function(){return Nh(e)}))}),!1)},n.Nc=function(t){return Kh(this,"reauthViaPopup",t,(function(){return Ce()}),!0)},n.Fc=function(t){var e=this;return $h(this,"linkViaRedirect",t,(function(){return Xh(e,t.providerId)}),!1)},n.Oc=function(t){return $h(this,"reauthViaRedirect",t,(function(){return Ce()}),!0)},n.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Qh(this,this.I().then((function(n){return Sa(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Hh(i,t,"link"),qh(i,t)})).then((function(){return o})))},n.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Qh(this,Ce().then((function(){return fo(ka(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Hh(i,t,"reauthenticate"),Wh(i,t),i.i=null,i.reload()})).then((function(){return o})),!0)},n.vb=function(t){var e=this,n=null;return Qh(this,this.I().then((function(e){return n=e,"undefined"===typeof t||vt(t)?{}:zi(new Ri(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},n.Fb=function(t,e){var n=this,r=null;return Qh(this,this.I().then((function(t){return r=t,"undefined"===typeof e||vt(e)?{}:zi(new Ri(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},n.jc=function(t){var e=null,n=this;return Qh(this,t=fo(Ce(t),n.uid).then((function(t){return e=Hh(n,t,"reauthenticate"),Wh(n,t),n.i=null,n.reload()})).then((function(){return e})),!0)},n.toJSON=function(){return this.w()},n.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&yt(t,this.metadata.w()),W(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),yt(t,this.S.w()),t};var el={name:"redirectUser",F:"session"};function nl(t){return uc(t.b,el,t.a)}function rl(t){this.a=t,this.b=oc(),this.c=null,this.f=function(t){var e=sl("local"),n=sl("session"),r=sl("none");return function(t,e,n){var r=ac(e,n),i=sc(t,e.F);return t.get(e,n).then((function(o){var s=null;try{s=Ur(u.localStorage.getItem(r))}catch(a){}if(s&&!o)return u.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&u.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(ol,t.a).then((function(t){return t?sl(t):e}))}))}))})).then((function(e){return t.c=e,il(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(sl("local"),this.a,_(this.g,this))}function il(t,e){var n,r=[];for(n in rc)rc[n]!==e&&r.push(uc(t.b,sl(rc[n]),t.a));return r.push(uc(t.b,ol,t.a)),function(t){return new _e((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Ie(t[a],T(o,a),s);else e(i)}))}(r)}rl.prototype.g=function(){var t=this,e=sl("local");hl(this,(function(){return Ce().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return il(t,"local").then((function(){t.c=e}))}))}))};var ol={name:"persistence",F:"session"};function sl(t){return{name:"authUser",F:t}}function al(t,e){return hl(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function ul(t){return hl(t,(function(){return uc(t.b,t.c,t.a)}))}function cl(t,e,n){return hl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Zh(t||{})}))}))}function hl(t,e){return t.f=t.f.then(e,e),t.f}function ll(t){if(this.l=!1,Qr(this,"settings",new eh),Qr(this,"app",t),!wl(this).options||!wl(this).options.apiKey)throw new A("invalid-api-key");t=e.default.SDK_VERSION?Pr(e.default.SDK_VERSION):null,this.a=new ta(wl(this).options&&wl(this).options.apiKey,M(C),t),this.P=[],this.s=[],this.N=[],this.Pa=e.default.INTERNAL.createSubscribe(_(this.zc,this)),this.W=void 0,this.ib=e.default.INTERNAL.createSubscribe(_(this.Ac,this)),yl(this,null),this.i=new rl(wl(this).options.apiKey+":"+wl(this).name),this.D=new tl(wl(this).options.apiKey+":"+wl(this).name),this.$=El(this,function(t){var e=wl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(el,t.a).then((function(t){return t&&e&&(t.authDomain=e),Zh(t||{})}))}(t.D,wl(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),nl(t.D)}));return El(t,e)}(t).then((function(){return cl(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return al(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:ul(t.i)}))):null})).then((function(e){yl(t,e||null)}));return El(t,n)}(this)),this.h=El(this,function(t){return t.$.then((function(){return gl(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(sl("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=_(this.Zc,this),this.Ba=_(this.da,this),this.qa=_(this.mc,this),this.za=_(this.wc,this),this.Aa=_(this.xc,this),this.b=null,function(t){var e=wl(t).options.authDomain,n=wl(t).options.apiKey;e&&Nr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=qc(e,n,wl(t).name,t.R),jc(t.b,t),xl(t)&&Lh(xl(t)),t.m){Lh(t.m);var r=t.m;r.xa(t.la()),kh(r,t),Oh(r=t.m,t.J),Ch(r,t),Sh(r=t.m,t.R),Ah(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=_(this.delete,this),this.INTERNAL.logFramework=_(this.Gc,this),this.u=0,Tn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=Vn(this.R.url);t=ti({protocol:t.c,host:t.a,port:t.g,options:ti({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function fl(t){Qe.call(this,"languageCodeChanged"),this.h=t}function dl(t){Qe.call(this,"emulatorConfigChanged"),this.c=t}function pl(t){Qe.call(this,"frameworkChanged"),this.f=t}function vl(t){return t.Oa||Pe(new A("auth-domain-config-required"))}function gl(t){if(!Nr())return Pe(new A("operation-not-supported-in-this-environment"));var e=vl(t).then((function(){return t.b.ra()})).then((function(t){return t?ti(t):null}));return El(t,e)}function ml(t,e){var n={};return n.apiKey=wl(t).options.apiKey,n.authDomain=wl(t).options.authDomain,n.appName=wl(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return function(t,e,n,r){var i=new Eh(t,e);return n&&(i.ha=n),r&&Oh(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return xl(t)&&e.uid==xl(t).uid?(Gh(xl(t),e),t.da(e)):(yl(t,e),Lh(e),t.da(e))})).then((function(){Tl(t)}))}function yl(t,e){xl(t)&&(function(t,e){J(t.W,(function(t){return t==e}))}(xl(t),t.Ba),pn(xl(t),"tokenChanged",t.qa),pn(xl(t),"userDeleted",t.za),pn(xl(t),"userInvalidated",t.Aa),Rh(xl(t))),e&&(e.W.push(t.Ba),ln(e,"tokenChanged",t.qa),ln(e,"userDeleted",t.za),ln(e,"userInvalidated",t.Aa),0<t.u&&Ih(e)),Qr(t,"currentUser",e),e&&(e.xa(t.la()),kh(e,t),Oh(e,t.J),Ch(e,t),Sh(e,t.R),Ah(e,t))}function bl(t,e){var n=null,r=null;return El(t,e.then((function(e){return n=Vo(e),r=Qi(e),ml(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ch(e.w(),t,_(t.kc,t))),n||e})).then((function(){return ti({user:xl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function wl(t){return t.app}function xl(t){return t.currentUser}function _l(t){return xl(t)&&xl(t)._lat||null}function Tl(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](_l(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](_l(t))}}function El(t,e){return t.P.push(e),e.oa((function(){$(t.P,e)})),e}function Sl(){}function kl(){this.a={},this.b=1e12}rl.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new A("invalid-persistence-type"),n=new A("unsupported-persistence-type");t:{for(r in rc)if(rc[r]==t){var r=!0;break t}r=!1}if(!r||"string"!==typeof t)throw e;switch(Er()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Du()&&"none"!==t)throw n;break;default:if(!Mr()&&"none"!==t)throw n}}(t),hl(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,il(n,t)})).then((function(){if(n.c=sl(t),e)return n.b.set(n.c,e,n.a)})):Ce()}))},S(ll,Tn),S(fl,Qe),S(dl,Qe),S(pl,Qe),(n=ll.prototype).yb=function(t){return El(this,t=this.i.yb(t))},n.xa=function(t){this.aa===t||this.l||(this.aa=t,aa(this.a,this.aa),this.dispatchEvent(new fl(this.la())))},n.la=function(){return this.aa},n.fd=function(){var t=u.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},n.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new A("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),u.document&&!t&&wr().then((function(){var t=u.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),u.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,ua(this.a,this.R),this.dispatchEvent(new dl(this.R))}},n.Gc=function(t){this.J.push(t),ha(this.a,e.default.SDK_VERSION?Pr(e.default.SDK_VERSION,this.J):null),this.dispatchEvent(new pl(this.J))},n.Ga=function(){return Z(this.J)},n.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},n.T=function(){return this.S},n.toJSON=function(){return{apiKey:wl(this).options.apiKey,authDomain:wl(this).options.authDomain,appName:wl(this).name,currentUser:xl(this)&&xl(this).w()}},n.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},n.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},n.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?_(this.ic,this):null},n.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return bl(i,Ea(i.a,o))}))},n.Xc=function(t){if(!Nr())return Pe(new A("operation-not-supported-in-this-environment"));var n=this,r=Ji(t.providerId),i=Vr(),o=null;(!Fr()||_r())&&wl(this).options.authDomain&&t.isOAuthProvider&&(o=_u(wl(this).options.authDomain,wl(this).options.apiKey,wl(this).name,"signInViaPopup",t,null,i,e.default.SDK_VERSION||null,null,null,this.T(),this.R));var s=mr(o,r&&r.va,r&&r.ua);return El(this,r=vl(this).then((function(e){return zc(e,s,"signInViaPopup",t,i,!!o,n.T())})).then((function(){return new _e((function(t,e){n.na("signInViaPopup",null,new A("cancelled-popup-request"),n.g),n.f=t,n.C=e,n.g=i,n.c=Wc(n.b,n,"signInViaPopup",s,i)}))})).then((function(t){return s&&gr(s),t?ti(t):null})).o((function(t){throw s&&gr(s),t})))},n.Yc=function(t){if(!Nr())return Pe(new A("operation-not-supported-in-this-environment"));var e=this,n=vl(this).then((function(){return function(t){return hl(t,(function(){return t.b.set(ol,t.c.F,t.a)}))}(e.i)})).then((function(){return Yc(e.b,"signInViaRedirect",t,void 0,e.T())}));return El(this,n)},n.ra=function(){var t=this;return gl(this).then((function(e){return t.b&&Jc(t.b.b),e})).o((function(e){throw t.b&&Jc(t.b.b),e}))},n.dd=function(t){if(!t)return Pe(new A("null-user"));if(this.S!=t.tenantId)return Pe(new A("tenant-id-mismatch"));var e=this,n={};n.apiKey=wl(this).options.apiKey,n.authDomain=wl(this).options.authDomain,n.appName=wl(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[na]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new Eh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&Oh(e,r),Gh(e,t),e}(t,n,e.D,e.Ga());return El(this,this.h.then((function(){if(wl(e).options.apiKey!=t.l)return r.reload()})).then((function(){return xl(e)&&t.uid==xl(e).uid?(Gh(xl(e),t),e.da(t)):(yl(e,r),Lh(r),e.da(r))})).then((function(){Tl(e)})))},n.Bb=function(){var t=this;return El(this,this.h.then((function(){return t.b&&Jc(t.b.b),xl(t)?(yl(t,null),ul(t.i).then((function(){Tl(t)}))):Ce()})))},n.Zc=function(){var t=this;return cl(this.i,wl(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=xl(t)&&e){n=xl(t).uid;var r=e.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Gh(xl(t),e),xl(t).I();(xl(t)||e)&&(yl(t,e),e&&(Lh(e),e.ha=t.D),t.b&&jc(t.b,t),Tl(t))}}))},n.da=function(t){return al(this.i,t)},n.mc=function(){Tl(this),this.da(xl(this))},n.wc=function(){this.Bb()},n.xc=function(){this.Bb()},n.kc=function(t){var e=this;return this.h.then((function(){return bl(e,Ce(t))}))},n.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(xl(e))}))},n.Ac=function(t){var e=this;!function(t,e){t.N.push(e),El(t,t.h.then((function(){!t.l&&K(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(_l(t)))})))}(this,(function(){t.next(xl(e))}))},n.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"===typeof t?t(xl(r)):"function"===typeof t.next&&t.next(xl(r))})),this.Pa(t,e,n)},n.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"===typeof t?t(xl(r)):"function"===typeof t.next&&t.next(xl(r))})),this.ib(t,e,n)},n.nc=function(t){var e=this;return El(this,this.h.then((function(){return xl(e)?xl(e).I(t).then((function(t){return{accessToken:t}})):null})))},n.Tc=function(t){var e=this;return this.h.then((function(){return bl(e,au(e.a,eu,{token:t}))})).then((function(t){var n=t.user;return zh(n,"isAnonymous",!1),e.da(n),t}))},n.Uc=function(t,e){var n=this;return this.h.then((function(){return bl(n,au(n.a,nu,{email:t,password:e}))}))},n.dc=function(t,e){var n=this;return this.h.then((function(){return bl(n,au(n.a,Pa,{email:t,password:e}))}))},n.ab=function(t){var e=this;return this.h.then((function(){return bl(e,t.ka(e.a))}))},n.Sc=function(t){return $r("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},n.Ab=function(){var t=this;return this.h.then((function(){var e=xl(t);if(e&&e.isAnonymous){var n=ti({providerId:null,isNewUser:!1});return ti({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return bl(t,t.a.Ab()).then((function(e){var n=e.user;return zh(n,"isAnonymous",!0),t.da(n),e}))}))},n.getUid=function(){return xl(this)&&xl(this).uid||null},n.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&xl(this)&&Ih(xl(this))},n.Pc=function(t){var e=this;W(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&xl(this)&&Rh(xl(this)),this.removeAuthTokenListener(t)},n.addAuthTokenListener=function(t){var e=this;this.s.push(t),El(this,this.h.then((function(){e.l||K(e.s,t)&&t(_l(e))})))},n.removeAuthTokenListener=function(t){J(this.s,(function(e){return e==t}))},n.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(sl("local"),t.a,this.ja),this.b&&(Bc(this.b,this),Jc(this.b.b)),Promise.resolve()},n.hc=function(t){return El(this,function(t,e){return au(t,Ia,{identifier:e,continueUri:Lr()?fr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},n.Bc=function(t){return!!Lo(t)},n.xb=function(t,e){var n=this;return El(this,Ce().then((function(){var t=new Ri(e);if(!t.c)throw new A("argument-error",Li+" must be true when sending sign in link to email");return zi(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},n.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},n.ob=function(t,e){return El(this,this.a.ob(t,e).then((function(){})))},n.Sa=function(t){return El(this,this.a.Sa(t).then((function(t){return new ci(t)})))},n.kb=function(t){return El(this,this.a.kb(t).then((function(){})))},n.wb=function(t,e){var n=this;return El(this,Ce().then((function(){return"undefined"===typeof e||vt(e)?{}:zi(new Ri(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},n.Wc=function(t,e){return El(this,rh(this,t,e,_(this.ab,this)))},n.Vc=function(t,e){var n=this;return El(this,Ce().then((function(){var r=e||fr(),i=No(t,r);if(!(r=Lo(r)))throw new A("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new A("tenant-id-mismatch");return n.ab(i)})))},Sl.prototype.render=function(){},Sl.prototype.reset=function(){},Sl.prototype.getResponse=function(){},Sl.prototype.execute=function(){};var Al=null;function Ol(t,e){return(e=Cl(e))&&t.a[e]||null}function Cl(t){return(t="undefined"===typeof t?1e12:t)?t.toString():null}function Pl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=he(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():ln(this.f,"click",this.i)}function Il(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Rl(){}function Ml(){}kl.prototype.render=function(t,e){return this.a[this.b.toString()]=new Pl(t,e),this.b++},kl.prototype.reset=function(t){var e=Ol(this,t);t=Cl(t),e&&t&&(e.delete(),delete this.a[t])},kl.prototype.getResponse=function(t){return(t=Ol(this,t))?t.getResponse():null},kl.prototype.execute=function(t){(t=Ol(this,t))&&t.execute()},Pl.prototype.getResponse=function(){return Il(this),this.b},Pl.prototype.execute=function(){Il(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},Pl.prototype.delete=function(){Il(this),this.g=!0,clearTimeout(this.a),this.a=null,pn(this.f,"click",this.i)},Qr(Rl,"FACTOR_ID","phone"),Ml.prototype.g=function(){return Al||(Al=new kl),Ce(Al)},Ml.prototype.c=function(){};var Nl=null;function Ll(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Dl=new wt(Et,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Fl=new Yr(3e4,6e4);Ll.prototype.g=function(t){var e=this;return new _e((function(n,r){var i=setTimeout((function(){r(new A("network-request-failed"))}),Fl.get());!u.grecaptcha||t!==e.f&&!e.b?(u[e.a]=function(){if(u.grecaptcha){e.f=t;var o=u.grecaptcha.render;u.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(u.grecaptcha)}else clearTimeout(i),r(new A("internal-error"));delete u[e.a]},Ce(Hs(Ot(Dl,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new A("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(u.grecaptcha))}))},Ll.prototype.c=function(){this.b--};var jl=null;function Bl(t,e,n,r,i,o,s){if(Qr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,s?(Nl||(Nl=new Ml),s=Nl):(jl||(jl=new Ll),s=jl),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[zl])throw new A("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Gl],!u.document)throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!he(e)||!this.i&&he(e).hasChildNodes())throw new A("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new ta(t,o||null,i||null),this.u=r||function(){return null};var a=this;this.l=[];var c=this.a[Ul];this.a[Ul]=function(t){if(Yl(a,t),"function"===typeof c)c(t);else if("string"===typeof c){var e=Rr(c,u);"function"===typeof e&&e(t)}};var h=this.a[Vl];this.a[Vl]=function(){if(Yl(a,null),"function"===typeof h)h();else if("string"===typeof h){var t=Rr(h,u);"function"===typeof t&&t()}}}var Ul="callback",Vl="expired-callback",zl="sitekey",Gl="size";function Yl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Wl(t,e){return t.h.push(e),e.oa((function(){$(t.h,e)})),e}function Xl(t){if(t.J)throw new A("internal-error","RecaptchaVerifier instance has been destroyed.")}function Hl(t,n,r){var i=!1;try{this.b=r||e.default.app()}catch(a){throw new A("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new A("invalid-api-key");r=this.b.options.apiKey;var o=this,s=null;try{s=this.b.auth().Ga()}catch(a){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}s=e.default.SDK_VERSION?Pr(e.default.SDK_VERSION,s):null,Bl.call(this,r,t,n,(function(){try{var t=o.b.auth().la()}catch(e){t=null}return t}),s,M(C),i)}function ql(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new A("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Kl.length)throw new A("internal-error","Argument validator received an unsupported number of arguments.");n=Kl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new A("argument-error",t+" failed: "+r)}(n=Bl.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Wl(this,Ce().then((function(){if(Lr()&&!Tr())return wr();throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,au(t.s,Ya,{})})).then((function(e){t.a[zl]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},n.render=function(){Xl(this);var t=this;return Wl(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=he(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ce&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Wt(s.name),'"'),s.type){o.push(' type="',Wt(s.type),'"');var a={};yt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=ge(i,o),s&&("string"===typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):le(o,s)),2<r.length&&ve(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},n.verify=function(){Xl(this);var t=this;return Wl(this,this.render().then((function(e){return new _e((function(n){var r=t.g.getResponse(e);if(r)n(r);else{t.l.push((function e(r){r&&(function(t,e){J(t.l,(function(t){return t==e}))}(t,e),n(r))})),t.i&&t.g.execute(t.c)}}))})))},n.reset=function(){Xl(this),null!==this.c&&this.g.reset(this.c)},n.clear=function(){Xl(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=he(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},S(Hl,Bl);var Kl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function $l(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"===typeof t}}}function Jl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"===typeof t}}}function Ql(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:g}}function Zl(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"===typeof t}}}function tf(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function ef(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function nf(t,e){return g(t)&&"string"===typeof t.type&&t.type===e&&"function"===typeof t.Ha}function rf(t){return g(t)&&"string"===typeof t.uid}function of(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function sf(t,e){for(var n in e){var r=e[n].name;t[r]=cf(r,t[n],e[n].j)}}function af(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:T((function(t){return this[t]}),n),set:T((function(t,e,n,r){ql(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function uf(t,e,n,r){t[e]=cf(e,n,r)}function cf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return ql(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}sf(ll.prototype,{kb:{name:"applyActionCode",j:[$l("code")]},Sa:{name:"checkActionCode",j:[$l("code")]},ob:{name:"confirmPasswordReset",j:[$l("code"),$l("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[$l("email"),$l("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[$l("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[$l("emailLink")]},Hc:{name:"onAuthStateChanged",j:[of(Ql(),Zl(),"nextOrObserver"),Zl("opt_error",!0),Zl("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[of(Ql(),Zl(),"nextOrObserver"),Zl("opt_error",!0),Zl("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[$l("email"),of(Ql("opt_actionCodeSettings",!0),tf(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[$l("email"),Ql("actionCodeSettings")]},yb:{name:"setPersistence",j:[$l("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[ef()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[ef()]},Tc:{name:"signInWithCustomToken",j:[$l("token")]},Uc:{name:"signInWithEmailAndPassword",j:[$l("email"),$l("password")]},Vc:{name:"signInWithEmailLink",j:[$l("email"),$l("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[$l("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[of({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof Eh)}},tf(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[$l(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[$l("url"),Ql("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[$l("code")]}}),af(ll.prototype,{lc:{name:"languageCode",lb:of($l(),tf(),"languageCode")},ti:{name:"tenantId",lb:of($l(),tf(),"tenantId")}}),ll.Persistence=rc,ll.Persistence.LOCAL="local",ll.Persistence.SESSION="session",ll.Persistence.NONE="none",sf(Eh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Jl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Jl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[ef()]},rb:{name:"linkWithCredential",j:[ef()]},Dc:{name:"linkWithPhoneNumber",j:[$l("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[ef()]},ub:{name:"reauthenticateWithCredential",j:[ef()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[$l("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[of(Ql("opt_actionCodeSettings",!0),tf(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[$l(null,!0)]},cd:{name:"unlink",j:[$l("provider")]},Cb:{name:"updateEmail",j:[$l("email")]},Db:{name:"updatePassword",j:[$l("password")]},ed:{name:"updatePhoneNumber",j:[ef("phone")]},Eb:{name:"updateProfile",j:[Ql("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[$l("email"),of(Ql("opt_actionCodeSettings",!0),tf(null,!0),"opt_actionCodeSettings",!0)]}}),sf(kl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),sf(Sl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),sf(_e.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),af(eh.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Jl("appVerificationDisabledForTesting")}}),sf(nh.prototype,{confirm:{name:"confirm",j:[$l("verificationCode")]}}),uf(lo,"fromJSON",(function(t){t="string"===typeof t?JSON.parse(t):t;for(var e,n=[bo,Ro,Fo,go],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[of($l(),Ql(),"json")]),uf(Mo,"credential",(function(t,e){return new Io(t,e)}),[$l("email"),$l("password")]),sf(Io.prototype,{w:{name:"toJSON",j:[$l(null,!0)]}}),sf(To.prototype,{Ca:{name:"addScope",j:[$l("scope")]},Ka:{name:"setCustomParameters",j:[Ql("customOAuthParameters")]}}),uf(To,"credential",Eo,[of($l(),Ql(),"token")]),uf(Mo,"credentialWithLink",No,[$l("email"),$l("emailLink")]),sf(So.prototype,{Ca:{name:"addScope",j:[$l("scope")]},Ka:{name:"setCustomParameters",j:[Ql("customOAuthParameters")]}}),uf(So,"credential",ko,[of($l(),Ql(),"token")]),sf(Ao.prototype,{Ca:{name:"addScope",j:[$l("scope")]},Ka:{name:"setCustomParameters",j:[Ql("customOAuthParameters")]}}),uf(Ao,"credential",Oo,[of($l(),of(Ql(),tf()),"idToken"),of($l(),tf(),"accessToken",!0)]),sf(Co.prototype,{Ka:{name:"setCustomParameters",j:[Ql("customOAuthParameters")]}}),uf(Co,"credential",Po,[of($l(),Ql(),"token"),$l("secret",!0)]),sf(_o.prototype,{Ca:{name:"addScope",j:[$l("scope")]},credential:{name:"credential",j:[of($l(),of(Ql(),tf()),"optionsOrIdToken"),of($l(),tf(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Ql("customOAuthParameters")]}}),sf(mo.prototype,{w:{name:"toJSON",j:[$l(null,!0)]}}),sf(po.prototype,{w:{name:"toJSON",j:[$l(null,!0)]}}),uf(Bo,"credential",Uo,[$l("verificationId"),$l("verificationCode")]),sf(Bo.prototype,{gb:{name:"verifyPhoneNumber",j:[of($l(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?nf(t.session,co)&&"string"===typeof t.phoneNumber:t.session&&t.multiFactorHint?nf(t.session,ho)&&rf(t.multiFactorHint):t.session&&t.multiFactorUid?nf(t.session,ho)&&"string"===typeof t.multiFactorUid:!!t.phoneNumber&&"string"===typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!==typeof t.type||"function"!==typeof t.verify)}}]}}),sf(Do.prototype,{w:{name:"toJSON",j:[$l(null,!0)]}}),sf(A.prototype,{toJSON:{name:"toJSON",j:[$l(null,!0)]}}),sf(Ko.prototype,{toJSON:{name:"toJSON",j:[$l(null,!0)]}}),sf(qo.prototype,{toJSON:{name:"toJSON",j:[$l(null,!0)]}}),sf(uh.prototype,{toJSON:{name:"toJSON",j:[$l(null,!0)]}}),sf(oh.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),sf(ph.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},$l("displayName",!0)]},bd:{name:"unenroll",j:[of({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:rf},$l(),"multiFactorInfoIdentifier")]}}),sf(Hl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),uf(Ti,"parseLink",Ii,[$l("link")]),uf(Rl,"assertion",(function(t){return new fh(t)}),[ef("phone")]),function(){if("undefined"===typeof e.default||!e.default.INTERNAL||!e.default.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:li,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:hi,VERIFY_AND_CHANGE_EMAIL:fi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:ll,AuthCredential:lo,Error:A};uf(t,"EmailAuthProvider",Mo,[]),uf(t,"FacebookAuthProvider",To,[]),uf(t,"GithubAuthProvider",So,[]),uf(t,"GoogleAuthProvider",Ao,[]),uf(t,"TwitterAuthProvider",Co,[]),uf(t,"OAuthProvider",_o,[$l("providerId")]),uf(t,"SAMLAuthProvider",xo,[$l("providerId")]),uf(t,"PhoneAuthProvider",Bo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof ll)}}]),uf(t,"RecaptchaVerifier",Hl,[of($l(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Ql("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof e.default.app.App)}}]),uf(t,"ActionCodeURL",Ti,[]),uf(t,"PhoneMultiFactorGenerator",Rl,[]),e.default.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new ll(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),e.default.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:_((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:_(t.nc,t),addAuthTokenListener:_(t.cc,t),removeAuthTokenListener:_(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),e.default.registerVersion("@firebase/auth","0.16.8"),e.default.INTERNAL.extendNamespace({User:Eh})}()}).apply("undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}).call(this,n(45))},function(t,e,n){"use strict";(function(t,e){var r=n(12),i=n(20),o=n(0),s=n(13),a=n(19),u="";function c(t){u=t}var h=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.stringify)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.jsonEval)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),l=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.contains)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),f=function(t){try{if("undefined"!==typeof window&&"undefined"!==typeof window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new h(e)}}catch(n){}return new l},d=f("localStorage"),p=f("sessionStorage"),v=new a.Logger("@firebase/database"),g=function(){var t=1;return function(){return t++}}(),m=function(t){var e=Object(o.stringToByteArray)(t),n=new o.Sha1;n.update(e);var r=n.digest();return o.base64.encodeByteArray(r)},y=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r="",i=0;i<e.length;i++){var s=e[i];Array.isArray(s)||s&&"object"===typeof s&&"number"===typeof s.length?r+=t.apply(null,s):r+="object"===typeof s?Object(o.stringify)(s):s,r+=" "}return r},b=null,w=!0,x=function(t,e){Object(o.assert)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(v.logLevel=a.LogLevel.VERBOSE,b=v.log.bind(v),e&&p.set("logging_enabled",!0)):"function"===typeof t?b=t:(b=null,p.remove("logging_enabled"))},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===w&&(w=!1,null===b&&!0===p.get("logging_enabled")&&x(!0)),b){var n=y.apply(null,t);b(n)}},T=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];_.apply(void 0,Object(s.f)([t],Object(s.e)(e)))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+y.apply(void 0,Object(s.f)([],Object(s.e)(t)));v.error(n)},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+y.apply(void 0,Object(s.f)([],Object(s.e)(t)));throw v.error(n),new Error(n)},k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+y.apply(void 0,Object(s.f)([],Object(s.e)(t)));v.warn(n)},A=function(t){return"number"===typeof t&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},O="[MIN_NAME]",C="[MAX_NAME]",P=function(t,e){if(t===e)return 0;if(t===O||e===C)return-1;if(e===O||t===C)return 1;var n=U(t),r=U(e);return null!==n?null!==r?n-r===0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},I=function(t,e){return t===e?0:t<e?-1:1},R=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.stringify)(e))},M=function t(e){if("object"!==typeof e||null===e)return Object(o.stringify)(e);var n=[];for(var r in e)n.push(r);n.sort();for(var i="{",s=0;s<n.length;s++)0!==s&&(i+=","),i+=Object(o.stringify)(n[s]),i+=":",i+=t(e[n[s]]);return i+="}"},N=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function L(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var D=function(t){Object(o.assert)(!A(t),"Invalid JSON number");var e,n,r,i,s,a=1023;0===t?(n=0,r=0,e=1/t===-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),a))+a,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var u=[];for(s=52;s;s-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(e?1:0),u.reverse();var c=u.join(""),h="";for(s=0;s<64;s+=8){var l=parseInt(c.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),h+=l}return h.toLowerCase()};var F=new RegExp("^-?(0*)\\d{1,10}$"),j=-2147483648,B=2147483647,U=function(t){if(F.test(t)){var e=Number(t);if(e>=j&&e<=B)return e}return null},V=function(t){try{t()}catch(e){setTimeout((function(){var t=e.stack||"";throw k("Exception was thrown by user callback.",t),e}),Math.floor(0))}},z=function(t,e){var n=setTimeout(t,e);return"object"===typeof n&&n.unref&&n.unref(),n},G=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null===e||void 0===e?void 0:e.getImmediate({optional:!0}),this.appCheck||null===e||void 0===e||e.get().then((function(t){return n.appCheck=t}))}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise((function(n,r){setTimeout((function(){e.appCheck?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then((function(e){return e.addTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){k('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),Y=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(t){return r.auth_=t}))}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):new Promise((function(n,r){setTimeout((function(){e.auth_?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',k(t)},t}(),W=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),X="5",H=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,q="websocket",K="long_polling",$=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=d.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&d.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+e},t}();function J(t,e,n){var r;if(Object(o.assert)("string"===typeof e,"typeof type must == string"),Object(o.assert)("object"===typeof n,"typeof params must == object"),e===q)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==K)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return L(n,(function(t,e){i.push(t+"="+e)})),r+i.join("&")}var Q=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.contains)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.deepCopy)(this.counters_)},t}(),Z={},tt={};function et(t){var e=t.toString();return Z[e]||(Z[e]=new Q),Z[e]}var nt=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&V((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},t}(),rt="start",it="close",ot=function(){function t(t,e,n,r,i,o,s){var a=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=T(t),this.stats_=et(e),this.urlFn=function(t){return a.appCheckToken&&(t.ac=a.appCheckToken),J(e,K,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new nt(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(Object(o.isNodeSdk)()||"complete"===document.readyState)t();else{var e=!1,n=function n(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new st((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(s.e)(t,5),i=r[0],o=r[1],a=r[2];if(r[3],r[4],n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===rt)n.id=o,n.password=a;else{if(i!==it)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(s.e)(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v=X,n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&H.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!Object(o.isNodeSdk)()&&(!!t.forceAllow_||!t.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.stringify)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.base64Encode)(e),r=N(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.isNodeSdk)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.stringify)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),st=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.isNodeSdk)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=g(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))s='<script>document.domain="'+document.domain+'";<\/script>';var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||_("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;Object(o.isNodeSdk)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){_("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),at=null;"undefined"!==typeof MozWebSocket?at=MozWebSocket:"undefined"!==typeof WebSocket&&(at=WebSocket);var ut=function(){function e(t,n,r,i,o,s,a){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=T(this.connId),this.stats_=et(n),this.connURL=e.connectionURL_(n,s,a,i),this.nodeAdmin=n.nodeAdmin}return e.connectionURL_=function(t,e,n,r){var i={};return i.v=X,!Object(o.isNodeSdk)()&&"undefined"!==typeof location&&location.hostname&&H.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),r&&(i.ac=r),J(t,q,i)},e.prototype.open=function(e,n){var r=this;this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,d.set("previous_websocket_failure",!0);try{if(Object(o.isNodeSdk)()){var i=this.nodeAdmin?"AdminNode":"Node",s={headers:{"User-Agent":"Firebase/5/"+u+"/"+t.platform+"/"+i,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(s.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(s.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_COLLECTION_NAME:"highscores",REACT_APP_FIREBASE_APIKEY:'\u201dAIzaSyBnP9vqgX__NsGOWq40kkK--4F5P0yFsKc"',REACT_APP_FIREBASE_APPID:'1:795230851008:web:52465fb8f11d3fd3608225"',REACT_APP_FIREBASE_AUTHDOMAIN:"pinbaal-743d3.firebaseapp.com",REACT_APP_FIREBASE_MESSAGINGSENDERID:"795230851008",REACT_APP_FIREBASE_PROJECTID:"pinbaal-743d3",REACT_APP_FIREBASE_STORAGEBUCKET:"pinbaal-743d3.appspot.com",REACT_APP_SERVER_PORT:"https://server.pinbaal.com"}),c=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;c&&(s.proxy={origin:c}),this.mySock=new at(this.connURL,[],s)}else{s={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new at(this.connURL,[],s)}}catch(l){this.log_("Error instantiating WebSocket.");var h=l.message||l.data;return h&&this.log_(h),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(t){r.handleIncomingFrame(t)},this.mySock.onerror=function(t){r.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&r.log_(e),r.onClosed_()}},e.prototype.start=function(){},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==at&&!e.forceDisallow_},e.previouslyFailed=function(){return d.isInMemoryStorage||!0===d.get("previous_websocket_failure")},e.prototype.markConnectionHealthy=function(){d.remove("previous_websocket_failure")},e.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.jsonEval)(e);this.onMessage(n)}},e.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},e.prototype.extractFrameCount_=function(t){if(Object(o.assert)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},e.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},e.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.stringify)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=N(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},e.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},e.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},e.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},e.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),ct=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[ot,ut]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=ut&&ut.isAvailable(),o=i&&!ut.previouslyFailed();if(e.webSocketOnly&&(i||k("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[ut];else{var a=this.transports_=[];try{for(var u=Object(s.g)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var h=c.value;h&&h.isAvailable()&&a.push(h)}}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),ht=function(){function t(t,e,n,r,i,o,s,a,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=T("c:"+this.id+":"),this.transportManager_=new ct(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=z((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=R("t",t),n=R("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=R("t",t),n=R("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=R("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),X!==n&&k("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),z((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):z((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(d.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),lt=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ft=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.assert)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(s.f)([],Object(s.e)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.assert)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),dt=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Object(o.isMobileCordova)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Object(s.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.assert)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ft),pt=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function vt(){return new pt("")}function gt(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function mt(t){return t.pieces_.length-t.pieceNum_}function yt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new pt(t.pieces_,e)}function bt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function wt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function xt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new pt(e,0)}function _t(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof pt)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new pt(n,0)}function Tt(t){return t.pieceNum_>=t.pieces_.length}function Et(t,e){var n=gt(t),r=gt(e);if(null===n)return e;if(n===r)return Et(yt(t),yt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function St(t,e){for(var n=wt(t,0),r=wt(e,0),i=0;i<n.length&&i<r.length;i++){var o=P(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function kt(t,e){if(mt(t)!==mt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function At(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(mt(t)>mt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Ot=function(t,e){this.errorPrefix_=e,this.parts_=wt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.stringLength)(this.parts_[n]);Ct(this)};function Ct(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Pt(t))}function Pt(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var It,Rt,Mt=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(n="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(n="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return Object(s.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.assert)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ft),Nt=1e3,Lt=function(t){function e(n,r,i,s,a,u,c,h){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=s,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.appCheckTokenProvider_=c,l.authOverride_=h,l.id=e.nextPersistentConnectionId_++,l.log_=T("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Nt,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,h&&!Object(o.isNodeSdk)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Mt.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&dt.getInstance().on("online",l.onOnline_,l),l}return Object(s.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.stringify)(i)),Object(o.assert)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new o.Deferred,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var i=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.assert)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(o.assert)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,(function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"===typeof t&&Object(o.contains)(t,"w")){var n=Object(o.safeGet)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();k("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.isAdmin)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.isValidFormat)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)}))},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(o.assert)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.stringify)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+Object(o.stringify)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.assert)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Nt,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Nt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Nt),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return Object(s.b)(this,void 0,void 0,(function(){var t,n,r,i,a,u,c,h,l,f,d,p,v,g,m=this;return Object(s.d)(this,(function(y){switch(y.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,a=this.lastSessionId,u=!1,c=null,h=function(){c?c.close():(u=!0,r())},l=function(t){Object(o.assert)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)},this.realtime_={close:h,sendRequest:l},f=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,y.label=1;case 1:return y.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(f),this.appCheckTokenProvider_.getToken(f)])];case 2:return d=s.e.apply(void 0,[y.sent(),2]),p=d[0],v=d[1],u?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),this.authToken_=p&&p.accessToken,this.appCheckToken_=v&&v.token,c=new ht(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,(function(t){k(t+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),a)),[3,4];case 3:return g=y.sent(),this.log_("Failed to get token: "+g),u||(this.repoInfo_.nodeAdmin&&k(g),h()),[3,4];case 4:return[2]}}))}))},e.prototype.interrupt=function(t){_("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){_("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.isEmpty)(this.interruptReasons_)&&(this.reconnectDelay_=Nt,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return M(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new pt(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){_("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){_("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=Object(s.g)(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var u=(n=void 0,Object(s.g)(a.values())),c=u.next();!c.done;c=u.next()){var h=c.value;this.sendListen_(h)}}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(p){t={error:p}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.isNodeSdk)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+u.replace(/\./g,"-")]=1,Object(o.isMobileCordova)()?t["framework.cordova"]=1:Object(o.isReactNative)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=dt.getInstance().currentlyOnline();return Object(o.isEmpty)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(lt),Dt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Ft=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Dt(O,t),r=new Dt(O,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Dt.MIN},t}(),jt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return It},set:function(t){It=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return P(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.assertionError)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Dt.MIN},e.prototype.maxPost=function(){return new Dt(C,It)},e.prototype.makePost=function(t,e){return Object(o.assert)("string"===typeof t,"KeyIndex indexValue must always be a string."),new Dt(t,It)},e.prototype.toString=function(){return".key"},e}(Ft),Bt=new jt,Ut=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Vt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Gt.EMPTY_NODE,this.right=null!=o?o:Gt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Gt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Gt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),zt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Vt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Gt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Vt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Vt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ut(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ut(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ut(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ut(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new zt,t}();function Yt(t,e){return P(t.name,e.name)}function Wt(t,e){return P(t,e)}var Xt,Ht,qt,Kt=function(t){return"number"===typeof t?"number:"+D(t):"string:"+t},$t=function(t){if(t.isLeafNode()){var e=t.val();Object(o.assert)("string"===typeof e||"number"===typeof e||"object"===typeof e&&Object(o.contains)(e,".sv"),"Priority must be a string or number.")}else Object(o.assert)(t===Rt||t.isEmpty(),"priority of unexpected type.");Object(o.assert)(t===Rt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Jt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.assert)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),$t(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Xt},set:function(t){Xt=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return Tt(e)?this:".priority"===gt(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=gt(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.assert)(".priority"!==r||1===mt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(yt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Kt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?D(this.value_):this.value_,this.lazyHash_=m(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.assert)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.assert)(i>=0,"Unknown leaf type: "+n),Object(o.assert)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();var Qt,Zt,te=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?P(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Dt.MIN},e.prototype.maxPost=function(){return new Dt(C,new Jt("[PRIORITY-POST]",qt))},e.prototype.makePost=function(t,e){var n=Ht(t);return new Dt(e,new Jt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Ft),ee=new te,ne=Math.log(2),re=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/ne,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),ie=function(t,e,n,r){t.sort(e);var i=function e(r,i){var o,s,a=i-r;if(0===a)return null;if(1===a)return o=t[r],s=n?n(o):o,new Vt(s,o.node,Vt.BLACK,null,null);var u=parseInt(a/2,10)+r,c=e(r,u),h=e(u+1,i);return o=t[u],s=n?n(o):o,new Vt(s,o.node,Vt.BLACK,c,h)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),h=t[o],l=n?n(h):h;u(new Vt(l,h.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var h=e.nextBitIsOne(),l=Math.pow(2,e.count-(c+1));h?a(l,Vt.BLACK):(a(l,Vt.BLACK),a(l,Vt.RED))}return o}(new re(t.length));return new Gt(r||e,o)},oe={},se=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.assert)(oe&&ee,"ChildrenNode.ts has not been loaded"),Qt=Qt||new t({".priority":oe},{".priority":ee})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.safeGet)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Gt?e:null},t.prototype.hasIndex=function(t){return Object(o.contains)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.assert)(e!==Bt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,u=n.getIterator(Dt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),i.push(c),c=u.getNext();r=a?ie(i,e.getCompare()):oe;var h=e.toString(),l=Object(s.a)({},this.indexSet_);l[h]=e;var f=Object(s.a)({},this.indexes_);return f[h]=r,new t(f,l)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.map)(this.indexes_,(function(t,i){var s=Object(o.safeGet)(r.indexSet_,i);if(Object(o.assert)(s,"Missing index implementation for "+i),t===oe){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Dt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),ie(a,s.getCompare())}return oe}var h=n.get(e.name),l=t;return h&&(l=l.remove(new Dt(e.name,h))),l.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.map)(this.indexes_,(function(t){if(t===oe)return t;var r=n.get(e.name);return r?t.remove(new Dt(e.name,r)):t})),this.indexSet_)},t}(),ae=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&$t(this.priorityNode_),this.children_.isEmpty()&&Object(o.assert)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Zt||(Zt=new t(new Gt(Wt),null,se.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Zt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Zt:e},t.prototype.getChild=function(t){var e=gt(t);return null===e?this:this.getImmediateChild(e).getChild(yt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.assert)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Dt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Zt:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=gt(t);if(null===n)return e;Object(o.assert)(".priority"!==gt(t)||1===mt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(yt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(ee,(function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1})),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Kt(this.getPriority().val())+":"),this.forEachChild(ee,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":m(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Dt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Dt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Dt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,Dt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,Dt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ue?-1:0},t.prototype.withIndex=function(e){if(e===Bt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Bt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(ee),r=e.getIterator(ee),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Bt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ue=new(function(t){function e(){return t.call(this,new Gt(Wt),ae.EMPTY_NODE,se.Default)||this}return Object(s.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return ae.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(ae));Object.defineProperties(Dt,{MIN:{value:new Dt(O,ae.EMPTY_NODE)},MAX:{value:new Dt(C,ue)}}),jt.__EMPTY_NODE=ae.EMPTY_NODE,Jt.__childrenNodeConstructor=ae,Rt=ue,function(t){qt=t}(ue);function ce(t,e){if(void 0===e&&(e=null),null===t)return ae.EMPTY_NODE;if("object"===typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.assert)(null===e||"string"===typeof e||"number"===typeof e||"object"===typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"===typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!==typeof t||".sv"in t)return new Jt(t,ce(e));if(t instanceof Array){var n=ae.EMPTY_NODE;return L(t,(function(e,r){if(Object(o.contains)(t,e)&&"."!==e.substring(0,1)){var i=ce(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(ce(e))}var r=[],i=!1;if(L(t,(function(t,e){if("."!==t.substring(0,1)){var n=ce(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Dt(t,n)))}})),0===r.length)return ae.EMPTY_NODE;var s=ie(r,Yt,(function(t){return t.name}),Wt);if(i){var a=ie(r,ee.getCompare());return new ae(s,ce(e),new se({".priority":a},{".priority":ee}))}return new ae(s,ce(e),se.Default)}!function(t){Ht=t}(ce);var he=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.assert)(!Tt(e)&&".priority"!==gt(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(s.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?P(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=ce(t),r=ae.EMPTY_NODE.updateChild(this.indexPath_,n);return new Dt(e,r)},e.prototype.maxPost=function(){var t=ae.EMPTY_NODE.updateChild(this.indexPath_,ue);return new Dt(C,t)},e.prototype.toString=function(){return wt(this.indexPath_,0).join("/")},e}(Ft),le=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?P(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Dt.MIN},e.prototype.maxPost=function(){return Dt.MAX},e.prototype.makePost=function(t,e){var n=ce(t);return new Dt(e,n)},e.prototype.toString=function(){return".value"},e}(Ft),fe=new le,de="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",pe=function(){var t=0,e=[];return function(n){var r,i=n===t;t=n;var s=new Array(8);for(r=7;r>=0;r--)s[r]=de.charAt(n%64),n=Math.floor(n/64);Object(o.assert)(0===n,"Cannot push at time == 0");var a=s.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)a+=de.charAt(e[r]);return Object(o.assert)(20===a.length,"nextPushId: Length should be 20."),a}}(),ve=function(t){if("2147483647"===t)return"-";var e=U(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return C;var o=n[i],s=de.charAt(de.indexOf(o)+1);return n[i]=s,n.slice(0,i+1).join("")},ge=function(t){if("-2147483648"===t)return O;var e=U(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=de.charAt(de.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function me(t){return{type:"value",snapshotNode:t}}function ye(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function be(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function we(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var xe=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.assert)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(be(e,a)):Object(o.assert)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ye(e,n)):s.trackChildChange(we(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(ee,(function(t,r){e.hasChild(t)||n.trackChildChange(be(t,r))})),e.isLeafNode()||e.forEachChild(ee,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(we(e,r,i))}else n.trackChildChange(ye(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?ae.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),_e=function(){function t(e){this.indexedFilter_=new xe(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Dt(e,n))||(n=ae.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=ae.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(ae.EMPTY_NODE);var i=this;return e.forEachChild(ee,(function(t,e){i.matches(new Dt(t,e))||(r=r.updateImmediateChild(t,ae.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),Te=function(){function t(t){this.rangedFilter_=new _e(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Dt(e,n))||(n=ae.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=ae.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=ae.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(ae.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(t,e){return h(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var l=!1;i.hasNext();){s=i.getNext();!l&&c(a,s)<=0&&(l=!0),l&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,ae.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.assert)(u.numChildren()===this.limit_,"");var c=new Dt(e,n),h=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,h,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:s(d,c);if(l&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(we(e,n,f)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(be(e,f));var v=u.updateImmediateChild(e,ae.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(ye(d.name,d.node)),v.updateImmediateChild(d.name,d.node)):v}return n.isEmpty()?t:l&&s(h,c)>=0?(null!=i&&(i.trackChildChange(be(h.name,h.node)),i.trackChildChange(ye(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(h.name,ae.EMPTY_NODE)):t},t}(),Ee=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ee}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(o.assert)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.assert)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:O},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.assert)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.assert)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:C},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.assert)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===ee},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Se(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function ke(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ae(t,e){var n=t.copy();return n.index_=e,n}function Oe(t){var e,n={};return t.isDefault()||(t.index_===ee?e="$priority":t.index_===fe?e="$value":t.index_===Bt?e="$key":(Object(o.assert)(t.index_ instanceof he,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(o.stringify)(e),t.startSet_&&(n.startAt=Object(o.stringify)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(o.stringify)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(o.stringify)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(o.stringify)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Ce(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==ee&&(e.i=t.index_.toString()),e}var Pe=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=T("p:rest:"),o.listens_={},o}return Object(s.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.assert)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var h=Oe(t._queryParams);this.restRequest_(a+".json",h,(function(t,e){var n=e;(404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.safeGet)(s.listens_,u)===c)&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Oe(t._queryParams),r=t._path.toString(),i=new o.Deferred;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=Object(s.e)(i,2),u=a[0],c=a[1];u&&u.accessToken&&(e.auth=u.accessToken),c&&c.token&&(e.ac=c.token);var h=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.querystring)(e);r.log_("Sending REST request for "+h);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(n&&4===l.readyState){r.log_("REST Response for "+h+" received. status:",l.status,"response:",l.responseText);var t=null;if(l.status>=200&&l.status<300){try{t=Object(o.jsonEval)(l.responseText)}catch(e){k("Failed to parse JSON response for "+h+": "+l.responseText)}n(null,t)}else 401!==l.status&&404!==l.status&&k("Got unsuccessful REST response for "+h+" Status: "+l.status),n(l.status);n=null}},l.open("GET",h,!0),l.send()}))},e}(lt),Ie=function(){function t(){this.rootNode_=ae.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function Re(){return{value:null,children:new Map}}function Me(t,e,n){if(Tt(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=gt(e);t.children.has(r)||t.children.set(r,Re()),Me(t.children.get(r),e=yt(e),n)}}function Ne(t,e){if(Tt(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(ee,(function(e,n){Me(t,new pt(e),n)})),Ne(t,e)}if(t.children.size>0){var r=gt(e);if(e=yt(e),t.children.has(r))Ne(t.children.get(r),e)&&t.children.delete(r);return 0===t.children.size}return!0}function Le(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach((function(t,n){e(n,t)}))}(t,(function(t,r){Le(r,new pt(e.toString()+"/"+t),n)}))}var De,Fe=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(s.a)({},t);return this.last_&&L(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),je=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Fe(t);var n=1e4+2e4*Math.random();z(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;L(e,(function(e,i){i>0&&Object(o.contains)(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),z(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}();function Be(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}!function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(De||(De={}));var Ue,Ve=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=De.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(Tt(this.path)){if(null!=this.affectedTree.value)return Object(o.assert)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new pt(e));return new t(vt(),n,this.revert)}return Object(o.assert)(gt(this.path)===e,"operationForChild called for unrelated child."),new t(yt(this.path),this.affectedTree,this.revert)},t}(),ze=function(){function t(t,e){this.source=t,this.path=e,this.type=De.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return Tt(this.path)?new t(this.source,vt()):new t(this.source,yt(this.path))},t}(),Ge=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=De.OVERWRITE}return t.prototype.operationForChild=function(e){return Tt(this.path)?new t(this.source,vt(),this.snap.getImmediateChild(e)):new t(this.source,yt(this.path),this.snap)},t}(),Ye=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=De.MERGE}return t.prototype.operationForChild=function(e){if(Tt(this.path)){var n=this.children.subtree(new pt(e));return n.isEmpty()?null:n.value?new Ge(this.source,vt(),n.value):new t(this.source,vt(),n)}return Object(o.assert)(gt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,yt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),We=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(Tt(t))return this.isFullyInitialized()&&!this.filtered_;var e=gt(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Xe=function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()};function He(t,e,n,r,i,s){var a=r.filter((function(t){return t.type===n}));a.sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(o.assertionError)("Should only compare child_ events.");var r=new Dt(e.childName,e.snapshotNode),i=new Dt(n.childName,n.snapshotNode);return t.index_.compare(r,i)}(t,e,n)})),a.forEach((function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);i.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}function qe(t,e){return{eventCache:t,serverCache:e}}function Ke(t,e,n,r){return qe(new We(e,n,r),t.serverCache)}function $e(t,e,n,r){return qe(t.eventCache,new We(e,n,r))}function Je(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Qe(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Ze=function(){function t(t,e){void 0===e&&(Ue||(Ue=new Gt(I)),e=Ue),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return L(e,(function(t,e){n=n.set(new pt(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:vt(),value:this.value};if(Tt(t))return null;var n=gt(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(yt(t),e);return null!=i?{path:_t(new pt(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(Tt(e))return this;var n=gt(e),r=this.children.get(n);return null!==r?r.subtree(yt(e)):new t(null)},t.prototype.set=function(e,n){if(Tt(e))return new t(n,this.children);var r=gt(e),i=(this.children.get(r)||new t(null)).set(yt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(Tt(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=gt(e),r=this.children.get(n);if(r){var i=r.remove(yt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(Tt(t))return this.value;var e=gt(t),n=this.children.get(e);return n?n.get(yt(t)):null},t.prototype.setTree=function(e,n){if(Tt(e))return n;var r=gt(e),i=(this.children.get(r)||new t(null)).setTree(yt(e),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(vt(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(_t(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,vt(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(Tt(t))return null;var i=gt(t),o=this.children.get(i);return o?o.findOnPath_(yt(t),_t(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,vt(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(Tt(e))return this;this.value&&r(n,this.value);var i=gt(e),o=this.children.get(i);return o?o.foreachOnPath_(yt(e),_t(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(vt(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(_t(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),tn=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Ze(null))},t}();function en(t,e,n){if(Tt(e))return new tn(new Ze(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=Et(i,e);return o=o.updateChild(s,n),new tn(t.writeTree_.set(i,o))}var a=new Ze(n),u=t.writeTree_.setTree(e,a);return new tn(u)}function nn(t,e,n){var r=t;return L(n,(function(t,n){r=en(r,_t(e,t),n)})),r}function rn(t,e){if(Tt(e))return tn.empty();var n=t.writeTree_.setTree(e,new Ze(null));return new tn(n)}function on(t,e){return null!=sn(t,e)}function sn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Et(n.path,e)):null}function an(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ee,(function(t,n){e.push(new Dt(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new Dt(t,n.value))})),e}function un(t,e){if(Tt(e))return t;var n=sn(t,e);return new tn(null!=n?new Ze(n):t.writeTree_.subtree(e))}function cn(t){return t.writeTree_.isEmpty()}function hn(t,e){return ln(vt(),t.writeTree_,e)}function ln(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?(Object(o.assert)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=ln(_t(t,e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(_t(t,".priority"),r)),n}function fn(t,e){return Sn(e,t)}function dn(t,e){var n=t.allWrites.findIndex((function(t){return t.writeId===e}));Object(o.assert)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,s=!1,a=t.allWrites.length-1;i&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&pn(u,r.path)?i=!1:At(r.path,u.path)&&(s=!0)),a--}if(i){if(s)return function(t){t.visibleWrites=gn(t.allWrites,vn,vt()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}(t),!0;r.snap?t.visibleWrites=rn(t.visibleWrites,r.path):L(r.children,(function(e){t.visibleWrites=rn(t.visibleWrites,_t(r.path,e))}));return!0}return!1}function pn(t,e){if(t.snap)return At(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&At(_t(t.path,n),e))return!0;return!1}function vn(t){return t.visible}function gn(t,e,n){for(var r=tn.empty(),i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)At(n,a)?r=en(r,u=Et(n,a),s.snap):At(a,n)&&(u=Et(a,n),r=en(r,vt(),s.snap.getChild(u)));else{if(!s.children)throw Object(o.assertionError)("WriteRecord should have .snap or .children");if(At(n,a))r=nn(r,u=Et(n,a),s.children);else if(At(a,n))if(Tt(u=Et(a,n)))r=nn(r,vt(),s.children);else{var c=Object(o.safeGet)(s.children,gt(u));if(c){var h=c.getChild(yt(u));r=en(r,vt(),h)}}}}}return r}function mn(t,e,n,r,i){if(r||i){var o=un(t.visibleWrites,e);if(!i&&cn(o))return n;if(i||null!=n||on(o,vt())){return hn(gn(t.allWrites,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(At(t.path,e)||At(e,t.path))}),e),n||ae.EMPTY_NODE)}return null}var s=sn(t.visibleWrites,e);if(null!=s)return s;var a=un(t.visibleWrites,e);return cn(a)?n:null!=n||on(a,vt())?hn(a,n||ae.EMPTY_NODE):null}function yn(t,e,n,r){return mn(t.writeTree,t.treePath,e,n,r)}function bn(t,e){return function(t,e,n){var r=ae.EMPTY_NODE,i=sn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ee,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var o=un(t.visibleWrites,e);return n.forEachChild(ee,(function(t,e){var n=hn(un(o,new pt(t)),e);r=r.updateImmediateChild(t,n)})),an(o).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}return an(un(t.visibleWrites,e)).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function wn(t,e,n,r){return function(t,e,n,r,i){Object(o.assert)(r||i,"Either existingEventSnap or existingServerSnap must exist");var s=_t(e,n);if(on(t.visibleWrites,s))return null;var a=un(t.visibleWrites,s);return cn(a)?i.getChild(n):hn(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function xn(t,e){return function(t,e){return sn(t.visibleWrites,e)}(t.writeTree,_t(t.treePath,e))}function _n(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=un(t.visibleWrites,e),c=sn(u,vt());if(null!=c)a=c;else{if(null==n)return[];a=hn(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var h=[],l=s.getCompare(),f=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),d=f.getNext();d&&h.length<i;)0!==l(d,r)&&h.push(d),d=f.getNext();return h}(t.writeTree,t.treePath,e,n,r,i,o)}function Tn(t,e,n){return function(t,e,n,r){var i=_t(e,n),o=sn(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?hn(un(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function En(t,e){return Sn(_t(t.treePath,e),t.writeTree)}function Sn(t,e){return{treePath:t,writeTree:e}}var kn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.assert)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(o.assert)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,we(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,be(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,ye(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Object(o.assertionError)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,we(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),An=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),On=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new We(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Tn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Qe(this.viewCache_),i=_n(this.writes_,r,e,1,n,t);return 0===i.length?null:i[0]},t}();function Cn(t,e,n,r,i){var s,a,u=new kn;if(n.type===De.OVERWRITE){var c=n;c.source.fromUser?s=Rn(t,e,c.path,c.snap,r,i,u):(Object(o.assert)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!Tt(c.path),s=In(t,e,c.path,c.snap,r,i,a,u))}else if(n.type===De.MERGE){var h=n;h.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach((function(r,u){var c=_t(n,r);Mn(e,gt(c))&&(a=Rn(t,a,c,u,i,o,s))})),r.foreach((function(r,u){var c=_t(n,r);Mn(e,gt(c))||(a=Rn(t,a,c,u,i,o,s))})),a}(t,e,h.path,h.children,r,i,u):(Object(o.assert)(h.source.fromServer,"Unknown source."),a=h.source.tagged||e.serverCache.isFiltered(),s=Ln(t,e,h.path,h.children,r,i,a,u))}else if(n.type===De.ACK_USER_WRITE){var l=n;s=l.revert?function(t,e,n,r,i,s){var a;if(null!=xn(r,n))return e;var u=new On(r,e,i),c=e.eventCache.getNode(),h=void 0;if(Tt(n)||".priority"===gt(n)){var l=void 0;if(e.serverCache.isFullyInitialized())l=yn(r,Qe(e));else{var f=e.serverCache.getNode();Object(o.assert)(f instanceof ae,"serverChildren would be complete if leaf node"),l=bn(r,f)}l=l,h=t.filter.updateFullNode(c,l,s)}else{var d=gt(n),p=Tn(r,d,e.serverCache);null==p&&e.serverCache.isCompleteForChild(d)&&(p=c.getImmediateChild(d)),(h=null!=p?t.filter.updateChild(c,d,p,yt(n),u,s):e.eventCache.getNode().hasChild(d)?t.filter.updateChild(c,d,ae.EMPTY_NODE,yt(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=yn(r,Qe(e))).isLeafNode()&&(h=t.filter.updateFullNode(h,a,s))}return a=e.serverCache.isFullyInitialized()||null!=xn(r,vt()),Ke(e,h,a,t.filter.filtersNodes())}(t,e,l.path,r,i,u):function(t,e,n,r,i,o,s){if(null!=xn(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(Tt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return In(t,e,n,u.getNode().getChild(n),i,o,a,s);if(Tt(n)){var c=new Ze(null);return u.getNode().forEachChild(Bt,(function(t,e){c=c.set(new pt(t),e)})),Ln(t,e,n,c,i,o,a,s)}return e}var h=new Ze(null);return r.foreach((function(t,e){var r=_t(n,t);u.isCompleteForPath(r)&&(h=h.set(t,u.getNode().getChild(r)))})),Ln(t,e,n,h,i,o,a,s)}(t,e,l.path,l.affectedTree,r,i,u)}else{if(n.type!==De.LISTEN_COMPLETE)throw Object(o.assertionError)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache,s=$e(e,o.getNode(),o.isFullyInitialized()||Tt(n),o.isFiltered());return Pn(t,s,n,r,An,i)}(t,e,n.path,r,u)}var f=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Je(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(me(Je(e)))}}(e,s,f),{viewCache:s,changes:f}}function Pn(t,e,n,r,i,s){var a=e.eventCache;if(null!=xn(r,n))return e;var u=void 0,c=void 0;if(Tt(n))if(Object(o.assert)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var h=Qe(e),l=bn(r,h instanceof ae?h:ae.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{var f=yn(r,Qe(e));u=t.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{var d=gt(n);if(".priority"===d){Object(o.assert)(1===mt(n),"Can't have a priority with additional path components");var p=a.getNode(),v=wn(r,n,p,c=e.serverCache.getNode());u=null!=v?t.filter.updatePriority(p,v):a.getNode()}else{var g=yt(n),m=void 0;if(a.isCompleteForChild(d)){c=e.serverCache.getNode();var y=wn(r,n,a.getNode(),c);m=null!=y?a.getNode().getImmediateChild(d).updateChild(g,y):a.getNode().getImmediateChild(d)}else m=Tn(r,d,e.serverCache);u=null!=m?t.filter.updateChild(a.getNode(),d,m,g,i,s):a.getNode()}}return Ke(e,u,a.isFullyInitialized()||Tt(n),t.filter.filtersNodes())}function In(t,e,n,r,i,o,s,a){var u,c=e.serverCache,h=s?t.filter:t.filter.getIndexedFilter();if(Tt(n))u=h.updateFullNode(c.getNode(),r,null);else if(h.filtersNodes()&&!c.isFiltered()){var l=c.getNode().updateChild(n,r);u=h.updateFullNode(c.getNode(),l,null)}else{var f=gt(n);if(!c.isCompleteForPath(n)&&mt(n)>1)return e;var d=yt(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?h.updatePriority(c.getNode(),p):h.updateChild(c.getNode(),f,p,d,An,null)}var v=$e(e,u,c.isFullyInitialized()||Tt(n),h.filtersNodes());return Pn(t,v,n,i,new On(i,v,o),a)}function Rn(t,e,n,r,i,o,s){var a,u,c=e.eventCache,h=new On(i,e,o);if(Tt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=Ke(e,u,!0,t.filter.filtersNodes());else{var l=gt(n);if(".priority"===l)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=Ke(e,u,c.isFullyInitialized(),c.isFiltered());else{var f=yt(n),d=c.getNode().getImmediateChild(l),p=void 0;if(Tt(f))p=r;else{var v=h.getCompleteChild(l);p=null!=v?".priority"===bt(f)&&v.getChild(xt(f)).isEmpty()?v:v.updateChild(f,r):ae.EMPTY_NODE}if(d.equals(p))a=e;else a=Ke(e,t.filter.updateChild(c.getNode(),l,p,f,h,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function Mn(t,e){return t.eventCache.isCompleteForChild(e)}function Nn(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function Ln(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=Tt(n)?r:new Ze(null).setTree(n,r);var h=e.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(h.hasChild(n)){var u=Nn(0,e.serverCache.getNode().getImmediateChild(n),r);c=In(t,c,new pt(n),u,i,o,s,a)}})),u.children.inorderTraversal((function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!h.hasChild(n)&&!u){var l=Nn(0,e.serverCache.getNode().getImmediateChild(n),r);c=In(t,c,new pt(n),l,i,o,s,a)}})),c}var Dn,Fn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new xe(r.getIndex()),o=(n=r).loadsAllData()?new xe(n.getIndex()):n.hasLimit()?new Te(n):new _e(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(ae.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(ae.EMPTY_NODE,a.getNode(),null),h=new We(u,s.isFullyInitialized(),i.filtersNodes()),l=new We(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=qe(l,h),this.eventGenerator_=new Xe(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function jn(t,e){var n=Qe(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Tt(e)&&!n.getImmediateChild(gt(e)).isEmpty())?n.getChild(e):null}function Bn(t){return 0===t.eventRegistrations_.length}function Un(t,e,n){var r=[];if(n){Object(o.assert)(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach((function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)}))}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Vn(t,e,n,r){e.type===De.MERGE&&null!==e.source.queryId&&(Object(o.assert)(Qe(t.viewCache_),"We should always have a full cache before handling merges"),Object(o.assert)(Je(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,s,a=t.viewCache_,u=Cn(t.processor_,a,e,n,r);return i=t.processor_,s=u.viewCache,Object(o.assert)(s.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Object(o.assert)(s.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Object(o.assert)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,zn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function zn(t,e,n,r){var i=r?[r]:t.eventRegistrations_;return function(t,e,n,r){var i=[],o=[];return e.forEach((function(e){var n;"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push((n=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:n}))})),He(t,i,"child_removed",e,r,n),He(t,i,"child_added",e,r,n),He(t,i,"child_moved",o,r,n),He(t,i,"child_changed",e,r,n),He(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,i)}var Gn,Yn=function(){this.views=new Map};function Wn(t,e,n,r){var i,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(o.assert)(null!=c,"SyncTree gave us an op for an invalid query."),Vn(c,e,n,r)}var h=[];try{for(var l=Object(s.g)(t.views.values()),f=l.next();!f.done;f=l.next()){c=f.value;h=h.concat(Vn(c,e,n,r))}}catch(d){i={error:d}}finally{try{f&&!f.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return h}function Xn(t,e,n,r,i){var o=e._queryIdentifier,s=t.views.get(o);if(!s){var a=yn(n,i?r:null),u=!1;a?u=!0:r instanceof ae?(a=bn(n,r),u=!1):(a=ae.EMPTY_NODE,u=!1);var c=qe(new We(a,u,!1),new We(r,i,!1));return new Fn(e,c)}return s}function Hn(t,e,n,r,i,o){var s=Xn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ee,(function(t,e){r.push(ye(t,e))})),n.isFullyInitialized()&&r.push(me(n.getNode())),zn(t,r,n.getNode(),e)}(s,n)}function qn(t,e,n,r){var i,a,u=e._queryIdentifier,c=[],h=[],l=Zn(t);if("default"===u)try{for(var f=Object(s.g)(t.views.entries()),d=f.next();!d.done;d=f.next()){var p=Object(s.e)(d.value,2),v=p[0],g=p[1];h=h.concat(Un(g,n,r)),Bn(g)&&(t.views.delete(v),g.query._queryParams.loadsAllData()||c.push(g.query))}}catch(m){i={error:m}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}else(g=t.views.get(u))&&(h=h.concat(Un(g,n,r)),Bn(g)&&(t.views.delete(u),g.query._queryParams.loadsAllData()||c.push(g.query)));return l&&!Zn(t)&&c.push(new(Object(o.assert)(Dn,"Reference.ts has not been loaded"),Dn)(e._repo,e._path)),{removed:c,events:h}}function Kn(t){var e,n,r=[];try{for(var i=Object(s.g)(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function $n(t,e){var n,r,i=null;try{for(var o=Object(s.g)(t.views.values()),a=o.next();!a.done;a=o.next()){var u=a.value;i=i||jn(u,e)}}catch(c){n={error:c}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Jn(t,e){if(e._queryParams.loadsAllData())return tr(t);var n=e._queryIdentifier;return t.views.get(n)}function Qn(t,e){return null!=Jn(t,e)}function Zn(t){return null!=tr(t)}function tr(t){var e,n;try{for(var r=Object(s.g)(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var er=1,nr=function(t){this.listenProvider_=t,this.syncPointTree_=new Ze(null),this.pendingWriteTree_={visibleWrites:tn.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function rr(t,e,n,r,i){return function(t,e,n,r,i){Object(o.assert)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=en(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?lr(t,new Ge({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function ir(t,e,n,r){!function(t,e,n,r){Object(o.assert)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=nn(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=Ze.fromObject(n);return lr(t,new Ye({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}function or(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(dn(t.pendingWriteTree_,e)){var i=new Ze(null);return null!=r.snap?i=i.set(vt(),!0):L(r.children,(function(t){i=i.set(new pt(t),!0)})),lr(t,new Ve(r.path,i,n))}return[]}function sr(t,e,n){return lr(t,new Ge({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function ar(t,e,n,r){var i=e._path,o=t.syncPointTree_.get(i),s=[];if(o&&("default"===e._queryIdentifier||Qn(o,e))){var a=qn(o,e,n,r);0===o.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var u=a.removed;s=a.events;var c=-1!==u.findIndex((function(t){return t._queryParams.loadsAllData()})),h=t.syncPointTree_.findOnPath(i,(function(t,e){return Zn(e)}));if(c&&!h){var l=t.syncPointTree_.subtree(i);if(!l.isEmpty())for(var f=function(t){return t.fold((function(t,e,n){if(e&&Zn(e))return[tr(e)];var r=[];return e&&(r=Kn(e)),L(n,(function(t,e){r=r.concat(e)})),r}))}(l),d=0;d<f.length;++d){var p=f[d],v=p.query,g=pr(t,p);t.listenProvider_.startListening(wr(v),vr(t,v),g.hashFn,g.onComplete)}}if(!h&&u.length>0&&!r)if(c){t.listenProvider_.stopListening(wr(e),null)}else u.forEach((function(e){var n=t.queryToTagMap.get(gr(e));t.listenProvider_.stopListening(wr(e),n)}));!function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=gr(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,u)}return s}function ur(t,e,n){var r=e._path,i=null,s=!1;t.syncPointTree_.foreachOnPath(r,(function(t,e){var n=Et(t,r);i=i||$n(e,n),s=s||Zn(e)}));var a,u=t.syncPointTree_.get(r);(u?(s=s||Zn(u),i=i||$n(u,vt())):(u=new Yn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=i)?a=!0:(a=!1,i=ae.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=$n(e,vt());n&&(i=i.updateImmediateChild(t,n))})));var c=Qn(u,e);if(!c&&!e._queryParams.loadsAllData()){var h=gr(e);Object(o.assert)(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");var l=er++;t.queryToTagMap.set(h,l),t.tagToQueryMap.set(l,h)}var f=Hn(u,e,n,fn(t.pendingWriteTree_,r),i,a);if(!c&&!s){var d=Jn(u,e);f=f.concat(function(t,e,n){var r=e._path,i=vr(t,e),s=pr(t,n),a=t.listenProvider_.startListening(wr(e),i,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(i)Object(o.assert)(!Zn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!Tt(t)&&e&&Zn(e))return[tr(e).query];var r=[];return e&&(r=r.concat(Kn(e).map((function(t){return t.query})))),L(n,(function(t,e){r=r.concat(e)})),r})),h=0;h<c.length;++h){var l=c[h];t.listenProvider_.stopListening(wr(l),vr(t,l))}return a}(t,e,d))}return f}function cr(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(function(t,n){var r=$n(n,Et(t,e));if(r)return r}));return mn(r,e,i,n,!0)}function hr(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(function(t,e){var i=Et(t,n);r=r||$n(e,i)}));var i=t.syncPointTree_.get(n);i?r=r||$n(i,vt()):(i=new Yn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new We(r,!0,!1):null;return function(t){return Je(t.viewCache_)}(Xn(i,e,fn(t.pendingWriteTree_,e._path),o?s.getNode():ae.EMPTY_NODE,o))}function lr(t,e){return fr(e,t.syncPointTree_,null,fn(t.pendingWriteTree_,vt()))}function fr(t,e,n,r){if(Tt(t.path))return dr(t,e,n,r);var i=e.get(vt());null==n&&null!=i&&(n=$n(i,vt()));var o=[],s=gt(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,h=En(r,s);o=o.concat(fr(a,u,c,h))}return i&&(o=o.concat(Wn(i,t,r,n))),o}function dr(t,e,n,r){var i=e.get(vt());null==n&&null!=i&&(n=$n(i,vt()));var o=[];return e.children.inorderTraversal((function(e,i){var s=n?n.getImmediateChild(e):null,a=En(r,e),u=t.operationForChild(e);u&&(o=o.concat(dr(u,i,s,a)))})),i&&(o=o.concat(Wn(i,t,r,n))),o}function pr(t,e){var n=e.query,r=vr(t,n);return{hashFn:function(){var t=function(t){return t.viewCache_.serverCache.getNode()}(e)||ae.EMPTY_NODE;return t.hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=mr(t,n);if(r){var i=yr(r),o=i.path,s=i.queryId,a=Et(o,e);return br(t,o,new ze(Be(s),a))}return[]}(t,n._path,r):function(t,e){return lr(t,new ze({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return ar(t,n,null,i)}}}function vr(t,e){var n=gr(e);return t.queryToTagMap.get(n)}function gr(t){return t._path.toString()+"$"+t._queryIdentifier}function mr(t,e){return t.tagToQueryMap.get(e)}function yr(t){var e=t.indexOf("$");return Object(o.assert)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new pt(t.substr(0,e))}}function br(t,e,n){var r=t.syncPointTree_.get(e);return Object(o.assert)(r,"Missing sync point for query tag that we're tracking"),Wn(r,n,fn(t.pendingWriteTree_,e),null)}function wr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Object(o.assert)(Gn,"Reference.ts has not been loaded"),Gn)(t._repo,t._path):t}var xr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),_r=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=_t(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return cr(this.syncTree_,this.path_)},t}(),Tr=function(t,e,n){return t&&"object"===typeof t?(Object(o.assert)(".sv"in t,"Unexpected leaf node or priority contents"),"string"===typeof t[".sv"]?Er(t[".sv"],e,n):"object"===typeof t[".sv"]?Sr(t[".sv"],e):void Object(o.assert)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Er=function(t,e,n){if("timestamp"===t)return n.timestamp;Object(o.assert)(!1,"Unexpected server value: "+t)},Sr=function(t,e,n){t.hasOwnProperty("increment")||Object(o.assert)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!==typeof r&&Object(o.assert)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.assert)(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!==typeof s?r:s+r},kr=function(t,e,n,r){return Or(e,new _r(n,t),r)},Ar=function(t,e,n){return Or(t,new xr(e),n)};function Or(t,e,n){var r,i=t.getPriority().val(),o=Tr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=Tr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Jt(a,ce(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Jt(o))),u.forEachChild(ee,(function(t,i){var o=Or(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var Cr=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n};function Pr(t,e){for(var n=e instanceof pt?e:new pt(e),r=t,i=gt(n);null!==i;){var s=Object(o.safeGet)(r.node.children,i)||{children:{},childCount:0};r=new Cr(i,r,s),i=gt(n=yt(n))}return r}function Ir(t){return t.node.value}function Rr(t,e){t.node.value=e,Fr(t)}function Mr(t){return t.node.childCount>0}function Nr(t,e){L(t.node.children,(function(n,r){e(new Cr(n,t,r))}))}function Lr(t,e,n,r){n&&!r&&e(t),Nr(t,(function(t){Lr(t,e,!0,r)})),n&&r&&e(t)}function Dr(t){return new pt(null===t.parent?t.name:Dr(t.parent)+"/"+t.name)}function Fr(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===Ir(t)&&!Mr(t)}(n),i=Object(o.contains)(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,Fr(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,Fr(t))}(t.parent,t.name,t)}var jr=/[\[\].#$\/\u0000-\u001F\u007F]/,Br=/[\[\].#$\u0000-\u001F\u007F]/,Ur=10485760,Vr=function(t){return"string"===typeof t&&0!==t.length&&!jr.test(t)},zr=function(t){return"string"===typeof t&&0!==t.length&&!Br.test(t)},Gr=function(t){return null===t||"string"===typeof t||"number"===typeof t&&!A(t)||t&&"object"===typeof t&&Object(o.contains)(t,".sv")},Yr=function(t,e,n,r){r&&void 0===e||Wr(Object(o.errorPrefix)(t,"value"),e,n)},Wr=function t(e,n,r){var i=r instanceof pt?new Ot(r,e):r;if(void 0===n)throw new Error(e+"contains undefined "+Pt(i));if("function"===typeof n)throw new Error(e+"contains a function "+Pt(i)+" with contents = "+n.toString());if(A(n))throw new Error(e+"contains "+n.toString()+" "+Pt(i));if("string"===typeof n&&n.length>Ur/3&&Object(o.stringLength)(n)>Ur)throw new Error(e+"contains a string greater than "+"10485760 utf8 bytes "+Pt(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var s=!1,a=!1;if(L(n,(function(n,r){if(".value"===n)s=!0;else if(".priority"!==n&&".sv"!==n&&(a=!0,!Vr(n)))throw new Error(e+" contains an invalid key ("+n+") "+Pt(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Object(o.stringLength)(e),Ct(t)}(i,n),t(e,r,i),function(t){var e=t.parts_.pop();t.byteLength_-=Object(o.stringLength)(e),t.parts_.length>0&&(t.byteLength_-=1)}(i)})),s&&a)throw new Error(e+' contains ".value" child '+Pt(i)+" in addition to actual children.")}},Xr=function(t,e,n,r){if(!r||void 0!==e){var i=Object(o.errorPrefix)(t,"values");if(!e||"object"!==typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var s=[];L(e,(function(t,e){var r=new pt(t);if(Wr(i,e,_t(n,r)),".priority"===bt(r)&&!Gr(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=wt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Vr(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(St);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&At(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(i,s)}},Hr=function(t,e,n){if(!n||void 0!==e){if(A(e))throw new Error(Object(o.errorPrefix)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Gr(e))throw new Error(Object(o.errorPrefix)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},qr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.errorPrefix)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Kr=function(t,e,n,r){if((!r||void 0!==n)&&!Vr(n))throw new Error(Object(o.errorPrefix)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},$r=function(t,e,n,r){if((!r||void 0!==n)&&!zr(n))throw new Error(Object(o.errorPrefix)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Jr=function(t,e){if(".info"===gt(e))throw new Error(t+" failed = Can't modify data under /.info/")},Qr=function(t,e){var n=e.path.toString();if("string"!==typeof e.repoInfo.host||0===e.repoInfo.host.length||!Vr(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),zr(t)}(n))throw new Error(Object(o.errorPrefix)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Zr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Object(o.errorPrefix)(t,e)+"must be a boolean.")},ti=function(){this.eventLists_=[],this.recursionDepth_=0};function ei(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||kt(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function ni(t,e,n){ei(t,n),ii(t,(function(t){return kt(t,e)}))}function ri(t,e,n){ei(t,n),ii(t,(function(t){return At(t,e)||At(e,t)}))}function ii(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];if(i)e(i.path)?(oi(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}n&&(t.eventLists_=[]),t.recursionDepth_--}function oi(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();b&&_("event: "+n.toString()),V(r)}}}var si="repo_interrupt",ai=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ti,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Re(),this.transactionQueueTree_=new Cr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function ui(t,e,n){if(t.stats_=et(t.repoInfo_),t.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Pe(t.repoInfo_,(function(e,n,r,i){li(t,e,n,r,i)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((function(){return fi(t,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.stringify)(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Lt(t.repoInfo_,e,(function(e,n,r,i){li(t,e,n,r,i)}),(function(e){fi(t,e)}),(function(e){!function(t,e){L(e,(function(e,n){di(t,e,n)}))}(t,e)}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((function(e){t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=function(t,e){var n=t.toString();return tt[n]||(tt[n]=e()),tt[n]}(t.repoInfo_,(function(){return new je(t.stats_,t.server_)})),t.infoData_=new Ie,t.infoSyncTree_=new nr({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=sr(t.infoSyncTree_,e._path,s),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),di(t,"connected",!1),t.serverSyncTree_=new nr({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);ri(t.eventQueue_,e._path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}function ci(t){var e=t.infoData_.getNode(new pt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function hi(t){return(e=(e={timestamp:ci(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function li(t,e,n,r,i){t.dataUpdateCount++;var s=new pt(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var u=Object(o.map)(n,(function(t){return ce(t)}));a=function(t,e,n,r){var i=mr(t,r);if(i){var o=yr(i),s=o.path,a=o.queryId,u=Et(s,e),c=Ze.fromObject(n);return br(t,s,new Ye(Be(a),u,c))}return[]}(t.serverSyncTree_,s,u,i)}else{var c=ce(n);a=function(t,e,n,r){var i=mr(t,r);if(null!=i){var o=yr(i),s=o.path,a=o.queryId,u=Et(s,e);return br(t,s,new Ge(Be(a),u,n))}return[]}(t.serverSyncTree_,s,c,i)}else if(r){var h=Object(o.map)(n,(function(t){return ce(t)}));a=function(t,e,n){var r=Ze.fromObject(n);return lr(t,new Ye({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,h)}else{var l=ce(n);a=sr(t.serverSyncTree_,s,l)}var f=s;a.length>0&&(f=Ei(t,s)),ri(t.eventQueue_,f,a)}function fi(t,e){di(t,"connected",e),!1===e&&function(t){wi(t,"onDisconnectEvents");var e=hi(t),n=Re();Le(t.onDisconnect_,vt(),(function(r,i){var o=kr(r,i,t.serverSyncTree_,e);Me(n,r,o)}));var r=[];Le(n,vt(),(function(e,n){r=r.concat(sr(t.serverSyncTree_,e,n));var i=Ci(t,e);Ei(t,i)})),t.onDisconnect_=Re(),ri(t.eventQueue_,vt(),r)}(t)}function di(t,e,n){var r=new pt("/.info/"+e),i=ce(n);t.infoData_.updateSnapshot(r,i);var o=sr(t.infoSyncTree_,r,i);ri(t.eventQueue_,r,o)}function pi(t){return t.nextWriteId_++}function vi(t,e,n,r,i){wi(t,"set",{path:e.toString(),value:n,priority:r});var o=hi(t),s=ce(n,r),a=cr(t.serverSyncTree_,e),u=Ar(s,a,o),c=pi(t),h=rr(t.serverSyncTree_,e,u,c,!0);ei(t.eventQueue_,h),t.server_.put(e.toString(),s.val(!0),(function(n,r){var o="ok"===n;o||k("set at "+e+" failed: "+n);var s=or(t.serverSyncTree_,c,!o);ri(t.eventQueue_,e,s),xi(t,i,n,r)}));var l=Ci(t,e);Ei(t,l),ri(t.eventQueue_,l,[])}function gi(t,e,n){t.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&Ne(t.onDisconnect_,e),xi(t,n,r,i)}))}function mi(t,e,n,r){var i=ce(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(function(n,o){"ok"===n&&Me(t.onDisconnect_,e,i),xi(t,r,n,o)}))}function yi(t,e,n){var r;r=".info"===gt(e._path)?ar(t.infoSyncTree_,e,n):ar(t.serverSyncTree_,e,n),ni(t.eventQueue_,e._path,r)}function bi(t){t.persistentConnection_&&t.persistentConnection_.interrupt(si)}function wi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),_.apply(void 0,Object(s.f)([r],Object(s.e)(e)))}function xi(t,e,n,r){e&&V((function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}}))}function _i(t,e,n){return cr(t.serverSyncTree_,e,n)||ae.EMPTY_NODE}function Ti(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||Oi(t,e),Ir(e)){var n=ki(t,e);Object(o.assert)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return 0===t.status}))&&function(t,e,n){for(var r=n.map((function(t){return t.currentWriteId})),i=_i(t,e,r),s=i,a=i.hash(),u=0;u<n.length;u++){var c=n[u];Object(o.assert)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var h=Et(e,c.path);s=s.updateChild(h,c.currentOutputSnapshotRaw)}var l=s.val(!0),f=e;t.server_.put(f.toString(),l,(function(r){wi(t,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(or(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push((function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)})),n[e].unwatcher()},a=0;a<n.length;a++)s(a);Oi(t,Pr(t.transactionQueueTree_,e)),Ti(t,t.transactionQueueTree_),ri(t.eventQueue_,e,i);for(a=0;a<o.length;a++)V(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)3===n[a].status?n[a].status=4:n[a].status=0;else{k("transaction at "+f.toString()+" failed: "+r);for(a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r}Ei(t,e)}}),a)}(t,Dr(e),n)}else Mr(e)&&Nr(e,(function(e){Ti(t,e)}))}function Ei(t,e){var n=Si(t,e),r=Dr(n);return function(t,e,n){if(0===e.length)return;for(var r=[],i=[],s=e.filter((function(t){return 0===t.status})).map((function(t){return t.currentWriteId})),a=function(a){var u,c,h=e[a],l=Et(n,h.path),f=!1;if(Object(o.assert)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===h.status)f=!0,u=h.abortReason,i=i.concat(or(t.serverSyncTree_,h.currentWriteId,!0));else if(0===h.status)if(h.retryCount>=25)f=!0,u="maxretry",i=i.concat(or(t.serverSyncTree_,h.currentWriteId,!0));else{var d=_i(t,h.path,s);h.currentInputSnapshot=d;var p=e[a].update(d.val());if(void 0!==p){Wr("transaction failed: Data returned ",p,h.path);var v=ce(p);"object"===typeof p&&null!=p&&Object(o.contains)(p,".priority")||(v=v.updatePriority(d.getPriority()));var g=h.currentWriteId,m=hi(t),y=Ar(v,d,m);h.currentOutputSnapshotRaw=v,h.currentOutputSnapshotResolved=y,h.currentWriteId=pi(t),s.splice(s.indexOf(g),1),i=(i=i.concat(rr(t.serverSyncTree_,h.path,y,h.currentWriteId,h.applyLocally))).concat(or(t.serverSyncTree_,g,!0))}else f=!0,u="nodata",i=i.concat(or(t.serverSyncTree_,h.currentWriteId,!0))}ri(t.eventQueue_,n,i),i=[],f&&(e[a].status=2,c=e[a].unwatcher,setTimeout(c,Math.floor(0)),e[a].onComplete&&("nodata"===u?r.push((function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)})):r.push((function(){return e[a].onComplete(new Error(u),!1,null)}))))},u=0;u<e.length;u++)a(u);Oi(t,t.transactionQueueTree_);for(u=0;u<r.length;u++)V(r[u]);Ti(t,t.transactionQueueTree_)}(t,ki(t,n),r),r}function Si(t,e){var n,r=t.transactionQueueTree_;for(n=gt(e);null!==n&&void 0===Ir(r);)r=Pr(r,n),n=gt(e=yt(e));return r}function ki(t,e){var n=[];return Ai(t,e,n),n.sort((function(t,e){return t.order-e.order})),n}function Ai(t,e,n){var r=Ir(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Nr(e,(function(e){Ai(t,e,n)}))}function Oi(t,e){var n=Ir(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Rr(e,n.length>0?n:void 0)}Nr(e,(function(e){Oi(t,e)}))}function Ci(t,e){var n=Dr(Si(t,e)),r=Pr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=n?t:t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,(function(e){Pi(t,e)})),Pi(t,r),Lr(r,(function(e){Pi(t,e)})),n}function Pi(t,e){var n=Ir(e);if(n){for(var r=[],i=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Object(o.assert)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Object(o.assert)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(or(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Rr(e,void 0):n.length=s+1,ri(t.eventQueue_,Dr(e),i);for(a=0;a<r.length;a++)V(r[a])}}var Ii=function(t,e){var n=Ri(t),r=n.namespace;"firebase.com"===n.domain&&S(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||S("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&k("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new $(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new pt(n.pathString)}},Ri=function(t){var e="",n="",r="",i="",o="",a=!0,u="https",c=443;if("string"===typeof t){var h=t.indexOf("//");h>=0&&(u=t.substring(0,h-1),t=t.substring(h+2));var l=t.indexOf("/");-1===l&&(l=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(l,f)),l<f&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(l,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(s.g)(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):k("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(h=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(h+1),10)):h=e.length;var p=e.slice(0,h);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),n=e.substring(v+1),o=r}"ns"in d&&(o=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:o}},Mi=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.stringify)(this.snapshot.exportVal())},t}(),Ni=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Li=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Object(o.assert)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Di=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new o.Deferred;return gi(this._repo,this._path,t.wrapCallback((function(){}))),t.promise},t.prototype.remove=function(){Jr("OnDisconnect.remove",this._path);var t=new o.Deferred;return mi(this._repo,this._path,null,t.wrapCallback((function(){}))),t.promise},t.prototype.set=function(t){Jr("OnDisconnect.set",this._path),Yr("OnDisconnect.set",t,this._path,!1);var e=new o.Deferred;return mi(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t.prototype.setWithPriority=function(t,e){Jr("OnDisconnect.setWithPriority",this._path),Yr("OnDisconnect.setWithPriority",t,this._path,!1),Hr("OnDisconnect.setWithPriority",e,!1);var n=new o.Deferred;return function(t,e,n,r,i){var o=ce(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(function(n,r){"ok"===n&&Me(t.onDisconnect_,e,o),xi(0,i,n,r)}))}(this._repo,this._path,t,e,n.wrapCallback((function(){}))),n.promise},t.prototype.update=function(t){Jr("OnDisconnect.update",this._path),Xr("OnDisconnect.update",t,this._path,!1);var e=new o.Deferred;return function(t,e,n,r){if(Object(o.isEmpty)(n))return _("onDisconnect().update() called with empty data.  Don't do anything."),void xi(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(function(i,o){"ok"===i&&L(n,(function(n,r){var i=ce(r);Me(t.onDisconnect_,_t(e,n),i)})),xi(0,r,i,o)}))}(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t}(),Fi=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return Tt(this._path)?null:bt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Vi(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=Ce(this._queryParams),e=M(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return Ce(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=Object(o.getModularInstance)(e))instanceof t))return!1;var n=this._repo===e._repo,r=kt(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function ji(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Bi(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Bt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==O)throw new Error(r);if("string"!==typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==C)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(t.getIndex()===ee){if(null!=e&&!Gr(e)||null!=n&&!Gr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.assert)(t.getIndex()instanceof he||t.getIndex()===fe,"unknown index type."),null!=e&&"object"===typeof e||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ui(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Vi=function(t){function e(e,n){return t.call(this,e,n,new Ee,!1)||this}return Object(s.c)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=xt(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(Fi),zi=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new pt(e),r=Wi(this.ref,e);return new t(this._node.getChild(n),r,ee)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return e(new t(i,Wi(n.ref,r),ee))}))},t.prototype.hasChild=function(t){var e=new pt(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Gi(t,e){return(t=Object(o.getModularInstance)(t))._checkNotDeleted("ref"),void 0!==e?Wi(t._root,e):t._root}function Yi(t,e){(t=Object(o.getModularInstance)(t))._checkNotDeleted("refFromURL");var n=Ii(e,t._repo.repoInfo_.nodeAdmin);Qr("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||S("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Gi(t,n.path.toString())}function Wi(t,e){var n,r,i,s;return null===gt((t=Object(o.getModularInstance)(t))._path)?(n="child",r="path",s=!1,(i=e)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),$r(n,r,i,s)):$r("child","path",e,!1),new Vi(t._repo,_t(t._path,e))}function Xi(t,e){t=Object(o.getModularInstance)(t),Jr("push",t._path),Yr("push",e,t._path,!0);var n,r=ci(t._repo),i=pe(r),s=Wi(t,i),a=Wi(t,i);return n=null!=e?qi(a,e).then((function(){return a})):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function Hi(t){return Jr("remove",t._path),qi(t,null)}function qi(t,e){t=Object(o.getModularInstance)(t),Jr("set",t._path),Yr("set",e,t._path,!1);var n=new o.Deferred;return vi(t._repo,t._path,e,null,n.wrapCallback((function(){}))),n.promise}function Ki(t,e){t=Object(o.getModularInstance)(t),Jr("setPriority",t._path),Hr("setPriority",e,!1);var n=new o.Deferred;return vi(t._repo,_t(t._path,".priority"),e,null,n.wrapCallback((function(){}))),n.promise}function $i(t,e,n){if(Jr("setWithPriority",t._path),Yr("setWithPriority",e,t._path,!1),Hr("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new o.Deferred;return vi(t._repo,t._path,e,n,r.wrapCallback((function(){}))),r.promise}function Ji(t,e){Xr("update",e,t._path,!1);var n=new o.Deferred;return function(t,e,n,r){wi(t,"update",{path:e.toString(),value:n});var i=!0,o=hi(t),s={};if(L(n,(function(n,r){i=!1,s[n]=kr(_t(e,n),ce(r),t.serverSyncTree_,o)})),i)_("update() called with empty data.  Don't do anything."),xi(0,r,"ok",void 0);else{var a=pi(t),u=ir(t.serverSyncTree_,e,s,a);ei(t.eventQueue_,u),t.server_.merge(e.toString(),n,(function(n,i){var o="ok"===n;o||k("update at "+e+" failed: "+n);var s=or(t.serverSyncTree_,a,!o),u=s.length>0?Ei(t,e):e;ri(t.eventQueue_,u,s),xi(0,r,n,i)})),L(n,(function(n){var r=Ci(t,_t(e,n));Ei(t,r)})),ri(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback((function(){}))),n.promise}function Qi(t){return function(t,e){var n=hr(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then((function(n){var r=ce(n).withIndex(e._queryParams.getIndex()),i=sr(t.serverSyncTree_,e._path,r);return ni(t.eventQueue_,e._path,i),Promise.resolve(r)}),(function(n){return wi(t,"get for query "+Object(o.stringify)(e)+" failed: "+n),Promise.reject(new Error(n))}))}((t=Object(o.getModularInstance)(t))._repo,t).then((function(e){return new zi(e,new Vi(t._repo,t._path),t._queryParams.getIndex())}))}var Zi=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new Mi("value",this,new zi(t.snapshotNode,new Vi(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ni(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),to=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Ni(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.assert)(null!=t.childName,"Child events should have a childName.");var n=Wi(new Vi(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Mi(t.type,this,new zi(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function eo(t,e,n,r,i){var o;if("object"===typeof r&&(o=void 0,i=r),"function"===typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(e,n){yi(t._repo,t,c),s(e,n)};a.userCallback=n.userCallback,a.context=n.context,n=a}var u=new Li(n,o||void 0),c="value"===e?new Zi(u):new to(e,u);return function(t,e,n){var r;r=".info"===gt(e._path)?ur(t.infoSyncTree_,e,n):ur(t.serverSyncTree_,e,n),ni(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return yi(t._repo,t,c)}}function no(t,e,n,r){return eo(t,"value",e,n,r)}function ro(t,e,n,r){return eo(t,"child_added",e,n,r)}function io(t,e,n,r){return eo(t,"child_changed",e,n,r)}function oo(t,e,n,r){return eo(t,"child_moved",e,n,r)}function so(t,e,n,r){return eo(t,"child_removed",e,n,r)}function ao(t,e,n){var r=null,i=n?new Li(n):null;"value"===e?r=new Zi(i):e&&(r=new to(e,i)),yi(t._repo,t,r)}var uo=function(){},co=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s.c)(e,t),e.prototype._apply=function(t){Yr("endAt",this._value,t._path,!0);var e=ke(t._queryParams,this._value,this._key);if(Ui(e),Bi(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Fi(t._repo,t._path,e,t._orderByCalled)},e}(uo);function ho(t,e){return Kr("endAt","key",e,!0),new co(t,e)}var lo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s.c)(e,t),e.prototype._apply=function(t){Yr("endBefore",this._value,t._path,!1);var e=function(t,e,n){var r;return t.index_===Bt?("string"===typeof e&&(e=ge(e)),r=ke(t,e,n)):r=ke(t,e,null==n?O:ge(n)),r.endBeforeSet_=!0,r}(t._queryParams,this._value,this._key);if(Ui(e),Bi(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Fi(t._repo,t._path,e,t._orderByCalled)},e}(uo);function fo(t,e){return Kr("endBefore","key",e,!0),new lo(t,e)}var po=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s.c)(e,t),e.prototype._apply=function(t){Yr("startAt",this._value,t._path,!0);var e=Se(t._queryParams,this._value,this._key);if(Ui(e),Bi(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Fi(t._repo,t._path,e,t._orderByCalled)},e}(uo);function vo(t,e){return void 0===t&&(t=null),Kr("startAt","key",e,!0),new po(t,e)}var go=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s.c)(e,t),e.prototype._apply=function(t){Yr("startAfter",this._value,t._path,!1);var e=function(t,e,n){var r;t.index_===Bt?("string"===typeof e&&(e=ve(e)),r=Se(t,e,n)):r=Se(t,e,null==n?C:ve(n));return r.startAfterSet_=!0,r}(t._queryParams,this._value,this._key);if(Ui(e),Bi(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Fi(t._repo,t._path,e,t._orderByCalled)},e}(uo);function mo(t,e){return Kr("startAfter","key",e,!0),new go(t,e)}var yo=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(s.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Fi(t._repo,t._path,function(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}(t._queryParams,this._limit),t._orderByCalled)},e}(uo);function bo(t){if("number"!==typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new yo(t)}var wo=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(s.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Fi(t._repo,t._path,function(t,e){var n=t.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}(t._queryParams,this._limit),t._orderByCalled)},e}(uo);function xo(t){if("number"!==typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new wo(t)}var _o=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return Object(s.c)(e,t),e.prototype._apply=function(t){ji(t,"orderByChild");var e=new pt(this._path);if(Tt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new he(e),r=Ae(t._queryParams,n);return Bi(r),new Fi(t._repo,t._path,r,!0)},e}(uo);function To(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return $r("orderByChild","path",t,!1),new _o(t)}var Eo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype._apply=function(t){ji(t,"orderByKey");var e=Ae(t._queryParams,Bt);return Bi(e),new Fi(t._repo,t._path,e,!0)},e}(uo);function So(){return new Eo}var ko=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype._apply=function(t){ji(t,"orderByPriority");var e=Ae(t._queryParams,ee);return Bi(e),new Fi(t._repo,t._path,e,!0)},e}(uo);function Ao(){return new ko}var Oo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(s.c)(e,t),e.prototype._apply=function(t){ji(t,"orderByValue");var e=Ae(t._queryParams,fe);return Bi(e),new Fi(t._repo,t._path,e,!0)},e}(uo);function Co(){return new Oo}var Po=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(s.c)(e,t),e.prototype._apply=function(t){if(Yr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new co(this._value,this._key)._apply(new po(this._value,this._key)._apply(t))},e}(uo);function Io(t,e){return Kr("equalTo","key",e,!0),new Po(t,e)}function Ro(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var a=Object(o.getModularInstance)(t);try{for(var u=Object(s.g)(r),c=u.next();!c.done;c=u.next()){var h=c.value;a=h._apply(a)}}catch(l){e={error:l}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a}!function(t){Object(o.assert)(!Dn,"__referenceConstructor has already been defined"),Dn=t}(Vi),function(t){Object(o.assert)(!Gn,"__referenceConstructor has already been defined"),Gn=t}(Vi);var Mo={},No=!1;function Lo(e,n,r,i,o){var s=i||e.options.databaseURL;void 0===s&&(e.options.projectId||S("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",e.options.projectId),s=e.options.projectId+"-default-rtdb.firebaseio.com");var a,u=Ii(s,o),c=u.repoInfo,h=void 0;"undefined"!==typeof t&&(h=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_COLLECTION_NAME:"highscores",REACT_APP_FIREBASE_APIKEY:'\u201dAIzaSyBnP9vqgX__NsGOWq40kkK--4F5P0yFsKc"',REACT_APP_FIREBASE_APPID:'1:795230851008:web:52465fb8f11d3fd3608225"',REACT_APP_FIREBASE_AUTHDOMAIN:"pinbaal-743d3.firebaseapp.com",REACT_APP_FIREBASE_MESSAGINGSENDERID:"795230851008",REACT_APP_FIREBASE_PROJECTID:"pinbaal-743d3",REACT_APP_FIREBASE_STORAGEBUCKET:"pinbaal-743d3.appspot.com",REACT_APP_SERVER_PORT:"https://server.pinbaal.com"}).FIREBASE_DATABASE_EMULATOR_HOST),h?(a=!0,s="http://"+h+"?ns="+c.namespace,c=(u=Ii(s,o)).repoInfo):a=!u.repoInfo.secure;var l=o&&a?new W(W.OWNER):new Y(e.name,e.options,n);Qr("Invalid Firebase Database URL",u),Tt(u.path)||S("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(t,e,n,r){var i=Mo[e.name];i||(i={},Mo[e.name]=i);var o=i[t.toURLString()];o&&S("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new ai(t,No,n,r),i[t.toURLString()]=o,o}(c,e,l,new G(e.name,r));return new Do(f,e)}var Do=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(ui(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Vi(this._repo,vt())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){return this._checkNotDeleted("delete"),function(t,e){var n=Mo[e];n&&n[t.key]===t||S("Database "+e+"("+t.repoInfo_+") has already been deleted."),bi(t),delete n[t.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&S("Cannot call "+t+" on a deleted database.")},t}();function Fo(t,e,n,r){void 0===r&&(r={}),(t=Object(o.getModularInstance)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&S("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,s=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&S('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new W(W.OWNER);else if(r.mockUserToken){var a=Object(o.createMockUserToken)(r.mockUserToken,t.app.options.projectId);s=new W(a)}!function(t,e,n,r){t.repoInfo_=new $(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(i,e,n,s)}function jo(t){(t=Object(o.getModularInstance)(t))._checkNotDeleted("goOffline"),bi(t._repo)}function Bo(t){var e;(t=Object(o.getModularInstance)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(si)}var Uo={".sv":"timestamp"};var Vo=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function zo(t,e,n){var r;if(t=Object(o.getModularInstance)(t),Jr("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null===n||void 0===n?void 0:n.applyLocally)||void 0===r||r,s=new o.Deferred,a=no(t,(function(){}));return function(t,e,n,r,i,s){wi(t,"transaction on "+e);var a={path:e,update:n,onComplete:r,status:null,order:g(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=_i(t,e,void 0);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{Wr("transaction failed: Data returned ",c,a.path),a.status=0;var h=Pr(t.transactionQueueTree_,e),l=Ir(h)||[];l.push(a),Rr(h,l);var f=void 0;"object"===typeof c&&null!==c&&Object(o.contains)(c,".priority")?(f=Object(o.safeGet)(c,".priority"),Object(o.assert)(Gr(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(cr(t.serverSyncTree_,e)||ae.EMPTY_NODE).getPriority().val();var d=hi(t),p=ce(c,f),v=Ar(p,u,d);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=v,a.currentWriteId=pi(t);var m=rr(t.serverSyncTree_,e,v,a.currentWriteId,a.applyLocally);ri(t.eventQueue_,e,m),Ti(t,t.transactionQueueTree_)}}(t._repo,t._path,e,(function(e,n,r){var i=null;e?s.reject(e):(i=new zi(r,new Vi(t._repo,t._path),ee),s.resolve(new Vo(n,i)))}),a,i),s.promise}var Go=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){Object(o.validateArgCount)("OnDisconnect.cancel",0,1,arguments.length),Object(o.validateCallback)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.remove=function(t){Object(o.validateArgCount)("OnDisconnect.remove",0,1,arguments.length),Object(o.validateCallback)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.set=function(t,e){Object(o.validateArgCount)("OnDisconnect.set",1,2,arguments.length),Object(o.validateCallback)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},t.prototype.setWithPriority=function(t,e,n){Object(o.validateArgCount)("OnDisconnect.setWithPriority",2,3,arguments.length),Object(o.validateCallback)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},t.prototype.update=function(t,e){if(Object(o.validateArgCount)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,k("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(o.validateCallback)("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},t}(),Yo=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.validateArgCount)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Wo=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return Object(o.validateArgCount)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return Object(o.validateArgCount)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return Object(o.validateArgCount)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return Object(o.validateArgCount)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return Object(o.validateArgCount)("DataSnapshot.child",0,1,arguments.length),e=String(e),$r("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return Object(o.validateArgCount)("DataSnapshot.hasChild",1,1,arguments.length),$r("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return Object(o.validateArgCount)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return Object(o.validateArgCount)("DataSnapshot.forEach",1,1,arguments.length),Object(o.validateCallback)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((function(r){return e(new t(n._database,r))}))},t.prototype.hasChildren=function(){return Object(o.validateArgCount)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.validateArgCount)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return Object(o.validateArgCount)("DataSnapshot.ref",0,0,arguments.length),new Ho(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Xo=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var s,a=this;Object(o.validateArgCount)("Query.on",2,4,arguments.length),Object(o.validateCallback)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,i),c=function(t,e){n.call(u.context,new Wo(a.database,t),e)};c.userCallback=n,c.context=u.context;var h=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return no(this._delegate,c,h),n;case"child_added":return ro(this._delegate,c,h),n;case"child_removed":return so(this._delegate,c,h),n;case"child_changed":return io(this._delegate,c,h),n;case"child_moved":return oo(this._delegate,c,h),n;default:throw new Error(Object(o.errorPrefix)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(Object(o.validateArgCount)("Query.off",0,3,arguments.length),qr("Query.off",t,!0),Object(o.validateCallback)("Query.off","callback",e,!0),Object(o.validateContextObject)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,ao(this._delegate,t,r)}else ao(this._delegate,t)},t.prototype.get=function(){var t=this;return Qi(this._delegate).then((function(e){return new Wo(t.database,e)}))},t.prototype.once=function(e,n,r,i){var s=this;Object(o.validateArgCount)("Query.once",1,4,arguments.length),Object(o.validateCallback)("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=new o.Deferred,c=function(t,e){var r=new Wo(s.database,t);n&&n.call(a.context,r,e),u.resolve(r)};c.userCallback=n,c.context=a.context;var h=function(t){a.cancel&&a.cancel.call(a.context,t),u.reject(t)};switch(e){case"value":no(this._delegate,c,h,{onlyOnce:!0});break;case"child_added":ro(this._delegate,c,h,{onlyOnce:!0});break;case"child_removed":so(this._delegate,c,h,{onlyOnce:!0});break;case"child_changed":io(this._delegate,c,h,{onlyOnce:!0});break;case"child_moved":oo(this._delegate,c,h,{onlyOnce:!0});break;default:throw new Error(Object(o.errorPrefix)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return Object(o.validateArgCount)("Query.limitToFirst",1,1,arguments.length),new t(this.database,Ro(this._delegate,bo(e)))},t.prototype.limitToLast=function(e){return Object(o.validateArgCount)("Query.limitToLast",1,1,arguments.length),new t(this.database,Ro(this._delegate,xo(e)))},t.prototype.orderByChild=function(e){return Object(o.validateArgCount)("Query.orderByChild",1,1,arguments.length),new t(this.database,Ro(this._delegate,To(e)))},t.prototype.orderByKey=function(){return Object(o.validateArgCount)("Query.orderByKey",0,0,arguments.length),new t(this.database,Ro(this._delegate,So()))},t.prototype.orderByPriority=function(){return Object(o.validateArgCount)("Query.orderByPriority",0,0,arguments.length),new t(this.database,Ro(this._delegate,Ao()))},t.prototype.orderByValue=function(){return Object(o.validateArgCount)("Query.orderByValue",0,0,arguments.length),new t(this.database,Ro(this._delegate,Co()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),Object(o.validateArgCount)("Query.startAt",0,2,arguments.length),new t(this.database,Ro(this._delegate,vo(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),Object(o.validateArgCount)("Query.startAfter",0,2,arguments.length),new t(this.database,Ro(this._delegate,mo(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),Object(o.validateArgCount)("Query.endAt",0,2,arguments.length),new t(this.database,Ro(this._delegate,ho(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),Object(o.validateArgCount)("Query.endBefore",0,2,arguments.length),new t(this.database,Ro(this._delegate,fo(e,n)))},t.prototype.equalTo=function(e,n){return Object(o.validateArgCount)("Query.equalTo",1,2,arguments.length),new t(this.database,Ro(this._delegate,Io(e,n)))},t.prototype.toString=function(){return Object(o.validateArgCount)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return Object(o.validateArgCount)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(Object(o.validateArgCount)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Object(o.validateCallback)(t,"cancel",r.cancel,!0),r.context=n,Object(o.validateContextObject)(t,"context",r.context,!0);else if(e)if("object"===typeof e&&null!==e)r.context=e;else{if("function"!==typeof e)throw new Error(Object(o.errorPrefix)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Ho(this.database,new Vi(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Ho=function(t){function e(e,n){var r=t.call(this,e,new Fi(n._repo,n._path,new Ee,!1))||this;return r.database=e,r._delegate=n,r}return Object(s.c)(e,t),e.prototype.getKey=function(){return Object(o.validateArgCount)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return Object(o.validateArgCount)("Reference.child",1,1,arguments.length),"number"===typeof t&&(t=String(t)),new e(this.database,Wi(this._delegate,t))},e.prototype.getParent=function(){Object(o.validateArgCount)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return Object(o.validateArgCount)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){Object(o.validateArgCount)("Reference.set",1,2,arguments.length),Object(o.validateCallback)("Reference.set","onComplete",e,!0);var n=qi(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.update=function(t,e){if(Object(o.validateArgCount)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,k("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Jr("Reference.update",this._delegate._path),Object(o.validateCallback)("Reference.update","onComplete",e,!0);var i=Ji(this._delegate,t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},e.prototype.setWithPriority=function(t,e,n){Object(o.validateArgCount)("Reference.setWithPriority",2,3,arguments.length),Object(o.validateCallback)("Reference.setWithPriority","onComplete",n,!0);var r=$i(this._delegate,t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},e.prototype.remove=function(t){Object(o.validateArgCount)("Reference.remove",0,1,arguments.length),Object(o.validateCallback)("Reference.remove","onComplete",t,!0);var e=Hi(this._delegate);return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},e.prototype.transaction=function(t,e,n){var r=this;Object(o.validateArgCount)("Reference.transaction",1,3,arguments.length),Object(o.validateCallback)("Reference.transaction","transactionUpdate",t,!1),Object(o.validateCallback)("Reference.transaction","onComplete",e,!0),Zr("Reference.transaction","applyLocally",n,!0);var i=zo(this._delegate,t,{applyLocally:n}).then((function(t){return new Yo(t.committed,new Wo(r.database,t.snapshot))}));return e&&i.then((function(t){return e(null,t.committed,t.snapshot)}),(function(t){return e(t,!1,null)})),i},e.prototype.setPriority=function(t,e){Object(o.validateArgCount)("Reference.setPriority",1,2,arguments.length),Object(o.validateCallback)("Reference.setPriority","onComplete",e,!0);var n=Ki(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.push=function(t,n){var r=this;Object(o.validateArgCount)("Reference.push",0,2,arguments.length),Object(o.validateCallback)("Reference.push","onComplete",n,!0);var i=Xi(this._delegate,t),s=i.then((function(t){return new e(r.database,t)}));n&&s.then((function(){return n(null)}),(function(t){return n(t)}));var a=new e(this.database,i);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return Jr("Reference.onDisconnect",this._delegate._path),new Go(new Di(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Xo),qo=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),Fo(this._delegate,t,e,n)},t.prototype.ref=function(t){if(Object(o.validateArgCount)("database.ref",0,1,arguments.length),t instanceof Ho){var e=Yi(this._delegate,t.toString());return new Ho(this,e)}e=Gi(this._delegate,t);return new Ho(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";Object(o.validateArgCount)(e,1,1,arguments.length);var n=Yi(this._delegate,t);return new Ho(this,n)},t.prototype.goOffline=function(){return Object(o.validateArgCount)("database.goOffline",0,0,arguments.length),jo(this._delegate)},t.prototype.goOnline=function(){return Object(o.validateArgCount)("database.goOnline",0,0,arguments.length),Bo(this._delegate)},t.ServerValue={TIMESTAMP:Uo,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}();var Ko=Object.freeze({__proto__:null,forceLongPolling:function(){ut.forceDisallow(),ot.forceAllow()},forceWebSockets:function(){ot.forceDisallow()},isWebSocketsAvailable:function(){return ut.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!==typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Fe(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce((function(t,e){return Math.max(e.length,t)}),0);L(n,(function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)}))}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){var n,r;t.stats_.incrementCounter(e),n=t.statsReporter_,r=e,n.statsToReport_[r]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,o=t.customAuthImpl,s=t.namespace,a=t.nodeAdmin,u=void 0!==a&&a;c(r);var h=new i.Provider("auth-internal",new i.ComponentContainer("database-standalone"));return h.setComponent(new i.Component("auth-internal",(function(){return o}),"PRIVATE")),{instance:new qo(Lo(e,h,void 0,n,u),e),namespace:s}}}),$o=Lt;Lt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Lt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Jo=ht,Qo=$,Zo=Object.freeze({__proto__:null,DataConnection:$o,RealTimeConnection:Jo,hijackHash:function(t){var e=Lt.prototype.put;return Lt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Lt.prototype.put=e}},ConnectionTarget:Qo,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){No=t}(t)}}),ts=qo.ServerValue;!function(t){c(t.SDK_VERSION);var n=t.INTERNAL.registerComponent(new i.Component("database",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new qo(Lo(r,i,o,n),r)}),"PUBLIC").setServiceProps({Reference:Ho,Query:Xo,Database:qo,DataSnapshot:Wo,enableLogging:x,INTERNAL:Ko,ServerValue:ts,TEST_ACCESS:Zo}).setMultipleInstances(!0));t.registerVersion("@firebase/database","0.10.8"),Object(o.isNodeSdk)()&&(e.exports=n)}(r.default)}).call(this,n(73),n(144)(t))},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){"use strict";var r=n(12),i=n(20),o=n(146),s=n(0),a=n(19);function u(t){return t&&"object"===typeof t&&"default"in t?t:{default:t}}var c,h=u(r),l=((c={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",c["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",c["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",c["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",c["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",c["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",c["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",c["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",c["recaptcha-error"]="ReCAPTCHA error.",c),f=new s.ErrorFactory("appCheck","AppCheck",l),d=new Map,p={activated:!1,tokenObservers:[]},v={enabled:!1};function g(t){return d.get(t)||p}function m(t,e){d.set(t,e)}function y(){return v}function b(){return self.grecaptcha}function w(t){if(!g(t).activated)throw f.create("use-before-activation",{appName:t.name})}var x="https://www.google.com/recaptcha/api.js";function _(t,e){var n=g(t),r=new s.Deferred;m(t,o.__assign(o.__assign({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+t.name,a=document.createElement("div");a.id=i,a.style.display="none",document.body.appendChild(a);var u=b();return u?u.ready((function(){E(t,e,u,i),r.resolve(u)})):function(t){var e=document.createElement("script");e.src=""+x,e.onload=t,document.head.appendChild(e)}((function(){var n=b();if(!n)throw new Error("no recaptcha");n.ready((function(){E(t,e,n,i),r.resolve(n)}))})),r.promise}function T(t){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){switch(n.label){case 0:return w(t),[4,g(t).reCAPTCHAState.initialized.promise];case 1:return e=n.sent(),[2,new Promise((function(n,r){var i=g(t).reCAPTCHAState;e.ready((function(){n(e.execute(i.widgetId,{action:"fire_app_check"}))}))}))]}}))}))}function E(t,e,n,r){var i=n.render(r,{sitekey:e,size:"invisible"}),s=g(t);m(t,o.__assign(o.__assign({},s),{reCAPTCHAState:o.__assign(o.__assign({},s.reCAPTCHAState),{widgetId:i})}))}var S="https://content-firebaseappcheck.googleapis.com/v1beta",k=3e4,A=96e4,O=function(){function t(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return t.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))},t.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},t.prototype.isRunning=function(){return!!this.pending},t.prototype.process=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new s.Deferred,[4,(r=this.getNextRun(t),new Promise((function(t){setTimeout(t,r)})))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new s.Deferred,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch((function(){})),[3,7];case 6:return e=n.sent(),this.retryPolicy(e)?this.process(!1).catch((function(){})):this.stop(),[3,7];case 7:return[2]}var r}))}))},t.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e},t}();function C(t,e){var n=t.url,r=t.body;return o.__awaiter(this,void 0,void 0,(function(){var t,i,s,a,u,c,h,l,d,p;return o.__generator(this,(function(o){switch(o.label){case 0:t={"Content-Type":"application/json"},(i=e.getImmediate({optional:!0}))&&(t["X-Firebase-Client"]=i.getPlatformInfoString()),s={method:"POST",body:JSON.stringify(r),headers:t},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(n,s)];case 2:return a=o.sent(),[3,4];case 3:throw u=o.sent(),f.create("fetch-network-error",{originalErrorMessage:u.message});case 4:if(200!==a.status)throw f.create("fetch-status-error",{httpStatus:a.status});o.label=5;case 5:return o.trys.push([5,7,,8]),[4,a.json()];case 6:return c=o.sent(),[3,8];case 7:throw h=o.sent(),f.create("fetch-parse-error",{originalErrorMessage:h.message});case 8:if(!(l=c.ttl.match(/^([\d.]+)(s)$/))||!l[2]||isNaN(Number(l[1])))throw f.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+c.ttl});return d=1e3*Number(l[1]),p=Date.now(),[2,{token:c.attestationToken,expireTimeMillis:p+d,issuedAtTimeMillis:p}]}}))}))}function P(t,e){var n=t.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:S+"/projects/"+r+"/apps/"+i+":exchangeRecaptchaToken?key="+o,body:{recaptcha_token:e}}}function I(t,e){var n=t.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:S+"/projects/"+r+"/apps/"+i+":exchangeDebugToken?key="+o,body:{debug_token:e}}}var R="firebase-app-check-store",M="debug-token",N=null;function L(){return N||(N=new Promise((function(t,e){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(e){t(e.target.result)},n.onerror=function(t){var n;e(f.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(t){var e=t.target.result;if(0===t.oldVersion)e.createObjectStore(R,{keyPath:"compositeKey"})}}catch(r){e(f.create("storage-open",{originalErrorMessage:r.message}))}})),N)}function D(t){return j(B(t))}function F(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,s;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,L()];case 1:return n=o.sent(),r=n.transaction(R,"readwrite"),i=r.objectStore(R),s=i.put({compositeKey:t,value:e}),[2,new Promise((function(t,e){s.onsuccess=function(e){t()},r.onerror=function(t){var n;e(f.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function j(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,L()];case 1:return e=o.sent(),n=e.transaction(R,"readonly"),r=n.objectStore(R),i=r.get(t),[2,new Promise((function(t,e){i.onsuccess=function(e){var n=e.target.result;t(n?n.value:void 0)},n.onerror=function(t){var n;e(f.create("storage-get",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function B(t){return t.options.appId+"-"+t.name}var U=new a.Logger("@firebase/app-check");function V(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!s.isIndexedDBAvailable())return[3,5];e=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,D(t)];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),U.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,e];case 5:return[2,void 0]}}))}))}function z(t,e){return s.isIndexedDBAvailable()?function(t,e){return F(B(t),e)}(t,e).catch((function(t){U.warn("Failed to write token to indexeddb. Error: "+t)})):Promise.resolve()}function G(){return o.__awaiter(this,void 0,void 0,(function(){var t,e;return o.__generator(this,(function(n){switch(n.label){case 0:t=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,j(M)];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return t?[2,t]:(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),(r=e,F(M,r)).catch((function(t){return U.warn("Failed to persist debug token to indexeddb. Error: "+t)})),console.log("AppCheck debug token: "+e+". You will need to whitelist it in the Firebase console for it to work"),[2,e])}var r}))}))}function Y(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){if((t=y()).enabled&&t.token)return[2,t.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")}))}))}var W={error:"UNKNOWN_ERROR"};function X(t){return s.base64.encodeString(JSON.stringify(t),!1)}function H(t,e,n){return void 0===n&&(n=!1),o.__awaiter(this,void 0,void 0,(function(){var r,i,a,u,c,h,l,d,p,v,b,x,_,E;return o.__generator(this,(function(S){switch(S.label){case 0:return w(t),r=g(t),i=r.token,a=void 0,i?[3,2]:[4,V(t)];case 1:(u=S.sent())&&J(u)&&(i=u,m(t,o.__assign(o.__assign({},r),{token:i})),$(t,{token:i.token})),S.label=2;case 2:return!n&&i&&J(i)?[2,{token:i.token}]:y().enabled?(h=C,l=I,d=[t],[4,Y()]):[3,6];case 3:return[4,h.apply(void 0,[l.apply(void 0,d.concat([S.sent()])),e])];case 4:return c=S.sent(),[4,z(t,c)];case 5:return S.sent(),m(t,o.__assign(o.__assign({},r),{token:c})),[2,{token:c.token}];case 6:return S.trys.push([6,12,,13]),r.customProvider?[4,r.customProvider.getToken()]:[3,8];case 7:return p=S.sent(),v=s.issuedAtTime(p.token),b=null!==v&&v<Date.now()&&v>0?1e3*v:Date.now(),i=o.__assign(o.__assign({},p),{issuedAtTimeMillis:b}),[3,11];case 8:return[4,T(t).catch((function(t){throw f.create("recaptcha-error")}))];case 9:return x=S.sent(),[4,C(P(t,x),e)];case 10:i=S.sent(),S.label=11;case 11:return[3,13];case 12:return _=S.sent(),U.error(_),a=_,[3,13];case 13:return i?[3,14]:(E=function(t){return{token:X(W),error:t}}(a),[3,16]);case 14:return E={token:i.token},m(t,o.__assign(o.__assign({},r),{token:i})),[4,z(t,i)];case 15:S.sent(),S.label=16;case 16:return $(t,E),[2,E]}}))}))}function q(t,e,n,r,i){var s=g(t),a={next:r,error:i,type:n},u=o.__assign(o.__assign({},s),{tokenObservers:o.__spreadArray(o.__spreadArray([],s.tokenObservers),[a])});if(!u.tokenRefresher){var c=function(t,e){var n=this;return new O((function(){return o.__awaiter(n,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return g(t).token?[3,2]:[4,H(t,e)];case 1:return n=r.sent(),[3,4];case 2:return[4,H(t,e,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}}))}))}),(function(){return!0}),(function(){var e=g(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5,r=e.token.expireTimeMillis-3e5;return n=Math.min(n,r),Math.max(0,n-Date.now())}return 0}),k,A)}(t,e);u.tokenRefresher=c}if(u.tokenRefresher.isRunning()||!0!==s.isTokenAutoRefreshEnabled||u.tokenRefresher.start(),s.token&&J(s.token)){var h=s.token;Promise.resolve().then((function(){return r({token:h.token})})).catch((function(){}))}m(t,u)}function K(t,e){var n=g(t),r=n.tokenObservers.filter((function(t){return t.next!==e}));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),m(t,o.__assign(o.__assign({},n),{tokenObservers:r}))}function $(t,e){for(var n=0,r=g(t).tokenObservers;n<r.length;n++){var i=r[n];try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(o){}}}function J(t){return t.expireTimeMillis-Date.now()>0}function Q(t,e){return{app:t,activate:function(e,n){return function(t,e,n){var r=g(t);if(r.activated)throw f.create("already-activated",{appName:t.name});var i=o.__assign(o.__assign({},r),{activated:!0});"string"===typeof e?i.siteKey=e:i.customProvider=e,i.isTokenAutoRefreshEnabled=void 0===n?t.automaticDataCollectionEnabled:n,m(t,i),i.siteKey&&_(t,i.siteKey).catch((function(){}))}(t,e,n)},setTokenAutoRefreshEnabled:function(e){return function(t,e){var n=g(t);n.tokenRefresher&&(!0===e?n.tokenRefresher.start():n.tokenRefresher.stop()),m(t,o.__assign(o.__assign({},n),{isTokenAutoRefreshEnabled:e}))}(t,e)},getToken:function(n){return function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r;return o.__generator(this,(function(i){switch(i.label){case 0:return[4,H(t,e,n)];case 1:if((r=i.sent()).error)throw r.error;return[2,{token:r.token}]}}))}))}(t,e,n)},onTokenChanged:function(n,r,i){return function(t,e,n,r,i){var o=function(){},s=function(){};return o=null!=n.next?n.next.bind(n):n,null!=n.error?s=n.error.bind(n):r&&(s=r),q(t,e,"EXTERNAL",o,s),function(){return K(t,o)}}(t,e,n,r)},INTERNAL:{delete:function(){for(var e=0,n=g(t).tokenObservers;e<n.length;e++){var r=n[e];K(t,r.next)}return Promise.resolve()}}}}var Z="app-check-internal";!function(t){t.INTERNAL.registerComponent(new i.Component("appCheck",(function(t){return Q(t.getProvider("app").getImmediate(),t.getProvider("platform-logger"))}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(t,e,n){t.getProvider(Z).initialize()}))),t.INTERNAL.registerComponent(new i.Component(Z,(function(t){return function(t,e){return{getToken:function(n){return H(t,e,n)},addTokenListener:function(n){return q(t,e,"INTERNAL",n)},removeTokenListener:function(e){return K(t,e)}}}(t.getProvider("app").getImmediate(),t.getProvider("platform-logger"))}),"PUBLIC").setInstantiationMode("EXPLICIT")),t.registerVersion("@firebase/app-check","0.2.0")}(h.default),function(){var t=s.getGlobal();if("string"===typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===t.FIREBASE_APPCHECK_DEBUG_TOKEN){var e=y();e.enabled=!0;var n=new s.Deferred;e.token=n,"string"===typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN?n.resolve(t.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(G())}}()},function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return i})),n.d(e,"__assign",(function(){return o})),n.d(e,"__rest",(function(){return s})),n.d(e,"__decorate",(function(){return a})),n.d(e,"__param",(function(){return u})),n.d(e,"__metadata",(function(){return c})),n.d(e,"__awaiter",(function(){return h})),n.d(e,"__generator",(function(){return l})),n.d(e,"__createBinding",(function(){return f})),n.d(e,"__exportStar",(function(){return d})),n.d(e,"__values",(function(){return p})),n.d(e,"__read",(function(){return v})),n.d(e,"__spread",(function(){return g})),n.d(e,"__spreadArrays",(function(){return m})),n.d(e,"__spreadArray",(function(){return y})),n.d(e,"__await",(function(){return b})),n.d(e,"__asyncGenerator",(function(){return w})),n.d(e,"__asyncDelegator",(function(){return x})),n.d(e,"__asyncValues",(function(){return _})),n.d(e,"__makeTemplateObject",(function(){return T})),n.d(e,"__importStar",(function(){return S})),n.d(e,"__importDefault",(function(){return k})),n.d(e,"__classPrivateFieldGet",(function(){return A})),n.d(e,"__classPrivateFieldSet",(function(){return O}));var r=function(t,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},r(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,n,s):i(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function u(t,e){return function(n,r){e(n,r,t)}}function c(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function l(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var f=Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]};function d(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||f(e,t,n)}function p(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function g(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(v(arguments[e]));return t}function m(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function y(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function b(t){return this instanceof b?(this.v=t,this):new b(t)}function w(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},s("next"),s("throw"),s("return"),r[Symbol.asyncIterator]=function(){return this},r;function s(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||a(t,e)}))})}function a(t,e){try{(n=i[t](e)).value instanceof b?Promise.resolve(n.value.v).then(u,c):h(o[0][2],n)}catch(r){h(o[0][3],r)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function h(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function x(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:b(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function _(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=p(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){(function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)})(r,i,(e=t[n](e)).done,e.value)}))}}}function T(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var E=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function S(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&f(e,t,n);return E(e,t),e}function k(t){return t&&t.__esModule?t:{default:t}}function A(t,e,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(t):r?r.value:e.get(t)}function O(t,e,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(t,n):i?i.value=n:e.set(t,n),n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=h(n(6)),o=h(n(53)),s=h(n(150)),a=h(n(160)),u=h(n(161)),c=h(n(162));function h(t){return t&&t.__esModule?t:{default:t}}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function f(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}var d=function(t){function e(){var t,n,r;l(this,e);for(var o=arguments.length,a=Array(o),u=0;u<o;u++)a[u]=arguments[u];return n=r=f(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(a))),r.genColor=function(t){r.generator.random();var e=Math.floor(t.length*r.generator.random());return t.splice(e,1)[0]},r.hueShift=function(t,e){var n=30*e.random()-15;return t.map((function(t){var e=(0,s.default)(t);return e.rotate(n),e.hexString()}))},r.genShape=function(t,e,n,o){var s=e/2,a=r.generator.random(),u=2*Math.PI*a,c=e/o*r.generator.random()+n*e/o,h="translate("+Math.cos(u)*c+" "+Math.sin(u)*c+")"+" "+("rotate("+(360*a+180*r.generator.random()).toFixed(1)+" "+s+" "+s+")"),l=r.genColor(t);return i.default.createElement("rect",{key:n,x:"0",y:"0",rx:"0",ry:"0",height:e,width:e,transform:h,fill:l})},f(r,n)}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"render",value:function(){var t=this,e=this.props,n=e.diameter,r=e.paperStyles,o=e.seed,s=e.svgStyles;this.generator=new a.default(o);var h=this.hueShift(u.default.slice(),this.generator),l=Array(4).fill();return i.default.createElement(c.default,{color:this.genColor(h),diameter:n,style:r},i.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0",y:"0",height:n,width:n,style:s},l.map((function(e,r){return t.genShape(h,n,r,3)}))))}}]),e}(i.default.PureComponent);e.default=d,d.propTypes={diameter:o.default.number,paperStyles:o.default.object,seed:o.default.number,svgStyles:o.default.object}},function(t,e,n){"use strict";var r=n(149);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){var r=n(151),i=n(155),o=n(158),s=function t(e){if(e instanceof t)return e;if(!(this instanceof t))return new t(e);var n;if(this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},"string"===typeof e)if(n=o.getRgba(e))this.setValues("rgb",n);else if(n=o.getHsla(e))this.setValues("hsl",n);else{if(!(n=o.getHwb(e)))throw new Error('Unable to parse color from string "'+e+'"');this.setValues("hwb",n)}else if("object"===typeof e)if(void 0!==(n=e).r||void 0!==n.red)this.setValues("rgb",n);else if(void 0!==n.l||void 0!==n.lightness)this.setValues("hsl",n);else if(void 0!==n.v||void 0!==n.value)this.setValues("hsv",n);else if(void 0!==n.w||void 0!==n.whiteness)this.setValues("hwb",n);else{if(void 0===n.c&&void 0===n.cyan)throw new Error("Unable to parse color from object "+JSON.stringify(e));this.setValues("cmyk",n)}};(s.prototype={rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){return 1!==this.values.alpha?this.values.hwb.concat([this.values.alpha]):this.values.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){return this.values.rgb.concat([this.values.alpha])},rgbaArrayNormalized:function(){for(var t=this.values.rgb,e=[],n=0;n<3;n++)e[n]=t[n]/255;return e.push(this.values.alpha),e},hslaArray:function(){return this.values.hsl.concat([this.values.alpha])},alpha:function(t){return void 0===t?this.values.alpha:(this.setValues("alpha",t),this)},red:function(t){return this.setChannel("rgb",0,t)},green:function(t){return this.setChannel("rgb",1,t)},blue:function(t){return this.setChannel("rgb",2,t)},hue:function(t){return t&&(t=(t%=360)<0?360+t:t),this.setChannel("hsl",0,t)},saturation:function(t){return this.setChannel("hsl",1,t)},lightness:function(t){return this.setChannel("hsl",2,t)},saturationv:function(t){return this.setChannel("hsv",1,t)},whiteness:function(t){return this.setChannel("hwb",1,t)},blackness:function(t){return this.setChannel("hwb",2,t)},value:function(t){return this.setChannel("hsv",2,t)},cyan:function(t){return this.setChannel("cmyk",0,t)},magenta:function(t){return this.setChannel("cmyk",1,t)},yellow:function(t){return this.setChannel("cmyk",2,t)},black:function(t){return this.setChannel("cmyk",3,t)},hexString:function(){return o.hexString(this.values.rgb)},rgbString:function(){return o.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return o.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return o.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return o.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return o.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return o.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return o.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){return this.values.rgb[0]<<16|this.values.rgb[1]<<8|this.values.rgb[2]},luminosity:function(){for(var t=this.values.rgb,e=[],n=0;n<t.length;n++){var r=t[n]/255;e[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),n=t.luminosity();return e>n?(e+.05)/(n+.05):(n+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},dark:function(){var t=this.values.rgb;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var t=[],e=0;e<3;e++)t[e]=255-this.values.rgb[e];return this.setValues("rgb",t),this},lighten:function(t){return this.values.hsl[2]+=this.values.hsl[2]*t,this.setValues("hsl",this.values.hsl),this},darken:function(t){return this.values.hsl[2]-=this.values.hsl[2]*t,this.setValues("hsl",this.values.hsl),this},saturate:function(t){return this.values.hsl[1]+=this.values.hsl[1]*t,this.setValues("hsl",this.values.hsl),this},desaturate:function(t){return this.values.hsl[1]-=this.values.hsl[1]*t,this.setValues("hsl",this.values.hsl),this},whiten:function(t){return this.values.hwb[1]+=this.values.hwb[1]*t,this.setValues("hwb",this.values.hwb),this},blacken:function(t){return this.values.hwb[2]+=this.values.hwb[2]*t,this.setValues("hwb",this.values.hwb),this},greyscale:function(){var t=this.values.rgb,e=.3*t[0]+.59*t[1]+.11*t[2];return this.setValues("rgb",[e,e,e]),this},clearer:function(t){return this.setValues("alpha",this.values.alpha-this.values.alpha*t),this},opaquer:function(t){return this.setValues("alpha",this.values.alpha+this.values.alpha*t),this},rotate:function(t){var e=this.values.hsl[0];return e=(e=(e+t)%360)<0?360+e:e,this.values.hsl[0]=e,this.setValues("hsl",this.values.hsl),this},mix:function(t,e){var n=this,r=t,i=void 0===e?.5:e,o=2*i-1,s=n.alpha()-r.alpha(),a=((o*s===-1?o:(o+s)/(1+o*s))+1)/2,u=1-a;return this.rgb(a*n.red()+u*r.red(),a*n.green()+u*r.green(),a*n.blue()+u*r.blue()).alpha(n.alpha()*i+r.alpha()*(1-i))},toJSON:function(){return this.rgb()},clone:function(){var t=new s;return t.values=r(this.values),t}}).getValues=function(t){for(var e={},n=0;n<t.length;n++)e[t.charAt(n)]=this.values[t][n];return 1!==this.values.alpha&&(e.a=this.values.alpha),e},s.prototype.setValues=function(t,e){var n,r,o={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},s={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},a=1;if("alpha"===t)a=e;else if(e.length)this.values[t]=e.slice(0,t.length),a=e[t.length];else if(void 0!==e[t.charAt(0)]){for(n=0;n<t.length;n++)this.values[t][n]=e[t.charAt(n)];a=e.a}else if(void 0!==e[o[t][0]]){var u=o[t];for(n=0;n<t.length;n++)this.values[t][n]=e[u[n]];a=e.alpha}if(this.values.alpha=Math.max(0,Math.min(1,void 0===a?this.values.alpha:a)),"alpha"===t)return!1;for(n=0;n<t.length;n++)r=Math.max(0,Math.min(s[t][n],this.values[t][n])),this.values[t][n]=Math.round(r);for(var c in o)for(c!==t&&(this.values[c]=i[t][c](this.values[t])),n=0;n<c.length;n++)r=Math.max(0,Math.min(s[c][n],this.values[c][n])),this.values[c][n]=Math.round(r);return!0},s.prototype.setSpace=function(t,e){var n=e[0];return void 0===n?this.getValues(t):("number"===typeof n&&(n=Array.prototype.slice.call(e)),this.setValues(t,n),this)},s.prototype.setChannel=function(t,e,n){return void 0===n?this.values[t][e]:(n===this.values[t][e]||(this.values[t][e]=n,this.setValues(t,this.values[t])),this)},t.exports=s},function(t,e,n){(function(e){var n=function(){"use strict";function t(n,i,o,s){"object"===typeof i&&(o=i.depth,s=i.prototype,i.filter,i=i.circular);var a=[],u=[],c="undefined"!=typeof e;return"undefined"==typeof i&&(i=!0),"undefined"==typeof o&&(o=1/0),function n(o,h){if(null===o)return null;if(0==h)return o;var l,f;if("object"!=typeof o)return o;if(t.__isArray(o))l=[];else if(t.__isRegExp(o))l=new RegExp(o.source,r(o)),o.lastIndex&&(l.lastIndex=o.lastIndex);else if(t.__isDate(o))l=new Date(o.getTime());else{if(c&&e.isBuffer(o))return l=e.allocUnsafe?e.allocUnsafe(o.length):new e(o.length),o.copy(l),l;"undefined"==typeof s?(f=Object.getPrototypeOf(o),l=Object.create(f)):(l=Object.create(s),f=s)}if(i){var d=a.indexOf(o);if(-1!=d)return u[d];a.push(o),u.push(l)}for(var p in o){var v;f&&(v=Object.getOwnPropertyDescriptor(f,p)),v&&null==v.set||(l[p]=n(o[p],h-1))}return l}(n,o)}function n(t){return Object.prototype.toString.call(t)}function r(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return t.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},t.__objToStr=n,t.__isDate=function(t){return"object"===typeof t&&"[object Date]"===n(t)},t.__isArray=function(t){return"object"===typeof t&&"[object Array]"===n(t)},t.__isRegExp=function(t){return"object"===typeof t&&"[object RegExp]"===n(t)},t.__getRegExpFlags=r,t}();t.exports&&(t.exports=n)}).call(this,n(100).Buffer)},function(t,e,n){"use strict";e.byteLength=function(t){var e=c(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=c(t),s=r[0],a=r[1],u=new o(function(t,e,n){return 3*(e+n)/4-n}(0,s,a)),h=0,l=a>0?s-4:s;for(n=0;n<l;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],u[h++]=e>>16&255,u[h++]=e>>8&255,u[h++]=255&e;2===a&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,u[h++]=255&e);1===a&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,u[h++]=e>>8&255,u[h++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=16383,a=0,u=n-i;a<u;a+=s)o.push(h(t,a,a+s>u?u:a+s));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,u=s.length;a<u;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function h(t,e,n){for(var i,o,s=[],a=e;a<n;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,u=(1<<a)-1,c=u>>1,h=-7,l=n?i-1:0,f=n?-1:1,d=t[e+l];for(l+=f,o=d&(1<<-h)-1,d>>=-h,h+=a;h>0;o=256*o+t[e+l],l+=f,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=r;h>0;s=256*s+t[e+l],l+=f,h-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),o-=c}return(d?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,u,c=8*o-i-1,h=(1<<c)-1,l=h>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),(e+=s+l>=1?f/u:f*Math.pow(2,1-l))*u>=2&&(s++,u/=2),s+l>=h?(a=0,s=h):s+l>=1?(a=(e*u-1)*Math.pow(2,i),s+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[n+d]=255&a,d+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+d]=255&s,d+=p,s/=256,c-=8);t[n+d-p]|=128*v}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){var r=n(101),i=n(157),o={};Object.keys(r).forEach((function(t){o[t]={},Object.defineProperty(o[t],"channels",{value:r[t].channels}),Object.defineProperty(o[t],"labels",{value:r[t].labels});var e=i(t);Object.keys(e).forEach((function(n){var r=e[n];o[t][n]=function(t){var e=function(e){if(void 0===e||null===e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var n=t(e);if("object"===typeof n)for(var r=n.length,i=0;i<r;i++)n[i]=Math.round(n[i]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}(r),o[t][n].raw=function(t){var e=function(e){return void 0===e||null===e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(r)}))})),t.exports=o},function(t,e,n){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(t,e,n){var r=n(101);function i(t){var e=function(){for(var t={},e=Object.keys(r),n=e.length,i=0;i<n;i++)t[e[i]]={distance:-1,parent:null};return t}(),n=[t];for(e[t].distance=0;n.length;)for(var i=n.pop(),o=Object.keys(r[i]),s=o.length,a=0;a<s;a++){var u=o[a],c=e[u];-1===c.distance&&(c.distance=e[i].distance+1,c.parent=i,n.unshift(u))}return e}function o(t,e){return function(n){return e(t(n))}}function s(t,e){for(var n=[e[t].parent,t],i=r[e[t].parent][t],s=e[t].parent;e[s].parent;)n.unshift(e[s].parent),i=o(r[e[s].parent][s],i),s=e[s].parent;return i.conversion=n,i}t.exports=function(t){for(var e=i(t),n={},r=Object.keys(e),o=r.length,a=0;a<o;a++){var u=r[a];null!==e[u].parent&&(n[u]=s(u,e))}return n}},function(t,e,n){var r=n(159);function i(t){if(t){var e=[0,0,0],n=1,i=t.match(/^#([a-fA-F0-9]{3})$/);if(i){i=i[1];for(var o=0;o<e.length;o++)e[o]=parseInt(i[o]+i[o],16)}else if(i=t.match(/^#([a-fA-F0-9]{6})$/)){i=i[1];for(o=0;o<e.length;o++)e[o]=parseInt(i.slice(2*o,2*o+2),16)}else if(i=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(o=0;o<e.length;o++)e[o]=parseInt(i[o+1]);n=parseFloat(i[4])}else if(i=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(o=0;o<e.length;o++)e[o]=Math.round(2.55*parseFloat(i[o+1]));n=parseFloat(i[4])}else if(i=t.match(/(\D+)/)){if("transparent"==i[1])return[0,0,0,0];if(!(e=r[i[1]]))return}for(o=0;o<e.length;o++)e[o]=h(e[o],0,255);return n=n||0==n?h(n,0,1):1,e[3]=n,e}}function o(t){if(t){var e=t.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var n=parseFloat(e[4]);return[h(parseInt(e[1]),0,360),h(parseFloat(e[2]),0,100),h(parseFloat(e[3]),0,100),h(isNaN(n)?1:n,0,1)]}}}function s(t){if(t){var e=t.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(e){var n=parseFloat(e[4]);return[h(parseInt(e[1]),0,360),h(parseFloat(e[2]),0,100),h(parseFloat(e[3]),0,100),h(isNaN(n)?1:n,0,1)]}}}function a(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+e+")"}function u(t,e){return"rgba("+Math.round(t[0]/255*100)+"%, "+Math.round(t[1]/255*100)+"%, "+Math.round(t[2]/255*100)+"%, "+(e||t[3]||1)+")"}function c(t,e){return void 0===e&&(e=void 0!==t[3]?t[3]:1),"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+e+")"}function h(t,e,n){return Math.min(Math.max(e,t),n)}function l(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}t.exports={getRgba:i,getHsla:o,getRgb:function(t){var e=i(t);return e&&e.slice(0,3)},getHsl:function(t){var e=o(t);return e&&e.slice(0,3)},getHwb:s,getAlpha:function(t){var e=i(t);if(e)return e[3];if(e=o(t))return e[3];if(e=s(t))return e[3]},hexString:function(t){return"#"+l(t[0])+l(t[1])+l(t[2])},rgbString:function(t,e){if(e<1||t[3]&&t[3]<1)return a(t,e);return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"},rgbaString:a,percentString:function(t,e){if(e<1||t[3]&&t[3]<1)return u(t,e);var n=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),i=Math.round(t[2]/255*100);return"rgb("+n+"%, "+r+"%, "+i+"%)"},percentaString:u,hslString:function(t,e){if(e<1||t[3]&&t[3]<1)return c(t,e);return"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)"},hslaString:c,hwbString:function(t,e){void 0===e&&(e=void 0!==t[3]?t[3]:1);return"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+(void 0!==e&&1!==e?", "+e:"")+")"},keyword:function(t){return f[t.slice(0,3)]}};var f={};for(var d in r)f[r[d]]=d},function(t,e,n){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(t,e){var n=function(t){void 0==t&&(t=(new Date).getTime()),this.N=624,this.M=397,this.MATRIX_A=2567483615,this.UPPER_MASK=2147483648,this.LOWER_MASK=2147483647,this.mt=new Array(this.N),this.mti=this.N+1,t.constructor==Array?this.init_by_array(t,t.length):this.init_seed(t)};n.prototype.init_seed=function(t){for(this.mt[0]=t>>>0,this.mti=1;this.mti<this.N;this.mti++){t=this.mt[this.mti-1]^this.mt[this.mti-1]>>>30;this.mt[this.mti]=(1812433253*((4294901760&t)>>>16)<<16)+1812433253*(65535&t)+this.mti,this.mt[this.mti]>>>=0}},n.prototype.init_by_array=function(t,e){var n,r,i;for(this.init_seed(19650218),n=1,r=0,i=this.N>e?this.N:e;i;i--){var o=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1664525*((4294901760&o)>>>16)<<16)+1664525*(65535&o))+t[r]+r,this.mt[n]>>>=0,r++,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1),r>=e&&(r=0)}for(i=this.N-1;i;i--){o=this.mt[n-1]^this.mt[n-1]>>>30;this.mt[n]=(this.mt[n]^(1566083941*((4294901760&o)>>>16)<<16)+1566083941*(65535&o))-n,this.mt[n]>>>=0,++n>=this.N&&(this.mt[0]=this.mt[this.N-1],n=1)}this.mt[0]=2147483648},n.prototype.random_int=function(){var t,e=new Array(0,this.MATRIX_A);if(this.mti>=this.N){var n;for(this.mti==this.N+1&&this.init_seed(5489),n=0;n<this.N-this.M;n++)t=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+this.M]^t>>>1^e[1&t];for(;n<this.N-1;n++)t=this.mt[n]&this.UPPER_MASK|this.mt[n+1]&this.LOWER_MASK,this.mt[n]=this.mt[n+(this.M-this.N)]^t>>>1^e[1&t];t=this.mt[this.N-1]&this.UPPER_MASK|this.mt[0]&this.LOWER_MASK,this.mt[this.N-1]=this.mt[this.M-1]^t>>>1^e[1&t],this.mti=0}return t=this.mt[this.mti++],t^=t>>>11,t^=t<<7&2636928640,t^=t<<15&4022730752,(t^=t>>>18)>>>0},n.prototype.random_int31=function(){return this.random_int()>>>1},n.prototype.random_incl=function(){return this.random_int()*(1/4294967295)},n.prototype.random=function(){return this.random_int()*(1/4294967296)},n.prototype.random_excl=function(){return(this.random_int()+.5)*(1/4294967296)},n.prototype.random_long=function(){return(67108864*(this.random_int()>>>5)+(this.random_int()>>>6))*(1/9007199254740992)},t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["#01888c","#fc7500","#034f5d","#f73f01","#fc1960","#c7144c","#f3c100","#1598f2","#2465e1","#f19e02"]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=s(n(6)),o=s(n(53));function s(t){return t&&t.__esModule?t:{default:t}}var a={borderRadius:"50px",display:"inline-block",margin:0,overflow:"hidden",padding:0},u=function(t){var e=t.children,n=t.color,o=t.diameter,s=t.style;return i.default.createElement("div",{className:"paper",style:r({},a,{backgroundColor:n,height:o,width:o},s)},e)};u.propTypes={color:o.default.string,diameter:o.default.number,style:o.default.object},e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.slice(2,10);return parseInt(e,16)}},function(t,e){t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e,n){"use strict";t.exports=n(166)},function(t,e,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,a=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,h=r?Symbol.for("react.context"):60110,l=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,v=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,w=r?Symbol.for("react.responder"):60118,x=r?Symbol.for("react.scope"):60119;function _(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case l:case f:case s:case u:case a:case p:return t;default:switch(t=t&&t.$$typeof){case h:case d:case m:case g:case c:return t;default:return e}}case o:return e}}}function T(t){return _(t)===f}e.AsyncMode=l,e.ConcurrentMode=f,e.ContextConsumer=h,e.ContextProvider=c,e.Element=i,e.ForwardRef=d,e.Fragment=s,e.Lazy=m,e.Memo=g,e.Portal=o,e.Profiler=u,e.StrictMode=a,e.Suspense=p,e.isAsyncMode=function(t){return T(t)||_(t)===l},e.isConcurrentMode=T,e.isContextConsumer=function(t){return _(t)===h},e.isContextProvider=function(t){return _(t)===c},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return _(t)===d},e.isFragment=function(t){return _(t)===s},e.isLazy=function(t){return _(t)===m},e.isMemo=function(t){return _(t)===g},e.isPortal=function(t){return _(t)===o},e.isProfiler=function(t){return _(t)===u},e.isStrictMode=function(t){return _(t)===a},e.isSuspense=function(t){return _(t)===p},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===s||t===f||t===u||t===a||t===p||t===v||"object"===typeof t&&null!==t&&(t.$$typeof===m||t.$$typeof===g||t.$$typeof===c||t.$$typeof===h||t.$$typeof===d||t.$$typeof===b||t.$$typeof===w||t.$$typeof===x||t.$$typeof===y)},e.typeOf=_},function(t,e,n){"use strict";t.exports=n(168)},function(t,e,n){"use strict";var r="function"===typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,a=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,h=r?Symbol.for("react.context"):60110,l=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,v=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,y=r?Symbol.for("react.block"):60121,b=r?Symbol.for("react.fundamental"):60117,w=r?Symbol.for("react.responder"):60118,x=r?Symbol.for("react.scope"):60119;function _(t){if("object"===typeof t&&null!==t){var e=t.$$typeof;switch(e){case i:switch(t=t.type){case l:case f:case s:case u:case a:case p:return t;default:switch(t=t&&t.$$typeof){case h:case d:case m:case g:case c:return t;default:return e}}case o:return e}}}function T(t){return _(t)===f}e.AsyncMode=l,e.ConcurrentMode=f,e.ContextConsumer=h,e.ContextProvider=c,e.Element=i,e.ForwardRef=d,e.Fragment=s,e.Lazy=m,e.Memo=g,e.Portal=o,e.Profiler=u,e.StrictMode=a,e.Suspense=p,e.isAsyncMode=function(t){return T(t)||_(t)===l},e.isConcurrentMode=T,e.isContextConsumer=function(t){return _(t)===h},e.isContextProvider=function(t){return _(t)===c},e.isElement=function(t){return"object"===typeof t&&null!==t&&t.$$typeof===i},e.isForwardRef=function(t){return _(t)===d},e.isFragment=function(t){return _(t)===s},e.isLazy=function(t){return _(t)===m},e.isMemo=function(t){return _(t)===g},e.isPortal=function(t){return _(t)===o},e.isProfiler=function(t){return _(t)===u},e.isStrictMode=function(t){return _(t)===a},e.isSuspense=function(t){return _(t)===p},e.isValidElementType=function(t){return"string"===typeof t||"function"===typeof t||t===s||t===f||t===u||t===a||t===p||t===v||"object"===typeof t&&null!==t&&(t.$$typeof===m||t.$$typeof===g||t.$$typeof===c||t.$$typeof===h||t.$$typeof===d||t.$$typeof===b||t.$$typeof===w||t.$$typeof===x||t.$$typeof===y)},e.typeOf=_},function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},,,,function(t,e,n){"use strict";n.r(e),n.d(e,"print",(function(){return f}));var r="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;function i(t){return i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t){return s(t,[])}function s(t,e){switch(i(t)){case"string":return JSON.stringify(t);case"function":return t.name?"[function ".concat(t.name,"]"):"[function]";case"object":return null===t?"null":function(t,e){if(-1!==e.indexOf(t))return"[Circular]";var n=[].concat(e,[t]),i=function(t){var e=t[String(r)];if("function"===typeof e)return e;if("function"===typeof t.inspect)return t.inspect}(t);if(void 0!==i){var o=i.call(t);if(o!==t)return"string"===typeof o?o:s(o,n)}else if(Array.isArray(t))return function(t,e){if(0===t.length)return"[]";if(e.length>2)return"[Array]";for(var n=Math.min(10,t.length),r=t.length-n,i=[],o=0;o<n;++o)i.push(s(t[o],e));1===r?i.push("... 1 more item"):r>1&&i.push("... ".concat(r," more items"));return"["+i.join(", ")+"]"}(t,n);return function(t,e){var n=Object.keys(t);if(0===n.length)return"{}";if(e.length>2)return"["+function(t){var e=Object.prototype.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if("Object"===e&&"function"===typeof t.constructor){var n=t.constructor.name;if("string"===typeof n&&""!==n)return n}return e}(t)+"]";var r=n.map((function(n){return n+": "+s(t[n],e)}));return"{ "+r.join(", ")+" }"}(t,n)}(t,e);default:return String(t)}}function a(t){var e=t.prototype.toJSON;"function"===typeof e||function(t,e){if(!Boolean(t))throw new Error(null!=e?e:"Unexpected invariant triggered.")}(0),t.prototype.inspect=e,r&&(t.prototype[r]=e)}function u(t){return null!=t&&"string"===typeof t.kind}a(function(){function t(t,e,n){this.start=t.start,this.end=e.end,this.startToken=t,this.endToken=e,this.source=n}return t.prototype.toJSON=function(){return{start:this.start,end:this.end}},t}()),a(function(){function t(t,e,n,r,i,o,s){this.kind=t,this.start=e,this.end=n,this.line=r,this.column=i,this.value=s,this.prev=o,this.next=null}return t.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},t}());var c={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},h=Object.freeze({});function l(t,e,n){var r=t[e];if(r){if(!n&&"function"===typeof r)return r;var i=n?r.leave:r.enter;if("function"===typeof i)return i}else{var o=n?t.leave:t.enter;if(o){if("function"===typeof o)return o;var s=o[e];if("function"===typeof s)return s}}}function f(t){return function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c,r=void 0,i=Array.isArray(t),s=[t],a=-1,f=[],d=void 0,p=void 0,v=void 0,g=[],m=[],y=t;do{var b=++a===s.length,w=b&&0!==f.length;if(b){if(p=0===m.length?void 0:g[g.length-1],d=v,v=m.pop(),w){if(i)d=d.slice();else{for(var x={},_=0,T=Object.keys(d);_<T.length;_++){var E=T[_];x[E]=d[E]}d=x}for(var S=0,k=0;k<f.length;k++){var A=f[k][0],O=f[k][1];i&&(A-=S),i&&null===O?(d.splice(A,1),S++):d[A]=O}}a=r.index,s=r.keys,f=r.edits,i=r.inArray,r=r.prev}else{if(p=v?i?a:s[a]:void 0,null===(d=v?v[p]:y)||void 0===d)continue;v&&g.push(p)}var C,P=void 0;if(!Array.isArray(d)){if(!u(d))throw new Error("Invalid AST Node: ".concat(o(d),"."));var I=l(e,d.kind,b);if(I){if((P=I.call(e,d,p,v,g,m))===h)break;if(!1===P){if(!b){g.pop();continue}}else if(void 0!==P&&(f.push([p,P]),!b)){if(!u(P)){g.pop();continue}d=P}}}void 0===P&&w&&f.push([p,d]),b?g.pop():(r={inArray:i,index:a,keys:s,edits:f,prev:r},s=(i=Array.isArray(d))?d:null!==(C=n[d.kind])&&void 0!==C?C:[],a=-1,f=[],v&&m.push(v),v=d)}while(void 0!==r);return 0!==f.length&&(y=f[f.length-1][1]),y}(t,{leave:d})}var d={Name:function(t){return t.value},Variable:function(t){return"$"+t.name},Document:function(t){return v(t.definitions,"\n\n")+"\n"},OperationDefinition:function(t){var e=t.operation,n=t.name,r=m("(",v(t.variableDefinitions,", "),")"),i=v(t.directives," "),o=t.selectionSet;return n||i||r||"query"!==e?v([e,v([n,r]),i,o]," "):o},VariableDefinition:function(t){var e=t.variable,n=t.type,r=t.defaultValue,i=t.directives;return e+": "+n+m(" = ",r)+m(" ",v(i," "))},SelectionSet:function(t){return g(t.selections)},Field:function(t){var e=t.alias,n=t.name,r=t.arguments,i=t.directives,o=t.selectionSet,s=m("",e,": ")+n,a=s+m("(",v(r,", "),")");return a.length>80&&(a=s+m("(\n",y(v(r,"\n")),"\n)")),v([a,v(i," "),o]," ")},Argument:function(t){return t.name+": "+t.value},FragmentSpread:function(t){return"..."+t.name+m(" ",v(t.directives," "))},InlineFragment:function(t){var e=t.typeCondition,n=t.directives,r=t.selectionSet;return v(["...",m("on ",e),v(n," "),r]," ")},FragmentDefinition:function(t){var e=t.name,n=t.typeCondition,r=t.variableDefinitions,i=t.directives,o=t.selectionSet;return"fragment ".concat(e).concat(m("(",v(r,", "),")")," ")+"on ".concat(n," ").concat(m("",v(i," ")," "))+o},IntValue:function(t){return t.value},FloatValue:function(t){return t.value},StringValue:function(t,e){var n=t.value;return t.block?function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=-1===t.indexOf("\n"),i=" "===t[0]||"\t"===t[0],o='"'===t[t.length-1],s="\\"===t[t.length-1],a=!r||o||s||n,u="";return!a||r&&i||(u+="\n"+e),u+=e?t.replace(/\n/g,"\n"+e):t,a&&(u+="\n"),'"""'+u.replace(/"""/g,'\\"""')+'"""'}(n,"description"===e?"":"  "):JSON.stringify(n)},BooleanValue:function(t){return t.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(t){return t.value},ListValue:function(t){return"["+v(t.values,", ")+"]"},ObjectValue:function(t){return"{"+v(t.fields,", ")+"}"},ObjectField:function(t){return t.name+": "+t.value},Directive:function(t){return"@"+t.name+m("(",v(t.arguments,", "),")")},NamedType:function(t){return t.name},ListType:function(t){return"["+t.type+"]"},NonNullType:function(t){return t.type+"!"},SchemaDefinition:p((function(t){var e=t.directives,n=t.operationTypes;return v(["schema",v(e," "),g(n)]," ")})),OperationTypeDefinition:function(t){return t.operation+": "+t.type},ScalarTypeDefinition:p((function(t){return v(["scalar",t.name,v(t.directives," ")]," ")})),ObjectTypeDefinition:p((function(t){var e=t.name,n=t.interfaces,r=t.directives,i=t.fields;return v(["type",e,m("implements ",v(n," & ")),v(r," "),g(i)]," ")})),FieldDefinition:p((function(t){var e=t.name,n=t.arguments,r=t.type,i=t.directives;return e+(w(n)?m("(\n",y(v(n,"\n")),"\n)"):m("(",v(n,", "),")"))+": "+r+m(" ",v(i," "))})),InputValueDefinition:p((function(t){var e=t.name,n=t.type,r=t.defaultValue,i=t.directives;return v([e+": "+n,m("= ",r),v(i," ")]," ")})),InterfaceTypeDefinition:p((function(t){var e=t.name,n=t.interfaces,r=t.directives,i=t.fields;return v(["interface",e,m("implements ",v(n," & ")),v(r," "),g(i)]," ")})),UnionTypeDefinition:p((function(t){var e=t.name,n=t.directives,r=t.types;return v(["union",e,v(n," "),r&&0!==r.length?"= "+v(r," | "):""]," ")})),EnumTypeDefinition:p((function(t){var e=t.name,n=t.directives,r=t.values;return v(["enum",e,v(n," "),g(r)]," ")})),EnumValueDefinition:p((function(t){return v([t.name,v(t.directives," ")]," ")})),InputObjectTypeDefinition:p((function(t){var e=t.name,n=t.directives,r=t.fields;return v(["input",e,v(n," "),g(r)]," ")})),DirectiveDefinition:p((function(t){var e=t.name,n=t.arguments,r=t.repeatable,i=t.locations;return"directive @"+e+(w(n)?m("(\n",y(v(n,"\n")),"\n)"):m("(",v(n,", "),")"))+(r?" repeatable":"")+" on "+v(i," | ")})),SchemaExtension:function(t){var e=t.directives,n=t.operationTypes;return v(["extend schema",v(e," "),g(n)]," ")},ScalarTypeExtension:function(t){return v(["extend scalar",t.name,v(t.directives," ")]," ")},ObjectTypeExtension:function(t){var e=t.name,n=t.interfaces,r=t.directives,i=t.fields;return v(["extend type",e,m("implements ",v(n," & ")),v(r," "),g(i)]," ")},InterfaceTypeExtension:function(t){var e=t.name,n=t.interfaces,r=t.directives,i=t.fields;return v(["extend interface",e,m("implements ",v(n," & ")),v(r," "),g(i)]," ")},UnionTypeExtension:function(t){var e=t.name,n=t.directives,r=t.types;return v(["extend union",e,v(n," "),r&&0!==r.length?"= "+v(r," | "):""]," ")},EnumTypeExtension:function(t){var e=t.name,n=t.directives,r=t.values;return v(["extend enum",e,v(n," "),g(r)]," ")},InputObjectTypeExtension:function(t){var e=t.name,n=t.directives,r=t.fields;return v(["extend input",e,v(n," "),g(r)]," ")}};function p(t){return function(e){return v([e.description,t(e)],"\n")}}function v(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!==(e=null===t||void 0===t?void 0:t.filter((function(t){return t})).join(n))&&void 0!==e?e:""}function g(t){return m("{\n",y(v(t,"\n")),"\n}")}function m(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return null!=e&&""!==e?t+e+n:""}function y(t){return m("  ",t.replace(/\n/g,"\n  "))}function b(t){return-1!==t.indexOf("\n")}function w(t){return null!=t&&t.some(b)}},,function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return c}));var r=n(1),i=n(5),o=n(105),s=new i.b(o.a),a=null;try{if(null==(a=window))throw new Error("try next")}catch(h){try{if(null==(a=t))throw new Error("try next")}catch(h){a={}}}var u=a.crypto||a.msCrypto;function c(t){(t<=0||t>1024||t%1||t!=t)&&s.throwArgumentError("invalid length","length",t);var e=new Uint8Array(t);return u.getRandomValues(e),Object(r.a)(e)}u&&u.getRandomValues||(s.warn("WARNING: Missing strong random number source"),u={getRandomValues:function(t){return s.throwError("no secure random source avaialble",i.b.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}})}).call(this,n(45))}]]);
//# sourceMappingURL=3.1035164a.chunk.js.map