{"version":3,"sources":["components/Layout/styles.module.css","../node_modules/@ion-phaser/core/dist/esm lazy /^/.*/.entry/.js$/ include: /.entry/.js$/ exclude: /.system/.entry/.js$/ groupOptions: {} namespace object","helpers/vars.ts","web3/context/reducer.tsx","web3/context/initialState.ts","assets/icons/chevron_up.svg","web3/actions/index.tsx","web3/actions/queries/index.tsx","web3/context/index.tsx","server-store/index.tsx","components/Modal/index.tsx","components/ErrorModal/index.tsx","assets/icons/chevron_down.svg","assets/icons/search.svg","assets/icons/sort.svg","assets/icons/dropdown.svg","assets/icons/rotating-circular-arrow.svg","assets/sounds/boop.mp3","assets/sounds/click.mp3","assets/sounds/oops.mp3","assets/sounds/portalOpen.mp3","assets/sounds/portalOpened.mp3","assets/sounds/send.mp3","assets/sounds/sending.mp3","assets/sounds/success.mp3","helpers/hooks/useSound.ts","assets/gifs/loading.gif","helpers/hooks/windowSize.ts","helpers/aavegotchi/svg.ts","helpers/aavegotchi/index.ts","components/GotchiSVG/index.tsx","components/SearchToggle/index.tsx","components/SortToggle/index.tsx","components/GotchiSelector/index.tsx","components/Hamburger/index.tsx","helpers/functions.ts","components/Header/index.tsx","components/Layout/index.tsx","components/Leaderboard/index.tsx","components/Portal/index.tsx","components/Sidetray/index.tsx","game/helpers/index.ts","game/assets/index.tsx","game/helpers/spritesheet.ts","game/helpers/collisionCategories.ts","game/helpers/utils.ts","components/StatsBar/index.tsx","components/TiltButton/tilt-button.tsx","game/main.tsx","game/unOrganized/statsBar.ts","game/unOrganized/stats.ts","game/unOrganized/multipliers.ts","game/scenes/pinball/arrows.ts","game/scenes/pinball/aavegotchiHandWave.ts","game/scenes/pinball/leftBlackHole.ts","game/scenes/pinball/passThroughLights.ts","game/scenes/pinball/wallBumper.ts","game/scenes/pinball/rofls.ts","game/scenes/pinball/fire.ts","game/scenes/pinball/ethCoin.ts","game/scenes/pinball/purpleBumper.ts","game/scenes/pinball/holdSpaceBallLaunch.ts","game/scenes/pinball/tiltBehavior.ts","game/scenes/pinball/pinball-scene.ts","game/scenes/plinko/scene_plinko.ts","game/scenes/index.ts","components/PaddlesInput/index.tsx","game/scenes/boot-scene.ts","game/scenes/plinko/ballFollowingRedRing.ts","game/scenes/plinko/ballGoingInTube.ts","game/scenes/bgMusic/scene_bgMusic.ts","game/scenes/gameScene/game-scene.ts","pages/Home/index.tsx","pages/Leaderboard/index.tsx","pages/Settings/index.tsx","pages/Play/index.tsx","App.tsx","reportWebVitals.ts","index.tsx","components/Header/styles.module.css","components/Leaderboard/styles.module.css","theme/globalStyles.module.css","components/GotchiSelector/styles.module.css","components/DetailsPanel/styles.module.css","pages/Home/styles.module.css","components/PaddlesInput/styles.module.css","components/SortToggle/styles.module.css","components/GameOver/style.module.css","components/Hamburger/styles.module.css","components/TiltButton/style.module.css","components/Modal/styles.module.css","components/SearchToggle/styles.module.css","components/Debug/styles.module.css","components/StatsBar/styles.module.css","pages/Settings/styles.module.css","components/Sidetray/styles.module.css"],"names":["module","exports","map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","WearableSlots","reducer","state","action","type","usersAavegotchis","selectedAavegotchiId","loading","error","networkId","copyGotchiState","updatedGotchi","find","gotchi","tokenId","svg","provider","address","initialState","addresses","networkIdToName","collateralToAddress","aAAVE","aWETH","aLINK","aDAI","aUSDT","aUSDC","aTUSD","aUNI","aYFI","amDAI","amWETH","amAAVE","amUSDT","amUSDC","amWBTC","amWMATIC","version","_g","slingshotBumperForce","scores","topLeftHole","useSubgraph","query","uri","a","request","data","status","name","message","ClientError","response","errors","useDiamondCall","method","contract","ethers","Contract","diamondAbi","parameters","res","stack","getAllAavegotchisOfOwner","owner","toLowerCase","Web3Context","createContext","dispatch","updateAavegotchis","aavegotchis","setProvider","eth","process","REACT_APP_OFFCHAIN","providers","Web3Provider","setNetworkDetails","getNetwork","chainId","getSigner","getAddress","useWeb3","useContext","Web3ContextProvider","children","useReducer","value","Provider","firebaseConfig","apiKey","authDomain","databaseURL","REACT_APP_FIREBASE_DATABASEURL","projectId","storageBucket","messagingSenderId","appId","measurementId","REACT_APP_FIREBASE_MEASUREMENTID","ServerContext","ServerProvider","useState","highscores","setHighscores","firebase","setFirebase","initiated","setInitiated","sortByScore","b","score","myHighscoresRef","useRef","setMyHighscores","current","converter","toFirestore","fromFirestore","snap","useEffect","length","db","firestore","gotchiSetArray","i","push","slice","listenerArray","gotchiArray","database","gotchis","console","log","collection","withConverter","where","onSnapshot","snapshot","docChanges","forEach","change","changedItem","doc","newHighscores","itemIndex","findIndex","item","sort","listener","getHighscores","_firebase","highscoreRef","get","highscoreResults","firebaseInit","fb","initializeApp","useServer","Modal","onHandleClose","className","styles","background","shadow","panel","onClick","globalStyles","circleButton","secondaryButton","closeButton","ErrorModal","err","_excluded","_extends","assign","target","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgChevronUp","_ref","svgRef","title","titleId","props","xmlns","width","height","viewBox","ref","transform","fill","_rect","_rect2","_rect3","_rect4","_rect5","_rect6","_rect7","_rect8","_rect9","_rect10","_rect11","_rect12","_rect13","_rect14","ForwardRef","SvgChevronDown","_path","_path2","SvgSearch","d","SvgSort","SvgDropdown","SvgRotatingCircularArrow","playSound","sound","s","Audio","audio","volume","window","localStorage","getItem","Number","play","useWindowWidth","isBrowser","innerWidth","setWidth","handleResize","addEventListener","removeEventListener","eyes","happy","sleeping","mad","mouths","neutral","defaultGotchi","getPreviewGotchi","options","withSetsNumericTraits","numericTraits","equippedWearables","wearables","haunt","collateral","withSetsRarityScore","convertInlineSVGToBlobURL","blob","Blob","URL","createObjectURL","replaceParts","element","document","createDocumentFragment","wrapper","createElement","setAttribute","innerHTML","appendChild","targetClass","querySelectorAll","txt","replaceSvg","div","customiseSvg","equipped","styledSvg","option","replace","removeBG","bounceAnimation","addIdleUp","arms","leftArm","left","includes","rightArm","right","style","raiseHands","undefined","removeShadow","GotchiSVG","lazyloadIn","side","setSvg","fetchGotchiSvg","isOwner","selectedGotchi","src","gotchiLoading","SearchToggle","onChange","placeholder","onToggle","activeOverride","open","setOpen","setValue","inputRef","inputContainer","toggle","focus","prevState","input","SortToggle","onSelect","selected","sortOptions","active","val","direction","dir","inactive","GotchiSelector","selectGotchi","initialGotchiId","maxVisible","setSelected","currentIteration","setCurrentIteration","initGotchis","setInitGotchis","displayedGotchis","setDisplayedGotchis","maxIterations","setMaxIterations","searchInput","setSearchInput","setSort","activeToggle","setActiveToggle","isMobile","handleSelect","useCallback","handleScroll","nextIteration","click","searchMatches","filter","sortedMatches","compareFunction","newGotchis","prevGotchis","gotchiSelector","filterOptions","selectorContainer","chevron","up","disabled","enabled","selectorWrapper","selector","Array","_","loadingContainer","alt","isSelected","loadIn","gotchiContainer","glow","down","Hamburger","hamburgerWrapper","stroke","smartTrim","string","maxLength","substring","midpoint","Math","ceil","toremove","lstrip","rstrip","WalletButton","handleWalletClick","w3Provider","ethereum","walletContainer","walletAddress","diameter","seed","jsNumberForAddress","connectedDetails","Header","menuOpen","setMenuOpen","header","container","desktopHeaderContent","navContainer","to","navLink","activeClassName","activeNavLink","isActive","location","pathname","mobileHeaderContent","Layout","isMetaMaskConnected","listAccounts","accounts","handleConnection","on","Leaderboard","ownedGotchis","competition","currentPage","setCurrentPage","onlyMine","setOnlyMine","sortedScores","setSortedScores","displayedScores","setDisplayedScores","timer","setTimer","hs","position","reward","rewards","countdown","setInterval","now","Date","getTime","timeUntil","endDate","days","floor","hours","minutes","seconds","clearInterval","leaderboard","leaderboardOptions","row","headerRow","gridTemplateColumns","cell","owned","pageSelector","Portal","el","portalRoot","querySelector","removeChild","createPortal","SideTray","getGameWidth","scene","game","scale","getGameHeight","getRelative","size","LEFT_CHEVRON","CLICK","BG_SCRUBBED","AAVEGOTCHIHAND","ARROW_RED","ARROW_PURPLE","SHAPES","PORTAL","SPIN_COIN","PINBALL","LBH_BLOCKER","PADDLE","TIMER","PASS_THROUGH_LIGHTS","MULTIPLIER_ACTIVATED","TUBE_BG_COLOR","TUBE_OUTLINE","RED_RING","PLINKO_BORDER","PLINKO_UNIVERSE_BG","PLINKO_TUBES","PLINKO_TUBES_AND_GRID_BG","GHST","SPIN_COIN_2","FIRE","BG_MUSIC","K_POINTS_RED_PLINKO","MARIO_PIPE_SOUND","SLINGSHOT_SOUND","BALL_CURVING_AROUND_AFTER_RELEASE","BALL_HITTING_PLAIN_WALL","DOUBLE_POINTS_SOUND","ETH_COIN","GHST_COIN","PLINKO_OST","TRIPLE_MULTIPLIER","WALL_BUMPERS","PORTAL_SOUND","LOOP_RE_ENTRY_BLOCKER","DIAMOND","PLINKO_LOSE_BALL_SOUND","GAME_END_SOUND","TILT_SOUND","assets","atlasJson","frameWidth","frameHeight","convertBase64toBlobURL","b64","byteString","atob","split","mimeString","ab","ArrayBuffer","ia","Uint8Array","charCodeAt","constructSpritesheet","spriteMatrix","gotchiWidth","maxColumns","max","canvasWidth","canvasHeight","canvas","baseUrl","toDataURL","spriteImagesArray","rowArray","colItem","j","x","y","mergeImages","dimensions","COLLISION_CATEGORIES","getNormalizedDirectionAndAngle","x1","y1","x2","y2","dirX","dirY","sqrt","ndx","ndy","angle","atan2","isCompareEitherOrBodies","nameA","nameB","nameAMustBe","nameBMustBe","bodyA","bodyB","isSuccess","firstBody","secondBody","isAngleBetweenAngles","facingAngle_deg","angleOfTarget_deg","angleWithin_deg","anglediff","pushBodyAwayFrom","force","posA","posB","normDir","gameObject","setVelocity","StatsBar","statsBar_container","statsBar_multiplier","statsBar_score","TiltButton","postMessage","msgType","tiltButtonContainer","tiltButtonImg","handleTiltButtonPress","tiltButtonTextImg","TILT_underLine","backButtonText","React","Component","ballsUnlockedForPlinko","increase_ballsUnlockedForPlinko","Main","ref_statsBar","ref_statsBar_multiplier","ref_scoreEl","initialised","setInitialised","config","setConfig","startGame","socket","innerHeight","Phaser","WEBGL","Scenes","physics","default","matter","gravity","debug","positionIterations","velocityIterations","mode","Scale","FIT","parent","fps","callbacks","preBoot","setGameRef","registry","merge","urlConnectingTo","io","attempt","emit","backgroundColor","top","zIndex","backgroundSize","backgroundImage","initialize","setNewStatsBarContainerSize","game_ref","canvasRect","getBoundingClientRect","set_scoreText","text","statsBar_start","current_multiplier","finalMultiplier","isLeftBlackHoleOpen","currentScore","updateFinalMultiplier","increaseScore","points","modifyMultiplier","amount","multiplierBEFORE","multipliers","middle","toggleMultiplier","isVisible","visible","tripleArrows_left","tripleArrows_right","AavegotchiHandWave","handImage","handImage_scaleY","handImage_lessYPositionWhenHandIsDown","handImage_startPos","aavegotchiHandWave_createSprite","aavegotchiHandWave_createHandFlipTween","aavegotchiHandWave_moveToMouse","pinballScene","add","image","tweens","targets","ease","duration","yoyo","repeat","onYoyo","scaleY","cam","cameras","main","activePointer","zoom","aavegotchiHandWave_start","current_singleArrowIndex","singleArrows","TripleArrows","arrowsContainer","arrowSprites","arrowSpritesTaken","angleOfArrows","angleWithinNeeded","xPos","yPos","tripleArrows_create","setDepth","setScale","setAngle","arrow","texture","setFilter","Textures","FilterMode","NEAREST","ball","tripleArrows_isBallWithinAngles","asti","tripleArrows_getArrowSpriteTakenIndex","setTexture","tripleArrows_addTimerSpriteToArrow","normDirAndAngle","body","velocity","RadToDeg","timerSprite","SingleArrow","arrowSprite","isTaken","angleOfArrow","timerExtraPos","singleArrowName","singleArrow_create","sprite","MACHINEMAN1357_singleArrowName","object_body","circle","isStatic","label","isSensor","singleArrow_isBallWithinAngles","singleArrow_addTimerSpriteToArrow","arrows_start","blocker_go","blocker_spirte","timer_closeLBH","blocker_position","isHoleOpen","canEnterHole","isMultiplierActive","reset","closeHole","setPosition","on_sideBumperHit","time","addEvent","delay","callback","args","ballExitHole","setStatic","alpha","paused","on_ballEnteredHole","elapsed","leftBlackHole_start","verts","poly","polygon","shape","flagInternal","create_blocker_collider","PTLs","colors","PassThroughLight","border","bgColor","bg_sprite","border_sprite","isOn","create","create_collider","setTint","setLight","visual","setAlpha","MACHINEMAN1357_passThroughLight_class","extraX","extraY","passThroughLight_start","roflsManager_ref","ERofl_Saver_Side","WallBumper","isRight","tube","isPushedIn","onHitCallback","createCollider","scaleX","edge","collider","rectangle","MACHINEMAN1357_wallBumper","MACHINEMAN1357_wallBumper_isRight","resetPushedIn","fireImage_ref","currentRoflLives","rofl_isLeftActive_inSaveArea","rofl_isRightActive_inSaveArea","Rofl_Saver","rofl_scale_inSaveArea","rofls_leftPos_inSaveArea","rofls_rightPos_inSaveArea","collider_radius","rofl_collider","createRoflCollider","LEFT","RIGHT","sidePos","getPos","spritesheetKey","RoflsManager","rofl_scale_inUI","rofls_spaceFromLeft_inUI","rofls_spaceFromBottom_inUI","rofls_spacing_inUI","rofls_images_inUI","rofl_saver_left","rofl_saver_right","createRofls_inUI","currentSpacing","rofl","placeRoflInSaveArea","removeOneRoflFromPool","positionInSaveArea","destroy","splice","loseGame","getHitByBall","Fire","fireImage","timedEvent","createFire","createTimer","setOrigin","deActivateFire","EthCoin","soundCountTween","soundCountTween_props","soundCount","getSoundCount","remove","ethCoin_sound","dummyProp","onRepeat","speed","round","min","PurpleBumper","rect","MACHINEMAN1357_purpleBumper","HoldSpaceBallLaunchManager","spaceKeyObj","wasSpacePressed","timeSpaceWasHeldDown","maxTimeForMaxVelocity_ms","keyboard","addKey","delta","isDown","handleSpaceRelease","isBallOnShootForceSensorBody","_isBallOnShootForceSensorBody","forceRatio","ballResetForce","ballShootForceSensor_body","failResetSensor_body","ballGraphics","EStates","TiltBehavior","canTilt","centerPos","start","tilt","shake","normalizedDirectionAndAngle","newPos","tilt_sound","sceneConfig","PADDLE_PULL","ballShootPosition","bg_scrubbed_collisionShape","plinkoScene","redRing_go","ballKiller_body","ballsNeededToFinishLevel","ESinkButtonSide","PinballScene","back","slingshot_sound","ballCurvingAround_sound","ballHittingPlainWall_sound","doublePoints_sound","ghst_sound","tripleMultiplier_sound","wallBumpers_sound","enterPortal_sound","gameEnd_sound","lose_ball_sound","ghstBumpers","is_ballWallHitSoundOnHold","ballLoopEntryBlocker","ballLoopEntryBlockerService","ethCoin","TEMP_purpleBumper","purpleBumper_left","purpleBumper_right","is_ballLeftStart","pinball_isGameOver","holdSpaceBallLaunchManager","ballIsInShootForceArea_sensor_body","tiltBehavior","init","createBackButton","setInteractive","useHandCursor","setDisplaySize","history","launch","loop","createMapObjects","createBall","createPaddles","createPaddleStoppers","create_ballExitReEntryBlocker_collider","setUpEvents","adjustCamera","create_portalAnimation","setVisible","createSpinCoinAnimation","create_ballLoopEntryBlockerService","createSlingshotPurpleBumpers","graphics","createBallShootForceSensor","MACHINEMAN1357_paddlesInput_container","enable_paddlesInput","getElementById","display","update","len","rotation","BallLoopEntryBlockerService","firstShot","createImage","atTop","outOfLoop","enable","disable","BallLoopEntryBlocker","object","frames","anims","generateFrameNumbers","end","first","frameRate","mousePos_x","mousePos_y","angle_deg","isWithin","lineStyle","beginPath","moveTo","lineTo","closePath","strokePath","setScroll","shapes","cache","json","shapes_gameObject","bg_scrubbed","parts","doStuffWithGHSTBodies","part","ballOptions","radius","mass","setFriction","setBounce","setCollisionCategory","setCollidesWith","pointer","world","event","collisionFiltering","compareData_PB_GHSTB","compareData_PB_TASL","compareData_PB_TASR","compareData_PB_PS","compareData_PB_SAS","compareData_PB_MSL","compareData_PB_MSM","compareData_PB_MSR","compareData_PB_PTLS","compareData_PB_WB","compareData_PB_TLHS","compareData_PB_CS","compareData_PB_RS","compareData_PB_PW","compareData_PB_SSSL","compareData_PB_SSSR","doBehaviour_checkIfAnyBallsAreIn_failResetSensor","random","tripleArrows_onBallHit","ballEnteredPortal","singleArrow_onBallHit","toggleLight","on_hitByBall","saveBallByRofl","onBallHitRofl","MACHINEMAN1357_rofl_saver_side","callbackScope","pauseMusic","stop","addGameOverUI","resetLeftBlackHole","gameScene","resetGameOver","gameOverContainer","gameOverBorderContainer","gameOverBorder_red","gameOverBorder_orange","gameOverBorder_yellow","gameOverBackground","gameOverRetryContainer","onSpaceDownFn","resetGame","retryEl","keyInputStle","keyboardKeys_container","keyboardKey_container","classList","gameOverStyle","gameOver_container","gameOver_borderContainer","gameOver_border_red","gameOver_border_orange","gameOver_border_yellow","gameOver_background","gameOver_retryContainer","bodies","intersectBody","placeRoflInSaveAreas","activateFire","on_ballEnteredFailResetSensor","createPaddleStopper","attracteeLabel","paddleStopper","plugin","attractors","isPaddleUp","isInputDown_leftPaddle","isInputDown_rightPaddle","collisionFilter","category","mask","createPaddle","hingeX","hingeY","pointA","pointB","paddle_visual","abs","paddle_body","trapezoid","chamfer","render","xOffset","paddle","hinge","group","constraint","Scene","BootScene","connected","assetsLoaded","loadIndex","progressBarContainer","progressBar","loadingText","preload","createProgressBar","values","load","setText","loadInGotchiSpritesheet","loadNextFile","setFontSize","index","file","spritesheet","tilemapTiledJSON","atlas","gotchiObject","removeBg","armsUp","float","onmessage","BallFollowingRedRing","ball_body","newY","startY","finishTubing","BallGoingInTube","tube_body","redRingData","posX","ballsFollowingRedRing","ballsGoingInTubes","ghstAndCoins","isChangingScene","ballsCompleted","PlinkoScene","kPointsRedPlinko_sound","marioPipe_sound","bgMusicScene","plinkoOST","isPaused","resume_plinkoOST","play_plinkoOST","resetStuff","setUp_ghstAnimation","setBackgroundColor","create_sceneObjects","create_balls","setBounds","setUp_events","create_tubeColliders","disable_paddlesInput","create_bottomBallKillerCollider","setUpSounds","compareData_PB_C","compareData_PB_RR","compareData_PB_T","doBehaviour_forAllBodiesWithLabelIntersectingBody","killBall","moveBallDownRedRing","createScoreText","moveBallDownTube","tubeName","MACHINEMAN1357_tubeName","scoreAmount","MACHINEMAN1357_isKilled","completeBall","ballsLeft","resumeMusic","pause_plinkoOST","leftBlackHoleReset","func","sensor_body","fontSize","text_go","fontFamily","setStroke","gradient","context","createLinearGradient","addColorStop","setFill","from","bfrr","bgit","spacing","extraWidth","create_ghsts","create_redRing","ballConfig","object_visual_forBody","ghstOrCoin_go","isSix","ghstBumperIndices","created","r","columns","c","create_ghstOrCoin","color","img","tubeDatas","tubeData","BGMusicScene","bgMusic","addMarker","playMusic","resume","pause","scenes","isGameOver","paddleKeyCodeInputs_left","paddleKeyCodeInputs_right","KeyboardKeyVisual","keyText","KeyboardKeyVisualsContainer","keyboardKeyVisuals","keyTexts","SinkButton","sunkClass","isSunk","paddlesInput_button_active","paddlesInput_button_container","paddlesInput_button","onPointerDown","toggleSink","onPointerUp","PaddlesInput_Container","paddlesInput_container_ref","interval_setNewPaddlesInputContainerSize","isLeftSunk","isRightSunk","paddlesInput_container_width","hidden","createRef","setEvents","setNewPaddlesInputContainerSize","setState","ev","setSinkButtonState","onresize","newStyleWidth","sinkButtonSide","paddlesInput_container_style","paddlesInput_container","Home","defaultAavegotchiStuff","showRulesModal","setShowRulesModal","gotchiSide","setGotchiSide","usePreviewGotchis","gotchi1","gotchi2","gotchi3","gotchiId","primaryButton","errorContainer","secondaryErrorMessage","href","modalContent","homeContainer","rotateButton","animate","highscore","buttonContainer","disabledLink","Settings","seVolume","setSEVolume","musicVolume","setMusicVolume","htmlFor","step","setItem","Play","nav","path","component","exact","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode"],"mappings":"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","file":"static/js/main.0fcbf813.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__1_P2w\"};","var map = {\n\t\"./ion-phaser.entry.js\": [\n\t\t174,\n\t\t4\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 170;\nmodule.exports = webpackAsyncContext;","export const addresses = {\n  diamond: \"0x86935F11C86623deC8a25696E1C19a8659CbF95d\"\n}\n\ntype IdToName = {\n  [key: number]: string;\n}\n\nexport const networkIdToName: IdToName = {\n  1: \"Ethereum\",\n  137: \"Polygon\"\n}\n\nexport type Collaterals = \"aAAVE\" | \"aWETH\" | \"aLINK\" | \"aDAI\" | \"aUSDT\" | \"aUSDC\" | \"aTUSD\" | \"aUNI\" | \"aYFI\" | \"amDAI\" | \"amWETH\" | \"amAAVE\" | \"amUSDT\" | \"amUSDC\" | \"amWBTC\" | \"amWMATIC\";\ntype CollateralToAddress = {\n  [key in Collaterals]: string;\n}\nexport const collateralToAddress: CollateralToAddress = {\n  aAAVE: \"0x823cd4264c1b951c9209ad0deaea9988fe8429bf\",\n  aWETH: \"0x20d3922b4a1a8560e1ac99fba4fade0c849e2142\",\n  aLINK: \"0x98ea609569bd25119707451ef982b90e3eb719cd\",\n  aDAI: \"0xE0b22E0037B130A9F56bBb537684E6fA18192341\",\n  aUSDT: \"0xDAE5F1590db13E3B40423B5b5c5fbf175515910b\",\n  aUSDC: \"0x9719d867A500Ef117cC201206B8ab51e794d3F82\",\n  aTUSD: \"0xF4b8888427b00d7caf21654408B7CBA2eCf4EbD9\",\n  aUNI: \"0x8c8bdBe9CeE455732525086264a4Bf9Cf821C498\",\n  aYFI: \"0xe20f7d1f0eC39C4d5DB01f53554F2EF54c71f613\",\n  amDAI: \"0x27F8D03b3a2196956ED754baDc28D73be8830A6e\",\n  amWETH: \"0x28424507fefb6f7f8E9D3860F56504E4e5f5f390\",\n  amAAVE: \"0x1d2a0E5EC8E5bBDCA5CB219e649B565d8e5c3360\",\n  amUSDT: \"0x60D55F02A771d515e077c9C2403a1ef324885CeC\",\n  amUSDC: \"0x1a13F4Ca1d028320A707D99520AbFefca3998b7F\",\n  amWBTC: \"0x5c2ed810328349100A66B82b78a1791B101C9D61\",\n  amWMATIC: \"0x8dF3aad3a84da6b69A4DA8aeC3eA40d9091B2Ac4\"\n}\n\nexport enum WearableSlots {\n  Body = 0,\n  Face = 1,\n  Eyes = 2,\n  Head = 3,\n  HandLeft = 4,\n  HandRight = 5,\n  Pet = 6,\n  BG = 7,\n}\n\nexport const is_debug = false;\nexport const version = `25:\n- fixed left black hole multiplier bug\n`;\nexport const isLog_loadFiles = false;\nexport const is_musicEnabled = true;\nif(!is_musicEnabled) console.warn(\"Music is disabled\");\n\nexport const ballSpeedForWallHitSound = 1;\nexport const ballSpeedForWallHitSound_max = 10;\nexport const ballWallHitSoundOnHoldFor_ms = 400;\n\nexport const timeBeforeStartPlinkoSceneAfterBallEnteredPortal_ms = 1000;\n\nexport const ball_mass = 0.1;\n\nexport const ballMoveDownRedRingSpeed = 0.3;\n\nexport const ethCoinPlinko_pointsReward = 10;\n\nexport const gravityY = 0.45;\n\nexport const slingShotSensorLeft_position = { x: 154, y: 756 };\nexport const slingShotSensorRight_position = { x: 400, y: 750 };\nexport const slingshotBumperForce = 10;\n\nexport const wallBumperSensorLeft_position = { x: 90, y: 630 };\nexport const wallBumperSensorRight_position = { x: 470, y: 630 };\n\nexport const ethCoin_plinko_audioVolume = 0.5;\n\nexport const gameUI_retryFontSize = 29;\n\nexport const is_logMousePos = false;\n\nexport const pinballScene_ethCoinMaxSoundCount = 5;\nexport const pinballScene_maxBallSpeedForEthCoinMaxSoundCount = 14;\nexport const pinballScene_timeBetweenEthCoinSounds_ms = 150;\n\nexport const ghstBumper_soundVolume = 0.36;\nexport const plinko_lose_ball_soundVolume = 1;\n\nexport const timeBefore_endOfSceneToPinballSwitch_ms = 1000;\n\nexport const scores = {\n\tpointsReceive_spinningCoin: 500,\n\tghstBumper: 100,\n\twallBumperSensor: 100,\n\tredRing: 1000,\n\tpurpleTube: 10,\n\tblueTube: 50,\n\tyellowTube: 100,\n\tgreenTube: 5,\n\tballReturnsToStart: 500\n};\n\nexport const topLeftHole = {\n\tstaysOpenFor_ms: 30000, // default = 30000\n\tdoublePointsLastFor_ms: 30000, // default = 30000\n\ttimeInHole_ms: 1000,\n\ttimeBeforeBallCanEnterHoleAgain_ms: 1000,\n\texitHoleVelocityY: 10\n};\n\nexport const is_allowDefaultAavegotchi = true;\nexport const tiltBehaviorButtonKey = \"T\";\nexport const tiltBehaviour_delay_ms = 4000;","import { State } from \"./initialState\";\nimport { Tuple } from \"types\";\n\nexport type Action =\n\t| {\n\t\ttype: \"SET_USERS_AAVEGOTCHIS\";\n\t\tusersAavegotchis: State[\"usersAavegotchis\"];\n\t}\n\t| {\n\t\ttype: \"SET_SELECTED_AAVEGOTCHI\";\n\t\tselectedAavegotchiId: State[\"selectedAavegotchiId\"];\n\t}\n\t| {\n\t\ttype: \"START_ASYNC\";\n\t}\n\t| {\n\t\ttype: \"SET_ERROR\";\n\t\terror: State[\"error\"];\n\t}\n\t| {\n\t\ttype: \"SET_NETWORK_ID\";\n\t\tnetworkId: State[\"networkId\"];\n\t}\n\t| {\n\t\ttype: \"END_ASYNC\";\n\t}\n\t| {\n\t\ttype: \"UPDATE_AAVEGOTCHI_SVG\";\n\t\ttokenId: string;\n\t\tsvg: Tuple<string, 4>;\n\t}\n\t| {\n\t\ttype: \"SET_PROVIDER\";\n\t\tprovider: State[\"provider\"];\n\t}\n\t| {\n\t\ttype: \"SET_ADDRESS\";\n\t\taddress: State[\"address\"];\n\t}\n\nexport const reducer = (state: State, action: Action): State => {\n\tswitch (action.type) {\n\t\tcase \"SET_USERS_AAVEGOTCHIS\": {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tusersAavegotchis: action.usersAavegotchis,\n\t\t\t};\n\t\t}\n\t\tcase \"SET_SELECTED_AAVEGOTCHI\": {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tselectedAavegotchiId: action.selectedAavegotchiId,\n\t\t\t};\n\t\t}\n\t\tcase \"START_ASYNC\": {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tloading: true,\n\t\t\t};\n\t\t}\n\t\tcase \"END_ASYNC\": {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tloading: false,\n\t\t\t};\n\t\t}\n\t\tcase \"SET_ERROR\": {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tloading: false,\n\t\t\t\terror: action.error,\n\t\t\t};\n\t\t}\n\t\tcase \"SET_NETWORK_ID\": {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tnetworkId: action.networkId,\n\t\t\t};\n\t\t}\n\t\tcase \"UPDATE_AAVEGOTCHI_SVG\": {\n\t\t\tif (!state.usersAavegotchis) throw \"No Aavegotchis to update.\"\n\t\t\tconst copyGotchiState = [...state.usersAavegotchis];\n\t\t\tconst updatedGotchi = copyGotchiState.find(gotchi => gotchi.id === action.tokenId);\n\n\t\t\tif (updatedGotchi) {\n\t\t\t\tupdatedGotchi.svg = action.svg;\n\t\t\t\treturn {\n\t\t\t\t\t...state,\n\t\t\t\t\tusersAavegotchis: copyGotchiState\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow \"Selected gotchi doesn't exist in state.\"\n\t\t\t}\n\t\t}\n\t\tcase \"SET_PROVIDER\": {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tprovider: action.provider\n\t\t\t}\n\t\t}\n\t\tcase \"SET_ADDRESS\": {\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\taddress: action.address\n\t\t\t}\n\t\t}\n\t\tdefault:\n\t\t\tthrow \"Bad action type\";\n\t}\n};\n","import { AavegotchiObject } from \"types\";\nimport { Web3Provider } from \"@ethersproject/providers\";\n\nexport interface State {\n  address?: string;\n  provider?: Web3Provider;\n  usersAavegotchis?: Array<AavegotchiObject>;\n  selectedAavegotchiId?: string;\n  loading: boolean;\n  error?: Error | unknown;\n  networkId?: number;\n}\n\nexport const initialState: State = {\n  loading: false,\n}","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgChevronUp(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 35,\n    height: 40,\n    viewBox: \"0 0 35 40\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Group_54\",\n    \"data-name\": \"Group 54\",\n    transform: \"translate(632 -3348)\"\n  }, /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_40\",\n    \"data-name\": \"Rectangle 40\",\n    width: 5,\n    height: 5,\n    transform: \"translate(-632 3363)\",\n    fill: \"#fff\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_43\",\n    \"data-name\": \"Rectangle 43\",\n    width: 5,\n    height: 5,\n    transform: \"translate(-627 3358)\",\n    fill: \"#fff\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_44\",\n    \"data-name\": \"Rectangle 44\",\n    width: 5,\n    height: 5,\n    transform: \"translate(-622 3353)\",\n    fill: \"#fff\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_45\",\n    \"data-name\": \"Rectangle 45\",\n    width: 5,\n    height: 5,\n    transform: \"translate(-617 3348)\",\n    fill: \"#fff\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_46\",\n    \"data-name\": \"Rectangle 46\",\n    width: 5,\n    height: 5,\n    transform: \"translate(-612 3353)\",\n    fill: \"#fff\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_47\",\n    \"data-name\": \"Rectangle 47\",\n    width: 5,\n    height: 5,\n    transform: \"translate(-607 3358)\",\n    fill: \"#fff\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_48\",\n    \"data-name\": \"Rectangle 48\",\n    width: 5,\n    height: 5,\n    transform: \"translate(-602 3363)\",\n    fill: \"#fff\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_41\",\n    \"data-name\": \"Rectangle 41\",\n    width: 5,\n    height: 5,\n    transform: \"translate(-617 3368)\",\n    fill: \"#fff\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_42\",\n    \"data-name\": \"Rectangle 42\",\n    width: 5,\n    height: 5,\n    transform: \"translate(-622 3373)\",\n    fill: \"#fff\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_49\",\n    \"data-name\": \"Rectangle 49\",\n    width: 5,\n    height: 5,\n    transform: \"translate(-627 3378)\",\n    fill: \"#fff\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_50\",\n    \"data-name\": \"Rectangle 50\",\n    width: 5,\n    height: 5,\n    transform: \"translate(-632 3383)\",\n    fill: \"#fff\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_51\",\n    \"data-name\": \"Rectangle 51\",\n    width: 5,\n    height: 5,\n    transform: \"translate(-612 3373)\",\n    fill: \"#fff\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_52\",\n    \"data-name\": \"Rectangle 52\",\n    width: 5,\n    height: 5,\n    transform: \"translate(-607 3378)\",\n    fill: \"#fff\"\n  }), /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_53\",\n    \"data-name\": \"Rectangle 53\",\n    width: 5,\n    height: 5,\n    transform: \"translate(-602 3383)\",\n    fill: \"#fff\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgChevronUp);\nexport default __webpack_public_path__ + \"static/media/chevron_up.2fd32423.svg\";\nexport { ForwardRef as ReactComponent };","import { request, ClientError } from \"graphql-request\";\nimport { addresses } from \"helpers/vars\";\nimport diamondAbi from \"../abi/diamond.json\";\nimport { ethers } from \"ethers\";\nimport { Tuple } from \"types\";\n\nconst coreURI =\n  \"https://api.thegraph.com/subgraphs/name/aavegotchi/aavegotchi-core-matic\";\n\nexport const useSubgraph = async <T extends unknown>(\n  query: string,\n  uri?: string\n): Promise<T> => {\n  try {\n    const data = await request<T>(uri || coreURI, query);\n    return data;\n  } catch (err: unknown) {\n    throw {\n      status: 400,\n      name: \"Subgraph error\",\n      message:\n        err instanceof ClientError\n          ? err.response.errors\n            ? err.response.errors[0].message\n            : \"Unknown error\"\n          : \"Unknown error\",\n    };\n  }\n};\n\ntype DiamondCallMethods =\n  | { name: \"currentHaunt\"; parameters?: undefined }\n  | { name: \"getAavegotchiSvg\"; parameters: [string] }\n  | {\n      name: \"previewAavegotchi\";\n      parameters: [string, string, Tuple<number, 6>, Tuple<number, 16>];\n    }\n  | {\n      name: \"getAavegotchiSideSvgs\";\n      parameters: [string]\n    }\n  | {\n      name: \"previewSideAavegotchi\";\n      parameters: [string, string, Tuple<number, 6>, Tuple<number, 16>];\n    }\n\nexport const useDiamondCall = async <R extends unknown>(\n  provider: ethers.Signer | ethers.providers.Provider,\n  method: DiamondCallMethods\n): Promise<R> => {\n  const contract = new ethers.Contract(addresses.diamond, diamondAbi, provider);\n  try {\n    const { name, parameters } = method;\n    const res = await (parameters\n      ? contract[name](...parameters)\n      : contract[name]());\n    return res;\n  } catch (err: any) {\n    throw {\n      status: 400,\n      name: \"Diamond contract error\",\n      message: err.message,\n      stack: err.stack,\n    };\n  }\n};\n","import { AavegotchiContractObject } from \"types\";\n\nexport interface AavegotchisOfOwner {\n  aavegotchis: Array<AavegotchiContractObject>\n}\n\nexport const getAllAavegotchisOfOwner = (owner: string) => {\n  const query = `\n    {\n      aavegotchis(first: 1000, orderBy: withSetsRarityScore, orderDirection: desc,  where: { owner:\"${owner.toLowerCase()}\", status: 3 }) {\n        id\n        name\n        withSetsNumericTraits\n        equippedWearables\n        withSetsRarityScore\n        owner {\n          id\n        }\n      }\n    }\n  `\n  return query;\n}","import React, {\n  createContext, useContext, useReducer\n} from 'react';\nimport { ethers } from 'ethers';\nimport { Action, reducer } from \"./reducer\";\nimport { initialState, State } from './initialState';\nimport { useSubgraph } from 'web3/actions';\nimport { AavegotchisOfOwner, getAllAavegotchisOfOwner } from 'web3/actions/queries';\n\nexport const Web3Context = createContext<{\n  state: State;\n  dispatch: React.Dispatch<Action>;\n}>({state: initialState, dispatch: () => null});\n\ndeclare global {\n  interface Window {\n    ethereum: any;\n  }\n}\n\ninterface Props {\n  children: React.ReactNode;\n}\n\nconst updateAavegotchis = async (dispatch: React.Dispatch<Action>, owner: string) => {\n  try {\n    const res = await useSubgraph<AavegotchisOfOwner>(getAllAavegotchisOfOwner(owner));\n    dispatch({ type: \"SET_USERS_AAVEGOTCHIS\", usersAavegotchis: res.aavegotchis });\n  } catch (err) {\n    dispatch({\n      type: \"SET_ERROR\",\n      error: err,\n    })\n  }\n}\n\nconst setProvider = async (dispatch: React.Dispatch<Action>, eth: any) => {\n  if (process.env.REACT_APP_OFFCHAIN) return;\n\n  dispatch({ type: \"START_ASYNC\" });\n  try {\n    const provider = new ethers.providers.Web3Provider(eth);\n\n    dispatch({ type: \"SET_PROVIDER\", provider });\n    dispatch({ type: \"END_ASYNC\" });\n    return provider;\n  } catch (error) {\n    dispatch({ type: \"SET_ERROR\", error });\n  }\n}\n\nconst setNetworkDetails = async (dispatch: React.Dispatch<Action>, provider: ethers.providers.Web3Provider) => {\n  dispatch({ type: \"START_ASYNC\" });\n  try {\n    const { chainId } = await provider.getNetwork();\n    \n    dispatch({ type: \"SET_NETWORK_ID\", networkId: chainId });\n    const address = await provider.getSigner().getAddress();\n    dispatch({ type: \"SET_ADDRESS\", address });\n    dispatch({ type: \"END_ASYNC\" });\n  } catch (error) {\n    dispatch({ type: \"SET_ERROR\", error });\n  }\n}\n\nconst connectToNetwork = async (dispatch: React.Dispatch<Action>, eth: any) => {\n  if (process.env.REACT_APP_OFFCHAIN) return;\n\n  dispatch({ type: \"START_ASYNC\" });\n  try {\n    await eth.enable();\n    const provider = new ethers.providers.Web3Provider(eth);\n\n    dispatch({ type: \"SET_PROVIDER\", provider });\n    const { chainId } = await provider.getNetwork();\n    \n    dispatch({ type: \"SET_NETWORK_ID\", networkId: chainId });\n\n    const address = await provider.getSigner().getAddress();\n    dispatch({ type: \"SET_ADDRESS\", address });\n    dispatch({ type: \"END_ASYNC\" });\n  } catch (error) {\n    dispatch({ type: \"SET_ERROR\", error });\n  }\n};\n\nconst Web3ContextProvider = ({ children }: Props) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const value = { state, dispatch };\n\n  return (\n    <Web3Context.Provider value={value}>\n      {children}\n    </Web3Context.Provider>\n  );\n};\n\nconst useWeb3 = () => useContext(Web3Context);\n\nexport default Web3ContextProvider;\nexport { useWeb3, setNetworkDetails, setProvider, updateAavegotchis };\n","import React, {\n\tcreateContext,\n\tuseContext,\n\tuseEffect,\n\tuseState,\n\tuseRef,\n} from \"react\";\nimport { HighScore, AavegotchiObject } from \"types\";\nimport { useWeb3 } from \"web3/context\";\nimport fb from \"firebase\";\n\nconst firebaseConfig = {\n\tapiKey: process.env.REACT_APP_FIREBASE_APIKEY,\n\tauthDomain: process.env.REACT_APP_FIREBASE_AUTHDOMAIN,\n\tdatabaseURL: process.env.REACT_APP_FIREBASE_DATABASEURL,\n\tprojectId: process.env.REACT_APP_FIREBASE_PROJECTID,\n\tstorageBucket: process.env.REACT_APP_FIREBASE_STORAGEBUCKET,\n\tmessagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGINGSENDERID,\n\tappId: process.env.REACT_APP_FIREBASE_APPID,\n\tmeasurementId: process.env.REACT_APP_FIREBASE_MEASUREMENTID,\n};\n\ninterface IServerContext {\n\thighscores?: Array<HighScore>;\n}\n\nexport const ServerContext = createContext<IServerContext>({});\n\nexport const ServerProvider = ({\n\t\tchildren,\n\t}: {\n\t\tchildren: React.ReactNode;\n\t}) => {\n\tconst {\n\t\tstate: { usersAavegotchis },\n\t} = useWeb3();\n\tconst [highscores, setHighscores] = useState<Array<HighScore>>();\n\tconst [firebase, setFirebase] = useState<fb.app.App>();\n\tconst [initiated, setInitiated] = useState(false);\n\n\tconst sortByScore = (a: HighScore, b: HighScore) => b.score - a.score;\n\n\tconst myHighscoresRef = useRef(highscores);\n\n\tconst setMyHighscores = (data: Array<HighScore>) => {\n\t\tmyHighscoresRef.current = data;\n\t\tsetHighscores(data);\n\t};\n\n\tconst converter = {\n\t\ttoFirestore: (data: HighScore) => data,\n\t\tfromFirestore: (snap: fb.firestore.QueryDocumentSnapshot) =>\n\t\t\tsnap.data() as HighScore,\n\t};\n\n\tconst snapshotListener = (\n\t\tdatabase: fb.firestore.Firestore,\n\t\tgotchis: Array<AavegotchiObject>\n\t) => {\n    console.log(\"process.env.REACT_APP_COLLECTION_NAME:\", process.env.REACT_APP_COLLECTION_NAME);\n\t\treturn database\n\t\t\t.collection(process.env.REACT_APP_COLLECTION_NAME || \"test\")\n\t\t\t.withConverter(converter)\n\t\t\t.where(\n\t\t\t\t\"tokenId\",\n\t\t\t\t\"in\",\n\t\t\t\tgotchis.map((gotchi) => gotchi.id)\n\t\t\t)\n\t\t\t.onSnapshot((snapshot) => {\n\t\t\t\tsnapshot.docChanges().forEach((change) => {\n\t\t\t\t\tconst changedItem = change.doc.data();\n\t\t\t\t\tconst newHighscores = myHighscoresRef.current\n\t\t\t\t\t\t? [...myHighscoresRef.current]\n\t\t\t\t\t\t: [];\n\t\t\t\t\tconst itemIndex = newHighscores.findIndex(\n\t\t\t\t\t\t(item) => item.tokenId === changedItem.tokenId\n\t\t\t\t\t);\n\t\t\t\t\tif (itemIndex >= 0) {\n\t\t\t\t\t\tnewHighscores[itemIndex] = changedItem;\n\t\t\t\t\t\tsetMyHighscores(newHighscores.sort(sortByScore));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tsetMyHighscores([...newHighscores, changedItem].sort(sortByScore));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t};\n\n\tuseEffect(() => {\n\t\tif (usersAavegotchis && usersAavegotchis.length > 0 && firebase && initiated) {\n\t\t\tconst db = firebase.firestore();\n\t\t\tconst gotchiSetArray = [];\n\t\t\tfor (let i = 0; i < usersAavegotchis.length; i += 10) {\n\t\t\t\tgotchiSetArray.push(usersAavegotchis.slice(i, i + 10));\n\t\t\t}\n\t\t\tconst listenerArray = gotchiSetArray.map((gotchiArray) =>\n\t\t\t\tsnapshotListener(db, gotchiArray)\n\t\t\t);\n\n\t\t\treturn () => {\n\t\t\t\tlistenerArray.forEach((listener) => listener());\n\t\t\t};\n\t\t}\n\t}, [usersAavegotchis, firebase]);\n\n\tuseEffect(() => {\n\t\tconst getHighscores = async (_firebase: fb.app.App) => {\n\t\t\tconst db = _firebase.firestore();\n\t\t\tconst highscoreRef = db\n\t\t\t\t.collection(process.env.REACT_APP_COLLECTION_NAME || \"test\")\n\t\t\t\t.withConverter(converter);\n\t\t\tconst snapshot = await highscoreRef.get();\n\n\t\t\tconst highscoreResults: Array<HighScore> = [];\n\t\t\tsnapshot.forEach((doc: any) => highscoreResults.push(doc.data()));\n\n\t\t\tsetMyHighscores(highscoreResults.sort(sortByScore));\n\t\t\tsetInitiated(true);\n\t\t};\n\n\t\tif (!firebase) {\n\t\t\tconst firebaseInit = fb.initializeApp(firebaseConfig);\n\t\t\tsetFirebase(firebaseInit);\n\t\t\tgetHighscores(firebaseInit);\n\t\t}\n\t}, [firebase]);\n\n\treturn (\n\t\t<ServerContext.Provider\n\t\t\tvalue={{\n\t\t\t\thighscores,\n\t\t\t}}\n\t\t>\n\t\t\t{children}\n\t\t</ServerContext.Provider>\n\t);\n};\n\nexport const useServer = () => useContext(ServerContext);","import globalStyles from 'theme/globalStyles.module.css';\nimport { Portal } from 'components';\nimport styles from './styles.module.css';\n\ninterface Props {\n  children: React.ReactNode;\n  onHandleClose: () => void;\n}\n\n/**\n * Reusable Modal component.\n */\nexport const Modal = ({ children, onHandleClose }: Props) => {\n  return (\n    <Portal>\n      <div className={styles.background}>\n        <div className={styles.shadow} />\n        <div className={styles.panel}>\n          <button\n            onClick={() => onHandleClose()}\n            className={`${globalStyles.circleButton} ${globalStyles.secondaryButton} ${styles.closeButton}`}\n          >\n            X\n          </button>\n          {children}\n        </div>\n      </div>\n    </Portal>\n  )\n};\n\n","import { Modal } from '../Modal';\nimport { CustomError } from 'types';\n\ninterface Props {\n  error: CustomError | unknown;\n  onHandleClose?: () => void;\n}\n\nexport const ErrorModal = ({ error, onHandleClose }: Props) => {\n\n  const handleClose = () => {\n    if (onHandleClose) onHandleClose();\n  }\n\n  const err = error as CustomError;\n\n  return (\n    <Modal onHandleClose={handleClose}>\n      <h3>Status Code: {err.status || 400}</h3>\n      <h2>{err.name}</h2>\n      <p>{err.message}</p>\n      {err.stack && (\n        <pre>\n          <code>\n            {err.stack}\n          </code>\n        </pre>\n      )}\n    </Modal>\n  )\n}","var _rect, _rect2, _rect3, _rect4, _rect5, _rect6, _rect7, _rect8, _rect9, _rect10, _rect11, _rect12, _rect13, _rect14;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgChevronDown(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    id: \"Group_55\",\n    \"data-name\": \"Group 55\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 35,\n    height: 40,\n    viewBox: \"0 0 35 40\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_40\",\n    \"data-name\": \"Rectangle 40\",\n    width: 5,\n    height: 5,\n    transform: \"translate(0 20)\",\n    fill: \"#fff\"\n  })), _rect2 || (_rect2 = /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_43\",\n    \"data-name\": \"Rectangle 43\",\n    width: 5,\n    height: 5,\n    transform: \"translate(5 25)\",\n    fill: \"#fff\"\n  })), _rect3 || (_rect3 = /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_44\",\n    \"data-name\": \"Rectangle 44\",\n    width: 5,\n    height: 5,\n    transform: \"translate(10 30)\",\n    fill: \"#fff\"\n  })), _rect4 || (_rect4 = /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_45\",\n    \"data-name\": \"Rectangle 45\",\n    width: 5,\n    height: 5,\n    transform: \"translate(15 35)\",\n    fill: \"#fff\"\n  })), _rect5 || (_rect5 = /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_46\",\n    \"data-name\": \"Rectangle 46\",\n    width: 5,\n    height: 5,\n    transform: \"translate(20 30)\",\n    fill: \"#fff\"\n  })), _rect6 || (_rect6 = /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_47\",\n    \"data-name\": \"Rectangle 47\",\n    width: 5,\n    height: 5,\n    transform: \"translate(25 25)\",\n    fill: \"#fff\"\n  })), _rect7 || (_rect7 = /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_48\",\n    \"data-name\": \"Rectangle 48\",\n    width: 5,\n    height: 5,\n    transform: \"translate(30 20)\",\n    fill: \"#fff\"\n  })), _rect8 || (_rect8 = /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_41\",\n    \"data-name\": \"Rectangle 41\",\n    width: 5,\n    height: 5,\n    transform: \"translate(15 15)\",\n    fill: \"#fff\"\n  })), _rect9 || (_rect9 = /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_42\",\n    \"data-name\": \"Rectangle 42\",\n    width: 5,\n    height: 5,\n    transform: \"translate(10 10)\",\n    fill: \"#fff\"\n  })), _rect10 || (_rect10 = /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_49\",\n    \"data-name\": \"Rectangle 49\",\n    width: 5,\n    height: 5,\n    transform: \"translate(5 5)\",\n    fill: \"#fff\"\n  })), _rect11 || (_rect11 = /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_50\",\n    \"data-name\": \"Rectangle 50\",\n    width: 5,\n    height: 5,\n    fill: \"#fff\"\n  })), _rect12 || (_rect12 = /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_51\",\n    \"data-name\": \"Rectangle 51\",\n    width: 5,\n    height: 5,\n    transform: \"translate(20 10)\",\n    fill: \"#fff\"\n  })), _rect13 || (_rect13 = /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_52\",\n    \"data-name\": \"Rectangle 52\",\n    width: 5,\n    height: 5,\n    transform: \"translate(25 5)\",\n    fill: \"#fff\"\n  })), _rect14 || (_rect14 = /*#__PURE__*/React.createElement(\"rect\", {\n    id: \"Rectangle_53\",\n    \"data-name\": \"Rectangle 53\",\n    width: 5,\n    height: 5,\n    transform: \"translate(30)\",\n    fill: \"#fff\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgChevronDown);\nexport default __webpack_public_path__ + \"static/media/chevron_down.98b1c3ea.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSearch(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    width: \"24px\",\n    fill: \"#FFFFFF\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0h24v24H0V0z\",\n    fill: \"none\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSearch);\nexport default __webpack_public_path__ + \"static/media/search.66ea5ec3.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSort(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    width: \"24px\",\n    fill: \"#000000\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0h24v24H0V0z\",\n    fill: \"none\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3 18h6v-2H3v2zM3 6v2h18V6H3zm0 7h12v-2H3v2z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSort);\nexport default __webpack_public_path__ + \"static/media/sort.b9b517f5.svg\";\nexport { ForwardRef as ReactComponent };","var _path, _path2;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgDropdown(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    height: \"24px\",\n    viewBox: \"0 0 24 24\",\n    width: \"24px\",\n    fill: \"#000000\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 0h24v24H0V0z\",\n    fill: \"none\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7 10l5 5 5-5H7z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDropdown);\nexport default __webpack_public_path__ + \"static/media/dropdown.83dc06d8.svg\";\nexport { ForwardRef as ReactComponent };","var _g;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgRotatingCircularArrow(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: 64.252,\n    height: 34.544,\n    viewBox: \"0 0 64.252 34.544\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"rotating-circular-arrow\",\n    transform: \"translate(0 -42.726)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    id: \"Path_3379\",\n    \"data-name\": \"Path 3379\",\n    d: \"M64.252,57.278c0-8.162-14.113-14.552-32.126-14.552S0,49.118,0,57.278c0,.572,4.558.572,4.558,0,0-6.765,11.642-12.8,27.931-12.8s27.078,6.041,27.078,12.8c0,6.711-9.872,12.3-26,12.384l2.614-3.6A1.036,1.036,0,1,0,34.715,64.6s-7.5,5.418-7.528,5.983,7.528,6.413,7.528,6.413c.2.205,1.06.5,1.467,0a1.037,1.037,0,0,0,0-1.465l-2.616-3.8C51.41,71.642,64.252,65.384,64.252,57.278Z\",\n    fill: \"#fff\"\n  }))));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgRotatingCircularArrow);\nexport default __webpack_public_path__ + \"static/media/rotating-circular-arrow.2e18e767.svg\";\nexport { ForwardRef as ReactComponent };","export default __webpack_public_path__ + \"static/media/boop.f1dae70c.mp3\";","export default __webpack_public_path__ + \"static/media/click.82acbfef.mp3\";","export default __webpack_public_path__ + \"static/media/oops.6ac2b252.mp3\";","export default __webpack_public_path__ + \"static/media/portalOpen.cb47728e.mp3\";","export default __webpack_public_path__ + \"static/media/portalOpened.07b8c720.mp3\";","export default __webpack_public_path__ + \"static/media/send.8d2bf045.mp3\";","export default __webpack_public_path__ + \"static/media/sending.f0d7af49.mp3\";","export default __webpack_public_path__ + \"static/media/success.21397840.mp3\";","import * as audio from 'assets/sounds';\n\nexport const playSound = async (sound: keyof typeof audio) => {\n  const s = new Audio(audio[sound]);\n  const volume = window.localStorage.getItem('seVolume') ?? '5';\n  s.volume = Number(volume) / 10;\n\n  try {\n    await s.play();\n  } catch (err) {\n    console.error(err);\n  }\n};\n","export default __webpack_public_path__ + \"static/media/loading.c50dcb3d.gif\";","import { useState, useEffect } from 'react';\n\nconst useWindowWidth = () => {\n  const isBrowser = typeof window !== 'undefined';\n  const [width, setWidth] = useState(isBrowser ? window.innerWidth : 0);\n\n  useEffect(() => {\n    if (!isBrowser) return;\n\n    const handleResize = () => setWidth(window.innerWidth);\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  });\n\n  return width;\n};\n\nexport default useWindowWidth;\n","import { Tuple } from \"types\";\n\nexport const eyes = {\n  happy: `\n    <path d=\"M23 26V25V24H22H21V25V26H22H23Z\"></path>\n    <path d=\"M25 24H26H27V23V22H26H25H24H23V23V24H24H25Z\"></path>\n    <path d=\"M27 26H28H29V25V24H28H27V25V26Z\"></path>\n    <path d=\"M41 26H42H43V25V24H42H41V25V26Z\"></path>\n    <path d=\"M39 24H40H41V23V22H40H39H38H37V23V24H38H39Z\"></path>\n    <path d=\"M35 24V25V26H36H37V25V24H36H35Z\"></path>\n  `,\n  sleeping: `\n    <path d=\"M23 26H22H21V27V28H22H23V27V26Z\"></path>\n    <path d=\"M29 27V26H28H27V27V28H28H29V27Z\"></path>\n    <path d=\"M25 28H24H23V29V30H24H25H26H27V29V28H26H25Z\"></path>\n    <path d=\"M43 28V27V26H42H41V27V28H42H43Z\"></path>\n    <path d=\"M37 27V26H36H35V27V28H36H37V27Z\"></path>\n    <path d=\"M37 30H38H39H40H41V29V28H40H39H38H37V29V30Z\"></path>\n  `,\n\n  mad: `\n    <path d=\"M29 27V26H28H27V27V28H28H29V27Z\"></path>\n    <path d=\"M27 24H26H25V25V26H26H27V25V24Z\"></path>\n    <path d=\"M25 22H24H23V23V24H24H25V23V22Z\"></path>\n    <path d=\"M37 27V26H36H35V27V28H36H37V27Z\"></path>\n    <path d=\"M39 26V25V24H38H37V25V26H38H39Z\"></path>\n    <path d=\"M41 24V23V22H40H39V23V24H40H41Z\"></path>\n  `,\n};\n\nexport const mouths = {\n  neutral: `\n    <path d=\"M33 34h-4v2h6v-2h-1z\" />\n  `,\n};\n\nexport const defaultGotchi: Tuple<string, 4> = [\n  `<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 64 64\">\n    <style>.gotchi-primary{fill:#64438E;}.gotchi-secondary{fill:#EDD3FD;}.gotchi-cheek{fill:#F696C6;}.gotchi-eyeColor{fill:#64438E;}.gotchi-primary-mouth{fill:#64438E;}.gotchi-sleeves-up{display:none;}.gotchi-handsUp{display:none;}.gotchi-handsDownOpen{display:none;}.gotchi-handsDownClosed{display:block}\n  svg {\n    animation-name:down;\n    animation-duration:0.5s;\n    animation-iteration-count: infinite;\n    animation-timing-function: linear;\n    animation-timing-function: steps(1);\n  }\n\n  .gotchi-shadow {\n    animation: up 0.5s infinite linear steps(2);\n    animation-name:up;\n    animation-duration:0.5s;\n    animation-iteration-count: infinite;\n    animation-timing-function: linear;\n    animation-timing-function: steps(2);\n  }\n\n  .gotchi-wearable {\n    animation-name:down;\n    animation-duration:0.5s;\n    animation-iteration-count: infinite;\n    animation-timing-function: linear;\n    animation-timing-function: steps(1);\n  }\n  .gotchi-handsDownClosed, .gotchi-handsUp, .gotchi-handsDownOpen, .gotchi-handsDownClosed, .gotchi-body, .gotchi-eyeColor, .gotchi-collateral, .gotchi-cheek, .gotchi-primary-mouth, .gotchi-wearable, .gotchi-sleeves   {\n    animation-name:down;\n    animation-duration:0.5s;\n    animation-iteration-count: infinite;\n    animation-timing-function: linear;\n    animation-timing-function: steps(2);\n  }\n  .wearable-hand {\n    animation-name:down !important;\n    animation-duration:0.5s;\n    animation-iteration-count: infinite;\n    animation-timing-function: linear;\n    animation-timing-function: steps(2);\n  }\n  @keyframes downHands {\n    from {\n      transform: translate(0px, -4px);\n    }\n  to {\n      transform: translate(0px, -3px);\n    }\n  }\n  @keyframes up {\n    from {\n      transform: translate(0px, 0);\n    }\n  to {\n      transform: translate(0px, -1px);\n    }\n  }\n  @keyframes down {\n  from {\n    transform: translate(0px, 0);\n      }\n  to {\n        transform: translate(0px, 1px);\n      }\n      }</style>\n    <g class=\"gotchi-bg\">\n      <defs fill=\"#fff\">\n        <pattern id=\"a\" patternUnits=\"userSpaceOnUse\" width=\"4\" height=\"4\">\n          <path d=\"M0 0h1v1H0zm2 2h1v1H2z\" />\n        </pattern>\n        <pattern id=\"b\" patternUnits=\"userSpaceOnUse\" x=\"0\" y=\"0\" width=\"2\" height=\"2\">\n          <path d=\"M0 0h1v1H0z\" />\n        </pattern>\n        <pattern id=\"c\" patternUnits=\"userSpaceOnUse\" x=\"-2\" y=\"0\" width=\"8\" height=\"1\">\n          <path d=\"M0 0h1v1H0zm2 0h1v1H2zm2 0h1v1H4z\" />\n        </pattern>\n        <pattern id=\"d\" patternUnits=\"userSpaceOnUse\" x=\"0\" y=\"0\" width=\"4\" height=\"4\">\n          <path d=\"M0 0h1v1H0zm0 2h1v1H0zm1 0V1h1v1zm1 0h1v1H2zm0-1h1V0H2zm1 2h1v1H3z\" />\n        </pattern>\n        <pattern id=\"e\" patternUnits=\"userSpaceOnUse\" width=\"64\" height=\"32\">\n          <path d=\"M4 4h1v1H4zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1z\" />\n          <path fill=\"url(#a)\" d=\"M0 8h64v7H0z\" />\n          <path fill=\"url(#b)\" d=\"M0 16h64v1H0z\" />\n          <path fill=\"url(#c)\" d=\"M0 18h64v1H0z\" />\n          <path fill=\"url(#b)\" d=\"M22 18h15v1H22zM0 20h64v3H0z\" />\n          <path fill=\"url(#d)\" d=\"M0 24h64v8H0z\" />\n        </pattern>\n        <mask id=\"f\">\n          <path fill=\"url(#e)\" d=\"M0 0h64v32H0z\" />\n        </mask>\n      </defs>\n      <path fill=\"#fff\" d=\"M0 0h64v32H0z\" />\n      <path fill=\"#dea8ff\" class=\"gotchi-secondary\" mask=\"url(#f)\" d=\"M0 0h64v32H0z\" />\n      <path fill=\"#dea8ff\" class=\"gotchi-secondary\" d=\"M0 32h64v32H0z\" />\n      <path mask=\"url(#f)\" fill=\"#fff\" transform=\"matrix(1 0 0 -1 0 64)\" d=\"M0 0h64v32H0z\" />\n    </g>\n    <g class=\"gotchi-body\">\n      <g class=\"gotchi-primary\">\n        <path d=\"M21 12h2v-2h-4v2h1z\" />\n        <path d=\"M19 14v-2h-2v2h1zm6-4h2V8h-4v2h1z\" />\n        <path d=\"M29 8h8V6H27v2h1zm16 6h2v-2h-2v1z\" />\n        <path d=\"M48 14h-1v39h-2v2h4V14zm-11-4h4V8h-4v1z\" />\n        <path d=\"M41 12h4v-2h-4v1zM17 53V14h-2v41h4v-2h-1z\" />\n        <path d=\"M24 51h-5v2h5v-1z\" />\n        <path d=\"M27 53h-3v2h5v-2h-1zm18-2h-5v2h5v-1z\" />\n        <path d=\"M35 51h-6v2h6v-1z\" />\n        <path d=\"M38 53h-3v2h5v-2h-1z\" />\n      </g>\n      <g class=\"gotchi-secondary\">\n        <path d=\"M18 43v6h2v-1h2v1h2v2h-5v2h-2V14h2v1h-1v26z\" />\n        <path d=\"M27 51h-3v2h5v-2h-1zm11 0h-3v2h5v-2h-1z\" />\n        <path d=\"M35 49h-2v-1h-2v1h-2v2h6v-1zM25 11h2v-1h-4v1h1zm-4 2h2v-1h-4v1h1zm24 31v5h-1v-1h-2v1h-2v2h5v2h2V14h-2v29z\" />\n        <path d=\"M37 8H27v1h5v1h5V9zm8 4h-4v2h4v-1z\" />\n        <path d=\"M41 10h-4v2h4v-1z\" />\n      </g>\n      <path d=\"M44 14h-3v-2h-4v-2h-5V9h-5v2h-4v2h-4v2h-1v34h2v-1h2v1h2v2h5v-2h2v-1h2v1h2v2h5v-2h2v-1h2v1h1V14z\" fill=\"#fff\" />\n    </g>\n    <path class=\"gotchi-cheek\" d=\"M21 32v2h2v-2h-1zm21 0h-1v2h2v-2z\" />\n    <g class=\"gotchi-primary-mouth\">\n      <path d=\"M29 32h-2v2h2v-1z\" />\n      <path d=\"M33 34h-4v2h6v-2h-1z\" />\n      <path d=\"M36 32h-1v2h2v-2z\" />\n    </g>\n    <g class=\"gotchi-shadow\">\n      <path opacity=\".25\" d=\"M25 58H19v1h1v1h24V59h1V58h-1z\" fill=\"#000\" />\n    </g>\n    <g class=\"gotchi-eyeColor\">\n      <path d=\"M23 28V29V30H24H25H26H27V29V28H28H29V27V26V25V24H28H27V23V22H26H25H24H23V23V24H22H21V25V26V27V28H22H23Z\" />\n      <path d=\"M35 24V25V26V27V28H36H37V29V30H38H39H40H41V29V28H42H43V27V26V25V24H42H41V23V22H40H39H38H37V23V24H36H35Z\" />\n    </g>\n    <g class=\"gotchi-collateral\">\n      <g fill=\"#64438e\">\n        <path d=\"M29 17v-2h-1v4h1v-1z\" />\n        <path d=\"M29 14h1v1h-1zm0 5h1v1h-1z\" />\n        <path d=\"M30 20h1v1h-1z\" />\n        <path d=\"M31 21v1h2v-1h-1zm-1-8h1v1h-1zm4 6h1v1h-1zm0-5h1v1h-1z\" />\n        <path d=\"M33 13v-1h-2v1h1zm0 7h1v1h-1z\" />\n        <path d=\"M33 13h1v1h-1zm2 2v4h1v-4z\" />\n      </g>\n      <path d=\"M34 17h-2v4h1v-1h1v-1h1v-2z\" fill=\"#c260ff\" />\n      <g fill=\"#dea8ff\">\n        <path d=\"M30 17h-1v2h1v1h1v1h1v-4h-1z\" />\n        <path d=\"M34 15v-1h-1v-1h-1v4h3v-2z\" />\n      </g>\n      <path d=\"M31 17h1v-4h-1v1h-1v1h-1v2h1z\" fill=\"#edd3fd\" />\n    </g>\n    <g class=\"gotchi-handsDownClosed\">\n      <g class=\"gotchi-primary\">\n        <path d=\"M19 42h1v1h-1zm1-6h1v1h-1z\" />\n        <path d=\"M21 37h1v1h-1zm5 3v4h1v-4zm-5 3h-1v1h2v-1z\" />\n        <path d=\"M24 44h-2v1h4v-1h-1zm1-5h-1v1h2v-1z\" />\n        <path d=\"M23 38h-1v1h2v-1z\" />\n      </g>\n      <g class=\"gotchi-secondary\">\n        <path d=\"M19 43h1v1h-1zm5 2h-2v1h4v-1h-1z\" />\n        <path d=\"M27 41v3h1v-3zm-6 3h-1v1h2v-1z\" />\n        <path d=\"M26 44h1v1h-1zm-7-3h-1v2h1v-1z\" />\n      </g>\n      <g class=\"gotchi-primary\">\n        <path d=\"M44 42h1v1h-1zm-1-6h1v1h-1z\" />\n        <path d=\"M42 37h1v1h-1z\" />\n        <path d=\"M42 39v-1h-2v1h1zm0 4v1h2v-1h-1z\" />\n        <path d=\"M40 44h-2v1h4v-1h-1z\" />\n        <path d=\"M38 42v-2h-1v4h1v-1z\" />\n        <path d=\"M40 40v-1h-2v1h1z\" />\n      </g>\n      <g class=\"gotchi-secondary\">\n        <path d=\"M42 44v1h2v-1h-1zm-5-2v-1h-1v3h1v-1z\" />\n        <path d=\"M40 45h-2v1h4v-1h-1z\" />\n        <path d=\"M37 44h1v1h-1zm7-1h1v1h-1z\" />\n      </g>\n    </g>\n    <g class=\"gotchi-handsDownOpen\">\n      <g class=\"gotchi-primary\">\n        <path d=\"M14 40h1v1h-1v-1zm-1-6h1v1h-1v-1z\" />\n        <path d=\"M14 33h1v1h-1v-1zm-2 2h1v1h-1v-1zm-5 3h1v4H7v-4zm5 3h2v1h-2v-1z\" />\n        <path d=\"M8 42h4v1H8v-1zm0-5h2v1H8v-1z\" />\n        <path d=\"M10,36h2v1h-2V36z\" />\n      </g>\n      <g class=\"gotchi-secondary\">\n        <path d=\"M14,39h1v1h-1V39z\" />\n        <path d=\"M12,40h2v1h-2V40z\" />\n        <path d=\"M8,41h4v1H8V41z\" />\n      </g>\n      <path d=\"M8,38v3h4v-1h2v-1h1v-5h-1v1h-1v1h-1v1h-2v1H8z\" fill=\"#fff\" />\n      <g class=\"gotchi-primary\">\n        <path d=\"M49 40h1v1h-1v-1zm1-6h1v1h-1v-1z\" />\n        <path d=\"M49 33h1v1h-1v-1zm2 2h1v1h-1v-1zm5 3h1v4h-1v-4zm-6 3h2v1h-2v-1z\" />\n        <path d=\"M52 42h4v1h-4v-1zm2-5h2v1h-2v-1z\" />\n        <path d=\"M52,36h2v1h-2V36z\" />\n      </g>\n      <g class=\"gotchi-secondary\">\n        <path d=\"M49,39h1v1h-1V39z\" />\n        <path d=\"M50,40h2v1h-2V40z\" />\n        <path d=\"M52,41h4v1h-4V41z\" />\n      </g>\n      <path d=\"M54,38v-1h-2v-1h-1v-1h-1v-1h-1v5h1v1h2v1h4v-3H54z\" fill=\"#fff\" />\n    </g>\n    <g class=\"gotchi-handsUp\">\n      <g class=\"gotchi-secondary\">\n        <path d=\"M50,38h1v1h-1V38z\" />\n        <path d=\"M49 39h1v1h-1v-1zm2-2h1v1h-1v-1z\" />\n        <path d=\"M52,36h2v1h-2V36z\" />\n        <path d=\"M54,35h2v1h-2V35z\" />\n      </g>\n      <path d=\"M52,32v1h-2v1h-1v5h1v-1h1v-1h1v-1h2v-1h2v-3H52z\" fill=\"#fff\" />\n      <g class=\"gotchi-primary\">\n        <path d=\"M49,33h1v1h-1V33z\" />\n        <path d=\"M50 32h2v1h-2v-1zm0 7h1v1h-1v-1z\" />\n        <path d=\"M49 40h1v1h-1v-1zm2-2h1v1h-1v-1z\" />\n        <path d=\"M52 37h2v1h-2v-1zm0-6h4v1h-4v-1z\" />\n        <path d=\"M56,32h1v4h-1V32z\" />\n        <path d=\"M54,36h2v1h-2V36z\" />\n      </g>\n      <g class=\"gotchi-secondary\">\n        <path d=\"M13,38h1v1h-1V38z\" />\n        <path d=\"M14 39h1v1h-1v-1zm-2-2h1v1h-1v-1z\" />\n        <path d=\"M10,36h2v1h-2V36z\" />\n        <path d=\"M8,35h2v1H8V35z\" />\n      </g>\n      <path d=\"M8,32v3h2v1h2v1h1v1h1v1h1v-5h-1v-1h-2v-1H8z\" fill=\"#fff\" />\n      <g class=\"gotchi-primary\">\n        <path d=\"M14,33h1v1h-1V33z\" />\n        <path d=\"M12 32h2v1h-2v-1zm1 7h1v1h-1v-1z\" />\n        <path d=\"M14 40h1v1h-1v-1zm-2-2h1v1h-1v-1z\" />\n        <path d=\"M10 37h2v1h-2v-1zm-2-6h4v1H8v-1z\" />\n        <path d=\"M7,32h1v4H7V32z\" />\n        <path d=\"M8,36h2v1H8V36z\" />\n      </g>\n    </g>\n  </svg>`,\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 64 64\"><g class=\"gotchi-bg\"><defs fill=\"#fff\"><pattern id=\"a\" patternUnits=\"userSpaceOnUse\" width=\"4\" height=\"4\"><path d=\"M0 0h1v1H0zm2 2h1v1H2z\"/></pattern><pattern id=\"b\" patternUnits=\"userSpaceOnUse\" x=\"0\" y=\"0\" width=\"2\" height=\"2\"><path d=\"M0 0h1v1H0z\"/></pattern><pattern id=\"c\" patternUnits=\"userSpaceOnUse\" x=\"-2\" y=\"0\" width=\"8\" height=\"1\"><path d=\"M0 0h1v1H0zm2 0h1v1H2zm2 0h1v1H4z\"/></pattern><pattern id=\"d\" patternUnits=\"userSpaceOnUse\" x=\"0\" y=\"0\" width=\"4\" height=\"4\"><path d=\"M0 0h1v1H0zm0 2h1v1H0zm1 0V1h1v1zm1 0h1v1H2zm0-1h1V0H2zm1 2h1v1H3z\"/></pattern><pattern id=\"e\" patternUnits=\"userSpaceOnUse\" width=\"64\" height=\"32\"><path d=\"M4 4h1v1H4zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1z\"/><path fill=\"url(#a)\" d=\"M0 8h64v7H0z\"/><path fill=\"url(#b)\" d=\"M0 16h64v1H0z\"/><path fill=\"url(#c)\" d=\"M0 18h64v1H0z\"/><path fill=\"url(#b)\" d=\"M22 18h15v1H22zM0 20h64v3H0z\"/><path fill=\"url(#d)\" d=\"M0 24h64v8H0z\"/></pattern><mask id=\"f\"><path fill=\"url(#e)\" d=\"M0 0h64v32H0z\"/></mask></defs><path fill=\"#fff\" d=\"M0 0h64v32H0z\"/><path fill=\"#dea8ff\" class=\"gotchi-secondary\" mask=\"url(#f)\" d=\"M0 0h64v32H0z\"/><path fill=\"#dea8ff\" class=\"gotchi-secondary\" d=\"M0 32h64v32H0z\"/><path mask=\"url(#f)\" fill=\"#fff\" transform=\"matrix(1 0 0 -1 0 64)\" d=\"M0 0h64v32H0z\"/></g><g class=\"gotchi-bg\"><defs fill=\"#fff\"><pattern id=\"a\" patternUnits=\"userSpaceOnUse\" width=\"4\" height=\"4\"><path d=\"M0 0h1v1H0zm2 2h1v1H2z\"/></pattern><pattern id=\"b\" patternUnits=\"userSpaceOnUse\" x=\"0\" y=\"0\" width=\"2\" height=\"2\"><path d=\"M0 0h1v1H0z\"/></pattern><pattern id=\"c\" patternUnits=\"userSpaceOnUse\" x=\"-2\" y=\"0\" width=\"8\" height=\"1\"><path d=\"M0 0h1v1H0zm2 0h1v1H2zm2 0h1v1H4z\"/></pattern><pattern id=\"d\" patternUnits=\"userSpaceOnUse\" x=\"0\" y=\"0\" width=\"4\" height=\"4\"><path d=\"M0 0h1v1H0zm0 2h1v1H0zm1 0V1h1v1zm1 0h1v1H2zm0-1h1V0H2zm1 2h1v1H3z\"/></pattern><pattern id=\"e\" patternUnits=\"userSpaceOnUse\" width=\"64\" height=\"32\"><path d=\"M4 4h1v1H4zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1z\"/><path fill=\"url(#a)\" d=\"M0 8h64v7H0z\"/><path fill=\"url(#b)\" d=\"M0 16h64v1H0z\"/><path fill=\"url(#c)\" d=\"M0 18h64v1H0z\"/><path fill=\"url(#b)\" d=\"M22 18h15v1H22zM0 20h64v3H0z\"/><path fill=\"url(#d)\" d=\"M0 24h64v8H0z\"/></pattern><mask id=\"f\"><path fill=\"url(#e)\" d=\"M0 0h64v32H0z\"/></mask></defs><path fill=\"#fff\" d=\"M0 0h64v32H0z\"/><path fill=\"#dea8ff\" class=\"gotchi-secondary\" mask=\"url(#f)\" d=\"M0 0h64v32H0z\"/><path fill=\"#dea8ff\" class=\"gotchi-secondary\" d=\"M0 32h64v32H0z\"/><path mask=\"url(#f)\" fill=\"#fff\" transform=\"matrix(1 0 0 -1 0 64)\" d=\"M0 0h64v32H0z\"/></g><style>.gotchi-primary{fill:#64438E;}.gotchi-secondary{fill:#EDD3FD;}.gotchi-cheek{fill:#F696C6;}.gotchi-eyeColor{fill:#64438E;}.gotchi-primary-mouth{fill:#64438E;}.gotchi-sleeves-up{display:none;}.gotchi-handsUp{display:none;}.gotchi-handsDownOpen{display:none;}.gotchi-handsDownClosed{display:block}</style><g class=\"gotchi-body\"><g class=\"gotchi-primary\"><path d=\"M43 14v-2h-2v-2h-2V8h-4V6h-6v2h-4v2h-2v2h-2v2h-1v41h3v-2h3v2h4v-2h4v2h4v-2h3v2h3V14z\" /><path d=\"M41 14v-2h-2v-2h-4V8h-6v2h-4v2h-2v2h-2v39h2v-2h3v2h4v-2h4v2h4v-2h3v2h2V14z\" /><path d=\"M42,51h-1v-2h-3v2h-4v-2h-4v2h-4v-2h-3v2h-2V14h2v-1h2v-2h4V9h6v2h4v2h2v2h1V51z\" fill=\"#fff\"/></g></g><g class=\"gotchi-shadow\"><path d=\"M23 58v1h1v1h16v-1h1v-1z\" opacity=\".25\"/></g><path class=\"gotchi-cheek\" d=\"M22 32h2v2h-2z\" fill=\"#f696c6\"/><g class=\"gotchi-collateral\"><path d=\"M23 15v-1h-2v7h1v-1h1v-1h1v-4z\" /><path d=\"M22 15v-1h-1v6h1v-1h1v-4z\" fill=\"#c260ff\"/><path d=\"M22,15v-1h-1v3h2v-2H22z\" fill=\"#dea8ff\"/></g><g class=\"gotchi-eyeColor\"><path d=\"M22,24v-2h-1v8h1v-2h2v-4H22z\"/></g><g class=\"gotchi-handsDown\"><path d=\"M25 44h-1v-4h1v-1h2v-1h2v-1h1v-1h1v-1h2v7h-1v1h-1v1h-2v1h-4z\" /><path d=\"M25 40h2v-1h2v-1h1v-1h1v-1h2v5h-1v1h-1v1h-2v1h-4z\" fill=\"#fff\"/><g ><path d=\"M33 40v1h-1v-1h1z\"/><path d=\"M29,42v1h2v-1h1v-1h-1v1H29z\"/><path d=\"M29 43v1h-4v-1h4z\"/></g></g><g class=\"gotchi-handsUp\"><path d=\"M26 29v-1h4v1h1v2h1v2h1v1h1v1h1v2h-7v-1h-1v-1h-1v-2h-1v-4z\" /><path d=\"M30 29v2h1v2h1v1h1v1h1v2h-5v-1h-1v-1h-1v-2h-1v-4z\" fill=\"#fff\"/><g ><path d=\"M30 37h-1v-1h1v1z\"/><path d=\"M28,33h-1v2h1v1h1v-1h-1V33z\"/><path d=\"M27 33h-1v-4h1v4z\"/></g></g><g class=\"gotchi-handsDown\"><path d=\"M25 44h-1v-4h1v-1h2v-1h2v-1h1v-1h1v-1h2v7h-1v1h-1v1h-2v1h-4z\" /><path d=\"M25 40h2v-1h2v-1h1v-1h1v-1h2v5h-1v1h-1v1h-2v1h-4z\" fill=\"#fff\"/><g ><path d=\"M33 40v1h-1v-1h1z\"/><path d=\"M29,42v1h2v-1h1v-1h-1v1H29z\"/><path d=\"M29 43v1h-4v-1h4z\"/></g></g><g class=\"gotchi-handsUp\"><path d=\"M26 29v-1h4v1h1v2h1v2h1v1h1v1h1v2h-7v-1h-1v-1h-1v-2h-1v-4z\" /><path d=\"M30 29v2h1v2h1v1h1v1h1v2h-5v-1h-1v-1h-1v-2h-1v-4z\" fill=\"#fff\"/><g ><path d=\"M30 37h-1v-1h1v1z\"/><path d=\"M28,33h-1v2h1v1h1v-1h-1V33z\"/><path d=\"M27 33h-1v-4h1v4z\"/></g></g></svg>',\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 64 64\"><g class=\"gotchi-bg\"><defs fill=\"#fff\"><pattern id=\"a\" patternUnits=\"userSpaceOnUse\" width=\"4\" height=\"4\"><path d=\"M0 0h1v1H0zm2 2h1v1H2z\"/></pattern><pattern id=\"b\" patternUnits=\"userSpaceOnUse\" x=\"0\" y=\"0\" width=\"2\" height=\"2\"><path d=\"M0 0h1v1H0z\"/></pattern><pattern id=\"c\" patternUnits=\"userSpaceOnUse\" x=\"-2\" y=\"0\" width=\"8\" height=\"1\"><path d=\"M0 0h1v1H0zm2 0h1v1H2zm2 0h1v1H4z\"/></pattern><pattern id=\"d\" patternUnits=\"userSpaceOnUse\" x=\"0\" y=\"0\" width=\"4\" height=\"4\"><path d=\"M0 0h1v1H0zm0 2h1v1H0zm1 0V1h1v1zm1 0h1v1H2zm0-1h1V0H2zm1 2h1v1H3z\"/></pattern><pattern id=\"e\" patternUnits=\"userSpaceOnUse\" width=\"64\" height=\"32\"><path d=\"M4 4h1v1H4zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1z\"/><path fill=\"url(#a)\" d=\"M0 8h64v7H0z\"/><path fill=\"url(#b)\" d=\"M0 16h64v1H0z\"/><path fill=\"url(#c)\" d=\"M0 18h64v1H0z\"/><path fill=\"url(#b)\" d=\"M22 18h15v1H22zM0 20h64v3H0z\"/><path fill=\"url(#d)\" d=\"M0 24h64v8H0z\"/></pattern><mask id=\"f\"><path fill=\"url(#e)\" d=\"M0 0h64v32H0z\"/></mask></defs><path fill=\"#fff\" d=\"M0 0h64v32H0z\"/><path fill=\"#dea8ff\" class=\"gotchi-secondary\" mask=\"url(#f)\" d=\"M0 0h64v32H0z\"/><path fill=\"#dea8ff\" class=\"gotchi-secondary\" d=\"M0 32h64v32H0z\"/><path mask=\"url(#f)\" fill=\"#fff\" transform=\"matrix(1 0 0 -1 0 64)\" d=\"M0 0h64v32H0z\"/></g><g class=\"gotchi-bg\"><defs fill=\"#fff\"><pattern id=\"a\" patternUnits=\"userSpaceOnUse\" width=\"4\" height=\"4\"><path d=\"M0 0h1v1H0zm2 2h1v1H2z\"/></pattern><pattern id=\"b\" patternUnits=\"userSpaceOnUse\" x=\"0\" y=\"0\" width=\"2\" height=\"2\"><path d=\"M0 0h1v1H0z\"/></pattern><pattern id=\"c\" patternUnits=\"userSpaceOnUse\" x=\"-2\" y=\"0\" width=\"8\" height=\"1\"><path d=\"M0 0h1v1H0zm2 0h1v1H2zm2 0h1v1H4z\"/></pattern><pattern id=\"d\" patternUnits=\"userSpaceOnUse\" x=\"0\" y=\"0\" width=\"4\" height=\"4\"><path d=\"M0 0h1v1H0zm0 2h1v1H0zm1 0V1h1v1zm1 0h1v1H2zm0-1h1V0H2zm1 2h1v1H3z\"/></pattern><pattern id=\"e\" patternUnits=\"userSpaceOnUse\" width=\"64\" height=\"32\"><path d=\"M4 4h1v1H4zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1z\"/><path fill=\"url(#a)\" d=\"M0 8h64v7H0z\"/><path fill=\"url(#b)\" d=\"M0 16h64v1H0z\"/><path fill=\"url(#c)\" d=\"M0 18h64v1H0z\"/><path fill=\"url(#b)\" d=\"M22 18h15v1H22zM0 20h64v3H0z\"/><path fill=\"url(#d)\" d=\"M0 24h64v8H0z\"/></pattern><mask id=\"f\"><path fill=\"url(#e)\" d=\"M0 0h64v32H0z\"/></mask></defs><path fill=\"#fff\" d=\"M0 0h64v32H0z\"/><path fill=\"#dea8ff\" class=\"gotchi-secondary\" mask=\"url(#f)\" d=\"M0 0h64v32H0z\"/><path fill=\"#dea8ff\" class=\"gotchi-secondary\" d=\"M0 32h64v32H0z\"/><path mask=\"url(#f)\" fill=\"#fff\" transform=\"matrix(1 0 0 -1 0 64)\" d=\"M0 0h64v32H0z\"/></g><style>.gotchi-primary{fill:#64438E;}.gotchi-secondary{fill:#EDD3FD;}.gotchi-cheek{fill:#F696C6;}.gotchi-eyeColor{fill:#64438E;}.gotchi-primary-mouth{fill:#64438E;}.gotchi-sleeves-up{display:none;}.gotchi-handsUp{display:none;}.gotchi-handsDownOpen{display:none;}.gotchi-handsDownClosed{display:block}</style><g class=\"gotchi-body\"><g class=\"gotchi-primary\"><path d=\"M21 14v-2h2v-2h2V8h4V6h6v2h4v2h2v2h2v2h1v41h-3v-2h-3v2h-4v-2h-4v2h-4v-2h-3v2h-3V14z\" /><path d=\"M23 14v-2h2v-2h4V8h6v2h4v2h2v2h2v39h-2v-2h-3v2h-4v-2h-4v2h-4v-2h-3v2h-2V14z\" /><path d=\"M22,15h1v-2h2v-2h4V9h6v2h4v2h2v1h2v37h-2v-2h-3v2h-4v-2h-4v2h-4v-2h-3v2h-1V15z\" fill=\"#fff\"/></g></g><g class=\"gotchi-shadow\"><path d=\"M23 58v1h1v1h16v-1h1v-1z\" opacity=\".25\"/></g><path class=\"gotchi-cheek\" d=\"M40 32h2v2h-2z\" fill=\"#f696c6\"/><g class=\"gotchi-collateral\"><path d=\"M41 14v1h-1v4h1v1h1v1h1v-7z\" /><path d=\"M42 14v1h-1v4h1v1h1v-6z\" fill=\"#dea8ff\"/><path d=\"M42,14v1h-1v2h2v-3H42z\" /></g><g class=\"gotchi-eyeColor\"><path d=\"M43 30v-8h-1v2h-2v4h2v2h1z\"/></g><g class=\"gotchi-handsDown\"><path d=\"M39 44h1v-4h-1v-1h-2v-1h-2v-1h-1v-1h-1v-1h-2v7h1v1h1v1h2v1h4z\" /><path d=\"M39 40h-2v-1h-2v-1h-1v-1h-1v-1h-2v5h1v1h1v1h2v1h4z\" fill=\"#fff\"/><g ><path d=\"M32 40v1h-1v-1h1z\"/><path d=\"M33 42v-1h-1v1h1v1h2v-1h-2z\"/><path d=\"M39 43v1h-4v-1h4z\"/></g></g><g class=\"gotchi-handsUp\"><path d=\"M38 29v-1h-4v1h-1v2h-1v2h-1v1h-1v1h-1v2h7v-1h1v-1h1v-2h1v-4z\" /><path d=\"M34 29v2h-1v2h-1v1h-1v1h-1v2h5v-1h1v-1h1v-2h1v-4z\" fill=\"#fff\"/><g ><path d=\"M34,36h1v1h-1V36z\"/><path d=\"M36 35h-1v1h1v-1h1v-2h-1v2z\"/><path d=\"M37,29h1v4h-1V29z\"/></g></g><g class=\"gotchi-handsDown\"><path d=\"M39 44h1v-4h-1v-1h-2v-1h-2v-1h-1v-1h-1v-1h-2v7h1v1h1v1h2v1h4z\" /><path d=\"M39 40h-2v-1h-2v-1h-1v-1h-1v-1h-2v5h1v1h1v1h2v1h4z\" fill=\"#fff\"/><g ><path d=\"M32 40v1h-1v-1h1z\"/><path d=\"M33 42v-1h-1v1h1v1h2v-1h-2z\"/><path d=\"M39 43v1h-4v-1h4z\"/></g></g><g class=\"gotchi-handsUp\"><path d=\"M38 29v-1h-4v1h-1v2h-1v2h-1v1h-1v1h-1v2h7v-1h1v-1h1v-2h1v-4z\" /><path d=\"M34 29v2h-1v2h-1v1h-1v1h-1v2h5v-1h1v-1h1v-2h1v-4z\" fill=\"#fff\"/><g ><path d=\"M34,36h1v1h-1V36z\"/><path d=\"M36 35h-1v1h1v-1h1v-2h-1v2z\"/><path d=\"M37,29h1v4h-1V29z\"/></g></g></svg>',\n  '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 64 64\"><g class=\"gotchi-bg\"><defs fill=\"#fff\"><pattern id=\"a\" patternUnits=\"userSpaceOnUse\" width=\"4\" height=\"4\"><path d=\"M0 0h1v1H0zm2 2h1v1H2z\"/></pattern><pattern id=\"b\" patternUnits=\"userSpaceOnUse\" x=\"0\" y=\"0\" width=\"2\" height=\"2\"><path d=\"M0 0h1v1H0z\"/></pattern><pattern id=\"c\" patternUnits=\"userSpaceOnUse\" x=\"-2\" y=\"0\" width=\"8\" height=\"1\"><path d=\"M0 0h1v1H0zm2 0h1v1H2zm2 0h1v1H4z\"/></pattern><pattern id=\"d\" patternUnits=\"userSpaceOnUse\" x=\"0\" y=\"0\" width=\"4\" height=\"4\"><path d=\"M0 0h1v1H0zm0 2h1v1H0zm1 0V1h1v1zm1 0h1v1H2zm0-1h1V0H2zm1 2h1v1H3z\"/></pattern><pattern id=\"e\" patternUnits=\"userSpaceOnUse\" width=\"64\" height=\"32\"><path d=\"M4 4h1v1H4zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1z\"/><path fill=\"url(#a)\" d=\"M0 8h64v7H0z\"/><path fill=\"url(#b)\" d=\"M0 16h64v1H0z\"/><path fill=\"url(#c)\" d=\"M0 18h64v1H0z\"/><path fill=\"url(#b)\" d=\"M22 18h15v1H22zM0 20h64v3H0z\"/><path fill=\"url(#d)\" d=\"M0 24h64v8H0z\"/></pattern><mask id=\"f\"><path fill=\"url(#e)\" d=\"M0 0h64v32H0z\"/></mask></defs><path fill=\"#fff\" d=\"M0 0h64v32H0z\"/><path fill=\"#dea8ff\" class=\"gotchi-secondary\" mask=\"url(#f)\" d=\"M0 0h64v32H0z\"/><path fill=\"#dea8ff\" class=\"gotchi-secondary\" d=\"M0 32h64v32H0z\"/><path mask=\"url(#f)\" fill=\"#fff\" transform=\"matrix(1 0 0 -1 0 64)\" d=\"M0 0h64v32H0z\"/></g><g class=\"gotchi-handsDownOpen\"><g class=\"gotchi-primary\"><path d=\"M14 40h1v1h-1v-1zm-1-6h1v1h-1v-1z\"/><path d=\"M14 33h1v1h-1v-1zm-2 2h1v1h-1v-1zm-5 3h1v4H7v-4zm5 3h2v1h-2v-1z\"/><path d=\"M8 42h4v1H8v-1zm0-5h2v1H8v-1z\"/><path d=\"M10,36h2v1h-2V36z\"/></g><g class=\"gotchi-secondary\"><path d=\"M14,39h1v1h-1V39z\"/><path d=\"M12,40h2v1h-2V40z\"/><path d=\"M8,41h4v1H8V41z\"/></g><path d=\"M8,38v3h4v-1h2v-1h1v-5h-1v1h-1v1h-1v1h-2v1H8z\" fill=\"#fff\" /><g class=\"gotchi-primary\"><path d=\"M49 40h1v1h-1v-1zm1-6h1v1h-1v-1z\"/><path d=\"M49 33h1v1h-1v-1zm2 2h1v1h-1v-1zm5 3h1v4h-1v-4zm-6 3h2v1h-2v-1z\"/><path d=\"M52 42h4v1h-4v-1zm2-5h2v1h-2v-1z\"/><path d=\"M52,36h2v1h-2V36z\"/></g><g class=\"gotchi-secondary\"><path d=\"M49,39h1v1h-1V39z\"/><path d=\"M50,40h2v1h-2V40z\"/><path d=\"M52,41h4v1h-4V41z\"/></g><path d=\"M54,38v-1h-2v-1h-1v-1h-1v-1h-1v5h1v1h2v1h4v-3H54z\" fill=\"#fff\" /></g><g class=\"gotchi-handsUp\"><g class=\"gotchi-secondary\"><path d=\"M50,38h1v1h-1V38z\"/><path d=\"M49 39h1v1h-1v-1zm2-2h1v1h-1v-1z\"/><path d=\"M52,36h2v1h-2V36z\"/><path d=\"M54,35h2v1h-2V35z\"/></g><path d=\"M52,32v1h-2v1h-1v5h1v-1h1v-1h1v-1h2v-1h2v-3H52z\" fill=\"#fff\"/><g class=\"gotchi-primary\"><path d=\"M49,33h1v1h-1V33z\"/><path d=\"M50 32h2v1h-2v-1zm0 7h1v1h-1v-1z\"/><path d=\"M49 40h1v1h-1v-1zm2-2h1v1h-1v-1z\"/><path d=\"M52 37h2v1h-2v-1zm0-6h4v1h-4v-1z\"/><path d=\"M56,32h1v4h-1V32z\"/><path d=\"M54,36h2v1h-2V36z\"/></g><g class=\"gotchi-secondary\"><path d=\"M13,38h1v1h-1V38z\"/><path d=\"M14 39h1v1h-1v-1zm-2-2h1v1h-1v-1z\"/><path d=\"M10,36h2v1h-2V36z\"/><path d=\"M8,35h2v1H8V35z\"/></g><path d=\"M8,32v3h2v1h2v1h1v1h1v1h1v-5h-1v-1h-2v-1H8z\" fill=\"#fff\"/><g class=\"gotchi-primary\"><path d=\"M14,33h1v1h-1V33z\"/><path d=\"M12 32h2v1h-2v-1zm1 7h1v1h-1v-1z\"/><path d=\"M14 40h1v1h-1v-1zm-2-2h1v1h-1v-1z\"/><path d=\"M10 37h2v1h-2v-1zm-2-6h4v1H8v-1z\"/><path d=\"M7,32h1v4H7V32z\"/><path d=\"M8,36h2v1H8V36z\"/></g></g><g class=\"gotchi-bg\"><defs fill=\"#fff\"><pattern id=\"a\" patternUnits=\"userSpaceOnUse\" width=\"4\" height=\"4\"><path d=\"M0 0h1v1H0zm2 2h1v1H2z\"/></pattern><pattern id=\"b\" patternUnits=\"userSpaceOnUse\" x=\"0\" y=\"0\" width=\"2\" height=\"2\"><path d=\"M0 0h1v1H0z\"/></pattern><pattern id=\"c\" patternUnits=\"userSpaceOnUse\" x=\"-2\" y=\"0\" width=\"8\" height=\"1\"><path d=\"M0 0h1v1H0zm2 0h1v1H2zm2 0h1v1H4z\"/></pattern><pattern id=\"d\" patternUnits=\"userSpaceOnUse\" x=\"0\" y=\"0\" width=\"4\" height=\"4\"><path d=\"M0 0h1v1H0zm0 2h1v1H0zm1 0V1h1v1zm1 0h1v1H2zm0-1h1V0H2zm1 2h1v1H3z\"/></pattern><pattern id=\"e\" patternUnits=\"userSpaceOnUse\" width=\"64\" height=\"32\"><path d=\"M4 4h1v1H4zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1zm7 0h1v1h-1z\"/><path fill=\"url(#a)\" d=\"M0 8h64v7H0z\"/><path fill=\"url(#b)\" d=\"M0 16h64v1H0z\"/><path fill=\"url(#c)\" d=\"M0 18h64v1H0z\"/><path fill=\"url(#b)\" d=\"M22 18h15v1H22zM0 20h64v3H0z\"/><path fill=\"url(#d)\" d=\"M0 24h64v8H0z\"/></pattern><mask id=\"f\"><path fill=\"url(#e)\" d=\"M0 0h64v32H0z\"/></mask></defs><path fill=\"#fff\" d=\"M0 0h64v32H0z\"/><path fill=\"#dea8ff\" class=\"gotchi-secondary\" mask=\"url(#f)\" d=\"M0 0h64v32H0z\"/><path fill=\"#dea8ff\" class=\"gotchi-secondary\" d=\"M0 32h64v32H0z\"/><path mask=\"url(#f)\" fill=\"#fff\" transform=\"matrix(1 0 0 -1 0 64)\" d=\"M0 0h64v32H0z\"/></g><g class=\"gotchi-handsDownOpen\"><g class=\"gotchi-primary\"><path d=\"M14 40h1v1h-1v-1zm-1-6h1v1h-1v-1z\"/><path d=\"M14 33h1v1h-1v-1zm-2 2h1v1h-1v-1zm-5 3h1v4H7v-4zm5 3h2v1h-2v-1z\"/><path d=\"M8 42h4v1H8v-1zm0-5h2v1H8v-1z\"/><path d=\"M10,36h2v1h-2V36z\"/></g><g class=\"gotchi-secondary\"><path d=\"M14,39h1v1h-1V39z\"/><path d=\"M12,40h2v1h-2V40z\"/><path d=\"M8,41h4v1H8V41z\"/></g><path d=\"M8,38v3h4v-1h2v-1h1v-5h-1v1h-1v1h-1v1h-2v1H8z\" fill=\"#fff\" /><g class=\"gotchi-primary\"><path d=\"M49 40h1v1h-1v-1zm1-6h1v1h-1v-1z\"/><path d=\"M49 33h1v1h-1v-1zm2 2h1v1h-1v-1zm5 3h1v4h-1v-4zm-6 3h2v1h-2v-1z\"/><path d=\"M52 42h4v1h-4v-1zm2-5h2v1h-2v-1z\"/><path d=\"M52,36h2v1h-2V36z\"/></g><g class=\"gotchi-secondary\"><path d=\"M49,39h1v1h-1V39z\"/><path d=\"M50,40h2v1h-2V40z\"/><path d=\"M52,41h4v1h-4V41z\"/></g><path d=\"M54,38v-1h-2v-1h-1v-1h-1v-1h-1v5h1v1h2v1h4v-3H54z\" fill=\"#fff\" /></g><g class=\"gotchi-handsUp\"><g class=\"gotchi-secondary\"><path d=\"M50,38h1v1h-1V38z\"/><path d=\"M49 39h1v1h-1v-1zm2-2h1v1h-1v-1z\"/><path d=\"M52,36h2v1h-2V36z\"/><path d=\"M54,35h2v1h-2V35z\"/></g><path d=\"M52,32v1h-2v1h-1v5h1v-1h1v-1h1v-1h2v-1h2v-3H52z\" fill=\"#fff\"/><g class=\"gotchi-primary\"><path d=\"M49,33h1v1h-1V33z\"/><path d=\"M50 32h2v1h-2v-1zm0 7h1v1h-1v-1z\"/><path d=\"M49 40h1v1h-1v-1zm2-2h1v1h-1v-1z\"/><path d=\"M52 37h2v1h-2v-1zm0-6h4v1h-4v-1z\"/><path d=\"M56,32h1v4h-1V32z\"/><path d=\"M54,36h2v1h-2V36z\"/></g><g class=\"gotchi-secondary\"><path d=\"M13,38h1v1h-1V38z\"/><path d=\"M14 39h1v1h-1v-1zm-2-2h1v1h-1v-1z\"/><path d=\"M10,36h2v1h-2V36z\"/><path d=\"M8,35h2v1H8V35z\"/></g><path d=\"M8,32v3h2v1h2v1h1v1h1v1h1v-5h-1v-1h-2v-1H8z\" fill=\"#fff\"/><g class=\"gotchi-primary\"><path d=\"M14,33h1v1h-1V33z\"/><path d=\"M12 32h2v1h-2v-1zm1 7h1v1h-1v-1z\"/><path d=\"M14 40h1v1h-1v-1zm-2-2h1v1h-1v-1z\"/><path d=\"M10 37h2v1h-2v-1zm-2-6h4v1H8v-1z\"/><path d=\"M7,32h1v4H7V32z\"/><path d=\"M8,36h2v1H8V36z\"/></g></g><style>.gotchi-primary{fill:#64438E;}.gotchi-secondary{fill:#EDD3FD;}.gotchi-cheek{fill:#F696C6;}.gotchi-eyeColor{fill:#64438E;}.gotchi-primary-mouth{fill:#64438E;}.gotchi-sleeves-up{display:none;}.gotchi-handsUp{display:none;}.gotchi-handsDownOpen{display:none;}.gotchi-handsDownClosed{display:block}</style><g class=\"gotchi-body\"><g class=\"gotchi-primary\"><path d=\"M21 12h2v-2h-4v2h1z\"/><path d=\"M19 14v-2h-2v2h1zm6-4h2V8h-4v2h1z\"/><path d=\"M29 8h8V6H27v2h1zm16 6h2v-2h-2v1z\"/><path d=\"M48 14h-1v39h-2v2h4V14zm-11-4h4V8h-4v1z\"/><path d=\"M41 12h4v-2h-4v1zM17 53V14h-2v41h4v-2h-1z\"/><path d=\"M24 51h-5v2h5v-1z\"/><path d=\"M27 53h-3v2h5v-2h-1zm18-2h-5v2h5v-1z\"/><path d=\"M35 51h-6v2h6v-1z\"/><path d=\"M38 53h-3v2h5v-2h-1z\"/></g><g class=\"gotchi-secondary\"><path d=\"M18 43v6h2v-1h2v1h2v2h-5v2h-2V14h2v1h-1v26z\"/><path d=\"M27 51h-3v2h5v-2h-1zm11 0h-3v2h5v-2h-1z\"/><path d=\"M35 49h-2v-1h-2v1h-2v2h6v-1zM25 11h2v-1h-4v1h1zm-4 2h2v-1h-4v1h1zm24 31v5h-1v-1h-2v1h-2v2h5v2h2V14h-2v29z\"/><path d=\"M37 8H27v1h5v1h5V9zm8 4h-4v2h4v-1z\"/><path d=\"M41 10h-4v2h4v-1z\"/></g><path d=\"M44 14h-3v-2h-4v-2h-5V9h-5v2h-4v2h-4v2h-1v34h2v-1h2v1h2v2h5v-2h2v-1h2v1h2v2h5v-2h2v-1h2v1h1V14z\" fill=\"#fff\"/></g><g class=\"gotchi-shadow\"><path opacity=\".25\" d=\"M25 58H19v1h1v1h24V59h1V58h-1z\" fill=\"#000\"/></g></svg>',\n];\n","import { mouths, eyes, defaultGotchi } from \"./svg\";\nimport { Tuple, AavegotchiObject } from \"types\";\nimport { Signer } from '@ethersproject/abstract-signer';\nimport { Provider } from \"@ethersproject/abstract-provider\";\nimport { useDiamondCall } from \"web3/actions\";\nimport { collateralToAddress, Collaterals } from 'helpers/vars';\n\ninterface GotchiOptions {\n\thaunt?: \"1\" | \"2\",\n\tnumericTraits?: Tuple<number, 6>,\n\twearables?: Tuple<number, 16>,\n\tcollateral?: Collaterals,\n\tname?: string,\n\tid?: string,\n}\n\nexport const getPreviewGotchi = async (provider: Signer | Provider, options?: GotchiOptions): Promise<AavegotchiObject> => {\n\tconst withSetsNumericTraits: Tuple<number, 6> = options?.numericTraits || [50, 50, 50, 50, 50, 50];\n\tconst equippedWearables: Tuple<number, 16> = options?.wearables || [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\tconst svg = await useDiamondCall<Tuple<string, 4>>(provider, {\n\t\tname: \"previewSideAavegotchi\",\n\t\tparameters: [\n\t\t\toptions?.haunt || \"1\",\n\t\t\toptions?.collateral ? collateralToAddress[options.collateral] : collateralToAddress[\"aWETH\"],\n\t\t\twithSetsNumericTraits,\n\t\t\tequippedWearables,\n\t\t],\n\t});\n\tconst gotchi = {\n\t\tid: options?.id || '0000',\n\t\tname: options?.name || 'Aavegotchi',\n\t\twithSetsNumericTraits,\n\t\tsvg: svg,\n\t\tequippedWearables,\n\t\tstatus: 3,\n\t\twithSetsRarityScore: 300,\n\t\towner: {\n\t\t\tid: '0000'\n\t\t},\n\t}\n\treturn gotchi;\n}\n\n\n\nexport const getDefaultGotchi = (): AavegotchiObject => {\n\treturn {\n\t\tid: '0000',\n\t\tname: 'Aavegotchi',\n\t\twithSetsNumericTraits: [50, 50, 50, 50, 50, 50],\n\t\tsvg: defaultGotchi,\n\t\tequippedWearables: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\tstatus: 3,\n\t\twithSetsRarityScore: 300,\n\t\towner: {\n\t\t\tid: '0000'\n\t\t},\n\t}\n}\n\n/**\n * Converts SVG to Blob URL\n * @param {string} svg - SVG you want to turn into Blob URL\n * @returns {string} Object URL of Blob\n */\nexport const convertInlineSVGToBlobURL = (svg: string) => {\n\tconst blob = new Blob([svg], { type: \"image/svg+xml\" });\n\treturn URL.createObjectURL(blob);\n};\n\n/**\n * Removes background from Aavegotchi SVG\n * @param {string} svg - SVG you want to customise\n * @returns {string} Returns customised SVG\n */\nexport const removeBG = (svg: string) => {\n\tconst styledSvg = svg.replace(\"<style>\", \"<style>.gotchi-bg,.wearable-bg{display: none}\");\n\treturn styledSvg;\n};\n\n/**\n * Removes shadow from Aavegotchi SVG\n * @param {string} svg - SVG you want to customise\n * @returns {string} Returns customised SVG\n */\nexport const removeShadow = (svg: string) => {\n\tconst styledSvg = svg.replace(\"<style>\", \"<style>.gotchi-shadow{display: none}\");\n\treturn styledSvg;\n};\n\n/**\n * Adds Keyframe animation to SVG. (NOT TO BE USED IN IN GAME SPRITESHEET)\n * @param {string} svg - SVG you want to customise\n * @returns {string} Returns customised SVG\n */\nexport const bounceAnimation = (svg: string) => {\n\tconst style = `\n    @keyframes downHands {\n      from {\n        --hand_translateY: -1px;\n      }\n      to {\n        --hand_translateY: -0.5px;\n      }\n    }\n    @keyframes up {\n      from {\n        transform: translate(0px, 0);\n      }\n      to {\n        transform: translate(0px, -1px);\n      }\n    }\n    @keyframes down {\n      from {\n        transform: translate(0px, 0);\n      }\n      to {\n        transform: translate(0px, 1px);\n      }\n    }\n    svg {\n      animation-name:down;\n      animation-duration:1s;\n      animation-iteration-count: infinite;\n      animation-timing-function: linear;\n      animation-timing-function: steps(1);\n    }\n    .gotchi-shadow {\n      animation: up 1s infinite linear steps(2);\n      animation-name:up;\n      animation-duration:1s;\n      animation-iteration-count: infinite;\n      animation-timing-function: linear;\n      animation-timing-function: steps(2);\n    }\n    .gotchi-wearable {\n      animation-name:down;\n      animation-duration:1s;\n      animation-iteration-count: infinite;\n      animation-timing-function: linear;\n      animation-timing-function: steps(1);\n    }\n    .gotchi-handsDownClosed, .gotchi-handsUp, .gotchi-handsDownOpen, .gotchi-handsDownClosed, .gotchi-body, .gotchi-eyeColor, .gotchi-collateral, .gotchi-cheek, .gotchi-primary-mouth, .gotchi-wearable, .gotchi-sleeves   {\n      animation-name:down;\n      animation-duration:1s;\n      animation-iteration-count: infinite;\n      animation-timing-function: linear;\n      animation-timing-function: steps(2);\n    }\n    .wearable-hand {\n      animation-name:downHands !important;\n      animation-duration:1s;\n      animation-iteration-count: infinite;\n      animation-timing-function: linear;\n      animation-timing-function: steps(2);\n      transform: translate(0, var(--hand_translateY));\n    }\n    .wearable-bg {\n      animation-name: none;\n    }\n  `;\n\tconst styledSvg = svg.replace(\"<style>\", `<style>${style}`);\n\treturn styledSvg;\n};\n\n\n/**\n * Adds SVG styling to Aavegotchi to raise its arms\n * @param {string} svg - SVG you want to customise\n * @param {{left?: number, right?: number}} arms - Wearable id of arms for unique animations \n * @returns {string} Returns customised SVG\n */\nexport const raiseHands = (svg: string, arms?: { left?: number, right?: number }) => {\n\tconst leftArm = (arms?.left && [207, 217, 223].includes(arms?.left)) ? `\n      .wearable-hand-left {\n        transform: translateY(calc(14px + var(--hand_translateY, -4px))) scaleY(-1);\n        transform-origin: 50% 50%;\n      }\n    ` : ''\n\tconst rightArm = (arms?.right && [207, 217, 223].includes(arms?.right)) ? `\n    .wearable-hand-right {\n      transform: translateY(calc(14px + var(--hand_translateY, -4px))) scaleY(-1);\n      transform-origin: 50% 50%;\n    }\n  ` : ``\n\n\tconst style = `\n    .gotchi-handsDownClosed {\n      display:none !important;\n    }\n    .gotchi-handsDownOpen {\n      display:none !important;\n    }\n    .gotchi-handsUp {\n      display:block !important;\n    }\n    .gotchi-sleeves {\n      display:none !important;\n    }\n    .gotchi-sleeves-up {\n      display:block !important;\n    }\n    .wearable-hand {\n      transform: translateY(var(--hand_translateY, -4px));\n    }\n    ${leftArm}\n    ${rightArm}\n  `;\n\n\tconst styledSvg = svg.replace(\"<style>\", `<style>${style}`);\n\treturn styledSvg;\n};\n\n/**\n * Adds SVG styling to Aavegotchi so it appears to float higher\n * @param {string} svg - SVG you want to customise\n * @returns {string} Returns customised SVG\n */\nexport const addIdleUp = (svg: string): string => {\n\tconst styledSvg = svg.replace(\n\t\t\"<style>\",\n\t\t\"<style>.gotchi-shadow {transform: translateY(1px);}.gotchi-wearable,.gotchi-handsDownClosed,.gotchi-handsUp,.gotchi-handsDownOpen,.gotchi-handsDownClosed,.gotchi-body,.gotchi-eyeColor,.gotchi-collateral,.gotchi-cheek,.gotchi-primary-mouth,.gotchi-wearable,.gotchi-sleeves {transform: translateY(-1px);}\"\n\t);\n\treturn styledSvg;\n};\n\ninterface ReplaceEyes {\n\ttarget: \"eyes\";\n\treplaceSvg: keyof typeof eyes;\n}\n\ninterface ReplaceMouth {\n\ttarget: \"mouth\";\n\treplaceSvg: keyof typeof mouths;\n}\n\ntype ReplaceElement = ReplaceEyes | ReplaceMouth;\n\n/**\n * Replaces a layer in the Aavegotchi SVG with custom SVG data\n * @param {string} svg - SVG you want to customise\n * @param {ReplaceElement} element - target of element you want to replace + element you want to replace it with\n * @returns {string} Returns customised SVG\n */\nexport function replaceParts(svg: string, element: ReplaceElement) {\n\tconst doc = document.createDocumentFragment();\n\tconst wrapper = document.createElement(\"svg\");\n\twrapper.setAttribute(\"xmlns\", \"http://www.w3.org/2000/svg\");\n\twrapper.setAttribute(\"viewbox\", \"0 0 64 64\");\n\twrapper.innerHTML = svg;\n\tdoc.appendChild(wrapper);\n\n\tconst targetClass =\n\t\telement.target === \"eyes\" ? \"g.gotchi-eyeColor\" : \"g.gotchi-primary-mouth\";\n\tconst textnodes = doc.querySelectorAll(targetClass);\n\n\ttextnodes.forEach(function (txt) {\n\t\ttxt.innerHTML =\n\t\t\telement.target === \"eyes\"\n\t\t\t\t? eyes[element.replaceSvg]\n\t\t\t\t: mouths[element.replaceSvg];\n\t\t//txt.parentNode?.replaceChild(el, txt);\n\t});\n\tconst div = document.createElement(\"svg\");\n\tdiv.appendChild(doc);\n\treturn div.innerHTML;\n}\n\n\nexport type CustomiseOptions = {\n\tremoveBg?: boolean,\n\teyes?: keyof typeof eyes,\n\tmouth?: keyof typeof mouths,\n\tfloat?: boolean,\n\tanimate?: boolean,\n\tarmsUp?: boolean,\n\tremoveShadow?: boolean,\n}\n\n/**\n * Customise Aavegotchi SVG\n * @param {string} svg - SVG you want to customise\n * @param {CustomiseOptions} options - Properties you want to change\n * @param {Tuple<number, 16>} equipped - Equipped wearables (Only necessary for raised mechanical arms)\n * @returns {string} Returns customised SVG\n */\nexport const customiseSvg = (svg: string, options: CustomiseOptions, equipped?: Tuple<number, 16>) => {\n\tlet styledSvg = svg;\n\t(Object.keys(options) as Array<keyof typeof options>).map((option) => {\n\t\tconst value = options[option];\n\t\tif (value) {\n\t\t\tswitch (option) {\n\t\t\t\tcase 'removeBg':\n\t\t\t\t\treturn styledSvg = removeBG(styledSvg);\n\t\t\t\tcase 'eyes':\n\t\t\t\t\treturn styledSvg = replaceParts(styledSvg, { target: option, replaceSvg: value as keyof typeof eyes });\n\t\t\t\tcase 'mouth':\n\t\t\t\t\treturn styledSvg = replaceParts(styledSvg, { target: option, replaceSvg: value as keyof typeof mouths });\n\t\t\t\tcase 'animate':\n\t\t\t\t\treturn styledSvg = bounceAnimation(styledSvg);\n\t\t\t\tcase 'float':\n\t\t\t\t\treturn styledSvg = addIdleUp(styledSvg);\n\t\t\t\tcase 'armsUp':\n\t\t\t\t\treturn styledSvg = raiseHands(styledSvg, equipped ? { left: equipped[4], right: equipped[5] } : undefined);\n\t\t\t\tcase 'removeShadow':\n\t\t\t\t\treturn styledSvg = removeShadow(styledSvg);\n\t\t\t\tdefault:\n\t\t\t\t\treturn styledSvg;\n\t\t\t}\n\t\t}\n\t})\n\treturn styledSvg;\n}\n","import { useWeb3 } from \"web3/context\";\nimport { useEffect, useState } from \"react\";\nimport { useDiamondCall } from \"web3/actions\";\nimport gotchiLoading from \"assets/gifs/loading.gif\";\nimport { Web3Provider } from \"@ethersproject/providers\";\nimport {\n  convertInlineSVGToBlobURL,\n  customiseSvg,\n  CustomiseOptions,\n} from \"helpers/aavegotchi\";\nimport { Tuple } from \"types\";\n\ninterface Props {\n  tokenId: string;\n  options?: CustomiseOptions;\n  lazyloadIn?: boolean;\n  side?: 0 | 1 | 2 | 3;\n}\n\nexport const GotchiSVG = ({ tokenId, options, lazyloadIn, side = 0 }: Props) => {\n  const {\n    state: { usersAavegotchis, provider },\n    dispatch,\n  } = useWeb3();\n  const [svg, setSvg] = useState<string>();\n\n  const fetchGotchiSvg = async (\n    id: string,\n    isOwner: boolean,\n    provider: Web3Provider\n  ) => {\n    try {\n      const res = await useDiamondCall<Tuple<string, 4>>(provider, {\n        name: \"getAavegotchiSideSvgs\",\n        parameters: [id],\n      });\n      if (isOwner) {\n        dispatch({\n          type: \"UPDATE_AAVEGOTCHI_SVG\",\n          tokenId: id,\n          svg: res,\n        });\n      } else {\n        setSvg(options ? customiseSvg(res[0], options) : res[0]);\n      }\n    } catch (error: any) {\n      dispatch({\n        type: \"SET_ERROR\",\n        error,\n      });\n    }\n  };\n\n  useEffect(() => {\n    if (usersAavegotchis && (lazyloadIn === undefined || lazyloadIn)) {\n      const gotchis = [...usersAavegotchis];\n      const selectedGotchi = gotchis.find((gotchi) => gotchi.id === tokenId);\n      if (selectedGotchi?.svg) {\n        setSvg(\n          options\n            ? customiseSvg(\n                selectedGotchi.svg[side],\n                options,\n                selectedGotchi.equippedWearables\n              )\n            : selectedGotchi.svg[side]\n        );\n      } else if (provider) {\n        fetchGotchiSvg(tokenId, !!selectedGotchi, provider);\n      }\n    }\n  }, [usersAavegotchis, tokenId, lazyloadIn, side]);\n\n  return (\n    <img\n      src={svg ? convertInlineSVGToBlobURL(svg) : gotchiLoading}\n      height=\"100%\"\n      width=\"100%\"\n    />\n  );\n};\n","import { useState, useRef } from \"react\";\nimport { SearchIcon } from \"assets\";\nimport styles from \"./styles.module.css\";\n\ninterface Props {\n  onChange: (text: string) => void;\n  placeholder: string;\n  onToggle: (active: boolean) => void;\n  activeOverride?: boolean;\n}\n\nexport const SearchToggle = ({\n  onChange,\n  placeholder,\n  onToggle,\n  activeOverride,\n}: Props) => {\n  const [open, setOpen] = useState(false);\n  const [value, setValue] = useState(\"\");\n\n  const inputRef = useRef<HTMLInputElement>(null);\n\n  const handleToggle = () => {\n    if (!open) {\n      inputRef?.current?.focus();\n    }\n    setOpen((prevState) => !prevState);\n    onToggle(!open);\n  };\n\n  const handleOnChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const input = e.target.value;\n    setValue(input);\n    onChange(input);\n  };\n\n  return (\n    <div\n      className={`${styles.inputContainer} ${\n        (activeOverride !== undefined ? activeOverride : open)\n          ? styles.open\n          : \"\"\n      }`}\n    >\n      <button className={styles.toggle} onClick={handleToggle}>\n        <SearchIcon width={32} height={32} />\n      </button>\n      <input\n        ref={inputRef}\n        className={styles.input}\n        type=\"text\"\n        value={value}\n        onChange={handleOnChange}\n        placeholder={placeholder}\n      />\n    </div>\n  );\n};\n","import { useState } from \"react\";\nimport { DropdownIcon, SortIcon } from 'assets';\nimport styles from './styles.module.css';\n\nexport type Sort  = {\n  val: string,\n  dir: 'asc' | 'desc'\n}\n\ninterface Props {\n  options: Array<{\n    name: string,\n    value: string\n  }>\n  onSelect: (val: Sort) => void;\n  selected: Sort;\n  onToggle?: (active: boolean) => void;\n  activeOverride?: boolean;\n}\n\nexport const SortToggle = ({ options, onSelect, selected, onToggle, activeOverride }: Props) => {\n  const [open, setOpen] = useState(false);\n\n  const handleToggle = () => {\n    setOpen((prevState) => !prevState);\n    onToggle ? onToggle(!open) : null;\n  };\n\n  return (\n    <div\n      className={`${styles.inputContainer} ${\n        (activeOverride !== undefined ? activeOverride : open)\n          ? styles.open\n          : \"\"\n      }`}\n    >\n      <button className={styles.toggle} onClick={handleToggle}>\n        <SortIcon width={32} height={32} fill=\"white\" />\n      </button>\n      <div className={styles.sortOptions}>\n        {options.map(option => {\n          const active = option.value === selected.val;\n          const direction = active ? selected.dir : 'asc';\n        \n          return (\n            <div\n              key={option.value}\n              className={`${styles.option} ${active ? styles.active : styles.inactive}`}\n              onClick={() => onSelect({val: option.value, dir: active ? direction === 'asc' ? 'desc' : 'asc' : direction})}\n            >\n              <p>{option.name}</p>\n              <DropdownIcon fill=\"#FC16F4\" width={16} className={styles[direction]} />\n            </div>\n          )\n        })}\n      </div>\n    </div>\n  )\n}","import { AavegotchiObject } from \"types\";\nimport { ChevronUp, ChevronDown, click } from \"assets\";\nimport { playSound } from \"helpers/hooks/useSound\";\nimport globalStyles from \"theme/globalStyles.module.css\";\nimport { useEffect, useState, useCallback } from \"react\";\nimport gotchiLoading from \"assets/gifs/loading.gif\";\nimport useWindowWidth from \"helpers/hooks/windowSize\";\nimport styles from \"./styles.module.css\";\nimport { GotchiSVG } from \"components/GotchiSVG\";\nimport { SearchToggle } from \"components/SearchToggle\";\nimport { SortToggle, Sort } from \"components/SortToggle\";\n\nconst sortOptions = [\n  {\n    name: \"BRS\",\n    value: \"withSetsRarityScore\",\n  },\n  {\n    name: \"TokenId\",\n    value: \"gotchiId\",\n  },\n  {\n    name: \"Name\",\n    value: \"name\",\n  },\n];\n\ninterface Props {\n  /**\n   * Array of gotchis to select from\n   */\n  gotchis?: Array<AavegotchiObject>;\n  /**\n   * Gotchi to initially select\n   */\n  initialGotchiId?: string;\n  /**\n   * Maximum gotchis visible in selector per scroll\n   */\n  maxVisible?: number;\n  /**\n   * Callback function that triggers on gotchi select\n   * @param {number} gotchiIndex - Aavegotchi index selected\n   */\n  selectGotchi: (gotchiId: string) => void;\n}\n\nexport const GotchiSelector = ({\n  gotchis,\n  selectGotchi,\n  initialGotchiId,\n  maxVisible = 3,\n}: Props) => {\n  const [selected, setSelected] = useState<string>();\n  const [currentIteration, setCurrentIteration] = useState(0);\n  const [initGotchis, setInitGotchis] = useState<Array<AavegotchiObject>>();\n  const [displayedGotchis, setDisplayedGotchis] =\n    useState<Array<AavegotchiObject>>();\n  /**\n   * Maximum amount of times you can scroll down\n   */\n  const [maxIterations, setMaxIterations] = useState(\n    gotchis\n      ? gotchis.length - maxVisible < 0\n        ? 0\n        : gotchis.length - maxVisible\n      : 0\n  );\n  const [searchInput, setSearchInput] = useState<string>(\"\");\n  const [sort, setSort] = useState<Sort>({\n    val: \"withSetsRarityScore\",\n    dir: \"desc\",\n  });\n  const [activeToggle, setActiveToggle] = useState<\"search\" | \"sort\" | undefined>();\n\n  const width = useWindowWidth();\n  const isMobile = width < 768;\n\n  const handleSelect = useCallback(\n    (id: string) => {\n      if (id === selected) return;\n\n      setSelected(id);\n      selectGotchi(id);\n    },\n    [gotchis, selectGotchi, selected]\n  );\n\n  const handleScroll = (i: number) => {\n    const nextIteration = currentIteration + i;\n    if (nextIteration > maxIterations || nextIteration < 0) return;\n\n    playSound(click);\n    setCurrentIteration(nextIteration);\n  };\n\n  const isSameGotchis = (\n    newGotchis: Array<AavegotchiObject>,\n    prevGotchis?: Array<AavegotchiObject>\n  ) => {\n    if (!prevGotchis) return false;\n    return !newGotchis.find((gotchi, i) => gotchi.id !== prevGotchis[i].id);\n  };\n\n  const compareFunction = (\n    a: AavegotchiObject,\n    b: AavegotchiObject,\n    options: Sort\n  ) => {\n    const { val, dir } = options;\n\n    switch (val) {\n      case \"withSetsRarityScore\":\n        return (\n          (dir === \"asc\" ? 1 : -1) *\n          (a.withSetsRarityScore - b.withSetsRarityScore)\n        );\n      case \"name\":\n        return (dir === \"asc\" ? 1 : -1) * (a.name < b.name ? -1 : 1);\n      case \"gotchiId\":\n        return (dir === \"asc\" ? 1 : -1) * (a.id < b.id ? -1 : 1);\n      default:\n        return 0;\n    }\n  };\n\n  // Handle search & sort\n  useEffect(() => {\n    if (initGotchis && initGotchis?.length > 0) {\n      const gotchis = [...initGotchis];\n      const searchMatches = gotchis.filter(\n        (gotchi) =>\n          gotchi.id.includes(searchInput) ||\n          gotchi.name.toLowerCase().includes(searchInput.toLowerCase())\n      );\n      const sortedMatches = searchMatches.sort((a, b) =>\n        compareFunction(a, b, sort)\n      );\n      setCurrentIteration(0);\n      setMaxIterations(\n        searchMatches.length - maxVisible < 0\n          ? 0\n          : searchMatches.length - maxVisible\n      );\n      setDisplayedGotchis(sortedMatches);\n    }\n  }, [searchInput, initGotchis, sort, maxVisible]);\n\n  useEffect(() => {\n    if (gotchis) {\n      if (isSameGotchis(gotchis, initGotchis)) return;\n      setInitGotchis(gotchis);\n      handleSelect(initialGotchiId || gotchis[0].id);\n    }\n  }, [gotchis, initialGotchiId, handleSelect]);\n\n  return (\n    <div className={styles.gotchiSelector}>\n      <div className={styles.filterOptions}>\n        <SearchToggle\n          onToggle={() => activeToggle !== \"search\" ? setActiveToggle(\"search\") :  setActiveToggle(undefined)}\n          activeOverride={isMobile ? activeToggle === \"search\" : undefined}\n          placeholder=\"Token ID or Name\"\n          onChange={setSearchInput}\n        />\n        <SortToggle\n          onToggle={() => activeToggle !== \"sort\" ? setActiveToggle(\"sort\") :  setActiveToggle(undefined)}\n          activeOverride={isMobile ? activeToggle === \"sort\" : undefined}\n          options={sortOptions}\n          onSelect={setSort} selected={sort}\n        />\n      </div>\n      <div className={styles.selectorContainer}>\n        <ChevronUp\n          width={24}\n          className={`${styles.chevron} ${styles.up} ${\n            currentIteration === 0 ? styles.disabled : styles.enabled\n          }`}\n          onClick={() => handleScroll(-1)}\n        />\n        <div\n          className={styles.selectorWrapper}\n          style={\n            isMobile\n              ? { width: `${maxVisible * 7.2 + 1.6}rem` }\n              : { height: `${maxVisible * 8.8}rem` }\n          }\n        >\n          <div\n            className={styles.selector}\n            style={\n              isMobile\n                ? { transform: `translateX(-${currentIteration * 8}rem)` }\n                : { transform: `translateY(-${currentIteration * 9.6}rem)` }\n            }\n          >\n            {gotchis === undefined\n              ? new Array(3).fill(\"\").map((_, i) => (\n                  <div className={styles.loadingContainer} key={i}>\n                    <img src={gotchiLoading} alt={`Loading gotchi ${i}`} />\n                  </div>\n                ))\n              : displayedGotchis?.map((gotchi, i) => {\n                  const isSelected = selected === gotchi.id;\n                  const loadIn = i < maxVisible + currentIteration;\n\n                  return (\n                    <div\n                      className={`${styles.gotchiContainer} ${\n                        isSelected\n                          ? `${styles.selected} ${globalStyles.glow}`\n                          : \"\"\n                      }`}\n                      key={i}\n                      onClick={() => {\n                        playSound(click);\n                        handleSelect(gotchi.id);\n                      }}\n                    >\n                      <GotchiSVG tokenId={gotchi.id} lazyloadIn={loadIn} />\n                    </div>\n                  );\n                })}\n          </div>\n        </div>\n        <ChevronDown\n          width={24}\n          className={`${styles.chevron} ${styles.down} ${\n            currentIteration === maxIterations\n              ? styles.disabled\n              : styles.enabled\n          }`}\n          onClick={() => handleScroll(1)}\n        />\n      </div>\n    </div>\n  );\n};\n","import { useState } from 'react';\nimport { playSound } from 'helpers/hooks/useSound';\nimport styles from './styles.module.css';\n\ninterface Props {\n  onClick: () => void,\n}\n\nexport const Hamburger = (props: Props) => {\n  const [open, setOpen] = useState(false);\n\n  const handleClick = () => {\n    playSound('click');\n    setOpen(!open);\n    props.onClick();\n  };\n\n  return (\n    <div\n      onClick={() => handleClick()}\n      className={`${styles.hamburgerWrapper} ${open ? styles.open : ''}`}\n    >\n      <span className={styles.stroke} />\n      <span className={styles.stroke} />\n      <span className={styles.stroke} />\n      <span className={styles.stroke} />\n    </div>\n  );\n};\n","export const smartTrim = (string: string, maxLength: number) => {\n  if (maxLength < 1) return string;\n  if (string.length <= maxLength) return string;\n  if (maxLength === 1) return `${string.substring(0, 1)}...`;\n\n  const midpoint = Math.ceil(string.length / 2);\n  const toremove = string.length - maxLength;\n  const lstrip = Math.ceil(toremove / 2);\n  const rstrip = toremove - lstrip;\n  return `${string.substring(0, midpoint - lstrip)}...${string.substring(midpoint + rstrip)}`;\n};\n","import { useState } from 'react';\nimport globalStyles from 'theme/globalStyles.module.css';\nimport { NavLink } from 'react-router-dom';\nimport { useWeb3, setNetworkDetails } from 'web3/context';\nimport { smartTrim } from 'helpers/functions';\nimport { networkIdToName } from 'helpers/vars';\nimport Jazzicon, { jsNumberForAddress } from 'react-jazzicon';\nimport { Hamburger, SideTray } from 'components';\nimport { playSound } from 'helpers/hooks/useSound';\nimport styles from './styles.module.css';\nimport { Web3Provider } from '@ethersproject/providers';\n\nconst WalletButton = () => {\n  const { state: { address, networkId, loading, provider }, dispatch } = useWeb3();\n\n  const handleWalletClick = async (w3Provider?: Web3Provider) => {\n    if (w3Provider) {\n      playSound('click');\n      dispatch({ type: \"START_ASYNC\" });\n      await window.ethereum.request({ method: 'eth_requestAccounts' });\n      setNetworkDetails(dispatch, w3Provider);\n    }\n  };\n\n  return (\n    <button className={styles.walletContainer} onClick={() => handleWalletClick(provider)} disabled={!!address || loading}>\n      {loading ? \"Loading...\" : address  ? (\n          <div className={styles.walletAddress}>\n            <Jazzicon diameter={24} seed={jsNumberForAddress(address)} />\n            <div className={styles.connectedDetails}>\n              <p>{networkId ? networkIdToName[networkId] : ''}</p>\n              <p>\n                {smartTrim(address, 8)}\n              </p>\n            </div>\n          </div>\n        )\n        : 'Connect'}\n    </button>\n  );\n};\n\nexport const Header = () => {\n  const [menuOpen, setMenuOpen] = useState(false);\n\n  return (\n    <header className={styles.header}>\n      <nav className={`${globalStyles.container} ${styles.desktopHeaderContent}`}>\n        <ul className={styles.navContainer}>\n          <NavLink\n            onClick={() => playSound('click')}\n            to=\"/\"\n            className={styles.navLink}\n            activeClassName={styles.activeNavLink}\n            isActive={(_, location) => {\n              if (!location) return false;\n              const { pathname } = location;\n              return pathname === '/';\n            }}\n          >\n            Game\n          </NavLink>\n          <NavLink\n            onClick={() => playSound('click')}\n            to=\"/leaderboard\"\n            className={styles.navLink}\n            activeClassName={styles.activeNavLink}\n          >\n            Leaderboard\n          </NavLink>\n          <NavLink\n            onClick={() => playSound('click')}\n            to=\"/settings\"\n            className={styles.navLink}\n            activeClassName={styles.activeNavLink}\n          >\n            Settings\n          </NavLink>\n        </ul>\n        <WalletButton />\n      </nav>\n      <div className={styles.mobileHeaderContent}>\n        <Hamburger onClick={() => setMenuOpen((prevState) => !prevState)} />\n        <SideTray open={menuOpen}>\n          <nav>\n            <NavLink\n              onClick={() => playSound('click')}\n              to=\"/\"\n              className={styles.navLink}\n              activeClassName={styles.activeNavLink}\n              isActive={(_, location) => {\n                if (!location) return false;\n                const { pathname } = location;\n                return pathname === '/';\n              }}\n            >\n              Game\n            </NavLink>\n            <NavLink\n              onClick={() => playSound('click')}\n              to=\"/leaderboard\"\n              className={styles.navLink}\n              activeClassName={styles.activeNavLink}\n            >\n              Leaderboard\n            </NavLink>\n            <NavLink\n              onClick={() => playSound('click')}\n              to=\"/settings\"\n              className={styles.navLink}\n              activeClassName={styles.activeNavLink}\n            >\n              Settings\n            </NavLink>\n            <WalletButton />\n          </nav>\n        </SideTray>\n      </div>\n    </header>\n  );\n};\n","import { ErrorModal, Header } from 'components';\nimport { useEffect } from 'react';\nimport { useWeb3, setProvider, setNetworkDetails } from 'web3/context';\nimport { Web3Provider } from \"@ethersproject/providers\";\nimport styles from './styles.module.css';\n\ninterface Props {\n\tchildren: React.ReactNode;\n}\n\nexport const Layout = ({ children }: Props) => {\n\tconst { state: { error, provider }, dispatch } = useWeb3();\n\n\tconst handleCloseErrorModal = () => {\n\t\tdispatch({\n\t\t\ttype: \"SET_ERROR\",\n\t\t\terror: undefined,\n\t\t})\n\t};\n\n\tconst isMetaMaskConnected = async (w3Provider: Web3Provider) => {\n\t\tconst accounts = await w3Provider.listAccounts();\n\t\treturn accounts.length > 0;\n\t}\n\n\tconst handleConnection = async (eth: any) => {\n\t\ttry {\n\t\t\tconst w3Provider = await setProvider(dispatch, eth);\n\t\t\tif (!w3Provider) throw \"Provider undefined\";\n\n\t\t\tconst isConnected = await isMetaMaskConnected(w3Provider)\n\t\t\tif (isConnected) {\n\t\t\t\tsetNetworkDetails(dispatch, w3Provider);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.error(err)\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tif (window.ethereum && !process.env.REACT_APP_OFFCHAIN) {\n\t\t\tif (!provider) {\n\t\t\t\thandleConnection(window.ethereum);\n\t\t\t}\n\t\t\twindow.ethereum.on('accountsChanged', (accounts: Array<string>) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"SET_ADDRESS\",\n\t\t\t\t\taddress: accounts[0]\n\t\t\t\t})\n\t\t\t})\n\n\t\t\twindow.ethereum.on('chainChanged', (chainId: string) => {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"SET_NETWORK_ID\",\n\t\t\t\t\tnetworkId: Number(chainId)\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\t}, [])\n\n\treturn (\n\t\t<div className={styles.container}>\n\t\t\t{error && <ErrorModal error={error} onHandleClose={handleCloseErrorModal} />}\n\t\t\t<Header />\n\t\t\t{children}\n\t\t</div>\n\t)\n};\n","import { useState, useEffect } from \"react\";\nimport { HighScore } from \"types\";\nimport { playSound } from \"helpers/hooks/useSound\";\nimport styles from \"./styles.module.css\";\n\ninterface Props {\n  highscores?: Array<HighScore>;\n  ownedGotchis?: Array<string>;\n  competition?: {\n    endDate: Date;\n    rewards: (position: number, score?: number) => React.ReactNode;\n  };\n}\n\ninterface DisplayedScore extends HighScore {\n  position: number;\n  reward?: React.ReactNode;\n}\n\nexport const Leaderboard = ({\n  highscores,\n  ownedGotchis,\n  competition,\n}: Props) => {\n  const [currentPage, setCurrentPage] = useState(0);\n  const [onlyMine, setOnlyMine] = useState(false);\n  const [sortedScores, setSortedScores] = useState<Array<DisplayedScore>>([]);\n  const [displayedScores, setDisplayedScores] = useState<Array<DisplayedScore>>(\n    []\n  );\n  const [timer, setTimer] = useState<string>();\n\n  const pageTotal = 50;\n\n  useEffect(() => {\n    if (onlyMine && ownedGotchis) {\n      setCurrentPage(0);\n      const scores = [...sortedScores].filter((score) =>\n        ownedGotchis.includes(score.tokenId)\n      );\n      setDisplayedScores(scores);\n    } else {\n      setDisplayedScores(sortedScores);\n    }\n  }, [onlyMine, sortedScores, ownedGotchis]);\n\n  useEffect(() => {\n    if (highscores) {\n      const hs = highscores.map((score, i) => {\n        const position = i + 1;\n        return {\n          ...score,\n          position,\n          reward: competition\n            ? competition.rewards(position, score.score)\n            : undefined,\n        };\n      });\n      setSortedScores(hs);\n    }\n\n    if (competition) {\n      const countdown = setInterval(() => {\n        const now = new Date().getTime();\n        const timeUntil = competition.endDate.getTime() - now;\n\n        const days = Math.floor(timeUntil / (1000 * 60 * 60 * 24));\n        const hours = Math.floor(\n          (timeUntil % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)\n        );\n        const minutes = Math.floor(\n          (timeUntil % (1000 * 60 * 60)) / (1000 * 60)\n        );\n        const seconds = Math.floor((timeUntil % (1000 * 60)) / 1000);\n\n        if (days > 0) {\n          setTimer(`${days}d ${hours}h`);\n        } else if (hours > 0) {\n          setTimer(`${hours}h ${minutes}m`);\n        } else if (timeUntil > 0) {\n          setTimer(`${minutes}m ${seconds}s`);\n        } else {\n          setTimer(`FINISHED`);\n        }\n      });\n\n      return () => clearInterval(countdown);\n    }\n  }, [highscores]);\n\n  return (\n    <div className={styles.leaderboard}>\n      <div className={styles.leaderboardOptions}>\n        {competition && (\n          <h1 className={styles.endDate}>\n            <span>Competition Ends:</span> {timer}\n          </h1>\n        )}\n        {ownedGotchis && ownedGotchis.length > 0 && (\n          <button\n            className={styles.toggle}\n            onClick={() => {\n              playSound(\"click\");\n              setOnlyMine((prevState) => !prevState);\n            }}\n          >\n            {onlyMine ? \"View all\" : \"Only mine\"}\n          </button>\n        )}\n      </div>\n      <div\n        className={`${styles.row} ${styles.headerRow}`}\n        style={{ gridTemplateColumns: `repeat(${competition ? 3 : 2}, 1fr)` }}\n      >\n        <div className={styles.cell}>Aavegotchi</div>\n        <div className={styles.cell}>Score</div>\n        {competition && <div className={styles.cell}>Rewards</div>}\n      </div>\n      {displayedScores\n        ?.slice(currentPage * pageTotal, currentPage * pageTotal + pageTotal)\n        .map((item) => (\n          <div\n            className={`\n              ${styles.row}\n              ${ownedGotchis?.includes(item.tokenId) ? styles.owned : \"\"}\n            `}\n            style={{\n              gridTemplateColumns: `repeat(${competition ? 3 : 2}, 1fr)`,\n            }}\n            key={item.tokenId}\n          >\n            <div className={styles.cell}>\n              {item.position}. {item.name} [{item.tokenId}]\n            </div>\n            <div className={styles.cell}>{item.score}</div>\n            {competition && <div className={styles.cell}>{item.reward}</div>}\n          </div>\n        ))}\n      {displayedScores.length > pageTotal && (\n        <div className={styles.pageSelector}>\n          {Array(Math.ceil(displayedScores.length / pageTotal))\n            .fill(null)\n            .map((_, i) => (\n              <div\n                key={i}\n                className={`${styles.selector} ${\n                  i === currentPage ? `${styles.selected}` : \"\"\n                }`}\n                onClick={() => {\n                  playSound(\"click\");\n                  setCurrentPage(i);\n                }}\n              >\n                {i + 1}\n              </div>\n            ))}\n        </div>\n      )}\n    </div>\n  );\n};\n","import React, { useEffect, useRef } from \"react\";\nimport { createPortal } from \"react-dom\";\n\nexport const Portal: React.FC<unknown> = ({ children }) => {\n  const el = useRef(document.createElement(\"div\"));\n\n  useEffect(() => {\n   const portalRoot = document.querySelector(\"#my-portal\") as HTMLElement;\n\n    const current = el.current;\n    portalRoot.appendChild(current);\n    return () => void portalRoot.removeChild(current);\n  }, []);\n\n  return createPortal(children, el.current);\n};\n","import styles from './styles.module.css';\n\ninterface Props {\n  children: React.ReactNode,\n  open: boolean,\n}\n\nexport const SideTray = ({ children, open }: Props) => (\n  <div className={`${styles.container} ${open ? styles.open : ''}`}>\n    {children}\n  </div>\n);\n","import * as Phaser from 'phaser';\n\nexport const getGameWidth = (scene: Phaser.Scene): number => scene.game.scale.width;\n\nexport const getGameHeight = (scene: Phaser.Scene): number => scene.game.scale.height;\n\n/**\n * Get a fixed width/height size relative to the games dimensions\n * @param {number} size - Size of element\n * @param {scene} scene - Current scene\n * @returns {number} Number representing the fixed size relative to the games dimensions\n */\nexport const getRelative = (size: number, scene: Phaser.Scene): number => getGameHeight(scene) * size / 1080;\n","export interface Asset {\n\tkey: string;\n\tsrc: string;\n\ttype: 'IMAGE' | 'SVG' | 'SPRITESHEET' | 'AUDIO' | 'TILEMAP_TILES' | \"TILEMAP_MAP\" | \"JSON\" | \"ATLAS\";\n\tdata?: {\n\t\tframeWidth?: number;\n\t\tframeHeight?: number;\n\t};\n\tatlasJson?: string;\n}\n\nexport interface SpritesheetAsset extends Asset {\n\ttype: 'SPRITESHEET';\n\tdata: {\n\t\tframeWidth: number;\n\t\tframeHeight: number;\n\t};\n}\n\nexport const BG = 'bg';\nexport const FULLSCREEN = 'fullscreen';\nexport const LEFT_CHEVRON = 'left_chevron';\nexport const CLICK = 'click';\nexport const BG_SCRUBBED = 'bg_scrubbed';\nexport const AAVEGOTCHIHAND = 'aavegotchiHand';\nexport const ARROW_RED = 'arrow_red';\nexport const ARROW_PURPLE = 'arrow_purple';\nexport const SHAPES = 'shapes';\nexport const PORTAL = 'portal';\nexport const SPIN_COIN = 'spinCoin_atlas';\nexport const PINBALL = 'pinball';\nexport const LBH_BLOCKER = 'leftBlackHole_blocker';\nexport const PADDLE = 'paddle';\nexport const WALL_BUMPER_EDGE = 'wallBumper_l_edge';\nexport const WALL_BUMPER_TUBE = 'wallBumper_l_tube';\nexport const TIMER = 'timer';\nexport const PASS_THROUGH_LIGHTS = 'passThroughLights';\nexport const MULTIPLIER_ACTIVATED = 'multiplier_activated';\nexport const TUBE_BG_COLOR = 'tube_bgColor';\nexport const TUBE_OUTLINE = 'tube_outline';\nexport const RED_RING = 'redRing';\nexport const PLINKO_BORDER = 'plinko_border';\nexport const PLINKO_UNIVERSE_BG = 'plinko_universeBG';\nexport const PLINKO_TUBES = 'plinko_tubes';\nexport const PLINKO_TUBES_AND_GRID_BG = 'plinko_tubesAndGridBG';\nexport const GHST = 'ghst';\nexport const SPIN_COIN_2 = 'spin_coin_2';\nexport const FIRE = 'fire';\nexport const BG_MUSIC = 'bgMusic';\nexport const K_POINTS_RED_PLINKO = '1000 pts red plinko';\nexport const MARIO_PIPE_SOUND = 'Mario Pipe Sounds';\nexport const SLINGSHOT_SOUND = 'Slingshot Sound';\nexport const BALL_CURVING_AROUND_AFTER_RELEASE = 'Ball curving around after release';\nexport const BALL_HITTING_PLAIN_WALL = 'ball hitting plain wall';\nexport const DOUBLE_POINTS_SOUND = 'double points sound';\nexport const ETH_COIN = 'eth coin';\nexport const GHST_COIN = 'GHST coin';\nexport const PLINKO_OST = 'PLINKO OST';\nexport const TRIPLE_MULTIPLIER = 'triple multiplier';\nexport const WALL_BUMPERS = 'wall bumpers';\nexport const PORTAL_SOUND = 'portal sound';\nexport const LOOP_RE_ENTRY_BLOCKER = 'LOOP_RE_ENTRY_BLOCKER';\nexport const DIAMOND = 'DIAMOND';\nexport const PLINKO_LOSE_BALL_SOUND = 'PLINKO_LOSE_BALL_SOUND';\nexport const GAME_END_SOUND = 'GAME_END_SOUND';\nexport const TILT_SOUND = 'TILT_SOUND';\n\n// Save all in game assets in the public folder\nexport const assets: Array<Asset | SpritesheetAsset> = [\n\t{\n\t\tkey: BG,\n\t\tsrc: 'assets/images/bg.png',\n\t\ttype: 'IMAGE',\n\t},\n\t{\n\t\tkey: LEFT_CHEVRON,\n\t\tsrc: 'assets/icons/chevron_left.svg',\n\t\ttype: 'SVG',\n\t},\n\t{\n\t\tkey: CLICK,\n\t\tsrc: 'assets/sounds/click.mp3',\n\t\ttype: 'AUDIO',\n\t},\n\t{\n\t\tkey: BG_SCRUBBED,\n\t\tsrc: 'assets/images/bg_scrubbed.png',\n\t\ttype: 'ATLAS',\n\t\tatlasJson: 'assets/images/bg_scrubbed.json',\n\t},\n\t{\n\t\tkey: AAVEGOTCHIHAND,\n\t\tsrc: 'assets/images/aavegotchiHand_l_up.png',\n\t\ttype: 'IMAGE',\n\t},\n\t{\n\t\tkey: ARROW_RED,\n\t\tsrc: 'assets/images/arrow_red.png',\n\t\ttype: 'IMAGE',\n\t},\n\t{\n\t\tkey: ARROW_PURPLE,\n\t\tsrc: 'assets/images/arrow_purple.png',\n\t\ttype: 'IMAGE',\n\t},\n\t{\n\t\tkey: SHAPES,\n\t\tsrc: 'assets/json/bg_scrubbed.json',\n\t\ttype: 'JSON',\n\t},\n\t{\n\t\tkey: PORTAL,\n\t\tsrc: 'assets/images/portal_spritesheet.png',\n\t\ttype: 'SPRITESHEET',\n\t\tdata: {\n\t\t\tframeWidth: 706,\n\t\t\tframeHeight: 836\n\t\t}\n\t},\n\t{\n\t\tkey: SPIN_COIN,\n\t\tsrc: 'assets/images/spinCoin_atlas.png',\n\t\ttype: 'SPRITESHEET',\n\t\tdata: {\n\t\t\tframeWidth: 106,\n\t\t\tframeHeight: 106\n\t\t}\n\t},\n\t{\n\t\tkey: PINBALL,\n\t\tsrc: 'assets/images/pinball.png',\n\t\ttype: 'IMAGE',\n\t},\n\t{\n\t\tkey: LBH_BLOCKER,\n\t\tsrc: 'assets/images/x2_warp_wall.png',\n\t\ttype: 'IMAGE',\n\t},\n\t{\n\t\tkey: PADDLE,\n\t\tsrc: 'assets/images/paddle.png',\n\t\ttype: 'IMAGE',\n\t},\n\t{\n\t\tkey: WALL_BUMPER_EDGE,\n\t\tsrc: 'assets/images/wallBumper/wallBumper_l_edge.png',\n\t\ttype: 'IMAGE',\n\t},\n\t{\n\t\tkey: WALL_BUMPER_TUBE,\n\t\tsrc: 'assets/images/wallBumper/wallBumper_l_tube.png',\n\t\ttype: 'IMAGE',\n\t},\n\t{\n\t\tkey: TIMER,\n\t\tsrc: 'assets/images/timer.png',\n\t\ttype: 'IMAGE',\n\t},\n\t{\n\t\tkey: PASS_THROUGH_LIGHTS,\n\t\tsrc: 'assets/images/passThroughLights/passThroughLights_atlas.png',\n\t\ttype: 'ATLAS',\n\t\tatlasJson: 'assets/images/passThroughLights/passThroughLights_atlas.json',\n\t},\n\t{\n\t\tkey: MULTIPLIER_ACTIVATED,\n\t\tsrc: 'assets/images/multiplier_activated.png',\n\t\ttype: 'IMAGE',\n\t},\n\t{\n\t\tkey: TUBE_BG_COLOR,\n\t\tsrc: 'assets/images/plinko-scene/tube_bgColor.png',\n\t\ttype: 'IMAGE',\n\t},\n\t{\n\t\tkey: TUBE_OUTLINE,\n\t\tsrc: 'assets/images/plinko-scene/tube_outline.png',\n\t\ttype: 'IMAGE',\n\t},\n\t{\n\t\tkey: RED_RING,\n\t\tsrc: 'assets/images/plinko-scene/redRing.png',\n\t\ttype: 'IMAGE',\n\t},\n\t{\n\t\tkey: PLINKO_BORDER,\n\t\tsrc: 'assets/images/plinko-scene/plinko_border.png',\n\t\ttype: 'IMAGE',\n\t},\n\t{\n\t\tkey: PLINKO_UNIVERSE_BG,\n\t\tsrc: 'assets/images/plinko-scene/plinko_universeBG.png',\n\t\ttype: 'IMAGE',\n\t},\n\t{\n\t\tkey: PLINKO_TUBES,\n\t\tsrc: 'assets/images/plinko-scene/plinko_tubes.png',\n\t\ttype: 'IMAGE',\n\t},\n\t{\n\t\tkey: PLINKO_TUBES_AND_GRID_BG,\n\t\tsrc: 'assets/images/plinko-scene/plinko_tubesAndGridBG.png',\n\t\ttype: 'IMAGE',\n\t},\n\t{\n\t\tkey: GHST,\n\t\tsrc: 'assets/images/ghst_atlas.png',\n\t\ttype: 'SPRITESHEET',\n\t\tdata: {\n\t\t\tframeWidth: 231,\n\t\t\tframeHeight: 231\n\t\t}\n\t},\n\t{\n\t\tkey: SPIN_COIN_2,\n\t\tsrc: 'assets/images/spin_coin_2.png',\n\t\ttype: 'IMAGE',\n\t},\n\t{\n\t\tkey: FIRE,\n\t\tsrc: 'assets/images/Frame_13.png',\n\t\ttype: 'IMAGE',\n\t},\n\t{\n\t\tkey: BG_MUSIC,\n\t\tsrc: 'assets/sounds/Pinball soundtrack.mp3',\n\t\ttype: 'AUDIO',\n\t},\n\t{\n\t\tkey: K_POINTS_RED_PLINKO,\n\t\tsrc: 'assets/sounds/1000 pts red plinko.mp3',\n\t\ttype: 'AUDIO',\n\t},\n\t{\n\t\tkey: MARIO_PIPE_SOUND,\n\t\tsrc: 'assets/sounds/Mario Pipe Sounds.mp3',\n\t\ttype: 'AUDIO',\n\t},\n\t{\n\t\tkey: SLINGSHOT_SOUND,\n\t\tsrc: 'assets/sounds/Slingshot sound 2.mp3',\n\t\ttype: 'AUDIO',\n\t},\n\t{\n\t\tkey: BALL_CURVING_AROUND_AFTER_RELEASE,\n\t\tsrc: 'assets/sounds/Ball curving around after release.mp3',\n\t\ttype: 'AUDIO',\n\t},\n\t{\n\t\tkey: BALL_HITTING_PLAIN_WALL,\n\t\tsrc: 'assets/sounds/Ball hitting plain wall.mp3',\n\t\ttype: 'AUDIO',\n\t},\n\t{\n\t\tkey: DOUBLE_POINTS_SOUND,\n\t\tsrc: 'assets/sounds/Double Points Sound.mp3',\n\t\ttype: 'AUDIO',\n\t},\n\t{\n\t\tkey: ETH_COIN,\n\t\tsrc: 'assets/sounds/ETH coin.mp3',\n\t\ttype: 'AUDIO',\n\t},\n\t{\n\t\tkey: GHST_COIN,\n\t\tsrc: 'assets/sounds/GHST coin.mp3',\n\t\ttype: 'AUDIO',\n\t},\n\t{\n\t\tkey: PLINKO_OST,\n\t\tsrc: 'assets/sounds/PLINKO OST.mp3',\n\t\ttype: 'AUDIO',\n\t},\n\t{\n\t\tkey: TRIPLE_MULTIPLIER,\n\t\tsrc: 'assets/sounds/Triple Ring Sound (Above triple ghst coin).mp3',\n\t\ttype: 'AUDIO',\n\t},\n\t{\n\t\tkey: WALL_BUMPERS,\n\t\tsrc: 'assets/sounds/Wall Bumpers (opens up double pts area).mp3',\n\t\ttype: 'AUDIO',\n\t},\n\t{\n\t\tkey: PORTAL_SOUND,\n\t\tsrc: 'assets/sounds/portal sound.mp3',\n\t\ttype: 'AUDIO',\n\t},\n\t{\n\t\tkey: LOOP_RE_ENTRY_BLOCKER,\n\t\tsrc: 'assets/images/loopReEntryBlocker.png',\n\t\ttype: 'IMAGE',\n\t},\n\t{\n\t\tkey: DIAMOND,\n\t\tsrc: 'assets/images/diamond.png',\n\t\ttype: 'IMAGE',\n\t},\n\t{\n\t\tkey: PLINKO_LOSE_BALL_SOUND,\n\t\tsrc: 'assets/sounds/Losing Ball Sound.mp3',\n\t\ttype: 'AUDIO',\n\t},\n\t{\n\t\tkey: GAME_END_SOUND,\n\t\tsrc: 'assets/sounds/GAME ending.mp3',\n\t\ttype: 'AUDIO',\n\t},\n    {\n\t\tkey: TILT_SOUND,\n\t\tsrc: 'assets/sounds/Tilt sfx.mp3',\n\t\ttype: 'AUDIO',\n\t},\n];\n","import mergeImages from 'merge-images';\nimport { convertInlineSVGToBlobURL } from 'helpers/aavegotchi';\n\nexport const convertBase64toBlobURL = (b64: string): string => {\n  const byteString = atob(b64.split(',')[1]);\n  const mimeString = b64.split(',')[0].split(':')[1].split(';')[0];\n  const ab = new ArrayBuffer(byteString.length);\n  const ia = new Uint8Array(ab);\n  for (let i = 0; i < byteString.length; i++) {\n    ia[i] = byteString.charCodeAt(i);\n  }\n\n  const blob = new Blob([ab], { type: mimeString });\n  return URL.createObjectURL(blob);\n};\n\nconst makeFirefoxCompatible = (svg: string) => {\n  const styledSvg = svg.replace(\n    '<svg xmlns=',\n    '<svg width=\"150\" height=\"150\" xmlns=',\n  );\n  return styledSvg;\n};\n\ntype SpriteMatrix = Array<Array<string>>;\n\ninterface Spritesheet {\n  src: string,\n  dimensions: {\n    width: number,\n    height: number,\n    x: number,\n    y: number,\n  }\n}\n\n/**\n * Constructs spritesheet from Aavegotchi SVGs\n * @param {SpriteMatrix} spriteMatrix - A 2D array of SVGs.\n * @returns {Promise<Spritesheet>} Promise object represents Blob URL + Dimensions of the spritesheet\n */\nexport const constructSpritesheet = async (spriteMatrix: SpriteMatrix): Promise<Spritesheet> => {\n  const gotchiWidth = 150;\n  const maxColumns = Math.max(...spriteMatrix.map(item => item.length));\n  const canvasWidth = gotchiWidth * maxColumns;\n  const canvasHeight = spriteMatrix.length * gotchiWidth;\n\n  const canvas = document.createElement('canvas');\n  canvas.width = canvasWidth;\n  canvas.height = canvasHeight;\n  const baseUrl = canvas.toDataURL();\n\n  const spriteImagesArray: Array<{ src: string, x: number, y: number }> = [];\n  spriteMatrix.forEach((row, i) => {\n    const rowArray = row.map((colItem, j) => {\n      const url = convertInlineSVGToBlobURL(makeFirefoxCompatible(colItem));\n      return (\n        { src: url, x: j * gotchiWidth, y: i * gotchiWidth }\n      )\n    })\n    spriteImagesArray.push(...rowArray);\n  })\n\n  const b64 = await mergeImages([\n    { src: baseUrl },\n    ...spriteImagesArray\n  ]);\n  return {\n    src: convertBase64toBlobURL(b64),\n    dimensions: {\n      width: canvasWidth,\n      height: canvasHeight,\n      x: maxColumns,\n      y: spriteMatrix.length,\n    }\n  };\n};\n","export const COLLISION_CATEGORIES = {\r\n\tDEFAULT: 0x001,\r\n\tBALL: 0x002,\r\n\tPADDLE: 0x004,\r\n\tATTRACTOR: 0x008,\r\n\tHINGE: 0x0010\r\n}","/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport { game_ref } from \"game/scenes\";\r\n\r\nexport function getMouseWorldPosition_phaser(mainScene: any) {\r\n\tif(mainScene && game_ref) {\r\n\t\tconst cam = mainScene.cameras.main;\r\n\t\tconst linePosX = (game_ref.input.activePointer.position.x - (window.innerWidth / 2)) / cam.zoom + cam.midPoint.x;\r\n\t\tconst linePosY = (game_ref.input.activePointer.position.y - (window.innerHeight / 2)) / cam.zoom + cam.midPoint.y;\r\n\t\r\n\t\treturn { x: linePosX, y: linePosY };\r\n\t} else {\r\n\t\tconsole.warn(\"mainScene or game_ref is undefined\");\r\n\t}\r\n}\r\n\r\nexport function getNormalizedDirectionAndAngle(x1: any, y1: any, x2: any, y2: any) {\r\n\tconst dirX = x2 - x1;\r\n\tconst dirY = y2 - y1;\r\n\r\n\tlet length = Math.sqrt(dirX * dirX + dirY * dirY);\r\n\tif(length === 0) { length = 1; }\r\n\r\n\tconst ndx = dirX / length;\t// x normalized\r\n    const ndy = dirY / length;\r\n\r\n\tconst angle = Math.atan2(ndx, ndy);\r\n\r\n\treturn { x: ndx, y: ndy, angle: angle};\r\n}\r\n\r\n// check if the inputted names (nameA & nameB) match the must be names in either order, and return the order of the matched names\r\nexport function isCompareEitherOrBodies(nameA: any, nameB: any, nameAMustBe: any, nameBMustBe: any, bodyA: any, bodyB: any) {\r\n\tif(nameA === nameAMustBe && nameB === nameBMustBe) {\r\n\t\treturn {\r\n\t\t\tisSuccess: true,\r\n\t\t\tfirstBody: bodyA,\r\n\t\t\tsecondBody: bodyB\r\n\t\t};\r\n\t}\r\n\r\n\tif(nameA === nameBMustBe && nameB === nameAMustBe) {\r\n\t\treturn {\r\n\t\t\tisSuccess: true,\r\n\t\t\tfirstBody: bodyB,\r\n\t\t\tsecondBody: bodyA\r\n\t\t};\r\n\t}\r\n\r\n\treturn {\r\n\t\tisSuccess: false\r\n\t};\r\n}\r\n\r\nexport function isAngleBetweenAngles(facingAngle_deg: any, angleOfTarget_deg: any, angleWithin_deg: any) {\r\n\tconst anglediff = (facingAngle_deg - angleOfTarget_deg + 180 + 360) % 360 - 180\r\n\r\n\tif (anglediff <= angleWithin_deg && anglediff >= -angleWithin_deg) {\r\n\t\treturn true;\r\n\t} else {\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nexport function moveSpriteToMousePosAndLog(scene: any, sprite: any, extraX: any, extraY: any) {\r\n\textraX = extraX === undefined ? 0 : extraX;\r\n\textraY = extraY === undefined ? 0 : extraY;\r\n\r\n\tconst cam = scene.cameras.main;\r\n\tsprite.x = game_ref.input.activePointer.position.x / cam.zoom + extraX;\r\n\tsprite.y = game_ref.input.activePointer.position.y / cam.zoom + extraY;\r\n\tconsole.log(sprite.x, sprite.y);\r\n}\r\n\r\nexport function pushBodyAwayFrom(bodyA: any, bodyB: any, force: any) {\r\n\tconst posA = bodyA.position;\r\n\tconst posB = bodyB.position;\r\n\r\n\tconst normDir = getNormalizedDirectionAndAngle(posB.x, posB.y, posA.x, posA.y);\r\n\r\n\tbodyA.gameObject.setVelocity(normDir.x * force, normDir.y * force);\r\n}\r\n\r\nexport function pushBodyAwayPoint(bodyA: any, point: { x: number, y: number }, force: any) {\r\n\tconst posA = bodyA.position;\r\n\r\n\tconst normDir = getNormalizedDirectionAndAngle(point.x, point.y, posA.x, posA.y);\r\n\r\n\tbodyA.gameObject.setVelocity(normDir.x * force, normDir.y * force);\r\n}","import { Component, useEffect } from \"react\";\r\nimport styles from \"./styles.module.css\";\r\n\r\n// export class StatsBar extends Component {\r\n// \trender() {\r\n// \t\treturn (\r\n// \t\t\t<div id=\"statsBar_container\" className={styles.statsBar_container}>\r\n// \t\t\t\t<div id=\"statsBar_multiplier\" className={styles.statsBar_multiplier}>0x</div>\r\n// \t\t\t\t<div id=\"statsBar_score\" className={styles.statsBar_score}>0</div>\r\n// \t\t\t</div>\r\n// \t\t)\r\n// \t}\r\n// }\r\n\r\nexport const StatsBar = () => {\r\n\treturn (\r\n\t\t<div id=\"statsBar_container\" className={styles.statsBar_container}>\r\n\t\t\t<div id=\"statsBar_multiplier\" className={styles.statsBar_multiplier}>0x</div>\r\n\t\t\t<div id=\"statsBar_score\" className={styles.statsBar_score}>0</div>\r\n\t\t</div>\r\n\t)\r\n};","import React from \"react\";\r\nimport styles from \"./style.module.css\";\r\n\r\nexport class TiltButton extends React.Component {\r\n    handleTiltButtonPress() {\r\n        console.log(\"tilt button pressed.\");\r\n\r\n        window.postMessage({ msgType: \"TILT_BUTTON\"})\r\n    }\r\n\r\n    render() {\r\n        return(\r\n            <div className={styles.tiltButtonContainer} id=\"tilt-button-container\">\r\n                <img className={styles.tiltButtonImg} onClick={this.handleTiltButtonPress} src=\"./assets/images/tiltbutton.png\"></img>\r\n                <img className={styles.tiltButtonTextImg} src=\"./assets/images/TILT.png\"></img>\r\n                <div className={styles.TILT_underLine}></div>\r\n                <img className={styles.backButtonText} src=\"./assets/images/BACK.png\"></img>\r\n            </div>\r\n        )\r\n    }\r\n}","import Phaser from \"phaser\";\nimport { useState, useEffect } from \"react\";\nimport { IonPhaser, GameInstance } from \"@ion-phaser/react\";\nimport { useWeb3 } from \"web3/context\";\nimport { Redirect } from \"react-router\";\nimport Scenes, { setGameRef } from \"./scenes\";\nimport io, { Socket } from \"socket.io-client\";\nimport { AavegotchiObject, Tuple } from \"types\";\nimport { useDiamondCall } from \"web3/actions\";\nimport { PaddlesInput_Container } from \"components\";\nimport './main.css';\nimport { StatsBar } from \"components/StatsBar\";\nimport { Debug } from \"components/Debug\";\nimport { gravityY, is_debug } from \"helpers/vars\";\nimport { TiltButton } from \"components/TiltButton/tilt-button\";\n\nexport let ballsUnlockedForPlinko = 1;\n\nconst Main = () => {\n  const {\n    state: { usersAavegotchis, selectedAavegotchiId, provider },\n  } = useWeb3();\n  const [initialised, setInitialised] = useState(true);\n  const [config, setConfig] = useState<GameInstance>();\n\n  const startGame = async (socket: Socket, selectedGotchi: AavegotchiObject) => {\n    let width = window.innerWidth;\n    let height = width / 1.778;\n\n    if (height > window.innerHeight) {\n      height = window.innerHeight;\n      width = height * 1.778;\n    }\n\n    if (!selectedGotchi.svg) {\n      try {\n        if (!provider) throw \"Not connected to web3\";\n        const svg = await useDiamondCall<Tuple<string, 4>>(provider, { name: \"getAavegotchiSideSvgs\", parameters: [selectedGotchi.id] });\n        selectedGotchi.svg = svg;\n      } catch (err) {\n        console.error(err);\n      }\n    }\n\n    // setConfig({\n    // \ttype: Phaser.AUTO,\n    // \tphysics: {\n    // \t\tdefault: \"arcade\",\n    // \t\tarcade: {\n    // \t\t\tgravity: { y: 0 },\n    // \t\t\tdebug: process.env.NODE_ENV === \"development\",\n    // \t\t},\n    // \t},\n    // \tscale: {\n    // \t\tmode: Phaser.Scale.NONE,\n    // \t\twidth,\n    // \t\theight,\n    // \t},\n    // \tscene: Scenes,\n    // \tfps: {\n    // \t\ttarget: 60,\n    // \t},\n    // \tcallbacks: {\n    // \t\tpreBoot: (game) => {\n    // \t\t\t// Makes sure the game doesnt create another game on rerender\n    // \t\t\tsetInitialised(false);\n    // \t\t\tgame.registry.merge({\n    // \t\t\t\tselectedGotchi,\n    // \t\t\t\t// socket\n    // \t\t\t});\n    // \t\t},\n    // \t},\n    // });\n\n    setConfig({\n      type: Phaser.WEBGL,\n      width: 565,\n      height: 854,\n      // pixelArt: true,\n    //   parent: \"gameCanvas\",\n    //   canvas: document.getElementById('gameCanvas') as HTMLCanvasElement,\n      scene: Scenes,\n      physics: {\n        default: 'matter',\n        matter: {\n          gravity: {\n            x: 0,\n            y: gravityY // default: 0.15\n          },\n          debug: process.env.NODE_ENV === \"development\",\n          \"plugins.attractors\": true,\n          positionIterations: 12,\n          velocityIterations: 8\n        }\n      },\n      scale: {\n        mode: Phaser.Scale.FIT,\n        parent: 'game',\n      },\n      fps: {\n        target: 60,\n      },\n      callbacks: {\n        preBoot: (game: Phaser.Game) => {\n          setGameRef(game);\n\n          // Makes sure the game doesnt create another game on rerender\n          setInitialised(false);\n          game.registry.merge({\n            selectedGotchi,\n            socket\n          });\n        },\n      },\n    });\n  }\n\n  useEffect(() => {\n    if (usersAavegotchis && selectedAavegotchiId) {\n      const urlConnectingTo = process.env.REACT_APP_SERVER_PORT || 'http://localhost:8080';\n      console.log(\"connecting to url:\", urlConnectingTo);\n\n      // Socket is called here so we can take advantage of the useEffect hook to disconnect upon leaving the game screen\n      const socket = io(urlConnectingTo);\n      console.log(\"[SOCKET-IO] socket:\", socket);\n\n      // socket io events\n      socket.io.on(\"error\", (error) => {\n        console.log(\"[SOCKET-IO] on error:\", error);\n      });\n\n      socket.on(\"connect\", () => {\n        console.log(\"[SOCKET-IO] on connect. socket.id:\", socket.id);\n      });\n\n      socket.io.on(\"reconnect\", (attempt) => {\n        console.log(\"[SOCKET-IO] on reconnect:\", attempt);\n      });\n\n      const selectedGotchi = usersAavegotchis.find(gotchi => gotchi.id === selectedAavegotchiId);\n      if (!selectedGotchi) return;\n\n      startGame(socket, selectedGotchi)\n\n      return () => {\n        socket.emit(\"handleDisconnect\");\n      };\n    }\n  }, []);\n\n  if (!usersAavegotchis) {\n    return <Redirect to=\"/\" />;\n  }\n\n  const debugUI = is_debug ? <Debug /> : null;\n\n  const gotchiVerseBGStyle: any = {\n    backgroundColor: \"#140212\",\n    width: \"100%\",\n    height: \"100%\",\n    position: \"absolute\",\n    left: \"0\",\n    top: \"0\",\n    zIndex: \"-2\",\n    backgroundSize: \"contain\",\n    backgroundImage: \"url(./assets/images/gotchiverseBG.png)\"\n  };\n\n  return (\n    <>\n      <div style={gotchiVerseBGStyle}></div>\n      {debugUI}\n      <StatsBar />\n      {/* <canvas id=\"gameCanvas\" /> */}\n      <PaddlesInput_Container />\n      <TiltButton />\n      <IonPhaser initialize={initialised} game={config} id=\"phaser-app\" />\n    </>\n  );\n};\n\nexport function increase_ballsUnlockedForPlinko() {\n  ballsUnlockedForPlinko += 1;\n}\n\nexport function reset_ballsUnlockedForPlinko() {\n  ballsUnlockedForPlinko = 1;\n}\n\nexport default Main;\n","import { game_ref } from \"../scenes\";\r\n\r\nlet ref_statsBar: any;\r\nlet ref_statsBar_multiplier: any;\r\nlet ref_scoreEl: any;\r\nconst statsBar_padding = 10;\r\n\r\nfunction setRefs() {\r\n\tref_statsBar = document.querySelector(\"#statsBar_container\");\r\n\tref_statsBar_multiplier = document.querySelector(\"#statsBar_multiplier\");\r\n\tref_scoreEl = document.querySelector(\"#statsBar_score\");\r\n}\r\n\r\nexport function setNewStatsBarContainerSize() {\r\n\tif(game_ref) {\r\n\t\tconst canvasRect = game_ref.canvas.getBoundingClientRect();\r\n\t\tconst twoTimesPadding = statsBar_padding * 2;\r\n\t\tconst extraWidth = 2;\r\n\t\r\n\t\tif(ref_statsBar) {\r\n\t\t\tref_statsBar.style.width = canvasRect.width /*- twoTimesPadding*/ + extraWidth + \"px\";\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function set_multiplierText(text: any) {\r\n\tref_statsBar_multiplier.innerHTML = \"x\" + text;\r\n}\r\n\r\nexport function set_scoreText(text: any) {\r\n\tref_scoreEl.innerHTML = text;\r\n}\r\n\r\nexport function statsBar_start() {\r\n\tsetRefs();\r\n\tsetNewStatsBarContainerSize();\r\n}","import { set_multiplierText, set_scoreText } from \"./statsBar\";\r\n\r\nlet current_multiplier = 0;\r\nlet finalMultiplier = 0;\r\nlet isLeftBlackHoleOpen = false;\r\n\r\nexport let currentScore = 0;\r\n\r\nfunction updateFinalMultiplier() {\r\n\tfinalMultiplier = current_multiplier;\r\n\tif(isLeftBlackHoleOpen) {\r\n\t\tfinalMultiplier += 2;\r\n\t}\r\n\r\n\tset_multiplierText(finalMultiplier);\r\n}\r\n\r\nexport function set_isLeftBlackHoleOpen(state: any) {\r\n\tisLeftBlackHoleOpen = state;\r\n\tupdateFinalMultiplier();\r\n}\r\n\r\nexport function increaseScore(points: any) {\r\n\tconst multiplier = finalMultiplier === 0 ? 1 : finalMultiplier; // if multiplier is 0, then make it 1, or else points is * 0\r\n\tcurrentScore += points * multiplier;\r\n\r\n\tset_scoreText(currentScore);\r\n}\r\n\r\nexport function modifyMultiplier(amount: any) {\r\n    const multiplierBEFORE = current_multiplier;\r\n\tcurrent_multiplier += amount;\r\n\r\n    console.log(`Modifying multiplier. [before: ${multiplierBEFORE}] [amount: ${amount}] [after: ${current_multiplier}]`);\r\n\r\n\tupdateFinalMultiplier();\r\n}\r\n\r\nexport function resetScore() {\r\n\tcurrentScore = 0;\r\n\tcurrent_multiplier = 0;\r\n\r\n\tset_scoreText(currentScore);\r\n\tupdateFinalMultiplier();\r\n}","import { MULTIPLIER_ACTIVATED } from \"../assets\";\r\nimport { game_ref } from \"../scenes\";\r\nimport { pinballScene } from \"../scenes/pinball/pinball-scene\";\r\nimport { modifyMultiplier } from \"./stats\";\r\n\r\nlet image;\r\nconst multipliers: any = {\r\n\tleft: undefined,\r\n\tmiddle: undefined,\r\n\tright: undefined\r\n}\r\n\r\nexport function multipliers_start() {\r\n\tmultipliers.left = pinballScene.add.image(196.58136708825936, 209.50097371894657, MULTIPLIER_ACTIVATED).setVisible(false);\r\n\tmultipliers.middle = pinballScene.add.image(269.5537364845706, 170.6609055575688, MULTIPLIER_ACTIVATED).setVisible(false);\r\n\tmultipliers.right = pinballScene.add.image(342.5261058808819, 174.19182084496677, MULTIPLIER_ACTIVATED).setVisible(false);\r\n}\r\n\r\nexport function multipliers_update() {\r\n\tconst cam = pinballScene.cameras.main;\r\n\tconst mousePos_x = game_ref.input.activePointer.position.x / cam.zoom;\r\n\tconst mousePos_y = game_ref.input.activePointer.position.y / cam.zoom;\r\n\r\n\t// multipliers[\"right\"].x = mousePos_x;\r\n\t// multipliers[\"right\"].y = mousePos_y;\r\n\t// console.log(mousePos_x, mousePos_y);\r\n}\r\n\r\nexport function toggleMultiplier(name: any) {\r\n\tconst isVisible = multipliers[name].visible;\r\n\r\n\t// if it was visible, then it will be invisible, so remove 3 multipliers\r\n\tif(isVisible) {\r\n\t\tmodifyMultiplier(-3);\r\n\t} else {\r\n\t\tmodifyMultiplier(3);\r\n\t}\r\n\r\n\tmultipliers[name].visible = !isVisible;\r\n}","/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport { ARROW_PURPLE, ARROW_RED, TIMER } from \"game/assets\";\r\nimport { increase_ballsUnlockedForPlinko } from \"game/main\";\r\nimport { game_ref } from \"..\";\r\nimport { getNormalizedDirectionAndAngle, isAngleBetweenAngles } from \"../../helpers/utils\";\r\nimport { pinballScene } from \"./pinball-scene\";\r\n\r\nexport let tripleArrows_left: any;\r\nexport let tripleArrows_right: any;\r\n\r\nlet current_singleArrowIndex = 0;\r\nexport const singleArrows: any = {};\r\n\r\nclass TripleArrows {\r\n\tprivate arrowsContainer: any;\r\n\tprivate arrowSprites: any = [];\r\n\tprivate arrowSpritesTaken: any = 0;\r\n\tprivate angleOfArrows: any;\r\n\tprivate angleWithinNeeded: any;\r\n\tprivate xPos: any;\r\n\tprivate yPos: any;\r\n\tprivate angle: any;\r\n\r\n\r\n\tconstructor(options: any) {\r\n\t\tthis.angleOfArrows = options.angleOfArrows;\r\n\t\tthis.angleWithinNeeded = options.angleWithinNeeded;\r\n\r\n\t\tthis.xPos = options.xPos;\r\n\t\tthis.yPos = options.yPos;\r\n\t\tthis.angle = options.angle;\r\n\r\n\t\tthis.tripleArrows_create();\r\n\t}\r\n\r\n\ttripleArrows_create() {\r\n\t\tconst arrowHeight = 26;\r\n\r\n\t\tthis.arrowsContainer = pinballScene.add.container(this.xPos, this.yPos)\r\n\t\t\t.setDepth(2)\r\n\t\t\t.setScale(1.5)\r\n\t\t\t.setAngle(this.angle);\r\n\r\n\t\tfor (let i = 0; i < 3; i++) {\r\n\t\t\tconst arrow = pinballScene.add.image(0, arrowHeight * i, ARROW_RED);\r\n\t\t\tarrow.texture.setFilter(Phaser.Textures.FilterMode.NEAREST);\r\n\t\t\t\r\n\t\t\tthis.arrowsContainer.add(arrow);\r\n\t\t\tthis.arrowSprites.push(arrow);\r\n\t\t}\r\n\t}\r\n\r\n\ttripleArrows_update() {\r\n\t\t// this.tripleArrows_moveToMouse();\r\n\t}\r\n\r\n\ttripleArrows_moveToMouse() {\r\n\t\tconst cam = pinballScene.cameras.main;\r\n\t\tthis.arrowsContainer.x = game_ref.input.activePointer.position.x / cam.zoom;\r\n\t\tthis.arrowsContainer.y = game_ref.input.activePointer.position.y / cam.zoom + 50;\r\n\t\tconsole.log(this.arrowsContainer.x, this.arrowsContainer.y);\r\n\t}\r\n\r\n\ttripleArrows_onBallHit(ball: any) {\r\n\t\tif(!this.tripleArrows_isBallWithinAngles(ball)) return;\r\n\r\n\t\t// only decrement if all the arrows haven't been taken\r\n\t\tif(this.arrowSpritesTaken < this.arrowSprites.length) {\r\n\t\t\tincrease_ballsUnlockedForPlinko();\r\n\r\n\t\t\tthis.arrowSpritesTaken += 1;\r\n\t\t\tconst asti = this.tripleArrows_getArrowSpriteTakenIndex();\r\n\t\r\n\t\t\tthis.arrowSprites[asti].setTexture(ARROW_PURPLE);\r\n\t\t\tthis.tripleArrows_addTimerSpriteToArrow();\r\n\t\t}\r\n\t}\r\n\r\n\ttripleArrows_isBallWithinAngles(ball: any) {\r\n\t\tconst normDirAndAngle = getNormalizedDirectionAndAngle(\r\n\t\t\tball.body.position.x,\r\n\t\t\tball.body.position.y,\r\n\t\t\tball.body.position.x + ball.body.velocity.x,\r\n\t\t\tball.body.position.y + ball.body.velocity.y\r\n\t\t);\r\n\t\tconst angle_deg = Phaser.Math.RadToDeg(normDirAndAngle.angle);\r\n\t\tconst isWithin = isAngleBetweenAngles(angle_deg, this.angleOfArrows, this.angleWithinNeeded);\r\n\r\n\t\treturn isWithin;\r\n\t}\r\n\r\n\ttripleArrows_getArrowSpriteTakenIndex() {\r\n\t\treturn this.arrowSprites.length - this.arrowSpritesTaken;\r\n\t}\r\n\r\n\ttripleArrows_addTimerSpriteToArrow() {\r\n\t\tconst asti = this.tripleArrows_getArrowSpriteTakenIndex();\r\n\t\tconst timerSprite = pinballScene.add.image(this.arrowSprites[asti].x, this.arrowSprites[asti].y + 3, \"timer\")\r\n\t\t\t.setAngle(-this.angle)\r\n\t\t\t.setScale(0.75);\r\n\t\ttimerSprite.texture.setFilter(Phaser.Textures.FilterMode.NEAREST);\r\n\t\tthis.arrowsContainer.add(timerSprite);\r\n\t}\r\n}\r\n\r\nclass SingleArrow {\r\n\tprivate arrowSprite: any = false;\r\n\tprivate isTaken: any;\r\n\tprivate angleOfArrow: any;\r\n\tprivate angleWithinNeeded: any;\r\n\tprivate timerExtraPos: any;\r\n\tprivate singleArrowName: any;\r\n\tprivate xPos: any;\r\n\tprivate yPos: any;\r\n\tprivate angle: any;\r\n\r\n\tconstructor(options: any) {\r\n\t\tthis.angleOfArrow = options.angleOfArrow;\r\n\t\tthis.angleWithinNeeded = options.angleWithinNeeded;\r\n\t\tthis.timerExtraPos = options.timerExtraPos;\r\n\r\n\t\tthis.singleArrowName = \"singleArrow_\" + current_singleArrowIndex;\r\n\t\tcurrent_singleArrowIndex += 1;\r\n\r\n\t\tthis.xPos = options.xPos;\r\n\t\tthis.yPos = options.yPos;\r\n\t\tthis.angle = options.angle;\r\n\r\n\t\tthis.singleArrow_create();\r\n\r\n\t\tsingleArrows[this.singleArrowName] = this;\r\n\t}\r\n\r\n\tsingleArrow_create() {\r\n\t\t// this.arrowSprite = pinballScene.add.image(this.xPos, this.yPos, ARROW_RED)\r\n\t\t// \t.setDepth(2)\r\n\t\t// \t.setScale(1.5)\r\n\t\t// \t.setAngle(this.angle);\r\n\r\n\t\t// this.arrowSprite.texture.setFilter(Phaser.Textures.FilterMode.NEAREST);\r\n\r\n\t\tthis.arrowSprite = pinballScene.add.sprite(this.xPos, this.yPos, ARROW_RED).setDepth(2).setScale(1.5);\r\n\t\tthis.arrowSprite.MACHINEMAN1357_singleArrowName = this.singleArrowName;\r\n\t\tthis.arrowSprite.texture.setFilter(Phaser.Textures.FilterMode.NEAREST);\r\n\r\n\t\tconst object_body = pinballScene.matter.add.circle(this.xPos, this.yPos, 25, {\r\n\t\t\tisStatic: true,\r\n\t\t\tlabel: \"singleArrowSensor\",\r\n\t\t\tisSensor: true\r\n\t\t});\r\n\t\tconst arrow = pinballScene.matter.add.gameObject(this.arrowSprite, object_body)\r\n\t\t\t.setAngle(this.angle);\r\n\t}\r\n\r\n\tsingleArrow_update() {\r\n\t\t// this.tripleArrows_moveToMouse();\r\n\t}\r\n\r\n\tsingleArrow_moveToMouse() {\r\n\t\tconst cam = pinballScene.cameras.main;\r\n\t\tthis.arrowSprite.x = game_ref.input.activePointer.position.x / cam.zoom;\r\n\t\tthis.arrowSprite.y = game_ref.input.activePointer.position.y / cam.zoom + 50;\r\n\t}\r\n\r\n\tsingleArrow_onBallHit(ball: any) {\r\n\t\tif(!this.singleArrow_isBallWithinAngles(ball)) return;\r\n\t\tif(this.isTaken) return;\r\n\r\n\t\tincrease_ballsUnlockedForPlinko();\r\n\r\n\t\tthis.isTaken = true;\r\n\t\tthis.arrowSprite.setTexture(ARROW_PURPLE);\r\n\t\tthis.singleArrow_addTimerSpriteToArrow();\r\n\t}\r\n\r\n\tsingleArrow_isBallWithinAngles(ball: any) {\r\n\t\tconst normDirAndAngle = getNormalizedDirectionAndAngle(\r\n\t\t\tball.body.position.x,\r\n\t\t\tball.body.position.y,\r\n\t\t\tball.body.position.x + ball.body.velocity.x,\r\n\t\t\tball.body.position.y + ball.body.velocity.y\r\n\t\t);\r\n\t\tconst angle_deg = Phaser.Math.RadToDeg(normDirAndAngle.angle);\r\n\t\tconst isWithin = isAngleBetweenAngles(angle_deg, this.angleOfArrow, this.angleWithinNeeded);\r\n\r\n\t\treturn isWithin;\r\n\t}\r\n\r\n\tsingleArrow_addTimerSpriteToArrow() {\r\n\t\tconst timerSprite = pinballScene.add.image(this.arrowSprite.x + this.timerExtraPos.x, this.arrowSprite.y + this.timerExtraPos.y, TIMER)\r\n\t\t\t.setScale(1.15)\r\n\t\t\t.setDepth(3);\r\n\t\ttimerSprite.texture.setFilter(Phaser.Textures.FilterMode.NEAREST);\r\n\t}\r\n}\r\n\r\nexport function arrows_start() {\r\n\t// triple arrows\r\n\ttripleArrows_left = new TripleArrows({\r\n\t\txPos: 103.065,\r\n\t\tyPos: 524.32,\r\n\t\tangle: -28,\r\n\t\tangleOfArrows: -160,\r\n\t\tangleWithinNeeded: 30\r\n\t});\r\n\ttripleArrows_right = new TripleArrows({\r\n\t\txPos: 433.9,\r\n\t\tyPos: 523.14,\r\n\t\tangle: 28,\r\n\t\tangleOfArrows: 146,\r\n\t\tangleWithinNeeded: 30\r\n\t});\r\n\t\r\n\t// single arrows\r\n\t// middle\r\n\tnew SingleArrow({\r\n\t\txPos: 270,\r\n\t\tyPos: 550,\r\n\t\tangle: 0,\r\n\t\tangleOfArrow: 180,\r\n\t\tangleWithinNeeded: 30,\r\n\t\ttimerExtraPos: { x: 0, y: 5 }\r\n\t});\r\n\t// left\r\n\tnew SingleArrow({\r\n\t\txPos: 184,\r\n\t\tyPos: 493,\r\n\t\tangle: -38,\r\n\t\tangleOfArrow: -145,\r\n\t\tangleWithinNeeded: 30,\r\n\t\ttimerExtraPos: { x: 5, y: 5 }\r\n\t});\r\n\t// right\r\n\tnew SingleArrow({\r\n\t\txPos: 355,\r\n\t\tyPos: 493,\r\n\t\tangle: 38,\r\n\t\tangleOfArrow: 145,\r\n\t\tangleWithinNeeded: 30,\r\n\t\ttimerExtraPos: { x: -5, y: 5 }\r\n\t});\r\n}\r\n","import { AAVEGOTCHIHAND } from \"game/assets\";\r\nimport { game_ref } from \"..\";\r\nimport { pinballScene } from \"./pinball-scene\";\r\n\r\nexport let aavegotchiHandWave: AavegotchiHandWave;\r\n\r\nclass AavegotchiHandWave {\r\n\tprivate handImage: any;\r\n\tprivate handImage_scaleY: any = 1;\r\n\tprivate handImage_lessYPositionWhenHandIsDown: any = 2;\r\n\tprivate handImage_startPos = { x: 233.45926119908032, y: 622.6576402894877 };\r\n\r\n\tconstructor() {\r\n\t\tthis.aavegotchiHandWave_createSprite();\r\n\t\tthis.aavegotchiHandWave_createHandFlipTween();\r\n\t}\r\n\r\n\taavegotchiHandWave_update() {\r\n\t\tthis.aavegotchiHandWave_moveToMouse();\r\n\t}\r\n\r\n\taavegotchiHandWave_createSprite() {\r\n\t\tthis.handImage = pinballScene.add.image(this.handImage_startPos.x, this.handImage_startPos.y, AAVEGOTCHIHAND);\r\n\t}\r\n\r\n\taavegotchiHandWave_createHandFlipTween() {\r\n\t\tpinballScene.tweens.add({\r\n\t\t\ttargets: this.handImage,\r\n\t\t\tx: this.handImage.x,\r\n\t\t\tease: 'Power1',\r\n\t\t\tduration: 250,\r\n\t\t\tyoyo: true,\r\n\t\t\trepeat: -1,\r\n\t\t\tonYoyo: () => {\r\n\t\t\t\tthis.handImage_scaleY *= -1;\r\n\t\t\t\tthis.handImage.scaleY = this.handImage_scaleY;\r\n\r\n\t\t\t\t// move down?\r\n\t\t\t\tif(this.handImage_scaleY === -1) {\r\n\t\t\t\t\tthis.handImage.y = this.handImage.y + this.handImage_lessYPositionWhenHandIsDown;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.handImage.y = this.handImage_startPos.y;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\taavegotchiHandWave_moveToMouse() {\r\n\t\tif(!game_ref) return;\r\n\t\t\r\n\t\tconst cam = pinballScene.cameras.main;\r\n\t\tthis.handImage.x = game_ref.input.activePointer.position.x / cam.zoom;\r\n\t\tthis.handImage.y = game_ref.input.activePointer.position.y / cam.zoom + 50;\r\n\t\tconsole.log(this.handImage.x, this.handImage.y);\r\n\t}\r\n}\r\n\r\nexport function aavegotchiHandWave_start() {\r\n\taavegotchiHandWave = new AavegotchiHandWave();\r\n}\r\n","import { LBH_BLOCKER } from \"game/assets\";\r\nimport { modifyMultiplier, set_isLeftBlackHoleOpen } from \"game/unOrganized/stats\";\r\nimport { topLeftHole } from \"helpers/vars\";\r\nimport { ball, pinballScene } from \"./pinball-scene\";\r\n\r\nconst blocker_position = {\r\n\tx: 40,\r\n\ty: 160\r\n};\r\nlet blocker_go: any;\r\nlet isHoleOpen = false;\r\nlet blocker_spirte: any;\r\nlet canEnterHole = true;\r\nlet isMultiplierActive = false;\r\nexport let timer_closeLBH: Phaser.Time.TimerEvent;\r\n\r\nexport function reset() {\r\n    isHoleOpen = false;\r\n    canEnterHole = true;\r\n    isMultiplierActive = false;\r\n}\r\n\r\nfunction create_blocker_sprite() {\r\n\tblocker_spirte = pinballScene.add.image(60.69442314152116, 171.8378773200348, LBH_BLOCKER);\r\n\tblocker_spirte.setScale(1.2);\r\n}\r\n\r\nfunction openHole() {\r\n\tblocker_go.setPosition(-1000, 0);\r\n\tblocker_spirte.visible = false;\r\n}\r\n\r\nfunction closeHole() {\r\n\tisHoleOpen = false;\r\n\tblocker_go.setPosition(blocker_position.x, blocker_position.y);\r\n\tblocker_spirte.visible = true;\r\n\r\n    if(isMultiplierActive) {\r\n        console.log(\"LBH multiplier is active, modifyMultiplier(-4)\");\r\n        modifyMultiplier(-4);\r\n        isMultiplierActive = false;\r\n    }\r\n}\r\n\r\nexport function on_sideBumperHit() {\r\n    console.log(\"on_sideBumperHit(), isHoleOpen:\", isHoleOpen);\r\n\tif(!isHoleOpen) {\r\n\t\tisHoleOpen = true;\r\n\t\topenHole();\r\n\r\n\t\ttimer_closeLBH = pinballScene.time.addEvent({\r\n\t\t\tdelay: topLeftHole.staysOpenFor_ms,\r\n\t\t\tcallback: closeHole,\r\n\t\t\targs: []\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction create_blocker_collider() {\r\n\tconst verts = '16 -871 104 -880 63 -825 40 -769 19 -701';\r\n\r\n\tconst poly = pinballScene.add.polygon(blocker_position.x, blocker_position.y, verts, 0x000000, 0.0);\r\n\r\n\tblocker_go = pinballScene.matter.add.gameObject(\r\n\t\tpoly, {\r\n\t\tshape: {\r\n\t\t\ttype: 'fromVerts', verts: verts, flagInternal: true\r\n\t\t},\r\n\t\tisStatic: true\r\n\t});\r\n}\r\n\r\nfunction ballExitHole() {\r\n\tball.setStatic(false);\r\n\tball.setVelocity(0, topLeftHole.exitHoleVelocityY);\r\n\tball.alpha = 1;\r\n    if(!isMultiplierActive) {\r\n        console.log(\"LBH multiplier is NOT active, modifyMultiplier(4)\");\r\n        isMultiplierActive = true;\r\n        modifyMultiplier(4);\r\n    }\r\n\r\n    timer_closeLBH.paused = false;\r\n\r\n\tpinballScene.time.addEvent({\r\n\t\tdelay: topLeftHole.timeBeforeBallCanEnterHoleAgain_ms,\r\n\t\tcallback: () => {\r\n\t\t\tcanEnterHole = true;\r\n\t\t},\r\n\t\targs: []\r\n\t});\r\n\r\n\tpinballScene.time.addEvent({\r\n\t\tdelay: topLeftHole.doublePointsLastFor_ms,\r\n\t\tcallback: () => {\r\n\t\t\tset_isLeftBlackHoleOpen(false);\r\n\t\t},\r\n\t\targs: []\r\n\t});\r\n}\r\n\r\nfunction ballEnterHole() {\r\n\tcanEnterHole = false;\r\n\tball.setStatic(true);\r\n\tball.setPosition(62, 68);\r\n\tball.setVelocity(0, 0);\r\n\tball.alpha = 0;\r\n\r\n    timer_closeLBH.paused = true;\r\n    timer_closeLBH.elapsed -= 1000;\r\n\r\n\tpinballScene.time.addEvent({\r\n\t\tdelay: topLeftHole.timeInHole_ms,\r\n\t\tcallback: () => {\r\n\t\t\tballExitHole();\r\n\t\t},\r\n\t\targs: []\r\n\t});\r\n}\r\n\r\nexport function on_ballEnteredHole() {\r\n    console.log(\"ball touched LFB, canEnterHole?\", canEnterHole);\r\n\tif(canEnterHole) {\r\n\t\tballEnterHole();\r\n\t}\r\n}\r\n\r\nexport function leftBlackHole_start() {\r\n\tcreate_blocker_collider();\r\n\tcreate_blocker_sprite();\r\n}\r\n\r\nexport function leftBlackHole_update() {\r\n\t// moveSpriteToMousePosAndLog(pinballScene, blocker_spirte);\r\n}","/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport { PASS_THROUGH_LIGHTS } from \"game/assets\";\r\nimport { game_ref } from \"..\";\r\nimport { pinballScene } from \"./pinball-scene\";\r\n\r\nconst PTLs = [];\r\n\r\nconst scale = 0.25;\r\nconst depth = 3;\r\nconst collider_radius = 20;\r\nconst off_alpha = 0.5;\r\n\r\nconst colors = {\r\n\tgreen: 0xc0f800,\r\n\tblue: 0x57c6f6,\r\n\tpurple: 0xf300f3\r\n}\r\n\r\nclass PassThroughLight {\r\n\tprivate xPos: any;\r\n\tprivate yPos: any;\r\n\tprivate angle: any;\r\n\tprivate border: any;\r\n\tprivate bgColor: any;\r\n\tprivate container: any;\r\n\tprivate bg_sprite: any;\r\n\tprivate border_sprite: any;\r\n\tprivate isOn: any;\r\n\r\n\tconstructor(options: any) {\r\n\t\tthis.xPos = options.xPos;\r\n\t\tthis.yPos = options.yPos;\r\n\t\tthis.angle = options.angle;\r\n\t\tthis.border = options.border; // square || round || square_black\r\n\t\tthis.bgColor = options.bgColor;\r\n\r\n\t\tthis.create();\r\n\t\tthis.create_collider();\r\n\r\n\t\tPTLs.push(this);\r\n\t}\r\n\r\n\tcreate() {\r\n\t\tthis.container = pinballScene.add.container(this.xPos, this.yPos)\r\n\t\t\t.setDepth(depth);\r\n\r\n\t\tif(this.border === \"square\") {\r\n\t\t\tthis.border_sprite = pinballScene.add.image(0, 0, PASS_THROUGH_LIGHTS, \"square_border_white\");\r\n\t\t\tthis.bg_sprite = pinballScene.add.image(0, 0, PASS_THROUGH_LIGHTS, \"square_bgAndInnerShadow\");\r\n\t\t} else if(this.border === \"round\") {\r\n\t\t\tthis.border_sprite = pinballScene.add.image(0, 0, PASS_THROUGH_LIGHTS, \"rounded_border_white\");\r\n\t\t\tthis.bg_sprite = pinballScene.add.image(0, 0, PASS_THROUGH_LIGHTS, \"rounded_bgAndInnerShadow\");\r\n\t\t} else if(this.border === \"square_black\") {\r\n\t\t\tthis.border_sprite = pinballScene.add.image(0, 0, PASS_THROUGH_LIGHTS, \"square_border_black\");\r\n\t\t\tthis.bg_sprite = pinballScene.add.image(0, 0, PASS_THROUGH_LIGHTS, \"square_bgAndInnerShadow\");\r\n\t\t}\r\n\r\n\t\tthis.bg_sprite\r\n\t\t\t.setScale(scale)\r\n\t\t\t.setTint(this.bgColor)\r\n\t\t\t.setAngle(this.angle);\r\n\t\tthis.border_sprite\r\n\t\t\t.setScale(scale)\r\n\t\t\t.setAngle(this.angle);\r\n\r\n\t\tthis.container.add(this.bg_sprite);\r\n\t\tthis.container.add(this.border_sprite);\r\n\r\n\t\tthis.setLight(false);\r\n\t}\r\n\r\n\tcreate_collider() {\r\n\t\tconst visual = pinballScene.add.sprite(this.xPos, this.yPos, \"arrow_red\").setAlpha(0);\r\n\t\tvisual.MACHINEMAN1357_passThroughLight_class = this;\r\n\r\n\t\tconst object_body = pinballScene.matter.add.circle(this.xPos, this.yPos, collider_radius, {\r\n\t\t\tisStatic: true,\r\n\t\t\tlabel: \"passThroughLight_sensor\",\r\n\t\t\tisSensor: true\r\n\t\t});\r\n\t\tpinballScene.matter.add.gameObject(visual, object_body);\r\n\t}\r\n\r\n\tmoveToMouse(extraX: any, extraY: any) {\r\n\t\tconst cam = pinballScene.cameras.main;\r\n\t\tthis.container.x = game_ref.input.activePointer.position.x / cam.zoom + extraX;\r\n\t\tthis.container.y = game_ref.input.activePointer.position.y / cam.zoom + extraY;\r\n\t\tconsole.log(this.container.x, this.container.y);\r\n\t}\r\n\r\n\ttoggleLight() {\r\n\t\tthis.isOn = !this.isOn;\r\n\r\n\t\tthis.setLight(this.isOn);\r\n\t}\r\n\r\n\tsetLight(state: any) {\r\n\t\tif(state) {\r\n\t\t\tthis.bg_sprite.alpha = 1;\r\n\t\t\t// this.border_sprite.alpha = 1;\r\n\r\n\t\t\tthis.isOn = state;\r\n\t\t} else if(!state) {\r\n\t\t\tthis.bg_sprite.alpha = off_alpha;\r\n\t\t\t// this.border_sprite.alpha = off_alpha;\r\n\r\n\t\t\tthis.isOn = state;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction create_passThroughLights() {\r\n\t// greens\r\n\tnew PassThroughLight({\r\n\t\txPos: 96.54,\r\n\t\tyPos: 156.54,\r\n\t\tangle: 25,\r\n\t\tborder: \"square\",\r\n\t\tbgColor: colors.green\r\n\t});\r\n\tnew PassThroughLight({\r\n\t\txPos: 141.26,\r\n\t\tyPos: 184.78,\r\n\t\tangle: 40,\r\n\t\tborder: \"square\",\r\n\t\tbgColor: colors.green\r\n\t});\r\n\tnew PassThroughLight({\r\n\t\txPos: 415.5,\r\n\t\tyPos: 184.78,\r\n\t\tangle: -50,\r\n\t\tborder: \"square\",\r\n\t\tbgColor: colors.green\r\n\t});\r\n\tnew PassThroughLight({\r\n\t\txPos: 125.96,\r\n\t\tyPos: 288.36,\r\n\t\tangle: 0,\r\n\t\tborder: \"round\",\r\n\t\tbgColor: colors.green\r\n\t});\r\n\r\n\t// blues\r\n\tnew PassThroughLight({\r\n\t\txPos: 62.4,\r\n\t\tyPos: 371.9,\r\n\t\tangle: 0,\r\n\t\tborder: \"round\",\r\n\t\tbgColor: colors.blue\r\n\t});\r\n\tnew PassThroughLight({\r\n\t\txPos: 476.7,\r\n\t\tyPos: 373.1,\r\n\t\tangle: 0,\r\n\t\tborder: \"round\",\r\n\t\tbgColor: colors.blue\r\n\t});\r\n\tnew PassThroughLight({\r\n\t\txPos: 131.85,\r\n\t\tyPos: 407.23,\r\n\t\tangle: -15,\r\n\t\tborder: \"square\",\r\n\t\tbgColor: colors.blue\r\n\t});\r\n\r\n\t// purples\r\n\tnew PassThroughLight({\r\n\t\txPos: 48.28,\r\n\t\tyPos: 760.32,\r\n\t\tangle: 0,\r\n\t\tborder: \"square_black\",\r\n\t\tbgColor: colors.purple\r\n\t});\r\n\tnew PassThroughLight({\r\n\t\txPos: 103.6,\r\n\t\tyPos: 760.32,\r\n\t\tangle: 0,\r\n\t\tborder: \"square_black\",\r\n\t\tbgColor: colors.purple\r\n\t});\r\n\tnew PassThroughLight({\r\n\t\txPos: 436.7,\r\n\t\tyPos: 760.32,\r\n\t\tangle: 0,\r\n\t\tborder: \"square_black\",\r\n\t\tbgColor: colors.purple\r\n\t});\r\n\tnew PassThroughLight({\r\n\t\txPos: 488.5,\r\n\t\tyPos: 760.32,\r\n\t\tangle: 0,\r\n\t\tborder: \"square_black\",\r\n\t\tbgColor: colors.purple\r\n\t});\r\n}\r\n\r\nexport function passThroughLight_start() {\r\n\tcreate_passThroughLights();\r\n}\r\n\r\nexport function passThroughLight_update() {\r\n\t// PTLs[7].moveToMouse(0, 0);\r\n}\r\n","import { game_ref } from \"..\";\r\nimport { on_sideBumperHit } from \"./leftBlackHole\";\r\nimport { pinballScene } from \"./pinball-scene\";\r\n\r\nconst onHitMoveLeft = -10;\r\nconst startFromLeft = -5;\r\nconst timeBefore_resetPosFromLeft = 250;\r\n\r\nexport class WallBumper {\r\n    private isRight: any;\r\n    private container: any;\r\n    private tube: any;\r\n    private xPos;\r\n    private yPos;\r\n    private isPushedIn;\r\n    private onHitCallback: any;\r\n\r\n    constructor(options: any) {\r\n        this.isRight = options.isRight !== undefined ? options.isRight : false\r\n        this.xPos = options.xPos;\r\n        this.yPos = options.yPos;\r\n        this.isPushedIn = false;\r\n        this.onHitCallback = options.onHitCallback !== undefined ? options.onHitCallback : function () { /* */ };\r\n\r\n        this.create();\r\n        this.createCollider();\r\n    }\r\n\r\n    create() {\r\n        this.container = pinballScene.add.container(this.xPos, this.yPos);\r\n        if (this.isRight) {\r\n            this.container.scaleX = -1;\r\n        }\r\n\r\n        this.tube = pinballScene.add.image(startFromLeft, 0, \"wallBumper_l_tube\");\r\n        const edge = pinballScene.add.image(0, 0, \"wallBumper_l_edge\");\r\n        this.container.add([this.tube, edge]);\r\n    }\r\n\r\n    update() {\r\n        // this.moveToMouse(0, 0);\r\n    }\r\n\r\n    moveToMouse(extraX: any | 0, extraY: any | 0) {\r\n        const cam = pinballScene.cameras.main;\r\n        this.container.x = game_ref.input.activePointer.position.x / cam.zoom + extraX;\r\n        this.container.y = game_ref.input.activePointer.position.y / cam.zoom + extraY;\r\n        console.log(this.container.x, this.container.y);\r\n    }\r\n\r\n    createCollider() {\r\n        const collider = pinballScene.matter.add.rectangle(this.container.x, this.container.y, 20, 70, {\r\n            label: \"wallBumper_sensor\",\r\n            isStatic: true,\r\n            isSensor: true\r\n        });\r\n        collider.MACHINEMAN1357_wallBumper = this;\r\n        collider.MACHINEMAN1357_wallBumper_isRight = this.isRight;\r\n    }\r\n\r\n    on_hitByBall() {\r\n        console.log(\"wallbumper hit\");\r\n        if (this.isPushedIn === false) {\r\n            this.isPushedIn = true;\r\n\r\n            this.onHitCallback();\r\n\r\n            this.tube.x = onHitMoveLeft;\r\n\r\n            pinballScene.time.addEvent({\r\n                delay: timeBefore_resetPosFromLeft,\r\n                callback: () => {\r\n                    this.resetPushedIn();\r\n                },\r\n                args: []\r\n            });\r\n        }\r\n    }\r\n\r\n    resetPushedIn() {\r\n        this.isPushedIn = false;\r\n        this.tube.x = startFromLeft;\r\n    }\r\n}\r\n\r\nexport function wallBumper_start() {\r\n    new WallBumper({\r\n        xPos: 78.34902864062873,\r\n        yPos: 637.9186952565676,\r\n        onHitCallback: on_sideBumperHit\r\n    });\r\n    new WallBumper({\r\n        isRight: true,\r\n        xPos: 460.86548112129276,\r\n        yPos: 637.9186952565676,\r\n        onHitCallback: on_sideBumperHit\r\n    });\r\n}","import { getGameHeight } from \"game/helpers\";\r\nimport { pinballScene } from \"./pinball-scene\";\r\n\r\nexport let roflsManager_ref: RoflsManager;\r\n\r\nenum ERofl_Saver_Side {\r\n    \"LEFT\",\r\n    \"RIGHT\"\r\n}\r\n\r\ninterface IRofl_Saver {\r\n    side: ERofl_Saver_Side;\r\n}\r\n\r\nexport let currentRoflLives = 3;\r\nexport let rofl_isLeftActive_inSaveArea = false;\r\nexport let rofl_isRightActive_inSaveArea = false;\r\n\r\nclass Rofl_Saver {\r\n    private rofl_scale_inSaveArea = 0.4;\r\n    private rofls_leftPos_inSaveArea = { x: 50, y: 875 };\r\n    private rofls_rightPos_inSaveArea = { x: 488, y: 875 };\r\n\r\n    private collider_radius = 25;\r\n\r\n    private side: ERofl_Saver_Side;\r\n\r\n    private rofl_collider: any;\r\n\r\n    constructor(options: IRofl_Saver) {\r\n        this.side = options.side;\r\n\r\n        this.createRoflCollider();\r\n    }\r\n\r\n    getPos() {\r\n        if (this.side === ERofl_Saver_Side.LEFT) {\r\n            return {\r\n                x: this.rofls_leftPos_inSaveArea.x,\r\n                y: this.rofls_leftPos_inSaveArea.y,\r\n            }\r\n        } else if (this.side === ERofl_Saver_Side.RIGHT) {\r\n            return {\r\n                x: this.rofls_rightPos_inSaveArea.x,\r\n                y: this.rofls_rightPos_inSaveArea.y,\r\n            }\r\n        }\r\n\r\n        return {};\r\n    }\r\n\r\n    createRoflCollider() {\r\n        const sidePos = this.getPos();\r\n\r\n        const visual = pinballScene.add\r\n            .sprite(0, 0, pinballScene.selectedGotchi?.spritesheetKey)\r\n            .setDepth(3)\r\n            .setScale(this.rofl_scale_inSaveArea);\r\n        visual[\"MACHINEMAN1357_rofl_saver_side\"] = this.side;\r\n\r\n        this.rofl_collider = pinballScene.matter.add.circle(\r\n            sidePos.x,\r\n            sidePos.y,\r\n            this.collider_radius, {\r\n            isStatic: true,\r\n            label: \"rofl_saver\",\r\n            isSensor: true\r\n        });\r\n        pinballScene.matter.add.gameObject(visual, this.rofl_collider);\r\n    }\r\n\r\n    getHitByBall() {\r\n        // position rofl off screen\r\n        this.rofl_collider.gameObject.setPosition(-1000, 0);\r\n    }\r\n\r\n    positionInSaveArea() {\r\n        const sidePos = this.getPos();\r\n\r\n        this.rofl_collider.gameObject.setPosition(sidePos.x, sidePos.y);\r\n    }\r\n}\r\n\r\nclass RoflsManager {\r\n    private rofl_scale_inUI = 0.4;\r\n\r\n    private rofls_spaceFromLeft_inUI = 30;\r\n    private rofls_spaceFromBottom_inUI = 85;\r\n    private rofls_spacing_inUI = 35;\r\n\r\n    private rofl_isLeftActive_inSaveArea = false;\r\n    private rofl_isRightActive_inSaveArea = false;\r\n\r\n    private rofls_images_inUI: any = [];\r\n    private rofl_saver_left: any;\r\n    private rofl_saver_right: any;\r\n\r\n    constructor() {\r\n        this.createRofls_inUI();\r\n    }\r\n\r\n    createRofls_inUI() {\r\n        for (let i = 0; i < currentRoflLives; i++) {\r\n            const currentSpacing = this.rofls_spacing_inUI * i;\r\n\r\n            const rofl = pinballScene.add.image(\r\n                this.rofls_spaceFromLeft_inUI + currentSpacing,\r\n                getGameHeight(pinballScene) + this.rofls_spaceFromBottom_inUI,\r\n                pinballScene.selectedGotchi?.spritesheetKey || \"\",\r\n            ).setDepth(3).setScale(this.rofl_scale_inUI);\r\n\r\n            this.rofls_images_inUI.push(rofl);\r\n        }\r\n    }\r\n\r\n    placeRoflInSaveAreas() {\r\n        // const isLoseOneRoflInPool = !this.rofl_isLeftActive_inSaveArea || !this.rofl_isRightActive_inSaveArea; // if either or, remove one from pool\r\n\r\n        if (this.rofls_images_inUI.length > 0) {\r\n            if (!rofl_isLeftActive_inSaveArea) {\r\n                this.placeRoflInSaveArea(ERofl_Saver_Side.LEFT);\r\n            }\r\n\r\n            if (!rofl_isRightActive_inSaveArea) {\r\n                this.placeRoflInSaveArea(ERofl_Saver_Side.RIGHT);\r\n            }\r\n        }\r\n\r\n        this.removeOneRoflFromPool();\r\n    }\r\n\r\n    placeRoflInSaveArea(side: ERofl_Saver_Side) {\r\n        if (side === ERofl_Saver_Side.LEFT) {\r\n            rofl_isLeftActive_inSaveArea = true;\r\n\r\n            // if rofl save already was created, just set its position. Else, create\r\n            if (this.rofl_saver_left) {\r\n                this.rofl_saver_left.positionInSaveArea();\r\n            } else {\r\n                const rofl = new Rofl_Saver({\r\n                    side: ERofl_Saver_Side.LEFT\r\n                });\r\n                this.rofl_saver_left = rofl;\r\n            }\r\n        } else if (side === ERofl_Saver_Side.RIGHT) {\r\n            rofl_isRightActive_inSaveArea = true;\r\n\r\n            if (this.rofl_saver_right) {\r\n                this.rofl_saver_right.positionInSaveArea();\r\n            } else {\r\n                const rofl = new Rofl_Saver({\r\n                    side: ERofl_Saver_Side.RIGHT\r\n                });\r\n                this.rofl_saver_right = rofl;\r\n            }\r\n        }\r\n    }\r\n\r\n    removeOneRoflFromPool() {\r\n        if (currentRoflLives > 0) {\r\n            this.rofls_images_inUI[this.rofls_images_inUI.length - 1].destroy();\r\n\r\n            this.rofls_images_inUI.splice(this.rofls_images_inUI.length - 1, 1);\r\n        }\r\n\r\n        currentRoflLives -= 1;\r\n        if (currentRoflLives < 0) {\r\n            pinballScene.loseGame();\r\n        }\r\n    }\r\n\r\n    onBallHitRofl(side: ERofl_Saver_Side) {\r\n        if (side === ERofl_Saver_Side.LEFT) {\r\n            this.rofl_saver_left.getHitByBall();\r\n            rofl_isLeftActive_inSaveArea = false;\r\n        } else if (side === ERofl_Saver_Side.RIGHT) {\r\n            this.rofl_saver_right.getHitByBall();\r\n            rofl_isRightActive_inSaveArea = false;\r\n        }\r\n    }\r\n}\r\n\r\nexport function resetLives() {\r\n    currentRoflLives = 3;\r\n    rofl_isRightActive_inSaveArea = false;\r\n    rofl_isLeftActive_inSaveArea = false;\r\n}\r\n\r\nexport function rofls_start() {\r\n    roflsManager_ref = new RoflsManager();\r\n\r\n    if (rofl_isRightActive_inSaveArea) {\r\n        roflsManager_ref.placeRoflInSaveArea(ERofl_Saver_Side.RIGHT);\r\n    } else if (rofl_isLeftActive_inSaveArea) {\r\n        roflsManager_ref.placeRoflInSaveArea(ERofl_Saver_Side.LEFT);\r\n    }\r\n}","import { FIRE } from \"game/assets\";\r\nimport { getGameHeight, getGameWidth } from \"game/helpers\";\r\nimport { pinballScene } from \"./pinball-scene\";\r\n\r\nexport let fireImage_ref: Fire;\r\n\r\nclass Fire {\r\n\tprivate fireImage: any;\r\n\tprivate timedEvent: any;\r\n\r\n\tconstructor() {\r\n\t\tthis.createFire();\r\n\t\tthis.createTimer();\r\n\t}\r\n\r\n\tcreateFire(): void {\r\n\t\tthis.fireImage = pinballScene.add\r\n\t\t\t.image(getGameWidth(pinballScene) / 2 - 15, getGameHeight(pinballScene) + 95, FIRE)\r\n\t\t\t.setDepth(3)\r\n\t\t\t.setScale(0.075)\r\n\t\t\t.setOrigin(0.5, 0.5)\r\n\t\t\t.setAlpha(0);\r\n\t}\r\n\r\n\tcreateTimer() {\r\n\t\tthis.timedEvent = pinballScene.time.addEvent({\r\n\t\t\tdelay: 500,                // ms\r\n\t\t\tcallback: this.deActivateFire,\r\n\t\t\targs: [],\r\n\t\t\tpaused: true\r\n\t\t});\r\n\t}\r\n\r\n\tactivateFire() {\r\n\t\tfireImage_ref.fireImage.setAlpha(1);\r\n\r\n\t\tfireImage_ref.timedEvent.reset({\r\n\t\t\tdelay: 500,                // ms\r\n\t\t\tcallback: fireImage_ref.deActivateFire,\r\n\t\t\targs: [],\r\n\t\t});\r\n\t\tpinballScene.time.addEvent(fireImage_ref.timedEvent);\r\n\t}\r\n\r\n\tdeActivateFire() {\r\n\t\tfireImage_ref.fireImage.setAlpha(0);\r\n\t}\r\n}\r\n\r\nexport function fire_start(): void {\r\n\tfireImage_ref = new Fire();\r\n}","import { pinballScene_ethCoinMaxSoundCount, pinballScene_maxBallSpeedForEthCoinMaxSoundCount, pinballScene_timeBetweenEthCoinSounds_ms } from \"helpers/vars\";\r\nimport { pinballScene } from \"./pinball-scene\";\r\nimport { ball } from \"./pinball-scene\";\r\n\r\nexport class EthCoin {\r\n\tprivate soundCountTween: any;\r\n\tprivate soundCountTween_props: any;\r\n\r\n\tconstructor() {\r\n\t\tthis.soundCountTween_props = {\r\n\r\n\t\t};\r\n\t}\r\n\r\n\twasHit() {\r\n\t\tconst soundCount = this.getSoundCount();\r\n\r\n\t\t// remove tween if exists\r\n\t\tif(this.soundCountTween) {\r\n\t\t\tthis.soundCountTween.remove();\r\n\t\t}\r\n\r\n\t\t// play once immediately (because repeat in the tween only happens after duration)..\r\n\t\tpinballScene.ethCoin_sound.play();\r\n\r\n\t\t// and repeat the rest.\r\n\t\tthis.soundCountTween = pinballScene.tweens.add({\r\n\t\t\ttargets: this.soundCountTween_props,\r\n\t\t\tdummyProp: 9001,\r\n\t\t\tduration: pinballScene_timeBetweenEthCoinSounds_ms,\r\n\t\t\trepeat: soundCount - 1,\r\n\t\t\tonRepeat: () => {\r\n\t\t\t\tpinballScene.ethCoin_sound.play();\r\n\t\t\t},\r\n\t\t});\r\n\t}\r\n\r\n\tgetSoundCount() {\r\n\t\tconst soundCountPercentage = ball.body.speed / pinballScene_maxBallSpeedForEthCoinMaxSoundCount;\r\n\t\tlet soundCount = soundCountPercentage * pinballScene_ethCoinMaxSoundCount;\r\n\t\tsoundCount = Math.round(soundCount);\r\n\t\tsoundCount = Math.max(1, soundCount);\r\n\t\tsoundCount = Math.min(pinballScene_ethCoinMaxSoundCount, soundCount);\r\n\r\n\t\treturn soundCount;\r\n\t}\r\n}","import { PINBALL } from \"game/assets\";\r\nimport { game_ref } from \"..\";\r\n\r\nconst startWidth = 7;\r\nconst startHeight = 76;\r\nconst onHit_width = 3;\r\nconst timeBefore_resetPosFromLeft_ms = 250;\r\n\r\nexport class PurpleBumper {\r\n\tpublic container: any;\r\n\tprivate xPos;\r\n\tprivate yPos;\r\n\tprivate angle;\r\n\tprivate isPushedIn;\r\n\tprivate on_sideBumperHit: any;\r\n\tprivate scene: any;\r\n\tpublic rect: any;\r\n\r\n\tconstructor(options: any) {\r\n\t\tthis.xPos = options.xPos !== undefined ? options.xPos : 0;\r\n\t\tthis.yPos = options.yPos !== undefined ? options.yPos : 0;\r\n\t\tthis.angle = options.angle !== undefined ? options.angle : 0;\r\n\t\tthis.isPushedIn = false;\r\n\t\tthis.on_sideBumperHit = options.on_sideBumperHit !== undefined ? options.on_sideBumperHit : function() { /* */ };\r\n\t\tthis.scene = options.scene;\r\n\r\n\t\tthis.create();\r\n\t\tthis.createCollider();\r\n\t}\r\n\r\n\tcreate() {\r\n\t\tthis.container = this.scene.add.container(this.xPos, this.yPos)\r\n\t\t\t.setAngle(this.angle);\r\n\r\n\t\tthis.rect = this.scene.add.rectangle(0, 0, startWidth, startHeight, 0xff00ff)\r\n\t\tthis.container.add([this.rect]);\r\n\t}\r\n\r\n\tupdate() {\r\n\t\t// this.moveToMouse(0, 0);\r\n\t}\r\n\r\n\tmoveToMouse(extraX: any = 0, extraY: any = 0) {\r\n\t\tconst cam = this.scene.cameras.main;\r\n\t\tthis.container.x = game_ref.input.activePointer.position.x / cam.zoom + extraX;\r\n\t\tthis.container.y = game_ref.input.activePointer.position.y / cam.zoom + extraY;\r\n\t}\r\n\r\n\tcreateCollider() {\r\n\t\t// const collider = this.scene.matter.add.rectangle(this.container.x, this.container.y, 30, 70, { \r\n\t\t// \tlabel: \"purpleBumper_sensor\",\r\n\t\t// \tisStatic: true,\r\n\t\t// \tisSensor: true\r\n\t\t// });\r\n\t\t// collider.MACHINEMAN1357_purpleBumper = this;\r\n\t\t// console.log(collider);\r\n\r\n\r\n\r\n\t\tconst visual = this.scene.add\r\n\t\t\t.sprite(this.container.x, this.container.y, PINBALL)\r\n\t\t\t.setAlpha(0);\r\n\r\n\t\tconst collider = this.scene.matter.add.rectangle(\r\n\t\t\tthis.container.x,\r\n\t\t\tthis.container.y,\r\n\t\t\t10,\r\n\t\t\t80,\r\n\t\t\t{\r\n\t\t\t\tisStatic: true,\r\n\t\t\t\tlabel: \"purpleBumper_sensor\",\r\n\t\t\t\tisSensor: true\r\n\t\t\t}\r\n\t\t);\r\n\t\tcollider.MACHINEMAN1357_purpleBumper = this;\r\n\t\tthis.scene.matter.add.gameObject(visual, collider);\r\n\r\n\t\tvisual.angle = this.angle;\r\n\t}\r\n\r\n\ton_hitByBall() {\r\n\t\tif(this.isPushedIn === false) {\r\n\t\t\tthis.isPushedIn = true;\r\n\t\r\n\t\t\tthis.on_sideBumperHit();\r\n\t\r\n\t\t\tthis.rect.width = onHit_width;\r\n\r\n\t\t\tthis.scene.time.addEvent({\r\n\t\t\t\tdelay: timeBefore_resetPosFromLeft_ms,\r\n\t\t\t\tcallback: () => {\r\n\t\t\t\t\tthis.resetPushedIn();\r\n\t\t\t\t},\r\n\t\t\t\targs: []\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tresetPushedIn() {\r\n\t\tthis.isPushedIn = false;\r\n\t\tthis.rect.width = startWidth;\r\n\t}\r\n}","import { ballResetForce, PinballScene } from \"./pinball-scene\";\r\n\r\nexport class HoldSpaceBallLaunchManager {\r\n    private spaceKeyObj: Phaser.Input.Keyboard.Key;\r\n    private scene: PinballScene;\r\n    private wasSpacePressed = false;\r\n    private timeSpaceWasHeldDown = 0;\r\n    private maxTimeForMaxVelocity_ms = 1000;\r\n\r\n    constructor(scene: PinballScene) {\r\n        this.scene = scene;\r\n        this.spaceKeyObj = scene.input.keyboard.addKey('Space');  // Get key object\r\n    }\r\n\r\n    update(delta: number) {\r\n        if(this.spaceKeyObj.isDown) {\r\n            this.wasSpacePressed = true;\r\n            this.timeSpaceWasHeldDown += delta;\r\n        } else {\r\n            if(this.wasSpacePressed) {\r\n                this.wasSpacePressed = false;\r\n\r\n                this.handleSpaceRelease();\r\n            }\r\n        }\r\n    }\r\n\r\n    handleSpaceRelease() {\r\n        const [_isBallOnShootForceSensorBody, body] = this.scene.isBallOnShootForceSensorBody();\r\n        if(_isBallOnShootForceSensorBody) {\r\n            const forceRatio = Math.min(this.timeSpaceWasHeldDown / this.maxTimeForMaxVelocity_ms, 1);\r\n            console.log(this.timeSpaceWasHeldDown, forceRatio);\r\n\r\n            body.gameObject.setVelocity(0, ballResetForce * forceRatio);\r\n        }\r\n\r\n        this.timeSpaceWasHeldDown = 0;\r\n    }\r\n}","import { tiltBehaviorButtonKey, tiltBehaviour_delay_ms } from \"helpers/vars\";\r\nimport { ball, pinballScene } from \"./pinball-scene\";\r\n\r\nfunction getNormalizedDirectionAndAngle(x1: number, y1: number, x2: number, y2: number) {\r\n    const dirX = x2 - x1;\r\n    const dirY = y2 - y1;\r\n\r\n    let length = Math.sqrt(dirX * dirX + dirY * dirY);\r\n    if (length === 0) { length = 1; }\r\n\r\n    const ndx = dirX / length;\t// x normalized\r\n    const ndy = dirY / length;\r\n\r\n    const angle = Math.atan2(ndx, ndy);\r\n\r\n    return { x: ndx, y: ndy, angle: angle };\r\n}\r\n\r\nexport class TiltBehavior {\r\n    private canTilt = true;\r\n    private centerPos = { x: 274, y: 528 };\r\n    constructor() {\r\n        this.start();\r\n    }\r\n\r\n    start() {\r\n        const keyObj = pinballScene.input.keyboard.addKey(tiltBehaviorButtonKey);  // Get key object\r\n        keyObj.on('down', () => {\r\n            this.tilt();\r\n        });\r\n    }\r\n\r\n    tilt() {\r\n        if (this.canTilt) {\r\n            this.canTilt = false;\r\n            pinballScene.cameras.main.shake(250, 0.01);\r\n            const normalizedDirectionAndAngle = getNormalizedDirectionAndAngle(ball.body.position.x, ball.body.position.y, this.centerPos.x, this.centerPos.y);\r\n            console.log(normalizedDirectionAndAngle);\r\n            const newPos = {\r\n                x: ball.body.position.x + (normalizedDirectionAndAngle.x * 50),\r\n                y: ball.body.position.y + (normalizedDirectionAndAngle.y * 50)\r\n            };\r\n            ball.body.gameObject.setPosition(newPos.x, newPos.y);\r\n            console.log(newPos.x, newPos.y);\r\n\r\n            console.log(ball.body);\r\n\r\n            pinballScene.time.addEvent({\r\n                delay: tiltBehaviour_delay_ms,\r\n                callback: () => {\r\n                    console.log(\"timer done\");\r\n                    this.canTilt = true;\r\n                }\r\n            });\r\n\r\n            pinballScene.tilt_sound.play({\r\n                volume: 1\r\n            });\r\n        }\r\n    }\r\n}","/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport { isInputDown_leftPaddle, isInputDown_rightPaddle } from \"components\";\r\nimport { LEFT_CHEVRON, CLICK, BG_SCRUBBED, SHAPES, PORTAL, SPIN_COIN, PINBALL, PADDLE, SLINGSHOT_SOUND, BALL_CURVING_AROUND_AFTER_RELEASE, BALL_HITTING_PLAIN_WALL, DOUBLE_POINTS_SOUND, ETH_COIN, GHST_COIN, TRIPLE_MULTIPLIER, WALL_BUMPERS, PORTAL_SOUND, LOOP_RE_ENTRY_BLOCKER, DIAMOND, GAME_END_SOUND, PLINKO_LOSE_BALL_SOUND, TILT_SOUND } from \"game/assets\";\r\nimport { COLLISION_CATEGORIES } from \"game/helpers/collisionCategories\";\r\nimport { getNormalizedDirectionAndAngle, isAngleBetweenAngles, isCompareEitherOrBodies, pushBodyAwayFrom, pushBodyAwayPoint } from \"game/helpers/utils\";\r\nimport { reset_ballsUnlockedForPlinko } from \"game/main\";\r\nimport { multipliers_start, toggleMultiplier } from \"game/unOrganized/multipliers\";\r\nimport { increaseScore, resetScore } from \"game/unOrganized/stats\";\r\nimport { statsBar_start } from \"game/unOrganized/statsBar\";\r\nimport { AavegotchiGameObject } from \"types\";\r\nimport { game_ref } from \"..\";\r\nimport { getGameWidth, getRelative } from \"../../helpers\";\r\nimport { aavegotchiHandWave_start } from \"./aavegotchiHandWave\";\r\nimport { arrows_start, singleArrows, tripleArrows_left, tripleArrows_right } from \"./arrows\";\r\nimport { leftBlackHole_start, on_ballEnteredHole, reset as resetLeftBlackHole, timer_closeLBH } from \"./leftBlackHole\";\r\nimport { passThroughLight_start } from \"./passThroughLights\";\r\nimport { WallBumper, wallBumper_start } from \"./wallBumper\";\r\nimport { currentRoflLives, resetLives, roflsManager_ref, rofls_start } from \"./rofls\";\r\nimport { fireImage_ref, fire_start } from \"./fire\";\r\nimport { BGMusicScene } from \"../bgMusic/scene_bgMusic\";\r\nimport { ballSpeedForWallHitSound, ballSpeedForWallHitSound_max, ballWallHitSoundOnHoldFor_ms, ball_mass, gameUI_retryFontSize, ghstBumper_soundVolume, is_logMousePos, plinko_lose_ball_soundVolume, scores, slingshotBumperForce, slingShotSensorLeft_position, slingShotSensorRight_position, timeBeforeStartPlinkoSceneAfterBallEnteredPortal_ms, wallBumperSensorLeft_position, wallBumperSensorRight_position } from \"helpers/vars\";\r\nimport gameOverStyle from \"../../../components/GameOver/style.module.css\";\r\nimport keyInputStle from \"../../../components/PaddlesInput/styles.module.css\";\r\nimport { EthCoin } from \"./ethCoin\";\r\nimport { PurpleBumper } from \"./purpleBumper\";\r\nimport { GameScene } from \"../gameScene/game-scene\";\r\nimport { HoldSpaceBallLaunchManager } from \"./holdSpaceBallLaunch\";\r\nimport { BallStuckService, IBallStuckServiceOptions } from \"./ballStuckService\";\r\nimport { TiltBehavior } from \"./tiltBehavior\";\r\nconst sceneConfig: Phaser.Types.Scenes.SettingsConfig = {\r\n\tactive: false,\r\n\tvisible: false,\r\n\tkey: \"Pinball\",\r\n};\r\n\r\nexport let pinballScene: any;\r\n\r\nexport let ball: any;\r\nlet ballShootForceSensor_body: any;\r\nlet failResetSensor_body: any;\r\nconst PADDLE_PULL = 0.00055; // default: 0.0005\r\nconst ballShootPosition = [552, 777];\r\nconst playerBall_depth = 5;\r\nexport const ballResetForce = -40;\r\n\r\n// debug\r\nconst isCreateBGRef = false;\r\n\r\nconst bg_scrubbed_collisionShape = {\r\n\tx: 362,\r\n\ty: 452\r\n};\r\n\r\nlet ballGraphics: any;\r\n\r\nenum EStates {\r\n\tfirstShot,\r\n\tatTop,\r\n\toutOfLoop\r\n}\r\n\r\n/**\r\n * Scene where gameplay takes place\r\n */\r\nexport class PinballScene extends Phaser.Scene {\r\n\tpublic selectedGotchi?: AavegotchiGameObject;\r\n\r\n\t// Sounds\r\n\tprivate back?: Phaser.Sound.BaseSound;\r\n\tprivate slingshot_sound: any;\r\n\tprivate ballCurvingAround_sound: any;\r\n\tprivate ballHittingPlainWall_sound: any;\r\n\tprivate doublePoints_sound: any;\r\n\tprivate ethCoin_sound: any;\r\n\tprivate ghst_sound: any;\r\n\tprivate tripleMultiplier_sound: any;\r\n\tprivate wallBumpers_sound: any;\r\n\tprivate enterPortal_sound: any;\r\n    private gameEnd_sound: any;\r\n    private lose_ball_sound!: Phaser.Sound.BaseSound;\r\n    private tilt_sound!: Phaser.Sound.BaseSound;\r\n\r\n\tprivate ghstBumpers: any = [];\r\n\r\n\tprivate is_ballWallHitSoundOnHold = false;\r\n\r\n\tprivate ballLoopEntryBlocker: any;\r\n\tpublic ballLoopEntryBlockerService: any;\r\n\tprivate ethCoin: any;\r\n\r\n\tprivate TEMP_purpleBumper: any;\r\n\tprivate purpleBumper_left: any;\r\n\tprivate purpleBumper_right: any;\r\n\tprivate is_ballLeftStart = false;\r\n\r\n\tpublic pinball_isGameOver = false;\r\n\r\n    private holdSpaceBallLaunchManager!: HoldSpaceBallLaunchManager;\r\n    private ballIsInShootForceArea_sensor_body: any;\r\n\r\n    // private ballStuckService!: BallStuckService;\r\n    public tiltBehavior!: TiltBehavior;\r\n\r\n\tconstructor() {\r\n\t\tsuper(sceneConfig);\r\n\t}\r\n\r\n\tinit = (data: { selectedGotchi: AavegotchiGameObject }): void => {\r\n\t\tthis.selectedGotchi = data.selectedGotchi;\r\n\t};\r\n\r\n\tpublic create(): void {\r\n\t\tpinballScene = this;\r\n\r\n        this.holdSpaceBallLaunchManager = new HoldSpaceBallLaunchManager(this);\r\n\r\n\t\tconst bgMusicScene = this.scene.get('BGMusic') as BGMusicScene;\r\n\t\tif (!bgMusicScene.scene.isActive()) {\r\n\t\t\t// start music scene\r\n\t\t\tpinballScene.scene.launch('BGMusic');\r\n\t\t}\r\n\r\n\t\t// start game-scene (which has network stuff)\r\n\t\tconst gameScene = this.scene.get('Game') as GameScene;\r\n\t\tif (!gameScene.scene.isActive()) {\r\n\t\t\tconsole.log(\"starting game scene\");\r\n\t\t\tpinballScene.scene.launch('Game');\r\n\t\t}\r\n\r\n\t\tthis.back = this.sound.add(CLICK, { loop: false });\r\n\t\tthis.slingshot_sound = this.sound.add(SLINGSHOT_SOUND);\r\n\t\tthis.ballCurvingAround_sound = this.sound.add(BALL_CURVING_AROUND_AFTER_RELEASE);\r\n\t\tthis.ballHittingPlainWall_sound = this.sound.add(BALL_HITTING_PLAIN_WALL);\r\n\t\tthis.doublePoints_sound = this.sound.add(DOUBLE_POINTS_SOUND);\r\n\t\tthis.ethCoin_sound = this.sound.add(ETH_COIN);\r\n\t\tthis.ghst_sound = this.sound.add(GHST_COIN);\r\n\t\tthis.tripleMultiplier_sound = this.sound.add(TRIPLE_MULTIPLIER);\r\n\t\tthis.wallBumpers_sound = this.sound.add(WALL_BUMPERS);\r\n\t\tthis.enterPortal_sound = this.sound.add(PORTAL_SOUND);\r\n        this.gameEnd_sound = this.sound.add(GAME_END_SOUND);\r\n        this.lose_ball_sound = this.sound.add(PLINKO_LOSE_BALL_SOUND);\r\n        this.tilt_sound = this.sound.add(TILT_SOUND);\r\n\r\n\t\tthis.createBackButton();\r\n\t\t// this.createAavegotchi();\r\n\t\taavegotchiHandWave_start();\r\n\t\tarrows_start();\r\n\r\n\t\treset_ballsUnlockedForPlinko();\r\n\r\n\t\t// pinballScene.scene.start('PlinkoScene');\r\n\r\n\t\t// pinballScene.matter.world.setBounds();\r\n\r\n\t\tthis.createMapObjects();\r\n\r\n        if(process.env.NODE_ENV === \"development\") {\r\n            pinballScene.matter.add.mouseSpring();\r\n        }\r\n\r\n\t\tfor (let i = 0; i < 1; i++) {\r\n\t\t\tthis.createBall();\r\n\t\t}\r\n\t\tthis.createPaddles();\r\n\t\tthis.createPaddleStoppers();\r\n\r\n\t\tthis.create_ballExitReEntryBlocker_collider();\r\n\t\tthis.setUpEvents();\r\n\t\tthis.adjustCamera();\r\n\t\taavegotchiHandWave_start();\r\n\t\tthis.create_portalAnimation();\r\n\t\tstatsBar_start();\r\n\t\tarrows_start();\r\n\t\tmultipliers_start();\r\n\t\tpassThroughLight_start();\r\n\t\tthis.createSpinCoinAnimation();\r\n\t\twallBumper_start();\r\n\t\tleftBlackHole_start();\r\n\t\trofls_start();\r\n\t\tfire_start();\r\n\t\tthis.create_ballLoopEntryBlockerService();\r\n\t\tthis.createSlingshotPurpleBumpers();\r\n\r\n\t\tballGraphics = this.add.graphics({ x: 0, y: 0 });\r\n\t\tthis.ethCoin = new EthCoin();\r\n\r\n\t\t// this.addGameOverUI();\r\n        this.createBallShootForceSensor();\r\n        // this.ballStuckService = new BallStuckService({ scene: this } as IBallStuckServiceOptions);\r\n        this.tiltBehavior = new TiltBehavior();\r\n\r\n        const windowAnyBypass: any = window;\r\n        windowAnyBypass.MACHINEMAN1357_paddlesInput_container.enable_paddlesInput();\r\n        document.getElementById(\"tilt-button-container\")!.style.display = \"block\";\r\n\t}\r\n\r\n\tpublic update(time: number, delta: number): void {\r\n        this.holdSpaceBallLaunchManager.update(delta);\r\n\t\t// aavegotchiHandWave.aavegotchiHandWave_update();\r\n\r\n\t\t// rotate ghst bumpers (to avoid ball bouncing forever on one of them)\r\n\t\tfor (let i = 0, len = this.ghstBumpers.length; i < len; i++) {\r\n\t\t\tconst ghstBumper: any = this.ghstBumpers[i];\r\n\r\n\t\t\tghstBumper.rotation += 0.01;\r\n\t\t}\r\n\r\n\t\tthis.ballLoopEntryBlockerService.update();\r\n\r\n\t\tif (this.TEMP_purpleBumper) {\r\n\t\t\t// this.TEMP_purpleBumper.moveToMouse();\r\n\t\t}\r\n        // this.ballStuckService.update();\r\n\t}\r\n\r\n    private createBallShootForceSensor() {\r\n        this.ballIsInShootForceArea_sensor_body = pinballScene.matter.add.circle(550, 900, 35, {\r\n\t\t\tisStatic: true,\r\n\t\t\tlabel: \"ballIsInShootForceArea_sensor\",\r\n\t\t\tisSensor: true\r\n\t\t});\r\n    }\r\n\r\n\tprivate createSlingshotPurpleBumpers() {\r\n\t\t// left slingshot bumper\r\n\t\tthis.purpleBumper_left = new PurpleBumper({\r\n\t\t\tscene: this,\r\n\t\t\txPos: 161.70012560973987,\r\n\t\t\tyPos: 750.0519952389902,\r\n\t\t\tangle: -23\r\n\t\t});\r\n\r\n\t\t// right\r\n\t\tthis.purpleBumper_right = new PurpleBumper({\r\n\t\t\tscene: this,\r\n\t\t\txPos: 378.37026910666174,\r\n\t\t\tyPos: 748.9820209233854,\r\n\t\t\tangle: -157\r\n\t\t});\r\n\r\n\t\t// debugging\r\n\t\t// document.body.addEventListener(\"keydown\", (ev) => {\r\n\t\t// \tif(ev.code === \"KeyQ\") {\r\n\t\t// \t\tthis.TEMP_purpleBumper.on_hitByBall();\r\n\t\t// \t} else if(ev.code === \"KeyW\") {\r\n\t\t// \t\tconsole.log(this.TEMP_purpleBumper.container.x, this.TEMP_purpleBumper.container.y);\r\n\t\t// \t}\r\n\t\t// });\r\n\r\n\t\t// document.body.addEventListener(\"wheel\", (ev) => {\r\n\t\t// \tthis.TEMP_purpleBumper.rect.angle += ev.deltaY / 100;\r\n\t\t// \tconsole.log(\"new angle:\", this.TEMP_purpleBumper.rect.angle);\r\n\t\t// });\r\n\t}\r\n\r\n\tprivate create_ballLoopEntryBlockerService() {\r\n\t\tclass BallLoopEntryBlockerService {\r\n\t\t\tpublic state: EStates = EStates.firstShot;\r\n\r\n\t\t\tprivate image: any;\r\n\r\n\t\t\tconstructor() {\r\n\t\t\t\tthis.createImage();\r\n\t\t\t}\r\n\r\n\t\t\tupdate() {\r\n\t\t\t\tif (this.state === EStates.firstShot) {\r\n\t\t\t\t\tif (ball.y < 350) {\r\n\t\t\t\t\t\tthis.state = EStates.atTop;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (this.state === EStates.atTop) {\r\n\t\t\t\t\tif (ball.y > 350) {\r\n\t\t\t\t\t\tthis.state = EStates.outOfLoop;\r\n\r\n\t\t\t\t\t\tpinballScene.ballLoopEntryBlocker.enable();\r\n\t\t\t\t\t\t// this.image.setAlpha(1);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treset() {\r\n\t\t\t\tthis.state = EStates.firstShot;\r\n\r\n\t\t\t\tpinballScene.ballLoopEntryBlocker.disable();\r\n\r\n\t\t\t\tthis.image.setAlpha(0);\r\n\t\t\t}\r\n\r\n\t\t\tcreateImage() {\r\n\t\t\t\t// image\r\n\t\t\t\tthis.image = pinballScene.add.image(115, 127, LOOP_RE_ENTRY_BLOCKER)\r\n\t\t\t\t\t.setDepth(10)\r\n\t\t\t\t\t.setAlpha(0);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.ballLoopEntryBlockerService = new BallLoopEntryBlockerService();\r\n\t}\r\n\r\n\tprivate create_ballExitReEntryBlocker_collider() {\r\n\t\tconst verts = [{ \"x\": 148, \"y\": 87 }, { \"x\": 90, \"y\": 112 }, { \"x\": 132, \"y\": 150 }];\r\n\r\n\t\tconst poly = this.add.polygon(125, 117, verts, 0x000000, 0.0);\r\n\r\n\t\tclass BallLoopEntryBlocker {\r\n\t\t\tprivate object: any;\r\n\r\n\t\t\tconstructor() {\r\n\t\t\t\tthis.create();\r\n\t\t\t\tthis.disable();\r\n\t\t\t}\r\n\r\n\t\t\tcreate() {\r\n\t\t\t\tthis.object = pinballScene.matter.add.gameObject(\r\n\t\t\t\t\tpoly,\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tshape: {\r\n\t\t\t\t\t\t\ttype: 'fromVerts', verts: verts, flagInternal: true\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tisStatic: true\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\r\n\t\t\tdisable() {\r\n\t\t\t\tthis.object.setPosition(9000, 1);\r\n\t\t\t}\r\n\r\n\t\t\tenable() {\r\n\t\t\t\t// this.object.setPosition(125, 117);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.ballLoopEntryBlocker = new BallLoopEntryBlocker();\r\n\t}\r\n\r\n    public resetBallToShootTube() {\r\n        ball.body.gameObject.setPosition(ballShootPosition[0], ballShootPosition[1]);\r\n    }\r\n\r\n\tprivate playSlingshotSound() {\r\n\t\tthis.slingshot_sound.play();\r\n\t}\r\n\r\n\tprivate createAavegotchi(): void {\r\n\t\tthis.add.image(\r\n\t\t\tgetGameWidth(this) + 15,\r\n\t\t\t/*getGameHeight(this)*/ 80,\r\n\t\t\tthis.selectedGotchi?.spritesheetKey || \"\",\r\n\t\t).setDepth(3);\r\n\t}\r\n\r\n\tprivate createBackButton = () => {\r\n\t\tthis.add\r\n\t\t\t.image(getRelative(695, this), getRelative(34, this), LEFT_CHEVRON)\r\n\t\t\t.setOrigin(0)\r\n\t\t\t.setInteractive({ useHandCursor: true })\r\n\t\t\t.setDisplaySize(getRelative(94, this), getRelative(94, this))\r\n\t\t\t.on(\"pointerdown\", () => {\r\n                pinballScene = undefined;\r\n\t\t\t\tthis.back?.play();\r\n\t\t\t\twindow.history.back();\r\n\t\t\t})\r\n\t\t\t.setDepth(4);\r\n\t};\r\n\r\n\tcreateSpinCoinAnimation() {\r\n\t\tconst config = {\r\n\t\t\tkey: 'spinCoinAnimation',\r\n\t\t\tframes: pinballScene.anims.generateFrameNumbers(SPIN_COIN, { start: 0, end: 1, first: 0 }),\r\n\t\t\tframeRate: 5,\r\n\t\t\trepeat: -1\r\n\t\t};\r\n\r\n\t\tpinballScene.anims.create(config);\r\n\t\tpinballScene.add.sprite(480, 315, SPIN_COIN)\r\n\t\t\t.play('spinCoinAnimation')\r\n\t\t\t.setScale(0.3);\r\n\t}\r\n\r\n\tlog_isMouseWithinArrowAngle() {\r\n\t\tconst cam = pinballScene.cameras.main;\r\n\t\tconst mousePos_x = game_ref.input.activePointer.position.x / cam.zoom;\r\n\t\tconst mousePos_y = game_ref.input.activePointer.position.y / cam.zoom;\r\n\r\n\t\tconst normDirAndAngle = getNormalizedDirectionAndAngle(\r\n\t\t\tsingleArrows[\"singleArrow_1\"].arrowSprite.x,\r\n\t\t\tsingleArrows[\"singleArrow_1\"].arrowSprite.y,\r\n\t\t\tmousePos_x,\r\n\t\t\tmousePos_y\r\n\t\t);\r\n\t\tconst angle_deg = Phaser.Math.RadToDeg(normDirAndAngle.angle);\r\n\t\tconst isWithin = isAngleBetweenAngles(angle_deg, -160, 65);\r\n\r\n\t\tconsole.log(normDirAndAngle.angle, angle_deg, isWithin);\r\n\t\t// if(isWithin) {\r\n\t\t// \tdocument.body.style.backgroundColor = \"green\";\r\n\t\t// } else {\r\n\t\t// \tdocument.body.style.backgroundColor = \"red\";\r\n\t\t// }\r\n\t}\r\n\r\n\tdraw_ballVelocityLine() {\r\n\t\tballGraphics.lineStyle(5, 0xff0000, 1.0);\r\n\t\t// ballGraphics.fillStyle(0xff0000, 1.0);\r\n\t\tballGraphics.beginPath();\r\n\t\tballGraphics.moveTo(ball.body.position.x, ball.body.position.y);\r\n\t\tballGraphics.lineTo(\r\n\t\t\tball.body.position.x + ball.body.velocity.x * 10,\r\n\t\t\tball.body.position.y + ball.body.velocity.y * 10\r\n\t\t);\r\n\t\tballGraphics.closePath();\r\n\t\tballGraphics.strokePath();\r\n\t}\r\n\r\n\tcreate_portalAnimation() {\r\n\t\tconst config = {\r\n\t\t\tkey: 'portalAnimation',\r\n\t\t\tframes: pinballScene.anims.generateFrameNumbers(PORTAL, { start: 0, end: 4, first: 0 }),\r\n\t\t\tframeRate: 10,\r\n\t\t\trepeat: -1\r\n\t\t};\r\n\r\n\t\tpinballScene.anims.create(config);\r\n\t\tpinballScene.add.sprite(415.7733498152892, 283.43273288908836, PORTAL)\r\n\t\t\t.play('portalAnimation')\r\n\t\t\t.setScale(0.087);\r\n\t}\r\n\r\n\tadjustCamera() {\r\n\t\tpinballScene.cameras.main.zoom = 0.85; // 0.85\r\n\t\tpinballScene.cameras.main.setScroll(40, 80);\r\n\t}\r\n\r\n\tcreateMapObjects() {\r\n\t\t// diamonds flare\r\n\t\tpinballScene.add.image(40, 635, DIAMOND).setDepth(5);\r\n\t\tpinballScene.add.image(498, 635, DIAMOND).setDepth(5);\r\n\r\n\t\t// bg\r\n\t\tconst bg = pinballScene.add.image(0, 0, BG_SCRUBBED)\r\n\t\t\t// .setDisplaySize(getGameWidth(this), getGameHeight(this))\r\n\t\t\t.setOrigin(0, 0)\r\n\t\t// .setAlpha(0.1);\r\n\t\tbg.texture.setFilter(Phaser.Textures.FilterMode.NEAREST);\r\n\r\n\t\t// bg ref\r\n\t\tif (isCreateBGRef) {\r\n\t\t\tconst bg_ref = pinballScene.add.image(0, 0, \"bg_ref\")\r\n\t\t\t\t.setOrigin(0, 0)\r\n\t\t\t\t.setAlpha(0.5)\r\n\t\t\t\t.setDepth(2);\r\n\t\t\tbg_ref.texture.setFilter(Phaser.Textures.FilterMode.NEAREST);\r\n\t\t}\r\n\r\n\t\t// const ball_visual = this.add.sprite(0, 0, \"ball\").setDepth(1);\r\n\t\t// const ball_body = this.matter.add.circle(481, 788, 16);\r\n\t\t// ball = this.matter.add.gameObject(ball_visual, ball_body);\r\n\r\n\t\t// bg collider\r\n\t\tconst shapes = pinballScene.cache.json.get(SHAPES);\r\n\t\tconst shapes_gameObject = pinballScene.matter.add.sprite(bg_scrubbed_collisionShape.x, bg_scrubbed_collisionShape.y, BG_SCRUBBED, BG_SCRUBBED, { shape: shapes.bg_scrubbed } as any)\r\n\t\t\t// .setOrigin(0, 0)\r\n\t\t\t.setAlpha(0.0);\r\n\r\n\t\tballShootForceSensor_body = shapes_gameObject.body.parts.find((x: { label: string; }) => x.label === \"ballShootForceSensor\");\r\n\r\n\t\tfailResetSensor_body = shapes_gameObject.body.parts.find((x: { label: string; }) => x.label === \"failResetSensor\");\r\n\r\n\t\tthis.doStuffWithGHSTBodies(shapes_gameObject);\r\n\t}\r\n\r\n\tdoStuffWithGHSTBodies(shapes_gameObject: any) {\r\n\t\tfor (let i = 0, len = shapes_gameObject.body.parts.length; i < len; i++) {\r\n\t\t\tconst part = shapes_gameObject.body.parts[i];\r\n\r\n\t\t\tif (part.label === \"ghstBumper\") {\r\n\t\t\t\tthis.ghstBumpers.push(part);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcreateBall(x?: any, y?: any) {\r\n\t\tconst xPos = x === undefined ? ballShootPosition[0] : x;\r\n\t\tconst yPos = y === undefined ? ballShootPosition[1] : y;\r\n\r\n\t\tconst ballOptions: any = {\r\n\t\t\tshape: {\r\n\t\t\t\ttype: 'circle',\r\n\t\t\t\tradius: 18\r\n\t\t\t},\r\n\t\t\tlabel: \"PlayerBall\",\r\n\t\t\tmass: ball_mass\r\n\t\t};\r\n\t\tball = pinballScene.matter.add.image(xPos, yPos, PINBALL, undefined, ballOptions).setDepth(playerBall_depth);\r\n\t\tball.texture.setFilter(Phaser.Textures.FilterMode.NEAREST);\r\n\t\tball.scale = 1.5;\r\n\r\n\t\tball.setFriction(0.00000);\r\n\t\tball.setBounce(0.5);\r\n\r\n\t\tball.setCollisionCategory(COLLISION_CATEGORIES.BALL);\r\n\t\tball.setCollidesWith([COLLISION_CATEGORIES.PADDLE, COLLISION_CATEGORIES.DEFAULT, COLLISION_CATEGORIES.BALL]);\r\n\t}\r\n\r\n\tsetUpEvents() {\r\n\t\tpinballScene.input.on('pointermove', function (pointer: any) {\r\n\t\t\tif (is_logMousePos) {\r\n\t\t\t\tconst cam = pinballScene.cameras.main;\r\n\t\t\t\tconst pointerX = pointer.position.x / cam.zoom;\r\n\t\t\t\tconst pointerY = pointer.position.y / cam.zoom;\r\n\t\t\t\tconsole.log(Math.round(pointerX * 1000) / 1000, Math.round(pointerY * 1000) / 1000);\r\n\t\t\t}\r\n\r\n\t\t\t// set_cursorElement(Math.round(pointerX * 1000) / 1000, Math.round(pointerY * 1000) / 1000);\r\n\t\t}, pinballScene);\r\n\r\n\t\t// collision filtering\r\n\t\tpinballScene.matter.world.on('collisionstart', function (event: any, bodyA: any, bodyB: any) {\r\n\t\t\tpinballScene.collisionFiltering(event, bodyA, bodyB);\r\n\t\t});\r\n\t}\r\n\r\n\tcollisionFiltering(event: any, bodyA: any, bodyB: any) {\r\n\t\tconst compareData_PB_GHSTB = isCompareEitherOrBodies(bodyA.label, bodyB.label, \"PlayerBall\", \"ghstBumper\", bodyA, bodyB);\r\n\t\tconst compareData_PB_TASL = isCompareEitherOrBodies(bodyA.label, bodyB.label, \"PlayerBall\", \"tripleArrowSensor_left\", bodyA, bodyB);\r\n\t\tconst compareData_PB_TASR = isCompareEitherOrBodies(bodyA.label, bodyB.label, \"PlayerBall\", \"tripleArrowSensor_right\", bodyA, bodyB);\r\n\t\tconst compareData_PB_PS = isCompareEitherOrBodies(bodyA.label, bodyB.label, \"PlayerBall\", \"portalSensor\", bodyA, bodyB);\r\n\t\tconst compareData_PB_SAS = isCompareEitherOrBodies(bodyA.label, bodyB.label, \"PlayerBall\", \"singleArrowSensor\", bodyA, bodyB);\r\n\r\n\t\t// multiplier sensors\r\n\t\tconst compareData_PB_MSL = isCompareEitherOrBodies(bodyA.label, bodyB.label, \"PlayerBall\", \"multiplierSensor_left\", bodyA, bodyB);\r\n\t\tconst compareData_PB_MSM = isCompareEitherOrBodies(bodyA.label, bodyB.label, \"PlayerBall\", \"multiplierSensor_middle\", bodyA, bodyB);\r\n\t\tconst compareData_PB_MSR = isCompareEitherOrBodies(bodyA.label, bodyB.label, \"PlayerBall\", \"multiplierSensor_right\", bodyA, bodyB);\r\n\r\n\t\tconst compareData_PB_PTLS = isCompareEitherOrBodies(bodyA.label, bodyB.label, \"PlayerBall\", \"passThroughLight_sensor\", bodyA, bodyB);\r\n\t\tconst compareData_PB_WB = isCompareEitherOrBodies(bodyA.label, bodyB.label, \"PlayerBall\", \"wallBumper_sensor\", bodyA, bodyB);\r\n\t\tconst compareData_PB_TLHS = isCompareEitherOrBodies(bodyA.label, bodyB.label, \"PlayerBall\", \"topLeftHole_sensor\", bodyA, bodyB);\r\n\t\tconst compareData_PB_CS = isCompareEitherOrBodies(bodyA.label, bodyB.label, \"PlayerBall\", \"coinSensor\", bodyA, bodyB);\r\n\t\tconst compareData_PB_RS = isCompareEitherOrBodies(bodyA.label, bodyB.label, \"PlayerBall\", \"rofl_saver\", bodyA, bodyB);\r\n\t\tconst compareData_PB_PW = isCompareEitherOrBodies(bodyA.label, bodyB.label, \"PlayerBall\", \"plainWall\", bodyA, bodyB);\r\n\t\tconst compareData_PB_SSSL = isCompareEitherOrBodies(bodyA.label, bodyB.label, \"PlayerBall\", \"slingshotSensor_left\", bodyA, bodyB);\r\n\t\tconst compareData_PB_SSSR = isCompareEitherOrBodies(bodyA.label, bodyB.label, \"PlayerBall\", \"slingshotSensor_right\", bodyA, bodyB);\r\n\r\n\t\t// this.doBehaviour_checkIfAnyBallsAreIn_ballShootForceSensor();\r\n\t\tthis.doBehaviour_checkIfAnyBallsAreIn_failResetSensor();\r\n\r\n\t\tif (compareData_PB_GHSTB.isSuccess) {\r\n\t\t\tpushBodyAwayFrom(compareData_PB_GHSTB.firstBody, compareData_PB_GHSTB.secondBody, 5 + Math.random() * 5); // extra random force (to prevent being stuck on multiplier)\r\n\t\t\tincreaseScore(scores.ghstBumper);\r\n\t\t\tthis.ghst_sound.play({\r\n\t\t\t\tvolume: ghstBumper_soundVolume\r\n\t\t\t});\r\n\t\t} else if (compareData_PB_TASL.isSuccess) {\r\n\t\t\ttripleArrows_left.tripleArrows_onBallHit(ball);\r\n\t\t} else if (compareData_PB_TASR.isSuccess) {\r\n\t\t\ttripleArrows_right.tripleArrows_onBallHit(ball);\r\n\t\t} else if (compareData_PB_PS.isSuccess) {\r\n\t\t\tthis.ballEnteredPortal();\r\n\t\t} else if (compareData_PB_SAS.isSuccess) {\r\n\t\t\tconst singleArrowName = compareData_PB_SAS.secondBody.gameObject.MACHINEMAN1357_singleArrowName;\r\n\t\t\tsingleArrows[singleArrowName].singleArrow_onBallHit(ball);\r\n\t\t}\r\n\r\n\t\t// multiplier sensors\r\n\t\telse if (compareData_PB_MSL.isSuccess) {\r\n\t\t\ttoggleMultiplier(\"left\");\r\n\t\t\tthis.tripleMultiplier_sound.play();\r\n\t\t} else if (compareData_PB_MSM.isSuccess) {\r\n\t\t\ttoggleMultiplier(\"middle\");\r\n\t\t\tthis.tripleMultiplier_sound.play();\r\n\t\t} else if (compareData_PB_MSR.isSuccess) {\r\n\t\t\ttoggleMultiplier(\"right\");\r\n\t\t\tthis.tripleMultiplier_sound.play();\r\n\t\t}\r\n\r\n\t\telse if (compareData_PB_PTLS.isSuccess) {\r\n\t\t\tcompareData_PB_PTLS.secondBody.gameObject.MACHINEMAN1357_passThroughLight_class.toggleLight();\r\n\t\t} else if (compareData_PB_WB.isSuccess) {\r\n\t\t\tcompareData_PB_WB.secondBody.MACHINEMAN1357_wallBumper.on_hitByBall();\r\n\t\t\tincreaseScore(scores.wallBumperSensor);\r\n\t\t\tthis.wallBumpers_sound.play({ volume: 1.8 });\r\n\r\n\t\t\tif (compareData_PB_WB.secondBody.MACHINEMAN1357_wallBumper_isRight) {\r\n\t\t\t\tpushBodyAwayFrom(compareData_PB_WB.firstBody, compareData_PB_WB.secondBody, slingshotBumperForce);\r\n\t\t\t} else {\r\n\t\t\t\tpushBodyAwayFrom(compareData_PB_WB.firstBody, compareData_PB_WB.secondBody, slingshotBumperForce);\r\n\t\t\t}\r\n\t\t} else if (compareData_PB_TLHS.isSuccess) {\r\n\t\t\ton_ballEnteredHole();\r\n\t\t\tthis.doublePoints_sound.play();\r\n\t\t} else if (compareData_PB_CS.isSuccess) {\r\n\t\t\tincreaseScore(scores.pointsReceive_spinningCoin);\r\n\t\t\t// this.ethCoin.wasHit();\r\n\t\t} else if (compareData_PB_RS.isSuccess) {\r\n\t\t\tthis.saveBallByRofl();\r\n\r\n\t\t\troflsManager_ref.onBallHitRofl(compareData_PB_RS.secondBody.gameObject.MACHINEMAN1357_rofl_saver_side);\r\n\t\t} else if (compareData_PB_PW.isSuccess) {\r\n\t\t\tif (!this.is_ballWallHitSoundOnHold) {\r\n\t\t\t\tthis.is_ballWallHitSoundOnHold = true;\r\n\r\n\t\t\t\tthis.time.addEvent({\r\n\t\t\t\t\tdelay: ballWallHitSoundOnHoldFor_ms,\r\n\t\t\t\t\tcallback: () => {\r\n\t\t\t\t\t\tthis.is_ballWallHitSoundOnHold = false;\r\n\t\t\t\t\t},\r\n\t\t\t\t\t//args: [],\r\n\t\t\t\t\tcallbackScope: this\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (ball.body.speed >= ballSpeedForWallHitSound) {\r\n\t\t\t\t\tconst volume = Math.min(ball.body.speed / ballSpeedForWallHitSound_max, 1) * 0.5;\r\n\r\n\t\t\t\t\tthis.ballHittingPlainWall_sound.play({\r\n\t\t\t\t\t\tvolume: volume\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (compareData_PB_SSSL.isSuccess) {\r\n\t\t\tthis.slingshot_sound.play();\r\n            compareData_PB_SSSL.firstBody.gameObject.setVelocity(0.7 * slingshotBumperForce, -0.7 * slingshotBumperForce);\r\n\t\t\tthis.purpleBumper_left.on_hitByBall();\r\n\t\t} else if (compareData_PB_SSSR.isSuccess) {\r\n\t\t\tthis.slingshot_sound.play();\r\n            compareData_PB_SSSR.firstBody.gameObject.setVelocity(-0.7 * slingshotBumperForce, -0.7 * slingshotBumperForce);\r\n\t\t\tthis.purpleBumper_right.on_hitByBall();\r\n\t\t}\r\n\t}\r\n\r\n\tballEnteredPortal() {\r\n\t\tthis.enterPortal_sound.play();\r\n\r\n\t\t// disable ball\r\n\t\tball.setStatic(true);\r\n\t\tball.setPosition(9001, 0);\r\n\t\tball.setVelocity(0, 0);\r\n\r\n\t\tthis.time.addEvent({\r\n\t\t\tdelay: timeBeforeStartPlinkoSceneAfterBallEnteredPortal_ms,\r\n\t\t\tcallback: () => {\r\n\t\t\t\tconst bgMusicScene = this.scene.get('BGMusic') as BGMusicScene;\r\n\t\t\t\tbgMusicScene.pauseMusic();\r\n\r\n\t\t\t\tpinballScene.scene.stop();\r\n\t\t\t\tpinballScene.scene.start('Plinko');\r\n\t\t\t},\r\n\t\t\t//args: [],\r\n\t\t\tcallbackScope: this\r\n\t\t});\r\n\t}\r\n\r\n\tsaveBallByRofl() {\r\n\t\tconst force = 10;\r\n\r\n\t\tball.setVelocity(0, -1 * force);\r\n\t}\r\n\r\n\tloseGame() {\r\n\t\tthis.addGameOverUI();\r\n\r\n\t\t// disable ball\r\n\t\tball.setStatic(true);\r\n\t\tball.setPosition(9000, 1);\r\n\t\tball.setVelocity(0, 0);\r\n\r\n\t\tthis.pinball_isGameOver = true;\r\n\r\n        this.gameEnd_sound.play();\r\n\t}\r\n\r\n\tresetGame() {\r\n\t\tresetScore();\r\n        resetLives();\r\n        resetLeftBlackHole();\r\n\r\n\t\tconst gameScene = this.scene.get('Game') as GameScene;\r\n\t\tif (gameScene.scene.isActive()) {\r\n\t\t\tgameScene.resetGameOver();\r\n\t\t} else {\r\n\t\t\tconsole.error(\"game scene not found\");\r\n\t\t}\r\n\r\n\t\tthis.pinball_isGameOver = false;\r\n\t\tthis.scene.start('Pinball');\r\n\t}\r\n\r\n\taddGameOverUI() {\r\n\t\tconst gameOverContainer = document.createElement(\"div\");\r\n\t\tconst gameOverBorderContainer = document.createElement(\"div\");\r\n\t\tconst gameOverBorder_red = document.createElement(\"div\");\r\n\t\tconst gameOverBorder_orange = document.createElement(\"div\");\r\n\t\tconst gameOverBorder_yellow = document.createElement(\"div\");\r\n\t\tconst gameOverBackground = document.createElement(\"div\");\r\n\t\tconst gameOverRetryContainer = document.createElement(\"div\");\r\n\r\n        const onSpaceDownFn = (event: any) => {\r\n\t\t\tif (event.code === \"Space\") {\r\n                if(this.pinball_isGameOver) {\r\n                    gameOverContainer.remove();\r\n\r\n                    this.resetGame();\r\n                    document.removeEventListener(\"keydown\", onSpaceDownFn);\r\n                }\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tdocument.addEventListener(\"keydown\", onSpaceDownFn);\r\n\r\n\t\tconst retryEl = `<div style=\"font-size:${gameUI_retryFontSize}px; margin-right: 10px;\">retry?</div>`;\r\n\t\tgameOverBackground.innerHTML = `GAME!`;\r\n\r\n\t\tgameOverRetryContainer.innerHTML = retryEl + `\r\n\t\t\t<div class=${keyInputStle.keyboardKeys_container}>\r\n\t\t\t\t<div class=${keyInputStle.keyboardKey_container} style=\"width: 87px;\">\r\n\t\t\t\t\tSpace\r\n\t\t\t\t</div>\r\n\t\t\t</div>`;\r\n\r\n\t\tgameOverContainer.classList.add(gameOverStyle.gameOver_container);\r\n\t\tgameOverBorderContainer.classList.add(gameOverStyle.gameOver_borderContainer);\r\n\t\tgameOverBorder_red.classList.add(gameOverStyle.gameOver_border_red);\r\n\t\tgameOverBorder_orange.classList.add(gameOverStyle.gameOver_border_orange);\r\n\t\tgameOverBorder_yellow.classList.add(gameOverStyle.gameOver_border_yellow);\r\n\t\tgameOverBackground.classList.add(gameOverStyle.gameOver_background);\r\n\t\tgameOverRetryContainer.classList.add(gameOverStyle.gameOver_retryContainer);\r\n\r\n\t\tdocument.body.appendChild(gameOverContainer);\r\n\t\tgameOverContainer.appendChild(gameOverBorderContainer);\r\n\t\tgameOverBorderContainer.appendChild(gameOverBorder_red);\r\n\t\tgameOverBorderContainer.appendChild(gameOverBorder_orange);\r\n\t\tgameOverBorderContainer.appendChild(gameOverBorder_yellow);\r\n\t\tgameOverContainer.appendChild(gameOverBackground);\r\n\t\tgameOverBackground.appendChild(gameOverRetryContainer);\r\n\t}\r\n\r\n\tdoBehaviour_checkIfAnyBallsAreIn_ballShootForceSensor() {\r\n\t\tconst bodies = pinballScene.matter.intersectBody(ballShootForceSensor_body);\r\n\r\n\t\tfor (let i = 0, len = bodies.length; i < len; i++) {\r\n\t\t\tconst body = bodies[i];\r\n\r\n\t\t\tif (body.label === \"PlayerBall\") {\r\n                console.log(\"yes\");\r\n\t\t\t\t// body.gameObject.setVelocity(0, ballResetForce + Phaser.Math.Between(-6, -2));\r\n\t\t\t\t// this.playSound_ballCurvingAround();\r\n\r\n\t\t\t\t// if (this.ballLoopEntryBlockerService.state === EStates.outOfLoop) {\r\n\t\t\t\t// \tincreaseScore(scores.ballReturnsToStart);\r\n\t\t\t\t// }\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n    isBallOnShootForceSensorBody(): [boolean, any] {\r\n        const bodies = pinballScene.matter.intersectBody(this.ballIsInShootForceArea_sensor_body);\r\n\r\n\t\tfor (let i = 0, len = bodies.length; i < len; i++) {\r\n\t\t\tconst body = bodies[i];\r\n\r\n\t\t\tif (body.label === \"PlayerBall\") {\r\n                return [true, body];\r\n\t\t\t}\r\n\t\t}\r\n\r\n        return [false, undefined];\r\n    }\r\n\r\n\ton_ballEnteredFailResetSensor(body: any) {\r\n\t\tbody.gameObject.setPosition(ballShootPosition[0], ballShootPosition[1]);\r\n\t\troflsManager_ref.placeRoflInSaveAreas();\r\n\t\tfireImage_ref.activateFire();\r\n\r\n\t\tthis.ballLoopEntryBlockerService.reset();\r\n\r\n        this.lose_ball_sound.play({\r\n            volume: plinko_lose_ball_soundVolume\r\n        });\r\n\t}\r\n\r\n\tdoBehaviour_checkIfAnyBallsAreIn_failResetSensor() {\r\n\t\tconst bodies = pinballScene.matter.intersectBody(failResetSensor_body);\r\n\r\n\t\tfor (let i = 0, len = bodies.length; i < len; i++) {\r\n\t\t\tconst body = bodies[i];\r\n\r\n\t\t\tif (body.label === \"PlayerBall\") {\r\n\t\t\t\tthis.on_ballEnteredFailResetSensor(body);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tplaySound_ballCurvingAround() {\r\n\t\tthis.ballCurvingAround_sound.play();\r\n\t}\r\n\r\n\tcreatePaddleStoppers() {\r\n\t\t// left\r\n\t\t// x: 198\r\n\t\t// y: 845\r\n\t\tthis.createPaddleStopper(200, 970, \"left\", \"down\");\r\n\t\tthis.createPaddleStopper(200, 804, \"left\", \"up\");\r\n\r\n\t\t// right\r\n\t\tthis.createPaddleStopper(337, 970, \"right\", \"down\");\r\n\t\tthis.createPaddleStopper(337, 804, \"right\", \"up\");\r\n\t}\r\n\r\n\tcreatePaddleStopper(x: any, y: any, side: any, position: any) {\r\n\t\t// determine which paddle composite to interact with\r\n\t\tconst attracteeLabel = (side === 'left') ? 'paddleLeft' : 'paddleRight';\r\n\r\n\t\tconst paddleStopper = pinballScene.matter.add.circle(x, y, 50, {\r\n\t\t\tisStatic: true,\r\n\t\t\tplugin: {\r\n\t\t\t\tattractors: [\r\n\t\t\t\t\t// stopper is always a, other body is b\r\n\t\t\t\t\tfunction (bodyA: any, bodyB: any) {\r\n\t\t\t\t\t\tif (bodyB.label === attracteeLabel) {\r\n\t\t\t\t\t\t\tconst isPaddleUp = (side === 'left') ? isInputDown_leftPaddle : isInputDown_rightPaddle;\r\n\t\t\t\t\t\t\tconst isPullingUp = (position === 'up' && isPaddleUp);\r\n\t\t\t\t\t\t\tconst isPullingDown = (position === 'down' && !isPaddleUp);\r\n\t\t\t\t\t\t\tif (isPullingUp || isPullingDown) {\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\tx: (bodyA.position.x - bodyB.position.x) * PADDLE_PULL,\r\n\t\t\t\t\t\t\t\t\ty: (bodyA.position.y - bodyB.position.y) * PADDLE_PULL,\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tpaddleStopper.collisionFilter.category = COLLISION_CATEGORIES.ATTRACTOR;\r\n\t\tpaddleStopper.collisionFilter.mask = COLLISION_CATEGORIES.PADDLE;\r\n\t}\r\n\r\n\tcreatePaddles() {\r\n\t\t// hingeX: 154\r\n\t\t// hingeY: 780\r\n\t\tthis.createPaddle(180, 890, 187, 895, -25, -12, -1.75, \"left\");\r\n\r\n\t\t// hingeX: 307\r\n\t\t// hingeY: 780\r\n\t\tthis.createPaddle(355, 890, 355, 895, 22, 18, 1.75, \"right\");\r\n\t}\r\n\r\n\tcreatePaddle(x: any, y: any, hingeX: any, hingeY: any, pointA: any, pointB: any, scale: any, side: any) {\r\n\t\tconst paddle_visual = pinballScene.add.sprite(0, 0, PADDLE).setDepth(1).setScale(scale, Math.abs(scale));\r\n\t\tpaddle_visual.texture.setFilter(Phaser.Textures.FilterMode.NEAREST);\r\n\t\tconst paddle_body = pinballScene.matter.add.trapezoid(x, y, 54 * Math.abs(scale), 19, 0, {\r\n\t\t\tchamfer: {},\r\n\t\t\tangle: 3.7,\r\n\t\t\trender: {\r\n\t\t\t\tsprite: {\r\n\t\t\t\t\txOffset: 0\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tlabel: (side === \"left\") ? \"paddleLeft\" : \"paddleRight\",\r\n\t\t\tmass: 1\r\n\t\t\t// isStatic: true\r\n\t\t});\r\n\t\tconst paddle = pinballScene.matter.add.gameObject(paddle_visual, paddle_body);\r\n\r\n\t\tpaddle.setCollisionCategory(COLLISION_CATEGORIES.PADDLE);\r\n\t\tpaddle.setCollidesWith([COLLISION_CATEGORIES.ATTRACTOR, COLLISION_CATEGORIES.BALL]);\r\n\r\n\t\t// hinge\r\n\t\tconst hinge = pinballScene.matter.add.circle(hingeX, hingeY, 5, {\r\n\t\t\tisStatic: true\r\n\t\t});\r\n\t\thinge.collisionFilter.group = COLLISION_CATEGORIES.HINGE;\r\n\r\n\t\tpinballScene.matter.add.constraint(paddle_body, hinge, 0, 0, {\r\n\t\t\tpointA: { x: pointA, y: pointB },\r\n\t\t});\r\n\r\n\t\treturn paddle;\r\n\t}\r\n}\r\n","/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport { BALL_HITTING_PLAIN_WALL, GHST, GHST_COIN, K_POINTS_RED_PLINKO, MARIO_PIPE_SOUND, PINBALL, PLINKO_BORDER, PLINKO_LOSE_BALL_SOUND, PLINKO_TUBES, PLINKO_TUBES_AND_GRID_BG, PLINKO_UNIVERSE_BG, RED_RING, SPIN_COIN_2, TUBE_BG_COLOR, TUBE_OUTLINE } from \"game/assets\";\r\nimport { COLLISION_CATEGORIES } from \"game/helpers/collisionCategories\";\r\nimport { isCompareEitherOrBodies, pushBodyAwayFrom } from \"game/helpers/utils\";\r\nimport { ballsUnlockedForPlinko } from \"game/main\";\r\nimport { increaseScore, set_isLeftBlackHoleOpen } from \"game/unOrganized/stats\";\r\nimport { ball_mass, ethCoinPlinko_pointsReward, ethCoin_plinko_audioVolume, ghstBumper_soundVolume, plinko_lose_ball_soundVolume, scores, timeBefore_endOfSceneToPinballSwitch_ms } from \"helpers/vars\";\r\nimport { game_ref } from \"..\";\r\nimport { BGMusicScene } from \"../bgMusic/scene_bgMusic\";\r\nimport { BallFollowingRedRing } from \"./ballFollowingRedRing\";\r\nimport { BallGoingInTube } from \"./ballGoingInTube\";\r\nimport { reset as leftBlackHoleReset } from \"../pinball/leftBlackHole\";\r\n\r\nlet plinkoScene: any;\r\n\r\nconst ghst_scale = 0.25;\r\nconst spinCoin_scale = 0.4;\r\nconst isCreateBGRef = false;\r\nconst playerBall_depth = 2;\r\n\r\nexport let redRing_go: any;\r\nconst redRingData = {\r\n\tposX: 0\r\n};\r\nlet ballsFollowingRedRing: any = [];\r\nlet ballsGoingInTubes: any = [];\r\nlet ghstAndCoins: any = [];\r\nlet ballKiller_body: any;\r\nlet isChangingScene = false;\r\n\r\nlet ballsNeededToFinishLevel: any;\r\nlet ballsCompleted = 0;\r\n\r\nconst sceneConfig: Phaser.Types.Scenes.SettingsConfig = {\r\n\tactive: false,\r\n\tvisible: false,\r\n\tkey: \"Plinko\",\r\n};\r\n\r\nexport class PlinkoScene extends Phaser.Scene {\r\n\tprivate kPointsRedPlinko_sound: any;\r\n\tprivate marioPipe_sound: any;\r\n\tprivate ethCoin_sound: any;\r\n\tprivate ghst_sound: any;\r\n    private lose_ball_sound: any;\r\n\r\n    constructor () {\r\n        super(sceneConfig);\r\n    }\r\n\r\n\tcreate() {\r\n\t\tplinkoScene = this;\r\n\r\n\t\tconst bgMusicScene = this.scene.get('BGMusic') as BGMusicScene;\r\n\t\tif(bgMusicScene.plinkoOST.isPaused) {\r\n\t\t\tbgMusicScene.resume_plinkoOST();\r\n\t\t} else {\r\n\t\t\tbgMusicScene.play_plinkoOST();\r\n\t\t}\r\n\r\n\t\tthis.resetStuff();\r\n\r\n\t\tthis.setUp_ghstAnimation();\r\n\t\tthis.cameras.main.setBackgroundColor('#bb358e');\r\n\t\tthis.create_sceneObjects();\r\n\r\n\t\tballsNeededToFinishLevel = ballsUnlockedForPlinko;\r\n\t\tthis.create_balls();\r\n\r\n        if(process.env.NODE_ENV === \"development\") {\r\n            this.matter.add.mouseSpring();\r\n        }\r\n\r\n\t\tthis.matter.world.setBounds();\r\n\t\tthis.setUp_events();\r\n\t\tthis.create_tubeColliders();\r\n\t\tconst windowAnyBypass: any = window; // I can't do 'window.' because property doesn't exist on it (type error from typescript) so this circumnavigates it\r\n\t\twindowAnyBypass.MACHINEMAN1357_paddlesInput_container.disable_paddlesInput();\r\n        document.getElementById(\"tilt-button-container\")!.style.display = \"none\";\r\n\t\tthis.create_bottomBallKillerCollider();\r\n\t\tthis.setUpSounds();\r\n    }\r\n\r\n\tupdate() {\r\n\t\tif(!isChangingScene) {\r\n\t\t\tif(redRing_go) redRing_go.setPosition(redRingData.posX, game_ref.scale.height - 198);\r\n\r\n\t\t\t// update balls following red ring\r\n\t\t\tfor (let i = 0, len = ballsFollowingRedRing.length; i < len; i++) {\r\n\t\t\t\tconst ballFollowingRedRing = ballsFollowingRedRing[i];\r\n\t\t\t\t\r\n\t\t\t\tballFollowingRedRing.update();\r\n\t\t\t}\r\n\t\r\n\t\t\t// update balls going in tubes\r\n\t\t\tfor (let i = 0, len = ballsGoingInTubes.length; i < len; i++) {\r\n\t\t\t\tconst ballGoingInTube = ballsGoingInTubes[i];\r\n\t\t\t\t\r\n\t\t\t\tballGoingInTube.update();\r\n\t\t\t}\r\n\t\r\n\t\t\t// rotate coins (to avoid balls being stationary on them)\r\n\t\t\tfor (let i = 0, len = ghstAndCoins.length; i < len; i++) {\r\n\t\t\t\tconst ghstOrCoin = ghstAndCoins[i];\r\n\t\t\t\t\r\n\t\t\t\tghstOrCoin.rotation += 0.01;\r\n\t\t\t}\r\n\t\t}\r\n    }\r\n\r\n\tsetUpSounds() {\r\n\t\tthis.kPointsRedPlinko_sound = this.sound.add(K_POINTS_RED_PLINKO);\r\n\t\tthis.marioPipe_sound = this.sound.add(MARIO_PIPE_SOUND);\r\n\t\tthis.ethCoin_sound = this.sound.add(BALL_HITTING_PLAIN_WALL, {\r\n\t\t\tvolume: ethCoin_plinko_audioVolume\r\n\t\t});\r\n\t\tthis.ghst_sound = this.sound.add(GHST_COIN);\r\n        this.lose_ball_sound = this.sound.add(PLINKO_LOSE_BALL_SOUND);\r\n\t}\r\n\r\n\tresetStuff() {\r\n\t\tisChangingScene = false;\r\n\t\tballsFollowingRedRing = [];\r\n\t\tballsGoingInTubes = [];\r\n\t\tghstAndCoins = [];\r\n\t\tredRing_go = undefined;\r\n\t\tballKiller_body = undefined;\r\n\t\tballsNeededToFinishLevel = undefined;\r\n\t\tballsCompleted = 0;\r\n\t}\r\n\r\n\tsetUp_events() {\r\n\t\t// collision filtering\r\n\t\tthis.matter.world.on('collisionstart', function (event: any, bodyA: any, bodyB: any) {\r\n\t\t\tplinkoScene.collisionFiltering(event, bodyA, bodyB);\r\n\t\t});\r\n\t}\r\n\r\n\tcollisionFiltering(event: any, bodyA: any, bodyB: any) {\r\n\t\tconst compareData_PB_GHSTB = isCompareEitherOrBodies(bodyA.label, bodyB.label, \"PlayerBall\", \"ghstBumper\", bodyA, bodyB);\r\n\t\tconst compareData_PB_C = isCompareEitherOrBodies(bodyA.label, bodyB.label, \"PlayerBall\", \"coin\", bodyA, bodyB);\r\n\t\tconst compareData_PB_RR = isCompareEitherOrBodies(bodyA.label, bodyB.label, \"PlayerBall\", \"redRing\", bodyA, bodyB);\r\n\t\tconst compareData_PB_T = isCompareEitherOrBodies(bodyA.label, bodyB.label, \"PlayerBall\", \"tube\", bodyA, bodyB);\r\n\r\n\t\tthis.doBehaviour_forAllBodiesWithLabelIntersectingBody(\"PlayerBall\", this.killBall, ballKiller_body);\r\n\r\n\t\tif(compareData_PB_GHSTB.isSuccess) {\r\n\t\t\tpushBodyAwayFrom(compareData_PB_GHSTB.firstBody, compareData_PB_GHSTB.secondBody, 5);\r\n\t\t\tincreaseScore(scores.ghstBumper);\r\n\t\t\tthis.ghst_sound.play({\r\n\t\t\t\tvolume: ghstBumper_soundVolume\r\n\t\t\t});\r\n\t\t} else if(compareData_PB_RR.isSuccess) {\r\n\t\t\tthis.moveBallDownRedRing(compareData_PB_RR.firstBody);\r\n\t\t\tincreaseScore(scores.redRing);\r\n\t\t\tthis.createScoreText(1000, compareData_PB_RR.secondBody.gameObject.x, compareData_PB_RR.secondBody.gameObject.y);\r\n\t\t\tthis.kPointsRedPlinko_sound.play();\r\n\t\t} else if(compareData_PB_T.isSuccess) {\r\n\t\t\tthis.moveBallDownTube(compareData_PB_T.firstBody, compareData_PB_T.secondBody);\r\n\t\t\tthis.marioPipe_sound.play();\r\n\r\n\t\t\tconst tubeName = compareData_PB_T.secondBody.MACHINEMAN1357_tubeName;\r\n\t\t\tlet scoreAmount = -1;\r\n\r\n\t\t\tif(tubeName === \"purple\") {\r\n\t\t\t\tscoreAmount = scores.purpleTube;\r\n\t\t\t} else if(tubeName === \"blue\") {\r\n\t\t\t\tscoreAmount = scores.blueTube;\r\n\t\t\t} else if(tubeName === \"yellow\") {\r\n\t\t\t\tscoreAmount = scores.yellowTube;\r\n\t\t\t} else if(tubeName === \"green\") {\r\n\t\t\t\tscoreAmount = scores.greenTube;\r\n\t\t\t}\r\n\r\n\t\t\t// shared\r\n\t\t\tincreaseScore(scoreAmount);\r\n\t\t\tthis.createScoreText(scoreAmount, compareData_PB_T.secondBody.position.x, compareData_PB_T.secondBody.position.y);\r\n\t\t} else if(compareData_PB_C.isSuccess) {\r\n\t\t\tincreaseScore(ethCoinPlinko_pointsReward);\r\n\t\t\tthis.ethCoin_sound.play();\r\n\t\t}\r\n\t}\r\n\r\n\tkillBall(ball_body: any) {\r\n\t\tif(!ball_body.gameObject.MACHINEMAN1357_isKilled) {\r\n\t\t\tball_body.gameObject.setCollisionCategory(-1); // this makes it collide with nothing\r\n\t\t\tball_body.gameObject.setStatic(true);\r\n\t\t\tball_body.collisionFilter.mask = 0;\r\n\t\t\tball_body.gameObject.MACHINEMAN1357_isKilled = true;\r\n\t\t\tball_body.gameObject.alpha = 0;\r\n\r\n\t\t\tplinkoScene.completeBall();\r\n\r\n\t\t\tplinkoScene.createScoreText(\"☠️\", ball_body.gameObject.x, ball_body.gameObject.y, 20);\r\n\r\n            plinkoScene.lose_ball_sound.play({\r\n\t\t\t\tvolume: plinko_lose_ball_soundVolume\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcompleteBall() {\r\n\t\tballsCompleted += 1;\r\n\t\tconst ballsLeft = ballsNeededToFinishLevel - ballsCompleted;\r\n\r\n\t\tconsole.log(\"+1 ball completed. Still need \" + ballsLeft + \" more.\");\r\n\t\tif(ballsCompleted === ballsNeededToFinishLevel) {\r\n\t\t\tconsole.log(\"All balls completed!\");\r\n\r\n\t\t\tplinkoScene.time.addEvent({\r\n\t\t\t\tdelay: timeBefore_endOfSceneToPinballSwitch_ms,\r\n\t\t\t\tcallback: () => {\r\n\t\t\t\t\tconst bgMusicScene = this.scene.get('BGMusic') as BGMusicScene;\r\n\t\t\t\t\tbgMusicScene.resumeMusic();\r\n\t\t\t\t\tbgMusicScene.pause_plinkoOST();\r\n\r\n                    leftBlackHoleReset();\r\n\t\t\t\t\tplinkoScene.scene.stop();\r\n\t\t\t\t\tplinkoScene.scene.start('Pinball');\r\n\t\t\t\t},\r\n\t\t\t\targs: []\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tdoBehaviour_forAllBodiesWithLabelIntersectingBody(label: any, func: any, sensor_body: any) {\r\n\t\tconst bodies = this.matter.intersectBody(sensor_body);\r\n\t\t\r\n\t\tfor (let i = 0, len = bodies.length; i < len; i++) {\r\n\t\t\tconst body = bodies[i] as any;\r\n\t\t\t\r\n\t\t\tif(body.label === label) {\r\n\t\t\t\tfunc(body);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tcreateScoreText(text: any, xPos: any, yPos: any, fontSize?: any) {\r\n\t\tconst text_go = this.add.text(xPos, yPos, text, { fontFamily: \"Arial Black\", fontSize: fontSize || 40 });\r\n\t\ttext_go.setStroke('#000000', 4);\r\n\t\ttext_go.setDepth(10);\r\n\t\ttext_go.setOrigin(0.5, 0.5);\r\n\t\t//  Apply the gradient fill.\r\n\t\tconst gradient = text_go.context.createLinearGradient(0, 0, 0, text_go.height);\r\n\t\tgradient.addColorStop(0, '#111111');\r\n\t\tgradient.addColorStop(.5, '#ffffff');\r\n\t\tgradient.addColorStop(.5, '#aaaaaa');\r\n\t\tgradient.addColorStop(1, '#111111');\r\n\r\n\t\ttext_go.setFill(gradient);\r\n\r\n\t\tconst tween = this.tweens.add({\r\n\t\t\ttargets: text_go,\r\n\t\t\ty: {\r\n\t\t\t\tfrom: yPos,\r\n\t\t\t\tto: yPos - 50,\r\n\t\t\t\tduration: 1000,\r\n\t\t\t\tease: 'Sine.easeInOut',\r\n\t\t\t},\r\n\t\t\talpha: {\r\n\t\t\t\tfrom: 1,\r\n\t\t\t\tto: 0,\r\n\t\t\t\tduration: 1000,\r\n\t\t\t\tease: 'Sine.easeInOut',\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tmoveBallDownRedRing(ball_body: any) {\r\n\t\tball_body.gameObject.setCollisionCategory(0); // thism akes it collide with nothing\r\n\t\tball_body.gameObject.setStatic(true);\r\n\r\n\t\tconst bfrr = new BallFollowingRedRing({\r\n\t\t\tball_body: ball_body\r\n\t\t});\r\n\t\tballsFollowingRedRing.push(bfrr);\r\n\r\n\t\tplinkoScene.completeBall();\r\n\t}\r\n\r\n\tmoveBallDownTube(ball_body: any, tube_body: any) {\r\n\t\tball_body.gameObject.setCollisionCategory(0); // thism akes it collide with nothing\r\n\t\tball_body.gameObject.setStatic(true);\r\n\r\n\t\tconst bgit = new BallGoingInTube({\r\n\t\t\tball_body: ball_body,\r\n\t\t\ttube_body: tube_body\r\n\t\t});\r\n\t\tballsGoingInTubes.push(bgit);\r\n\r\n\t\tplinkoScene.completeBall();\r\n\t}\r\n\r\n\tcreate_balls() {\r\n\t\tconst distanceFromTop = 50;\r\n\t\tconst extraWidth = 0;\r\n\t\tconst spacing = (game_ref.scale.width + extraWidth) / ballsUnlockedForPlinko;\r\n\t\tfor (let i = 0; i < ballsUnlockedForPlinko; i++) {\r\n\t\t\tconst xPos = spacing * i + spacing / 2 - extraWidth / 2;\r\n\t\t\tthis.createBall(xPos, distanceFromTop);\r\n\t\t}\r\n\t}\r\n\r\n\tcreate_sceneObjects() {\r\n\t\t// this.create_tubes();\r\n\r\n\t\t// bg ref\r\n\t\tif(isCreateBGRef) {\r\n\t\t\tthis.add.image(game_ref.scale.width / 2, game_ref.scale.height / 2, \"bgPlinkoRef\")\r\n\t\t\t\t.setScale(1.4)\r\n\t\t\t\t.setAlpha(0.5);\r\n\r\n\t\t}\r\n\t\tthis.create_ghsts();\r\n\r\n\t\tthis.add.image(game_ref.scale.width / 2, game_ref.scale.height / 2, PLINKO_UNIVERSE_BG);\r\n\t\tconst bottomBlueRectangle = this.add.rectangle(\r\n\t\t\tgame_ref.scale.width / 2,\r\n\t\t\tgame_ref.scale.height,\r\n\t\t\tgame_ref.scale.width + 10,\r\n\t\t\t360,\r\n\t\t\t0x32d2d4);\r\n\t\t\r\n\t\tthis.create_redRing();\r\n\t\tthis.add.image(game_ref.scale.width / 2, game_ref.scale.height - 113, PLINKO_TUBES_AND_GRID_BG).setScale(0.332);\r\n\t\tthis.add.image(game_ref.scale.width / 2, game_ref.scale.height - 113, PLINKO_TUBES).setScale(0.332).setDepth(11); // put tubes ontop\r\n\t\tthis.add.image(game_ref.scale.width / 2, game_ref.scale.height / 2, PLINKO_BORDER);\r\n\t}\r\n\r\n\tcreateBall(xPos: any, yPos: any) {\r\n\t\tconst ballConfig: any = {\r\n\t\t\tshape: {\r\n\t\t\t\ttype: 'circle',\r\n\t\t\t\tradius: 18\r\n\t\t\t},\r\n\t\t\tlabel: \"PlayerBall\",\r\n\t\t\tmass: ball_mass\r\n\t\t};\r\n\t\tconst ball = this.matter.add.image(xPos, yPos, PINBALL, undefined, ballConfig).setDepth(playerBall_depth);\r\n\t\tball.texture.setFilter(Phaser.Textures.FilterMode.NEAREST);\r\n\t\tball.scale = 1.5;\r\n\r\n\t\tball.setFriction(0.0);\r\n\t\tball.setBounce(0.5);\r\n\t\r\n\t\tball.setCollisionCategory(COLLISION_CATEGORIES.BALL);\r\n\t\tball.setCollidesWith([COLLISION_CATEGORIES.PADDLE, COLLISION_CATEGORIES.DEFAULT, COLLISION_CATEGORIES.BALL]);\r\n\t}\r\n\r\n\tsetUp_ghstAnimation() {\r\n\t\tconst config = {\r\n\t\t\tkey: 'ghstAnimation',\r\n\t\t\tframes: this.anims.generateFrameNumbers('ghst', { start: 0, end: 10, first: 0 }),\r\n\t\t\tframeRate: 10,\r\n\t\t\trepeat: -1\r\n\t\t};\r\n\t\r\n\t\tthis.anims.create(config);\r\n\t}\r\n\r\n\tcreate_ghstOrCoin(xPos: any, yPos: any, texture: any, scale: any) {\r\n\t\t// this visual will be static: just sit there, looking pretty\r\n\t\tconst object_visual = this.add.sprite(xPos, yPos, texture).setDepth(5).setScale(scale);\r\n\t\tobject_visual.texture.setFilter(Phaser.Textures.FilterMode.NEAREST);\r\n\r\n\t\t// THIS visual will be tied to the body by adding it to a gameobject and making it invisible, because it will be rotating (to circumnavigate the issue of balls idling ontop of them) and the sprite rotates with it, but having a separate one fixes this.\r\n\t\tconst object_visual_forBody = this.add.sprite(xPos, yPos, texture).setAlpha(0);\r\n\r\n\t\tconst object_body = this.matter.add.circle(xPos, yPos, 20, {\r\n\t\t\tisStatic: true,\r\n\t\t\tlabel: texture === \"ghst\" ? \"ghstBumper\" : \"coin\"\r\n\t\t});\r\n\t\tconst ghstOrCoin_go = this.matter.add.gameObject(object_visual_forBody, object_body);\r\n\t\tghstAndCoins.push(ghstOrCoin_go);\r\n\t}\r\n\r\n\tcreate_ghsts() {\r\n\t\tconst rows = 8;\r\n\t\tlet isSix = true;\r\n\t\tconst extraWidth = -50;\r\n\t\tconst spacing = (game_ref.scale.width + extraWidth) / 6;\r\n\t\tconst ySpacing = 70;\r\n\t\tconst extraY = 75;\r\n\t\tconst ghstBumperIndices = [11, 13, 26, 28, 34, 43];\r\n\r\n\t\tlet created = 0;\r\n\t\tfor (let r = 0; r < rows; r++) {\r\n\t\t\tconst columns = isSix === true ? 6 : 5;\r\n\r\n\t\t\tfor (let c = 0; c < columns; c++) {\r\n\t\t\t\tlet xPos = spacing * c + spacing / 2 - extraWidth / 2;\r\n\t\t\t\tif(columns === 5) {\r\n\t\t\t\t\tconst fiveSpacing = (game_ref.scale.width + extraWidth) / 5;\r\n\t\t\t\t\txPos += fiveSpacing / 2;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tcreated += 1;\r\n\r\n\t\t\t\tif(ghstBumperIndices.includes(created)) {\r\n\t\t\t\t\tthis.create_ghstOrCoin(xPos, r * ySpacing + extraY, GHST, ghst_scale);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.create_ghstOrCoin(xPos, r * ySpacing + extraY, SPIN_COIN_2, spinCoin_scale);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tisSix = !isSix;\r\n\t\t}\r\n\t}\r\n\r\n\tcreate_tubes() {\r\n\t\tconst tubeScale = 1.5;\r\n\t\tconst extraWidth = -50;\r\n\t\tconst spacing = (game_ref.scale.width + extraWidth) / 4;\r\n\t\tconst yPos = game_ref.scale.height - 77;\r\n\t\tconst colors = [0xcd25a1, 0x0061ff, 0xffd503, 0x37a961];\r\n\r\n\t\tfor (let i = 0; i < 4; i++) {\r\n\t\t\tconst xPos = spacing * i + spacing / 2 - extraWidth / 2;\r\n\t\t\tconst color = colors[i];\r\n\r\n\t\t\tconst tube_bgColor = this.add.image(xPos, yPos, TUBE_BG_COLOR)\r\n\t\t\t\t.setDepth(1)\r\n\t\t\t\t.setTint(color)\r\n\t\t\t\t.setScale(tubeScale);\r\n\t\t\ttube_bgColor.texture.setFilter(Phaser.Textures.FilterMode.NEAREST);\r\n\t\t\t\r\n\t\t\tconst tube_outline = this.add.image(xPos, yPos, TUBE_OUTLINE)\r\n\t\t\t\t.setDepth(1)\r\n\t\t\t\t.setScale(tubeScale);\r\n\t\t\ttube_outline.texture.setFilter(Phaser.Textures.FilterMode.NEAREST);\r\n\t\t}\r\n\t}\r\n\r\n\tcreate_redRing() {\r\n\t\tconst img = this.add.image(0, 0, RED_RING).setScale(1.4).setDepth(10);\r\n\t\timg.texture.setFilter(Phaser.Textures.FilterMode.NEAREST);\r\n\r\n\t\tconst collider = this.matter.add.rectangle(game_ref.scale.width / 2, game_ref.scale.height - 198, 67, 25, {\r\n\t\t\tlabel: \"redRing\",\r\n\t\t\tisStatic: true\r\n\t\t});\r\n\r\n\t\tredRing_go = this.matter.add.gameObject(img, collider);\r\n\r\n\t\tconst tween = this.tweens.add({\r\n\t\t\ttargets: redRingData,\r\n\t\t\tposX: {\r\n\t\t\t\tfrom: 50,\r\n\t\t\t\tto: game_ref.scale.width - 50\r\n\t\t\t},\r\n\t\t\tduration: 2000,\r\n\t\t\tease: 'Sine.easeInOut',\r\n\t\t\tyoyo: true,\r\n\t\t\trepeat: -1\r\n\t\t});\r\n\t}\r\n\r\n\tcreate_tubeColliders() {\r\n\t\tconst tubeDatas = [\r\n\t\t\t{\r\n\t\t\t\tname: \"purple\",\r\n\t\t\t\txPos: 95\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"blue\",\r\n\t\t\t\txPos: 230\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"yellow\",\r\n\t\t\t\txPos: 367\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: \"green\",\r\n\t\t\t\txPos: 490\r\n\t\t\t}\r\n\t\t];\r\n\r\n\t\tfor (let i = 0; i < tubeDatas.length; i++) {\r\n\t\t\tconst tubeData = tubeDatas[i];\r\n\r\n\t\t\tconst collider = this.matter.add.rectangle(tubeData.xPos, game_ref.scale.height - 152, 67, 25, {\r\n\t\t\t\tlabel: \"tube\",\r\n\t\t\t\tisStatic: true\r\n\t\t\t}) as any;\r\n\t\t\tcollider.MACHINEMAN1357_tubeName = tubeData.name;\r\n\t\t}\r\n\t}\r\n\r\n\tcreate_bottomBallKillerCollider() {\r\n\t\tballKiller_body = this.matter.add.rectangle(game_ref.scale.width / 2, game_ref.scale.height, game_ref.scale.width, 200, {\r\n\t\t\tlabel: \"ballKiller\",\r\n\t\t\tisStatic: true,\r\n\t\t\tisSensor: true\r\n\t\t});\r\n\t}\r\n}","import { BootScene } from './boot-scene';\nimport { PinballScene } from './pinball/pinball-scene';\nimport { PlinkoScene } from './plinko/scene_plinko';\nimport { BGMusicScene } from './bgMusic/scene_bgMusic';\nimport { GameScene } from './gameScene/game-scene';\n\nconst scenes = [BootScene, PinballScene, PlinkoScene, BGMusicScene, GameScene];\nexport let game_ref: Phaser.Game;\n\nexport default scenes;\n\nexport const setGameRef = (game: Phaser.Game) => {\n\tgame_ref = game;\n};\n","import { game_ref } from \"game/scenes\";\r\nimport { setNewStatsBarContainerSize } from \"game/unOrganized/statsBar\";\r\nimport React, { Component } from \"react\";\r\nimport styles from \"./styles.module.css\";\r\n\r\ninterface IKeyboardKeyVisual {\r\n\tkeyText: string\r\n}\r\n\r\ninterface IKeyboardKeyVisualsContainer {\r\n\tkeyTexts: string[]\r\n}\r\n\r\ninterface ISinkButton {\r\n\ttitle: string,\r\n\tside: ESinkButtonSide,\r\n\tkeyTexts: string[],\r\n\tisSunk: boolean,\r\n\ttoggleSink: (sinkButtonSide: ESinkButtonSide) => void\r\n}\r\n\r\ninterface IPaddlesInput_Container {\r\n\tisLeftSunk: boolean,\r\n\tisRightSunk: boolean,\r\n\tpaddlesInput_container_width: string,\r\n\thidden: boolean\r\n}\r\n\r\nenum ESinkButtonSide {\r\n\t\"LEFT\",\r\n\t\"RIGHT\"\r\n}\r\n\r\nconst paddleKeyCodeInputs_left = [\"KeyA\", \"ArrowLeft\"];\r\nconst paddleKeyCodeInputs_right = [\"KeyD\", \"ArrowRight\"];\r\n\r\nexport let isInputDown_leftPaddle = false;\r\nexport let isInputDown_rightPaddle = false;\r\n\r\nclass KeyboardKeyVisual extends Component<IKeyboardKeyVisual> {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className={styles.keyboardKey_container}>\r\n\t\t\t\t{this.props.keyText}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nclass KeyboardKeyVisualsContainer extends Component<IKeyboardKeyVisualsContainer> {\r\n\trender() {\r\n\t\tconst [...keyTexts] = this.props.keyTexts;\r\n\t\tconst keyboardKeyVisuals = keyTexts.map((keyText, index) =>\r\n\t\t\t<KeyboardKeyVisual key={keyText} keyText={keyText} />\r\n\t\t);\r\n\r\n\t\treturn (\r\n\t\t\t<div className={styles.keyboardKeys_container}>\r\n\t\t\t\t{keyboardKeyVisuals}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nclass SinkButton extends Component<ISinkButton> {\r\n\trender() {\r\n\t\tconst sunkClass = this.props.isSunk ? styles.paddlesInput_button_active : null;\r\n\r\n\t\treturn (\r\n\t\t\t<div className={styles.paddlesInput_button_container}>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={`${styles.paddlesInput_button} ${sunkClass}`}\r\n\t\t\t\t\tonPointerDown={() => { this.props.toggleSink(this.props.side); }}\r\n\t\t\t\t\tonPointerUp={() => { this.props.toggleSink(this.props.side); }}\r\n\t\t\t\t>\r\n\t\t\t\t\t{this.props.title}\r\n\t\t\t\t\t<KeyboardKeyVisualsContainer keyTexts={this.props.keyTexts} />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport class PaddlesInput_Container extends React.Component<any, IPaddlesInput_Container> {\r\n\tprivate paddlesInput_container_ref: any;\r\n    private interval_setNewPaddlesInputContainerSize: any;\r\n\r\n\tconstructor(props: any) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\tisLeftSunk: false,\r\n\t\t\tisRightSunk: false,\r\n\t\t\tpaddlesInput_container_width: \"9999px\",\r\n\t\t\thidden: false\r\n\t\t};\r\n\t\tthis.paddlesInput_container_ref = React.createRef();\r\n\r\n\t\t// hacky way of referencing this react component to allow external calling of function 'disable_paddlesInput'\r\n\t\tObject.assign(window, {\r\n\t\t\tMACHINEMAN1357_paddlesInput_container: this\r\n\t\t});\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.setEvents();\r\n\r\n\t\t// set paddles container size for the first time (check every 100ms because game_ref could be null)\r\n\t\tthis.interval_setNewPaddlesInputContainerSize = setInterval(() => {\r\n\t\t\tthis.setNewPaddlesInputContainerSize();\r\n\t\t}, 100);\r\n\t}\r\n\r\n    componentWillUnmount() {\r\n        console.log(\"componentWillUnmount\", this);\r\n\r\n        window.clearInterval(this.interval_setNewPaddlesInputContainerSize);\r\n    }\r\n\r\n\tdisable_paddlesInput() {\r\n\t\tthis.setState({\r\n\t\t\thidden: true\r\n\t\t})\r\n\t}\r\n\r\n    enable_paddlesInput() {\r\n\t\tthis.setState({\r\n\t\t\thidden: false\r\n\t\t})\r\n\t}\r\n\r\n\tsetEvents() {\r\n\t\tdocument.body.addEventListener(\"keydown\", (ev) => {\r\n\t\t\t// left\r\n\t\t\tif(paddleKeyCodeInputs_left.includes(ev.code)) {\r\n\t\t\t\tthis.setSinkButtonState(ESinkButtonSide.LEFT, true);\r\n\t\t\t}\r\n\t\r\n\t\t\t// right\r\n\t\t\tif(paddleKeyCodeInputs_right.includes(ev.code)) {\r\n\t\t\t\tthis.setSinkButtonState(ESinkButtonSide.RIGHT, true);\r\n\t\t\t}\r\n\t\t});\r\n\t\r\n\t\t// up\r\n\t\tdocument.body.addEventListener(\"keyup\", (ev) => {\r\n\t\t\t// left\r\n\t\t\tif(paddleKeyCodeInputs_left.includes(ev.code)) {\r\n\t\t\t\tthis.setSinkButtonState(ESinkButtonSide.LEFT, false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// right\r\n\t\t\tif(paddleKeyCodeInputs_right.includes(ev.code)) {\r\n\t\t\t\tthis.setSinkButtonState(ESinkButtonSide.RIGHT, false);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\twindow.onresize = () => {\r\n\t\t\tthis.setNewPaddlesInputContainerSize();\r\n\t\t\tsetNewStatsBarContainerSize();\r\n\t\t\t// setCanvasSize();\r\n\t\t}\r\n\t}\r\n\r\n\tsetNewPaddlesInputContainerSize() {\r\n\t\tif(game_ref) {\r\n\t\t\tconst canvasRect = game_ref.canvas.getBoundingClientRect();\r\n\t\t\tconst twoTimesPaddleInputsSize = 100 * 2;\r\n\t\t\tconst newStyleWidth = canvasRect.width + twoTimesPaddleInputsSize + \"px\";\r\n\t\t\r\n\t\t\tthis.setState({ paddlesInput_container_width: newStyleWidth } );\r\n\t\t}\r\n\t}\r\n\r\n\ttoggleSink(sinkButtonSide: ESinkButtonSide) {\r\n\t\tif(sinkButtonSide === ESinkButtonSide.LEFT) {\r\n\t\t\tthis.setSinkButtonState(sinkButtonSide, !this.state.isLeftSunk);\r\n\t\t} else if(sinkButtonSide === ESinkButtonSide.RIGHT) {\r\n\t\t\tthis.setSinkButtonState(sinkButtonSide, !this.state.isRightSunk);\r\n\t\t}\r\n\t}\r\n\r\n\tsetSinkButtonState(sinkButtonSide: ESinkButtonSide, state: boolean) {\r\n\t\tif(sinkButtonSide === ESinkButtonSide.LEFT) {\r\n\t\t\tthis.setState({ isLeftSunk: state });\r\n\r\n\t\t\tisInputDown_leftPaddle = state;\r\n\t\t} else if(sinkButtonSide === ESinkButtonSide.RIGHT) {\r\n\t\t\tthis.setState({ isRightSunk: state });\r\n\r\n\t\t\tisInputDown_rightPaddle = state;\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst paddlesInput_container_style = this.state.hidden ? { display: \"none\" } : { width: this.state.paddlesInput_container_width };\r\n\r\n\t\treturn (\r\n\t\t\t<div className={styles.paddlesInput_container} ref={this.paddlesInput_container_ref} style={ paddlesInput_container_style }>\r\n\t\t\t\t<SinkButton title={\"left\"} side={ESinkButtonSide.LEFT} keyTexts={[\"A\", \"←\"]} isSunk={this.state.isLeftSunk} toggleSink={ (i) => this.toggleSink(i) } />\r\n\t\t\t\t<SinkButton title={\"right\"} side={ESinkButtonSide.RIGHT} keyTexts={[\"D\", \"→\"]} isSunk={this.state.isRightSunk} toggleSink={ (i) => this.toggleSink(i) } />\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}","import { AavegotchiGameObject, AavegotchiObject, Tuple } from \"types\";\nimport { getGameHeight, getGameWidth } from \"game/helpers\";\nimport { assets, SpritesheetAsset } from \"game/assets\";\nimport { constructSpritesheet } from \"../helpers/spritesheet\";\nimport { customiseSvg } from \"helpers/aavegotchi\";\nimport { Socket } from \"socket.io-client\";\nimport { isLog_loadFiles } from \"helpers/vars\";\nimport Phaser from 'phaser';\nimport { pinballScene } from \"./pinball/pinball-scene\";\n\ninterface AavegotchiWithSvg extends AavegotchiObject {\n\tsvg: Tuple<string, 4>;\n}\n\nconst sceneConfig: Phaser.Types.Scenes.SettingsConfig = {\n\tactive: false,\n\tvisible: false,\n\tkey: \"Boot\",\n};\n\n/**\n * The initial scene that loads all necessary assets to the game.\n */\nexport class BootScene extends Phaser.Scene {\n\tprivate socket?: Socket;\n\tprivate connected?: boolean;\n\tprivate assetsLoaded?: boolean;\n\tprivate gotchi?: AavegotchiGameObject;\n\tprivate loadIndex: number;\n\tprivate progressBarContainer?: Phaser.GameObjects.Rectangle;\n\tprivate progressBar?: Phaser.GameObjects.Rectangle;\n\tprivate loadingText?: Phaser.GameObjects.Text;\n\n\tconstructor() {\n\t\tsuper(sceneConfig);\n\t\tthis.loadIndex = 0;\n\n        window.onmessage = (event) => { \n            if(event.data.msgType === \"TILT_BUTTON\") {\n                console.log(\"received tilt button window message\");\n                if(!pinballScene) return;\n                console.log(pinballScene, pinballScene.scene);\n                if(!pinballScene.scene) return;\n                if(!pinballScene.scene.isActive()) return;\n                \n                pinballScene.tiltBehavior.tilt();\n            }\n        };\n\t}\n\n\tpublic preload = (): void => {\n\t\t// Construct progress bar\n\t\tthis.createProgressBar();\n\n\t\t// Construct gotchi game object from registry\n\t\tconst selectedGotchi = this.game.registry.values\n\t\t\t.selectedGotchi as AavegotchiWithSvg;\n\t\tthis.gotchi = {\n\t\t\t...selectedGotchi,\n\t\t\tspritesheetKey: \"PLAYER\",\n\t\t};\n\n\t\t// Checks connection to the server\n\t\tthis.socket = this.game.registry.values.socket;\n\t\t!this.socket?.connected\n\t\t\t? this.socket?.on(\"connect\", () => {\n\t\t\t\tthis.handleConnection();\n\t\t\t})\n\t\t\t: this.handleConnection();\n\n\t\t// Listener that triggers when an asset has loaded\n\t\tthis.load.on(\n\t\t\t\"filecomplete\",\n\t\t\t(key: string) => {\n\t\t\t\tif (isLog_loadFiles) console.log(`filecomplete [key: ${key}] [assets.length: ${assets.length}] [loadIndex: ${this.loadIndex}]`);\n\n\t\t\t\t// As the spritesheet is the last asset to load in, we can attempt to start the game\n\t\t\t\tif (key === \"PLAYER\") {\n\t\t\t\t\tthis.assetsLoaded = true;\n\t\t\t\t\tthis.loadingText?.setText(`Connecting to server...`);\n\t\t\t\t\tthis.startGame();\n\t\t\t\t}\n\t\t\t\tif (this.loadIndex === assets.length && this.gotchi) {\n\t\t\t\t\tthis.loadInGotchiSpritesheet(this.gotchi);\n\t\t\t\t} else {\n\t\t\t\t\tthis.loadNextFile(this.loadIndex);\n\t\t\t\t}\n\t\t\t},\n\t\t\tthis\n\t\t);\n\t\tthis.loadNextFile(0);\n\t};\n\n\t/**\n\t * Submits gotchi data to the server and attempts to start game\n\t */\n\tprivate handleConnection = () => {\n\t\tconsole.log(\"handleConnection()\");\n\t\tconst gotchi = this.game.registry.values.selectedGotchi as AavegotchiObject;\n\t\tthis.connected = true;\n\t\tthis.socket?.emit(\"setGotchiData\", {\n\t\t\tname: gotchi.name,\n\t\t\ttokenId: gotchi.id,\n\t\t});\n\n\t\tthis.startGame();\n\t};\n\n\t/**\n\t * If all the assets are loaded in, and user is connected to server, start game\n\t */\n\tprivate startGame = () => {\n\t\tconsole.log(`Attempting 'startGame' [assetsLoaded: ${this.assetsLoaded}]`);\n\t\tif (this.assetsLoaded /*&& this.connected*/) {\n\t\t\tthis.scene.start(\"Pinball\", { selectedGotchi: this.gotchi });\n\t\t}\n\t};\n\n\t/**\n\t * Renders UI component to display loading progress\n\t */\n\tprivate createProgressBar = () => {\n\t\tconst width = getGameWidth(this) * 0.5;\n\t\tconst height = 12;\n\t\tthis.progressBarContainer = this.add\n\t\t\t.rectangle(\n\t\t\t\tgetGameWidth(this) / 2,\n\t\t\t\tgetGameHeight(this) / 2,\n\t\t\t\twidth,\n\t\t\t\theight,\n\t\t\t\t0x12032e\n\t\t\t)\n\t\t\t.setOrigin(0.5);\n\n\t\tthis.progressBar = this.add\n\t\t\t.rectangle(\n\t\t\t\t(getGameWidth(this) - width) / 2,\n\t\t\t\tgetGameHeight(this) / 2,\n\t\t\t\t0,\n\t\t\t\theight,\n\t\t\t\t0x6d18f8\n\t\t\t)\n\t\t\t.setOrigin(0, 0.5);\n\n\t\tthis.loadingText = this.add\n\t\t\t.text(getGameWidth(this) / 2, getGameHeight(this) / 2 - 32, \"Loading...\")\n\t\t\t.setFontSize(24)\n\t\t\t.setOrigin(0.5);\n\t};\n\n\t/**\n\t * Iterates through each file in the assets array\n\t */\n\tprivate loadNextFile = (index: number) => {\n\t\tconst file = assets[index];\n\t\tthis.loadIndex++;\n\n\t\tif (isLog_loadFiles) {\n\t\t\tlet colorStyle;\n\n\t\t\tswitch (file.type) {\n\t\t\t\tcase \"IMAGE\":\n\t\t\t\t\tcolorStyle = \"color: #00ff00\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"SVG\":\n\t\t\t\t\tcolorStyle = \"color: #00ffff\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"AUDIO\":\n\t\t\t\t\tcolorStyle = \"color: #3399ff\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"SPRITESHEET\":\n\t\t\t\t\tcolorStyle = \"color: #ff99ff\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"TILEMAP_TILES\":\n\t\t\t\t\tcolorStyle = \"color: #ffcc99\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"TILEMAP_MAP\":\n\t\t\t\t\tcolorStyle = \"color: #ffff66\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"JSON\":\n\t\t\t\t\tcolorStyle = \"color: #ff9900\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"ATLAS\":\n\t\t\t\t\tcolorStyle = \"color: #ff3399\";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tcolorStyle = \"color: white\";\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (isLog_loadFiles) console.log(\n\t\t\t\t`%cloadNextFile [file.key: ${file.key}] [assets.length: ${assets.length}] [file source: ${file.src}] [loadIndex: ${this.loadIndex}] [file type: ${file.type}]`,\n\t\t\t\tcolorStyle\n\t\t\t);\n\t\t}\n\n\t\tif (this.loadingText && this.progressBar && this.progressBarContainer) {\n\t\t\tthis.loadingText.setText(`Loading: ${file.key}`);\n\t\t\tthis.progressBar.width =\n\t\t\t\t(this.progressBarContainer.width / assets.length) * index;\n\t\t}\n\n\t\tswitch (file.type) {\n\t\t\tcase \"IMAGE\":\n\t\t\t\tthis.load.image(file.key, file.src);\n\t\t\t\tbreak;\n\t\t\tcase \"SVG\":\n\t\t\t\tthis.load.svg(file.key, file.src);\n\t\t\t\tbreak;\n\t\t\tcase \"AUDIO\":\n\t\t\t\tthis.load.audio(file.key, [file.src]);\n\t\t\t\tbreak;\n\t\t\tcase \"SPRITESHEET\":\n\t\t\t\tthis.load.spritesheet(\n\t\t\t\t\tfile.key,\n\t\t\t\t\tfile.src,\n\t\t\t\t\t(file as SpritesheetAsset).data\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase \"TILEMAP_TILES\":\n\t\t\t\tthis.load.image(file.key, file.src);\n\t\t\t\tbreak;\n\t\t\tcase \"TILEMAP_MAP\":\n\t\t\t\tthis.load.tilemapTiledJSON(file.key, file.src);\n\t\t\t\tbreak;\n\t\t\tcase \"JSON\":\n\t\t\t\tthis.load.json(file.key, file.src);\n\t\t\t\tbreak;\n\t\t\tcase \"ATLAS\":\n\t\t\t\tthis.load.atlas(file.key, file.src, file.atlasJson);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t};\n\n\t/**\n\t * Constructs and loads in the Aavegotchi spritesheet, you can use customiseSVG() to create custom poses and animations\n\t */\n\tprivate loadInGotchiSpritesheet = async (\n\t\tgotchiObject: AavegotchiGameObject\n\t) => {\n\t\tconst svg = gotchiObject.svg;\n\t\tconst spriteMatrix = [\n\t\t\t// Front\n\t\t\t[\n\t\t\t\tcustomiseSvg(svg[0], { removeBg: true }),\n\t\t\t\tcustomiseSvg(svg[0], {\n\t\t\t\t\tarmsUp: true,\n\t\t\t\t\teyes: \"happy\",\n\t\t\t\t\tfloat: true,\n\t\t\t\t\tremoveBg: true,\n\t\t\t\t}),\n\t\t\t],\n\t\t\t// Left\n\t\t\t[\n\t\t\t\tcustomiseSvg(svg[1], { removeBg: true }),\n\t\t\t],\n\t\t\t// Right\n\t\t\t[\n\t\t\t\tcustomiseSvg(svg[2], { removeBg: true }),\n\t\t\t],\n\t\t\t// Right\n\t\t\t[\n\t\t\t\tcustomiseSvg(svg[3], { removeBg: true }),\n\t\t\t]\n\t\t];\n\t\tconst { src, dimensions } = await constructSpritesheet(spriteMatrix);\n\t\tthis.load.spritesheet(gotchiObject.spritesheetKey, src, {\n\t\t\tframeWidth: dimensions.width / dimensions.x,\n\t\t\tframeHeight: dimensions.height / dimensions.y,\n\t\t});\n\t\tthis.load.start();\n\t};\n}\n","import { ballMoveDownRedRingSpeed } from \"helpers/vars\";\r\nimport { redRing_go } from \"./scene_plinko\";\r\n\r\nconst startExtraY = -20;\r\nconst moveDownAmount = 20;\r\n\r\nexport class BallFollowingRedRing {\r\n\tprivate ball_body: any;\r\n\r\n\tconstructor(options: any) {\r\n\t\tthis.ball_body = options.ball_body;\r\n\r\n\t\tthis.start();\r\n\t}\r\n\r\n\tstart() {\r\n\t\tthis.ball_body.gameObject.setPosition(redRing_go.x, redRing_go.y + startExtraY);\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tconst newY = this.ball_body.gameObject.y + ballMoveDownRedRingSpeed;\r\n\t\tconst startY = redRing_go.y + startExtraY;\r\n\r\n\t\tif(this.ball_body.gameObject.y >= startY + moveDownAmount) {\r\n\t\t\tthis.finishTubing();\r\n\t\t\t// this.ball_body.gameObject.setPosition(redRing_go.x, startY + moveDownAmount);\r\n\t\t} else {\r\n\t\t\tthis.ball_body.gameObject.setPosition(redRing_go.x, newY);\r\n\t\t}\r\n\t}\r\n\r\n\tfinishTubing() {\r\n\t\tthis.ball_body.gameObject.alpha = 0;\r\n\t}\r\n}","const startExtraY = -25;\r\nconst moveDownSpeed = 0.2;\r\nconst moveDownAmount = 50;\r\n\r\nexport class BallGoingInTube {\r\n\tprivate ball_body: any;\r\n\tprivate tube_body: any;\r\n\r\n\tconstructor(options: any) {\r\n\t\tthis.ball_body = options.ball_body;\r\n\t\tthis.tube_body = options.tube_body;\r\n\r\n\t\tthis.start();\r\n\t}\r\n\r\n\tstart() {\r\n\t\tthis.ball_body.gameObject.setPosition(this.tube_body.position.x, this.tube_body.position.y + startExtraY);\r\n\t}\r\n\r\n\tupdate() {\r\n\t\tconst newY = this.ball_body.gameObject.y + moveDownSpeed;\r\n\t\tconst startY = this.tube_body.position.y + startExtraY;\r\n\r\n\t\tif(this.ball_body.gameObject.y >= startY + moveDownAmount) {\r\n\t\t\tthis.finishTubing();\r\n\t\t} else {\r\n\t\t\tthis.ball_body.gameObject.setPosition(this.tube_body.position.x, newY);\r\n\t\t}\r\n\t}\r\n\r\n\tfinishTubing() {\r\n\t\tthis.ball_body.gameObject.alpha = 0;\r\n\t}\r\n}","import { BG_MUSIC, PLINKO_OST } from \"game/assets\";\r\nimport { is_musicEnabled } from \"helpers/vars\";\r\n\r\nconst sceneConfig: Phaser.Types.Scenes.SettingsConfig = {\r\n\tactive: false,\r\n\tvisible: false,\r\n\tkey: \"BGMusic\",\r\n};\r\n\r\nexport class BGMusicScene extends Phaser.Scene {\r\n\tprivate bgMusic: any;\r\n\tpublic plinkoOST: any;\r\n\r\n    constructor () {\r\n        super(sceneConfig);\r\n    }\r\n\r\n\tcreate() {\r\n\t\tconst plinkoOST_loopMarker = {\r\n\t\t\tname: 'plinkoOST_loop',\r\n\t\t\tstart: 0,\r\n\t\t\tduration: 31,\r\n\t\t\tconfig: {\r\n\t\t\t\tloop: true,\r\n\t\t\t\tvolume: 0.2\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.plinkoOST = this.sound.add(PLINKO_OST);\r\n\t\tthis.plinkoOST.addMarker(plinkoOST_loopMarker);\r\n\r\n\t\tthis.scene.setVisible(false);\r\n\r\n\t\tconst pinballOST_loopMarker = {\r\n\t\t\tname: 'pinballOST_loop',\r\n\t\t\tstart: 0,\r\n\t\t\tduration: 506,\r\n\t\t\tconfig: {\r\n\t\t\t\tloop: true,\r\n\t\t\t\tvolume: 0.2\r\n\t\t\t}\r\n\t\t};\r\n\t\tthis.bgMusic = this.sound.add(BG_MUSIC);\r\n\t\tthis.bgMusic.addMarker(pinballOST_loopMarker);\r\n\t\tthis.playMusic();\r\n    }\r\n\r\n\tupdate() {\r\n\t\t//\r\n    }\r\n\r\n\tplayMusic() {\r\n\t\tif(is_musicEnabled) this.bgMusic.play('pinballOST_loop');\r\n\t}\r\n\r\n\tresumeMusic() {\r\n\t\tif(is_musicEnabled) this.bgMusic.resume();\r\n\t}\r\n\r\n\tpauseMusic() {\r\n\t\tif(is_musicEnabled) this.bgMusic.pause();\r\n\t}\r\n\r\n\tplay_plinkoOST() {\r\n\t\tif(is_musicEnabled) this.plinkoOST.play('plinkoOST_loop');\r\n\t}\r\n\r\n\tresume_plinkoOST() {\r\n\t\tif(is_musicEnabled) this.plinkoOST.resume();\r\n\t}\r\n\r\n\tpause_plinkoOST() {\r\n\t\tif(is_musicEnabled) this.plinkoOST.pause();\r\n\t}\r\n}","import { currentScore } from \"game/unOrganized/stats\";\r\nimport { Socket } from \"socket.io-client\";\r\nimport { pinballScene } from \"../pinball/pinball-scene\";\r\n\r\nconst sceneConfig: Phaser.Types.Scenes.SettingsConfig = {\r\n\tactive: false,\r\n\tvisible: false,\r\n\tkey: \"Game\",\r\n};\r\n\r\nexport class GameScene extends Phaser.Scene {\r\n\tprivate socket?: Socket;\r\n\r\n\tprivate isGameOver = false;\r\n\r\n\tconstructor() {\r\n\t\tsuper(sceneConfig);\r\n\t}\r\n\r\n\tpublic create(): void {\r\n\t\tthis.socket = this.game.registry.values.socket;\r\n\t\tthis.socket?.emit('gameStarted');\r\n\r\n\t\tconsole.log(this.socket);\r\n\t}\r\n\r\n\tpublic update(): void {\r\n\t\tif (pinballScene && !pinballScene.pinball_isGameOver) {\r\n\t\t\t//\r\n\t\t} else {\r\n\t\t\tif (!this.isGameOver) {\r\n\t\t\t\tthis.isGameOver = true;\r\n        console.log(\"emitting 'gameOver' to socket with score:\", currentScore);\r\n\t\t\t\tthis.socket?.emit('gameOver', { score: currentScore });\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic resetGameOver() {\r\n\t\tconsole.log(\"resettin game over\");\r\n\t\tthis.isGameOver = false;\r\n\t}\r\n}","import { useCallback, useEffect, useState } from \"react\";\nimport {\n\tLayout,\n\tGotchiSelector,\n\tDetailsPanel,\n\tModal,\n\tGotchiSVG,\n} from \"components\";\nimport { Link } from \"react-router-dom\";\nimport globalStyles from \"theme/globalStyles.module.css\";\nimport { useServer } from \"server-store\";\nimport { useWeb3, updateAavegotchis } from \"web3/context\";\nimport { getDefaultGotchi, getPreviewGotchi } from \"helpers/aavegotchi\";\nimport gotchiLoading from \"assets/gifs/loading.gif\";\nimport { playSound } from \"helpers/hooks/useSound\";\nimport styles from \"./styles.module.css\";\nimport { RotateIcon } from \"assets\";\nimport { is_allowDefaultAavegotchi } from \"helpers/vars\";\n\n\nconst Home = () => {\n\tconst {\n\t\tstate: {\n\t\t\tusersAavegotchis,\n\t\t\taddress,\n\t\t\tselectedAavegotchiId,\n\t\t\tnetworkId,\n\t\t\tprovider,\n\t\t},\n\t\tdispatch,\n\t} = useWeb3();\n\tconst { highscores } = useServer();\n\tconst [showRulesModal, setShowRulesModal] = useState(false);\n\tconst [gotchiSide, setGotchiSide] = useState<0 | 1 | 2 | 3>(0);\n\n\tconst useDefaultGotchi = () => {\n\t\tdispatch({\n\t\t\ttype: \"SET_USERS_AAVEGOTCHIS\",\n\t\t\tusersAavegotchis: [getDefaultGotchi()],\n\t\t});\n\t};\n\n\tconst usePreviewGotchis = async () => {\n\t\tif (provider) {\n\t\t\ttry {\n\t\t\t\tconst gotchi1 = await getPreviewGotchi(provider, {\n\t\t\t\t\tname: \"GotchiDev\",\n\t\t\t\t\tid: \"OG\",\n\t\t\t\t\tcollateral: \"aLINK\",\n\t\t\t\t\twearables: [0, 0, 73, 72, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t\t\tnumericTraits: [10, 50, 50, 100, 40, 40]\n\t\t\t\t});\n\t\t\t\tconst gotchi2 = await getPreviewGotchi(provider, {\n\t\t\t\t\tname: \"Mascot\",\n\t\t\t\t\tid: \"None\",\n\t\t\t\t\tnumericTraits: [50, 50, 50, 0, 40, 40]\n\t\t\t\t})\n\t\t\t\tconst gotchi3 = await getPreviewGotchi(provider, {\n\t\t\t\t\tname: \"H4cker\",\n\t\t\t\t\tid: \"l33T\",\n\t\t\t\t\tcollateral: \"aUSDT\",\n\t\t\t\t\twearables: [211, 212, 213, 214, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n\t\t\t\t\tnumericTraits: [100, 100, 100, 100, 100, 100]\n\t\t\t\t});\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"SET_USERS_AAVEGOTCHIS\",\n\t\t\t\t\tusersAavegotchis: [gotchi1, gotchi2, gotchi3],\n\t\t\t\t});\n\t\t\t} catch (err) {\n\t\t\t\tdispatch({\n\t\t\t\t\ttype: \"SET_ERROR\",\n\t\t\t\t\terror: err\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t};\n\n\tconst rotateGotchi = () => {\n\t\tconst currentPos = gotchiSide;\n\t\tswitch (currentPos) {\n\t\t\tcase 0:\n\t\t\t\tsetGotchiSide(1);\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tsetGotchiSide(3);\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tsetGotchiSide(0);\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tsetGotchiSide(2);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tsetGotchiSide(0);\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\t/**\n\t * Updates global state with selected gotchi\n\t */\n\tconst handleSelect = useCallback(\n\t\t(gotchiId: string) => {\n\t\t\tdispatch({\n\t\t\t\ttype: \"SET_SELECTED_AAVEGOTCHI\",\n\t\t\t\tselectedAavegotchiId: gotchiId,\n\t\t\t});\n\t\t},\n\t\t[dispatch]\n\t);\n\n\tuseEffect(() => {\n\t\tif (process.env.REACT_APP_OFFCHAIN) return useDefaultGotchi();\n\n\t\tif (address) {\n\t\t\tconst prevGotchis = usersAavegotchis || [];\n\t\t\tif (\n\t\t\t\tprevGotchis.find(\n\t\t\t\t\t(gotchi) => gotchi.owner.id.toLowerCase() === address.toLowerCase()\n\t\t\t\t)\n\t\t\t)\n\t\t\t\treturn;\n\n\t\t\tdispatch({\n\t\t\t\ttype: \"SET_SELECTED_AAVEGOTCHI\",\n\t\t\t\tselectedAavegotchiId: undefined,\n\t\t\t});\n\t\t\tupdateAavegotchis(dispatch, address);\n\t\t}\n\t}, [address]);\n\n\tif (networkId !== 137 && !process.env.REACT_APP_OFFCHAIN) {\n\t\treturn (\n\t\t\t<Layout>\n\t\t\t\t<div className={globalStyles.container}>\n\t\t\t\t\t<div className={styles.errorContainer}>\n\t\t\t\t\t\t<h1>{!networkId ? \"Not connected\" : \"Wrong network\"}</h1>\n\t\t\t\t\t\t<p className={styles.secondaryErrorMessage}>\n\t\t\t\t\t\t\tPlease connect to the Polygon network.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Layout>\n\t\t);\n\t}\n\n\tlet defaultAavegotchiStuff;\n\tif (is_allowDefaultAavegotchi) {\n\t\tdefaultAavegotchiStuff =\n\t\t\t<button\n\t\t\t\tonClick={usePreviewGotchis}\n\t\t\t\tclassName={globalStyles.primaryButton}\n\t\t\t>\n\t\t\t\tUse Preview Gotchis\n\t\t\t</button>\n\t} else {\n\t\tprocess.env.NODE_ENV === \"development\" && (\n\t\t\tdefaultAavegotchiStuff =\n\t\t\t<button\n\t\t\t\tonClick={usePreviewGotchis}\n\t\t\t\tclassName={globalStyles.primaryButton}\n\t\t\t>\n\t\t\t\tUse Preview Gotchis\n\t\t\t</button>\n\t\t)\n\t}\n\tconsole.log(\"process.env.NODE_ENV:\", process.env.NODE_ENV);\n\n\tif (usersAavegotchis && usersAavegotchis?.length <= 0) {\n\t\treturn (\n\t\t\t<Layout>\n\t\t\t\t<div className={globalStyles.container}>\n\t\t\t\t\t<div className={styles.errorContainer}>\n\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\tNo Aavegotchis found for address - Please make sure the correct\n\t\t\t\t\t\t\twallet is connected.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p className={styles.secondaryErrorMessage}>\n\t\t\t\t\t\t\tDon’t have an Aavegotchi? Visit the Baazaar to get one.\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref=\"https://aavegotchi.com/baazaar/portals-closed?sort=latest\"\n\t\t\t\t\t\t\ttarget=\"__blank\"\n\t\t\t\t\t\t\tclassName={globalStyles.primaryButton}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tVisit Bazaar\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t{/* Allows developers to build without the requirement of owning a gotchi */}\n\t\t\t\t\t\t{defaultAavegotchiStuff}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Layout>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Layout>\n\t\t\t{showRulesModal && (\n\t\t\t\t<Modal onHandleClose={() => setShowRulesModal(false)}>\n\t\t\t\t\t<div className={styles.modalContent}>\n\t\t\t\t\t\t<h1>Minigame Template</h1>\n\t\t\t\t\t\t<p>Just a modal example. You can put your game rules in here.</p>\n\t\t\t\t\t</div>\n\t\t\t\t</Modal>\n\t\t\t)}\n\t\t\t<div className={globalStyles.container}>\n\t\t\t\t<div className={styles.homeContainer}>\n\t\t\t\t\t<div className={styles.selectorContainer}>\n\t\t\t\t\t\t<GotchiSelector\n\t\t\t\t\t\t\tinitialGotchiId={selectedAavegotchiId}\n\t\t\t\t\t\t\tgotchis={usersAavegotchis}\n\t\t\t\t\t\t\tselectGotchi={handleSelect}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={styles.gotchiContainer}>\n\t\t\t\t\t\t<button className={styles.rotateButton}>\n\t\t\t\t\t\t\t<RotateIcon width={32} height={24} onClick={rotateGotchi} />\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t{selectedAavegotchiId ? (\n\t\t\t\t\t\t\t<GotchiSVG\n\t\t\t\t\t\t\t\tside={gotchiSide}\n\t\t\t\t\t\t\t\ttokenId={selectedAavegotchiId}\n\t\t\t\t\t\t\t\toptions={{ animate: true, removeBg: true }}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<img src={gotchiLoading} alt=\"Loading Aavegotchi\" />\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<h1 className={styles.highscore}>\n\t\t\t\t\t\t\tHighscore:{\" \"}\n\t\t\t\t\t\t\t{(usersAavegotchis &&\n\t\t\t\t\t\t\t\thighscores?.find(\n\t\t\t\t\t\t\t\t\t(score) => score.tokenId === selectedAavegotchiId\n\t\t\t\t\t\t\t\t)?.score) ||\n\t\t\t\t\t\t\t\t0}\n\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t<div className={styles.buttonContainer}>\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tto=\"/play\"\n\t\t\t\t\t\t\t\tclassName={`${globalStyles.primaryButton} ${!usersAavegotchis ? globalStyles.disabledLink : \"\"\n\t\t\t\t\t\t\t\t\t}`}\n\t\t\t\t\t\t\t\tonClick={() => playSound(\"send\")}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tClick To Start\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t{/* <button\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tplaySound(\"click\");\n\t\t\t\t\t\t\t\t\tsetShowRulesModal(true);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tclassName={`${globalStyles.secondaryButton} ${globalStyles.circleButton}`}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t?\n\t\t\t\t\t\t\t</button> */}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{/* <div className={styles.detailsPanelContainer}>\n\t\t\t\t\t\t<DetailsPanel\n\t\t\t\t\t\t\tselectedGotchi={usersAavegotchis?.find(\n\t\t\t\t\t\t\t\t(gotchi) => gotchi.id === selectedAavegotchiId\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div> */}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Layout>\n\t);\n};\n\nexport default Home;\n","import { Layout } from 'components/Layout';\nimport { useServer } from 'server-store';\nimport { useWeb3 } from 'web3/context';\nimport { Leaderboard as LeaderboardComponent } from 'components/Leaderboard';\nimport globalStyles from 'theme/globalStyles.module.css';\n\nconst Leaderboard = () => {\n  const { state: { usersAavegotchis } } = useWeb3();\n  const { highscores } = useServer();\n\n  return (\n    <Layout>\n      <div className={globalStyles.container}>\n        <LeaderboardComponent highscores={highscores} ownedGotchis={usersAavegotchis?.map((gotchi) => gotchi.id)} />\n      </div>\n    </Layout>\n  );\n};\n\nexport default Leaderboard;\n","import { Layout } from 'components/Layout';\nimport { useState } from 'react';\nimport { playSound } from 'helpers/hooks/useSound';\nimport styles from './styles.module.css';\n\nconst Settings = () => {\n  const [seVolume, setSEVolume] = useState(window.localStorage.getItem('seVolume') ?? '5');\n  const [musicVolume, setMusicVolume] = useState(window.localStorage.getItem('musicVolume') ?? '5');\n\n  const handleSEVolumeChange = () => {\n    window.localStorage.setItem('seVolume', seVolume);\n    playSound('click');\n  };\n\n  const handleMusicVolumeChange = () => {\n    window.localStorage.setItem('musicVolume', musicVolume);\n    playSound('click');\n  };\n\n  return (\n    <Layout>\n      <div className={styles.container}>\n        <h1>Audio settings</h1>\n        <div className={styles.inputContainer}>\n          <label htmlFor=\"sound-effects\">\n            Sound Effects:\n            {Number(seVolume) * 10}\n            %\n          </label>\n          <input\n            value={seVolume}\n            type=\"range\"\n            id=\"sound-effects\"\n            name=\"sound-effects\"\n            min=\"0\"\n            max=\"10\"\n            step=\"1\"\n            onChange={(e) => setSEVolume(e.target.value)}\n            onClick={handleSEVolumeChange}\n          />\n        </div>\n        <div className={styles.inputContainer}>\n          <label htmlFor=\"music\">\n            Music:\n            {Number(musicVolume) * 10}\n            %\n          </label>\n          <input\n            value={musicVolume}\n            type=\"range\"\n            id=\"music\"\n            name=\"music\"\n            min=\"0\"\n            max=\"10\"\n            step=\"1\"\n            onChange={(e) => setMusicVolume(e.target.value)}\n            onClick={handleMusicVolumeChange}\n          />\n        </div>\n      </div>\n    </Layout>\n  );\n};\n\nexport default Settings;\n","import Game from 'game/main';\n\nconst Play = () => (\n  <Game />\n);\n\nexport default Play;\n","import Web3ContextProvider from 'web3/context';\nimport { ServerProvider } from 'server-store';\nimport Home from 'pages/Home';\nimport Leaderboard from 'pages/Leaderboard';\nimport Settings from 'pages/Settings';\nimport Play from 'pages/Play';\nimport {\n\tSwitch,\n\tRoute,\n\tBrowserRouter as Router,\n} from 'react-router-dom';\nimport { version } from 'helpers/vars';\n\nconsole.log(\"Version: \" + version);\n\nconst nav: Array<{ path: string, component: () => JSX.Element, exact?: boolean }> = [\n\t{\n\t\tpath: '/',\n\t\tcomponent: Home,\n\t\texact: true,\n\t},\n\t{\n\t\tpath: '/leaderboard',\n\t\tcomponent: Leaderboard,\n\t},\n\t{\n\t\tpath: '/settings',\n\t\tcomponent: Settings,\n\t},\n\t{\n\t\tpath: '/play',\n\t\tcomponent: Play,\n\t},\n];\n\nfunction App() {\n  return (\n    <Web3ContextProvider>\n      <ServerProvider>\n        <Router>\n          <Switch>\n            {nav.map((item, i) => <Route path={item.path} exact={item.exact} key={i} component={item.component} />)}\n          </Switch>\n        </Router>\n      </ServerProvider>\n    </Web3ContextProvider>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({\n      getCLS, getFID, getFCP, getLCP, getTTFB,\n    }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"styles_header__3r-ot\",\"desktopHeaderContent\":\"styles_desktopHeaderContent__3zJJB\",\"mobileHeaderContent\":\"styles_mobileHeaderContent__3hf0P\",\"navLink\":\"styles_navLink__1xY9c\",\"activeNavLink\":\"styles_activeNavLink__3-3sm\",\"walletContainer\":\"styles_walletContainer__1bPPm\",\"walletAddress\":\"styles_walletAddress__330Cq\",\"connectedDetails\":\"styles_connectedDetails__1Mzme\",\"navContainer\":\"styles_navContainer__2A0Qc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"leaderboard\":\"styles_leaderboard__4Ca0z\",\"leaderboardOptions\":\"styles_leaderboardOptions__DWORW\",\"endDate\":\"styles_endDate__tx05X\",\"toggle\":\"styles_toggle__1mHWL\",\"row\":\"styles_row__3LJX-\",\"headerRow\":\"styles_headerRow__3TK5q\",\"cell\":\"styles_cell__1eAzY\",\"owned\":\"styles_owned__1bnSz\",\"hide\":\"styles_hide__2ZQU5\",\"pageSelector\":\"styles_pageSelector__rFRZg\",\"selector\":\"styles_selector__10gjA\",\"selected\":\"styles_selected__1WoDg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"globalStyles_container__2pd-v\",\"glow\":\"globalStyles_glow__1acma\",\"primaryButton\":\"globalStyles_primaryButton__B4NnZ\",\"secondaryButton\":\"globalStyles_secondaryButton__3BdlK\",\"circleButton\":\"globalStyles_circleButton__3Zw1s\",\"disabledLink\":\"globalStyles_disabledLink__1qhud\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gotchiSelector\":\"styles_gotchiSelector__1KLe6\",\"selectorContainer\":\"styles_selectorContainer__1BWIe\",\"selectorWrapper\":\"styles_selectorWrapper__3Mj9Z\",\"selector\":\"styles_selector__2HhhR\",\"loadingContainer\":\"styles_loadingContainer__1EKzK\",\"gotchiContainer\":\"styles_gotchiContainer__34W_e\",\"chevron\":\"styles_chevron__2RCJs\",\"up\":\"styles_up__WEAZ9\",\"down\":\"styles_down__2rXqE\",\"enabled\":\"styles_enabled__ibD7O\",\"disabled\":\"styles_disabled__1RUCc\",\"selected\":\"styles_selected__B_5KW\",\"filterOptions\":\"styles_filterOptions__zpHs7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"detailsPanel\":\"styles_detailsPanel__1cvw4\",\"traitRow\":\"styles_traitRow__19KrI\",\"modifierRow\":\"styles_modifierRow__3R96A\",\"modifierMeter\":\"styles_modifierMeter__2FMrm\",\"progress\":\"styles_progress__2ezRK\",\"emoji\":\"styles_emoji__1n1rM\",\"highscore\":\"styles_highscore__1VHrD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"homeContainer\":\"styles_homeContainer__3-yrU\",\"selectorContainer\":\"styles_selectorContainer__1P9Hr\",\"gotchiContainer\":\"styles_gotchiContainer__32wkW\",\"rotateButton\":\"styles_rotateButton__1T6S3\",\"highscore\":\"styles_highscore__pwzWD\",\"buttonContainer\":\"styles_buttonContainer__TOZX7\",\"detailsPanelContainer\":\"styles_detailsPanelContainer__2buCJ\",\"errorContainer\":\"styles_errorContainer__3GOYn\",\"secondaryErrorMessage\":\"styles_secondaryErrorMessage__20Wa_\",\"modalContent\":\"styles_modalContent__3lfoc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paddlesInput_container\":\"styles_paddlesInput_container__w_0O9\",\"paddlesInput_button_container\":\"styles_paddlesInput_button_container__2hJN4\",\"paddlesInput_button\":\"styles_paddlesInput_button__2wV3N\",\"paddlesInput_button_active\":\"styles_paddlesInput_button_active__3KuKA\",\"keyboardKeys_container\":\"styles_keyboardKeys_container__2X5nZ\",\"keyboardKey_container\":\"styles_keyboardKey_container__2elo3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inputContainer\":\"styles_inputContainer__3LSQ7\",\"open\":\"styles_open__3yZcU\",\"sortOptions\":\"styles_sortOptions__2ygbx\",\"toggle\":\"styles_toggle__2inQd\",\"option\":\"styles_option__1BiSD\",\"active\":\"styles_active__Gzd77\",\"inactive\":\"styles_inactive__tqnwB\",\"asc\":\"styles_asc__30-yo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gameOver_container\":\"style_gameOver_container__NPpTw\",\"gameOver_borderContainer\":\"style_gameOver_borderContainer__1Etvd\",\"gameOver_border_red\":\"style_gameOver_border_red__1l8CW\",\"gameOver_border_orange\":\"style_gameOver_border_orange__11TNc\",\"gameOver_border_yellow\":\"style_gameOver_border_yellow__1GYTk\",\"gameOver_background\":\"style_gameOver_background__3CAYU\",\"gameOver_retryContainer\":\"style_gameOver_retryContainer__3FUfh\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"stroke\":\"styles_stroke__2HUzI\",\"hamburgerWrapper\":\"styles_hamburgerWrapper__2GOoR\",\"open\":\"styles_open__1n0oY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tiltButtonContainer\":\"style_tiltButtonContainer__1IWpt\",\"tiltButtonImg\":\"style_tiltButtonImg__c4-eZ\",\"tiltButtonTextImg\":\"style_tiltButtonTextImg__FNIlp\",\"TILT_underLine\":\"style_TILT_underLine__ETe4s\",\"backButtonText\":\"style_backButtonText__3lHta\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"background\":\"styles_background__2mUZ7\",\"shadow\":\"styles_shadow__uCkpd\",\"panel\":\"styles_panel___fKkF\",\"closeButton\":\"styles_closeButton__2k6vR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inputContainer\":\"styles_inputContainer__1eMg-\",\"open\":\"styles_open__3PNXw\",\"input\":\"styles_input__3rVtF\",\"toggle\":\"styles_toggle__295DP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"debug\":\"styles_debug__3tiSc\",\"entry\":\"styles_entry__3-pLR\",\"note\":\"styles_note__die7O\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"statsBar_container\":\"styles_statsBar_container__17Gjk\",\"statsBar_multiplier\":\"styles_statsBar_multiplier__1-tjO\",\"statsBar_score\":\"styles_statsBar_score__3J1tE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__1pTlD\",\"inputContainer\":\"styles_inputContainer__3sIsv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"styles_container__216dk\",\"open\":\"styles_open__2Ftwy\"};"],"sourceRoot":""}